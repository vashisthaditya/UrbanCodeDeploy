//>>built
(function(l,m){var k,j,e=function(){},h=function(a){for(var b in a)return 0;return 1},d={}.toString,c=function(a){return"[object Function]"==d.call(a)},b=function(a){return"[object String]"==d.call(a)},a=function(a){return"[object Array]"==d.call(a)},f=function(a,b){if(a)for(var f=0;f<a.length;)b(a[f++])},n=function(a,b){for(var f in b)a[f]=b[f];return a},r=function(a,b){return n(Error(a),{src:"dojoLoader",info:b})},t=1,q=function(){return"_"+t++},o=function(a,b,f){return ia(a,b,f,0,o)},s=this,u=
s.document,w=u&&u.createElement("DiV"),v=o.has=function(a){return c(x[a])?x[a]=x[a](s,u,w):x[a]},x=v.cache=m.hasCache;v.add=function(a,b,f,c){(void 0===x[a]||c)&&(x[a]=b);return f&&v(a)};for(var y in l.has)v.add(y,l.has[y],0,1);var C=0,B=[],A=0,z=e,E=e,D;o.isXdUrl=e;o.initSyncLoader=function(a,b,f){A||(A=a,z=b,E=f);return{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:B,modules:H,execQ:da,getModule:ha,injectModule:xa,setArrived:pa,signal:R,finishExec:ra,execModule:sa,
dojoRequirePlugin:A,getLegacyMode:function(){return C},guardCheckComplete:ta}};var G=location.protocol,K=location.host;o.isXdUrl=function(a){if(/^\./.test(a))return!1;return/^\/\//.test(a)?!0:(a=a.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(a[1]!=G||K&&a[2]!=K)};v.add("dojo-force-activex-xhr",!u.addEventListener&&"file:"==window.location.protocol);v.add("native-xhr","undefined"!=typeof XMLHttpRequest);if(v("native-xhr")&&!v("dojo-force-activex-xhr"))D=function(){return new XMLHttpRequest};else{var N=["Msxml2.XMLHTTP",
"Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],L;for(k=0;3>k;)try{if(L=N[k++],new ActiveXObject(L))break}catch(I){}D=function(){return new ActiveXObject(L)}}o.getXhr=D;v.add("dojo-gettext-api",1);o.getText=function(a,b,f){var c=D();c.open("GET",ya(a),!1);c.send(null);if(200==c.status||!location.host&&!c.status)f&&f(c.responseText,b);else throw r("xhrFailed",c.status);return c.responseText};var J=new Function("return eval(arguments[0]);");o.eval=function(a,b){return J(a+"\r\n////@ sourceURL="+b)};var U=
{},R=o.signal=function(b,c){var o=U[b];f(o&&o.slice(0),function(b){b.apply(null,a(c)?c:[c])})},T=o.on=function(a,b){var f=U[a]||(U[a]=[]);f.push(b);return{remove:function(){for(var a=0;a<f.length;a++)if(f[a]===b){f.splice(a,1);break}}}},W=[],Y={},Q=[],V={},aa=o.map={},S=[],H={},M="",F={},Z={},P={},O=function(a){var b,f,c,o;for(b in Z)f=Z[b],(c=b.match(/^url\:(.+)/))?F["url:"+Pa(c[1],a)]=f:"*now"==b?o=f:"*noref"!=b&&(c=ua(b,a),F[c.mid]=F["url:"+c.url]=f);o&&o(Ga(a));Z={}},X=function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
function(a){return"\\"+a})},fa=function(a,b){b.splice(0,b.length);for(var f in a)b.push([f,a[f],RegExp("^"+X(f)+"(/|$)"),f.length]);b.sort(function(a,b){return b[3]-a[3]});return b},ba=function(a){var b=a.name;b||(b=a,a={name:b});a=n({main:"main"},a);a.location=a.location?a.location:b;if(a.packageMap)aa[b]=a.packageMap;if(!a.main.indexOf("./"))a.main=a.main.substring(2);V[b]=a},ja=[],ga=function(a,c,s){for(var d in a){if("waitSeconds"==d)o.waitms=1E3*(a[d]||0);"cacheBust"==d&&(M=a[d]?b(a[d])?a[d]:
(new Date).getTime()+"":"");if("baseUrl"==d||"combo"==d)o[d]=a[d];if("async"==d){var r=a[d];o.legacyMode=C=b(r)&&/sync|legacyAsync/.test(r)?r:!r?"sync":!1;o.async=!C}a[d]!==x&&(o.rawConfig[d]=a[d],"has"!=d&&v.add("config-"+d,a[d],0,c))}if(!o.baseUrl)o.baseUrl="./";/\/$/.test(o.baseUrl)||(o.baseUrl+="/");for(d in a.has)v.add(d,a.has[d],0,c);f(a.packages,ba);for(j in a.packagePaths)f(a.packagePaths[j],function(a){var f=j+"/"+a;b(a)&&(a={name:a});a.location=f;ba(a)});fa(n(aa,a.map),S);f(S,function(a){a[1]=
fa(a[1],[]);if("*"==a[0])S.star=a});fa(n(Y,a.paths),Q);f(a.aliases,function(a){b(a[0])&&(a[0]=RegExp("^"+X(a[0])+"$"));W.push(a)});if(c)ja.push({config:a.config});else for(d in a.config)c=ha(d,s),c.config=n(c.config||{},a.config[d]);if(a.cache)O(),Z=a.cache,a.cache["*noref"]&&O();R("config",[a,o.rawConfig])};v("dojo-cdn");var ka=u.getElementsByTagName("script");k=0;for(var la,ca,oa,ma;k<ka.length;)if(la=ka[k++],(oa=la.getAttribute("src"))&&(ma=oa.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))){ca=ma[3]||"";
m.baseUrl=m.baseUrl||ca;(oa=la.getAttribute("data-dojo-config")||la.getAttribute("djConfig"))&&(P=o.eval("({ "+oa+" })","data-dojo-config"));break}o.rawConfig={};ga(m,1);if(v("dojo-cdn"))(V.dojo.location=ca)&&(ca+="/"),V.dijit.location=ca+"../dijit/",V.dojox.location=ca+"../dojox/";ga(l,1);ga(P,1);var $=function(a){ta(function(){f(a.deps,xa)})},ia=function(f,c,s,d,h){var t;if(b(f)){if((t=ha(f,d,!0))&&t.executed)return t.result;throw r("undefinedModule",f);}a(f)||(ga(f,0,d),f=c,c=s);if(a(f))if(f.length){for(var s=
"require*"+q(),u,j=[],x=0;x<f.length;)u=f[x++],j.push(ha(u,d));t=n(za("",s,0,""),{injected:2,deps:j,def:c||e,require:d?d.require:o,gc:1});H[t.mid]=t;$(t);var v=va&&"sync"!=C;ta(function(){sa(t,v)});t.executed||da.push(t);qa()}else c&&c();return h},Ga=function(a){if(!a)return o;var b=a.require;if(!b)b=function(f,c,o){return ia(f,c,o,a,b)},a.require=n(b,o),b.module=a,b.toUrl=function(b){return Pa(b,a)},b.toAbsMid=function(b){return Ha(b,a)},b.syncLoadNls=function(b){var b=ua(b,a),f=H[b.mid];if(!f||
!f.executed)if(na=F[b.mid]||F["url:"+b.url])Aa(na),f=H[b.mid];return f&&f.executed&&f.result};return b},da=[],Ba=[],ea={},ab=function(a){a.injected=1;ea[a.mid]=1;a.url&&(ea[a.url]=a.pack||1);Qa()},pa=function(a){a.injected=2;delete ea[a.mid];a.url&&delete ea[a.url];h(ea)&&(Ca(),"xd"==C&&(C="sync"))},bb=o.idle=function(){return!Ba.length&&h(ea)&&!da.length&&!va},Ia=function(a,b){if(b)for(var f=0;f<b.length;f++)if(b[f][2].test(a))return b[f];return 0},Ra=function(a){for(var b=[],f,c,a=a.replace(/\\/g,
"/").split("/");a.length;)f=a.shift(),".."==f&&b.length&&".."!=c?(b.pop(),c=b[b.length-1]):"."!=f&&b.push(c=f);return b.join("/")},za=function(a,b,f,c){var n=o.isXdUrl(c);return{pid:a,mid:b,pack:f,url:c,executed:0,def:0,isXd:n,isAmd:!!(n||V[a]&&V[a].isAmd)}},Sa=function(a,b,o,n,s,d,e,q){var h,t,u,j;j=/^\./.test(a);if(/(^\/)|(\:)|(\.js$)/.test(a)||j&&!b)return za(0,a,0,a);a=Ra(j?b.mid+"/../"+a:a);if(/^\./.test(a))throw r("irrationalPath",a);b&&(u=Ia(b.mid,d));(u=(u=u||d.star)&&Ia(a,u[1]))&&(a=u[1]+
a.substring(u[3]));b=(ma=a.match(/^([^\/]+)(\/(.+))?$/))?ma[1]:"";(h=o[b])?a=b+"/"+(t=ma[3]||h.main):b="";var x=0;f(W,function(b){var f=a.match(b[0]);f&&0<f.length&&(x=c(b[1])?a.replace(b[0],b[1]):b[1])});if(x)return Sa(x,0,o,n,s,d,e,q);if(o=n[a])return q?za(o.pid,o.mid,o.pack,o.url):n[a];n=(u=Ia(a,e))?u[1]+a.substring(u[3]):b?h.location+"/"+t:v("config-tlmSiblingOfDojo")?"../"+a:a;/(^\/)|(\:)/.test(n)||(n=s+n);return za(b,a,h,Ra(n+".js"))},ua=function(a,b){return Sa(a,b,V,H,o.baseUrl,S,Q)},Ta=function(a,
b,f){return a.normalize?a.normalize(b,function(a){return Ha(a,f)}):Ha(b,f)},Ua=0,ha=function(a,b,f){var c,o;(c=a.match(/^(.+?)\!(.*)$/))?(o=ha(c[1],b,f),"sync"==C&&!o.executed&&(xa(o),2===o.injected&&!o.executed&&ta(function(){sa(o)}),o.executed?Da(o):da.unshift(o)),5===o.executed&&!o.load&&Da(o),o.load?(c=Ta(o,c[2],b),a=o.mid+"!"+(o.dynamic?++Ua+"!":"")+c):(c=c[2],a=o.mid+"!"+ ++Ua+"!waitingForPlugin"),a={plugin:o,mid:a,req:Ga(b),prid:c}):a=ua(a,b);return H[a.mid]||!f&&(H[a.mid]=a)},Ha=o.toAbsMid=
function(a,b){return ua(a,b).mid},Pa=o.toUrl=function(a,b){var f=ua(a+"/x",b),c=f.url;return ya(0===f.pid?a:c.substring(0,c.length-5))},Va={injected:2,executed:5,def:3,result:3},Ja=function(a){return H[a]=n({mid:a},Va)},cb=Ja("require"),db=Ja("exports"),eb=Ja("module"),Ea={},Ka=0,Da=function(a){var b=a.result;a.dynamic=b.dynamic;a.normalize=b.normalize;a.load=b.load;return a},fb=function(a){var b={};f(a.loadQ,function(f){var c=Ta(a,f.prid,f.req.module),o=a.dynamic?f.mid.replace(/waitingForPlugin$/,
c):a.mid+"!"+c,c=n(n({},f),{mid:o,prid:c,injected:0});H[o]||Wa(H[o]=c);b[f.mid]=H[o];pa(f);delete H[f.mid]});a.loadQ=0;var c=function(a){for(var f=a.deps||[],c=0;c<f.length;c++)(a=b[f[c].mid])&&(f[c]=a)},o;for(o in H)c(H[o]);f(da,c)},ra=function(a){o.trace("loader-finish-exec",[a.mid]);a.executed=5;a.defOrder=Ka++;f(a.provides,function(a){a()});a.loadQ&&(Da(a),fb(a));for(k=0;k<da.length;)da[k]===a?da.splice(k,1):k++;/^require\*/.test(a.mid)&&delete H[a.mid]},gb=[],sa=function(a,b){if(4===a.executed)return o.trace("loader-circular-dependency",
[gb.concat(a.mid).join("->")]),!a.def||b?Ea:a.cjs&&a.cjs.exports;if(!a.executed){if(!a.def)return Ea;var f=a.mid,n=a.deps||[],s,d=[],e=0;for(a.executed=4;e<n.length;){s=n[e++];s=s===cb?Ga(a):s===db?a.cjs.exports:s===eb?a.cjs:sa(s,b);if(s===Ea)return a.executed=0,o.trace("loader-exec-module",["abort",f]),Ea;d.push(s)}o.trace("loader-run-factory",[a.mid]);var f=a.def,q;B.unshift(a);if(v("config-dojo-loader-catches"))try{q=c(f)?f.apply(null,d):f}catch(h){R("error",a.result=r("factoryThrew",[a,h]))}else q=
c(f)?f.apply(null,d):f;a.result=void 0===q&&a.cjs?a.cjs.exports:q;B.shift(a);ra(a)}return a.result},va=0,ta=function(a){try{va++,a()}finally{va--}bb()&&R("idle",[])},qa=function(){va||ta(function(){z();for(var a,b,f=0;f<da.length;)a=Ka,b=da[f],sa(b),a!=Ka?(z(),f=0):f++})};void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var ya=function(a){a+="";return a+(M?(/\?/.test(a)?"&":"?")+M:"")},Wa=function(a){var b=a.plugin;5===b.executed&&!b.load&&Da(b);var f=function(b){a.result=
b;pa(a);ra(a);qa()};b.load?b.load(a.prid,a.req,f):b.loadQ?b.loadQ.push(a):(b.loadQ=[a],da.unshift(b),xa(b))},na=0,wa=0,La=0,Aa=function(a,b){v("config-stripStrict")&&(a=a.replace(/"use strict"/g,""));La=1;if(v("config-dojo-loader-catches"))try{a===na?na.call(null):o.eval(a,v("dojo-loader-eval-hint-url")?b.url:b.mid)}catch(f){R("error",r("evalModuleThrew",b))}else a===na?na.call(null):o.eval(a,v("dojo-loader-eval-hint-url")?b.url:b.mid);La=0},xa=function(a){var b=a.mid,c=a.url;if(!a.executed&&!a.injected&&
!(ea[b]||a.url&&(a.pack&&ea[a.url]===a.pack||1==ea[a.url])))if(ab(a),a.plugin)Wa(a);else{var s=function(){Xa(a);2!==a.injected&&(pa(a),n(a,Va),o.trace("loader-define-nonmodule",[a.url]));C?!B.length&&qa():qa()};if(na=F[b]||F["url:"+a.url])o.trace("loader-inject",["cache",a.mid,c]),Aa(na,a),s();else{if(C)if(a.isXd)"sync"==C&&(C="xd");else if(!(a.isAmd&&"sync"!=C)){var d=function(n){if("sync"==C){B.unshift(a);Aa(n,a);B.shift();Xa(a);a.cjs||(pa(a),ra(a));if(a.finish){var n=b+"*finish",d=a.finish;delete a.finish;
Ma(n,["dojo",("dojo/require!"+d.join(",")).replace(/\./g,"/")],function(a){f(d,function(b){a.require(b)})});da.unshift(ha(n))}s()}else(n=E(a,n))?(Aa(n,a),s()):(wa=a,o.injectUrl(ya(c),s,a),wa=0)};o.trace("loader-inject",["xhr",a.mid,c,"sync"!=C]);if(v("config-dojo-loader-catches"))try{o.getText(c,"sync"!=C,d)}catch(e){R("error",r("xhrInjectFailed",[a,e]))}else o.getText(c,"sync"!=C,d);return}o.trace("loader-inject",["script",a.mid,c]);wa=a;o.injectUrl(ya(c),s,a);wa=0}}},Na=function(a,b,f){o.trace("loader-define-module",
[a.mid,b]);var s=a.mid;if(2===a.injected)return R("error",r("multipleDefine",a)),a;n(a,{deps:b,def:f,cjs:{id:a.mid,uri:a.url,exports:a.result={},setExports:function(b){a.cjs.exports=b},config:function(){return a.config}}});for(var d=0;d<b.length;d++)b[d]=ha(b[d],a);C&&!ea[s]&&($(a),da.push(a),qa());pa(a);if(!c(f)&&!b.length)a.result=f,ra(a);return a},Xa=function(a,b){for(var c=[],o,n;Ba.length;)n=Ba.shift(),b&&(n[0]=b.shift()),o=n[0]&&ha(n[0])||a,c.push([o,n[1],n[2]]);O(a);f(c,function(a){$(Na.apply(null,
a))})},Fa=0,Ca=e,Qa=e;Ca=function(){Fa&&clearTimeout(Fa);Fa=0};Qa=function(){Ca();o.waitms&&(Fa=window.setTimeout(function(){Ca();R("error",r("timeout",ea))},o.waitms))};v.add("ie-event-behavior",!!u.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var Oa=function(a,b,f,c){if(v("ie-event-behavior"))return a.attachEvent(f,c),function(){a.detachEvent(f,c)};a.addEventListener(b,c,!1);return function(){a.removeEventListener(b,c,!1)}},hb=Oa(window,"load","onload",function(){o.pageLoaded=
1;"complete"!=u.readyState&&(u.readyState="complete");hb()}),Ya=u.getElementsByTagName("script")[0],ib=Ya.parentNode;o.injectUrl=function(a,b,f){var f=f.node=u.createElement("script"),c=Oa(f,"load","onreadystatechange",function(a){var a=a||window.event,f=a.target||a.srcElement;if("load"===a.type||/complete|loaded/.test(f.readyState))c(),o(),b&&b()}),o=Oa(f,"error","onerror",function(b){c();o();R("error",r("scriptError",[a,b]))});f.type="text/javascript";f.charset="utf-8";f.src=a;ib.insertBefore(f,
Ya);return f};o.log=function(){try{for(var a=0;a<arguments.length;a++);}catch(b){}};o.trace=e;var Ma=function(a,f,n){var s=arguments.length,d=["require","exports","module"],e=[0,a,f];1==s?e=[0,c(a)?d:[],a]:2==s&&b(a)?e=[a,c(f)?d:[],f]:3==s&&(e=[a,f,n]);o.trace("loader-define",e.slice(0,2));if((s=e[0]&&ha(e[0]))&&!ea[s.mid])$(Na(s,e[1],e[2]));else if(!v("ie-event-behavior")||La)Ba.push(e);else{s=s||wa;if(!s)for(a in ea)if((d=H[a])&&d.node&&"interactive"===d.node.readyState){s=d;break}s?(O(s),$(Na(s,
e[1],e[2]))):R("error",r("ieDefineFailed",e[0]));qa()}};Ma.amd={vendor:"dojotoolkit.org"};n(n(o,m.loaderPatch),l.loaderPatch);T("error",function(a){try{if(console.error(a),a instanceof Error)for(var b in a);}catch(f){}});n(o,{uid:q,cache:F,packs:V});if(s.define)R("error",r("defineAlreadyDefined",0));else{s.define=Ma;s.require=o;f(ja,function(a){ga(a)});var Za=P.deps||l.deps||m.deps,$a=P.callback||l.callback||m.callback;o.boot=Za||$a?[Za||[],$a]:0}})(this.dojoConfig||this.djConfig||this.require||{},
{async:0,hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dojox",name:"dojox"},{location:"../dijit",name:"dijit"},{location:"../idx",name:"idx"},{location:"../js",name:"js"},{location:"../deploy",name:"deploy"}]});
require({cache:{"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(l,m,k){function j(a){return d[a]=new Function("item","index","array",a)}function e(a){var b=!a;return function(c,r,e){var q=0,o=c&&c.length||0,s;o&&"string"==typeof c&&(c=c.split(""));"string"==typeof r&&(r=d[r]||j(r));if(e)for(;q<o;++q){if(s=!r.call(e,c[q],q,c),a^s)return!s}else for(;q<o;++q)if(s=!r(c[q],q,c),a^s)return!s;return b}}function h(a){var f=1,n=0,d=0;a||(f=n=d=-1);return function(e,q,o,s){if(s&&
0<f)return b.lastIndexOf(e,q,o);var s=e&&e.length||0,h=a?s+d:n;o===c?o=a?n:s+d:0>o?(o=s+o,0>o&&(o=n)):o=o>=s?s+d:o;for(s&&"string"==typeof e&&(e=e.split(""));o!=h;o+=f)if(e[o]==q)return o;return-1}}var d={},c,b={every:e(!1),some:e(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(a,b,c){var r=0,e=a&&a.length||0;e&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||j(b));if(c)for(;r<e;++r)b.call(c,a[r],r,a);else for(;r<e;++r)b(a[r],r,a)},map:function(a,b,c,r){var e=0,q=a&&a.length||
0,r=new (r||Array)(q);q&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||j(b));if(c)for(;e<q;++e)r[e]=b.call(c,a[e],e,a);else for(;e<q;++e)r[e]=b(a[e],e,a);return r},filter:function(a,b,c){var r=0,e=a&&a.length||0,q=[],o;e&&"string"==typeof a&&(a=a.split(""));"string"==typeof b&&(b=d[b]||j(b));if(c)for(;r<e;++r)o=a[r],b.call(c,o,r,a)&&q.push(o);else for(;r<e;++r)o=a[r],b(o,r,a)&&q.push(o);return q},clearCache:function(){d={}}};k.mixin(l,b);return b})},"dojo/_base/kernel":function(){define(["../has",
"./config","require","module"],function(l,m,k,j){var e,h={},d={},c={config:m,global:this,dijit:h,dojox:d},h={dojo:["dojo",c],dijit:["dijit",h],dojox:["dojox",d]},j=k.map&&k.map[j.id.match(/[^\/]+/)[0]];for(e in j)h[e]?h[e][0]=j[e]:h[e]=[j[e],{}];for(e in h)j=h[e],j[1]._scopeName=j[0],m.noGlobals||(this[j[0]]=j[1]);c.scopeMap=h;c.baseUrl=c.config.baseUrl=k.baseUrl;c.isAsync=k.async;c.locale=m.locale;j="$Rev: 29262 $".match(/\d+/);c.version={major:1,minor:8,patch:4,flag:"",revision:j?+j[0]:NaN,toString:function(){var a=
c.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};"undefined"!=typeof console||(console={});for(var h="assert,count,debug,dir,dirxml,error,group,groupEnd,info,profile,profileEnd,time,timeEnd,trace,warn,log".split(","),b,j=0;b=h[j++];)console[b]||function(){var a=b+"";console[a]="log"in console?function(){var b=Array.apply({},arguments);b.unshift(a+
":");console.log(b.join(" "))}:function(){};console[a]._fake=!0}();l.add("dojo-debug-messages",!!m.isDebug);c.deprecated=c.experimental=function(){};if(l("dojo-debug-messages"))c.deprecated=function(a,b,c){a="DEPRECATED: "+a;b&&(a+=" "+b);c&&(a+=" -- will be removed in version: "+c);console.warn(a)},c.experimental=function(a,b){var c="EXPERIMENTAL: "+a+" -- APIs subject to change without notice.";b&&(c+=" "+b);console.warn(c)};if(m.modulePaths){c.deprecated("dojo.modulePaths","use paths configuration");
l={};for(e in m.modulePaths)l[e.replace(/\./g,"/")]=m.modulePaths[e];k({paths:l})}c.moduleUrl=function(a,b){c.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;a&&(n=k.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")+"/*.*").replace(/\/\*\.\*/,"")+(b?"":"/"));return n};c._hasResource={};return c})},"dojo/has":function(){define(["require","module"],function(l){var m=l.has||function(){};m.add("dom-addeventlistener",!!document.addEventListener);m.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints);
m.add("device-width",screen.availWidth||innerWidth);l=document.createElement("form");m.add("dom-attributes-explicit",0==l.attributes.length);m.add("dom-attributes-specified-flag",0<l.attributes.length&&40>l.attributes.length);m.clearElement=function(k){k.innerHTML="";return k};m.normalize=function(k,j){var e=k.match(/[\?:]|[^:\?]*/g),h=0,d=function(c){var b=e[h++];if(":"==b)return 0;if("?"==e[h++]){if(!c&&m(b))return d();d(!0);return d(c)}return b||0};return(k=d())&&j(k)};m.load=function(k,j,e){k?
j([k],e):e()};return m})},"dojo/_base/config":function(){define(["../has","require"],function(l,m){var k={},j=m.rawConfig,e;for(e in j)k[e]=j[e];return k})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(l,m){m.add("bug-for-in-skips-shadowed",function(){for(var a in{toString:1})return 0;return 1});var k=m("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],j=k.length,e=function(a,
b,c){var d,e=0,q=l.global;if(!c)if(a.length){d=a[e++];try{c=l.scopeMap[d]&&l.scopeMap[d][1]}catch(o){}c=c||(d in q?q[d]:b?q[d]={}:void 0)}else return q;for(;c&&(d=a[e++]);)c=d in c?c[d]:b?c[d]={}:void 0;return c},h=Object.prototype.toString,d=function(a,b,c){return(c||[]).concat(Array.prototype.slice.call(a,b||0))},c=/\{([^\}]+)\}/g,b={_extraNames:k,_mixin:function(a,b,c){var d,e,q,o={};for(d in b)if(e=b[d],!(d in a)||a[d]!==e&&(!(d in o)||o[d]!==e))a[d]=c?c(e):e;if(m("bug-for-in-skips-shadowed")&&
b)for(q=0;q<j;++q)if(d=k[q],e=b[d],!(d in a)||a[d]!==e&&(!(d in o)||o[d]!==e))a[d]=c?c(e):e;return a},mixin:function(a,c){a||(a={});for(var n=1,d=arguments.length;n<d;n++)b._mixin(a,arguments[n]);return a},setObject:function(a,b,c){var d=a.split("."),a=d.pop();return(c=e(d,!0,c))&&a?c[a]=b:void 0},getObject:function(a,b,c){return e(a.split("."),b,c)},exists:function(a,c){return void 0!==b.getObject(a,!1,c)},isString:function(a){return"string"==typeof a||a instanceof String},isArray:function(a){return a&&
(a instanceof Array||"array"==typeof a)},isFunction:function(a){return"[object Function]"===h.call(a)},isObject:function(a){return void 0!==a&&(null===a||"object"==typeof a||b.isArray(a)||b.isFunction(a))},isArrayLike:function(a){return a&&void 0!==a&&!b.isString(a)&&!b.isFunction(a)&&!(a.tagName&&"form"==a.tagName.toLowerCase())&&(b.isArray(a)||isFinite(a.length))},isAlien:function(a){return a&&!b.isFunction(a)&&/\{\s*\[native code\]\s*\}/.test(""+a)},extend:function(a,c){for(var n=1,d=arguments.length;n<
d;n++)b._mixin(a.prototype,arguments[n]);return a},_hitchArgs:function(a,c){var n=b._toArray(arguments,2),d=b.isString(c);return function(){var e=b._toArray(arguments),q=d?(a||l.global)[c]:c;return q&&q.apply(a||this,n.concat(e))}},hitch:function(a,c){if(2<arguments.length)return b._hitchArgs.apply(l,arguments);c||(c=a,a=null);if(b.isString(c)){a=a||l.global;if(!a[c])throw['lang.hitch: scope["',c,'"] is null (scope="',a,'")'].join("");return function(){return a[c].apply(a,arguments||[])}}return!a?
c:function(){return c.apply(a,arguments||[])}},delegate:function(){function a(){}return function(c,n){a.prototype=c;var d=new a;a.prototype=null;n&&b._mixin(d,n);return d}}(),_toArray:m("ie")?function(){function a(a,b,c){c=c||[];for(b=b||0;b<a.length;b++)c.push(a[b]);return c}return function(b){return(b.item?a:d).apply(this,arguments)}}():d,partial:function(a){return b.hitch.apply(l,[null].concat(b._toArray(arguments)))},clone:function(a){if(!a||"object"!=typeof a||b.isFunction(a))return a;if(a.nodeType&&
"cloneNode"in a)return a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return RegExp(a);var c,n,d;if(b.isArray(a)){c=[];for(n=0,d=a.length;n<d;++n)n in a&&c.push(b.clone(a[n]))}else c=a.constructor?new a.constructor:{};return b._mixin(c,a,b.clone)},trim:String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(a,f,n){return a.replace(n||c,b.isFunction(f)?f:function(a,c){return b.getObject(c,
!1,f)})}};b.mixin(l,b);return b})},"dojo/sniff":function(){define(["./has"],function(l){var m=navigator,k=m.userAgent,m=m.appVersion,j=parseFloat(m);l.add("air",0<=k.indexOf("AdobeAIR"));l.add("khtml",0<=m.indexOf("Konqueror")?j:void 0);l.add("webkit",parseFloat(k.split("WebKit/")[1])||void 0);l.add("chrome",parseFloat(k.split("Chrome/")[1])||void 0);l.add("safari",0<=m.indexOf("Safari")&&!l("chrome")?parseFloat(m.split("Version/")[1]):void 0);l.add("mac",0<=m.indexOf("Macintosh"));l.add("quirks",
"BackCompat"==document.compatMode);l.add("ios",/iPhone|iPod|iPad/.test(k));l.add("android",parseFloat(k.split("Android ")[1])||void 0);if(!l("webkit")){0<=k.indexOf("Opera")&&l.add("opera",9.8<=j?parseFloat(k.split("Version/")[1])||j:j);0<=k.indexOf("Gecko")&&!l("khtml")&&!l("webkit")&&l.add("mozilla",j);l("mozilla")&&l.add("ff",parseFloat(k.split("Firefox/")[1]||k.split("Minefield/")[1])||void 0);if(document.all&&!l("opera"))k=parseFloat(m.split("MSIE ")[1])||void 0,(m=document.documentMode)&&5!=
m&&Math.floor(k)!=m&&(k=m),l.add("ie",k);l.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return l})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(l,m,k){function j(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function e(a,b,c){var f,o,n,s,d,e,r,q=this._inherited=this._inherited||{};"string"==typeof a&&(f=a,a=b,b=c);c=0;s=a.callee;(f=f||s.nom)||j("can't deduce a name to call inherited()",this.declaredClass);d=this.constructor._meta;n=d.bases;r=q.p;if(f!=
B){if(q.c!==s&&(r=0,e=n[0],d=e._meta,d.hidden[f]!==s)){(o=d.chains)&&"string"==typeof o[f]&&j("calling chained method with inherited: "+f,this.declaredClass);do if(d=e._meta,o=e.prototype,d&&(o[f]===s&&o.hasOwnProperty(f)||d.hidden[f]===s))break;while(e=n[++r]);r=e?r:-1}if(e=n[++r])if(o=e.prototype,e._meta&&o.hasOwnProperty(f))c=o[f];else{s=v[f];do if(o=e.prototype,(c=o[f])&&(e._meta?o.hasOwnProperty(f):c!==s))break;while(e=n[++r])}c=e&&c||v[f]}else{if(q.c!==s&&(r=0,(d=n[0]._meta)&&d.ctor!==s)){o=
d.chains;for((!o||"manual"!==o.constructor)&&j("calling chained constructor with inherited",this.declaredClass);(e=n[++r])&&!((d=e._meta)&&d.ctor===s););r=e?r:-1}for(;(e=n[++r])&&!(c=(d=e._meta)?d.ctor:e););c=e&&c}q.c=c;q.p=r;if(c)return!0===b?c:c.apply(this,b||a)}function h(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function d(a,b,c){var f=this.getInherited(a,b);if(f)return f.apply(this,c||b||a)}function c(a){for(var b=this.constructor._meta.bases,c=0,f=b.length;c<
f;++c)if(b[c]===a)return!0;return this instanceof a}function b(a,b){for(var c in b)c!=B&&b.hasOwnProperty(c)&&(a[c]=b[c]);if(m("bug-for-in-skips-shadowed"))for(var f=k._extraNames,o=f.length;o;)c=f[--o],c!=B&&b.hasOwnProperty(c)&&(a[c]=b[c])}function a(a){u.safeMixin(this.prototype,a);return this}function f(a){return u([this].concat(a))}function n(a,b){return function(){var z;var c=arguments,f=c,o=c[0],n,d;d=a.length;var e;if(!(this instanceof c.callee))return s(c);if(b&&(o&&o.preamble||this.preamble)){e=
Array(a.length);e[0]=c;for(n=0;;){if(o=c[0])(o=o.preamble)&&(c=o.apply(this,c)||c);o=a[n].prototype;(o=o.hasOwnProperty("preamble")&&o.preamble)&&(c=o.apply(this,c)||c);if(++n==d)break;e[n]=c}}for(n=d-1;0<=n;--n)o=a[n],(z=(d=o._meta)?d.ctor:o,o=z)&&o.apply(this,e?e[n]:c);(o=this.postscript)&&o.apply(this,f)}}function r(a,b){return function(){var c=arguments,f=c,o=c[0];if(!(this instanceof c.callee))return s(c);if(b){if(o)(o=o.preamble)&&(f=o.apply(this,f)||f);(o=this.preamble)&&o.apply(this,f)}a&&
a.apply(this,c);(o=this.postscript)&&o.apply(this,c)}}function t(a){return function(){var z;var b=arguments,c=0,f,o;if(!(this instanceof b.callee))return s(b);for(;f=a[c];++c)if(z=(o=f._meta)?o.ctor:f,f=z){f.apply(this,b);break}(f=this.postscript)&&f.apply(this,b)}}function q(a,b,c){return function(){var f,o,n=0,s=1;c&&(n=b.length-1,s=-1);for(;f=b[n];n+=s)o=f._meta,(f=(o?o.hidden:f.prototype)[a])&&f.apply(this,arguments)}}function o(a){y.prototype=a.prototype;a=new y;y.prototype=null;return a}function s(a){var b=
a.callee,c=o(b);b.apply(c,a);return c}function u(s,d,y){"string"!=typeof s&&(y=d,d=s,s="");var y=y||{},l,m,N,L,I,J,U,R=1,T=d;if("[object Array]"==x.call(d)){R=s;N=[];L=[{cls:0,refs:[]}];J={};for(var W=1,Y=d.length,Q=0,V,aa,S,H;Q<Y;++Q){(V=d[Q])?"[object Function]"!=x.call(V)&&j("mixin #"+Q+" is not a callable constructor.",R):j("mixin #"+Q+" is unknown. Did you use dojo.require to pull it in?",R);aa=V._meta?V._meta.bases:[V];S=0;for(V=aa.length-1;0<=V;--V){H=aa[V].prototype;if(!H.hasOwnProperty("declaredClass"))H.declaredClass=
"uniqName_"+C++;H=H.declaredClass;J.hasOwnProperty(H)||(J[H]={count:0,refs:[],cls:aa[V]},++W);H=J[H];S&&S!==H&&(H.refs.push(S),++S.count);S=H}++S.count;L[0].refs.push(S)}for(;L.length;){S=L.pop();N.push(S.cls);for(--W;m=S.refs,1==m.length;){S=m[0];if(!S||--S.count){S=0;break}N.push(S.cls);--W}if(S)for(Q=0,Y=m.length;Q<Y;++Q)S=m[Q],--S.count||L.push(S)}W&&j("can't build consistent linearization",R);V=d[0];N[0]=V?V._meta&&V===N[N.length-V._meta.bases.length]?V._meta.bases.length:1:0;J=N;N=J[0];R=J.length-
N;d=J[R]}else J=[0],d?"[object Function]"==x.call(d)?(N=d._meta,J=J.concat(N?N.bases:d)):j("base class is not a callable constructor.",s):null!==d&&j("unknown base class. Did you use dojo.require to pull it in?",s);if(d)for(m=R-1;;--m){l=o(d);if(!m)break;N=J[m];(N._meta?b:w)(l,N.prototype);L=new Function;L.superclass=d;L.prototype=l;d=l.constructor=L}else l={};u.safeMixin(l,y);N=y.constructor;if(N!==v.constructor)N.nom=B,l.constructor=N;for(m=R-1;m;--m)(N=J[m]._meta)&&N.chains&&(U=w(U||{},N.chains));
l["-chains-"]&&(U=w(U||{},l["-chains-"]));N=!U||!U.hasOwnProperty(B);J[0]=L=U&&"manual"===U.constructor?t(J):1==J.length?r(y.constructor,N):n(J,N);L._meta={bases:J,hidden:y,chains:U,parents:T,ctor:y.constructor};L.superclass=d&&d.prototype;L.extend=a;L.createSubclass=f;L.prototype=l;l.constructor=L;l.getInherited=h;l.isInstanceOf=c;l.inherited=A;l.__inherited=e;if(s)l.declaredClass=s,k.setObject(s,L);if(U)for(I in U)if(l[I]&&"string"==typeof U[I]&&I!=B)N=l[I]=q(I,J,"after"===U[I]),N.nom=I;return L}
var w=k.mixin,v=Object.prototype,x=v.toString,y=new Function,C=0,B="constructor",A=l.config.isDebug?d:e;l.safeMixin=u.safeMixin=function(a,b){var c,f;for(c in b)if(f=b[c],(f!==v[c]||!(c in v))&&c!=B){if("[object Function]"==x.call(f))f.nom=c;a[c]=f}if(m("bug-for-in-skips-shadowed"))for(var o=k._extraNames,n=o.length;n;)if(c=o[--n],f=b[c],(f!==v[c]||!(c in v))&&c!=B){if("[object Function]"==x.call(f))f.nom=c;a[c]=f}return a};return l.declare=u})},"dojo/store/JsonRest":function(){define(["../_base/xhr",
"../_base/lang","../json","../_base/declare","./util/QueryResults"],function(l,m,k,j,e){return j("dojo.store.JsonRest",null,{constructor:function(e){this.headers={};j.safeMixin(this,e)},headers:{},target:"",idProperty:"id",get:function(e,d){var d=d||{},c=m.mixin({Accept:this.accepts},this.headers,d.headers||d);return l("GET",{url:this.target+e,handleAs:"json",headers:c})},accepts:"application/javascript, application/json",getIdentity:function(e){return e[this.idProperty]},put:function(e,d){var d=
d||{},c="id"in d?d.id:this.getIdentity(e),b="undefined"!=typeof c;return l(b&&!d.incremental?"PUT":"POST",{url:b?this.target+c:this.target,postData:k.stringify(e),handleAs:"json",headers:m.mixin({"Content-Type":"application/json",Accept:this.accepts,"If-Match":!0===d.overwrite?"*":null,"If-None-Match":!1===d.overwrite?"*":null},this.headers,d.headers)})},add:function(e,d){d=d||{};d.overwrite=!1;return this.put(e,d)},remove:function(e,d){d=d||{};return l("DELETE",{url:this.target+e,headers:m.mixin({},
this.headers,d.headers)})},query:function(h,d){var d=d||{},c=m.mixin({Accept:this.accepts},this.headers,d.headers);if(0<=d.start||0<=d.count)c.Range=c["X-Range"]="items="+(d.start||"0")+"-"+("count"in d&&Infinity!=d.count?d.count+(d.start||0)-1:"");var b=-1<this.target.indexOf("?");h&&"object"==typeof h&&(h=(h=l.objectToQuery(h))?(b?"&":"?")+h:"");if(d&&d.sort){for(var a=this.sortParam,h=h+((h||b?"&":"?")+(a?a+"=":"sort(")),b=0;b<d.sort.length;b++)var f=d.sort[b],h=h+((0<b?",":"")+(f.descending?"-":
"+")+encodeURIComponent(f.attribute));a||(h+=")")}var n=l("GET",{url:this.target+(h||""),handleAs:"json",headers:c});n.total=n.then(function(){var a=n.ioArgs.xhr.getResponseHeader("Content-Range");return a&&(a=a.match(/\/(.*)/))&&+a[1]});return e(n)}})})},"dojo/_base/xhr":function(){define("./kernel,./sniff,require,../io-query,../dom,../dom-form,./Deferred,./config,./json,./lang,./array,../on,../aspect,../request/watch,../request/xhr,../request/util".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,
t,q,o){l._xhrObj=q._create;var s=l.config;l.objectToQuery=j.objectToQuery;l.queryToObject=j.queryToObject;l.fieldToObject=h.fieldToObject;l.formToObject=h.toObject;l.formToQuery=h.toQuery;l.formToJson=h.toJson;l._blockAsync=!1;var u=l._contentHandlers=l.contentHandlers={text:function(a){return a.responseText},json:function(a){return b.fromJson(a.responseText||null)},"json-comment-filtered":function(a){c.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message.");
var a=a.responseText,f=a.indexOf("/*"),o=a.lastIndexOf("*/");if(-1==f||-1==o)throw Error("JSON was not comment filtered");return b.fromJson(a.substring(f+2,o))},javascript:function(a){return l.eval(a.responseText)},xml:function(a){var b=a.responseXML;b&&m("dom-qsa2.1")&&!b.querySelectorAll&&m("dom-parser")&&(b=(new DOMParser).parseFromString(a.responseText,"application/xml"));if(m("ie")&&(!b||!b.documentElement)){var c=function(a){return"MSXML"+a+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),
c(2)];f.some(c,function(c){try{var f=new ActiveXObject(c);f.async=!1;f.loadXML(a.responseText);b=f}catch(o){return!1}return!0})}return b},"json-comment-optional":function(a){return a.responseText&&/^[^{\[]*\/\*/.test(a.responseText)?u["json-comment-filtered"](a):u.json(a)}};l._ioSetArgs=function(b,c,f,o){var n={args:b,url:b.url},r=null;if(b.form){var r=e.byId(b.form),q=r.getAttributeNode("action");n.url=n.url||(q?q.value:null);r=h.toObject(r)}q=[{}];r&&q.push(r);b.content&&q.push(b.content);b.preventCache&&
q.push({"dojo.preventCache":(new Date).valueOf()});n.query=j.objectToQuery(a.mixin.apply(null,q));n.handleAs=b.handleAs||"text";var t=new d(function(a){a.canceled=!0;c&&c(a);var b=a.ioArgs.error;if(!b)b=Error("request cancelled"),b.dojoType="cancel",a.ioArgs.error=b;return b});t.addCallback(f);var u=b.load;u&&a.isFunction(u)&&t.addCallback(function(a){return u.call(b,a,n)});var x=b.error;x&&a.isFunction(x)&&t.addErrback(function(a){return x.call(b,a,n)});var v=b.handle;v&&a.isFunction(v)&&t.addBoth(function(a){return v.call(b,
a,n)});t.addErrback(function(a){return o(a,t)});s.ioPublish&&l.publish&&!1!==n.args.ioPublish&&(t.addCallbacks(function(a){l.publish("/dojo/io/load",[t,a]);return a},function(a){l.publish("/dojo/io/error",[t,a]);return a}),t.addBoth(function(a){l.publish("/dojo/io/done",[t,a]);return a}));t.ioArgs=n;return t};var w=function(a){a=u[a.ioArgs.handleAs](a.ioArgs.xhr);return void 0===a?null:a},v=function(a,b){b.ioArgs.args.failOk||console.error(a);return a},x=function(a){0>=y&&(y=0,s.ioPublish&&l.publish&&
(!a||a&&!1!==a.ioArgs.args.ioPublish)&&l.publish("/dojo/io/stop"))},y=0;r.after(t,"_onAction",function(){y-=1});r.after(t,"_onInFlight",x);l._ioCancelAll=t.cancelAll;l._ioNotifyStart=function(a){s.ioPublish&&l.publish&&!1!==a.ioArgs.args.ioPublish&&(y||l.publish("/dojo/io/start"),y+=1,l.publish("/dojo/io/send",[a]))};l._ioWatch=function(b,c,f,o){b.ioArgs.options=b.ioArgs.args;a.mixin(b,{response:b.ioArgs,isValid:function(){return c(b)},isReady:function(){return f(b)},handleResponse:function(){return o(b)}});
t(b);x(b)};l._ioAddQueryToUrl=function(a){if(a.query.length)a.url+=(-1==a.url.indexOf("?")?"?":"&")+a.query,a.query=null};l.xhr=function(a,b,c){var f,o=l._ioSetArgs(b,function(){f&&f.cancel()},w,v),n=o.ioArgs;"postData"in b?n.query=b.postData:"putData"in b?n.query=b.putData:"rawBody"in b?n.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(a.toUpperCase()))&&l._ioAddQueryToUrl(n);var s={method:a,handleAs:"text",timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:n};if("undefined"!==
typeof b.headers)s.headers=b.headers;if("undefined"!==typeof b.contentType){if(!s.headers)s.headers={};s.headers["Content-Type"]=b.contentType}if("undefined"!==typeof n.query)s.data=n.query;if("undefined"!==typeof b.sync)s.sync=b.sync;l._ioNotifyStart(o);try{f=q(n.url,s,!0)}catch(d){return o.cancel(),o}o.ioArgs.xhr=f.response.xhr;f.then(function(){o.resolve(o)}).otherwise(function(a){n.error=a;if(a.response)a.status=a.response.status,a.responseText=a.response.text,a.xhr=a.response.xhr;o.reject(a)});
return o};l.xhrGet=function(a){return l.xhr("GET",a)};l.rawXhrPost=l.xhrPost=function(a){return l.xhr("POST",a,!0)};l.rawXhrPut=l.xhrPut=function(a){return l.xhr("PUT",a,!0)};l.xhrDelete=function(a){return l.xhr("DELETE",a)};l._isDocumentOk=function(a){return o.checkStatus(a.status)};l._getText=function(a){var b;l.xhrGet({url:a,sync:!0,load:function(a){b=a}});return b};a.mixin(l.xhr,{_xhrObj:l._xhrObj,fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:j.objectToQuery,formToQuery:h.toQuery,
formToJson:h.toJson,queryToObject:j.queryToObject,contentHandlers:u,_ioSetArgs:l._ioSetArgs,_ioCancelAll:l._ioCancelAll,_ioNotifyStart:l._ioNotifyStart,_ioWatch:l._ioWatch,_ioAddQueryToUrl:l._ioAddQueryToUrl,_isDocumentOk:l._isDocumentOk,_getText:l._getText,get:l.xhrGet,post:l.xhrPost,put:l.xhrPut,del:l.xhrDelete});return l.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(l,m,k){l._name="browser";m.mixin(l,{isBrowser:!0,isFF:k("ff"),isIE:k("ie"),isKhtml:k("khtml"),
isWebKit:k("webkit"),isMozilla:k("mozilla"),isMoz:k("mozilla"),isOpera:k("opera"),isSafari:k("safari"),isChrome:k("chrome"),isMac:k("mac"),isIos:k("ios"),isAndroid:k("android"),isWii:k("wii"),isQuirks:k("quirks"),isAir:k("air")});l.locale=l.locale||(k("ie")?navigator.userLanguage:navigator.language).toLowerCase();return k})},"dojo/io-query":function(){define(["./_base/lang"],function(l){var m={};return{objectToQuery:function(k){var j=encodeURIComponent,e=[],h;for(h in k){var d=k[h];if(d!=m[h]){var c=
j(h)+"=";if(l.isArray(d))for(var b=0,a=d.length;b<a;++b)e.push(c+j(d[b]));else e.push(c+j(d))}}return e.join("&")},queryToObject:function(k){for(var j=decodeURIComponent,k=k.split("&"),e={},h,d,c=0,b=k.length;c<b;++c)if(d=k[c],d.length){var a=d.indexOf("=");0>a?(h=j(d),d=""):(h=j(d.slice(0,a)),d=j(d.slice(a+1)));"string"==typeof e[h]&&(e[h]=[e[h]]);l.isArray(e[h])?e[h].push(d):e[h]=d}return e}}})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(l,m){if(7>=l("ie"))try{document.execCommand("BackgroundImageCache",
!1,!0)}catch(k){}var j={};j.byId=l("ie")?function(e,d){if("string"!=typeof e)return e;var c=d||m.doc,b=e&&c.getElementById(e);if(b&&(b.attributes.id.value==e||b.id==e))return b;c=c.all[e];if(!c||c.nodeName)c=[c];for(var a=0;b=c[a++];)if(b.attributes&&b.attributes.id&&b.attributes.id.value==e||b.id==e)return b}:function(e,d){return("string"==typeof e?(d||m.doc).getElementById(e):e)||null};j.isDescendant=function(e,d){try{e=j.byId(e);for(d=j.byId(d);e;){if(e==d)return!0;e=e.parentNode}}catch(c){}return!1};
l.add("css-user-select",function(e,d,c){if(!c)return!1;var e=c.style,d=["Khtml","O","ms","Moz","Webkit"],c=d.length,b="userSelect";do if("undefined"!==typeof e[b])return b;while(c--&&(b=d[c]+"UserSelect"));return!1});var e=l("css-user-select");j.setSelectable=e?function(h,d){j.byId(h).style[e]=d?"":"none"}:function(e,d){var e=j.byId(e),c=e.getElementsByTagName("*"),b=c.length;if(d)for(e.removeAttribute("unselectable");b--;)c[b].removeAttribute("unselectable");else for(e.setAttribute("unselectable",
"on");b--;)c[b].setAttribute("unselectable","on")};return j})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(l,m,k){var j={global:l.global,doc:this.document||null,body:function(e){e=e||l.doc;return e.body||e.getElementsByTagName("body")[0]},setContext:function(e,h){l.global=j.global=e;l.doc=j.doc=h},withGlobal:function(e,h,d,c){var b=l.global;try{return l.global=j.global=e,j.withDoc.call(null,e.document,h,d,c)}finally{l.global=j.global=b}},withDoc:function(e,h,d,
c){var b=j.doc,a=k("quirks"),f=k("ie"),n,r,t;try{l.doc=j.doc=e;l.isQuirks=k.add("quirks","BackCompat"==l.doc.compatMode,!0,!0);if(k("ie")&&(t=e.parentWindow)&&t.navigator)n=parseFloat(t.navigator.appVersion.split("MSIE ")[1])||void 0,(r=e.documentMode)&&5!=r&&Math.floor(n)!=r&&(n=r),l.isIE=k.add("ie",n,!0,!0);d&&"string"==typeof h&&(h=d[h]);return h.apply(d,c||[])}finally{l.doc=j.doc=b,l.isQuirks=k.add("quirks",a,!0,!0),l.isIE=k.add("ie",f,!0,!0)}}};m.mixin(l,j);return j})},"dojo/dom-form":function(){define(["./_base/lang",
"./dom","./io-query","./json"],function(l,m,k,j){var e={fieldToObject:function(e){var d=null;if(e=m.byId(e)){var c=e.name,b=(e.type||"").toLowerCase();if(c&&b&&!e.disabled)if("radio"==b||"checkbox"==b){if(e.checked)d=e.value}else if(e.multiple){d=[];for(e=[e.firstChild];e.length;)for(c=e.pop();c;c=c.nextSibling)if(1==c.nodeType&&"option"==c.tagName.toLowerCase())c.selected&&d.push(c.value);else{c.nextSibling&&e.push(c.nextSibling);c.firstChild&&e.push(c.firstChild);break}}else d=e.value}return d},
toObject:function(h){for(var d={},h=m.byId(h).elements,c=0,b=h.length;c<b;++c){var a=h[c],f=a.name,n=(a.type||"").toLowerCase();if(f&&n&&0>"file|submit|image|reset|button".indexOf(n)&&!a.disabled){var r=d,t=f,a=e.fieldToObject(a);if(null!==a){var q=r[t];"string"==typeof q?r[t]=[q,a]:l.isArray(q)?q.push(a):r[t]=a}if("image"==n)d[f+".x"]=d[f+".y"]=d[f].x=d[f].y=0}}return d},toQuery:function(h){return k.objectToQuery(e.toObject(h))},toJson:function(h,d){return j.stringify(e.toObject(h),null,d?4:0)}};
return e})},"dojo/json":function(){define(["./has"],function(l){var m="undefined"!=typeof JSON;l.add("json-parse",m);l.add("json-stringify",m&&'{"a":1}'==JSON.stringify({a:0},function(j,e){return e||1}));if(l("json-stringify"))return JSON;var k=function(j){return('"'+j.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:l("json-parse")?JSON.parse:function(j,e){if(e&&!/^([\s\[\{]*(?:"(?:\\.|[^"])+"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(j))throw new SyntaxError("Invalid characters in JSON");
return eval("("+j+")")},stringify:function(j,e,h){function d(b,a,f){e&&(b=e(f,b));var n;n=typeof b;if("number"==n)return isFinite(b)?b+"":"null";if("boolean"==n)return b+"";if(null===b)return"null";if("string"==typeof b)return k(b);if("function"==n||"undefined"==n)return c;if("function"==typeof b.toJSON)return d(b.toJSON(f),a,f);if(b instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(a,c,f){a=b["getUTC"+c]()+(f?1:0);return 10>a?"0"+
a:a});if(b.valueOf()!==b)return d(b.valueOf(),a,f);var r=h?a+h:"",t=h?" ":"",q=h?"\n":"";if(b instanceof Array){for(var t=b.length,o=[],f=0;f<t;f++)n=d(b[f],r,f),"string"!=typeof n&&(n="null"),o.push(q+r+n);return"["+o.join(",")+q+a+"]"}o=[];for(f in b){var s;if(b.hasOwnProperty(f)){if("number"==typeof f)s='"'+f+'"';else if("string"==typeof f)s=k(f);else continue;n=d(b[f],r,f);"string"==typeof n&&o.push(q+r+s+":"+t+n)}}return"{"+o.join(",")+q+a+"}"}var c;"string"==typeof e&&(h=e,e=null);return d(j,
"","")}}})},"dojo/_base/Deferred":function(){define("./kernel,../Deferred,../promise/Promise,../errors/CancelError,../has,./lang,../when".split(","),function(l,m,k,j,e,h,d){var c=function(){},b=Object.freeze||function(){},a=l.Deferred=function(f){function n(a){if(q)throw Error("This deferred has already been resolved");t=a;q=!0;d()}function d(){for(var a;!a&&u;){var b=u;u=u.next;if(a=b.progress==c)q=!1;var f=o?b.error:b.resolved;e("config-useDeferredInstrumentation")&&o&&m.instrumentRejected&&m.instrumentRejected(t,
!!f);if(f)try{var n=f(t);n&&"function"===typeof n.then?n.then(h.hitch(b.deferred,"resolve"),h.hitch(b.deferred,"reject"),h.hitch(b.deferred,"progress")):(f=a&&void 0===n,a&&!f&&(o=n instanceof Error),b.deferred[f&&o?"reject":"resolve"](f?t:n))}catch(s){b.deferred.reject(s)}else o?b.deferred.reject(t):b.deferred.resolve(t)}}var t,q,o,s,u,w=this.promise=new k;this.resolve=this.callback=function(a){this.fired=0;this.results=[a,null];n(a)};this.reject=this.errback=function(a){o=!0;this.fired=1;e("config-useDeferredInstrumentation")&&
m.instrumentRejected&&m.instrumentRejected(a,!!u);n(a);this.results=[null,a]};this.progress=function(a){for(var b=u;b;){var c=b.progress;c&&c(a);b=b.next}};this.addCallbacks=function(a,b){this.then(a,b,c);return this};w.then=this.then=function(b,f,o){var n=o==c?this:new a(w.cancel),b={resolved:b,error:f,progress:o,deferred:n};u?s=s.next=b:u=s=b;q&&d();return n.promise};var v=this;w.cancel=this.cancel=function(){if(!q){var a=f&&f(v);if(!q)a instanceof Error||(a=new j(a)),a.log=!1,v.reject(a)}};b(w)};
h.extend(a,{addCallback:function(a){return this.addCallbacks(h.hitch.apply(l,arguments))},addErrback:function(a){return this.addCallbacks(null,h.hitch.apply(l,arguments))},addBoth:function(a){var b=h.hitch.apply(l,arguments);return this.addCallbacks(b,b)},fired:-1});a.when=l.when=d;return a})},"dojo/Deferred":function(){define("dojo/Deferred",["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(l,m,k,j,e){var h=Object.freeze||function(){},d=function(a,
b,d,e,o){2===b&&f.instrumentRejected&&0===a.length&&f.instrumentRejected(d,!1,e,o);for(o=0;o<a.length;o++)c(a[o],b,d,e)},c=function(c,d,e,q){var o=c[d],s=c.deferred;if(o)try{var h=o(e);if(0===d)"undefined"!==typeof h&&a(s,d,h);else{if(h&&"function"===typeof h.then){c.cancel=h.cancel;h.then(b(s,1),b(s,2),b(s,0));return}a(s,1,h)}}catch(j){a(s,2,j)}else a(s,d,e);2===d&&f.instrumentRejected&&f.instrumentRejected(e,!!o,q,s.promise)},b=function(b,c){return function(f){a(b,c,f)}},a=function(a,b,c){if(!a.isCanceled())switch(b){case 0:a.progress(c);
break;case 1:a.resolve(c);break;case 2:a.reject(c)}},f=function(a){var b=this.promise=new j,e=this,q,o,s,u=!1,w=[];Error.captureStackTrace&&(Error.captureStackTrace(e,f),Error.captureStackTrace(b,f));this.isResolved=b.isResolved=function(){return 1===q};this.isRejected=b.isRejected=function(){return 2===q};this.isFulfilled=b.isFulfilled=function(){return!!q};this.isCanceled=b.isCanceled=function(){return u};this.progress=function(a,c){if(q){if(!0===c)throw Error("This deferred has already been fulfilled.");
return b}d(w,0,a,null,e);return b};this.resolve=function(a,c){if(q){if(!0===c)throw Error("This deferred has already been fulfilled.");return b}d(w,q=1,o=a,null,e);w=null;return b};var v=this.reject=function(a,c){if(q){if(!0===c)throw Error("This deferred has already been fulfilled.");return b}Error.captureStackTrace&&Error.captureStackTrace(s={},v);d(w,q=2,o=a,s,e);w=null;return b};this.then=b.then=function(a,n,d){var e=[d,a,n];e.cancel=b.cancel;e.deferred=new f(function(a){return e.cancel&&e.cancel(a)});
q&&!w?c(e,q,o,s):w.push(e);return e.deferred.promise};this.cancel=b.cancel=function(b,c){if(q){if(!0===c)throw Error("This deferred has already been fulfilled.");}else{if(a)var f=a(b),b="undefined"===typeof f?b:f;u=!0;if(q){if(2===q&&o===b)return b}else return"undefined"===typeof b&&(b=new k),v(b),b}};h(b)};f.prototype.toString=function(){return"[object Deferred]"};e&&e(f);return f})},"dojo/errors/CancelError":function(){define(["./create"],function(l){return l("CancelError",null,null,{dojoType:"cancel"})})},
"dojo/errors/create":function(){define(["../_base/lang"],function(l){return function(m,k,j,e){var j=j||Error,h=function(d){if(j===Error){Error.captureStackTrace&&Error.captureStackTrace(this,h);var c=Error.call(this,d),b;for(b in c)c.hasOwnProperty(b)&&(this[b]=c[b]);this.message=d;this.stack=c.stack}else j.apply(this,arguments);k&&k.apply(this,arguments)};h.prototype=l.delegate(j.prototype,e);h.prototype.name=m;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
function(l){function m(){throw new TypeError("abstract");}return l.extend(function(){},{then:function(){m()},cancel:function(){m()},isResolved:function(){m()},isRejected:function(){m()},isFulfilled:function(){m()},isCanceled:function(){m()},always:function(k){return this.then(k,k)},otherwise:function(k){return this.then(null,k)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/promise/instrumentation":function(){define(["./tracer",
"../has","../_base/lang","../_base/array"],function(l,m,k,j){function e(a,b,c){var f="";a&&a.stack&&(f+=a.stack);b&&b.stack&&(f+="\n    ----------------------------------------\n    rejected"+b.stack.split("\n").slice(1).join("\n").replace(/^\s+/," "));c&&c.stack&&(f+="\n    ----------------------------------------\n"+c.stack);console.error(a,f)}function h(a,b,c,f){b||e(a,c,f)}function d(n,d,e,q){d?j.some(b,function(a,c){if(a.error===n)return b.splice(c,1),!0}):j.some(b,function(a){return a.error===
n})||b.push({error:n,rejection:e,deferred:q,timestamp:(new Date).getTime()});a||(a=setTimeout(c,f))}function c(){var n=(new Date).getTime(),d=n-f;b=j.filter(b,function(a){return a.timestamp<d?(e(a.error,a.rejection,a.deferred),!1):!0});a=b.length?setTimeout(c,b[0].timestamp+f-n):!1}var b=[],a=!1,f=1E3;return function(a){var b=m("config-useDeferredInstrumentation");if(b){l.on("resolved",k.hitch(console,"log","resolved"));l.on("rejected",k.hitch(console,"log","rejected"));l.on("progress",k.hitch(console,
"log","progress"));var c=[];"string"===typeof b&&(c=b.split(","),b=c.shift());if("report-rejections"===b)a.instrumentRejected=h;else if("report-unhandled-rejections"===b||!0===b||1===b)a.instrumentRejected=d,f=parseInt(c[0],10)||f;else throw Error("Unsupported instrumentation usage <"+b+">");}}})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(l,m,k){function j(d){setTimeout(function(){h.apply(e,d)},0)}var e=new k,h=e.emit;e.emit=null;m.prototype.trace=
function(){var d=l._toArray(arguments);this.then(function(c){j(["resolved",c].concat(d))},function(c){j(["rejected",c].concat(d))},function(c){j(["progress",c].concat(d))});return this};m.prototype.traceRejected=function(){var d=l._toArray(arguments);this.otherwise(function(c){j(["rejected",c].concat(d))});return this};return e})},"dojo/Evented":function(){define("dojo/Evented",["./aspect","./on"],function(l,m){function k(){}var j=l.after;k.prototype={on:function(e,h){return m.parse(this,e,h,function(d,
c){return j(d,"on"+c,h,!0)})},emit:function(e,h){var d=[this];d.push.apply(d,arguments);return m.emit.apply(m,d)}};return k})},"dojo/aspect":function(){define("dojo/aspect",[],function(){function l(c,b,a,f){var n=c[b],d="around"==b,e;if(d){var q=a(function(){return n.advice(this,arguments)});e={remove:function(){q&&(q=c=a=null)},advice:function(a,b){return q?q.apply(a,b):n.advice(a,b)}}}else e={remove:function(){if(e.advice){var f=e.previous,s=e.next;if(!s&&!f)delete c[b];else if(f?f.next=s:c[b]=
s,s)s.previous=f;c=a=e.advice=null}},id:j++,advice:a,receiveArguments:f};if(n&&!d)if("after"==b){for(;n.next&&(n=n.next););n.next=e;e.previous=n}else{if("before"==b)c[b]=e,e.next=n,n.previous=e}else c[b]=e;return e}function m(c){return function(b,a,f,n){var d=b[a],e;if(!d||d.target!=b){b[a]=e=function(){for(var a=j,b=arguments,c=e.before;c;)b=c.advice.apply(this,b)||b,c=c.next;if(e.around)var f=e.around.advice(this,b);for(c=e.after;c&&c.id<a;){if(c.receiveArguments)var d=c.advice.apply(this,b),f=
d===k?f:d;else f=c.advice.call(this,f,b);c=c.next}return f};if(d)e.around={advice:function(a,b){return d.apply(a,b)}};e.target=b}b=l(e||d,c,f,n);f=null;return b}}var k,j=0,e=m("after"),h=m("before"),d=m("around");return{before:h,around:d,after:e}})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(l,m,k){function j(a,f,o,d,s){if(d=f.match(/(.*):(.*)/))return f=d[2],d=d[1],c.selector(d,f).call(s,a,o);k("touch")&&(b.test(f)&&(o=C(o)),!k("event-orientationchange")&&
"orientationchange"==f&&(f="resize",a=window,o=C(o)));t&&(o=t(o));if(a.addEventListener){var e=f in n,r=e?n[f]:f;a.addEventListener(r,o,e);return{remove:function(){a.removeEventListener(r,o,e)}}}if(u&&a.attachEvent)return u(a,"on"+f,o);throw Error("Target must be an event emitter");}function e(){this.cancelable=!1}function h(){this.bubbles=!1}var d=window.ScriptEngineMajorVersion;k.add("jscript",d&&d()+ScriptEngineMinorVersion()/10);k.add("event-orientationchange",k("touch")&&!k("android"));k.add("event-stopimmediatepropagation",
window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var c=function(a,b,f,o){return"function"==typeof a.on&&"function"!=typeof b&&!a.nodeType?a.on(b,f):c.parse(a,b,f,j,o,this)};c.pausable=function(a,b,f,o){var d,a=c(a,b,function(){if(!d)return f.apply(this,arguments)},o);a.pause=function(){d=!0};a.resume=function(){d=!1};return a};c.once=function(a,b,f){var o=c(a,b,function(){o.remove();return f.apply(this,arguments)});return o};c.parse=function(a,b,c,f,o,d){if(b.call)return b.call(d,
a,c);if(-1<b.indexOf(",")){for(var b=b.split(/\s*,\s*/),n=[],s=0,e;e=b[s++];)n.push(f(a,e,c,o,d));n.remove=function(){for(var a=0;a<n.length;a++)n[a].remove()};return n}return f(a,b,c,o,d)};var b=/^touch/;c.selector=function(a,b,f){return function(o,d){function n(b){for(s=s&&s.matches?s:m.query;!s.matches(b,a,o);)if(b==o||!1===f||!(b=b.parentNode)||1!=b.nodeType)return;return b}var s="function"==typeof a?{matches:a}:this,e=b.bubble;return e?c(o,e(n),d):c(o,b,function(a){var b=n(a.target);return b&&
d.call(b,a)})}};var a=[].slice,f=c.emit=function(b,c,f){var o=a.call(arguments,2),d="on"+c;if("parentNode"in b){var n=o[0]={},s;for(s in f)n[s]=f[s];n.preventDefault=e;n.stopPropagation=h;n.target=b;n.type=c;f=n}do b[d]&&b[d].apply(b,o);while(f&&f.bubbles&&(b=b.parentNode));return f&&f.cancelable&&f},n={};if(!k("event-stopimmediatepropagation"))var r=function(){this.modified=this.immediatelyStopped=!0},t=function(a){return function(b){if(!b.immediatelyStopped)return b.stopImmediatePropagation=r,a.apply(this,
arguments)}};if(k("dom-addeventlistener"))n={focusin:"focus",focusout:"blur"},c.emit=function(a,b,o){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(b,!!o.bubbles,!!o.cancelable);for(var n in o)n in d||(d[n]=o[n]);return a.dispatchEvent(d)&&d}return f.apply(c,arguments)};else{c._fixEvent=function(a,b){if(!a)a=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event;if(!a)return a;q&&a.type==q.type&&(a=q);if(!a.target){a.target=a.srcElement;
a.currentTarget=b||a.srcElement;if("mouseover"==a.type)a.relatedTarget=a.fromElement;if("mouseout"==a.type)a.relatedTarget=a.toElement;if(!a.stopPropagation)a.stopPropagation=w,a.preventDefault=v;switch(a.type){case "keypress":var c="charCode"in a?a.charCode:a.keyCode;10==c?(c=0,a.keyCode=13):13==c||27==c?c=0:3==c&&(c=99);a.charCode=c;c=a;c.keyChar=c.charCode?String.fromCharCode(c.charCode):"";c.charOrCode=c.keyChar||c.keyCode}}return a};var q,o=function(a){this.handle=a};o.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};
var s=function(a){return function(b){var b=c._fixEvent(b,this),f=a.call(this,b);b.modified&&(q||setTimeout(function(){q=null}),q=b);return f}},u=function(a,b,c){c=s(c);if(((a.ownerDocument?a.ownerDocument.parentWindow:a.parentWindow||a.window||window)!=top||5.8>k("jscript"))&&!k("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var f=a[b];if(!f||!f.listeners){var d=f,f=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
f.listeners=[];a[b]=f;f.global=this;d&&f.listeners.push(_dojoIEListeners_.push(d)-1)}f.listeners.push(a=f.global._dojoIEListeners_.push(c)-1);return new o(a)}return l.after(a,b,c,!0)},w=function(){this.cancelBubble=!0},v=c._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(a){}this.defaultPrevented=!0;this.returnValue=!1}}if(k("touch"))var x=function(){},y=window.orientation,C=function(a){return function(b){var c=b.corrected;if(!c){var f=b.type;try{delete b.type}catch(o){}if(b.type){if(k("mozilla")){var c=
{},d;for(d in b)c[d]=b[d]}else x.prototype=b,c=new x;c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=f;b.corrected=c;if("resize"==f){if(y==window.orientation)return null;y=window.orientation;c.type="orientationchange";return a.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var f=c.changedTouches[0],n;for(n in f)delete c[n],c[n]=f[n]}return a.call(this,c)}};return c})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],
function(l,m){return function(k,j,e,h){var d=k&&"function"===typeof k.then,c=d&&k instanceof m;if(d){if(!c)d=new l(k.cancel),k.then(d.resolve,d.reject,d.progress),k=d.promise}else return 1<arguments.length?j?j(k):k:(new l).resolve(k);return j||e||h?k.then(j,e,h):k}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(l,m){l.fromJson=function(k){return eval("("+k+")")};l._escapeString=m.stringify;l.toJsonIndentStr="\t";l.toJson=function(k,j){return m.stringify(k,function(e,h){if(h){var d=
h.__json__||h.json;if("function"==typeof d)return d.call(h)}return h},j&&l.toJsonIndentStr)};return l})},"dojo/request/watch":function(){define("./util,../errors/RequestTimeoutError,../errors/CancelError,../_base/array,../_base/window,../has!host-browser?dom-addeventlistener?:../on:".split(","),function(l,m,k,j,e,h){function d(){for(var f=+new Date,d=0,e;d<a.length&&(e=a[d]);d++){var h=e.response,q=h.options;if(e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(h))a.splice(d--,1),c._onAction&&c._onAction();
else if(e.isReady&&e.isReady(h))a.splice(d--,1),e.handleResponse(h),c._onAction&&c._onAction();else if(e.startTime&&e.startTime+(q.timeout||0)<f)a.splice(d--,1),e.cancel(new m("Timeout exceeded",h)),c._onAction&&c._onAction()}c._onInFlight&&c._onInFlight(e);a.length||(clearInterval(b),b=null)}function c(c){if(c.response.options.timeout)c.startTime=+new Date;c.isFulfilled()||(a.push(c),b||(b=setInterval(d,50)),c.response.options.sync&&d())}var b=null,a=[];c.cancelAll=function(){try{j.forEach(a,function(a){try{a.cancel(new k("All requests canceled."))}catch(b){}})}catch(b){}};
e&&h&&e.doc.attachEvent&&h(e.global,"unload",function(){c.cancelAll()});return c})},"dojo/request/util":function(){define("exports,../errors/RequestError,../errors/CancelError,../Deferred,../io-query,../_base/array,../_base/lang,../promise/Promise".split(","),function(l,m,k,j,e,h,d,c){function b(a){return f(a)}function a(a){return a.data||a.text}l.deepCopy=function(a,b){for(var c in b){var f=a[c],o=b[c];f!==o&&(f&&"object"===typeof f&&o&&"object"===typeof o?l.deepCopy(f,o):a[c]=o)}return a};l.deepCreate=
function(a,b){var b=b||{},c=d.delegate(a),f,o;for(f in a)(o=a[f])&&"object"===typeof o&&(c[f]=l.deepCreate(o,b[f]));return l.deepCopy(c,b)};var f=Object.freeze||function(a){return a};l.deferred=function(n,e,h,q,o,s){var u=new j(function(a){e&&e(u,n);return!a||!(a instanceof m)&&!(a instanceof k)?new k("Request canceled",n):a});u.response=n;u.isValid=h;u.isReady=q;u.handleResponse=o;h=u.then(b).otherwise(function(a){a.response=n;throw a;});l.notify&&h.then(d.hitch(l.notify,"emit","load"),d.hitch(l.notify,
"emit","error"));var q=h.then(a),o=new c,w;for(w in q)q.hasOwnProperty(w)&&(o[w]=q[w]);o.response=h;f(o);s&&u.then(function(a){s.call(u,a)},function(a){s.call(u,n,a)});u.promise=o;u.then=o.then;return u};l.addCommonMethods=function(a,b){h.forEach(b||["GET","POST","PUT","DELETE"],function(b){a[("DELETE"===b?"DEL":b).toLowerCase()]=function(c,f){f=d.delegate(f||{});f.method=b;return a(c,f)}})};l.parseArgs=function(a,b,c){var f=b.data,o=b.query;if(f&&!c&&"object"===typeof f)b.data=e.objectToQuery(f);
o?("object"===typeof o&&(o=e.objectToQuery(o)),b.preventCache&&(o+=(o?"&":"")+"request.preventCache="+ +new Date)):b.preventCache&&(o="request.preventCache="+ +new Date);a&&o&&(a+=(~a.indexOf("?")?"&":"?")+o);return{url:a,options:b,getHeader:function(){return null}}};l.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}})},"dojo/errors/RequestError":function(){define(["./create"],function(l){return l("RequestError",function(l,k){this.response=k})})},"dojo/errors/RequestTimeoutError":function(){define(["./create",
"./RequestError"],function(l,m){return l("RequestTimeoutError",null,m,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(l,m,k,j,e){function h(a,b){var c=a.xhr;a.status=a.xhr.status;a.text=c.responseText;if("xml"===a.options.handleAs)a.data=c.responseXML;if(!b)try{k(a)}catch(f){b=f}b?this.reject(b):j.checkStatus(c.status)?this.resolve(a):(b=new l("Unable to load "+a.url+" status: "+c.status,a),this.reject(b))}
function d(a){return this.xhr.getResponseHeader(a)}function c(o,q,w){var v=j.parseArgs(o,j.deepCreate(t,q),e("native-formdata")&&q&&q.data&&q.data instanceof FormData),o=v.url,q=v.options,x,y=j.deferred(v,n,b,a,h,function(){x&&x()}),k=v.xhr=c._create();if(!k)return y.cancel(new l("XHR was not created")),w?y:y.promise;v.getHeader=d;f&&(x=f(k,y,v));var B=q.data,A=!q.sync,z=q.method;try{k.open(z,o,A,q.user||r,q.password||r);if(q.withCredentials)k.withCredentials=q.withCredentials;var E=q.headers,o="application/x-www-form-urlencoded";
if(E)for(var D in E)"content-type"===D.toLowerCase()?o=E[D]:E[D]&&k.setRequestHeader(D,E[D]);o&&!1!==o&&k.setRequestHeader("Content-Type",o);(!E||!("X-Requested-With"in E))&&k.setRequestHeader("X-Requested-With","XMLHttpRequest");j.notify&&j.notify.emit("send",v,y.promise.cancel);k.send(B)}catch(G){y.reject(G)}m(y);k=null;return w?y:y.promise}e.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});e.add("dojo-force-activex-xhr",function(){return e("activex")&&!document.addEventListener&&
"file:"===window.location.protocol});e.add("native-xhr2",function(){if(e("native-xhr")){var a=new XMLHttpRequest;return"undefined"!==typeof a.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof a.upload)}});e.add("native-formdata",function(){return"function"===typeof FormData});var b,a,f,n;e("native-xhr2")?(b=function(){return!this.isFulfilled()},n=function(a,b){b.xhr.abort()},f=function(a,b,c){function f(){b.handleResponse(c)}function o(a){a=new l("Unable to load "+c.url+" status: "+
a.target.status,c);b.handleResponse(c,a)}function d(a){if(a.lengthComputable)c.loaded=a.loaded,c.total=a.total,b.progress(c)}a.addEventListener("load",f,!1);a.addEventListener("error",o,!1);a.addEventListener("progress",d,!1);return function(){a.removeEventListener("load",f,!1);a.removeEventListener("error",o,!1);a.removeEventListener("progress",d,!1);a=null}}):(b=function(a){return a.xhr.readyState},a=function(a){return 4===a.xhr.readyState},n=function(a,b){var c=b.xhr,f=typeof c.abort;("function"===
f||"object"===f||"unknown"===f)&&c.abort()});var r,t={data:null,query:null,sync:!1,method:"GET"};c._create=function(){throw Error("XMLHTTP not available");};if(e("native-xhr")&&!e("dojo-force-activex-xhr"))c._create=function(){return new XMLHttpRequest};else if(e("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),c._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(q){try{new ActiveXObject("Microsoft.XMLHTTP"),c._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(o){}}j.addCommonMethods(c);
return c})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(l,m,k,j){function e(b){var a=c[b.options.handleAs];b.data=a?a(b):b.data||b.text;return b}j.add("activex","undefined"!==typeof ActiveXObject);j.add("dom-parser",function(b){return"DOMParser"in b});var h;if(j("activex")){var d=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];h=function(b){var a=b.data;a&&j("dom-qsa2.1")&&
!a.querySelectorAll&&j("dom-parser")&&(a=(new DOMParser).parseFromString(b.text,"application/xml"));if(!a||!a.documentElement){var c=b.text;k.some(d,function(b){try{var d=new ActiveXObject(b);d.async=!1;d.loadXML(c);a=d}catch(e){return!1}return!0})}return a}}var c={javascript:function(b){return m.eval(b.text||"")},json:function(b){return l.parse(b.text||null)},xml:h};e.register=function(b,a){c[b]=a};return e})},"dojo/selector/_loader":function(){define(["../has","require"],function(l,m){var k=document.createElement("div");
l.add("dom-qsa2.1",!!k.querySelectorAll);l.add("dom-qsa3",function(){try{return k.innerHTML="<p class='TEST'></p>",1==k.querySelectorAll(".TEST:empty").length}catch(e){}});var j;return{load:function(e,h,d){var c=m,e="default"==e?l("config-selectorEngine")||"css3":e,e="css2"==e||"lite"==e?"./lite":"css2.1"==e?l("dom-qsa2.1")?"./lite":"./acme":"css3"==e?l("dom-qsa3")?"./lite":"./acme":"acme"==e?"./acme":(c=h)&&e;if("?"==e.charAt(e.length-1))var e=e.substring(0,e.length-1),b=!0;if(b&&(l("dom-compliant-qsa")||
j))return d(j);c([e],function(a){"./lite"!=e&&(j=a);d(a)})}}})},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(l,m,k){var j=function(e){function h(d){e[d]||(e[d]=function(){var c=arguments;return k.when(e,function(b){Array.prototype.unshift.call(c,b);return j(l[d].apply(l,c))})})}if(!e)return e;e.then&&(e=m.delegate(e));h("forEach");h("filter");h("map");if(!e.total)e.total=k.when(e,function(d){return d.length});return e};m.setObject("dojo.store.util.QueryResults",
j);return j})},"deploy/widgets/main":function(){require("deploy/widgets/calendar/Calendar,deploy/widgets/calendar/EditBlackout,deploy/widgets/calendar/EditEntry,deploy/widgets/calendar/EditRecurringEntry,deploy/widgets/calendar/CalendarBase,deploy/widgets/workflow/GraphPaletteWidget,deploy/widgets/workflow/activity/ApplicationApprovalTaskActivity,deploy/widgets/workflow/activity/SetStatusActivity,deploy/widgets/workflow/activity/UninstallMultipleComponentsActivity,deploy/widgets/workflow/activity/PatternDeploymentActivity,deploy/widgets/workflow/activity/FinishActivity,deploy/widgets/workflow/activity/EnvironmentApprovalTaskActivity,deploy/widgets/workflow/activity/InstallComponentActivity,deploy/widgets/workflow/activity/StartActivity,deploy/widgets/workflow/activity/SwitchActivity,deploy/widgets/workflow/activity/NoteActivity,deploy/widgets/workflow/activity/ReleaseLockActivity,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/workflow/activity/RollbackComponentActivity,deploy/widgets/workflow/activity/UninstallComponentActivity,deploy/widgets/workflow/activity/TaskApprovalSelector,deploy/widgets/workflow/activity/ApplicationRunComponentProcessActivity,deploy/widgets/workflow/activity/ManualTaskActivity,deploy/widgets/workflow/activity/ResourceInventoryActivity,deploy/widgets/workflow/activity/PluginActivity,deploy/widgets/workflow/activity/ResourceDiscoveryActivity,deploy/widgets/workflow/activity/DesiredInventoryActivity,deploy/widgets/workflow/activity/RunProcessActivity,deploy/widgets/workflow/activity/ComponentRunComponentProcessActivity,deploy/widgets/workflow/activity/EachAgentIteratorActivity,deploy/widgets/workflow/activity/ApplicationManualTaskActivity,deploy/widgets/workflow/activity/MultipleComponentsActivity,deploy/widgets/workflow/activity/AcquireLockActivity,deploy/widgets/workflow/activity/EachTouchedResourceActivity,deploy/widgets/workflow/activity/ComponentManualTaskActivity,deploy/widgets/workflow/activity/EachTagIteratorActivity,deploy/widgets/workflow/activity/EachVersionComponentActivity,deploy/widgets/workflow/activity/PatternStackExecutionActivity,deploy/widgets/workflow/activity/ActivityCreator,deploy/widgets/workflow/activity/RunOperationalProcessMultipleActivity,deploy/widgets/workflow/activity/RollbackMultipleComponentsActivity,deploy/widgets/workflow/activity/JoinActivity,deploy/widgets/workflow/activity/ComponentApprovalTaskActivity,deploy/widgets/workflow/activity/ApplyConfigurationActivity,deploy/widgets/workflow/activity/InstallMultipleComponentsActivity,deploy/widgets/workflow/activity/DesiredSnapshotInventoryActivity,deploy/widgets/workflow/GraphToolbar,deploy/widgets/workflow/GraphLayout,deploy/widgets/workflow/GraphTooltips,deploy/widgets/workflow/GraphDiagram,deploy/widgets/workflow/GraphPaletteDialog,deploy/widgets/workflow/SavedProcessDiagram,deploy/widgets/workflow/GraphEdgeManager,deploy/widgets/workflow/ValidateGraph,deploy/widgets/workflow/GraphPalettePane,deploy/widgets/workflow/BaseGraph,deploy/widgets/workflow/GraphExploreDialog,deploy/widgets/automationPlugin/AutomationPluginList,deploy/widgets/automationPlugin/AutomationPluginProcesses,deploy/widgets/automationPlugin/AutomationPluginCommands,deploy/widgets/agent/AgentEditManager,deploy/widgets/agent/SshInstallAgent,deploy/widgets/agent/EditAgentInstallProps,deploy/widgets/agent/EditAgent,deploy/widgets/agent/AgentList,deploy/widgets/agent/AgentSecurityTab,deploy/widgets/agent/AgentPools,deploy/widgets/notification/NotificationSchemeEntries,deploy/widgets/notification/EditNotificationScheme,deploy/widgets/notification/NotificationSchemeList,deploy/widgets/notification/EditNotificationEntry,deploy/widgets/ModelWidgetList,deploy/widgets/snapshotComparison/SnapshotZOSFileTable,deploy/widgets/snapshotComparison/SnapshotVersionComparison,deploy/widgets/snapshotComparison/SnapshotPropertyComparison,deploy/widgets/snapshotComparison/SnapshotFileComparison,deploy/widgets/snapshotComparison/SnapshotConfigComparison,deploy/widgets/approval/ApprovalRevocationDialog,deploy/widgets/approval/TaskResponseDialog,deploy/widgets/approval/TasksForUser,deploy/widgets/approval/ApprovalProcessActivities,deploy/widgets/approval/ProcessPromotions,deploy/widgets/property/PropertyBox,deploy/widgets/property/EditPropDef,deploy/widgets/property/PropertyTextareaBox,deploy/widgets/property/PropDefPopupValues,deploy/widgets/property/EditPropValue,deploy/widgets/property/PropSheetDiffReportTable,deploy/widgets/property/PropDefs,deploy/widgets/property/PropSheetDefValues,deploy/widgets/property/PropertyTextarea,deploy/widgets/property/PropertyComboBox,deploy/widgets/property/TransientPropSheetDiffReportTable,deploy/widgets/property/PropValues,deploy/widgets/version/EditVersion,deploy/widgets/version/VersionArtifacts,deploy/widgets/version/VersionCompare,deploy/widgets/version/VersionSelect,deploy/widgets/version/VersionEditManager,deploy/widgets/version/VersionSelector,deploy/widgets/version/VersionStatuses,deploy/widgets/version/VersionHistory,deploy/widgets/version/VersionSelectionDialog,deploy/widgets/version/RunningVersionImports,deploy/widgets/version/ArtifactUploadForm,deploy/widgets/version/VersionDisplay,deploy/widgets/version/VersionFileCompare,deploy/widgets/filter/TagFilter,deploy/widgets/configuration/ConfigurationTree,deploy/widgets/configuration/Changelog,deploy/widgets/component/EditComponent,deploy/widgets/component/VersionHistoryManager,deploy/widgets/component/ComponentVersions,deploy/widgets/component/ComponentResources,deploy/widgets/component/ComponentConfigTemplates,deploy/widgets/component/VersionHistory,deploy/widgets/component/ComponentFileTable,deploy/widgets/component/ComponentList,deploy/widgets/component/ComponentImportFailureIcon,deploy/widgets/component/ComponentEditManager,deploy/widgets/component/ComponentVersionPropSheetDiffReportTable,deploy/widgets/component/ComponentRequestHistory,deploy/widgets/component/ComponentFileComparison,deploy/widgets/component/ComponentSourceConfigHistory,deploy/widgets/component/RunComponentProcess,deploy/widgets/dashboard/CurrentActivity,deploy/widgets/SimpleTag,deploy/widgets/deploymentPreview/ComponentChanges,deploy/widgets/deploymentPreview/ResourceChanges,deploy/widgets/deploymentPreview/SnapshotConfigurationPreview,deploy/widgets/sourceConfigPlugin/SourceConfigPluginList,deploy/widgets/applicationProcessRequest/RequestConfigurationChanges,deploy/widgets/applicationProcessRequest/RequestVersions,deploy/widgets/applicationProcessRequest/RequestResourceChanges,deploy/widgets/IconLegend,deploy/widgets/environmentComparison/EnvironmentFileComparison,deploy/widgets/environmentComparison/EnvironmentVersionComparison,deploy/widgets/environmentComparison/ComponentPropertiesTable,deploy/widgets/environmentComparison/EnvironmentConfigComparison,deploy/widgets/Formatters,deploy/widgets/main,deploy/widgets/resourceRole/EditResourceRole,deploy/widgets/resourceRole/ResourceRoleEditManager,deploy/widgets/resourceRole/RolePicker,deploy/widgets/agentRelay/EditRelay,deploy/widgets/agentRelay/AgentRelayList,deploy/widgets/agentRelay/RelayEditManager,deploy/widgets/snapshot/SnapshotVersionSelection,deploy/widgets/snapshot/SnapshotConfiguration,deploy/widgets/snapshot/SnapshotRequestHistory,deploy/widgets/snapshot/SnapshotEnvironmentList,deploy/widgets/snapshot/EditSnapshot,deploy/widgets/snapshot/SnapshotEnvironmentSummary,deploy/widgets/snapshot/SnapshotEditManager,deploy/widgets/snapshot/SnapshotTasks,deploy/widgets/snapshot/SnapshotStatuses,deploy/widgets/resource/ResourceConfigInventory,deploy/widgets/resource/ResourceVarianceBrowser,deploy/widgets/resource/ResourceRolePropertyEditor,deploy/widgets/resource/SingleResourceSelector,deploy/widgets/resource/ResourceSelectList,deploy/widgets/resource/ResourceEditManager,deploy/widgets/resource/ResourceCompareSelectorDialog,deploy/widgets/resource/EditResourceCondition,deploy/widgets/resource/ResourceConfigurationHistory,deploy/widgets/resource/ResourceVarianceTree,deploy/widgets/resource/TransientResourceCompareTree,deploy/widgets/resource/EditResource,deploy/widgets/resource/ResourceSelector,deploy/widgets/resource/ResourceResourceTree,deploy/widgets/resource/ResourceTree,deploy/widgets/resource/ResourceCompareTree,deploy/widgets/resource/ResourceInventory,deploy/widgets/resource/ResourceRequestHistory,deploy/widgets/TooltipTitle,deploy/widgets/network/NetworkRelayList,deploy/widgets/network/EditNetworkRelay,deploy/widgets/network/ConnectedServerList,deploy/widgets/Popup,deploy/widgets/Security,deploy/widgets/rightPanel/ResourceRightPanelContainer,deploy/widgets/rightPanel/ResourceRightPanel,deploy/widgets/rightPanel/RightPanelComponents,deploy/widgets/rightPanel/RightPanelUsersAndGroups,deploy/widgets/rightPanel/RightPanelAgentsWithNoResource,deploy/widgets/rightPanel/RightPanel,deploy/widgets/rightPanel/RightPanelAgents,deploy/widgets/rightPanel/RightPanelResourceRoles,deploy/widgets/tag/TagDisplay,deploy/widgets/tag/TagRemover,deploy/widgets/tag/TagSelect,deploy/widgets/tag/Tagger,deploy/widgets/tag/TagSelector,deploy/widgets/environment/EnvironmentRequestHistory,deploy/widgets/environment/EditEnvironment,deploy/widgets/environment/EditEnvironmentWizard,deploy/widgets/environment/EditLandscaperBlueprintProperties,deploy/widgets/environment/EditCloudResourceParameters,deploy/widgets/environment/EditLandscaperEnvironmentWizardPane,deploy/widgets/environment/EnvironmentCompliancy,deploy/widgets/environment/EditEnvironmentBlueprintWizardPane,deploy/widgets/environment/EnvironmentSummary,deploy/widgets/environment/CreateEnvironmentDialog,deploy/widgets/environment/EnvironmentResourceTree,deploy/widgets/environment/EnvironmentCondition,deploy/widgets/environment/EnvironmentEditManager,deploy/widgets/environment/EditEnvironmentWizardPane,deploy/widgets/environment/EditEnvironmentBlueprintProperties,deploy/widgets/environment/EnvironmentComponentProperties,deploy/widgets/environment/EnvironmentComponentProperty,deploy/widgets/environment/EnvironmentConditions,deploy/widgets/resourceTemplate/CloudConnectionSelect,deploy/widgets/resourceTemplate/ResourceTemplateEditManager,deploy/widgets/resourceTemplate/ImportResourceTemplate,deploy/widgets/resourceTemplate/SmartCloudDeploymentSelector,deploy/widgets/resourceTemplate/ApplyResourceTemplate,deploy/widgets/resourceTemplate/EditResourceTemplate,deploy/widgets/resourceTemplate/ResourceTemplateResourceTree,deploy/widgets/resourceTemplate/ResourceTemplateList,deploy/widgets/applicationTemplate/ApplicationTemplateEditManager,deploy/widgets/applicationTemplate/ApplicationTemplateEnvironmentTemplateList,deploy/widgets/applicationTemplate/ComponentTagRequirementSelector,deploy/widgets/applicationTemplate/EditApplicationTemplate,deploy/widgets/applicationTemplate/ComponentTagRequirement,deploy/widgets/applicationTemplate/ApplicationTemplateApplications,deploy/widgets/applicationTemplate/ApplicationTemplateList,deploy/widgets/CustomDateRangeSelector,deploy/widgets/patterns/PatternPropertySelectionDialog,deploy/widgets/patterns/PatternExecutionLogFormatters,deploy/widgets/patterns/PatternProcessIconsFormatter,deploy/widgets/Color,deploy/widgets/componentTemplate/ComponentTemplateComponents,deploy/widgets/componentTemplate/ComponentTemplateList,deploy/widgets/componentTemplate/ComponentTemplateEditManager,deploy/widgets/componentTemplate/EditComponentTemplate,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/firstDayWizard/Paginator,deploy/widgets/firstDayWizard/AgentMappingPage,deploy/widgets/firstDayWizard/DefineProcessesPage,deploy/widgets/firstDayWizard/AddOrCreateComponentsPage,deploy/widgets/firstDayWizard/DataModel,deploy/widgets/firstDayWizard/ProcessListEntry,deploy/widgets/firstDayWizard/WelcomePage,deploy/widgets/firstDayWizard/Controls,deploy/widgets/firstDayWizard/ApplicationModel,deploy/widgets/firstDayWizard/ApplicationProcessAnchorEntry,deploy/widgets/firstDayWizard/CreateEnvironmentsPage,deploy/widgets/firstDayWizard/ComponentProcessAnchorEntry,deploy/widgets/firstDayWizard/WizardModel,deploy/widgets/firstDayWizard/EnvironmentListEntry,deploy/widgets/firstDayWizard/ComponentListEntry,deploy/widgets/firstDayWizard/FirstDayWizard,deploy/widgets/firstDayWizard/CreateApplicationPage,deploy/widgets/firstDayWizard/WhatsNextPopup,deploy/widgets/firstDayWizard/WizardPage,deploy/widgets/deploymentRequest/DeploymentRequestHistory,deploy/widgets/deploymentRequest/RequestChanges,deploy/widgets/deploymentRequest/NoncompliancyByVersion,deploy/widgets/deploymentRequest/NoncompliancyByResource,deploy/widgets/deploymentRequest/RequestResourceChanges,deploy/widgets/deploymentRequest/DeploymentRequestCompliancy,deploy/widgets/settings/SettingsIndex,deploy/widgets/settings/CleanupProgressBar,deploy/widgets/settings/SystemSettings,deploy/widgets/settings/Logging,deploy/widgets/settings/AuditLog,deploy/widgets/settings/AuditLogSettings,deploy/widgets/settings/Patches,deploy/widgets/settings/diagnostics/RequestAuditEntryList,deploy/widgets/settings/diagnostics/ThreadDumps,deploy/widgets/settings/diagnostics/MetadataIndexing,deploy/widgets/settings/CloudConnections,deploy/widgets/settings/DraftProcessCreationProgressBar,deploy/widgets/settings/ArtifactRepo,deploy/widgets/lock/LockList,deploy/widgets/integration/pattern/PatternIntegrationProviderList,deploy/widgets/integration/pattern/EditPatternIntegrationProvider,deploy/widgets/GetStartedPopup,deploy/widgets/environmentTemplate/EnvironmentTemplateResourceTemplate,deploy/widgets/environmentTemplate/EditEnvironmentTemplate,deploy/widgets/environmentTemplate/EnvironmentTemplateEditManager,deploy/widgets/vc/VCUtil,deploy/widgets/process/ProcessActivities,deploy/widgets/process/ProcessHistory,deploy/widgets/process/ProcessChangelog,deploy/widgets/process/request/ExecutionLog,deploy/widgets/process/request/ExecutionLogFormatters,deploy/widgets/process/ProcessIconsFormatter,deploy/widgets/process/ProcessList,deploy/widgets/process/EditProcess,deploy/widgets/process/ProcessEditManager,deploy/widgets/process/RunProcess,deploy/widgets/process/RequiredCommentForm,deploy/widgets/DateRangeSelector,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentComparisonClient,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonConfig,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonFilter,deploy/widgets/multiEnvironmentComparison/PropertyComparison,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparison,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonDataManager,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonGrid,deploy/widgets/multiEnvironmentComparison/EnvironmentComparisonSelector,deploy/widgets/componentProcess/ComponentProcessChangelog,deploy/widgets/componentProcess/ComponentProcessActivities,deploy/widgets/componentProcess/ComponentProcessList,deploy/widgets/componentProcess/EditComponentProcess,deploy/widgets/componentProcess/ComponentProcessEditManager,deploy/widgets/blueprint/ApplicationBlueprintManager,deploy/widgets/FormDelegateRegistry,deploy/widgets/log/LiveLogViewer,deploy/widgets/log/Blocker,deploy/widgets/configTemplate/EditConfigTemplate,deploy/widgets/agentPool/AgentPoolAgents,deploy/widgets/agentPool/AgentPoolEditManager,deploy/widgets/agentPool/AgentPoolList,deploy/widgets/agentPool/EditAgentPool,deploy/widgets/report/deploymentCount/DeploymentDurationSumReportTable,deploy/widgets/report/deploymentCount/DeploymentDurationAverageReportTable,deploy/widgets/report/deploymentCount/DeploymentCountReportForm,deploy/widgets/report/deploymentCount/DeploymentCountReportTable,deploy/widgets/report/ReportTable,deploy/widgets/report/securityReportComponent/SecurityReportComponentForm,deploy/widgets/report/securityReportComponent/SecurityReportComponentTable,deploy/widgets/report/securityReportEnvironment/SecurityReportEnvironmentForm,deploy/widgets/report/securityReportEnvironment/SecurityReportEnvironmentTable,deploy/widgets/report/securityReportApplication/SecurityReportApplicationForm,deploy/widgets/report/securityReportApplication/SecurityReportApplicationTable,deploy/widgets/report/deploymentReport/DeploymentReportTable,deploy/widgets/report/deploymentReport/DeploymentReportForm,deploy/widgets/report/ReportSidebar,deploy/widgets/report/ReportLists,deploy/widgets/report/securityReportResource/SecurityReportResourceForm,deploy/widgets/report/securityReportResource/SecurityReportResourceTable,deploy/widgets/report/ReportFormTable,deploy/widgets/report/ReportPage,deploy/widgets/report/SecurityReportTable,deploy/widgets/report/securityReportUser/SecurityReportUserTable,deploy/widgets/report/securityReportUser/SecurityReportUserForm,deploy/widgets/wizard/WizardDialog,deploy/widgets/wizard/_WizardWatcherMixin,deploy/widgets/wizard/Wizard,deploy/widgets/application/ApplicationEditManager,deploy/widgets/application/ApplicationEnvironmentConditions,deploy/widgets/application/ApplicationComponents,deploy/widgets/application/RunApplicationProcess,deploy/widgets/application/ApplicationList,deploy/widgets/application/EditApplication,deploy/widgets/application/ApplicationSnapshots,deploy/widgets/application/ApplicationEnvironmentList,deploy/widgets/application/ApplicationRequestHistory,deploy/widgets/application/SingleComponentSelector,deploy/widgets/application/VersionSelection,deploy/widgets/application/wizard/AgentMappingTargetTree,deploy/widgets/application/wizard/AppWizProperty,deploy/widgets/application/wizard/AgentMappingPage,deploy/widgets/application/wizard/EnvironmentTemplateOption,deploy/widgets/application/wizard/WizardProgressVisualization,deploy/widgets/application/wizard/EnvironmentControls,deploy/widgets/application/wizard/EnvironmentPage,deploy/widgets/application/wizard/ApplicationWizard,deploy/widgets/application/wizard/AppWizardComponentSelector,deploy/widgets/application/wizard/EnvironmentForm,deploy/widgets/application/wizard/ComponentPage,deploy/widgets/application/wizard/EnvironmentModelHelper,deploy/widgets/application/wizard/EnvironmentOption,deploy/widgets/application/wizard/AppWizEnvironment,deploy/widgets/security/TeamSelector,deploy/widgets/security/SetUserPassword,deploy/widgets/security/KeyManager,deploy/widgets/security/resourceRole/EditResourceRole,deploy/widgets/security/resourceRole/ResourceRoleList,deploy/widgets/security/resourceRole/ResourceRoleManager,deploy/widgets/security/EditUser,deploy/widgets/security/authentication/AuthTokens,deploy/widgets/security/authentication/EditAuthToken,deploy/widgets/security/authentication/AuthenticationRealmManager,deploy/widgets/security/authentication/AuthenticationRealmUsers,deploy/widgets/security/authentication/EditAuthenticationRealm,deploy/widgets/security/token/EditAuthTokenRestriction,deploy/widgets/security/token/AuthTokenRestrictionList,deploy/widgets/security/token/AuthTokenRestriction,deploy/widgets/security/_LdapConnectionPropertiesMixin,deploy/widgets/security/authorization/GroupList,deploy/widgets/security/authorization/EditAuthorizationRealm,deploy/widgets/security/authorization/SelectGroupMemberForm,deploy/widgets/security/authorization/AuthorizationRealmManager,deploy/widgets/security/authorization/GroupMemberList,deploy/widgets/security/authorization/AuthorizationRealmList,deploy/widgets/security/authorization/EditGroup,deploy/widgets/security/team/UserRoleManager,deploy/widgets/security/team/EditTeam,deploy/widgets/security/team/SecuredObjects,deploy/widgets/security/team/TeamManager,deploy/widgets/security/team/MemberSelector,deploy/widgets/security/EditUserPreferences,deploy/widgets/security/role/RoleManager,deploy/widgets/security/role/EditRole,deploy/widgets/security/role/RoleResourceTypeGrid,deploy/widgets/security/role/RoleDefaultActions,deploy/widgets/security/role/RoleResourceTypeManager,deploy/widgets/status/EditStatus,deploy/widgets/status/StatusList,deploy/widgets/applicationProcess/ApplicationProcessInventoryChanges,deploy/widgets/applicationProcess/ApplicationProcessChangelog,deploy/widgets/applicationProcess/ApplicationProcessEditManager,deploy/widgets/applicationProcess/ApplicationProcessActivities,deploy/widgets/applicationProcess/EditApplicationProcess,deploy/widgets/applicationProcess/ApplicationProcessList,deploy/widgets/scripts/PostScriptEditorDialog,deploy/widgets/scripts/Editor,deploy/widgets/scripts/ScriptEditorDialog,deploy/widgets/scripts/PostProcessingLibrary,deploy/widgets/navigation/ProcessRequests,deploy/widgets/navigation/Reports,deploy/widgets/navigation/Calendar,deploy/widgets/navigation/Resources,deploy/widgets/navigation/Configuration,deploy/widgets/navigation/Processes,deploy/widgets/navigation/Security,deploy/widgets/navigation/Dashboard,deploy/widgets/navigation/Components,deploy/widgets/navigation/LoadingIndicator,deploy/widgets/navigation/Settings,deploy/widgets/navigation/Applications".split(","),
function(){})},"deploy/widgets/calendar/Calendar":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/mouse,dojo/on,deploy/widgets/application/RunApplicationProcess,deploy/widgets/calendar/CalendarBase,deploy/widgets/calendar/EditBlackout,deploy/widgets/calendar/EditRecurringEntry,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/FormDelegates,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,js/webext/widgets/color/Color,deploy/widgets/Formatters,dijit/form/TextBox,dijit/form/DateTextBox,dijit/form/TimeTextBox,dijit/form/Select,js/webext/widgets/BidiDateUtil".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A){return l("deploy.widgets.calendar.Calendar",[a],{itemClassName:function(a){var b=a.eventType;a.fired&&(b+=" no-move");a.color&&(b+=" "+w.getBasicColorName(a.color)+"-color",util.isDarkColor(a.color)&&(b+=" dark-color"));return b},canMoveItem:function(a){var b=a.cssClass||"",c=-1===b.indexOf("no-move"),f=-1===b.indexOf("child"),b=-1===b.indexOf("blackout");return(a.startTime>=this.now.valueOf()||!b)&&c&&this.displayActions()&&f},canResizeItem:function(a){return a.cssClass&&
-1!==a.cssClass.indexOf("blackout")},onItemCreate:function(a,b){"child"===a.eventType&&(this.calendar&&"month"===this.calendar.dateInterval?(e.add(b.renderer.endTimeLabel,"general-icon"),j.place(b.renderer.summaryLabel,b.renderer.endTimeLabel,"after")):b.renderer.afterIcon&&e.add(b.renderer.afterIcon,"general-icon"))},formatData:function(a,b){var c=this.formatAndFilterItems(a.entries,void 0,b),f=this.formatAndFilterItems(a.blackouts,"blackout");return c.concat(f)},formatItem:function(a,b,c){a.name=
util.escape(a.name);if("blackout"===b)a.eventType=b;if("child"===a.eventType){if(!this.recurringItems)this.recurringItems=[];this.recurringItems.push(a)}if(a.scheduledDate)b=a.scheduledDate,a.startDate=new Date(b),a.endDate=c||this.calendar&&"month"===this.calendar.dateInterval?new Date(a.scheduledDate+1):util.shiftMinutes(b,90);if(a.startDate)a.startDate=new Date(a.startDate);if(a.endDate)a.endDate=new Date(a.endDate);if(a.environment&&a.environment.color)c=w.getColorOrConvert(a.environment.color),
!c.standard&&c.fallback&&(c=w.getColor(c.fallback)),a.color=c.value;return a},itemEndEdit:function(a,b,c){(new Date(a.item.startDate)).valueOf()<this.now.valueOf()&&("entry"===a.item.eventType||"child"===a.item.eventType)?(a.preventDefault(),a.item.originalDate=b,a.item.originalEndDate=c,this.updateItem(a.item,{updateType:"move-before-time",date:b})):(this.updateSidebar(a),a.item.originalDate=b,a.item.originalEndDate=c,"entry"===a.item.eventType||"child"===a.item.eventType?this.updateItem(a.item,
{updateType:"move",date:a.item.startDate}):this.updateItem(a.item,{updateType:"move",date:a.item.startDate,endDate:a.item.endDate}))},enableCreateOnShiftDoubleClick:function(){return this.showCreateRequest||void 0!==this.calendarId},enableCreateOnControlAltClick:function(){return this.calendarId&&this.displayActions()},addCreateOnShiftDoubleClick:function(){var a=this,b=function(b,c){a.calendar.gridClick=!0;if(b.triggerEvent.shiftKey||c){var f="month"===a.calendar.dateInterval,o=f?util.shiftHours(new Date,
1):b.date;a.showCreateRequestDialog(b.date,o,f)}else(b.triggerEvent.altKey||b.triggerEvent.ctrlKey)&&a.enableCreateOnControlAltClick()&&a.updateItem(a.tempCreateItem);a.updateSidebar(b,!0);a.calendar.gridClick=!1};this.calendar.on("gridClick",function(c){b(c);a.onGridClick(c)});this.calendar.on("gridDoubleClick",function(a){b(a,!0)})},addCreateOnControlAltClick:function(a,b){var c,f;f=this.calendar.columnView;var o=this.calendar.dateModule;a===f?(c=this.calendar.floorDate(b,"minute",f.timeSlotDuration),
f=o.add(c,"minute",f.timeSlotDuration)):(c=this.calendar.floorToDay(b),f=o.add(c,"day",1));var o=i18n("New Blackout"),d="#000000";this.environment&&this.environment.name&&(o=this.application&&this.application.name?i18n("%s: %s - Blackout",this.environment.name,this.application.name):i18n("%s Blackout",this.environment.name),d=this.environment.color||"#000000");return{id:"noId",summary:util.escape(o),name:util.escape(o),startDate:c,endDate:f,clickCreate:!0,calendarId:this.calendarId,environment:{color:d}}},
addSidebarCreateButtons:function(){var a=this;this.showCreateRequest&&this.createSidebarCreateButton({label:i18n("Schedule Process"),onClick:function(){var b=A.getNewDate();a.showCreateRequestDialog(b,new Date(util.shiftHours(b,1)),!0)},hoverMessage:i18n("You can also schedule a process by holding down the shift key and clicking on a day or double click on a day you want to schedule your process."),highlight:!0});void 0!==this.calendarId&&a.displayActions()&&this.createSidebarCreateButton({label:i18n("Add Blackout"),
onClick:function(){a.showBlackoutDialog({})},hoverMessage:i18n("You can also schedule a blackout by holding down either the control or alt key then clicking on a start day then dragging the length of the blackout.")})},updateSidebar:function(a,b){var c=this,f=a.item||null;this.clearSidebar();this.showTab();var d,n=!1,s=function(a){c.updateButton&&(d=!0,a&&(n=!0))},q=function(a,b,c){a.on("change",function(){s()});c||e.add(a.domNode,b?"calendar-time-drop-down":"calendar-date-drop-down")};if(b)c.sidebar.calendar.set("value",
a.date);else if(f&&"entry"===f.eventType||"child"===f.eventType){var r="child"===f.eventType;if(f.name||r)if(r){var h=c.createSidebarLabelContainer(i18n("Name"));c.nameBox=(new x({value:f.name})).placeAt(h);c.nameBox.on("change",function(){s(!0)})}else this.createSidebarTitle(f.name);f.application&&(this.createSidebarLink(i18n("Application"),util.escape(f.application.name),"#application/"+f.application.id),f.applicationProcess&&this.createSidebarLink(i18n("Process Version"),i18n("Version %s",f.applicationProcess.version),
"#applicationProcess/"+f.applicationProcess.id+"/"+f.applicationProcess.version),f.snapshot&&this.createSidebarLink(i18n("Snapshot"),util.escape(f.snapshot.name),"#snapshot/"+f.snapshot.id));f.component&&(this.createSidebarLink(i18n("Component"),util.escape(f.component.name),"#component/"+f.component.id),f.componentProcess&&this.createSidebarLink(i18n("Component Process"),i18n("Version %s",f.componentProcess.version),"#componentProcess/"+f.componentProcess.id+"/"+f.componentProcess.version),f.version&&
this.createSidebarLink(i18n("Version"),util.escape(f.version.name),"#version/"+f.version.id));h='<div class="calendar-sidebar-environment-color inline-block" style="background-color:'+f.environment.color+'"></div>';this.createSidebarLink(i18n("Environment"),h+util.escape(f.environment.name),"#environment/"+f.environment.id);f.resource&&this.createSidebarLink(i18n("Resource"),util.escape(f.resource.name),"#resource/"+f.resource.id);if(f.recurrencePattern)h=this.createSidebarLabelContainer(i18n("Recurrence Pattern")),
c.recurrencePattern=new B({options:[{label:i18n("Daily"),value:"D"},{label:i18n("Weekly"),value:"W"},{label:i18n("Monthly"),value:"M"}],value:f.recurrencePattern}),j.place(c.recurrencePattern.domNode,h),q(c.recurrencePattern,null,!0);if(h=f.startDate>=c.now.valueOf()&&!f.fired&&f.executeEnvironment){var t=r?i18n("Base Date & Time"):i18n("Date"),u=r?new Date(f.parent.scheduledDate):f.startDate,t=this.createSidebarLabelContainer(t);c.dateBox=(new y({datePackage:A.getDatePackage(),value:A.getNewDate(u),
constraints:{format:"short"}})).placeAt(t);q(c.dateBox);c.timeBox=(new C({value:f.startDate})).placeAt(t);q(c.timeBox,!0)}else this.createSidebarText(i18n("Date"),util.dateFormatShort(f.startDate));if("child"===f.eventType)c.componentVersions=[],m.forEach(f.eventData.versions,function(a){var b=c.createSidebarLabelContainer(i18n("Version for %s",a.component.name.escape())),a=(new o).getDelegate("versionSelector")({name:"ver_"+a.componentId,type:"VersionSelector",value:a.versionSelector,context:{component:a.component,
environment:c.environment},required:!1});a.placeAt(b);c.componentVersions.push(a)});f.request&&this.createSidebarText(i18n("User"),f.request.userName);q=this.createSidebarSection();if(f.request){var v="appRequest"===f.request.type?"#applicationProcessRequest/":"#componentProcessRequest/";this.createSidebarButton(i18n("More Details"),"inline-block",function(){window.location.href=v+f.request.id},q,!0)}if(h)this.createSidebarButton(i18n("See Versions"),"inline-block",function(){c.showVersionDialog(f)},
q,!0),q=j.create("div",{className:"calendar-sidebar-modify-button-container"},this.sidebarContainer),this.createSidebarButton(i18n("Cancel Process")," calendar-cancel-button",function(){c.showCancelConfirm(f)},q),this.updateButton=this.createSidebarButton(i18n("Update Process"),"idxButtonSpecial calendar-update-button",function(){if(c.dateBox&&c.timeBox&&(d||r)){var a={updateType:"sidebar",date:util.combineDateAndTime(c.dateBox.value,c.timeBox.value),name:c.nameBox?c.nameBox.value:null};if(r)a.startDate=
c.dateBox.value,a.startTime=c.timeBox.value,a.recurrencePattern=c.recurrencePattern.value,a.componentVersions=c.componentVersions;c.updateItem(f,a)}},q)}else if(f&&"blackout"===f.eventType){if(f.name)c.displayActions()?(h=c.createSidebarLabelContainer(i18n("Name")),c.nameBox=(new x({value:f.name})).placeAt(h),c.nameBox.on("change",function(){s(!0)})):this.createSidebarTitle(f.name);void 0!==f.environment&&(h='<div class="calendar-sidebar-environment-color inline-block" style="background-color:'+f.environment.color+
'"></div>',this.createSidebarLink(i18n("Affects Environment"),h+util.escape(f.environment.name),"#environment/"+f.environment.id));c.displayActions()?(h=this.createSidebarLabelContainer(i18n("Start Date")),c.dateBox=(new y({datePackage:A.getDatePackage(),value:f.startDate,constraints:{format:"short"}})).placeAt(h),q(c.dateBox),c.timeBox=(new C({value:f.startDate})).placeAt(h),q(c.timeBox,!0),h=this.createSidebarLabelContainer(i18n("End Date")),c.endDateBox=(new y({datePackage:A.getDatePackage(),value:f.endDate,
constraints:{format:"short"}})).placeAt(h),q(c.endDateBox),c.endTimeBox=(new C({value:f.endDate})).placeAt(h),q(c.endTimeBox,!0),q=j.create("div",{className:"calendar-sidebar-modify-button-container"},this.sidebarContainer),this.createSidebarButton(i18n("Delete Blackout"),"calendar-cancel-button",function(){c.showBlackoutDeleteWarning(f)},q),this.updateButton=this.createSidebarButton(i18n("Update Blackout"),"idxButtonSpecial calendar-update-button",function(){c.dateBox&&c.timeBox&&c.endDateBox&&c.endTimeBox&&
d&&c.updateItem(f,{updateType:"sidebar",date:util.combineDateAndTime(c.dateBox.value,c.timeBox.value),endDate:util.combineDateAndTime(c.endDateBox.value,c.endTimeBox.value),name:n&&c.nameBox?c.nameBox.value:null})},q)):(this.createSidebarText(i18n("Start Date"),util.dateFormatShort(f.startDate)),this.createSidebarText(i18n("End Date"),util.dateFormatShort(f.endDate)))}},updateItem:function(a,b){var c=this,o=null,d=this.calendar.store;if(a.clickCreate)a.itemId=a.id,c.showBlackoutDialog(a);if((new Date(b.date)).valueOf()<
c.now.valueOf()&&"entry"===a.eventType||"move-before-time"===b.updateType)o=i18n("Events cannot be moved before the current time");(new Date(b.date)).valueOf()>(new Date(b.endDate)).valueOf()&&"blackout"===a.eventType&&(o=i18n("The end date must be greater than the start date"));if(null!==o)c._resetCalendar(a,o,c.calendar);else if("entry"===a.eventType)k.get({url:bootstrap.restUrl+"deploy/schedule/"+a.eventType+"/"+a.id+"/moveTo/"+(new Date(b.date)).valueOf(),handleAs:"json",load:function(f){if(void 0!==
f.blackouts){var o=i18n("The event cannot be moved to that time because it conflicts with a blackout:")+"<br/>";1<f.blackouts.length&&(o=i18n("The event cannot be moved to that time because it conflicts with blackouts:")+"<br/>");m.forEach(f.blackouts,function(a){o+="<br/><b>"+util.escape(a.name)+"</b><br/>";void 0!==a.environment&&(o+="&nbsp; &nbsp; <b>"+i18n("Application Environment")+"</b>: "+util.escape(a.environment.name)+"<br/>");o+="&nbsp; &nbsp; "+util.dateFormatShort(a.startDate)+" - "+util.dateFormatShort(a.endDate)+
"<br/>"});new r({title:i18n("Schedule Error"),forceRawMessages:!0,message:o});if(a.originalDate&&a.originalEndDate)a.startDate=a.originalDate,a.endDate=a.originalEndDate;d.put(a)}else{a.startDate=b.date;a.endDate=b.endDate;if(!a.endDate)a.endDate=c.calendar&&"month"===c.calendar.dateInterval?new Date(b.date.valueOf()+1):util.shiftMinutes(b.date,90);a.originalDate=a.startDate;a.originalEndDate=a.endDate;d.put(a);c.showSaveMessage()}},error:function(b){c._resetCalendar(a,b.responseText,c.calendar)}});
else if("child"===a.eventType)(new t({submitUrl:bootstrap.restUrl+"calendar/recurring",addData:function(c){c.existingId=a.parent.id;c.name=b.name;c.date=(new Date(b.date)).valueOf();c.recurrencePattern=b.recurrencePattern;if(b.componentVersions)c.versions=[],m.forEach(b.componentVersions,function(a){c.versions.push({versionSelector:a.value,componentId:a.component.id})})},postSubmit:function(){void 0!==c.callback&&c.callback();c.refresh();c.showSaveMessage()},onCancel:function(){void 0!==c.callback&&
c.callback()}})).submitForm();else if("blackout"===a.eventType){var o=(new Date(b.date)).valueOf(),n=(new Date(b.endDate)).valueOf();b.name?(a.name=b.name,(new f({calendarId:this.calendarId,blackout:a,callback:function(){a.startDate=b.date;a.endDate=b.endDate;d.put(a);c.showSaveMessage()}})).form.submitForm()):k.get({url:bootstrap.restUrl+"deploy/schedule/blackout/"+a.id+"/moveTo/"+o+"/"+n,load:function(){a.startDate=b.date;a.endDate=b.endDate;d.put(a);c.showSaveMessage()}})}},addCalendarFilters:function(){var a=
this,b=0;this.calendar.numberOfFilters=0;this.calendar.filters={};this.calendar.allFilters={filters:{}};var f=j.create("div",{className:"calendar-sidebar-bottom-filter-container"},this.calendarSidebarFilterAttachPoint,"last"),o=j.create("div",{className:"calendar-filter-section"},f,"first");if(!this.application){var d=j.create("div",{className:"add-filter-container"},o),n=j.create("div",{className:"add-filter-label",innerHTML:"Add Filter"},d),s=function(){9===a.calendar.numberOfFilters&&e.add(d,"hidden");
b++;a.calendar.filters[b]=a.addCalendarFilterSection(b,f,d)};c(n,"click",function(){s()});this.createSidebarButton("","iconPlus inline-block add-filter-icon",s,d,!0,i18n("Add Filter"))}this.environment||(this.calendar.filters[b]=this.addCalendarFilterSection(b,f));n=j.create("div",{className:"calendar-sidebar-filter-button-container"},f);if(!this.component)this.calendar.allFilters.filters.processTypeFilter=this.createCalendarFilterSection({label:i18n("Process Type"),className:"calendar-process-filter-box",
options:[{label:i18n("All"),value:"",selected:"selected"},{label:i18n("Application Process"),value:"appRequest"},{label:i18n("Component Process"),value:"compRequest"}],value:i18n("All"),placeAt:o}),this.calendar.allFilters.filters.eventTypeFilter=this.createCalendarFilterSection({label:i18n("Entry Type"),className:"calendar-event-filter-box",options:[{label:i18n("All"),value:"",selected:"selected"},{label:i18n("Processes"),value:"entry"},{label:i18n("Blackouts"),value:"blackout"},{label:i18n("Recurring"),
value:"child"}],value:i18n("All"),placeAt:o});var q=function(b){a.calendar&&a.refresh();b&&a.showSaveMessage(i18n("Filters Applied"),a.calendarSidebarFilterAttachPoint);a.applyFilters=b};this.createSidebarButton(i18n("Clear All"),"idxButtonCompact inline-block calendar-cancel-button",function(){a.applyFilters&&q(!1);if(a.environmentFilter)a.environmentFilter.value="";j.empty(a.calendarSidebarFilterAttachPoint);a.calendar.numberOfFilters=1;a.addCalendarFilters()},n);this.createSidebarButton(i18n("Apply"),
"idxButtonSpecial idxButtonCompact inline-block calendar-update-button",function(){q(!0)},n)},addCalendarFilterSection:function(a,b,f){var o=this,d={};this.calendar.numberOfFilters++;var n=function(a){var b="#00B2EF";if(a.color)a=w.getColorOrConvert(a.color),!a.standard&&a.fallback&&(a=w.getColor(a.fallback)),b=a.value;return b},s=function(a,b){j.create("div",{className:"inlineBlock filter-dropdown-color",style:{backgroundColor:n(b)}},a,"first")},q=function(a,b,c){b.color&&e.add(a,w.getBasicColorName(b.color)+
"-color");j.create("div",{className:"inlineBlock filter-dropdown-color",style:{backgroundColor:n(b)}},c,"first")},r=j.create("div",{className:"calendar-filter-section"},b,"before");this.application||(b=j.create("div",{className:"inline-block iconMinus remove-filter-icon linkPointer",title:i18n("Remove Filter")},r),c(b,"click",function(){o.calendar.numberOfFilters--;1>o.calendar.numberOfFilters?(j.empty(o.calendarSidebarFilterAttachPoint),o.addCalendarFilters()):(delete o.calendar.filters[a],j.destroy(r));
10>o.calendar.numberOfFilters&&f&&e.remove(f,"hidden")}));if(this.application){if(!this.environment&&this.application)d.environmentFilter=this.createCalendarFilterSection({url:bootstrap.restUrl+"deploy/application/"+this.application.id+"/environments/false",label:i18n("Environment"),placeHolder:i18n("All Environments"),className:"calendar-environment-filter-box",multiple:!0,formatDropDownLabel:s,formatSelectedItem:q,placeAt:r})}else b=this.component?"deploy/component/"+this.component.id+"/applications":
"deploy/application",d.environmentFilterContainer=this.createSidebarSection(),d.applicationFilter=this.createCalendarFilterSection({url:bootstrap.restUrl+b,label:i18n("Application"),placeHolder:i18n("All Applications"),className:"calendar-application-filter-box",onChange:function(a,b){j.empty(d.environmentFilterContainer);if(!o.environment&&b)j.place(o.createSidebarLabel(i18n("Environment")),d.environmentFilterContainer),d.environmentFilter=o.createCalendarFilterSection({url:bootstrap.restUrl+"deploy/application/"+
b.id+"/environments/false",placeHolder:i18n("All Environments"),className:"calendar-environment-filter-box",section:d.environmentFilterContainer,noPlace:!0,multiple:!0,formatDropDownLabel:s,formatSelectedItem:q})},placeAt:r}),j.place(d.environmentFilterContainer,r);return d},removeCalendarFilterSection:function(){},filterCalendar:function(a){var b=this,c=!1,f=function(f,o){var d=!1,n="";for(n in f)f.hasOwnProperty(n)&&(d=f[n],(d=b.applyFilter(d,a,o))&&(c=!0));return d};f(this.calendar.filters);if(c||
this.environment)c=!1,c=f(this.calendar.allFilters,!0);return c},applyFilter:function(a,b,c){var f=!0,o=!1,d=function(c){var d=a[c.filterName+"Filter"];if(d&&d.dropDown&&(d=c.multiple?d.items:d.dropDown.value||d.dropDown.values)&&f){var n=b[c.dataName];o=!0;if(c.dataName2&&c.dataName&&n)f=n[c.dataName2]===d||""===d;else if(c.dataName&&n)f=n===d||""===d;else if(b[c.filterName])if(c.multiple){var s=!1;m.forEach(d,function(a){b[c.filterName].id===a.id&&(s=!0);f=s})}else f=b[c.filterName].id===d;else f=
!1}},n=[{filterName:"application"},{filterName:"environment",multiple:!0},{filterName:"component"}],s=[{filterName:"processType",dataName:"request",dataName2:"type"},{filterName:"eventType",dataName:"eventType"}];m.forEach(c?s:n,function(a){d(a)});o||(f=!0);f||this.calendar&&this.calendar.store.remove(b.id);return f},showBlackoutDeleteWarning:function(a){var b=this;new s({message:i18n("Are you sure you want to delete this blackout entry?"),action:function(){k.del({url:bootstrap.restUrl+"deploy/schedule/blackout/"+
a.id,load:function(){b.calendar.store.remove(a.id)}})}})},showBlackoutDialog:function(a){var b=this,c=new q({title:i18n("Create Blackout"),closable:!0,draggable:!0});(new f({calendarId:this.calendarId,blackout:a.id?a:void 0,callback:function(f){c.hide();c.destroy();b.calendar.store.remove(a.itemId);f&&b.refresh()}})).placeAt(c.containerNode);c.show()},showCancelConfirm:function(a){var b=this;new s({message:i18n("Are you sure you want to cancel this process request?"),action:function(){var c=bootstrap.restUrl+
"calendar/entry/"+a.id;"child"===a.eventType&&(c=bootstrap.restUrl+"calendar/recurring/"+a.parent.id);k.del({url:c,load:function(){b.calendar.store.remove(a.id);b.refresh()},error:function(a){(new r({message:util.escape(a.responseText)})).startup()}})}})},showVersionDialog:function(a){var b=new q({title:i18n("Component Versions"),closable:!0,draggable:!0}),c=[{name:i18n("Component"),formatter:function(a){return v.componentLinkFormatter(a.component)}},{name:i18n("Version for Request"),formatter:v.versionLinkFormatter},
{name:i18n("Type"),formatter:this.typeFormatter},{name:i18n("Description"),field:"description"}],a=a.request?bootstrap.restUrl+"deploy/applicationProcessRequest/"+a.request.id+"/versions":bootstrap.restUrl+"deploy/schedule/calendar/application/"+a.parent.id+"/versions",f=j.create("div",{id:"warningDiv",innerHTML:i18n("* These versions may change before the process executes.")}),o=j.create("div",{id:"versionTableDiv",style:{minWidth:"400px"}});j.place(f,b.containerNode,0);j.place(o,b.containerNode,
1);k.get({url:a,handleAs:"json",load:function(a){(new u({serverSideProcessing:!1,data:a.versions,rowsPerPage:10,columns:c,tableConfigKey:"componentVersionRequestList",noDataMessage:i18n("No component versions found."),hideExpandCollapse:!0,hidePagination:!1})).placeAt(o);b.show()}})},displayActions:function(){var a=!1,b=!1;appState.environment?appState.environment.security&&(a=appState.environment.security["Execute on Environments"],a=(b=appState.environment.security["View Environments"])&&a):appState.application?
appState.application.security&&(a=b=appState.application.security["View Applications"]):a=!0;return a},showCreateRequestDialog:function(a,c,f){var o=this,d,n;if(a)d=this.calendar.store,f=f?util.combineDateAndTime(a,util.shiftHours(new Date,1)):a,o.calendar&&"month"===o.calendar.dateInterval||util.shiftMinutes(f,90),n={name:i18n("New Process"),id:A.getNewDate().valueOf(),startDate:f,endDate:new Date(f.valueOf()+1),color:"#87CEEB"},d.put(n);var s=this.calendar.get("date"),e=new q({title:i18n("Schedule a Process"),
closable:!0,draggable:!0,onCancel:function(){d&&n&&d.remove(n.id);o.calendar.set("date",s)}});(new b({application:this.application,environment:this.environment,snapshot:this.snapshot,forceSchedule:!0,date:a,time:c,callback:function(){e.hide();e.destroy();d&&n&&d.remove(n.id);o.calendar.set("date",s)}})).placeAt(e.containerNode);e.show()},typeFormatter:function(a){var b="";"FULL"===a.type?b=i18n("Full"):"INCREMENTAL"===a.type&&(b=i18n("Incremental"));return b},_resetItemTime:function(a,b,c){new r({title:i18n("Schedule Error"),
message:b});if(c){if(a.originalDate)a.startDate=a.originalDate;if(a.originalEndDate)a.endDate=a.originalEndDate;c.store.put(a);"month"!==c.dateInterval&&navBar.setHash("main/calendar",!1,!0)}}})})},"dojo/dom-construct":function(){define("exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),function(l,m,k,j,e,h){function d(a,b){var c=b.parentNode;c&&c.insertBefore(a,b)}function c(a){if(a.canHaveChildren)try{a.innerHTML="";return}catch(c){}for(var f;f=a.lastChild;)b(f,a)}
function b(a,b){a.firstChild&&c(a);b&&(k("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}var a={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},f=/<\s*([\w\:]+)/,n={},r=0,t="__"+m._scopeName+"ToDomId",q;for(q in a)if(a.hasOwnProperty(q))m=a[q],m.pre="option"==q?'<select multiple="multiple">':
"<"+m.join("><")+">",m.post="</"+m.reverse().join("></")+">";l.toDom=function(b,c){var c=c||j.doc,d=c[t];d||(c[t]=d=++r+"",n[d]=c.createElement("div"));var b=b+"",e=b.match(f),q=e?e[1].toLowerCase():"",d=n[d];if(e&&a[q]){e=a[q];d.innerHTML=e.pre+b+e.post;for(e=e.length;e;--e)d=d.firstChild}else d.innerHTML=b;if(1==d.childNodes.length)return d.removeChild(d.firstChild);for(q=c.createDocumentFragment();e=d.firstChild;)q.appendChild(e);return q};l.place=function(a,b,c){b=e.byId(b);"string"==typeof a&&
(a=/^\s*</.test(a)?l.toDom(a,b.ownerDocument):e.byId(a));if("number"==typeof c){var f=b.childNodes;!f.length||f.length<=c?b.appendChild(a):d(a,f[0>c?0:c])}else switch(c){case "before":d(a,b);break;case "after":c=a;(f=b.parentNode)&&(f.lastChild==b?f.appendChild(c):f.insertBefore(c,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":l.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){d(a,b.firstChild);break}default:b.appendChild(a)}return a};l.create=function(a,
b,c,f){var d=j.doc;if(c)c=e.byId(c),d=c.ownerDocument;"string"==typeof a&&(a=d.createElement(a));b&&h.set(a,b);c&&l.place(a,c,f);return a};l.empty=function(a){c(e.byId(a))};l.destroy=function(a){(a=e.byId(a))&&b(a,a.parentNode)}})},"dojo/dom-attr":function(){define("exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(l,m,k,j,e,h){function d(a,b){var c=a.getAttributeNode&&a.getAttributeNode(b);return c&&c.specified}var c={innerHTML:1,className:1,htmlFor:m("ie"),value:1},
b={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};l.has=function(a,f){var n=f.toLowerCase();return c[h.names[n]||f]||d(j.byId(a),b[n]||f)};l.get=function(a,f){var a=j.byId(a),n=f.toLowerCase(),e=h.names[n]||f,t=a[e];if(c[e]&&"undefined"!=typeof t||"href"!=e&&("boolean"==typeof t||k.isFunction(t)))return t;n=b[n]||f;return d(a,n)?a.getAttribute(n):null};l.set=function(a,f,d){a=j.byId(a);if(2==arguments.length){for(var r in f)l.set(a,r,f[r]);return a}r=f.toLowerCase();var t=
h.names[r]||f,q=c[t];if("style"==t&&"string"!=typeof d)return e.set(a,d),a;if(q||"boolean"==typeof d||k.isFunction(d))return h.set(a,f,d);a.setAttribute(b[r]||f,d);return a};l.remove=function(a,c){j.byId(a).removeAttribute(b[c.toLowerCase()]||c)};l.getNodeProp=function(a,c){var a=j.byId(a),n=c.toLowerCase(),e=h.names[n]||c;if(e in a&&"href"!=e)return a[e];n=b[n]||c;return d(a,n)?a.getAttribute(n):null}})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(l,m){function k(b,c,o){c=c.toLowerCase();
if(l("ie")){if("auto"==o){if("height"==c)return b.offsetHeight;if("width"==c)return b.offsetWidth}if("fontweight"==c)switch(o){case 700:return"bold";default:return"normal"}}c in a||(a[c]=f.test(c));return a[c]?h(b,o):o}var j,e={};j=l("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);if(!b&&a.style)a.style.display="",b=c.getComputedStyle(a,null)}return b||{}}:l("ie")&&(9>l("ie")||l("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?
a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};e.getComputedStyle=j;var h;h=l("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,f=a.runtimeStyle,d=c.left,n=f.left;f.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(e){b=0}c.left=d;f.left=n;return b}:function(a,b){return parseFloat(b)||0};e.toPixelValue=h;var d=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?
{}:null}},c=9>l("ie")||10>l("ie")&&l("quirks")?function(a){try{return d(a).Opacity/100}catch(b){return 1}}:function(a){return j(a).opacity},b=9>l("ie")||10>l("ie")&&l("quirks")?function(a,c){var f=100*c,n=1==c;a.style.zoom=n?"":1;if(d(a))d(a,1).Opacity=f;else{if(n)return c;a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+f+")"}d(a,1).Enabled=!n;if("tr"==a.tagName.toLowerCase())for(f=a.firstChild;f;f=f.nextSibling)"td"==f.tagName.toLowerCase()&&b(f,c);return c}:function(a,b){return a.style.opacity=
b},a={left:!0,top:!0},f=/margin|padding|width|height|max|min|offset/,n=l("ie")?"styleFloat":"cssFloat",r={cssFloat:n,styleFloat:n,"float":n};e.get=function(a,b){var f=m.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return c(f);var b=r[b]||b,n=e.getComputedStyle(f);return 1==d?n:k(f,b,n[b]||f.style[b])};e.set=function(a,c,f){var d=m.byId(a),n=arguments.length,h="opacity"==c,c=r[c]||c;if(3==n)return h?b(d,f):d.style[c]=f;for(var j in c)e.set(a,j,c[j]);return e.getComputedStyle(d)};return e})},"dojo/dom-prop":function(){define("exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),
function(l,m,k,j,e,h,d,c){var b={},a=0,f=m._scopeName+"attrid";l.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};l.get=function(a,b){var a=e.byId(a),c=b.toLowerCase();return a[l.names[c]||b]};l.set=function(n,r,t){n=e.byId(n);if(2==arguments.length&&"string"!=typeof r){for(var q in r)l.set(n,q,r[q]);return n}q=r.toLowerCase();q=l.names[q]||r;if("style"==q&&"string"!=typeof t)return h.set(n,
t),n;if("innerHTML"==q)return k("ie")&&n.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(d.empty(n),n.appendChild(d.toDom(t,n.ownerDocument))):n[q]=t,n;if(j.isFunction(t)){var o=n[f];o||(o=a++,n[f]=o);b[o]||(b[o]={});var s=b[o][q];if(s)c.disconnect(s);else try{delete n[q]}catch(u){}t?b[o][q]=c.connect(n,q,t):n[q]=null;return n}n[q]=t;return n}})},"dojo/_base/connect":function(){define("./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),
function(l,m,k,j,e,h,d,c){function b(a,b,f,d,n){d=c.hitch(f,d);if(!a||!a.addEventListener&&!a.attachEvent)return j.after(a||l.global,b,d,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));if(!a)a=l.global;if(!n)switch(b){case "keypress":b=t;break;case "mouseenter":b=h.enter;break;case "mouseleave":b=h.leave}return m(a,b,d,n)}function a(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=a.keyChar||a.keyCode}d.add("events-keypress-typed",function(){var a={charCode:0};
try{a=document.createEvent("KeyboardEvent"),(a.initKeyboardEvent||a.initKeyEvent).call(a,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(b){}return 0==a.charCode&&!d("opera")});var f={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},n=d("mac")?"metaKey":"ctrlKey",r=function(b,f){var d=c.mixin({},b,f);a(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},t;t=d("events-keypress-typed")?function(a,
b){var c=m(a,"keydown",function(a){var c=a.keyCode,o=13!=c&&32!=c&&(27!=c||!d("ie"))&&(48>c||90<c)&&(96>c||111<c)&&(186>c||192<c)&&(219>c||222<c)&&229!=c;if(o||a.ctrlKey){o=o?0:c;if(a.ctrlKey){if(3==c||13==c)return b.call(a.currentTarget,a);o=95<o&&106>o?o-48:!a.shiftKey&&65<=o&&90>=o?o+32:f[o]||o}c=r(a,{type:"keypress",faux:!0,charCode:o});b.call(a.currentTarget,c);if(d("ie"))try{a.keyCode=c.keyCode}catch(n){}}}),n=m(a,"keypress",function(a){var c=a.charCode,a=r(a,{charCode:32<=c?c:0,faux:!0});return b.call(this,
a)});return{remove:function(){c.remove();n.remove()}}}:d("opera")?function(a,b){return m(a,"keypress",function(a){var c=a.which;3==c&&(c=99);c=32>c&&!a.shiftKey?0:c;a.ctrlKey&&!a.shiftKey&&65<=c&&90>=c&&(c+=32);return b.call(this,r(a,{charCode:c}))})}:function(b,c){return m(b,"keypress",function(b){a(b);return c.call(this,b)})};var q={_keypress:t,connect:function(a,c,f,d,n){var e=arguments,r=[],q=0;r.push("string"==typeof e[0]?null:e[q++],e[q++]);var h=e[q+1];r.push("string"==typeof h||"function"==
typeof h?e[q++]:null,e[q++]);for(h=e.length;q<h;q++)r.push(e[q]);return b.apply(this,r)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,f){return k.subscribe(a,c.hitch(b,f))},publish:function(a,b){return k.publish.apply(k,[a].concat(b))},connectPublisher:function(a,b,c){var f=function(){q.publish(a,arguments)};return c?q.connect(b,c,f):q.connect(b,f)},isCopyKey:function(a){return a[n]}};q.unsubscribe=q.disconnect;c.mixin(l,q);return q})},"dojo/topic":function(){define(["./Evented"],
function(l){var m=new l;return{publish:function(k,j){return m.emit.apply(m,arguments)},subscribe:function(k,j){return m.on.apply(m,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(l,m,k,j){if(m._fixEvent){var e=m._fixEvent;m._fixEvent=function(d,c){(d=e(d,c))&&j.normalizeEvent(d);return d}}var h={fix:function(d,c){return m._fixEvent?m._fixEvent(d,c):d},stop:function(d){k("dom-addeventlistener")||d&&d.preventDefault?(d.preventDefault(),d.stopPropagation()):
(d=d||window.event,d.cancelBubble=!0,m._preventDefault.call(d))}};l.fixEvent=h.fix;l.stopEvent=h.stop;return h})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(l,m,k,j){function e(a,b,c,d,e,q){q=q||"px";a=a.style;if(!isNaN(b))a.left=b+q;if(!isNaN(c))a.top=c+q;if(0<=d)a.width=d+q;if(0<=e)a.height=e+q}function h(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function d(a){return"border-box"==
c.boxModel||"table"==a.tagName.toLowerCase()||h(a)}var c={boxModel:"content-box"};if(l("ie"))c.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";c.getPadExtents=function(a,b){var a=k.byId(a),c=b||j.getComputedStyle(a),d=j.toPixelValue,e=d(a,c.paddingLeft),q=d(a,c.paddingTop),o=d(a,c.paddingRight),c=d(a,c.paddingBottom);return{l:e,t:q,r:o,b:c,w:e+o,h:q+c}};c.getBorderExtents=function(a,b){var a=k.byId(a),c=j.toPixelValue,d=b||j.getComputedStyle(a),e="none"!=d.borderLeftStyle?c(a,
d.borderLeftWidth):0,q="none"!=d.borderTopStyle?c(a,d.borderTopWidth):0,o="none"!=d.borderRightStyle?c(a,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(a,d.borderBottomWidth):0;return{l:e,t:q,r:o,b:c,w:e+o,h:q+c}};c.getPadBorderExtents=function(a,b){var a=k.byId(a),d=b||j.getComputedStyle(a),e=c.getPadExtents(a,d),d=c.getBorderExtents(a,d);return{l:e.l+d.l,t:e.t+d.t,r:e.r+d.r,b:e.b+d.b,w:e.w+d.w,h:e.h+d.h}};c.getMarginExtents=function(a,b){var a=k.byId(a),c=b||j.getComputedStyle(a),d=j.toPixelValue,
e=d(a,c.marginLeft),q=d(a,c.marginTop),o=d(a,c.marginRight),c=d(a,c.marginBottom);return{l:e,t:q,r:o,b:c,w:e+o,h:q+c}};c.getMarginBox=function(a,b){var a=k.byId(a),d=b||j.getComputedStyle(a),e=c.getMarginExtents(a,d),h=a.offsetLeft-e.l,q=a.offsetTop-e.t,o=a.parentNode,s=j.toPixelValue;if(l("mozilla")){var u=parseFloat(d.left),d=parseFloat(d.top);!isNaN(u)&&!isNaN(d)?(h=u,q=d):o&&o.style&&(o=j.getComputedStyle(o),"visible"!=o.overflow&&(h+="none"!=o.borderLeftStyle?s(a,o.borderLeftWidth):0,q+="none"!=
o.borderTopStyle?s(a,o.borderTopWidth):0))}else if((l("opera")||8==l("ie")&&!l("quirks"))&&o)o=j.getComputedStyle(o),h-="none"!=o.borderLeftStyle?s(a,o.borderLeftWidth):0,q-="none"!=o.borderTopStyle?s(a,o.borderTopWidth):0;return{l:h,t:q,w:a.offsetWidth+e.w,h:a.offsetHeight+e.h}};c.getContentBox=function(a,b){var a=k.byId(a),d=b||j.getComputedStyle(a),e=a.clientWidth,h=c.getPadExtents(a,d),q=c.getBorderExtents(a,d);e?(d=a.clientHeight,q.w=q.h=0):(e=a.offsetWidth,d=a.offsetHeight);l("opera")&&(h.l+=
q.l,h.t+=q.t);return{l:h.l,t:h.t,w:e-h.w-q.w,h:d-h.h-q.h}};c.setContentSize=function(a,b,n){var a=k.byId(a),r=b.w,b=b.h;d(a)&&(n=c.getPadBorderExtents(a,n),0<=r&&(r+=n.w),0<=b&&(b+=n.h));e(a,NaN,NaN,r,b)};var b={l:0,t:0,w:0,h:0};c.setMarginBox=function(a,f,n){var a=k.byId(a),r=n||j.getComputedStyle(a),n=f.w,t=f.h,q=d(a)?b:c.getPadBorderExtents(a,r),r=c.getMarginExtents(a,r);if(l("webkit")&&h(a)){var o=a.style;if(0<=n&&!o.width)o.width="4px";if(0<=t&&!o.height)o.height="4px"}0<=n&&(n=Math.max(n-q.w-
r.w,0));0<=t&&(t=Math.max(t-q.h-r.h,0));e(a,f.l,f.t,n,t)};c.isBodyLtr=function(a){a=a||m.doc;return"ltr"==(m.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};c.docScroll=function(a){var a=a||m.doc,b=m.doc.parentWindow||m.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:(b=l("quirks")?m.body(a):a.documentElement)&&{x:c.fixIeBiDiScrollLeft(b.scrollLeft||0,a),y:b.scrollTop||0}};if(l("ie"))c.getIeDocumentElementOffset=function(a){a=a||m.doc;a=a.documentElement;if(8>l("ie")){var b=
a.getBoundingClientRect(),c=b.left,b=b.top;7>l("ie")&&(c+=a.clientLeft,b+=a.clientTop);return{x:0>c?0:c,y:0>b?0:b}}return{x:0,y:0}};c.fixIeBiDiScrollLeft=function(a,b){var b=b||m.doc,d=l("ie");if(d&&!c.isBodyLtr(b)){var e=l("quirks"),h=e?m.body(b):b.documentElement,q=m.global;6==d&&!e&&q.frameElement&&h.scrollHeight>h.clientHeight&&(a+=h.clientLeft);return 8>d||e?a+h.clientWidth-h.scrollWidth:-a}return a};c.position=function(a,b){var a=k.byId(a),d=m.body(a.ownerDocument),e=a.getBoundingClientRect(),
e={x:e.left,y:e.top,w:e.right-e.left,h:e.bottom-e.top};if(9>l("ie")){var h=c.getIeDocumentElementOffset(a.ownerDocument);e.x-=h.x+(l("quirks")?d.clientLeft+d.offsetLeft:0);e.y-=h.y+(l("quirks")?d.clientTop+d.offsetTop:0)}b&&(d=c.docScroll(a.ownerDocument),e.x+=d.x,e.y+=d.y);return e};c.getMarginSize=function(a,b){var a=k.byId(a),d=c.getMarginExtents(a,b||j.getComputedStyle(a)),e=a.getBoundingClientRect();return{w:e.right-e.left+d.w,h:e.bottom-e.top+d.h}};c.normalizeEvent=function(a){if(!("layerX"in
a))a.layerX=a.offsetX,a.layerY=a.offsetY;if(!l("dom-addeventlistener")){var b=a.target,b=b&&b.ownerDocument||document,d=l("quirks")?b.body:b.documentElement,e=c.getIeDocumentElementOffset(b);a.pageX=a.clientX+c.fixIeBiDiScrollLeft(d.scrollLeft||0,b)-e.x;a.pageY=a.clientY+(d.scrollTop||0)-e.y}};return c})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(l,m,k,j,e){function h(d,c){var b=function(a,b){return m(a,d,function(d){if(c)return c(d,b);if(!j.isDescendant(d.relatedTarget,
a))return b.call(this,d)})};b.bubble=function(a){return h(d,function(b,c){var d=a(b.target),e=b.relatedTarget;if(d&&d!=(e&&1==e.nodeType&&a(e)))return c.call(d,b)})};return b}k.add("dom-quirks",e.doc&&"BackCompat"==e.doc.compatMode);k.add("events-mouseenter",e.doc&&"onmouseenter"in e.doc.createElement("div"));k.add("events-mousewheel",e.doc&&"onmousewheel"in e.doc);e=k("dom-quirks")&&k("ie")||!k("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(d,c){return d.button&c},isLeft:function(d){return d.button&
1},isMiddle:function(d){return d.button&4},isRight:function(d){return d.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(d,c){return d.button==c},isLeft:function(d){return 0==d.button},isMiddle:function(d){return 1==d.button},isRight:function(d){return 2==d.button}};l.mouseButtons=e;l=k("events-mousewheel")?"mousewheel":function(d,c){return m(d,"DOMMouseScroll",function(b){b.wheelDelta=-b.detail;c.call(this,b)})};return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:l,isLeft:e.isLeft,
isMiddle:e.isMiddle,isRight:e.isRight}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(l,m){return l.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:m("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,
NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:m("mac")&&!m("air")?m("safari")?91:224:17}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(l,m,k){function j(b){if("string"==
typeof b||b instanceof String){if(b&&!h.test(b))return d[0]=b,d;b=b.split(h);b.length&&!b[0]&&b.shift();b.length&&!b[b.length-1]&&b.pop();return b}return!b?[]:m.filter(b,function(a){return a})}var e,h=/\s+/,d=[""],c={};return e={contains:function(b,a){return 0<=(" "+k.byId(b).className+" ").indexOf(" "+a+" ")},add:function(b,a){var b=k.byId(b),a=j(a),c=b.className,d,c=c?" "+c+" ":" ";d=c.length;for(var e=0,h=a.length,q;e<h;++e)(q=a[e])&&0>c.indexOf(" "+q+" ")&&(c+=q+" ");d<c.length&&(b.className=
c.substr(1,c.length-2))},remove:function(b,a){var b=k.byId(b),c;if(void 0!==a){a=j(a);c=" "+b.className+" ";for(var d=0,e=a.length;d<e;++d)c=c.replace(" "+a[d]+" "," ");c=l.trim(c)}else c="";b.className!=c&&(b.className=c)},replace:function(b,a,f){b=k.byId(b);c.className=b.className;e.remove(c,f);e.add(c,a);b.className!==c.className&&(b.className=c.className)},toggle:function(b,a,c){b=k.byId(b);if(void 0===c)for(var a=j(a),d=0,h=a.length,t;d<h;++d)t=a[d],e[e.contains(b,t)?"remove":"add"](b,t);else e[c?
"add":"remove"](b,a);return c}}})},"deploy/widgets/application/RunApplicationProcess":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/dom-construct,dojo/dom-style,dojo/on,dojo/Deferred,js/util/blocker/_IncrementBlockerMixin,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/DomNode,deploy/widgets/version/VersionSelectionDialog,deploy/widgets/patterns/PatternPropertySelectionDialog,deploy/widgets/Formatters".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return h("deploy.widgets.application.RunApplicationProcess",[m,l,r],{templateString:'<div class="runApplicationProcess">  <div data-dojo-attach-point="formAttach" style="max-height: 500px; overflow-x: hidden; overflow-y: auto;"></div></div>',forceSchedule:!1,postCreate:function(){this.inherited(arguments);var a=this;this.isSchedule=this.showingVersions=!1;this.loadedProcessData={};this.form=new q({submitMethod:"POST",addData:function(b){if(b.description)b.description=
b.description.escape();if(a.applicationProcess){b.properties={};e.forEach(a.unfilledProperties,function(a){void 0!==b["p_"+a.name]&&(b.properties[a.name]=b["p_"+a.name])});if(void 0!==b.patternProperties){for(var c in b.patternProperties)void 0!==b.patternProperties[c]&&(b.properties[c]=b.patternProperties[c]);delete b.patternProperties}b.applicationId=a.application.id;b.applicationProcessId=a.applicationProcess.id;b.environmentId=a.environment.id;if(a.snapshot)b.snapshotId=a.snapshot.id;if(a.isSchedule&&
b.date&&b.time)b.date=util.combineDateAndTime(b.date,b.time).valueOf()}},onSubmit:function(b){if(void 0!==a.applicationProcess&&"patternApplicationProcess"===a.applicationProcess.metadataType){var c=a.form.postSubmit;delete a.form.postSubmit;a.patternPropertySelector.validateCloudProperties(b.properties).then(function(){a.form.postSubmit=c;a.form.submitOverXhr(b)},function(b){a.form.postSubmit=c;a.form.unblock();a.form.onError(b)})}else a.form.submitOverXhr(b)},postSubmit:function(b,c){if(1!==arguments.length)if(void 0!==
b.blackouts){var f=i18n("The event cannot be created at that time because it conflicts with a blackout:")+"<br/>";1<b.blackouts.length&&(f=i18n("The event cannot be created at that time because it conflicts with blackouts:")+"<br/>");e.forEach(b.blackouts,function(a){f+="<br/><b>"+util.escape(a.name)+"</b><br/>";void 0!==a.environment&&(f+="&nbsp; &nbsp; <b>"+i18n("Application Environment")+"</b>: "+util.escape(a.environment.name)+"<br/>");f+="&nbsp; &nbsp; "+util.dateFormatShort(a.startDate)+" - "+
util.dateFormatShort(a.endDate)+"<br/>"});new t({title:i18n("Schedule Error"),forceRawMessages:!0,message:f})}else a.isSchedule?(void 0!==a.callback&&a.callback(),navBar.setHash("application/"+a.application.id+"/calendar",!1,!0)):(void 0!==a.callback&&a.callback(),navBar.setHash("applicationProcessRequest/"+b.requestId+"/log",!1,!0))},onCancel:function(){void 0!==a.callback&&a.callback()},onError:function(b){var c=[i18n("An error has occurred while deploying this application:"),""];if(void 0!==a.applicationProcess&&
"patternApplicationProcess"===a.applicationProcess.metadataType){var f=this._decodeJson(b.responseText);try{var d=JSON.parse(f);e.forEach(d,function(a){c.push(util.escape(a.errorMessage))})}catch(o){c.push(util.escape(b.responseText))}}else void 0!==a.callback&&a.callback(),c.push(util.escape(b.responseText));new t({title:i18n("Error"),messages:c})},_decodeJson:function(a){return a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})},validateFields:function(){var b=[];if(void 0!==a.applicationProcess&&
"patternApplicationProcess"===a.applicationProcess.metadataType){var c=a.patternPropertySelector.validate();void 0!==c&&0<c.length&&(b.push(i18n("Not all required properties have values.")),e.forEach(c,function(a){b.push(a)}))}return b},saveLabel:i18n("Submit")});this.form.addField({name:"_applicationInsert",type:"Invisible"});this.form.addField({name:"_environmentInsert",type:"Invisible"});this.form.addField({name:"onlyChanged",label:i18n("Only Changed Versions"),value:"true",type:"Checkbox"});this.form.addField({name:"_processInsert",
type:"Invisible"});this.form.addField({name:"_snapshotInsert",type:"Invisible"});this.form.addField({name:"_versionInsert",type:"Invisible"});this.form.addField({name:"_propertiesInsert",type:"Invisible"});this.form.addField({name:"_scheduleInsert",type:"Invisible"});this.forceSchedule?a.showScheduleOptions():(this.scheduleCheckbox=new j({onChange:function(b){b?a.showScheduleOptions():(a.form.removeField("date"),a.form.removeField("time"),a.form.removeField("recurring"),a.form.hasField("recurrencePattern")&&
a.form.removeField("recurrencePattern"),a.isSchedule=!1)}}),this.form.addField({name:"scheduleCheckbox",label:i18n("Schedule Deployment?"),widget:this.scheduleCheckbox},"_scheduleInsert"));this.form.addField({name:"description",label:i18n("Description"),type:"Text"});this.form.addField({name:"_warningInsert",type:"Invisible"});this.application?a.selectApplication(this.application):this.form.addField({name:"applicationId",label:i18n("Application"),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+
"deploy/application",onChange:function(b,c){(a.application=c)&&a.selectApplication(c)}},"_applicationInsert");this.form.placeAt(this.formAttach)},selectApplication:function(){var a=this;this.form.submitUrl=bootstrap.restUrl+"deploy/application/"+this.application.id+"/runProcess";if(a.form.hasField("environmentId"))a.environment=void 0,a.form.removeField("environmentId");if(a.form.hasField("applicationProcessId"))a.clearProcessProperties(),a.hideVersionFields(),a.applicationProcess=void 0,a.form.removeField("applicationProcessId");
if(a.form.hasField("snapshotId"))a.snapshot=void 0,a.form.removeField("snapshotId");a.form.hasField("_snapshotLabel")&&a.form.removeField("_snapshotLabel");this.environment?a.selectEnvironment(this.environment):this.form.addField({name:"environmentId",url:bootstrap.restUrl+"deploy/environment",label:i18n("Environment"),required:!0,type:"TableFilterSelect",allowNone:!1,defaultQuery:{filterFields:["application.id","active"],"filterType_application.id":"eq","filterValue_application.id":a.application.id,
filterType_active:"eq",filterValue_active:!0,filterClass_active:"Boolean"},onChange:function(b,c){a.hideVersionFields();(a.environment=c)&&a.selectEnvironment(c);!a.snapshot&&a.applicationProcess&&a.environment&&!a.environment.requireSnapshot&&a.showVersionFields()}},"_environmentInsert");a.showSnapshot()},showSnapshot:function(){var a=this;!this.snapshot&&!this.form.hasField("_snapshotLabel")&&(this.form.addField({name:"_snapshotLabel",label:"",type:"Label",value:i18n("Select a snapshot, or choose versions for individual components."),
style:{fontWeight:"bold",marginTop:"10px",marginBottom:"4px"}},"_snapshotInsert"),this.form.addField({name:"snapshotId",label:i18n("Snapshot"),type:"TableFilterSelect",url:bootstrap.restUrl+"deploy/application/"+this.application.id+"/snapshots/false",onChange:function(b,c){a.snapshot=c;a.clearProcessProperties();a.showProcessProperties();c?a.hideVersionFields():a.showVersionFields()}},"_snapshotInsert"))},hideSnapshot:function(){this.form.hasField("_snapshotLabel")&&this.form.removeField("_snapshotLabel");
this.form.hasField("snapshotId")&&this.form.removeField("snapshotId")},selectEnvironment:function(d){var o=this;this.form.hasField("_allowDraftsWarning")&&this.form.removeField("_allowDraftsWarning");d.allowDrafts&&(d=new s,b.create("div",{innerHTML:i18n("WARNING: This environment is configured to use draft processes for some or all components."),style:{fontWeight:"bold"}},d.domAttach),this.form.addField({name:"_allowDraftsWarning",label:"",widget:d},"_applicationInsert"));this.form.hasField("_propertiesWarning")&&
this.form.removeField("_propertiesWarning");d=bootstrap.restUrl+"deploy/environment/"+this.environment.id+"/validateProperties";o.snapshot&&(d+="/"+o.snapshot.id);this.environment&&(this.form.hasField("applicationProcessId")&&this.form.removeField("applicationProcessId"),o.addApplicationProcessField(),o.blockIncrement(),c.get({url:d,handleAs:"json",load:function(c){var d=!1;e.forEach(c.environmentData,function(a){0<a.missingEnvironmentProperties.length&&(d=!0)});e.forEach(c.resourceData,function(a){0<
a.missingResourceProperties.length&&(d=!0)});if(d){var n=new s;b.create("div",{innerHTML:i18n("WARNING: Not all required properties have values."),style:{fontWeight:"bold"}},n.domAttach);var q=b.create("a",{"class":"linkPointer",innerHTML:i18n("View missing properties...")},n.domAttach);f(q,"click",function(){o.showMissingProperties(c)});a.set(n.domAttach,{marginBottom:"5px"});o.form.addField({name:"_propertiesWarning",label:"",widget:n},"_warningInsert")}},handle:function(){o.blockDecrement()}}))},
getProcesses:function(a){var b=new n;c.get({url:a,handleAs:"json",load:function(a){b.resolve(a)},error:function(a){b.reject(a)}});return b},addApplicationProcessField:function(){var a=this;this.getProcesses(bootstrap.restUrl+"deploy/application/"+this.application.id+"/"+this.environment.id+"/executableProcesses").then(function(b){var f={name:"applicationProcessId",label:i18n("Process"),required:!0,type:"TableFilterSelect",data:b,onChange:function(b,f){a.clearProcessProperties();a.hideVersionFields();
a.loadedProcessData[f.id]?(a.applicationProcess=a.loadedProcessData[f.id],a.showProcessProperties(),!a.snapshot&&a.environment&&!a.environment.requireSnapshot&&a.showVersionFields()):(a.blockIncrement(),c.get({url:bootstrap.restUrl+"deploy/applicationProcess/"+f.id+"/"+f.version,handleAs:"json",load:function(b){a.loadedProcessData[f.id]=b;a.applicationProcess=b;a.showProcessProperties();!a.snapshot&&a.environment&&!a.environment.requireSnapshot&&a.showVersionFields()},error:function(a){new t({messages:[i18n("Error loading process details:"),
"",util.escape(a.responseText)]})},handle:function(){a.blockDecrement()}}))}};if(b&&d.isArray(b)&&1===b.length&&b[0].id)f.value=b[0].id;a.form.addField(f,"_processInsert")},function(a){new t({messages:[i18n("Error retrieving processes:"),"",util.escape(a.responseText)]})})},clearProcessProperties:function(){var a=this;e.forEach(a.unfilledProperties,function(b){a.form.removeField("p_"+b.name)});a.hidePatternPropertiesFields()},hideVersionFields:function(){if(this.showingVersions)this.showingVersions=
!1,this.form.hasField("_versionsLabel")&&this.form.removeField("_versionsLabel"),this.form.hasField("_versionsLabel2")&&this.form.removeField("_versionsLabel2"),this.form.hasField("versions")&&(this.versionSelector.destroy(),this.form.removeField("versions"))},showProcessProperties:function(){var a=this;if(void 0!==this.applicationProcess)if("patternApplicationProcess"===this.applicationProcess.metadataType)a.showPatternProperties();else{var b=bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcess.id+
"/unfilledProperties/",b=a.snapshot?b+("snapshot/"+a.snapshot.id):b+this.application.id;a.blockIncrement();c.get({url:b,handleAs:"json",load:function(b){a.unfilledProperties=b;e.forEach(b,function(b){var c="",f="p_"+b.name;""===b.label||""!==b.name&&b.name.substring(b.name.lastIndexOf("/")+1)===b.label?c=b.name:(b.namePrefix&&0<b.namePrefix.length&&(c=b.namePrefix+"/"),c+=b.label);var o=d.clone(b);!o.value&&o.type&&"SELECT"===o.type&&o.allowedValues&&d.isArray(o.allowedValues)&&o.allowedValues.splice(0,
0,{label:i18n("-- Make Selection --"),value:" "});o.name=f;o.label=c.replace(/\//g," / ");o.description=b.description?b.description.escape():b.description;a.form.addField(o,"_propertiesInsert")})},handle:function(){a.blockDecrement()}})}},showPatternProperties:function(){if(!this.showingPatternProcessProperties&&(this.showingPatternProcessProperties=!0,void 0!==this.applicationProcess))this.form.addField({label:"",name:"_patternPropertiesLabel",value:i18n("Blueprint Properties"),type:"Label",style:{marginTop:"10px",
marginBottom:"3px",fontWeight:"bold"}},"_propertiesInsert"),this.patternPropertySelector=new w({applicationProcess:this.applicationProcess,environment:this.environment}),this.form.addField({name:"patternProperties",label:i18n("Properties"),required:!0,widget:this.patternPropertySelector},"_propertiesInsert"),this.form.addField({label:"",name:"_propertiesLabel2",value:"",type:"Label",style:{marginTop:"7px"}},"_propertiesInsert")},hidePatternPropertiesFields:function(){if(this.showingPatternProcessProperties)this.showingPatternProcessProperties=
!1,this.form.hasField("_patternPropertiesLabel")&&this.form.removeField("_patternPropertiesLabel"),this.form.hasField("_propertiesLabel2")&&this.form.removeField("_propertiesLabel2"),this.form.hasField("patternProperties")&&(this.patternPropertySelector.destroy(),this.form.removeField("patternProperties"))},showVersionFields:function(){var a=this;if(!this.showingVersions)this.showingVersions=!0,void 0!==this.applicationProcess&&(a.blockIncrement(),c.get({url:bootstrap.restUrl+"deploy/applicationProcess/"+
a.applicationProcess.id+"/componentsTakingVersions/"+a.application.id,handleAs:"json",load:function(b){if(0<b.length)a.form.addField({label:"",name:"_versionsLabel",value:i18n("Component Versions"),type:"Label",style:{marginTop:"10px",marginBottom:"3px",fontWeight:"bold"}},"_versionInsert"),a.versionSelector=new u({applicationProcess:a.applicationProcess,environment:a.environment}),a.form.addField({name:"versions",label:i18n("Versions"),widget:a.versionSelector},"_versionInsert"),a.form.addField({label:"",
name:"_versionsLabel2",value:"",type:"Label",style:{marginTop:"7px"}},"_versionInsert")},error:function(a){new t({messages:[i18n("Error loading process details:"),"",util.escape(a.responseText)]})},handle:function(){a.blockDecrement()}}))},showScheduleOptions:function(){var a=this;a.form.addField({name:"date",label:i18n("Date"),required:!0,type:"Date",value:a.date||new Date},"_scheduleInsert");a.form.addField({name:"time",label:i18n("Time"),required:!0,type:"Time",value:a.time||new Date},"_scheduleInsert");
a.form.addField({name:"recurring",label:i18n("Make Recurring"),type:"Checkbox",onChange:function(b){b?a.form.addField({name:"recurrencePattern",label:i18n("Pattern"),type:"Select",allowedValues:[{value:"M",label:i18n("Monthly")},{value:"W",label:i18n("Weekly")},{value:"D",label:i18n("Daily")}],required:!0},"_scheduleInsert"):a.form.removeField("recurrencePattern")}},"_scheduleInsert");a.isSchedule=!0},showMissingProperties:function(a){var c=new o({title:i18n("Missing Properties"),closable:!0,draggable:!0}),
f=b.create("div",{style:{width:"350px"}},c.containerNode);e.forEach(a.environmentData,function(a){if(0<a.missingEnvironmentProperties.length){var c=b.create("div",{style:{marginBottom:"8px"}},f);b.create("div",{innerHTML:i18n("Missing environment properties for %s:",a.name.escape()),style:{fontWeight:"bold"}},c);e.forEach(a.missingEnvironmentProperties,function(a){b.create("div",{innerHTML:a.escape(),style:{paddingLeft:"60px"}},c)})}});e.forEach(a.resourceData,function(a){if(0<a.missingResourceProperties.length){var c=
b.create("div",{style:{marginBottom:"8px"}},f);b.create("div",{innerHTML:i18n("Missing role properties for resource %s:",a.name.escape()),style:{fontWeight:"bold"}},c);e.forEach(a.missingResourceProperties,function(a){b.create("div",{innerHTML:a.escape(),style:{paddingLeft:"60px"}},c)})}});b.create("div",{innerHTML:i18n("Until these properties have values, the deployment may fail or produce unexpected results."),style:{marginBottom:"5px",fontWeight:"bold"}},f);(new k({label:i18n("Close"),showTitle:!1,
onClick:function(){c.hide();c.destroy()}})).placeAt(f);c.show()},destroy:function(){this.versionSelector&&this.versionSelector.destroy();this.inherited(arguments)}})})},"dijit/_TemplatedMixin":function(){define("dojo/_base/lang,dojo/touch,./_WidgetBase,dojo/string,dojo/cache,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/sniff,dojo/_base/unload".split(","),function(l,m,k,j,e,h,d,c,b,a){var f=d("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:!1,_earlyTemplatedStartup:!1,
constructor:function(){this._attachPoints=[];this._attachEvents=[]},_stringRepl:function(a){var b=this.declaredClass,c=this;return j.substitute(a,this,function(a,f){"!"==f.charAt(0)&&(a=l.getObject(f.substr(1),!1,c));if("undefined"==typeof a)throw Error(b+" template:"+f);return null==a?"":"!"==f.charAt(0)?a:a.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this.templateString)this.templateString=e(this.templatePath,{sanitize:!0});var a=f.getCachedTemplate(this.templateString,
this._skipNodeCache,this.ownerDocument),b;if(l.isString(a)){if(b=c.toDom(this._stringRepl(a),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+a);}else b=a.cloneNode(!0);this.domNode=b;this.inherited(arguments);this._attachTemplateNodes(b,function(a,b){return a.getAttribute(b)});this._beforeFillContent();this._fillContent(this.srcNodeRef)},_beforeFillContent:function(){},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)},
_attachTemplateNodes:function(a,b){for(var c=l.isArray(a)?a:a.all||a.getElementsByTagName("*"),f=l.isArray(a)?0:-1;0>f||c[f];f++){var d=-1==f?a:c[f];if(!this.widgetsInTemplate||!b(d,"dojoType")&&!b(d,"data-dojo-type")){var e=b(d,"dojoAttachPoint")||b(d,"data-dojo-attach-point");if(e)for(var h=e.split(/\s*,\s*/);e=h.shift();)l.isArray(this[e])?this[e].push(d):this[e]=d,this._attachPoints.push(e);if(e=b(d,"dojoAttachEvent")||b(d,"data-dojo-attach-event"))for(var h=e.split(/\s*,\s*/),j=l.trim;e=h.shift();)if(e){var v=
null;-1!=e.indexOf(":")?(v=e.split(":"),e=j(v[0]),v=j(v[1])):e=j(e);v||(v=e);this._attachEvents.push(this.connect(d,m[e]||e,v))}}}},destroyRendering:function(){h.forEach(this._attachPoints,function(a){delete this[a]},this);this._attachPoints=[];h.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments)}});f._templateCache={};f.getCachedTemplate=function(a,b,d){var e=f._templateCache,o=a,s=e[o];if(s){try{if(!s.ownerDocument||s.ownerDocument==(d||document))return s}catch(h){}c.destroy(s)}a=
j.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return e[o]=a;b=c.toDom(a,d);if(1!=b.nodeType)throw Error("Invalid template: "+a);return e[o]=b};b("ie")&&a.addOnWindowUnload(function(){var a=f._templateCache,b;for(b in a){var d=a[b];"object"==typeof d&&c.destroy(d);delete a[b]}});l.extend(k,{dojoAttachEvent:"",dojoAttachPoint:""});return f})},"dojo/touch":function(){define("./_base/kernel,./aspect,./dom,./on,./has,./mouse,./domReady,./_base/window".split(","),function(l,m,k,j,e,h,d,c){function b(b,c){return a?
function(a,f){var d=j(a,c,f),e=j(a,b,function(a){(!n||(new Date).getTime()>n+1E3)&&f.call(this,a)});return{remove:function(){d.remove();e.remove()}}}:function(a,c){return j(a,b,c)}}var a=e("touch"),f=!1;e("ios")&&(m=navigator.userAgent.match(/OS ([\d_]+)/)?RegExp.$1:"1",f=5>parseFloat(m.replace(/_/,".").replace(/_/g,"")));var n,r,t;a&&(d(function(){t=c.body();c.doc.addEventListener("touchstart",function(a){n=(new Date).getTime();var b=t;t=a.target;j.emit(b,"dojotouchout",{target:b,relatedTarget:t,
bubbles:!0});j.emit(t,"dojotouchover",{target:t,relatedTarget:b,bubbles:!0})},!0);j(c.doc,"touchmove",function(a){n=(new Date).getTime();if((a=c.doc.elementFromPoint(a.pageX-(f?0:c.global.pageXOffset),a.pageY-(f?0:c.global.pageYOffset)))&&t!==a)j.emit(t,"dojotouchout",{target:t,relatedTarget:a,bubbles:!0}),j.emit(a,"dojotouchover",{target:a,relatedTarget:t,bubbles:!0}),t=a})}),r=function(a,b){return j(c.doc,"touchmove",function(f){if(a===c.doc||k.isDescendant(t,a))f.target=t,b.call(this,f)})});h=
{press:b("mousedown","touchstart"),move:b("mousemove",r),release:b("mouseup","touchend"),cancel:b(h.leave,"touchcancel"),over:b("mouseover","dojotouchover"),out:b("mouseout","dojotouchout"),enter:h._eventHandler(b("mouseover","dojotouchover")),leave:h._eventHandler(b("mouseout","dojotouchout"))};return l.touch=h})},"dojo/domReady":function(){define(["./has"],function(l){function m(a){d?a(j):c.push(a)}var k=this,j=document,e={loaded:1,complete:1},h="string"!=typeof j.readyState,d=!!e[j.readyState];
if(h)j.readyState="loading";if(!d){var c=[],b=[],a=function(a){a=a||k.event;if(!(d||"readystatechange"==a.type&&!e[j.readyState])){d=1;if(h)j.readyState="complete";for(;c.length;)c.shift()(j)}},f=function(b,f){b.addEventListener(f,a,!1);c.push(function(){b.removeEventListener(f,a,!1)})};if(!l("dom-addeventlistener")){var f=function(b,f){f="on"+f;b.attachEvent(f,a);c.push(function(){b.detachEvent(f,a)})},n=j.createElement("div");try{n.doScroll&&null===k.frameElement&&b.push(function(){try{return n.doScroll("left"),
1}catch(a){}})}catch(r){}}f(j,"DOMContentLoaded");f(k,"load");"onreadystatechange"in j?f(j,"readystatechange"):h||b.push(function(){return e[j.readyState]});if(b.length){var t=function(){if(!d){for(var c=b.length;c--;)if(b[c]()){a("poller");return}setTimeout(t,30)}};t()}}m.load=function(a,b,c){m(c)};return m})},"dijit/_WidgetBase":function(){define("require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y){function C(a){return function(b){c[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}r.add("dijit-legacy-requires",!t.isAsync);r("dijit-legacy-requires")&&s(0,function(){l(["dijit/_base/manager"])});var B={};return h("dijit._WidgetBase",[u,x],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:C("lang"),dir:"",_setDirAttr:C("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,
domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:j.blankGif||l.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=d.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,q.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=y.getUniqueId(this.declaredClass.replace(/\./g,
"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:v.doc);this.ownerDocumentBody=v.body(this.ownerDocument);y.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var f=this.srcNodeRef;f&&f.parentNode&&this.domNode!==f&&(f.parentNode.replaceChild(this.domNode,f),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=
this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],c;for(c in this.attributeMap)b.push(c);var a=a.prototype,f;for(f in a)f in this.attributeMap||"_set"+f.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(f)}var d={},o;for(o in this.params||{})d[o]=this[o];m.forEach(b,function(a){a in d||this[a]&&this.set(a,this[a])},this);for(o in d)this.set(o,d[o])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=
this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(m.map(a,function(a){return a+"Rtl"})));b.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,m.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&q.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},
destroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.uninitialize();m.forEach(this._connects,q.hitch(this,"disconnect"));m.forEach(this._supportingWidgets,b);this.domNode&&m.forEach(y.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);y.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?c.remove(this.domNode,
"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){m.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;q.isObject(a)?n.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,f,d){d=3<=arguments.length?d:this.attributeMap[a];
m.forEach(q.isArray(d)?d:[d],function(d){var o=this[d.node||d||"domNode"];switch(d.type||"attribute"){case "attribute":q.isFunction(f)&&(f=q.hitch(this,f));d=d.attribute?d.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;o.tagName?c.set(o,d,f):o.set(d,f);break;case "innerText":o.innerHTML="";o.appendChild(this.ownerDocument.createTextNode(f));break;case "innerHTML":o.innerHTML=f;break;case "class":b.replace(o,f,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?
this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);var f=this[c.s];if(q.isFunction(f))var d=f.apply(this,Array.prototype.slice.call(arguments,1));else{var f=this.focusNode&&!q.isFunction(this.focusNode)?"focusNode":"domNode",o=this[f].tagName,e;if(!(e=B[o])){e=this[f];var n={},s;for(s in e)n[s.toLowerCase()]=!0;e=B[o]=n}s=a in this.attributeMap?this.attributeMap[a]:c.s in this?this[c.s]:c.l in e&&"function"!=typeof b||
/^aria-|^data-|^role$/.test(a)?f:null;null!=s&&this._attrToDom(a,b,s);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+c+"Attr",g:"_get"+c+"Attr",l:c.toLowerCase()}},_set:function(a,b){var c=this[a];this[a]=b;this._created&&b!==c&&(this._watchCallbacks&&this._watchCallbacks(a,c,b),this.emit("attrmodified-"+
a,{detail:{prevValue:c,newValue:b}}))},emit:function(a,b,c){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail={};b.detail.widget=this;var f,d=this["on"+a];d&&(f=d.apply(this,c?c:[b]));this._started&&!this._beingDestroyed&&o.emit(this.domNode,a.toLowerCase(),b);return f},on:function(a,b){var c=this._onMap(a);return c?k.after(this,c,b,!0):this.own(o(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,c=b._onMap;if(!c){var c=b._onMap=
{},f;for(f in b.prototype)/^on/.test(f)&&(c[f.replace(/^on/,"").toLowerCase()]=f)}return c["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?y.findWidgets(this.containerNode):[]},getParent:function(){return y.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,c){return this.own(e.connect(a,b,this,c))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(w.subscribe(a,
q.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:f.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=n.get(this.domNode,"display")},placeAt:function(b,c){var f=!b.tagName&&y.byId(b);f&&f.addChild&&(!c||"number"===typeof c)?f.addChild(this,c):(f=f?f.containerNode&&!/after|before|replace/.test(c||"")?f.containerNode:f.domNode:d.byId(b,this.ownerDocument),a.place(this.domNode,f,c),!this._started&&(this.getParent()||
{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var c=setTimeout(q.hitch(this,function(){c=null;this._destroyed||q.hitch(this,a)()}),b||0);return{remove:function(){c&&(clearTimeout(c),c=null);return null}}}})})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(l,m,k,j,e){var h=0,d,c=[],b=0,a=function(){if(h&&!b&&c.length){b=1;var f=c.shift();try{f()}finally{b=0}b=0;c.length&&
d(a)}};k.on&&k.on("idle",a);d=function(){(k.idle?k.idle():1)&&a()};var m=l.ready=l.addOnLoad=function(a,b,f){var q=e._toArray(arguments);"number"!=typeof a?(f=b,b=a,a=1E3):q.shift();f=f?e.hitch.apply(l,q):function(){b()};f.priority=a;for(q=0;q<c.length&&a>=c[q].priority;q++);c.splice(q,0,f);d()},f=l.config.addOnLoad;if(f)m[e.isArray(f)?"apply":"call"](l,f);l.config.parseOnLoad&&!l.isAsync&&m(99,function(){l.parser||(l.deprecated("Add explicit require(['dojo/parser']);","","2.0"),k(["dojo/parser"]))});
j(function(){h=1;l._postLoad=l.config.afterOnLoad=!0;c.length&&d(a)});return m})},"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","./when"],function(l,m,k,j){return l("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var h=this._attrPairNames;return h[e]?h[e]:h[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,h){return"function"===typeof this[h.g]?this[h.g]():this[e]},get:function(e){return this._get(e,
this._getAttrNames(e))},set:function(e,h){if("object"===typeof e){for(var d in e)e.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,e[d]);return this}d=this._getAttrNames(e);var c=this._get(e,d);d=this[d.s];var b;"function"===typeof d?b=d.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=h;if(this._watchCallbacks){var a=this;j(b,function(){a._watchCallbacks(e,c,h)})}return this},_changeAttrValue:function(e,h){var d=this.get(e);this[e]=h;this._watchCallbacks&&this._watchCallbacks(e,d,
h);return this},watch:function(e,h){var d=this._watchCallbacks;if(!d)var c=this,d=this._watchCallbacks=function(a,b,e,h){var q=function(d){if(d)for(var d=d.slice(),s=0,q=d.length;s<q;s++)d[s].call(c,a,b,e)};q(d["_"+a]);h||q(d["*"])};!h&&"function"===typeof e?(h=e,e="*"):e="_"+e;var b=d[e];"object"!==typeof b&&(b=d[e]=[]);b.push(h);var a={};a.unwatch=a.remove=function(){var a=k.indexOf(b,h);-1<a&&b.splice(a,1)};return a}})})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect",
"dojo/_base/declare"],function(l,m,k){return k("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){l.forEach(arguments,function(j){var e="destroyRecursive"in j?"destroyRecursive":"destroy"in j?"destroy":"remove",h=m.before(this,"destroy",function(c){j[e](c)}),d=m.after(j,e,function(){h.remove();d.remove()},!0)},this);return arguments}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(l,m,
k,j,e){var h={},d={},c={length:0,add:function(b){if(d[b.id])throw Error("Tried to register widget with id=="+b.id+" but that id is already registered");d[b.id]=b;this.length++},remove:function(b){d[b]&&(delete d[b],this.length--)},byId:function(b){return"string"==typeof b?d[b]:b},byNode:function(b){return d[b.getAttribute("widgetId")]},toArray:function(){var b=[],a;for(a in d)b.push(d[a]);return b},getUniqueId:function(b){var a;do a=b+"_"+(b in h?++h[b]:h[b]=0);while(d[a]);return"dijit"==e._scopeName?
a:e._scopeName+"_"+a},findWidgets:function(b,a){function c(b){for(b=b.firstChild;b;b=b.nextSibling)if(1==b.nodeType){var h=b.getAttribute("widgetId");h?(h=d[h])&&e.push(h):b!==a&&c(b)}}var e=[];c(b);return e},_destroyAll:function(){e._curFocus=null;e._prevFocus=null;e._activeStack=[];l.forEach(c.findWidgets(j.body()),function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive():b.destroy&&b.destroy())})},getEnclosingWidget:function(b){for(;b;){var a=1==b.nodeType&&b.getAttribute("widgetId");
if(a)return d[a];b=b.parentNode}return null},_hash:d};return e.registry=c})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(l,m,k){var j=window,e={addOnWindowUnload:function(e,d){if(!l.windowUnloaded)k(j,"unload",l.windowUnloaded=function(){});k(j,"unload",m.hitch(e,d))},addOnUnload:function(e,d){k(j,"beforeunload",m.hitch(e,d))}};l.addOnWindowUnload=e.addOnWindowUnload;l.addOnUnload=e.addOnUnload;return e})},"dijit/main":function(){define(["dojo/_base/kernel"],function(l){return l.dijit})},
"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(l,m){var k={};m.setObject("dojo.string",k);k.rep=function(j,e){if(0>=e||!j)return"";for(var h=[];;){e&1&&h.push(j);if(!(e>>=1))break;j+=j}return h.join("")};k.pad=function(j,e,h,d){h||(h="0");j=""+j;e=k.rep(h,Math.ceil((e-j.length)/h.length));return d?j+e:e+j};k.substitute=function(j,e,h,d){d=d||l.global;h=h?m.hitch(d,h):function(c){return c};return j.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(c,b,a){c=m.getObject(b,
!1,e);a&&(c=m.getObject(a,!1,d).call(d,c,b));return h(c,b).toString()})};k.trim=String.prototype.trim?m.trim:function(j){for(var j=j.replace(/^\s+/,""),e=j.length-1;0<=e;e--)if(/\S/.test(j.charAt(e))){j=j.substring(0,e+1);break}return j};return k})},"dojo/cache":function(){define("dojo/cache",["./_base/kernel","./text"],function(l){return l.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./_base/xhr"],function(l,m,k,j){var e;e=function(a,b,c){j("GET",{url:a,sync:!!b,load:c,
headers:l.config.textPluginHeaders||{}})};var h={},d=function(a){if(a){var a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,""),b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},c={},b={};l.cache=function(a,b,c){var r;"string"==typeof a?/\//.test(a)?(r=a,c=b):r=m.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(r=a+"",c=b);a=void 0!=c&&"string"!=typeof c?c.value:c;c=c&&c.sanitize;if("string"==typeof a)return h[r]=a,c?d(a):a;if(null===a)return delete h[r],
null;r in h||e(r,!0,function(a){h[r]=a});return c?d(h[r]):h[r]};return{dynamic:!0,normalize:function(a,b){var c=a.split("!"),d=c[0];return(/^\./.test(d)?b(d):d)+(c[1]?"!"+c[1]:"")},load:function(a,f,n){var a=a.split("!"),r=1<a.length,t=a[0],q=f.toUrl(a[0]),a="url:"+q,o=c,s=function(a){n(r?d(a):a)};t in h?o=h[t]:a in f.cache?o=f.cache[a]:q in h&&(o=h[q]);if(o===c)if(b[q])b[q].push(s);else{var j=b[q]=[s];e(q,!f.async,function(a){h[t]=h[q]=a;for(var c=0;c<j.length;)j[c++](a);delete b[q]})}else s(o)}}})},
"dijit/_Widget":function(){define("dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/ready,./registry,./_WidgetBase,./_OnDijitClickMixin,./_FocusMixin,dojo/uacss,./hccss".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){function t(){}function q(a){return function(b,c,f,e){return b&&"string"==typeof c&&b[c]==t?b.on(c.substring(2).toLowerCase(),d.hitch(f,e)):a.apply(k,arguments)}}l.around(k,"connect",q);h.connect&&l.around(h,
"connect",q);l=j("dijit._Widget",[f,n,r],{onClick:t,onDblClick:t,onKeyDown:t,onKeyPress:t,onKeyUp:t,onMouseDown:t,onMouseMove:t,onMouseOut:t,onMouseOver:t,onMouseLeave:t,onMouseEnter:t,onMouseUp:t,constructor:function(a){this._toConnect={};for(var b in a)this[b]===t&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===
t?k.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){h.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,b){if(m.isDebug){var c=arguments.callee._ach||(arguments.callee._ach={}),f=(arguments.callee.caller||"unknown caller").toString();c[f]||(h.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+
f,"","2.0"),c[f]=!0)}return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){h.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?c("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});e("dijit-legacy-requires")&&b(0,function(){require(["dijit/_base"])});return l})},
"dojo/query":function(){define("./_base/kernel,./has,./dom,./on,./_base/array,./_base/lang,./selector/_loader,./selector/_loader!default".split(","),function(l,m,k,j,e,h,d,c){function b(a,b){var c=function(c,f){if("string"==typeof f&&(f=k.byId(f),!f))return new b([]);var d="string"==typeof c?a(c,f):c?c.orphan?c:[c]:[];return d.orphan?d:new b(d)};c.matches=a.match||function(a,b,f){return 0<c.filter([a],b,f).length};c.filter=a.filter||function(a,b,f){return c(b,f).filter(function(b){return-1<e.indexOf(a,
b)})};if("function"!=typeof a)var f=a.search,a=function(a,b){return f(b||document,a)};return c}m.add("array-extensible",function(){return 1==h.delegate([],{length:1}).length&&!m("bug-for-in-skips-shadowed")});var a=Array.prototype,f=a.slice,n=a.concat,r=e.forEach,t=function(a,b,c){b=[0].concat(f.call(b,0));c=c||l.global;return function(f){b[0]=f;return a.apply(c,b)}},q=function(a){var b=this instanceof o&&m("array-extensible");"number"==typeof a&&(a=Array(a));var c=a&&"length"in a?a:arguments;if(b||
!c.sort){for(var f=b?this:[],d=f.length=c.length,e=0;e<d;e++)f[e]=c[e];if(b)return f;c=f}h._mixin(c,s);c._NodeListCtor=function(a){return o(a)};return c},o=q,s=o.prototype=m("array-extensible")?[]:{};o._wrap=s._wrap=function(a,b,c){a=new (c||this._NodeListCtor||o)(a);return b?a._stash(b):a};o._adaptAsMap=function(a,b){return function(){return this.map(t(a,arguments,b))}};o._adaptAsForEach=function(a,b){return function(){this.forEach(t(a,arguments,b));return this}};o._adaptAsFilter=function(a,b){return function(){return this.filter(t(a,
arguments,b))}};o._adaptWithCondition=function(a,b,c){return function(){var f=arguments,d=t(a,f,c);if(b.call(c||l.global,f))return this.map(d);this.forEach(d);return this}};r(["slice","splice"],function(b){var c=a[b];s[b]=function(){return this._wrap(c.apply(this,arguments),"slice"==b?this:null)}});r(["indexOf","lastIndexOf","every","some"],function(a){var b=e[a];s[a]=function(){return b.apply(l,[this].concat(f.call(arguments,0)))}});h.extend(q,{constructor:o,_NodeListCtor:o,toString:function(){return this.join(",")},
_stash:function(a){this._parent=a;return this},on:function(a,b){var c=this.map(function(c){return j(c,a,b)});c.remove=function(){for(var a=0;a<c.length;a++)c[a].remove()};return c},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(a){var b=f.call(this,0),c=e.map(arguments,function(a){return f.call(a,0)});return this._wrap(n.apply(b,c),this)},map:function(a,b){return this._wrap(e.map(this,a,b),this)},forEach:function(a,b){r(this,a,b);return this},filter:function(a){var b=
arguments,c=this,f=0;if("string"==typeof a){c=u._filterResult(this,b[0]);if(1==b.length)return c._stash(this);f=1}return this._wrap(e.filter(c,b[f],b[f+1]),this)},instantiate:function(a,b){var c=h.isFunction(a)?a:h.getObject(a),b=b||{};return this.forEach(function(a){new c(b,a)})},at:function(){var a=new this._NodeListCtor(0);r(arguments,function(b){0>b&&(b=this.length+b);this[b]&&a.push(this[b])},this);return a._stash(this)}});var u=b(c,q);l.query=b(c,function(a){return q(a)});u.load=function(a,
c,f){d.load(a,c,function(a){f(b(a,q))})};l._filterQueryResult=u._filterResult=function(a,b,c){return new q(u.filter(a,b,c))};l.NodeList=u.NodeList=q;return u})},"dijit/_OnDijitClickMixin":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window,./a11yclick".split(","),function(l,m,k,j,e,h,d,c){l=j("dijit._OnDijitClickMixin",null,{connect:function(b,a,f){return this.inherited(arguments,[b,"ondijitclick"==a?c:a,f])}});l.a11yclick=c;return l})},
"dijit/a11yclick":function(){define("dojo/on,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/has,dojo/_base/unload,dojo/_base/window".split(","),function(l,m,k,j,e,h,d){function c(a){return(a.keyCode===k.ENTER||a.keyCode===k.SPACE)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey&&!a.metaKey}var b=null;e("dom-addeventlistener")?d.doc.addEventListener("keydown",function(a){b=a.target},!0):function(){var a=function(a){b=a.srcElement};d.doc.attachEvent("onkeydown",a);h.addOnWindowUnload(function(){d.doc.detachEvent("onkeydown",
a)})}();return function(a,f){if(/input|button/i.test(a.nodeName))return l(a,"click",f);var d=[l(a,"keydown",function(a){if(c(a))b=a.target,a.preventDefault()}),l(a,"keyup",function(a){c(a)&&a.target==b&&(b=null,l.emit(a.target,"click",{cancelable:!0,bubbles:!0}))}),l(a,"click",function(a){f.call(this,a)})];if(e("touch")){var h;d.push(l(a,"touchend",function(a){var b=a.target;h=setTimeout(function(){h=null;l.emit(b,"click",{cancelable:!0,bubbles:!0})},600)}),l(a,"click",function(){h&&clearTimeout(h)}))}return{remove:function(){m.forEach(d,
function(a){a.remove()});h&&(clearTimeout(h),h=null)}}}})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(l,m,k,j){j.extend(m,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return k("dijit._FocusMixin",null,{_focusManager:l})})},"dijit/focus":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/Evented,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/Stateful,dojo/_base/unload,dojo/_base/window,dojo/window,./a11y,./registry,./main".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){var u=new (m([f,h],{curNode:null,activeStack:[],constructor:function(){var a=d.hitch(this,function(a){k.isDescendant(this.curNode,a)&&this.set("curNode",null);k.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});l.before(e,"empty",a);l.before(e,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(b,c){var f=this,d=function(b){f._justMouseDowned=!0;setTimeout(function(){f._justMouseDowned=!1},0);
if(!a("ie")||!b||!(b.srcElement&&null==b.srcElement.parentNode))f._onTouchNode(c||b.target||b.srcElement,"mouse")},o=a("ie")?b.document.documentElement:b.document;if(o){if(a("ie")){b.document.body.attachEvent("onmousedown",d);var e=function(a){var b=a.srcElement.tagName.toLowerCase();"#document"==b||"body"==b||(q.isTabNavigable(a.srcElement)?f._onFocusNode(c||a.srcElement):f._onTouchNode(c||a.srcElement))};o.attachEvent("onfocusin",e);var n=function(a){f._onBlurNode(c||a.srcElement)};o.attachEvent("onfocusout",
n);return{remove:function(){b.document.detachEvent("onmousedown",d);o.detachEvent("onfocusin",e);o.detachEvent("onfocusout",n);o=null}}}o.body.addEventListener("mousedown",d,!0);o.body.addEventListener("touchstart",d,!0);var s=function(a){f._onFocusNode(c||a.target)};o.addEventListener("focus",s,!0);var h=function(a){f._onBlurNode(c||a.target)};o.addEventListener("blur",h,!0);return{remove:function(){o.body.removeEventListener("mousedown",d,!0);o.body.removeEventListener("touchstart",d,!0);o.removeEventListener("focus",
s,!0);o.removeEventListener("blur",h,!0);o=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer);this._clearFocusTimer=setTimeout(d.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0);if(!this._justMouseDowned)this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(d.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)},_onTouchNode:function(a,
b){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var c=[];try{for(;a;){var f=j.get(a,"dijitPopupParent");if(f)a=o.byId(f).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===r.body())break;a=t.get(a.ownerDocument).frameElement}else{var d=a.getAttribute&&a.getAttribute("widgetId"),e=d&&o.byId(d);e&&!("mouse"==b&&e.get("disabled"))&&c.unshift(d);a=a.parentNode}}}catch(n){}this._setStack(c,b)},_onFocusNode:function(a){a&&
9!=a.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,b){var c=this.activeStack;this.set("activeStack",a);for(var f=0;f<Math.min(c.length,a.length)&&!(c[f]!=a[f]);f++);for(var d,e=c.length-1;e>=f;e--)if(d=o.byId(c[e]))d._hasBeenBlurred=!0,d.set("focused",!1),d._focusManager==this&&d._onBlur(b),this.emit("widget-blur",d,b);for(e=
f;e<a.length;e++)if(d=o.byId(a[e]))d.set("focused",!0),d._focusManager==this&&d._onFocus(b),this.emit("widget-focus",d,b)},focus:function(a){if(a)try{a.focus()}catch(b){}}}));b(function(){var b=u.registerWin(t.get(r.doc));a("ie")&&n.addOnWindowUnload(function(){b&&(b.remove(),b=null)})});s.focus=function(a){u.focus(a)};for(var w in u)/^_/.test(w)||(s.focus[w]="function"==typeof u[w]?d.hitch(u,w):u[w]);u.watch(function(a,b,c){s.focus[a]=c});return u})},"dojo/window":function(){define("./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style,./dom-construct".split(","),
function(l,m,k,j,e,h,d){m.add("rtl-adjust-position-for-verticalScrollBar",function(b,a){var c=k.body(a),n=d.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},c,"last"),h=d.create("div",{style:{overflow:"hidden",direction:"ltr"}},n,"last"),t=0!=e.position(h).x;n.removeChild(h);c.removeChild(n);return t});m.add("position-fixed-support",function(b,a){var c=k.body(a),n=d.create("span",{style:{visibility:"hidden",
position:"fixed",left:"1px",top:"1px"}},c,"last"),h=d.create("span",{style:{position:"fixed",left:"0",top:"0"}},n,"last"),t=e.position(h).x!=e.position(n).x;n.removeChild(h);c.removeChild(n);return t});var c={getBox:function(b){var b=b||k.doc,a="BackCompat"==b.compatMode?k.body(b):b.documentElement,f=e.docScroll(b);if(m("touch"))var d=c.get(b),b=d.innerWidth||a.clientWidth,a=d.innerHeight||a.clientHeight;else b=a.clientWidth,a=a.clientHeight;return{l:f.x,t:f.y,w:b,h:a}},get:function(b){if(m("ie")&&
c!==document.parentWindow){b.parentWindow.execScript("document._parentWindow = window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(b,a){try{var b=j.byId(b),c=b.ownerDocument||k.doc,d=k.body(c),r=c.documentElement||d.parentNode,t=m("ie"),q=m("webkit");if(!(b==d||b==r))if(!m("mozilla")&&!t&&!q&&!m("opera")&&"scrollIntoView"in b)b.scrollIntoView(!1);else{var o="BackCompat"==c.compatMode,s=Math.min(d.clientWidth||r.clientWidth,
r.clientWidth||d.clientWidth),u=Math.min(d.clientHeight||r.clientHeight,r.clientHeight||d.clientHeight),c=q||o?d:r,w=a||e.position(b),v=b.parentNode,q=function(a){return 6>=t||7==t&&o?!1:m("position-fixed-support")&&"fixed"==h.get(a,"position").toLowerCase()};if(!q(b))for(;v;){v==d&&(v=c);var x=e.position(v),y=q(v),l="rtl"==h.getComputedStyle(v).direction.toLowerCase();if(v==c){x.w=s;x.h=u;c==r&&t&&l&&(x.x+=c.offsetWidth-x.w);if(0>x.x||!t||9<=t)x.x=0;if(0>x.y||!t||9<=t)x.y=0}else{var B=e.getPadBorderExtents(v);
x.w-=B.w;x.h-=B.h;x.x+=B.l;x.y+=B.t;var A=v.clientWidth,z=x.w-A;if(0<A&&0<z)l&&m("rtl-adjust-position-for-verticalScrollBar")&&(x.x+=z),x.w=A;A=v.clientHeight;z=x.h-A;if(0<A&&0<z)x.h=A}if(y){if(0>x.y)x.h+=x.y,x.y=0;if(0>x.x)x.w+=x.x,x.x=0;if(x.y+x.h>u)x.h=u-x.y;if(x.x+x.w>s)x.w=s-x.x}var E=w.x-x.x,D=w.y-x.y,G=E+w.w-x.w,K=D+w.h-x.h,N,L;if(0<G*E&&(v.scrollLeft||v==c||v.scrollWidth>v.offsetHeight)){N=Math[0>E?"max":"min"](E,G);if(l&&(8==t&&!o||9<=t))N=-N;L=v.scrollLeft;v.scrollLeft+=N;N=v.scrollLeft-
L;w.x-=N}if(0<K*D&&(v.scrollTop||v==c||v.scrollHeight>v.offsetHeight))N=Math.ceil(Math[0>D?"max":"min"](D,K)),L=v.scrollTop,v.scrollTop+=N,N=v.scrollTop-L,w.y-=N;v=v!=c&&!y&&v.parentNode}}}catch(I){console.error("scrollIntoView: "+I),b.scrollIntoView(!1)}}};l.setObject("dojo.window",c);return c})},"dijit/a11y":function(){define("dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(l,m,k,j,e,h,d,c){var b=c._isElementShown=
function(a){var b=h.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=e.get(a,"type")};c.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return e.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var c=a.contentDocument;if("designMode"in c&&"on"==c.designMode)return!0;b=c.body}catch(d){try{b=a.contentWindow.document.body}catch(h){return!1}}return b&&("true"==
b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var a=c.isTabNavigable=function(a){return e.get(a,"disabled")?!1:e.has(a,"tabIndex")?0<=e.get(a,"tabIndex"):c.hasDefaultTabStop(a)};c._getTabNavigable=function(c){function n(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var h,t,q,o,s,j,k={},v=function(c){for(c=c.firstChild;c;c=c.nextSibling)if(!(1!=c.nodeType||9>=d("ie")&&
"HTML"!==c.scopeName||!b(c))){if(a(c)){var f=+e.get(c,"tabIndex");if(!e.has(c,"tabIndex")||0==f)h||(h=c),t=c;else if(0<f){if(!q||f<o)o=f,q=c;if(!s||f>=j)j=f,s=c}f=n(c);e.get(c,"checked")&&f&&(k[f]=c)}"SELECT"!=c.nodeName.toUpperCase()&&v(c)}};b(c)&&v(c);return{first:k[n(h)]||h,last:k[n(t)]||t,lowest:k[n(q)]||q,highest:k[n(s)]||s}};c.getFirstInTabbingOrder=function(a,b){var d=c._getTabNavigable(j.byId(a,b));return d.lowest?d.lowest:d.first};c.getLastInTabbingOrder=function(a,b){var d=c._getTabNavigable(j.byId(a,
b));return d.last?d.last:d.highest};return{hasDefaultTabStop:c.hasDefaultTabStop,isTabNavigable:c.isTabNavigable,_getTabNavigable:c._getTabNavigable,getFirstInTabbingOrder:c.getFirstInTabbingOrder,getLastInTabbingOrder:c.getLastInTabbingOrder}})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./sniff","./_base/window"],function(l,m,k,j,e){var h=e.doc.documentElement,e=j("ie"),d=j("opera"),c=Math.floor,b=j("ff"),a=l.boxModel.replace(/-/,""),d={dj_quirks:j("quirks"),dj_opera:d,
dj_khtml:j("khtml"),dj_webkit:j("webkit"),dj_safari:j("safari"),dj_chrome:j("chrome"),dj_gecko:j("mozilla")};if(e)d.dj_ie=!0,d["dj_ie"+c(e)]=!0,d.dj_iequirks=j("quirks");b&&(d["dj_ff"+c(b)]=!0);d["dj_"+a]=!0;var f="",n;for(n in d)d[n]&&(f+=n+" ");h.className=m.trim(h.className+" "+f);k(90,function(){if(!l.isBodyLtr()){var a="dj_rtl dijitRtl "+f.replace(/ /g,"-rtl ");h.className=m.trim(h.className+" "+a+"dj_rtl dijitRtl "+f.replace(/ /g,"-rtl "))}});return j})},"dijit/hccss":function(){define(["dojo/dom-class",
"dojo/hccss","dojo/ready","dojo/_base/window"],function(l,m,k,j){k(90,function(){m("highcontrast")&&l.add(j.body(),"dijit_a11y")});return m})},"dojo/hccss":function(){define("require,./_base/config,./dom-class,./dom-style,./has,./ready,./_base/window".split(","),function(l,m,k,j,e,h,d){e.add("highcontrast",function(){var c=d.doc.createElement("div");c.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(m.blankGif||l.toUrl("./resources/blank.gif"))+
");";d.body().appendChild(c);var b=j.getComputedStyle(c),a=b.backgroundImage,b=b.borderTopColor==b.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);8>=e("ie")?c.outerHTML="":d.body().removeChild(c);return b});h(90,function(){e("highcontrast")&&k.add(d.body(),"dj_a11y")});return e})},"dijit/form/Button":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/ready,./_FormWidget,./_ButtonMixin,dojo/text!./templates/Button.html".split(","),
function(l,m,k,j,e,h,d,c,b,a){j("dijit-legacy-requires")&&d(0,function(){l(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])});return m("dijit.form.Button",[c,b],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_onClick:function(a){var b=this.inherited(arguments);b&&this.valueNode&&(this.valueNode.click(),a.preventDefault(),a.stopPropagation());return b},_fillContent:function(a){if(a&&
(!this.params||!("label"in this.params)))if(a=h.trim(a.innerHTML))this.label=a},_setShowLabelAttr:function(a){this.containerNode&&k.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){e.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},_setLabelAttr:function(a){this.inherited(arguments);if(!this.showLabel&&!("title"in this.params))this.titleNode.title=h.trim(this.containerNode.innerText||
this.containerNode.textContent||"")}})})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare,dojo/has,dojo/_base/kernel,dojo/ready,../_Widget,../_CssStateMixin,../_TemplatedMixin,./_FormWidgetMixin".split(","),function(l,m,k,j,e,h,d,c){m("dijit-legacy-requires")&&j(0,function(){require(["dijit/form/_FormValueWidget"])});return l("dijit.form._FormWidget",[e,d,h,c],{setDisabled:function(b){k.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",
b)},setValue:function(b){k.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){k.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name?'name="'+this.name.replace(/"/g,"&quot;")+'"':"";this.inherited(arguments)},_setTypeAttr:null})})},"dijit/_CssStateMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/on,dojo/ready,dojo/_base/window,./registry".split(","),
function(l,m,k,j,e,h,d,c,b,a){m=m("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);l.forEach("disabled,readOnly,checked,selected,focused,state,hovering,active,_opened".split(","),function(a){this.watch(a,h.hitch(this,"_setStateClass"))},this);for(var a in this.cssStateNodes)this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":this._set("hovering",
!0);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":this._set("active",!0);break;case "mouseup":case "touchend":this._set("active",!1)}},_setStateClass:function(){function a(c){b=b.concat(l.map(b,function(a){return a+c}),"dijit"+c)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var c="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(c);this.state&&a(this.state);
this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var c=this.stateNode||this.domNode,d={};l.forEach(c.className.split(" "),function(a){d[a]=!0});"_stateClasses"in this&&l.forEach(this._stateClasses,function(a){delete d[a]});l.forEach(b,function(a){d[a]=!0});var e=[],o;for(o in d)e.push(o);c.className=e.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,
b,c){function d(c){j.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":j.toggle(a,b+"Hover",!0);break;case "mouseout":j.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":d(!0);break;case "mouseup":case "touchend":d(!1);break;case "focus":case "focusin":j.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":j.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});c(function(){function c(b){if(!k.isDescendant(b.relatedTarget,
b.target))for(var f=b.target;f&&f!=b.relatedTarget;f=f.parentNode)if(f._cssState){var d=a.getEnclosingWidget(f);d&&(f==d.domNode?d._cssMouseEvent(b):d._subnodeCssMouseEvent(f,f._cssState,b))}}function n(a){a.target=a.srcElement;c(a)}var h=b.body(),t=(e("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);l.forEach(t,function(a){h.addEventListener?h.addEventListener(a,c,!0):h.attachEvent("on"+a,n)});d(h,"focusin, focusout",function(b){var c=b.target;c._cssState&&
!c.getAttribute("widgetId")&&a.getEnclosingWidget(c)._subnodeCssMouseEvent(c,c._cssState,b)})});return m})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(l,m,k,j,e,h,d,c,b){return m("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,
scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(a){this._set("disabled",a);k.set(this.focusNode,"disabled",a);this.valueNode&&k.set(this.valueNode,"disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");a?(this._set("hovering",!1),this._set("active",!1),a="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",l.forEach(e.isArray(a)?a:[a],function(a){a=this[a];d("webkit")||b.hasDefaultTabStop(a)?a.setAttribute("tabIndex",
"-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(d);this.disconnect(b)}),d=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(d);this.disconnect(b);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){c.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&
this.focusNode&&"none"!=j.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||
0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=a,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));
this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(l,m,k,j){return l("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled)return k.stop(e),!1;var h=!1===this.onClick(e);if(!h&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var d=this.domNode;d.parentNode;d=d.parentNode){var c=j.byNode(d);if(c&&"function"==typeof c._onSubmit){c._onSubmit(e);h=
!0;break}}h&&e.preventDefault();return!h},postCreate:function(){this.inherited(arguments);m.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e);(this.containerNode||this.focusNode).innerHTML=e}})})},"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n\t><span class="dijitReset dijitInline dijitButtonNode"\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" role="presentation"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode,focusNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n\t\t\t><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tid="${id}_label"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n\t\ttabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',
"dijit/form/CheckBox":function(){define("require,dojo/_base/declare,dojo/dom-attr,dojo/has,dojo/query,dojo/ready,./ToggleButton,./_CheckBoxMixin,dojo/text!./templates/CheckBox.html,dojo/NodeList-dom".split(","),function(l,m,k,j,e,h,d,c,b){j("dijit-legacy-requires")&&h(0,function(){l(["dijit/form/RadioButton"])});return m("dijit.form.CheckBox",[d,c],{templateString:b,baseClass:"dijitCheckBox",_setValueAttr:function(a,b){"string"==typeof a&&(this.inherited(arguments),a=!0);this._created&&this.set("checked",
a,b)},_getValueAttr:function(){return this.checked?this.value:!1},_setIconClassAttr:null,postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting=""},_fillContent:function(){},_onFocus:function(){this.id&&e("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&e("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.inherited(arguments)}})})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare",
"dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(l,m,k,j){return l("dijit.form.ToggleButton",[k,j],{baseClass:"dijitToggleButton",setChecked:function(e){m.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.","","2.0");this.set("checked",e)}})})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(l,m){return l("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(k){var j=
this.checked;this._set("checked",!j);var e=this.inherited(arguments);this.set("checked",e?this.checked:j);return e},_setCheckedAttr:function(k,j){this._set("checked",k);var e=this.focusNode||this.domNode;this._created&&m.get(e,"checked")!=!!k&&m.set(e,"checked",!!k);e.setAttribute(this._aria_attr,""+k);this._handleOnChange(k,j)},postCreate:function(){this.inherited(arguments);var k=this.focusNode||this.domNode;this.checked&&k.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=
!1;this.set("checked",this.params.checked||!1)}})})},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/_base/event"],function(l,m,k){return l("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:!1,_aria_attr:"aria-checked",_setReadOnlyAttr:function(j){this._set("readOnly",j);m.set(this.focusNode,"readOnly",j)},_setLabelAttr:void 0,_getSubmitValue:function(j){return null==j||""===j?"on":j},_setValueAttr:function(j){j=this._getSubmitValue(j);
this._set("value",j);m.set(this.focusNode,"value",j)},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));m.set(this.focusNode,"value",this.value)},_onClick:function(j){return this.readOnly?(k.stop(j),!1):this.inherited(arguments)}})})},"url:dijit/form/templates/CheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><input\n\t \t${!nameAttrSetting} type="${type}" role="${type}" aria-checked="false" ${checkedAttrSetting}\n\t\tclass="dijitReset dijitCheckBoxInput"\n\t\tdata-dojo-attach-point="focusNode"\n\t \tdata-dojo-attach-event="onclick:_onClick"\n/></div>\n',
"dojo/NodeList-dom":function(){define("dojo/NodeList-dom","./_base/kernel,./query,./_base/array,./_base/lang,./dom-class,./dom-construct,./dom-geometry,./dom-attr,./dom-style".split(","),function(l,m,k,j,e,h,d,c,b){function a(a){return function(b,c,f){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,f)}}var f=function(a){return 1==a.length&&"string"==typeof a[0]},n=function(a){var b=a.parentNode;b&&b.removeChild(a)},r=m.NodeList,t=r._adaptWithCondition,q=r._adaptAsForEach,
o=r._adaptAsMap;j.extend(r,{_normalize:function(a,b){var c=!0===a.parse;if("string"==typeof a.template)var f=a.templateFunc||l.string&&l.string.substitute,a=f?f(a.template,a):a;f=typeof a;"string"==f||"number"==f?(a=h.toDom(a,b&&b.ownerDocument),a=11==a.nodeType?j._toArray(a.childNodes):[a]):j.isArrayLike(a)?j.isArray(a)||(a=j._toArray(a)):a=[a];if(c)a._runParse=!0;return a},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(a,b,c,f){if(!(1!=b.nodeType&&"only"==c))for(var d,o=a.length,
e=o-1;0<=e;e--){var n=f?this._cloneNode(a[e]):a[e];if(a._runParse&&l.parser&&l.parser.parse){d||(d=b.ownerDocument.createElement("div"));d.appendChild(n);l.parser.parse(d);for(n=d.firstChild;d.firstChild;)d.removeChild(d.firstChild)}e==o-1?h.place(n,b,c):b.parentNode.insertBefore(n,b);b=n}},position:o(d.position),attr:t(a(c),f),style:t(a(b),f),addClass:q(e.add),removeClass:q(e.remove),toggleClass:q(e.toggle),replaceClass:q(e.replace),empty:q(h.empty),removeAttr:q(c.remove),marginBox:o(d.getMarginBox),
place:function(a,b){var c=m(a)[0];return this.forEach(function(a){h.place(a,c,b)})},orphan:function(a){return(a?m._filterResult(this,a):this).forEach(n)},adopt:function(a,b){return m(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;var b=new r;this.map(function(c){m(a,c).forEach(function(a){void 0!==a&&b.push(a)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,f=0;if("string"==typeof a){c=m._filterResult(this,b[0]);if(1==b.length)return c._stash(this);f=1}return this._wrap(k.filter(c,
b[f],b[f+1]),this)},addContent:function(a,b){for(var a=this._normalize(a,this[0]),c=0,f;f=this[c];c++)this._place(a,f,b,0<c);return this}});return r})},"js/util/blocker/_IncrementBlockerMixin":function(){define("dojo/_base/declare,dojo/dom-style,dojo/_base/fx,dojo/_base/lang,dojo/dom-construct,js/util/blocker/_BlockerMixin".split(","),function(l,m,k,j,e,h){return l([h],{constructor:function(){this.blockCounter=0},blockIncrement:function(){0===this.blockCounter&&this.block();this.blockCounter+=1},
blockDecrement:function(){this.blockCounter-=1;if(0>this.blockCounter)this.blockCounter=0;0===this.blockCounter&&this.unblock()}})})},"dojo/_base/fx":function(){define("./kernel,./config,./lang,../Evented,./Color,./connect,./sniff,../dom,../dom-style".split(","),function(l,m,k,j,e,h,d,c,b){var a=k.mixin,f={},n=f._Line=function(a,b){this.start=a;this.end=b};n.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};var r=f.Animation=function(b){a(this,b);if(k.isArray(this.curve))this.curve=
new n(this.curve[0],this.curve[1])};r.prototype=new j;k.extend(r,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,b=this.easing;return b?b(a):a},_fire:function(a,b){var c=b||[];if(this[a])if(m.debugAtAllCosts)this[a].apply(this,c);else try{this[a].apply(this,c)}catch(f){console.error("exception in animation handler for:",a),console.error(f)}return this},play:function(a,b){this._delayTimer&&this._clearTimer();if(b)this._stopTimer(),this._active=
this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var c=a||this.delay,f=k.hitch(this,"_play",b);if(0<c)return this._delayTimer=setTimeout(f,c),this;f();return this},_play:function(){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;var a=this.curve.getValue(this._getStep());if(!this._percent){if(!this._startRepeatCount)this._startRepeatCount=
this.repeat;this._fire("onBegin",[a])}this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,b){this._stopTimer();this._active=this._paused=!0;this._percent=a;b&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();if(a)this._percent=
1;this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);if(1>this._percent)this._startTimer();else{this._active=!1;if(0<this.repeat)this.repeat--,
this.play(null,!0);else if(-1==this.repeat)this.play(null,!0);else if(this._startRepeatCount)this.repeat=this._startRepeatCount,this._startRepeatCount=0;this._percent=0;this._fire("onEnd",[this.node]);!this.repeat&&this._stopTimer()}}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var t=0,q=null,o={run:function(){}};k.extend(r,{_startTimer:function(){if(!this._timer)this._timer=h.connect(o,"run",this,"_cycle"),t++;q||(q=setInterval(k.hitch(o,"run"),this.rate))},
_stopTimer:function(){if(this._timer)h.disconnect(this._timer),this._timer=null,t--;0>=t&&(clearInterval(q),q=null,t=0)}});var s=d("ie")?function(a){var c=a.style;if(!c.width.length&&"auto"==b.get(a,"width"))c.width="auto"}:function(){};f._fade=function(d){d.node=c.byId(d.node);var o=a({properties:{}},d),d=o.properties.opacity={};d.start=!("start"in o)?function(){return+b.get(o.node,"opacity")||0}:o.start;d.end=o.end;d=f.animateProperty(o);h.connect(d,"beforeBegin",k.partial(s,o.node));return d};
f.fadeIn=function(b){return f._fade(a({end:1},b))};f.fadeOut=function(b){return f._fade(a({end:0},b))};f._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var u=function(a){this._properties=a;for(var b in a){var c=a[b];if(c.start instanceof e)c.tempColor=new e}};u.prototype.getValue=function(a){var b={},c;for(c in this._properties){var f=this._properties[c],d=f.start;d instanceof e?b[c]=e.blendColors(d,f.end,a,f.tempColor).toCss():k.isArray(d)||(b[c]=(f.end-d)*a+d+("opacity"!=c?f.units||
"px":0))}return b};f.animateProperty=function(f){var d=f.node=c.byId(f.node);if(!f.easing)f.easing=l._defaultEasing;f=new r(f);h.connect(f,"beforeBegin",f,function(){var c={},f;for(f in this.properties){if("width"==f||"height"==f)this.node.display="block";var o=this.properties[f];k.isFunction(o)&&(o=o(d));o=c[f]=a({},k.isObject(o)?o:{end:o});if(k.isFunction(o.start))o.start=o.start(d);if(k.isFunction(o.end))o.end=o.end(d);var n=0<=f.toLowerCase().indexOf("color"),s=function(a,c){var f={height:a.offsetHeight,
width:a.offsetWidth}[c];if(void 0!==f)return f;f=b.get(a,c);return"opacity"==c?+f:n?f:parseFloat(f)};if("end"in o){if(!("start"in o))o.start=s(d,f)}else o.end=s(d,f);n?(o.start=new e(o.start),o.end=new e(o.end)):o.start="opacity"==f?+o.start:parseFloat(o.start)}this.curve=new u(c)});h.connect(f,"onAnimate",k.hitch(b,"set",f.node));return f};f.anim=function(a,b,c,d,o,e){return f.animateProperty({node:a,duration:c||r.prototype.duration,properties:b,easing:d,onEnd:o}).play(e||0)};a(l,f);l._Animation=
r;return f})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(l,m,k,j){var e=l.Color=function(e){e&&this.setColor(e)};e.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:j.transparentColor||[0,0,0,0]};m.extend(e,{r:255,
g:255,b:255,a:1,_set:function(e,d,c,b){this.r=e;this.g=d;this.b=c;this.a=b},setColor:function(h){m.isString(h)?e.fromString(h,this):m.isArray(h)?e.fromArray(h,this):(this._set(h.r,h.g,h.b,h.a),h instanceof e||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+k.map(["r","g","b"],function(e){e=this[e].toString(16);return 2>e.length?"0"+e:e},this).join("")},toCss:function(e){var d=
this.r+", "+this.g+", "+this.b;return(e?"rgba("+d+", "+this.a:"rgb("+d)+")"},toString:function(){return this.toCss(!0)}});e.blendColors=l.blendColors=function(h,d,c,b){var a=b||new e;k.forEach(["r","g","b","a"],function(b){a[b]=h[b]+(d[b]-h[b])*c;"a"!=b&&(a[b]=Math.round(a[b]))});return a.sanitize()};e.fromRgb=l.colorFromRgb=function(h,d){var c=h.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return c&&e.fromArray(c[1].split(/\s*,\s*/),d)};e.fromHex=l.colorFromHex=function(h,d){var c=d||new e,b=4==
h.length?4:8,a=(1<<b)-1,h=Number("0x"+h.substr(1));if(isNaN(h))return null;k.forEach(["b","g","r"],function(f){var d=h&a;h>>=b;c[f]=4==b?17*d:d});c.a=1;return c};e.fromArray=l.colorFromArray=function(h,d){var c=d||new e;c._set(Number(h[0]),Number(h[1]),Number(h[2]),Number(h[3]));if(isNaN(c.a))c.a=1;return c.sanitize()};e.fromString=l.colorFromString=function(h,d){var c=e.named[h];return c&&e.fromArray(c,d)||e.fromRgb(h,d)||e.fromHex(h,d)};return e})},"js/util/blocker/_BlockerMixin":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/fx,dojo/_base/lang,dojo/dom-construct".split(","),
function(l,m,k,j,e,h,d){return l(null,{_changeListener:null,_observer:null,initBlocker:function(){var c=this;c.fixDomPositionStyle();if(!c.blockerElement)c.blockerElement=d.create("div",{"class":"_blocker_mask"},c.domNode,"first"),window.hasOwnProperty("MutationObserver")?c._observer=new MutationObserver(function(b){b.forEach(function(){c._updateBlocker()})}):c._changeListener=h.hitch(c,c._updateBlocker)},fixDomPositionStyle:function(){var c=this,b=j.get(c.domNode,"position");if(b)window.clearInterval(c.blockerTimer),
c.blockerTimer=null,"static"===b&&j.set(c.domNode,"position","relative");else if(!c.blockerTimer)c.blockerTimer=window.setInterval(function(){c.fixDomPositionStyle()},50)},block:function(){this.initBlocker();this._observer?this._observer.observe(this.domNode,{childList:!0,subtree:!0}):this.domNode.addEventListener("DOMSubtreeModified",this._changeListener);j.set(this.blockerElement,"display","block");this._updateBlocker();e.fadeIn({node:this.blockerElement,duration:400,end:0.6}).play()},unblock:function(){var c=
this;c.blockerElement&&!c._beingDestroyed&&e.fadeOut({node:c.blockerElement,duration:400,onEnd:h.hitch(c,function(){j.set(c.blockerElement,"display","none");c._observer&&c._observer.disconnect();c._changeListener&&c.domNode.removeEventListener("DOMSubtreeModified",c._changeListener)})}).play()},isBlocked:function(){var c=!1;this.blockerElement&&"block"===j.get(this.blockerElement,"display")&&(c=!0);return c},_updateBlocker:function(){var c=k.position(this.domNode);m.toggle(this.blockerElement,"_blocker_mask_small",
150>c.w||150>c.h);m.toggle(this.blockerElement,"_blocker_mask_tall",300<c.h)},destroy:function(){if(this.blockerTimer)window.clearInterval(this.blockerTimer),this.blockerTimer=null;this.blockerElement&&d.destroy(this.blockerElement);if(this._observer)this._observer.disconnect(),this._observer=null;this._changeListener&&this.domNode&&this.domNode.removeEventListener("DOMSubtreeModified",this._changeListener);this.inherited(arguments)}})})},"js/webext/widgets/Alert":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dijit/_WidgetBase,js/webext/widgets/Dialog,dijit/form/Button".split(","),
function(l,m,k,j,e,h){return m([j],{messages:null,postCreate:function(){this.inherited(arguments);var d=this;if(d.message&&null===d.messages)d.messages=[d.message];var c=new e({title:this.title||i18n("Alert"),closable:!0,draggable:!1,extraClasses:["ucd-generic-confirm-alert"]});c.domNode.style.maxWidth="500px";this.messageDom?c.containerNode.appendChild(this.messageDom):l.forEach(d.messages,function(a){a=a||"&nbsp;";d.forceRawMessages?k.deprecated("forceRawMessages is intended to support legacy code, but is discouraged, and may not be supported in the future."):
a=a.escapeHTML();var b=document.createElement("div");b.style.width="300px";b.innerHTML=a;c.containerNode.appendChild(b)});var b=document.createElement("div");b.className="underField";(new h({label:i18n("Close"),onClick:function(){c.hide();if(d.onClose)d.onClose()}})).placeAt(b);c.containerNode.appendChild(b);c.show()}})})},"js/webext/widgets/Dialog":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/aspect,dijit/Dialog,dijit/Tooltip,dojo/window,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l("js.webext.widgets.Dialog",[e],{templateString:'<div data-dojo-attach-point="mainAttach" class="dijitDialog" role="dialog" aria-labelledby="${id}_title">    <div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">    <span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"></span>    <span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1" style="display:inline;">        <span data-dojo-attach-point="closeText" class="icon-Icon_close__ui-05" title="${buttonCancel}"></span>    </span>    </div>    <div data-dojo-attach-point="containerContainer"><div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div></div></div>',
_destroying:!1,_hideDeferred:null,destroyOnHide:!1,maxRatio:0.95,postCreate:function(){var a=this;this.inherited(arguments);this.containerContainer.style.maxHeight=d.getBox().h-100+"px";this.destroyOnHide&&j.after(this,"onHide",m.hitch(this,"destroy"));if(this.description){var b=document.createElement("div");b.className="labelsAndValues-helpCell inlineBlock";new h({connectId:[b],label:this.description,showDelay:100,position:["after","above","below","before"]});this.titleBar.appendChild(b)}this.extraClasses&&
k.forEach(this.extraClasses,function(b){a.mainAttach.className=a.mainAttach.className+" "+b})},show:function(){this.domNode.draggable=!1;this.inherited(arguments);this._hideDeferred=null;var a=this,b=function(){a.open&&(a._size(),a._position())};setTimeout(function(){b()},25);setTimeout(function(){b()},50);setTimeout(function(){b()},100);setTimeout(function(){b()},200);setTimeout(function(){b()},400);setTimeout(function(){b()},800);setTimeout(function(){b()},1200)},hide:function(){var a=this._hideDeferred;
if(!a)a=this._hideDeferred=this.inherited(arguments);return a},destroy:function(){var a=this,b,c,d;if(!a._destroying){a._destroying=!0;b=a._hideDeferred;c=arguments;d=a.getInherited(arguments);b||(b=a.hide());var e=function(){d.apply(a,c);a._destroying=!1;a._hideDeferred=null};b?b.then(e):e()}},_size:function(){var a=this.containerNode.scrollTop;this.height||this.width||this.heightPercent&&this.widthPercent?this._sizeFixed():this._sizeDynamic();this.containerNode.scrollTop=a},_sizeFixed:function(){(m.isString(this.height)||
m.isString(this.width))&&a.deprecated("String values for this.height or this.width is deprecated, and may not be supported in the future. Use integer values.");this.height=parseInt(this.height,10);this.width=parseInt(this.width,10);var c=d.getBox(),e=this.height,h=this.width;this.heightPercent?e=c.h*this.heightPercent/100:0>this.height&&(e=c.h+this.height);this.widthPercent?h=c.w*this.widthPercent/100:0>this.width&&(h=c.w+this.width);c={overflow:"auto",position:"relative",maxHeight:this.containerContainer.style.maxHeight};
if(h)c.width=h+"px";if(e)c.height=e+"px";b.set(this.containerNode,c)},_sizeDynamic:function(){this._checkIfSingleChild();if(this._singleChild){if(void 0===this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else b.set(this.containerNode,{width:"auto",height:"auto"});var a=c.position(this.domNode),e=d.getBox(this.ownerDocument);e.w*=this.maxRatio;e.h*=this.maxRatio;if(a.w>=e.w||a.h>=e.h){var h=c.position(this.containerNode),
t=Math.min(a.w,e.w)-(a.w-h.w),q=Math.min(a.h,e.h)-(a.h-h.h),a=e.h-(h.y-a.y),t=Math.min(e.w,t),q=Math.min(a,q);if(this._singleChild&&this._singleChild.resize){if(void 0===this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:t,h:q})}else b.set(this.containerNode,{width:t+"px",height:q+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()}})})},"dijit/Dialog":function(){define("require,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/_base/fx,dojo/i18n,dojo/keys,dojo/_base/lang,dojo/on,dojo/ready,dojo/sniff,dojo/window,dojo/dnd/Moveable,dojo/dnd/TimedMoveable,./focus,./_base/manager,./_Widget,./_TemplatedMixin,./_CssStateMixin,./form/_FormMixin,./_DialogMixin,./DialogUnderlay,./layout/ContentPane,dojo/text!./templates/Dialog.html,./main,dojo/i18n!./nls/common".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N){var y=j("dijit._DialogBase",[B,z,E,A],{templateString:K,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],open:!1,duration:y.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},"aria-describedby":"",maxRatio:0.9,
postMixInProperties:function(){var a=n.getLocalization("dijit","common");t.mixin(this,a);this.inherited(arguments)},postCreate:function(){b.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[]},onLoad:function(){this._position();this.autofocus&&I.isTop(this)&&(this._getFocusItems(this.domNode),x.focus(this._firstFocusItem));
this.inherited(arguments)},_endDrag:function(){var a=c.position(this.domNode),b=u.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),b.h-a.h);a.x=Math.min(Math.max(a.x,0),b.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==s("ie")?v:w)(a,{handle:this.titleBar}),this.connect(this._moveable,"onMoveStop","_endDrag")):d.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":m.map(this["class"].split(/\s/),
function(a){return a+"_underlay"}).join(" "),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild();if(this._singleChild){if("undefined"!=typeof this._singleChildOriginalStyle)this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle}else b.set(this.containerNode,{width:"auto",height:"auto"});var a=c.position(this.domNode),f=u.getBox(this.ownerDocument);f.w*=this.maxRatio;f.h*=this.maxRatio;if(a.w>=f.w||a.h>=f.h){var d=c.position(this.containerNode),
o=Math.min(a.w,f.w)-(a.w-d.w),a=Math.min(a.h,f.h)-(a.h-d.h);if(this._singleChild&&this._singleChild.resize){if("undefined"==typeof this._singleChildOriginalStyle)this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:o,h:a})}else b.set(this.containerNode,{width:o+"px",height:a+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!d.contains(this.ownerDocumentBody,
"dojoMove")){var a=this.domNode,f=u.getBox(this.ownerDocument),o=this._relativePosition,e=o?null:c.position(a);b.set(a,{left:Math.floor(f.l+(o?o.x:(f.w-e.w)/2))+"px",top:Math.floor(f.t+(o?o.y:(f.h-e.h)/2))+"px"})}},_onKey:function(b){if(b.charOrCode){var c=b.target;b.charOrCode===r.TAB&&this._getFocusItems(this.domNode);var f=this._firstFocusItem==this._lastFocusItem;if(c==this._firstFocusItem&&b.shiftKey&&b.charOrCode===r.TAB)f||x.focus(this._lastFocusItem),a.stop(b);else if(c==this._lastFocusItem&&
b.charOrCode===r.TAB&&!b.shiftKey)f||x.focus(this._firstFocusItem),a.stop(b);else{for(;c;){if(c==this.domNode||d.contains(c,"dijitPopup"))if(b.charOrCode==r.ESCAPE)this.onCancel();else return;c=c.parentNode}if(b.charOrCode!==r.TAB)a.stop(b);else if(!s("opera"))try{this._firstFocusItem.focus()}catch(o){}}}},show:function(){if(!this.open){this._started||this.startup();if(!this._alreadyInitialized)this._setup(),this._alreadyInitialized=!0;this._fadeOutDeferred&&this._fadeOutDeferred.cancel();var a=u.get(this.ownerDocument);
this._modalconnects.push(q(a,"scroll",t.hitch(this,"resize")));this._modalconnects.push(q(this.domNode,k._keypress,t.hitch(this,"_onKey")));b.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this._size();this._position();var c;this._fadeInDeferred=new e(t.hitch(this,function(){c.stop();delete this._fadeInDeferred}));c=f.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:t.hitch(this,function(){I.show(this,this.underlayAttrs)}),onEnd:t.hitch(this,function(){this.autofocus&&
I.isTop(this)&&(this._getFocusItems(this.domNode),x.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return this._fadeInDeferred}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new e(t.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(t.hitch(this,"onHide"));a=f.fadeOut({node:this.domNode,duration:this.duration,onEnd:t.hitch(this,
function(){this.domNode.style.display="none";I.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();if(this._scrollConnected)this._scrollConnected=!1;for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return this._fadeOutDeferred}},resize:function(){"none"!=this.domNode.style.display&&(D._singleton&&D._singleton.layout(),s("touch")||this._position(),this._size())},destroy:function(){this._fadeInDeferred&&
this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();I.hide(this);this.inherited(arguments)}}),L=j("dijit.Dialog",[G,y],{});L._DialogBase=y;var I=L._DialogLevelManager={_beginZIndex:950,show:function(a,c){J[J.length-1].focus=x.curNode;var f=D._singleton;!f||f._destroyed?f=N._underlay=D._singleton=new D(c):f.set(a.underlayAttrs);var d=J[J.length-1].dialog?J[J.length-1].zIndex+2:
L._DialogLevelManager._beginZIndex;1==J.length&&f.show();b.set(D._singleton.domNode,"zIndex",d-1);b.set(a.domNode,"zIndex",d);J.push({dialog:a,underlayAttrs:c,zIndex:d})},hide:function(a){if(J[J.length-1].dialog==a){J.pop();var c=J[J.length-1];D._singleton._destroyed||(1==J.length?D._singleton.hide():(b.set(D._singleton.domNode,"zIndex",c.zIndex-1),D._singleton.set(c.underlayAttrs)));if(a.refocus){a=c.focus;if(c.dialog&&(!a||!h.isDescendant(a,c.dialog.domNode)))c.dialog._getFocusItems(c.dialog.domNode),
a=c.dialog._firstFocusItem;if(a)try{a.focus()}catch(f){}}}else c=m.indexOf(m.map(J,function(a){return a.dialog}),a),-1!=c&&J.splice(c,1)},isTop:function(a){return J[J.length-1].dialog==a}},J=L._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];s("dijit-legacy-requires")&&o(0,function(){l(["dijit/TooltipDialog"])});return L})},"dojo/i18n":function(){define("./_base/kernel,require,./has,./_base/array,./_base/config,./_base/lang,./_base/xhr,./json,module".split(","),function(l,m,k,j,e,h,d,c,
b){k.add("dojo-preload-i18n-Api",1);var a=l.i18n={},f=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,n=function(a,b,c,f){for(var d=[c+f],b=b.split("-"),o="",e=0;e<b.length;e++)o+=(o?"-":"")+b[e],(!a||a[o])&&d.push(c+o+"/"+f);return d},r={},t=function(a,b,c){c=c?c.toLowerCase():l.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(c)?a+"/nls/"+b:a+"/nls/"+c+"/"+b};l.getL10nName=function(a,c,f){return b.id+"!"+t(a,c,f)};var q=function(a,b,c,f,d,o){a([b],function(e){var s=h.clone(e.root),
q=n(!e._v1x&&e,d,c,f);a(q,function(){for(var a=1;a<q.length;a++)s=h.mixin(h.clone(s),arguments[a]);r[b+"/"+d]=s;o()})})},o=function(a){var b=e.extraLocale||[],b=h.isArray(b)?b:[b];b.push(a);return b},s=function(a,b,d){if(k("dojo-preload-i18n-Api")){var e=a.split("*"),s="preload"==e[1];s&&(r[a]||(r[a]=1,y(e[2],c.parse(e[3]),1,b)),d(1));if(!(e=s))v&&x.push([a,b,d]),e=v;if(e)return}var a=f.exec(a),n=a[1]+"/",t=a[5]||a[4],u=n+t,e=(a=a[5]&&a[4])||l.locale,w=u+"/"+e,a=a?[e]:o(e),B=a.length,m=function(){--B||
d(h.delegate(r[w]))};j.forEach(a,function(a){var c=u+"/"+a;k("dojo-preload-i18n-Api")&&C(c);r[c]?m():q(b,u,n,t,a,m)})};if(k("dojo-unit-tests"))var u=a.unitTests=[];k("dojo-preload-i18n-Api");var w=a.normalizeLocale=function(a){a=a?a.toLowerCase():l.locale;return"root"==a?"ROOT":a},v=0,x=[],y=a._preloadLocalizations=function(a,b,c,f){function d(a,b){f.isXdUrl(m.toUrl(a+".js"))||c?f([a],b):z([a],b,f)}function o(a,b){for(var c=a.split("-");c.length;){if(b(c.join("-")))return;c.pop()}b("ROOT")}function e(c){c=
w(c);o(c,function(c){if(0<=j.indexOf(b,c)){var f=a.replace(/\./g,"/")+"_"+c;v++;d(f,function(a){for(var b in a)r[m.toAbsMid(b)+"/"+c]=a[b];for(--v;!v&&x.length;)s.apply(null,x.shift())});return!0}return!1})}f=f||m;e();j.forEach(l.config.extraLocale,e)},C=function(){},B={},A=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},\t   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),
z=function(a,b,c){var f=[];j.forEach(a,function(a){function b(c){c=A(c,C,a,B);c===B?f.push(r[o]=B.result):(c instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+o,c),c={}),f.push(r[o]=/nls\/[^\/]+\/[^\/]+$/.test(o)?c:{root:c,_v1x:1}))}var o=c.toUrl(a+".js");if(r[o])f.push(r[o]);else{var e=c.syncLoadNls(a);if(e)f.push(e);else if(d)d.get({url:o,sync:!0,load:b,error:function(){f.push(r[o]={})}});else try{c.getText(o,!0,b)}catch(s){f.push(r[o]={})}}});b&&b.apply(null,f)},C=function(a){for(var b,
c=a.split("/"),f=l.global[c[0]],d=1;f&&d<c.length-1;f=f[c[d++]]);f&&((b=f[c[d]])||(b=f[c[d].replace(/-/g,"_")]),b&&(r[a]=b));return b};a.getLocalization=function(a,b,c){var f,a=t(a,b,c);s(a,!m.isXdUrl(m.toUrl(a+".js"))?function(a,b){z(a,b,m)}:m,function(a){f=a});return f};k("dojo-unit-tests")&&u.push(function(a){a.register("tests.i18n.unit",function(a){var b;b=A("{prop:1}",C,"nonsense",B);a.is({prop:1},b);a.is(void 0,b[1]);b=A("({prop:1})",C,"nonsense",B);a.is({prop:1},b);a.is(void 0,b[1]);b=A("{'prop-x':1}",
C,"nonsense",B);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=A("({'prop-x':1})",C,"nonsense",B);a.is({"prop-x":1},b);a.is(void 0,b[1]);b=A("define({'prop-x':1})",C,"nonsense",B);a.is(B,b);a.is({"prop-x":1},B.result);b=A("define('some/module', {'prop-x':1})",C,"nonsense",B);a.is(B,b);a.is({"prop-x":1},B.result);b=A("this is total nonsense and should throw an error",C,"nonsense",B);a.is(b instanceof Error,!0)})});return h.mixin(a,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:s,cache:r})})},
"dojo/dnd/Moveable":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../dom,../dom-class,../Evented,../on,../topic,../touch,./common,./Mover,../_base/window".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return m("dojo.dnd.Moveable",[d],{handle:"",delay:0,skip:!1,constructor:function(b,f){this.node=e.byId(b);f||(f={});this.handle=f.handle?e.byId(f.handle):null;if(!this.handle)this.handle=this.node;this.delay=0<f.delay?f.delay:0;this.skip=f.skip;this.mover=f.mover?f.mover:
n;this.events=[c(this.handle,a.press,j.hitch(this,"onMouseDown")),c(this.handle,"dragstart",j.hitch(this,"onSelectStart")),c(this.handle,"selectstart",j.hitch(this,"onSelectStart"))]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){l.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!f.isFormElement(b)){if(this.delay)this.events.push(c(this.handle,a.move,j.hitch(this,"onMouseMove")),c(this.handle,a.release,
j.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);k.stop(b)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);k.stop(a)},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();k.stop(a)},onSelectStart:function(a){(!this.skip||!f.isFormElement(a))&&k.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){b.publish("/dnd/move/start",
a);h.add(r.body(),"dojoMove");h.add(this.node,"dojoMoveItem")},onMoveStop:function(a){b.publish("/dnd/move/stop",a);h.remove(r.body(),"dojoMove");h.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../_base/connect","../_base/kernel","../_base/lang","../dom"],function(l,m,k,j){var e=k.getObject("dojo.dnd",
!0);e.getCopyKeyState=l.isCopyKey;e._uniqueId=0;e.getUniqueId=function(){var h;do h=m._scopeName+"Unique"+ ++e._uniqueId;while(j.byId(h));return h};e._empty={};e.isFormElement=function(e){e=e.target;if(3==e.nodeType)e=e.parentNode;return 0<=" button textarea input select option ".indexOf(" "+e.tagName.toLowerCase()+" ")};return e})},"dojo/dnd/Mover":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../sniff,../_base/window,../dom,../dom-geometry,../dom-style,../Evented,../on,../touch,./common,./autoscroll".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return m("dojo.dnd.Mover",[a],{constructor:function(a,b,c){this.node=d.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[f(a,n.move,j.hitch(this,"onFirstMove")),f(a,n.move,j.hitch(this,"onMouseMove")),f(a,n.release,j.hitch(this,"onMouseUp")),f(a,"dragstart",k.stop),f(a.body,"selectstart",k.stop)];t.autoScrollStart(a);if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){t.autoScroll(a);
var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);k.stop(a)},onMouseUp:function(a){(e("webkit")&&e("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();k.stop(a)},onFirstMove:function(a){var f=this.node.style,d,e=this.host;switch(f.position){case "relative":case "absolute":d=Math.round(parseFloat(f.left))||0;f=Math.round(parseFloat(f.top))||0;break;default:f.position="absolute";f=c.getMarginBox(this.node);d=h.doc.body;var n=b.getComputedStyle(d),
r=c.getMarginBox(d,n),n=c.getContentBox(d,n);d=f.l-(n.l-r.l);f=f.t-(n.t-r.t)}this.marginBox.l=d-this.marginBox.l;this.marginBox.t=f-this.marginBox.t;if(e&&e.onFirstMove)e.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){l.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang,../sniff,../_base/window,../dom-geometry,../dom-style,../window".split(","),
function(l,m,k,j,e,h){var d={};l.setObject("dojo.dnd.autoscroll",d);d.getViewport=h.getBox;d.V_TRIGGER_AUTOSCROLL=32;d.H_TRIGGER_AUTOSCROLL=32;d.V_AUTOSCROLL_VALUE=16;d.H_AUTOSCROLL_VALUE=16;var c,b=k.doc,a=Infinity,f=Infinity;d.autoScrollStart=function(d){b=d;c=h.getBox(b);d=k.body(b).parentNode;a=Math.max(d.scrollHeight-c.h,0);f=Math.max(d.scrollWidth-c.w,0)};d.autoScroll=function(e){var r=c||h.getBox(b),j=k.body(b).parentNode,q=0,o=0;e.clientX<d.H_TRIGGER_AUTOSCROLL?q=-d.H_AUTOSCROLL_VALUE:e.clientX>
r.w-d.H_TRIGGER_AUTOSCROLL&&(q=Math.min(d.H_AUTOSCROLL_VALUE,f-j.scrollLeft));e.clientY<d.V_TRIGGER_AUTOSCROLL?o=-d.V_AUTOSCROLL_VALUE:e.clientY>r.h-d.V_TRIGGER_AUTOSCROLL&&(o=Math.min(d.V_AUTOSCROLL_VALUE,a-j.scrollTop));window.scrollBy(q,o)};d._validNodes={div:1,p:1,td:1};d._validOverflow={auto:1,scroll:1};d.autoScrollNodes=function(a){for(var b,c,f,o,s,h,w=0,v=0,x=a.target;x;){if(1==x.nodeType&&x.tagName.toLowerCase()in d._validNodes){f=e.getComputedStyle(x);o=f.overflow.toLowerCase()in d._validOverflow;
s=f.overflowX.toLowerCase()in d._validOverflow;h=f.overflowY.toLowerCase()in d._validOverflow;if(o||s||h)b=j.getContentBox(x,f),c=j.position(x,!0);if(o||s){f=Math.min(d.H_TRIGGER_AUTOSCROLL,b.w/2);s=a.pageX-c.x;if(m("webkit")||m("opera"))s+=k.body().scrollLeft;w=0;0<s&&s<b.w&&(s<f?w=-f:s>b.w-f&&(w=f),x.scrollLeft+=w)}if(o||h){o=Math.min(d.V_TRIGGER_AUTOSCROLL,b.h/2);h=a.pageY-c.y;if(m("webkit")||m("opera"))h+=k.body().scrollTop;v=0;0<h&&h<b.h&&(h<o?v=-o:h>b.h-o&&(v=o),x.scrollTop+=v)}if(w||v)return}try{x=
x.parentNode}catch(y){x=null}}d.autoScroll(a)};return d})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(l,m){var k=m.prototype.onMove;return l("dojo.dnd.TimedMoveable",m,{timeout:40,constructor:function(j,e){e||(e={});if(e.timeout&&"number"==typeof e.timeout&&0<=e.timeout)this.timeout=e.timeout},onMoveStop:function(j){j._timer&&(clearTimeout(j._timer),k.call(this,j,j._leftTop));m.prototype.onMoveStop.apply(this,arguments)},onMove:function(j,e){j._leftTop=e;
if(!j._timer){var h=this;j._timer=setTimeout(function(){j._timer=null;k.call(h,j,j._leftTop)},this.timeout)}}})})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(l,m,k,j,e){var h={};l.forEach("byId,getUniqueId,findWidgets,_destroyAll,byNode,getEnclosingWidget".split(","),function(d){h[d]=j[d]});k.mixin(h,{defaultDuration:m.defaultDuration||200});k.mixin(e,h);return e})},"dijit/form/_FormMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/window".split(","),
function(l,m,k,j,e,h){return m("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(d){var c=[];l.forEach(d||this.getChildren(),function(b){"value"in b?c.push(b):c=c.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return c},reset:function(){l.forEach(this._getDescendantFormWidgets(),function(d){d.reset&&d.reset()})},validate:function(){var d=!1;return l.every(l.map(this._getDescendantFormWidgets(),function(c){c._hasBeenBlurred=!0;var b=c.disabled||!c.validate||
c.validate();!b&&!d&&(h.scrollIntoView(c.containerNode||c.domNode),c.focus(),d=!0);return b}),function(c){return c})},setValues:function(d){k.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",d)},_setValueAttr:function(d){var c={};l.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var b in c)if(c.hasOwnProperty(b)){var a=c[b],f=j.getObject(b,!1,d);void 0!==f&&(j.isArray(f)||
(f=[f]),"boolean"==typeof a[0].checked?l.forEach(a,function(a){a.set("value",-1!=l.indexOf(f,a.value))}):a[0].multiple?a[0].set("value",f):l.forEach(a,function(a,b){a.set("value",f[b])}))}},getValues:function(){k.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var d={};l.forEach(this._getDescendantFormWidgets(),function(c){var b=c.name;if(b&&!c.disabled){var a=c.get("value");"boolean"==typeof c.checked?
/Radio/.test(c.declaredClass)?!1!==a?j.setObject(b,a,d):(a=j.getObject(b,!1,d),void 0===a&&j.setObject(b,null,d)):(c=j.getObject(b,!1,d),c||(c=[],j.setObject(b,c,d)),!1!==a&&c.push(a)):(c=j.getObject(b,!1,d),"undefined"!=typeof c?j.isArray(c)?c.push(a):j.setObject(b,[c,a],d):j.setObject(b,a,d))}});return d},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var d=l.map(this._descendants,function(c){return c.get("state")||""});return 0<=l.indexOf(d,"Error")?
"Error":0<=l.indexOf(d,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(d){this._descendants=this._getDescendantFormWidgets();l.forEach(this._descendants,function(c){c._started||c.startup()});d||this._onChildChange()},_onChildChange:function(d){(!d||"state"==d||"disabled"==d)&&this._set("state",this._getState());if(!d||"value"==d||"disabled"==d||"checked"==d)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;
this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var d=this;this.own(e(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=d.domNode&&d._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(c,b,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},
"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(l,m){return l("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var k=m._getTabNavigable(this.containerNode);this._firstFocusItem=k.lowest||k.first||this.closeButtonNode||this.domNode;this._lastFocusItem=k.last||k.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/window,./_Widget,./_TemplatedMixin,./BackgroundIframe".split(","),
function(l,m,k,j,e,h){return l("dijit.DialogUnderlay",[j,e],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_setDialogIdAttr:function(d){m.set(this.node,"id",d+"_underlay");this._set("dialogId",d)},_setClassAttr:function(d){this.node.className="dijitDialogUnderlay "+d;this._set("class",d)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode)},layout:function(){var d=this.node.style,
c=this.domNode.style;c.display="none";var b=k.getBox(this.ownerDocument);c.top=b.t+"px";c.left=b.l+"px";d.width=b.w+"px";d.height=b.h+"px";c.display="block"},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new h(this.domNode)},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none"}})})},"dijit/BackgroundIframe":function(){define("require,./main,dojo/_base/config,dojo/dom-construct,dojo/dom-style,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window".split(","),
function(l,m,k,j,e,h,d,c,b){c.add("bgIframe",c("ie")||c("mozilla"));var a=new function(){var a=[];this.pop=function(){var d;a.length?(d=a.pop(),d.style.display=""):(9>c("ie")?(d="<iframe src='"+(k.dojoBlankHtmlUrl||l.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",d=b.doc.createElement(d)):(d=j.create("iframe"),d.src='javascript:""',d.className="dijitBackgroundIframe",d.setAttribute("role",
"presentation"),e.set(d,"opacity",0.1)),d.tabIndex=-1);return d};this.push=function(b){b.style.display="none";a.push(b)}};m.BackgroundIframe=function(b){if(!b.id)throw Error("no id");if(c("bgIframe")){var n=this.iframe=a.pop();b.appendChild(n);7>c("ie")||c("quirks")?(this.resize(b),this._conn=d(b,"resize",h.hitch(this,function(){this.resize(b)}))):e.set(n,{width:"100%",height:"100%"})}};h.extend(m.BackgroundIframe,{resize:function(a){this.iframe&&e.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+
"px"})},destroy:function(){if(this._conn)this._conn.remove(),this._conn=null;this.iframe&&(a.push(this.iframe),delete this.iframe)}});return m.BackgroundIframe})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel,dojo/_base/lang,../_Widget,../_Container,./_ContentPaneResizeMixin,dojo/string,dojo/html,dojo/i18n!../nls/loading,dojo/_base/array,dojo/_base/declare,dojo/_base/Deferred,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/_base/xhr,dojo/i18n,dojo/when".split(","),function(l,m,k,
j,e,h,d,c,b,a,f,n,r,t,q,o,s){return a("dijit.layout.ContentPane",[k,j,e],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:l._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,
_setTitleAttr:null,stopParser:!0,template:!1,create:function(a,b){if((!a||!a.template)&&b&&!("href"in a)&&!("content"in a)){for(var b=n.byId(b),c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=m.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=o.getLocalization("dijit","loading",this.lang);this.loadingMessage=h.substitute(this.loadingMessage,a);this.errorMessage=h.substitute(this.errorMessage,
a)},buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode;this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&b.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&m.isFunction(a.startup))a.startup(),a._started=!0},this)},_startChildren:function(){b.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&m.isFunction(a.startup))a.startup(),a._started=
!0});this._contentSetter&&b.forEach(this._contentSetter.parseResults,function(a){if(!a._started&&!a._destroyed&&m.isFunction(a.startup))a.startup(),a._started=!0},this)},setHref:function(a){l.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new f(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&
this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){l.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(a){this._set("href","");this.cancel();this.onLoadDeferred=new f(m.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(m.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},
cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new f(m.hitch(this,"cancel"));this.onLoadDeferred.then(m.hitch(this,
"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};m.isObject(this.ioArgs)&&m.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||q.get)(b),f;c.then(function(b){f=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(b){c.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();
delete a._xhrDfd;return f});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var c=this._contentSetter;b.forEach(this.getChildren(),
function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});c&&(b.forEach(c.parseResults,function(b){if(!b._destroyed)b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0}),delete c.parseResults);a||t.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){this.destroyDescendants();var c=this._contentSetter;if(!(c&&c instanceof d._ContentSetter))c=this._contentSetter=new d._ContentSetter({node:this.containerNode,
_onError:m.hitch(this,this._onError),onContentError:m.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});var f=m.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),f=c.set(m.isObject(a)&&a.domNode?
a.domNode:a,f),o=this;return s(f&&f.then?f:c.parseDeferred,function(){delete o._contentSetterParams;b||(o._started&&(o._startChildren(),o._scheduleLayout()),o._onLoadHandler(a))})},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},
"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(l,m,k){return m("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(j,e){var h=this.containerNode;if(e&&"number"==typeof e){var d=this.getChildren();if(d&&d.length>=e)h=d[e-1].domNode,e="after"}k.place(j.domNode,h,e);this._started&&!j._started&&j.startup()},removeChild:function(j){"number"==typeof j&&
(j=this.getChildren()[j]);if(j)(j=j.domNode)&&j.parentNode&&j.parentNode.removeChild(j)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(j,e){var h=this.getChildren(),d=l.indexOf(this.getChildren(),j);return h[d+e]},getIndexOfChild:function(j){return l.indexOf(this.getChildren(),j)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/query,dojo/sniff,../registry,../Viewport,./utils".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return m("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var b=this.getParent();this._childOfLayoutWidget=b&&b.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(a.on("resize",h.hitch(this,"resize")))}},_checkIfSingleChild:function(){var a=[],c=!1;d("> *",this.containerNode).some(function(f){var d=
b.byNode(f);d&&d.resize?a.push(d):f.offsetHeight&&(c=!0)});this._singleChild=1==a.length&&!c?a[0]:null;k.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(a,b){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&j.setMarginBox(this.domNode,
a);var c=this.containerNode;if(c===this.domNode){var d=b||{};h.mixin(d,a||{});if(!("h"in d)||!("w"in d))d=h.mixin(j.getMarginBox(c),d);this._contentBox=f.marginBox2contentBox(c,d)}else this._contentBox=j.getContentBox(c);this._layoutChildren()},_layoutChildren:function(){this.doLayout&&this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||j.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else l.forEach(this.getChildren(),function(a){a.resize&&
a.resize()})},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!k.contains(a,"dijitHidden")&&b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/Viewport":function(){define("dojo/Evented,dojo/on,dojo/ready,dojo/sniff,dojo/_base/window,dojo/window".split(","),
function(l,m,k,j,e,h){var d=new l;k(200,function(){var c=h.getBox();d._rlh=m(e.global,"resize",function(){var a=h.getBox();c.h==a.h&&c.w==a.w||(c=a,d.emit("resize"))});if(8==j("ie")){var b=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=b)b=screen.deviceXDPI,d.emit("resize")},500)}});return d})},"dijit/layout/utils":function(){define("dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,../main".split(","),function(l,m,k,j,e,h){function d(c,b){var a=c.resize?
c.resize(b):k.setMarginBox(c.domNode,b);a?e.mixin(c,a):(e.mixin(c,k.getMarginBox(c.domNode)),e.mixin(c,b))}h=e.getObject("layout",!0,h);h.marginBox2contentBox=function(c,b){var a=j.getComputedStyle(c),f=k.getMarginExtents(c,a),d=k.getPadBorderExtents(c,a);return{l:j.toPixelValue(c,a.paddingLeft),t:j.toPixelValue(c,a.paddingTop),w:b.w-(f.w+d.w),h:b.h-(f.h+d.h)}};h.layoutChildren=function(c,b,a,f,n){b=e.mixin({},b);m.add(c,"dijitLayoutContainer");a=l.filter(a,function(a){return"center"!=a.region&&"client"!=
a.layoutAlign}).concat(l.filter(a,function(a){return"center"==a.region||"client"==a.layoutAlign}));l.forEach(a,function(a){var c=a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var o=c.style;o.left=b.l+"px";o.top=b.t+"px";o.position="absolute";m.add(c,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));c={};f&&f==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=n);"top"==e||"bottom"==e?(c.w=b.w,d(a,c),b.h-=a.h,"top"==e?b.t+=a.h:o.top=b.t+b.h+"px"):
"left"==e||"right"==e?(c.h=b.h,d(a,c),b.w-=a.w,"left"==e?b.l+=a.w:o.left=b.l+b.w+"px"):("client"==e||"center"==e)&&d(a,b)})};return{marginBox2contentBox:h.marginBox2contentBox,layoutChildren:h.layoutChildren}})},"dojo/html":function(){define("./_base/kernel,./_base/lang,./_base/array,./_base/declare,./dom,./dom-construct,./parser".split(","),function(l,m,k,j,e,h,d){var c={};m.setObject("dojo.html",c);var b=0;c._secureForInnerHtml=function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")};c._emptyNode=h.empty;c._setNodeContent=function(a,b){h.empty(a);if(b)if("string"==typeof b&&(b=h.toDom(b,a.ownerDocument)),!b.nodeType&&m.isArrayLike(b))for(var c=b.length,d=0;d<b.length;d=c==b.length?d+1:0)h.place(b[d],a,"last");else h.place(b,a,"last");return a};c._ContentSetter=j("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:l._scopeName,startup:!0,constructor:function(a,c){m.mixin(this,a||{});c=this.node=e.byId(this.node||
c);if(!this.id)this.id=["Setter",c?c.id||c.tagName:"",b++].join("_")},set:function(a,b){if(void 0!==a)this.content=a;b&&this._mixin(b);this.onBegin();this.setContent();var c=this.onEnd();return c&&c.then?c:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=c._setNodeContent(a,this.content)}catch(b){var d=this.onContentError(b);try{a.innerHTML=d}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+
e.message,e)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(k.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);h.empty(this.node)},onBegin:function(){var a=this.content;if(m.isString(a)&&(this.cleanContent&&(a=c._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}this.empty();
this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};k.forEach(["dir","lang","textDir"],function(a){this[a]&&
(b[a]=this[a])},this);var c=this;this.parseDeferred=d.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return c.parseResults=a},function(a){c._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,d){a=this["on"+a+"Error"].call(this,b);d?console.error(d,b):a&&c._setNodeContent(this.node,a,!0)}});c.set=function(a,b,d){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
b="");return d?(new c._ContentSetter(m.mixin(d,{content:b,node:a}))).set():c._setNodeContent(a,b,!0)};return c})},"dojo/parser":function(){define("require,./_base/kernel,./_base/lang,./_base/array,./_base/config,./_base/html,./_base/window,./_base/url,./_base/json,./aspect,./date/stamp,./Deferred,./has,./query,./on,./ready".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){function s(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<w){var b=a._nameCaseMap={},f;for(f in c)"_"!==f.charAt(0)&&
(b[f.toLowerCase()]=f);b._extendCnt=w}return b}function u(a){var b=a.join();if(!v[b]){for(var c=[],f=0,d=a.length;f<d;f++){var o=a[f];c[c.length]=v[o]=v[o]||k.getObject(o)||~o.indexOf("/")&&l(o)}a=c.shift();v[b]=c.length?a.createSubclass?a.createSubclass(c):a.extend.apply(a,c):a}return v[b]}var w=0;a.after(k,"extend",function(){w++},!0);var v={},x={_clearCache:function(){w++;v={}},_functionFromScript:function(a,b){var c="",f="",d=a.getAttribute(b+"args")||a.getAttribute("args"),o=a.getAttribute("with"),
d=(d||"").split(/\s*,\s*/);o&&o.length&&j.forEach(o.split(/\s*,\s*/),function(a){c+="with("+a+"){";f+="}"});return new Function(d,c+a.innerHTML+f)},instantiate:function(a,b,c){var b=b||{},c=c||{},f=(c.scope||m._scopeName)+"Type",d="data-"+(c.scope||m._scopeName)+"-",o=d+"type",e=d+"mixins",s=[];j.forEach(a,function(a){var c=f in b?b[f]:a.getAttribute(o)||a.getAttribute(f);if(c){var d=a.getAttribute(e),c=d?[c].concat(d.split(/\s*,\s*/)):[c];s.push({node:a,types:c})}});return this._instantiate(s,b,
c)},_instantiate:function(a,b,c){a=j.map(a,function(a){var f=a.ctor||u(a.types);if(!f)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(f,a.node,b,c,a.scripts,a.inherited)},this);!b._started&&!c.noStart&&j.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a},construct:function(d,o,e,n,h,u){var y;var x=d&&d.prototype,n=n||{},v={};n.defaults&&k.mixin(v,n.defaults);u&&k.mixin(v,u);var w;r("dom-attributes-explicit")?w=o.attributes:
r("dom-attributes-specified-flag")?w=j.filter(o.attributes,function(a){return a.specified}):(u=(/^input$|^img$/i.test(o.nodeName)?o:o.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),w=j.map(u.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==o.nodeName&&"value"==a||"enctype"==b?o.getAttribute(b):o.getAttributeNode(b).value}}));var l=n.scope||m._scopeName,u="data-"+l+"-",L={};"dojo"!==l&&(L[u+"props"]=
"data-dojo-props",L[u+"type"]="data-dojo-type",L[u+"mixins"]="data-dojo-mixins",L[l+"type"]="dojoType",L[u+"id"]="data-dojo-id");for(var l=0,I,J=[],U,R;I=w[l++];){var T=I.name,W=T.toLowerCase();I=I.value;switch(L[W]||W){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":R=I;break;case "data-dojo-id":case "jsid":U=I;break;case "data-dojo-attach-point":case "dojoattachpoint":v.dojoAttachPoint=I;break;case "data-dojo-attach-event":case "dojoattachevent":v.dojoAttachEvent=
I;break;case "class":v["class"]=o.className;break;case "style":v.style=o.style&&o.style.cssText;break;default:if(T in x||(T=s(d)[W]||T),T in x)switch(typeof x[T]){case "string":v[T]=I;break;case "number":v[T]=I.length?Number(I):NaN;break;case "boolean":v[T]="false"!=I.toLowerCase();break;case "function":v[T]=""===I||-1!=I.search(/[^\w\.]+/i)?new Function(I):k.getObject(I,!1)||new Function(I);J.push(T);break;default:W=x[T],v[T]=W&&"length"in W?I?I.split(/\s*,\s*/):[]:W instanceof Date?""==I?new Date(""):
"now"==I?new Date:f.fromISOString(I):W instanceof c?m.baseUrl+I:b.fromJson(I)}else v[T]=I}}for(l=0;l<J.length;l++)w=J[l].toLowerCase(),o.removeAttribute(w),o[w]=null;if(R)try{R=b.fromJson.call(n.propsThis,"{"+R+"}"),k.mixin(v,R)}catch(Y){throw Error(Y.toString()+" in data-dojo-props='"+R+"'");}k.mixin(v,e);h||(h=d&&(d._noScript||x._noScript)?[]:t("> script[type^='dojo/']",o));e=[];n=[];R=[];J=[];if(h)for(l=0;l<h.length;l++){var Q=h[l];o.removeChild(Q);w=Q.getAttribute(u+"event")||Q.getAttribute("event");
L=Q.getAttribute(u+"prop");T=Q.getAttribute(u+"method");W=Q.getAttribute(u+"advice");I=Q.getAttribute("type");Q=this._functionFromScript(Q,u);w?"dojo/connect"==I?e.push({method:w,func:Q}):"dojo/on"==I?J.push({event:w,func:Q}):v[w]=Q:"dojo/aspect"==I?e.push({method:T,advice:W,func:Q}):"dojo/watch"==I?R.push({prop:L,func:Q}):n.push(Q)}y=(h=d.markupFactory||x.markupFactory)?h(v,o,d):new d(v,o),d=y;U&&k.setObject(U,d);for(l=0;l<e.length;l++)a[e[l].advice||"after"](d,e[l].method,k.hitch(d,e[l].func),!0);
for(l=0;l<n.length;l++)n[l].call(d);for(l=0;l<R.length;l++)d.watch(R[l].prop,R[l].func);for(l=0;l<J.length;l++)q(d,J[l].event,J[l].func);return d},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,f=c(a.parent),b={dir:b.getAttribute("dir")||f.dir,lang:b.getAttribute("lang")||f.lang,textDir:b.getAttribute(q)||f.textDir},d;for(d in b)b[d]&&(a.inherited[d]=b[d])}return a.inherited}var f=[],d=[],o={},e=(b.scope||m._scopeName)+"Type",s="data-"+(b.scope||m._scopeName)+"-",h=
s+"type",q=s+"textdir",s=s+"mixins",t=a.firstChild,x=b.inherited;if(!x){var v=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&v(a.parentNode,b)},x={dir:v(a,"dir"),lang:v(a,"lang"),textDir:v(a,q)},k;for(k in x)x[k]||delete x[k]}for(var x={inherited:x},w,T;;)if(t)if(1!=t.nodeType)t=t.nextSibling;else if(w&&"script"==t.nodeName.toLowerCase())(W=t.getAttribute("type"))&&/^dojo\/\w/i.test(W)&&w.push(t),t=t.nextSibling;else if(T)t=t.nextSibling;else{var W=t.getAttribute(h)||t.getAttribute(e);
k=t.firstChild;if(!W&&(!k||3==k.nodeType&&!k.nextSibling))t=t.nextSibling;else{T=null;if(W){var Y=t.getAttribute(s);w=Y?[W].concat(Y.split(/\s*,\s*/)):[W];try{T=u(w)}catch(Q){}T||j.forEach(w,function(a){~a.indexOf("/")&&!o[a]&&(o[a]=!0,d[d.length]=a)});Y=T&&!T.prototype._noScript?[]:null;x={types:w,ctor:T,parent:x,node:t,scripts:Y};x.inherited=c(x);f.push(x)}else x={node:t,scripts:w,parent:x};t=k;w=Y;T=T&&T.prototype.stopParser&&!b.template}}else{if(!x||!x.node)break;t=x.node.nextSibling;T=!1;x=x.parent;
w=x.scripts}var V=new n;d.length?(r("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+d.join(", ")),l(d,function(){V.resolve(j.filter(f,function(a){if(!a.ctor)try{a.ctor=u(a.types)}catch(c){}for(var f=a.parent;f&&!f.types;)f=f.parent;var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!f||f.instantiate&&f.instantiateChildren;return a.instantiate}))})):V.resolve(f);return V.promise},_require:function(a){var a=b.fromJson("{"+
a.innerHTML+"}"),c=[],f=[],d=new n,o;for(o in a)c.push(o),f.push(a[o]);l(f,function(){for(var a=0;a<c.length;a++)k.setObject(c[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a){var b=new n,c=b.promise;b.resolve(!0);var f=this;t("script[type='dojo/require']",a).forEach(function(a){c=c.then(function(){return f._require(a)});a.parentNode.removeChild(a)});return c},parse:function(a,b){var c;!b&&a&&a.rootNode?(b=a,c=b.rootNode):a&&k.isObject(a)&&!("nodeType"in a)?b=a:c=a;c=
c?h.byId(c):d.body();var b=b||{},f=b.template?{template:!0}:{},o=[],e=this,s=this._scanAmd(c,b).then(function(){return e.scan(c,b)}).then(function(a){return o=o.concat(e._instantiate(a,f,b))}).otherwise(function(a){console.error("dojo/parser::parse() error",a);throw a;});k.mixin(o,s);return o}};m.parser=x;e.parseOnLoad&&o(100,x,"parse");return x})},"dojo/_base/html":function(){define("./kernel,../dom,../dom-style,../dom-attr,../dom-prop,../dom-class,../dom-construct,../dom-geometry".split(","),function(l,
m,k,j,e,h,d,c){l.byId=m.byId;l.isDescendant=m.isDescendant;l.setSelectable=m.setSelectable;l.getAttr=j.get;l.setAttr=j.set;l.hasAttr=j.has;l.removeAttr=j.remove;l.getNodeProp=j.getNodeProp;l.attr=function(b,a,c){return 2==arguments.length?j["string"==typeof a?"get":"set"](b,a):j.set(b,a,c)};l.hasClass=h.contains;l.addClass=h.add;l.removeClass=h.remove;l.toggleClass=h.toggle;l.replaceClass=h.replace;l._toDom=l.toDom=d.toDom;l.place=d.place;l.create=d.create;l.empty=function(b){d.empty(b)};l._destroyElement=
l.destroy=function(b){d.destroy(b)};l._getPadExtents=l.getPadExtents=c.getPadExtents;l._getBorderExtents=l.getBorderExtents=c.getBorderExtents;l._getPadBorderExtents=l.getPadBorderExtents=c.getPadBorderExtents;l._getMarginExtents=l.getMarginExtents=c.getMarginExtents;l._getMarginSize=l.getMarginSize=c.getMarginSize;l._getMarginBox=l.getMarginBox=c.getMarginBox;l.setMarginBox=c.setMarginBox;l._getContentBox=l.getContentBox=c.getContentBox;l.setContentSize=c.setContentSize;l._isBodyLtr=l.isBodyLtr=
c.isBodyLtr;l._docScroll=l.docScroll=c.docScroll;l._getIeDocumentElementOffset=l.getIeDocumentElementOffset=c.getIeDocumentElementOffset;l._fixIeBiDiScrollLeft=l.fixIeBiDiScrollLeft=c.fixIeBiDiScrollLeft;l.position=c.position;l.marginBox=function(b,a){return a?c.setMarginBox(b,a):c.getMarginBox(b)};l.contentBox=function(b,a){return a?c.setContentSize(b,a):c.getContentBox(b)};l.coords=function(b,a){l.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");var b=m.byId(b),f=k.getComputedStyle(b),
f=c.getMarginBox(b,f),d=c.position(b,a);f.x=d.x;f.y=d.y;return f};l.getProp=e.get;l.setProp=e.set;l.prop=function(b,a,c){return 2==arguments.length?e["string"==typeof a?"get":"set"](b,a):e.set(b,a,c)};l.getStyle=k.get;l.setStyle=k.set;l.getComputedStyle=k.getComputedStyle;l.__toPixelValue=l.toPixelValue=k.toPixelValue;l.style=function(b,a,c){switch(arguments.length){case 1:return k.get(b);case 2:return k["string"==typeof a?"get":"set"](b,a)}return k.set(b,a,c)};return l})},"dojo/_base/url":function(){define(["./kernel"],
function(l){var m=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,k=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,j=function(){for(var e=arguments,h=[e[0]],d=1;d<e.length;d++)if(e[d]){var c=new j(e[d]+""),h=new j(h[0]+"");if(""==c.path&&!c.scheme&&!c.authority&&!c.query){if(null!=c.fragment)h.fragment=c.fragment;c=h}else if(!c.scheme&&(c.scheme=h.scheme,!c.authority&&(c.authority=h.authority,"/"!=c.path.charAt(0)))){for(var h=(h.path.substring(0,h.path.lastIndexOf("/")+
1)+c.path).split("/"),b=0;b<h.length;b++)"."==h[b]?b==h.length-1?h[b]="":(h.splice(b,1),b--):0<b&&!(1==b&&""==h[0])&&".."==h[b]&&".."!=h[b-1]&&(b==h.length-1?(h.splice(b,1),h[b-1]=""):(h.splice(b-1,2),b-=2));c.path=h.join("/")}h=[];c.scheme&&h.push(c.scheme,":");c.authority&&h.push("//",c.authority);h.push(c.path);c.query&&h.push("?",c.query);c.fragment&&h.push("#",c.fragment)}this.uri=h.join("");e=this.uri.match(m);this.scheme=e[2]||(e[1]?"":null);this.authority=e[4]||(e[3]?"":null);this.path=e[5];
this.query=e[7]||(e[6]?"":null);this.fragment=e[9]||(e[8]?"":null);if(null!=this.authority)e=this.authority.match(k),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null};j.prototype.toString=function(){return this.uri};return l._Url=j})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(l,m){var k={};l.setObject("dojo.date.stamp",k);k.fromISOString=function(j,e){if(!k._isoRegExp)k._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;
var h=k._isoRegExp.exec(j),d=null;if(h){h.shift();h[1]&&h[1]--;h[6]&&(h[6]*=1E3);e&&(e=new Date(e),m.forEach(m.map("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds".split(","),function(a){return e["get"+a]()}),function(a,b){h[b]=h[b]||a}));d=new Date(h[0]||1970,h[1]||0,h[2]||1,h[3]||0,h[4]||0,h[5]||0,h[6]||0);100>h[0]&&d.setFullYear(h[0]||1970);var c=0,b=h[7]&&h[7].charAt(0);"Z"!=b&&(c=60*(h[8]||0)+(Number(h[9])||0),"-"!=b&&(c*=-1));b&&(c-=d.getTimezoneOffset());c&&d.setTime(d.getTime()+6E4*
c)}return d};k.toISOString=function(j,e){var h=function(a){return 10>a?"0"+a:a},e=e||{},d=[],c=e.zulu?"getUTC":"get",b="";"time"!=e.selector&&(b=j[c+"FullYear"](),b=["0000".substr((b+"").length)+b,h(j[c+"Month"]()+1),h(j[c+"Date"]())].join("-"));d.push(b);if("date"!=e.selector){b=[h(j[c+"Hours"]()),h(j[c+"Minutes"]()),h(j[c+"Seconds"]())].join(":");c=j[c+"Milliseconds"]();e.milliseconds&&(b+="."+(100>c?"0":"")+h(c));if(e.zulu)b+="Z";else if("time"!=e.selector)var c=j.getTimezoneOffset(),a=Math.abs(c),
b=b+((0<c?"-":"+")+h(Math.floor(a/60))+":"+h(a%60));d.push(b)}return d.join("T")};return k})},"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n\t<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n\t\t<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n\t\t\t\trole="heading" level="1"></span>\n\t\t<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1">\n\t\t\t<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n\t\t</span>\n\t</div>\n\t<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',
"dijit/Tooltip":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/on,dojo/sniff,./_base/manager,./place,./_Widget,./_TemplatedMixin,./BackgroundIframe,dojo/text!./templates/Tooltip.html,./main".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u){var w=m("dijit._MasterTooltip",[t,q],{duration:n.defaultDuration,templateString:s,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.bgIframe=new o(this.domNode);this.fadeIn=k.fadeIn({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onShow")});this.fadeOut=k.fadeOut({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onHide")})},show:function(a,b,f,o,e){if(!this.aroundNode||!(this.aroundNode===b&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;e&&this.set("textDir",e);this.containerNode.align=o?"right":"left";var s=r.around(this.domNode,
b,f&&f.length?f:v.defaultPosition,!o,c.hitch(this,"orient")),n=s.aroundNodePos;"M"==s.corner.charAt(0)&&"M"==s.aroundCorner.charAt(0)?(this.connectorNode.style.top=n.y+(n.h-this.connectorNode.offsetHeight>>1)-s.y+"px",this.connectorNode.style.left=""):"M"==s.corner.charAt(1)&&"M"==s.aroundCorner.charAt(1)?this.connectorNode.style.left=n.x+(n.w-this.connectorNode.offsetWidth>>1)-s.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");d.set(this.domNode,"opacity",0);this.fadeIn.play();
this.isShowingNow=!0;this.aroundNode=b}},orient:function(a,b,c,d,o){this.connectorNode.style.top="";var e=d.h,d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+
"-"+c];this.domNode.style.width="auto";var s=h.position(this.domNode);9==f("ie")&&(s.w+=2);var n=Math.min(Math.max(d,1),s.w);h.setMarginBox(this.domNode,{w:n});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=h.position(a),b=this.connectorNode.offsetHeight,a.h>e?(this.connectorNode.style.top=e-(o.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(o.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom=
"");return Math.max(0,s.w-d)},_onShow:function(){if(f("ie"))this.domNode.style.filter=""},hide:function(a){if(this._onDeck&&this._onDeck[1]==a)this._onDeck=null;else if(this.aroundNode===a)this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck)this.show.apply(this,this._onDeck),this._onDeck=null},_setAutoTextDir:function(a){this.applyTextDir(a,f("ie")?a.outerText:a.textContent);
l.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});u.showTooltip=function(a,b,c,f,d){c&&(c=l.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));if(!v._masterTT)u._masterTT=v._masterTT=new w;return v._masterTT.show(a,b,c,f,d)};u.hideTooltip=function(a){return v._masterTT&&v._masterTT.hide(a)};var v=m("dijit.Tooltip",
t,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(f){l.forEach(this._connections||[],function(a){l.forEach(a,function(a){a.remove()})},this);this._connectIds=l.filter(c.isArrayLike(f)?f:f?[f]:[],function(a){return j.byId(a,this.ownerDocument)},this);this._connections=l.map(this._connectIds,function(f){var f=j.byId(f,this.ownerDocument),d=this.selector,o=d?function(b){return a.selector(d,b)}:function(a){return a},e=this;return[a(f,o(b.enter),function(){e._onHover(this)}),
a(f,o("focusin"),function(){e._onHover(this)}),a(f,o(b.leave),c.hitch(e,"_onUnHover")),a(f,o("focusout"),c.hitch(e,"_onUnHover"))]},this);this._set("connectId",f)},addTarget:function(a){a=a.id||a;-1==l.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=l.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);e.add(this.domNode,"dijitTooltipData")},
startup:function(){this.inherited(arguments);var a=this.connectId;l.forEach(c.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(a){if(!this._showTimer)this._showTimer=this.defer(function(){this.open(a)},this.showDelay)},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);this.close()},open:function(a){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var b=this.getContent(a);
if(b)v.show(b,a,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=a,this.onShow(a,this.position)},close:function(){this._connectNode&&(v.hide(this._connectNode),delete this._connectNode,this.onHide());this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close();l.forEach(this._connections||[],function(a){l.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});v._MasterTooltip=w;v.show=
u.showTooltip;v.hide=u.hideTooltip;v.defaultPosition=["after-centered","before-centered"];return v})},"dijit/place":function(){define("dojo/_base/array,dojo/dom-geometry,dojo/dom-style,dojo/_base/kernel,dojo/_base/window,dojo/window,./main".split(","),function(l,m,k,j,e,h,d){function c(b,a,c,d){var r=h.getBox(b.ownerDocument);(!b.parentNode||"body"!=(""+b.parentNode.tagName).toLowerCase())&&e.body(b.ownerDocument).appendChild(b);var j=null;l.some(a,function(a){var e=a.corner,h=a.pos,q=0,v={w:{L:r.l+
r.w-h.x,R:h.x-r.l,M:r.w}[e.charAt(1)],h:{T:r.t+r.h-h.y,B:h.y-r.t,M:r.h}[e.charAt(0)]},x=b.style;x.left=x.right="auto";c&&(q=c(b,a.aroundCorner,e,v,d),q="undefined"==typeof q?0:q);var y=b.style,k=y.display,l=y.visibility;if("none"==y.display)y.visibility="hidden",y.display="";x=m.position(b);y.display=k;y.visibility=l;k={L:h.x,R:h.x-x.w,M:Math.max(r.l,Math.min(r.l+r.w,h.x+(x.w>>1))-x.w)}[e.charAt(1)];l={T:h.y,B:h.y-x.h,M:Math.max(r.t,Math.min(r.t+r.h,h.y+(x.h>>1))-x.h)}[e.charAt(0)];h=Math.max(r.l,
k);y=Math.max(r.t,l);k=Math.min(r.l+r.w,k+x.w);l=Math.min(r.t+r.h,l+x.h);k-=h;l-=y;q+=x.w-k+(x.h-l);if(null==j||q<j.overflow)j={corner:e,aroundCorner:a.aroundCorner,x:h,y:y,w:k,h:l,overflow:q,spaceAvailable:v};return!q});j.overflow&&c&&c(b,j.aroundCorner,j.corner,j.spaceAvailable,d);var a=m.isBodyLtr(b.ownerDocument),q=b.style;q.top=j.y+"px";q[a?"left":"right"]=(a?j.x:r.w-j.x-j.w)+"px";q[a?"right":"left"]="auto";return j}return d.place={at:function(b,a,f,d){f=l.map(f,function(b){var c={corner:b,pos:{x:a.x,
y:a.y}};d&&(c.pos.x+="L"==b.charAt(1)?d.x:-d.x,c.pos.y+="T"==b.charAt(0)?d.y:-d.y);return c});return c(b,f)},around:function(b,a,f,d,e){function h(a,b){A.push({aroundCorner:a,corner:b,pos:{x:{L:x,R:x+C,M:x+(C>>1)}[a.charAt(1)],y:{T:y,B:y+B,M:y+(B>>1)}[a.charAt(0)]}})}var q="string"==typeof a||"offsetWidth"in a?m.position(a,!0):a;if(a.parentNode)for(var o="absolute"==k.getComputedStyle(a).position,a=a.parentNode;a&&1==a.nodeType&&"BODY"!=a.nodeName;){var s=m.position(a,!0),u=k.getComputedStyle(a);
/relative|absolute/.test(u.position)&&(o=!1);if(!o&&/hidden|auto|scroll/.test(u.overflow)){var w=Math.min(q.y+q.h,s.y+s.h),v=Math.min(q.x+q.w,s.x+s.w);q.x=Math.max(q.x,s.x);q.y=Math.max(q.y,s.y);q.h=w-q.y;q.w=v-q.x}"absolute"==u.position&&(o=!0);a=a.parentNode}var x=q.x,y=q.y,C="w"in q?q.w:q.w=q.width,B="h"in q?q.h:(j.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+q.height+", width:"+C+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+q.height+", w:"+C+
" }","","2.0"),q.h=q.height),A=[];l.forEach(f,function(a){var b=d;switch(a){case "above-centered":h("TM","BM");break;case "below-centered":h("BM","TM");break;case "after-centered":b=!b;case "before-centered":h(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":h(b?"TL":"TR",b?"TR":"TL");h(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":h(b?"BL":"BR",b?"TL":"TR");h(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":h(b?"TL":"TR",b?"BL":"BR");h(b?"TR":"TL",
b?"BR":"BL");break;default:h(a.aroundCorner,a.corner)}});b=c(b,A,e,{w:C,h:B});b.aroundNodePos=q;return b}}})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n\t><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n\t><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n></div>\n',"js/webext/widgets/ColumnForm":function(){define("dijit/_TemplatedMixin,dijit/_WidgetBase,dijit/form/Button,dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/_base/lang,dojo/aspect,dojo/window,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/io-query,dojo/json,dojo/on,js/util/blocker/_BlockerMixin,js/webext/widgets/FormDelegates,js/webext/widgets/FieldList,js/webext/widgets/Dialog,js/webext/widgets/Alert,dojox/string/BidiComplex".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y){return j([m,l,s],{templateString:'<div>  <div class="columnForm">    <form data-dojo-attach-point="nativeFormAttach">      <div data-dojo-attach-point="formAttach"></div>    </form>  </div>  <div class="clear"></div></div>',submitMethod:"PUT",submitFormat:"JSON",readOnly:!1,saveLabel:"",cancelLabel:"",showButtons:!0,version:null,constructor:function(){this.saveLabel=i18n("Save");this.cancelLabel=i18n("Cancel");this.hasRequired=this.showingFields=
!1;this.helpNodes=[]},postCreate:function(){var b=this;this.inherited(arguments);this.delegates=new u;b.extraFormDelegates&&e.forEach(b.extraFormDelegates,function(a){b.delegates.addDelegate(a.name,a.delegateFunction)});this.formContainer=new w;this.own(this.formContainer);e.forEach(this.fieldsArray,function(a){b.formContainer.insertField(a.widget,null,a.description,a.tooltipIcon);b.showingFields=!0});this.dialog&&this.shrinkFormToFit?(this.formContainerContainer=a.create("div",{style:{overflowX:"hidden",
overflowY:"auto"}},this.formAttach),this.formContainer.placeAt(this.formContainerContainer),c.after(this.dialog,"_size",d.hitch(this,"_shrinkToFit"))):this.formContainer.placeAt(this.formAttach);this.started=!0;o(this.nativeFormAttach,"submit",function(a){a.preventDefault()});if(this.showingFields&&this.hasRequired){var s=a.create("div");s.innerHTML=i18n('All fields marked with<span class="required">*</span> are required.');s.className="underFieldText";this.formAttach.appendChild(s)}if(this.showButtons){b.buttonsAttach=
a.create("div");b.buttonsAttach.style.marginTop="15px";b.buttonsAttach.className="underField";if(!this.readOnly)this.saveButton=new k({label:this.saveLabel,type:"submit"}),f.add(this.saveButton.domNode,"idxButtonSpecial"),this.saveButton.placeAt(b.buttonsAttach),o(this.nativeFormAttach,"submit",function(){b.submitForm()});this.cancelLabel&&(new k({label:this.cancelLabel,onClick:function(){b.onCancel()}})).placeAt(b.buttonsAttach);this.formAttach.appendChild(b.buttonsAttach)}e.forEach(this.fields,
function(a){b.addField(a)})},_shrinkToFit:function(){var a=b.getBox().h-120,c=0;if(this.showButtons)c=r.position(this.buttonsAttach).h;var c=c+r.position(this.dialog.titleBar).h,f=r.position(this.formContainer.domNode).h+30,f=Math.min(a-c,f);n.set(this.formContainerContainer,"height",f+"px");n.set(this.dialog.containerContainer,{maxHeight:f+c+"px",overflowX:"hidden",overflowY:"hidden"});n.set(this.dialog.containerNode,{overflowX:"hidden",overflowY:"hidden",position:"inherit"})},onCancel:function(){},
destroy:function(){this.inherited(arguments)},filter:function(){return!0},addField:function(a,b){if(void 0===this.fields)this.fields={};if(void 0===this.fieldsArray)this.fieldsArray=[];if(void 0===a.widget&&void 0===this.delegates.getDelegate(a.type))console.error("Field: "+a.name+": There is no form delegate for type "+a.type);else{if(a.translate&&!a.translated){a.translated=!0;if(a.placeholder)a.placeholder=i18n(a.placeholder);if(a.label)a.label=i18n(a.label.escapeHTML());if(a.description)a.description=
i18n(a.description.escapeHTML());a.allowedValues&&e.forEach(a.allowedValues,function(a){a.label=i18n(a.label)})}a.readOnly=a.readOnly||this.readOnly;if(!a.label&&""!==a.label&&a.name)a.label=a.name.escapeHTML();if(!this.filter(a))return;if(void 0===a.widget){if(a.widget=this.delegates.getDelegate(a.type)(a),null===a.widget)return}else{if(a.label)a.widget.label=a.label.escapeHTML();if(a.name)a.widget.name=a.name.escapeHTML()}if(a.attachPoint)a.widget.attachPoint=a.attachPoint;a.placeholder&&a.widget.set("placeholder",
a.placeholder);if(a.bidiDynamicSTT&&util.getBaseTextDir())a.widget.focusNode.dir="ltr",y.attachInput(a.widget.focusNode,a.bidiDynamicSTT);this.own(a.widget);if(void 0!==a.style)void 0!==a.widget.set?a.widget.set("style",a.style):a.widget.style=a.style;if(a.required)a.widget.label&&(a.widget.label+='<span class="required">*</span>'),this.hasRequired=!0;this.fields[a.name]=a;var c=this.fieldsArray.length;if(void 0!==b){var f=0;e.forEach(this.fieldsArray,function(a){if(a.name===b||a.widget===b)c=f;f++});
this.fieldsArray.splice(c,0,a);if(this.started)this.formContainer.insertField(a.widget,c,a.description,a.name,a.tooltipIcon),this.showingFields=!0}else if(this.fieldsArray.push(a),this.started)this.formContainer.insertField(a.widget,void 0,a.description,a.name,a.tooltipIcon),this.showingFields=!0}return a},removeField:function(a){var b=null,c=null,f=0;e.forEach(this.fieldsArray,function(d){if(d.name===a||d.widget===a)b=f,c=d;f++});null!==b?(util.removeFromArray(this.fieldsArray,c),this.fields[c.name]=
void 0,this.formContainer.removeField(b)):console.error(a+" not found in form fields.")},hasField:function(a){var b=!1;e.forEach(this.fieldsArray,function(c){if(c.name===a||c.widget===a)b=!0});return b},getValue:function(a){var b=null,c=null;e.forEach(this.fieldsArray,function(c){if(c.name===a||c.widget===a)b=c});null!==b&&(c=this.getValueByField(b));return c},setValue:function(a,b){var c=null;e.forEach(this.fieldsArray,function(b){if(b.name===a||b.widget===a)c=b});null!==c&&c.widget&&c.widget.set("value",
b)},submitForm:function(){this.isBlocked()||this._submitForm()},_submitForm:function(){this.block();var a=this.validateRequired(),b=this.getData();if(void 0!==this.validateFields){var c=this.validateFields(b);e.forEach(c,function(b){a.push(b)})}0===a.length?(void 0!==this.preSubmit&&this.preSubmit(b),void 0!==this.onSubmit?(this.onSubmit(b),void 0!==this.postSubmit&&this.postSubmit(b)):this.submitOverXhr(b)):(a.unshift(i18n("Please correct the following errors before submitting this form:")),(new x({messages:a})).startup(),
this.unblock())},submitOverXhr:function(a){var b=this;if("PUT"===this.submitMethod||"POST"===this.submitMethod){var c,a=b.formatData(a);"JSON"===this.submitFormat?c="application/json":"Query"===this.submitFormat&&(c="application/x-www-form-urlencoded");var f={};f["Content-Type"]=c;if(b.version)f.version=b.version;c={url:this.submitUrl,handleAs:"json",putData:a,headers:f,load:function(a,c){void 0!==b.postSubmit&&b.postSubmit(a,c);b.unblock()},error:function(a){if(void 0!==b.onError)b.onError(a);b.unblock()}};
"PUT"===this.submitMethod?h.put(c):"POST"===this.submitMethod&&h.post(c)}else"GET"===this.submitMethod&&h.get({url:this.submitUrl,handleAs:"json",load:function(a,c){void 0!==b.postSubmit&&b.postSubmit(a,c);b.unblock()},error:function(a){if(void 0!==b.onError)b.onError(a);b.unblock()}})},getData:function(){var a=this,b={};e.forEach(this.fieldsArray,function(c){var f=a.getValueByField(c);void 0!==f&&null!==f&&(b[c.name]="string"===typeof f?y.stripSpecialCharacters(f):f);if("HTTP_SELECT"===c.type||"HTTP_MULTI_SELECT"===
c.type)b[c.name+"/HTTP_SELECT_LABEL"]=a.getHttpSelectedLabelByField(c)});this.addData&&this.addData(b);return b},formatData:function(a){var b="";"JSON"===this.submitFormat?b=q.stringify(a):"Query"===this.submitFormat?b=t.objectToQuery(a):console.error("Unsupported submit format: "+this.submitFormat);return b},validateRequired:function(){var a=this,b=[];e.forEach(this.fieldsArray,function(c){if(c.required){var f=a.getValueByField(c);d.isString(f)&&(f=f.trim());if("Checkbox"===c.type)"true"!==f&&b.push(c);
else if(null===f||void 0===f||0===f.length)c.label?b.push(i18n("%s is a required field.",c.label)):b.push(i18n("%s is a required field.",c.name))}c.widget&&c.widget.getValidationMessages&&e.forEach(c.widget.getValidationMessages(),function(a){b.push(a)})});return b},getValueByField:function(a){var b=a.widget.get("value");if("Multi-Select"===a.type||"MULTI_SELECT"===a.type||"HTTP_MULTI_SELECT"===a.type||"ORDERED_TAG_MULTI_SELECT"===a.type||"OrderedTagMultiSelect"===a.type||"OrderedColoredMultiSelect"===
a.type)b&&(b=b.join(","));return b},getHttpSelectedLabelByField:function(a){var b=null;if("HTTP_SELECT"===a.type){if(a=a.widget.get("item"))b=a.label}else"HTTP_MULTI_SELECT"===a.type&&a.widget.items&&(b=e.map(a.widget.items,function(a){return a.label}).join(","));return b},onError:function(a){(new x({message:a.responseText})).startup()}})})},"js/webext/widgets/FormDelegates":function(){var l="dojo/_base/declare,dojo/_base/array,dojo/_base/Color,dojo/_base/kernel,dojo/_base/lang,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dijit/_WidgetBase,dijit/ColorPalette,dijit/MenuItem,dijit/MenuSeparator,dijit/_base/wai,dijit/form/CheckBox,dijit/form/DateTextBox,dijit/form/MultiSelect,dijit/form/NumberTextBox,dijit/form/NumberSpinner,dijit/form/Select,dijit/form/SimpleTextarea,dijit/form/TextBox,dijit/form/TimeTextBox,dijit/form/ValidationTextBox,dojo/store/Cache,dojo/store/JsonRest,dojo/store/Memory,dojox/html/entities,dojox/form/CheckedMultiSelect,js/webext/widgets/DateTime,js/webext/widgets/DialogMultiSelect,js/webext/widgets/DomNode,js/webext/widgets/FilteringScrollSelect,js/webext/widgets/CheckboxGroup,js/webext/widgets/RadioButtonGroup,js/webext/widgets/Switch,js/webext/widgets/SourceBrowser,js/webext/widgets/color/ColorPicker,js/webext/widgets/color/Color,js/webext/widgets/select/WebextSelect,js/webext/widgets/select/WebextMultiSelect,js/webext/widgets/BidiDateUtil".split(",");
(function(){var m,k,j;if((m=window.config?config.getProperty("extraFormIncludes"):[])&&m instanceof Array)for(k=0;k<m.length;k++)j=m[k].replace(/\./g,"/"),l.push(j),console&&console.warn&&console.warn("DEPRECATED: config extraFormIncludes is deprecated, value="+j)})();define(l,function(l,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L,I,J,U,R,T,W,Y,Q,V,aa){var S={},H=function(a,b){h.isArray(a)?k.forEach(a,function(a){H(a,b)}):S[a.toUpperCase()]=b},l=l([],{delegates:null,constructor:function(a){this.delegates=
h.delegate(S);if(a)this.params=a,h.mixin(this,a);this.initDelegates()},getDelegate:function(a){return this.delegates[a.toUpperCase()]},addDelegate:function(a,b){var c=this;h.isArray(a)?k.forEach(a,function(a){c.addDelegate(a,b)}):c.delegates[a.toUpperCase()]=b},initDelegates:function(){var a=this;k.forEach(config.getProperty("extraFormDelegates"),function(b){e.deprecated("config extraFormDelegates should be replaced with calls to #addDelegate or #registerDelegate");a.addDelegate(b.name,b.delegateFunction)})}});
l.registerDelegate=H;l.retrieveDelegate=function(a){return S[a.toUpperCase()]};var M=function(a){(a=a.style)||(a={width:"400px"});return a};l.registerDelegate("TEXT",function(a){var b=new y({label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():a.name,value:a.value,placeHolder:a.placeHolder,disabled:a.readOnly?!0:!1,style:M(a),textDir:a.textDir||util.getBaseTextDir()||"auto"});if(a.onChange)b.onChange=a.onChange;a.intermediateChanges&&b.set("intermediateChanges",a.intermediateChanges);
return b});l.registerDelegate("SECURE",function(a){var b=new y({label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():a.name,value:a.value,placeHolder:a.placeHolder,style:M(a),disabled:a.readOnly?!0:!1,textDir:"ltr",type:"password"});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate(["Text Area","TEXTAREA"],function(a){var b=M(a);if("400px"===b.width)b.width="384px";b=new x({rows:5,label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():a.name,
value:a.value,placeHolder:a.placeHolder,style:b,textDir:a.textDir||util.getBaseTextDir()||"auto",disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate(["PASSWORD"],function(a){var b=new B({label:a.label,name:a.name,value:a.value,placeHolder:a.placeHolder,style:M(a),disabled:a.readOnly?!0:!1,required:a.required?!0:!1,textDir:"ltr",type:a.textType||"Password"});if(a.promptMessage)b.promptMessage=a.promptMessage;else if(b.required)b.promptMessage=i18n("Required");
return b});l.registerDelegate(["Validation Text","VALIDATION_TEXT"],function(a){a.regExp&&e.deprecated('See dijit/form/ValidationTextBox.js line 74: "regExp: Deprecated [extension protected] String.  Use "pattern" instead."');var b=new B({label:a.label,name:a.name,value:a.value,placeHolder:a.placeHolder,style:M(a),disabled:a.readOnly?!0:!1,required:a.required?!0:!1,type:a.textType||"text",regExp:a.regExp||"",pattern:a.pattern||".*"});if(void 0!==a.message)b.message=a.message;if(void 0!==a.invalidMessage)b.invalidMessage=
a.invalidMessage;if(void 0!==a.missingMessage)b.missingMessage=a.missingMessage;if(void 0!==a.promptMessage)b.promptMessage=a.promptMessage;else if(void 0!==a.missingMessage)b.promptMessage=a.missingMessage;else if(b.required)b.promptMessage=i18n("Required");if(void 0!==a.pattern)b.pattern=a.pattern;if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("Number",function(a){var b=new u({name:a.name,label:a.label,value:a.value,placeHolder:a.placeHolder,style:M(a),textDir:"ltr",disabled:a.readOnly?
!0:!1,constraints:{pattern:"#"}});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("NumberBox",function(a){var b=new w({name:a.name,label:a.label,value:a.value,placeHolder:a.placeHolder,smallDelta:a.smallDelta||1,style:M(a),textDir:"ltr",disabled:a.readOnly?!0:!1,required:a.required?!0:!1,constraints:a.constraints||{places:0}});if(void 0!==a.message)b.message=a.message;if(void 0!==a.promptMessage)b.promptMessage=a.promptMessage;else if(void 0!==a.missingMessage)b.promptMessage=a.missingMessage;
if(void 0!==a.rangeMessage)b.rangeMessage=a.rangeMessage;if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("CHECKBOX",function(a){var b=!1;if(!0===a.value||"true"===a.value||"on"===a.value)b=!0;b=new q({label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():a.name,checked:b,value:"true",style:{marginTop:"3px"},disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("Checkbox Group",function(a){return new J({name:a.name,label:a.label,
options:a.options})});l.registerDelegate("SWITCH",function(a){var b=!1;if(!0===a.value||"true"===a.value||"on"===a.value)b=!0;b=new R({label:a.label,name:a.name,value:b,disabled:a.readOnly?!0:!1,color:a.color||"blue"});if(a.onChange)b.onChange=a.onChange;return b});var F=function(a){var b=[];k.forEach(a.allowedValues,function(c){void 0!==c.label&&void 0!==c.value?b.push({label:c.label?c.label.escapeHTML():c.label,value:""+c.value,selected:c.value===a.value,checked:c.value===a.value,style:c.style}):
b.push({label:c,id:""+c,value:""+c,selected:c===a.value,checked:c===a.value})});return b};l.registerDelegate(["SELECT","PROPERTY_VALUE_GROUP"],function(a){if(a.value){var b,c=!1;for(b=0;b<a.allowedValues.length;b++)if(a.allowedValues[b].value===a.value){c=!0;break}c||a.allowedValues.push({value:a.value,label:a.value,style:"font-style:italic;"})}b=new v({label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():a.name,options:F(a),disabled:a.readOnly?!0:!1,_getMenuItemForOption:function(a){if(!a.value&&
!a.label)return new r;var b=h.hitch(this,"_setValueAttr",a),a=new n({option:a,label:a.label||this.emptyLabel,style:a.style,onClick:b,disabled:a.disabled||!1});t.setWaiRole(a.focusNode,"listitem");return a}});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("RADIO",function(a){return new U({label:a.label,name:a.name,options:a.allowedValues||a.options,value:a.value,disabled:a.readOnly?!0:!1,onChange:a.onChange})});l.registerDelegate("LabeledSelect",function(a){k.forEach(a.allowedValues,
function(b){if(a.value===b.value)b.selected=!0});var b=new v({label:a.label,name:a.name,options:a.allowedValues,disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("FilteringScrollSelect",function(a){return new I(a)});l.registerDelegate("FilteringSelect",function(a){var b=a.store,c=a.autoComplete,f=a.pageSize;if(!b)a.url?("/"!==a.url.substring(a.url.length-1)&&(a.url+="/"),b=new z({target:a.url,idAttribute:a.idProperty||"id"}),c=!1,f=30):a.allowedValues?(k.forEach(a.allowedValues,
function(b){if(a.value===b.value)b.checked=!0}),b=new E({data:a.allowedValues,idProperty:a.idProperty||"id"})):(a.searchAttr="label",b=new E({data:F(a),idProperty:"value"}));b=new I({label:a.label,name:a.name,value:a.value,placeHolder:a.placeHolder,store:b,defaultQuery:a.defaultQuery,multiple:a.multiple,autoSelectFirst:a.autoSelectFirst||!1,searchAttr:a.searchAttr?a.searchAttr:"name",autoComplete:c,pageSize:f,required:a.required?!0:!1,disabled:a.readOnly?!0:!1,readOnly:a.readOnly?!0:!1,allowNone:a.allowNone||
!a.required,idProperty:a.idProperty||"id",validate:a.validate?a.validate:!0,onLoad:a.onLoad||function(){}});if(a.onChange)b.onChange=a.onChange;return b});var Z=function(a,b){if(b&&b.pattern){var c=util.getNormalizedRegExp(b.pattern);a.onFilterResult=function(a){return k.filter(a,function(a){return a&&a.value&&c.test(a.value)})}}};l.registerDelegate(["HTTP_SELECT"],function(a){delete a.inherited;a.searchAttr="label";if(a.id)a.id="";if(a.resolveHttpValuesUrl)a.url=bootstrap.baseUrl+a.resolveHttpValuesUrl;
a.url&&"/"!==a.url.substring(a.url.length-1)&&(a.url+="/");a.label=a.label?a.label.escapeHTML():a.label;var b=new z({target:a.url,idProperty:"value"});a.store=b;b=new Q(a);Z(b,a);return b});l.registerDelegate(["HTTP_MULTI_SELECT"],function(a){delete a.inherited;a.searchAttr="label";a.idAttribute="value";if(a.id)a.id="";if(a.resolveHttpValuesUrl)a.url=bootstrap.baseUrl+a.resolveHttpValuesUrl;a.url&&"/"!==a.url.substring(a.url.length-1)&&(a.url+="/");var b=new z({target:a.url,idProperty:"value"});if(a.value){var c=
[],f;a.defaultLabel&&(f=a.defaultLabel.split(","));k.forEach(a.value.split(","),function(a,b){c.push({label:f?f[b]:a,value:a,checked:!0})});a.value=c;var d=new E({data:c,idProperty:"value"});a.store=new A(b,d)}else a.store=b;b=new V(a);Z(b,a);return b});var P=function(a){a=h.clone(a);a.style=M(a);if(a.url)"/"!==a.url.substring(a.url.length-1)&&(a.url+="/"),a.store=new z({target:a.url,idProperty:a.idAttribute||"id"});else if(a.data)a.store=new E({data:a.data,idProperty:a.idAttribute||"id"});return a},
O=function(a,b){var c=P(a);if(!0===b)c.orderable=!0;return c};l.registerDelegate(["TableFilterSelect"],function(a){return new Q(P(a))});l.registerDelegate(["TableFilterMultiSelect"],function(a){return new V(O(a,!1))});l.registerDelegate(["OrderedTableFilterMultiSelect"],function(a){return new V(O(a,!0))});l.registerDelegate(["OrderedColoredMultiSelect","OrderedTagMultiSelect","ORDERED_TAG_MULTI_SELECT"],function(a){a=O(a,!0);a.formatSelectedItem=function(a,c){c.color&&(Y.isDark(c.color)||b.set(a,
"color","black"),b.set(a,"background-color",c.color))};if(!a.url&&!a.data&&a.allowedValues){var c="id";if(0<a.allowedValues.length&&(a.allowedValues[0].id||(c="value"),!a.allowedValues[0].name))a.searchAttr="label";a.idAttribute=a.idAttribute||c;a.store=new E({data:a.allowedValues,idProperty:a.idAttribute});a.value=a.allowedValues}return new V(a)});l.registerDelegate(["MULTI-SELECT","MULTI_SELECT"],function(a){var b=new s({label:a.label?a.label.escapeHTML():a.label,name:a.name?a.name.escapeHTML():
a.name,style:M(a),disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;var f=[];a.value&&(f=h.isArray(a.value)?a.value:a.value.split(","));k.forEach(a.allowedValues,function(a){var d=c.create("option");void 0!==a.label&&void 0!==a.value?(d.innerHTML=D.encode(a.label),d.value=a.value):(d.innerHTML=D.encode(a),d.value=a);if(-1<f.indexOf(a)||-1<f.indexOf(a.value))d.selected="selected";b.containerNode.appendChild(d)});return b});l.registerDelegate(["CHECKED-MULTI-SELECT","CHECKED_MULTI_SELECT"],
function(a){var b=new G({label:a.label,name:a.name,style:M(a),multiple:void 0===a.multiple?!0:a.multiple,disabled:a.readOnly?!0:!1});k.forEach(a.allowedValues,function(a){void 0!==a.label&&void 0!==a.value&&b.addOption(a)});return b});l.registerDelegate("Date",function(a){var b=new o({label:a.label,datePackage:aa.getDatePackage(),name:a.name,disabled:a.readOnly?!0:!1,value:a.value,format:function(a){return util.dayFormatShort(a)},placeHolder:a.placeHolder,constraints:{fullYear:!0,datePattern:util.dateFormatPattern},
promptMessage:util.dateFormatPattern,required:a.required?!0:!1});if(a.onChange)b.onChange=a.onChange;if(void 0!==a.message)b.message=a.message;if(void 0!==a.promptMessage)b.promptMessage=a.promptMessage;else if(void 0!==a.missingMessage)b.promptMessage=a.missingMessage;if(void 0!==a.rangeMessage)b.rangeMessage=a.rangeMessage;return b});l.registerDelegate("Time",function(a){var b=new C({label:a.label,name:a.name,disabled:a.readOnly?!0:!1,value:a.value,placeHolder:a.placeHolder,constraints:{timePattern:util.timeFormatPattern},
required:a.required?!0:!1});if(a.onChange)b.onChange=a.onChange;if(void 0!==a.message)b.message=a.message;if(void 0!==a.promptMessage)b.promptMessage=a.promptMessage;else if(void 0!==a.missingMessage)b.promptMessage=a.missingMessage;if(void 0!==a.rangeMessage)b.rangeMessage=a.rangeMessage;return b});l.registerDelegate("DateTime",function(a){var b=new K({label:a.label,name:a.name,datePackage:aa.getDatePackage(),disabled:a.readOnly?!0:!1,value:a.value});if(a.onChange)b.onChange=a.onChange;return b});
l.registerDelegate("Color",function(a){var b=new f({label:a.label,name:a.name,value:a.value,disabled:a.readOnly?!0:!1,_imagePaths:{"7x10":bootstrap.imageUrl+"webext/colors7x10.png"}});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("ColorPicker",function(a){var b=new W({label:a.label,name:a.name,value:a.value,mode:a.mode||"standard",disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;return b});l.registerDelegate("Source",function(a){var b=new T({label:a.label,name:a.name,
value:a.value,required:a.required,disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;b.startup();return b});l.registerDelegate("Label",function(a){var f=new L({name:a.name,label:a.label||""}),d=c.create("div");d.innerHTML=D.encode(a.value);a.style?b.set(d,a.style):(d.style.width="400px",d.style.marginTop="15px");if(a.width)d.style.width=a.width;if(a.height)d.style.height=a.height;f.domAttach.appendChild(d);return f});l.registerDelegate("SectionLabel",function(a){a.label="";var f=new L({name:a.name,
label:a.label||""}),o=c.create("div");o.innerHTML=D.encode(a.value);a.style&&b.set(o,a.style);d.add(o,"sectionLabel");f.domAttach.appendChild(o);return f});l.registerDelegate(["Invisible","Hidden"],function(a){return new L({name:a.name,label:"",rowClass:"hidden",value:a.value})});l.registerDelegate("MultiSelect",function(a){var b=new N({url:a.url,name:a.name,label:a.label,value:a.value,disabled:a.readOnly?!0:!1});if(a.onChange)b.onChange=a.onChange;return b});return l})},"js/webext/widgets/FieldList":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/_base/array,dojo/dom-attr,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dijit/registry,js/webext/widgets/DomNode,js/webext/widgets/TooltipCreator".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return l([m,k],{templateString:'<div class="table"><div data-dojo-attach-point="fieldAttach"></div></div>',fieldStyle:{},postCreate:function(){this.inherited(arguments);this.fields=[];this.rows=[]},insertField:function(a,b,j,q,o){var s=document.createElement("div");q&&e.set(s,"data-field-name",q);s.className=a.rowClass?a.rowClass:"labelsAndValues-row";if(!a.doubleWidth&&!a.hideLabel){q="labelsAndValues-labelCell";"checkbox"===a.type&&(q+=" checkBoxLabel");var q=h.create("div",
{className:q}),u=h.create("div",{className:"labelsAndValues-labelCell"});if("object"===typeof a.label&&1===a.label.nodeType&&"object"===typeof a.label.style&&"object"===typeof a.label.ownerDocument)u.appendChild(a.label);else if(void 0!==a.label&&"object"!==typeof a.label)u.innerHTML=a.label;q.appendChild(u);s.appendChild(q);j&&(new f).createTooltip(q,j);o||d.add(s,"help-toolip-on-hover")}j=document.createElement("div");j.className="labelsAndValues-valueCell";c.set(j,this.fieldStyle);a.placeAt(j);
s.appendChild(j);void 0===b||null===b||b===this.fields.length?(this.fields.push(a),this.rows.push(s),this.fieldAttach.appendChild(s)):(this.fields.splice(b,0,a),this.rows.splice(b,0,s),this.fieldAttach.insertBefore(s,this.rows[b+1]));a.attachPoint&&h.place(s,a.attachPoint);a.fieldRow=s},insertDomNode:function(b,c,f){var d=new a({});d.label=b;d.domAttach.appendChild(c);this.insertField(d,f)},insertDiv:function(b,c,f){var d=new a({});d.label=b;b=document.createElement("div");b.innerHTML=c;d.domAttach.appendChild(b);
this.insertField(d,f)},insertLink:function(b,c,f,d){var o=new a({});o.label=b;b=document.createElement("a");b.innerHTML=f;b.href=c;o.domAttach.appendChild(b);this.insertField(o,d)},removeField:function(a){this.fieldAttach.removeChild(this.rows[a]);this.fields.splice(a,1);this.rows.splice(a,1)},destroy:function(a){this.fieldAttach&&j.forEach(b.findWidgets(this.fieldAttach),function(b){b.destroy(a)});this.inherited(arguments)}})})},"js/webext/widgets/DomNode":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin"],function(l,m,k){return l([m,k],{templateString:'<div class="domNode">    <div dojoAttachPoint="domAttach"></div></div>'})})},"js/webext/widgets/TooltipCreator":function(){define(["dojo/_base/declare","dojo/dom-construct","dijit/Tooltip"],function(l,m,k){return l([],{createTooltip:function(j,e){var h=m.create("div",{"class":"labelsAndValues-helpCell"},j);new k({connectId:[h],label:e,showDelay:100,position:["after","above","below","before"]})}})})},"dojox/string/BidiComplex":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/array,dojo/_base/connect,dojo/_base/sniff,dojo/keys".split(","),
function(l,m,k,j,e,h){l.experimental("dojox.string.BidiComplex");var d=m.getObject("string.BidiComplex",!0,dojox),c=[];d.attachInput=function(a,b){a.alt=b;j.connect(a,"onkeydown",this,"_ceKeyDown");j.connect(a,"onkeyup",this,"_ceKeyUp");j.connect(a,"oncut",this,"_ceCutText");j.connect(a,"oncopy",this,"_ceCopyText");a.value=d.createDisplayString(a.value,a.alt)};d.createDisplayString=function(a,b){var a=d.stripSpecialCharacters(a),c=d._parse(a,b),e="\u202a"+a,h=1;k.forEach(c,function(a){if(null!=a){var b=
e.substring(0,a+h),a=e.substring(a+h,e.length);e=b+"\u200e"+a;h++}});return e};d.stripSpecialCharacters=function(a){return a.replace(/[\u200E\u200F\u202A-\u202E]/g,"")};d._ceKeyDown=function(a){c=(e("ie")?a.srcElement:a.target).value};d._ceKeyUp=function(a){var b=e("ie")?a.srcElement:a.target,n=b.value,r=a.keyCode;if(!(r==h.HOME||r==h.END||r==h.SHIFT)){var j,q;if(a=d._getCaretPos(a,b))j=a[0],q=a[1];if(e("ie")){var a=j,o=q;if(r==h.LEFT_ARROW){"\u200e"==n.charAt(q-1)&&j==q&&d._setSelectedRange(b,j-
1,q-1);return}if(r==h.RIGHT_ARROW){"\u200e"==n.charAt(q-1)&&(o=q+1,j==q&&(a=j+1));d._setSelectedRange(b,a,o);return}}else{if(r==h.LEFT_ARROW){"\u200e"==n.charAt(q-1)&&d._setSelectedRange(b,j-1,q-1);return}if(r==h.RIGHT_ARROW){"\u200e"==n.charAt(q-1)&&d._setSelectedRange(b,j+1,q+1);return}}a=d.createDisplayString(n,b.alt);if(n!=a){window.status=n+" c="+q;b.value=a;if(r==h.DELETE&&"\u200e"==a.charAt(q))b.value=a.substring(0,q)+a.substring(q+2,a.length);r==h.DELETE?d._setSelectedRange(b,j,q):r==h.BACKSPACE?
c.length>=q&&"\u200e"==c.charAt(q-1)?d._setSelectedRange(b,j-1,q-1):d._setSelectedRange(b,j,q):"\u200e"!=b.value.charAt(q)&&d._setSelectedRange(b,j+1,q+1)}}};d._processCopy=function(a,b){null==b&&(b=e("ie")?document.selection.createRange().text:a.value.substring(a.selectionStart,a.selectionEnd));var c=d.stripSpecialCharacters(b);e("ie")&&window.clipboardData.setData("Text",c);return!0};d._ceCopyText=function(a){if(e("ie"))a.returnValue=!1;return d._processCopy(a,null,!1)};d._ceCutText=function(a){if(!d._processCopy(a,
null,!1))return!1;if(e("ie"))document.selection.clear();else{var b=a.selectionStart;a.value=a.value.substring(0,b)+a.value.substring(a.selectionEnd);a.setSelectionRange(b,b)}return!0};d._getCaretPos=function(a,b){if(e("ie")){var c=0,d=document.selection.createRange().duplicate(),h=d.duplicate(),q=d.text.length;for("textarea"==b.type?h.moveToElementText(b):h.expand("textedit");0<d.compareEndPoints("StartToStart",h);)d.moveStart("character",-1),++c;return[c,c+q]}return[a.target.selectionStart,a.target.selectionEnd]};
d._setSelectedRange=function(a,b,c){if(e("ie")){var d=a.createTextRange();d&&("textarea"==a.type?d.moveToElementText(a):d.expand("textedit"),d.collapse(),d.moveEnd("character",c),d.moveStart("character",b),d.select())}else a.selectionStart=b,a.selectionEnd=c};var b=function(a,b,c){for(;0<b&&!(b==c);){b--;var d=a.charAt(b);if("0"<=d&&"9">=d||"\u00ff"<d)return!0;d=a.charAt(b);if("A"<=d&&"Z">=d||"a"<=d&&"z">=d)break}return!1};d._parse=function(a,c){var d=-1,e=[],h={FILE_PATH:"/\\:.",URL:"/:.?=&#",XPATH:"/\\:.<>=[]",
EMAIL:"<>@.,;"}[c];switch(c){case "FILE_PATH":case "URL":case "XPATH":k.forEach(a,function(c,f){0<=h.indexOf(c)&&b(a,f,d)&&(d=f,e.push(f))});break;case "EMAIL":k.forEach(a,function(c,f){if('"'==c){b(a,f,d)&&(d=f,e.push(f));f++;var s=a.indexOf('"',f);s>=f&&(f=s);b(a,f,d)&&(d=f,e.push(f))}0<=h.indexOf(c)&&b(a,f,d)&&(d=f,e.push(f))})}return e};return dojox.string.BidiComplex})},"deploy/widgets/version/VersionSelectionDialog":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/dom-construct,dojo/dom-class,dojo/on,dojo/aspect,js/webext/widgets/Dialog,deploy/widgets/application/VersionSelection".split(","),
function(l,m,k,j,e,h,d,c,b,a){return j("deploy.widgets.version.VersionSelectionDialog",[m,l],{templateString:'<div class="versionSelector">  <div data-dojo-attach-point="textAttach">    <div data-dojo-attach-point="selectedAttach" class="inlineBlock"></div>     (<div data-dojo-attach-point="linkAttach" class="linkPointer inlineBlock"></div>)  </div>  <div data-dojo-attach-point="dialogAttach"></div></div>',postCreate:function(){var a=this;this.selectedAttach.innerHTML=i18n("%s selected",0);this.linkAttach.innerHTML=
i18n("Choose Versions");d(this.linkAttach,"click",function(){a.versionDialog?a.showDialog():a.createVersionDialog()})},createVersionDialog:function(){var f=this;this.versionDialog=new b({title:i18n("Component Versions"),closable:!0,draggable:!0});h.add(this.versionDialog.domNode,"version-selection-dialog");this.dialogDiv=e.create("div",{},this.versionDialog.containerNode);var d=e.create("div",{"class":"underField",style:"margin-top: 15px;"});this.versionSelection=new a({applicationProcess:f.applicationProcess,
environment:f.environment});c.after(this.versionSelection,"_changeCount",function(){f.selectedAttach.innerHTML=i18n("%s selected",f.versionSelection.getCount())});var r=new k({label:i18n("OK"),onClick:function(){f.versionDialog.hide()}});h.add(r.domNode,"idxButtonSpecial");r.placeAt(d);this.versionSelection.placeAt(this.dialogDiv);e.place(d,this.dialogDiv);this.showDialog()},showDialog:function(){this.versionDialog.show()},_getValueAttr:function(){var a="";this.versionSelection&&(a=this.versionSelection.get("value"));
return a},destroy:function(){this.versionDialog&&this.versionDialog.destroyRecursive();this.inherited(arguments)}})})},"deploy/widgets/application/VersionSelection":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/registry,dijit/Tooltip,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/dnd/Source,dojo/dom,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/dom-class,dojo/on,dojo/mouse,dojo/query,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable,js/webext/widgets/form/MenuButton,js/webext/widgets/ColumnForm,deploy/widgets/version/VersionSelect,deploy/widgets/version/VersionDisplay,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z){return c("deploy.widgets.application.VersionSelection",[m,l],{templateString:'<div class="versionSelector" data-dojo-attach-point="formAttach"><div data-dojo-attach-point="selectAllAttach" class="inlineBlock" style="margin-right:50px;"></div><div data-dojo-attach-point="checkboxAttach" class="inlineBlock"></div><div data-dojo-attach-point="gridAttach"></div></div>',componentVersionsMap:{},versionSelectorMap:{},versionDisplays:{},postCreate:function(){this._changeCount();
this.createVersionForm()},createVersionForm:function(){this.addCheckBoxOptions();this.createVersionTable();this.addSelectForAll()},addCheckBoxOptions:function(){var a=this,b=r.create("div",{className:"inline-block version-secetion-checkbox-option"},this.checkboxAttach);this.onlyChangedOption=(new j({label:i18n("Show only changed components"),name:"onlyChanged",checked:!1,value:!1,onChange:function(b){this.set("value",b);a.grid&&(a.grid.destroy(),a.createVersionTable(b),a._changeCount())}})).placeAt(b);
r.create("label",{"for":this.onlyChangedOption.id,innerHTML:i18n("Show only changed components")},b);b=r.create("div",{"class":"labelsAndValues-helpCell inlineBlock"},b);new h({connectId:[b],label:i18n("This will only show components which contain newer versions than the current environment inventory as long as there is a newer version that passes the environment gates for the application."),showDelay:100,position:["after","above","below","before"]});var b=r.create("div",{className:"inline-block version-secetion-checkbox-option"},
this.checkboxAttach),c=(new j({onChange:function(b){a.allowInvalidVersions=!!b}})).placeAt(b);r.create("label",{"for":c.id,innerHTML:i18n("Allow invalid versions")},b);b=r.create("div",{"class":"labelsAndValues-helpCell inlineBlock"},b);new h({connectId:[b],label:i18n("This will allow selection of versions even if they have not achieved the statuses required of versions being deployed to this environment."),showDelay:100,position:["after","above","below","before"]})},showStatusDialog:function(a){var b=
this,c=new v({title:i18n("Select Status")}),f=new C({onSubmit:function(b){c.destroy();f.destroy();b.status&&a(b.status)},onCancel:function(){c.destroy();f.destroy()}}),d=new z({restUrl:bootstrap.restUrl+"deploy/status/versionStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},allowNone:!1,noIllegalValues:!0,onChange:function(a){b.value=a?a:void 0}});f.addField({name:"status",label:"Status",description:i18n("Status"),widget:d});f.placeAt(c.containerNode);
c.show()},showNameDialog:function(b){var c=this;this.nameDialog&&this.nameDialog.destroy();this.nameForm&&this.nameForm.destroy();this.nameDialog=new v({title:i18n("Add Versions With Name...")});this.nameForm=new C({postSubmit:function(){c.nameDialog.destroy();c.nameForm.destroy()},onCancel:function(){c.nameDialog.destroy();c.nameForm&&c.nameForm.destroy()},onSubmit:function(f){if(f){var o=b+"/"+f.name;f.mustPassGates&&(o+="/"+f.mustPassGates);a.get({url:o,handleAs:"json",load:function(a){a&&(d.forEach(c.grid.cachedData,
function(b){d.forEach(a,function(a){a.component.id===b.id&&c.addVersion(a,b,c._getTagAttachElement(b.id))})}),c.displayVersions())}})}}});this.nameForm.addField({name:"mustPassGates",label:"Passes Gates",description:i18n("Use only versions that pass environment gates"),type:"Checkbox",value:!0});this.nameForm.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",description:i18n("Use * as a wildcard. Without wildcard character, exact match is used.")});this.nameForm.placeAt(this.nameDialog.containerNode);
this.nameDialog.show()},addSelectForAll:function(){var a=this,c=[{label:i18n("Latest Available"),onClick:function(){a.addLatestVersions(bootstrap.restUrl+"deploy/applicationProcess/"+a.applicationProcess.id+"/"+a.applicationProcess.version+"/"+a.environment.id+"/latestVersions")}},{label:i18n("Latest with Status"),onClick:function(){a.showStatusDialog(function(b){a.addLatestVersions(bootstrap.restUrl+"deploy/applicationProcess/"+a.applicationProcess.id+"/"+a.applicationProcess.version+"/"+a.environment.id+
"/latestVersions?status="+b)})}},{label:i18n("Versions With Name..."),onClick:function(){a.showNameDialog(bootstrap.restUrl+"deploy/applicationProcess/"+a.applicationProcess.id+"/"+a.applicationProcess.version+"/"+a.environment.id+"/versions")}},{label:i18n("Current Environment Inventory"),onClick:function(){d.forEach(a.grid.cachedData,function(c){a.removeAllVersions(c.id);var f=b.clone(c.desiredVersions);f.reverse();a.addCurrentInventory(c,a._getTagAttachElement(c.id),!1,f)})}},{label:i18n("Latest Available at Execution Time"),
onClick:function(){a.addLatestVersionsAtExecutionTime()}},{label:i18n("Latest with Status at Execution Time"),onClick:function(){a.showStatusDialog(function(b){a.addLatestWithStatusAtExecutionTime(b)})}},{label:i18n("Current Environment Inventory at Execution Time"),onClick:function(){a.addCurrentInventoryAtExecutionTime()}},{label:i18n("None (Clear All)"),onClick:function(){d.forEach(a.grid.cachedData,function(b){a.removeAllVersions(b.id)})}}];this.applyAllSelect=new y({options:c,label:i18n("Select For All...")});
this.applyAllSelect.placeAt(a.selectAllAttach)},createVersionTable:function(a){var b=this;b.componentVersionsMap={};b.versionSelectorMap={};var c=bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcess.id+"/"+this.applicationProcess.version+"/"+this.environment.id+"/components",o=i18n("No components found on the environment.");a&&(c=bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcess.id+"/"+this.applicationProcess.version+"/"+this.environment.id+"/changedComponents",
o=i18n("No changed components found."));a=[{name:i18n("Component"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Current Environment Inventory"),formatter:function(a){var c=r.create("div");b.addCurrentInventory(a,c,!0);return c}},{name:i18n("Versions to Deploy"),formatter:function(a){b.componentVersionsMap.hasOwnProperty(a.id)||(b.componentVersionsMap[a.id]=[],b.versionSelectorMap[a.id]=void 0);var c=r.create("div",{className:"component-version-selection"}),
o=r.create("div",{"class":"inlineBlock tagAttach_"+a.id},c),n=new f(o,{item:a,copyOnly:!1,copyState:function(){return!1},horizontal:!0,onDndDrop:function(a,c,f,o){if(this===a&&this===o)a=b.componentVersionsMap[this.item.id],c=e.byId(c[0].id).version,f=d.indexOf(a,c),-1!==f&&a.splice(f,1),f=e.byId(o.current.id).version,f=d.indexOf(a,f),-1!==f&&(o.before||f++,a.splice(f,0,c)),b.displayVersions();this.onDndCancel()}});o.source=n;var h=r.create("a",{innerHTML:i18n("Add..."),"class":"inlineBlock linkPointer"},
c);b.clearDisplays(a.id);d.forEach(b.componentVersionsMap[a.id],function(c){b.displayVersion(c,a.id,o)});b.versionSelectorMap[a.id]&&(n=b.versionSelectorMap[a.id],b.displayVersion({name:b.getDisplayNameForVersionSelector(n),id:a.id+"-"+n},a.id,o));b.addEvent=b.own(s(h,"click",function(){var c=this;c.selector&&c.selector.destroy();var f=[{name:i18n("Latest Available"),handler:function(){b.addLatestVersion(bootstrap.restUrl+"deploy/component/"+a.id+"/latestVersionByEnvironment/"+b.environment.id,a,
b._getTagAttachElement(a.id));b.displayVersions();c.selector.destroy()}},{name:i18n("Latest With Status"),handler:function(){b.showStatusDialog(function(f){b.addLatestVersion(bootstrap.restUrl+"deploy/component/"+a.id+"/latestVersionByEnvironment/"+b.environment.id+"?statusName="+f,a,b._getTagAttachElement(a.id));b.displayVersions();c.selector.destroy()})}},{name:i18n("Latest Available at Execution Time"),handler:function(){b.addVersionSelector("latestVersion/",a,b._getTagAttachElement(a.id));b.displayVersions();
c.selector.destroy()}},{name:i18n("Latest With Status At Execution Time"),handler:function(){b.showStatusDialog(function(f){b.addVersionSelector("latestWithStatus/"+f,a,b._getTagAttachElement(a.id));b.displayVersions();c.selector.destroy()})}},{name:i18n("Current Environment Inventory at Execution Time"),handler:function(){b.addVersionSelector("allInEnvironment/",a,b._getTagAttachElement(a.id));b.displayVersions();c.selector.destroy()}}];c.selector=new B({component:a,environment:b.environment,allowInvalidVersions:b.allowInvalidVersions,
extraSimpleLinkToHandlers:f});c.selector.placeAt(dojo.body());var f=t.position(h),e=t.position(dojo.body()),n=0;d.forEach(this.selector.versionAttach.children,function(a){a=t.position(a);n+=a.w});n+=22;e=Math.min(f.x,e.w-n-8);dojo.style(this.selector.versionAttach,{position:"absolute",top:f.y+"px",left:e+"px"});if(c.selector.versionSelect&&c.selector.versionSelect.dropDown)f=c.selector.versionSelect.dropDown,f.focusNode&&f.focusNode.focus();s(c.selector.versionSelect,"add",function(c){c&&b.addVersion(c,
a,o)});s(c.selector.versionSelect,"remove",function(c){b.removeVersion(c,a,o)});var q=!1;setTimeout(function(){q=!0},300);c.selector.latest&&s(c.selector.latest,"click",function(){b.addLatestVersion(bootstrap.restUrl+"deploy/component/"+a.id+"/latestVersionByEnvironment/"+b.environment.id,a,o);c.selector&&q&&(b.displayVersions(),c.selector.destroy())});s(this.selector,"click",function(){c.selector&&!c.selector.versionSelect.focused&&!c.selector.extraSelect.focused&&q&&(b.displayVersions(),c.selector.destroy())});
s(this.selector,"blur",function(){c.selector&&q&&(b.displayVersions(),c.selector.destroy())})}));return c}}];b.grid=new x({url:c,serverSideProcessing:!1,columns:a,noDataMessage:o,hidePagination:!1,hideFooterLinks:!0,hideExpandCollapse:!0});b.grid.placeAt(b.gridAttach)},addLatestWithStatusAtExecutionTime:function(a){this.addAllVersionSelectors("latestWithStatus/"+a)},addCurrentInventoryAtExecutionTime:function(){this.addAllVersionSelectors("allInEnvironment/")},addLatestVersionsAtExecutionTime:function(){this.addAllVersionSelectors("latestVersion/")},
addAllVersionSelectors:function(a){var b=this;d.forEach(b.grid.cachedData,function(c){b.addVersionSelector(a,c,b._getTagAttachElement(c.id))});b.displayVersions()},addVersionSelector:function(a,b){a&&(this.componentVersionsMap[b.id]=[],this.versionSelectorMap[b.id]=a,this._changeCount())},addVersion:function(a,b){var c;a&&(this.versionSelectorMap[b.id]=void 0,(c=d.some(this.componentVersionsMap[b.id],function(b){return b.id===a.id}))||this.componentVersionsMap[b.id].push(a),this._changeCount())},
removeVersion:function(a,b){if(a){var c=this.componentVersionsMap[b.id].indexOf(a);this.componentVersionsMap[b.id].splice(c,1);this._changeCount()}},displayVersion:function(a,b,c){var f=this,o=new A({version:a,readOnly:!1,onDelete:function(){void 0!==f.versionSelectorMap?f.componentVersionsMap[b]=d.filter(f.componentVersionsMap[b],function(a){return a.id!==o.version.id}):f.versionSelectorMap=void 0;f.versionDisplays[b]=d.filter(f.versionDisplays[b],function(a){return a.version.id!==o.version.id});
o.destroy();f._changeCount()}});o.placeAt(c,"last");f.versionDisplays[b].push(o);c.source.setItem(o.id,{type:["text"]})},getDisplayNameForVersionSelector:function(a){var b=a;"latestVersion/"===a?b="Latest Version":"latestWithStatus/"===a.substring(0,17)?b="Latest With Status "+a.substring(a.indexOf("/")+1):"allInEnvironment/"===a.substring(0,17)&&(b="Environment Inventory "+a.substring(a.indexOf("/")+1));return b},displayVersions:function(){var a=this,b,c,f=function(f){a.displayVersion(f,b,c)};for(b in a.componentVersionsMap)if(a.componentVersionsMap.hasOwnProperty(b)&&
(c=a._getTagAttachElement(b)))if(a.clearDisplays(b),d.forEach(a.componentVersionsMap[b],f),void 0!==a.versionSelectorMap[b]){var o={name:a.getDisplayNameForVersionSelector(a.versionSelectorMap[b]),id:b+"-"+a.versionSelectorMap[b]};a.displayVersion(o,b,c)}},addLatestVersions:function(b){var c=this;d.forEach(c.grid.cachedData,function(a){c.removeAllVersions(a.id)});a.get({url:b,handleAs:"json",load:function(a){a&&(d.forEach(c.grid.cachedData,function(b){d.forEach(a,function(a){a.component.id===b.id&&
c.addVersion(a,b,c._getTagAttachElement(b.id))})}),c.displayVersions())}})},addLatestVersion:function(b,c,f){var d=this;a.get({url:b,handleAs:"json",load:function(a){a&&(d.addVersion(a,c,f),d.displayVersions())}})},addCurrentInventory:function(a,b,c,f){var e=this,n=f||a.desiredVersions;(!n||1>n.length)&&c?b.innerHTML=i18n("None"):n&&c?(f=5<n.length?n.slice(0,5):n,d.forEach(f,function(a){(new A({version:a,readOnly:c})).placeAt(b)}),5<n.length&&(f=r.create("a",{innerHTML:i18n("(+ %s more)",n.length-
5),title:i18n("Click to view all"),"class":"inlineBlock linkPointer"},b),s(f,"click",function(){var b=new v({closable:!0,draggable:!0});r.create("span",{innerHTML:i18n("Current Environment Inventory For %s",a.name.escape())+"&nbsp;"},b.titleNode);var c=[{name:i18n("Version"),formatter:function(a){return a.name.escape()}}];(new x({getData:function(){return n},serverSideProcessing:!1,hideExpandCollapse:!0,hideFooterLinks:!0,hidePagination:!1,columns:c})).placeAt(b.containerNode);c=(new k({label:i18n("Close"),
onClick:function(){b&&b.hide()}})).placeAt(b.containerNode,"last");o.add(c.domNode,"underField");b.show()}))):n&&(d.forEach(n,function(c){e.addVersion(c,a,b)}),e.displayVersions())},removeAllVersions:function(a){var b=this._getTagAttachElement(a);null!==b&&r.empty(b);this.componentVersionsMap[a]=[];this.versionSelectorMap[a]=void 0;this.clearDisplays(a);this._changeCount()},clearDisplays:function(a){d.forEach(this.versionDisplays[a],function(a){a.destroy()});this.versionDisplays[a]=[]},_changeCount:function(){var a=
this,b=0;a.grid&&d.forEach(a.grid.cachedData,function(c){a.componentVersionsMap.hasOwnProperty(c.id)&&(b+=a.componentVersionsMap[c.id].length);void 0!==a.versionSelectorMap[c.id]&&b++});this.count=b},getCount:function(){if(!this.count)this.count=0;return this.count},_getValueAttr:function(){var a=this,b={};this.grid&&d.forEach(a.grid.cachedData,function(c){void 0!==a.versionSelectorMap[c.id]?b[c.id]=a.versionSelectorMap[c.id]:a.componentVersionsMap.hasOwnProperty(c.id)&&(b[c.id]=d.map(a.componentVersionsMap[c.id],
function(a){return a.id}))});return b},_getTagAttachElement:function(a){var b=null,a=w(".tagAttach_"+a,this.domNode);0<a.length&&(b=a[0]);return b}})})},"dojo/dnd/Source":function(){define("../_base/array,../_base/connect,../_base/declare,../_base/kernel,../_base/lang,../dom-class,../dom-geometry,../mouse,../ready,../topic,./common,./Selector,./Manager".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){j.isAsync||b(0,function(){require(["dojo/dnd/AutoSource","dojo/dnd/Target"])});var t=k("dojo.dnd.Source",
n,{isSource:!0,horizontal:!1,copyOnly:!1,selfCopy:!1,selfAccept:!0,skipForm:!1,withHandles:!1,autoSync:!1,delay:0,accept:["text"],generateText:!0,constructor:function(b,c){e.mixin(this,e.mixin({},c));var f=this.accept;if(f.length){this.accept={};for(var d=0;d<f.length;++d)this.accept[f[d]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.before=!0;this._lastY=this._lastX=0;this.sourceState="";this.isSource&&h.add(this.node,"dojoDndSource");this.targetState="";this.accept&&
h.add(this.node,"dojoDndTarget");this.horizontal&&h.add(this.node,"dojoDndHorizontal");this.topics=[a.subscribe("/dnd/source/over",e.hitch(this,"onDndSourceOver")),a.subscribe("/dnd/start",e.hitch(this,"onDndStart")),a.subscribe("/dnd/drop",e.hitch(this,"onDndDrop")),a.subscribe("/dnd/cancel",e.hitch(this,"onDndCancel"))]},checkAcceptance:function(a,b){if(this==a)return!this.copyOnly||this.selfAccept;for(var c=0;c<b.length;++c){for(var f=a.getItem(b[c].id).type,d=!1,e=0;e<f.length;++e)if(f[e]in this.accept){d=
!0;break}if(!d)return!1}return!0},copyState:function(a,b){if(a)return!0;2>arguments.length&&(b=this==r.manager().target);if(b){if(this.copyOnly)return this.selfCopy}else return this.copyOnly;return!1},destroy:function(){t.superclass.destroy.call(this);l.forEach(this.topics,function(a){a.remove()});this.targetAnchor=null},onMouseMove:function(a){if(!(this.isDragging&&"Disabled"==this.targetState)){t.superclass.onMouseMove.call(this,a);var b=r.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&
(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)){var c=this.getSelectedNodes();c.length&&b.startDrag(this,c,this.copyState(f.getCopyKeyState(a),!0))}if(this.isDragging){c=!1;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current)this.targetBox=d.position(this.current,!0);c=this.horizontal?a.pageX-this.targetBox.x<this.targetBox.w/2==d.isBodyLtr(this.current.ownerDocument):a.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!=this.targetAnchor||
c!=this.before)this._markTargetAnchor(c),b.canDrop(!this.current||b.source!=this||!(this.current.id in this.selection))}}},onMouseDown:function(a){if(!this.mouseDown&&this._legalMouseDown(a)&&(!this.skipForm||!f.isFormElement(a)))this.mouseDown=!0,this._lastX=a.pageX,this._lastY=a.pageY,t.superclass.onMouseDown.call(this,a)},onMouseUp:function(a){if(this.mouseDown)this.mouseDown=!1,t.superclass.onMouseUp.call(this,a)},onDndSourceOver:function(a){this!==a?(this.mouseDown=!1,this.targetAnchor&&this._unmarkTargetAnchor()):
this.isDragging&&(a=r.manager(),a.canDrop("Disabled"!=this.targetState&&(!this.current||a.source!=this||!(this.current.id in this.selection))))},onDndStart:function(a,b,c){this.autoSync&&this.sync();this.isSource&&this._changeState("Source",this==a?c?"Copied":"Moved":"");this._changeState("Target",this.accept&&this.checkAcceptance(a,b)?"":"Disabled");this==a&&r.manager().overSource(this);this.isDragging=!0},onDndDrop:function(a,b,c,f){if(this==f)this.onDrop(a,b,c);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor)this._unmarkTargetAnchor(),
this.targetAnchor=null;this.before=!0;this.mouseDown=this.isDragging=!1;this._changeState("Source","");this._changeState("Target","")},onDrop:function(a,b,c){if(this!=a)this.onDropExternal(a,b,c);else this.onDropInternal(b,c)},onDropExternal:function(a,b,c){var d=this._normalizedCreator;this._normalizedCreator=this.creator?function(b,c){return d.call(this,a.getItem(b.id).data,c)}:c?function(b){var c=a.getItem(b.id),b=b.cloneNode(!0);b.id=f.getUniqueId();return{node:b,data:c.data,type:c.type}}:function(b){var c=
a.getItem(b.id);a.delItem(b.id);return{node:b,data:c.data,type:c.type}};this.selectNone();!c&&!this.creator&&a.selectNone();this.insertNodes(!0,b,this.before,this.current);!c&&this.creator&&a.deleteSelectedNodes();this._normalizedCreator=d},onDropInternal:function(a,b){var c=this._normalizedCreator;if(!(this.current&&this.current.id in this.selection)){if(b)this._normalizedCreator=this.creator?function(a,b){return c.call(this,this.getItem(a.id).data,b)}:function(a){var b=this.getItem(a.id),a=a.cloneNode(!0);
a.id=f.getUniqueId();return{node:a,data:b.data,type:b.type}};else{if(!this.current)return;this._normalizedCreator=function(a){var b=this.getItem(a.id);return{node:a,data:b.data,type:b.type}}}this._removeSelection();this.insertNodes(!0,a,this.before,this.current);this._normalizedCreator=c}},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){t.superclass.onOverEvent.call(this);r.manager().overSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOver()},
onOutEvent:function(){t.superclass.onOutEvent.call(this);r.manager().outSource(this);if(this.isDragging&&"Disabled"!=this.targetState)this.onDraggingOut()},_markTargetAnchor:function(a){if(!(this.current==this.targetAnchor&&this.before==a))this.targetAnchor&&this._removeItemClass(this.targetAnchor,this.before?"Before":"After"),this.targetAnchor=this.current,this.targetBox=null,this.before=a,this.targetAnchor&&this._addItemClass(this.targetAnchor,this.before?"Before":"After")},_unmarkTargetAnchor:function(){if(this.targetAnchor)this._removeItemClass(this.targetAnchor,
this.before?"Before":"After"),this.targetBox=this.targetAnchor=null,this.before=!0},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(a){if("touchstart"!=a.type&&!c.isLeft(a))return!1;if(!this.withHandles)return!0;for(a=a.target;a&&a!==this.node;a=a.parentNode){if(h.contains(a,"dojoDndHandle"))return!0;if(h.contains(a,"dojoDndItem")||h.contains(a,"dojoDndIgnore"))break}return!1}});return t})},"dojo/dnd/Selector":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../dom,../dom-construct,../mouse,../_base/NodeList,../on,../touch,./common,./Container".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){var t=m("dojo.dnd.Selector",r,{constructor:function(b,c){c||(c={});this.singular=c.singular;this.autoSync=c.autoSync;this.selection={};this.anchor=null;this.simpleSelection=!1;this.events.push(a(this.node,f.press,e.hitch(this,"onMouseDown")),a(this.node,f.release,e.hitch(this,"onMouseUp")))},singular:!1,getSelectedNodes:function(){var a=new b,c=n._empty,f;for(f in this.selection)f in c||a.push(h.byId(f));return a},selectNone:function(){return this._removeSelection()._removeAnchor()},
selectAll:function(){this.forInItems(function(a,b){this._addItemClass(h.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var a=n._empty,b;for(b in this.selection)if(!(b in a)){var c=h.byId(b);this.delItem(b);d.destroy(c)}this.anchor=null;this.selection={};return this},forInSelectedItems:function(a,b){var b=b||j.global,c=this.selection,f=n._empty,d;for(d in c)d in f||a.call(b,this.getItem(d),d,this)},sync:function(){t.superclass.sync.call(this);
if(this.anchor&&!this.getItem(this.anchor.id))this.anchor=null;var a=[],b=n._empty,c;for(c in this.selection)c in b||this.getItem(c)||a.push(c);l.forEach(a,function(a){delete this.selection[a]},this);return this},insertNodes:function(a,b,c,f){var d=this._normalizedCreator;this._normalizedCreator=function(b,c){var f=d.call(this,b,c);a?(this.anchor?this.anchor!=f.node&&(this._removeItemClass(f.node,"Anchor"),this._addItemClass(f.node,"Selected")):(this.anchor=f.node,this._removeItemClass(f.node,"Selected"),
this._addItemClass(this.anchor,"Anchor")),this.selection[f.node.id]=1):(this._removeItemClass(f.node,"Selected"),this._removeItemClass(f.node,"Anchor"));return f};t.superclass.insertNodes.call(this,b,c,f);this._normalizedCreator=d;return this},destroy:function(){t.superclass.destroy.call(this);this.selection=this.anchor=null},onMouseDown:function(a){this.autoSync&&this.sync();if(this.current)if(!this.singular&&!n.getCopyKeyState(a)&&!a.shiftKey&&this.current.id in this.selection)this.simpleSelection=
!0,c.isLeft(a)&&k.stop(a);else{if(!this.singular&&a.shiftKey){n.getCopyKeyState(a)||this._removeSelection();var b=this.getAllNodes();if(b.length){if(!this.anchor)this.anchor=b[0],this._addItemClass(this.anchor,"Anchor");this.selection[this.anchor.id]=1;if(this.anchor!=this.current){for(var f=0,d;f<b.length&&!(d=b[f],d==this.anchor||d==this.current);++f);for(++f;f<b.length;++f){d=b[f];if(d==this.anchor||d==this.current)break;this._addItemClass(d,"Selected");this.selection[d.id]=1}this._addItemClass(this.current,
"Selected");this.selection[this.current.id]=1}}}else if(this.singular)this.anchor==this.current?n.getCopyKeyState(a)&&this.selectNone():(this.selectNone(),this.anchor=this.current,this._addItemClass(this.anchor,"Anchor"),this.selection[this.current.id]=1);else if(n.getCopyKeyState(a))this.anchor==this.current?(delete this.selection[this.anchor.id],this._removeAnchor()):this.current.id in this.selection?(this._removeItemClass(this.current,"Selected"),delete this.selection[this.current.id]):(this.anchor&&
(this._removeItemClass(this.anchor,"Anchor"),this._addItemClass(this.anchor,"Selected")),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1);else if(!(this.current.id in this.selection))this.selectNone(),this.anchor=this.current,this._addItemClass(this.current,"Anchor"),this.selection[this.current.id]=1;k.stop(a)}},onMouseUp:function(){if(this.simpleSelection&&(this.simpleSelection=!1,this.selectNone(),this.current))this.anchor=this.current,this._addItemClass(this.anchor,
"Anchor"),this.selection[this.current.id]=1},onMouseMove:function(){this.simpleSelection=!1},onOverEvent:function(){this.onmousemoveEvent=a(this.node,f.move,e.hitch(this,"onMouseMove"))},onOutEvent:function(){this.onmousemoveEvent&&(this.onmousemoveEvent.remove(),delete this.onmousemoveEvent)},_removeSelection:function(){var a=n._empty,b;for(b in this.selection)if(!(b in a)){var c=h.byId(b);c&&this._removeItemClass(c,"Selected")}this.selection={};return this},_removeAnchor:function(){if(this.anchor)this._removeItemClass(this.anchor,
"Anchor"),this.anchor=null;return this}});return t})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(l,m,k){var m=m.NodeList,j=m.prototype;j.connect=m._adaptAsForEach(function(){return l.connect.apply(this,arguments)});j.coords=m._adaptAsMap(l.coords);m.events="blur,focus,change,click,error,keydown,keypress,keyup,load,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,submit".split(",");k.forEach(m.events,function(e){var h=
"on"+e;j[h]=function(d,c){return this.connect(h,d,c)}});return l.NodeList=m})},"dojo/dnd/Container":function(){define("../_base/array,../_base/declare,../_base/event,../_base/kernel,../_base/lang,../_base/window,../dom,../dom-class,../dom-construct,../Evented,../has,../on,../query,../ready,../touch,./common".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){m=m("dojo.dnd.Container",a,{skipForm:!1,allowNested:!1,constructor:function(a,b){this.node=d.byId(a);b||(b={});this.creator=b.creator||null;
this.skipForm=b.skipForm;this.parent=b.dropParent&&d.byId(b.dropParent);this.map={};this.current=null;this.containerState="";c.add(this.node,"dojoDndContainer");(!b||!b._skipStartup)&&this.startup();this.events=[n(this.node,q.over,e.hitch(this,"onMouseOver")),n(this.node,q.out,e.hitch(this,"onMouseOut")),n(this.node,"dragstart",e.hitch(this,"onSelectStart")),n(this.node,"selectstart",e.hitch(this,"onSelectStart"))]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=
b},delItem:function(a){delete this.map[a]},forInItems:function(a,b){var b=b||j.global,c=this.map,f=o._empty,d;for(d in c)d in f||a.call(b,c[d],d,this);return b},clearItems:function(){this.map={}},getAllNodes:function(){return r((this.allowNested?"":"> ")+".dojoDndItem",this.parent)},sync:function(){var a={};this.getAllNodes().forEach(function(b){if(b.id){var c=this.getItem(b.id);if(c){a[b.id]=c;return}}else b.id=o.getUniqueId();var c=b.getAttribute("dndType"),f=b.getAttribute("dndData");a[b.id]={data:f||
b.innerHTML,type:c?c.split(/\s*,\s*/):["text"]}},this);this.map=a;return this},insertNodes:function(a,b,c){if(this.parent.firstChild)if(b){if(!c)c=this.parent.firstChild}else{if(c)c=c.nextSibling}else c=null;var f;if(c)for(b=0;b<a.length;++b)f=this._normalizedCreator(a[b]),this.setItem(f.node.id,{data:f.data,type:f.type}),c.parentNode.insertBefore(f.node,c);else for(b=0;b<a.length;++b)f=this._normalizedCreator(a[b]),this.setItem(f.node.id,{data:f.data,type:f.type}),this.parent.appendChild(f.node);
return this},destroy:function(){l.forEach(this.events,function(a){a.remove()});this.clearItems();this.node=this.parent=this.current=null},markupFactory:function(a,b,c){a._skipStartup=!0;return new c(b,a)},startup:function(){if(!this.parent&&(this.parent=this.node,"table"==this.parent.tagName.toLowerCase())){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length)this.parent=a[0]}this.defaultCreator=o._defaultCreator(this.parent);this.sync()},onMouseOver:function(a){for(var b=a.relatedTarget;b&&
!(b==this.node);)try{b=b.parentNode}catch(c){b=null}b||(this._changeState("Container","Over"),this.onOverEvent());b=this._getChildByEvent(a);if(this.current!=b)this.current&&this._removeItemClass(this.current,"Over"),b&&this._addItemClass(b,"Over"),this.current=b},onMouseOut:function(a){for(a=a.relatedTarget;a;){if(a==this.node)return;try{a=a.parentNode}catch(b){a=null}}if(this.current)this._removeItemClass(this.current,"Over"),this.current=null;this._changeState("Container","");this.onOutEvent()},
onSelectStart:function(a){(!this.skipForm||!o.isFormElement(a))&&k.stop(a)},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,b){var f="dojoDnd"+a,d=a.toLowerCase()+"State";c.replace(this.node,f+b,f+this[d]);this[d]=b},_addItemClass:function(a,b){c.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){c.remove(a,"dojoDndItem"+b)},_getChildByEvent:function(a){if(a=a.target)for(var b=a.parentNode;b;a=b,b=a.parentNode)if((b==this.parent||this.allowNested)&&c.contains(a,"dojoDndItem"))return a;
return null},_normalizedCreator:function(a,b){var f=(this.creator||this.defaultCreator).call(this,a,b);if(!e.isArray(f.type))f.type=["text"];if(!f.node.id)f.node.id=o.getUniqueId();c.add(f.node,"dojoDndItem");return f}});o._createNode=function(a){return!a?o._createSpan:function(c){return b.create(a,{innerHTML:c})}};o._createTrTd=function(a){var c=b.create("tr");b.create("td",{innerHTML:a},c);return c};o._createSpan=function(a){return b.create("span",{innerHTML:a})};o._defaultCreatorNodes={ul:"li",
ol:"li",div:"div",p:"div"};o._defaultCreator=function(a){var a=a.tagName.toLowerCase(),b="tbody"==a||"thead"==a?o._createTrTd:o._createNode(o._defaultCreatorNodes[a]);return function(a,c){var f=a&&e.isObject(a),d,s;f&&a.tagName&&a.nodeType&&a.getAttribute?(d=a.getAttribute("dndData")||a.innerHTML,f=(f=a.getAttribute("dndType"))?f.split(/\s*,\s*/):["text"],s=a):(d=f&&a.data?a.data:a,f=f&&a.type?a.type:["text"],s=("avatar"==c?o._createSpan:b)(""+d));if(!s.id)s.id=o.getUniqueId();return{node:s,data:d,
type:f}}};return m})},"dojo/dnd/Manager":function(){define("../_base/array,../_base/declare,../_base/event,../_base/lang,../_base/window,../dom-class,../Evented,../has,../keys,../on,../topic,../touch,./common,./autoscroll,./Avatar".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){var o=m("dojo.dnd.Manager",[d],{constructor:function(){this.source=this.avatar=null;this.nodes=[];this.copy=!0;this.target=null;this.canDropFlag=!1;this.events=[]},OFFSET_X:c("touch")?0:16,OFFSET_Y:c("touch")?-64:16,overSource:function(a){if(this.avatar)this.target=
a&&"Disabled"!=a.targetState?a:null,this.canDropFlag=Boolean(this.target),this.avatar.update();f.publish("/dnd/source/over",a)},outSource:function(a){if(this.avatar){if(this.target==a)this.target=null,this.canDropFlag=!1,this.avatar.update(),f.publish("/dnd/source/over",null)}else f.publish("/dnd/source/over",null)},startDrag:function(b,c,d){t.autoScrollStart(e.doc);this.source=b;this.nodes=c;this.copy=Boolean(d);this.avatar=this.makeAvatar();e.body().appendChild(this.avatar.node);f.publish("/dnd/start",
b,c,this.copy);this.events=[a(e.doc,n.move,j.hitch(this,"onMouseMove")),a(e.doc,n.release,j.hitch(this,"onMouseUp")),a(e.doc,"keydown",j.hitch(this,"onKeyDown")),a(e.doc,"keyup",j.hitch(this,"onKeyUp")),a(e.doc,"dragstart",k.stop),a(e.body(),"selectstart",k.stop)];h.add(e.body(),"dojoDnd"+(d?"Copy":"Move"))},canDrop:function(a){a=Boolean(this.target&&a);if(this.canDropFlag!=a)this.canDropFlag=a,this.avatar.update()},stopDrag:function(){h.remove(e.body(),["dojoDndCopy","dojoDndMove"]);l.forEach(this.events,
function(a){a.remove()});this.events=[];this.avatar.destroy();this.source=this.target=this.avatar=null;this.nodes=[]},makeAvatar:function(){return new q(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(a){var b=this.avatar;if(b)t.autoScrollNodes(a),b=b.node.style,b.left=a.pageX+this.OFFSET_X+"px",b.top=a.pageY+this.OFFSET_Y+"px",b=Boolean(this.source.copyState(r.getCopyKeyState(a))),this.copy!=b&&this._setCopyStatus(b);c("touch")&&a.preventDefault()},onMouseUp:function(a){if(this.avatar){if(this.target&&
this.canDropFlag){var b=Boolean(this.source.copyState(r.getCopyKeyState(a)));f.publish("/dnd/drop/before",this.source,this.nodes,b,this.target,a);f.publish("/dnd/drop",this.source,this.nodes,b,this.target,a)}else f.publish("/dnd/cancel");this.stopDrag()}},onKeyDown:function(a){if(this.avatar)switch(a.keyCode){case b.CTRL:a=Boolean(this.source.copyState(!0));this.copy!=a&&this._setCopyStatus(a);break;case b.ESCAPE:f.publish("/dnd/cancel"),this.stopDrag()}},onKeyUp:function(a){this.avatar&&a.keyCode==
b.CTRL&&(a=Boolean(this.source.copyState(!1)),this.copy!=a&&this._setCopyStatus(a))},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();h.replace(e.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"))}});r._manager=null;o.manager=r.manager=function(){if(!r._manager)r._manager=new o;return r._manager};return o})},"dojo/dnd/Avatar":function(){define("../_base/declare,../_base/window,../dom,../dom-attr,../dom-class,../dom-construct,../hccss,../query".split(","),
function(l,m,k,j,e,h,d,c){return l("dojo.dnd.Avatar",null,{constructor:function(b){this.manager=b;this.construct()},construct:function(){var b=h.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),a=this.manager.source,c,e=h.create("tbody",null,b),r=h.create("tr",null,e),t=h.create("td",null,r),q=Math.min(5,this.manager.nodes.length),o=0;d("highcontrast")&&h.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},t);h.create("span",{innerHTML:a.generateText?
this._generateText():""},t);for(j.set(r,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});o<q;++o)a.creator?c=a._normalizedCreator(a.getItem(this.manager.nodes[o].id).data,"avatar").node:(c=this.manager.nodes[o].cloneNode(!0),"tr"==c.tagName.toLowerCase()&&(r=h.create("table"),h.create("tbody",null,r).appendChild(c),c=r)),c.id="",r=h.create("tr",null,e),t=h.create("td",null,r),t.appendChild(c),j.set(r,{"class":"dojoDndAvatarItem",style:{opacity:(9-o)/10}});this.node=b},destroy:function(){h.destroy(this.node);
this.node=!1},update:function(){e.toggle(this.node,"dojoDndAvatarCanDrop",this.manager.canDropFlag);if(d("highcontrast")){var b=k.byId("a11yIcon"),a="+";this.manager.canDropFlag&&!this.manager.copy?a="< ":!this.manager.canDropFlag&&!this.manager.copy?a="o":this.manager.canDropFlag||(a="x");b.innerHTML=a}c("tr.dojoDndAvatarHeader td span"+(d("highcontrast")?" span":""),this.node).forEach(function(a){a.innerHTML=this.manager.source.generateText?this._generateText():""},this)},_generateText:function(){return this.manager.nodes.length.toString()}})})},
"js/webext/widgets/table/TreeTable":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/sniff,dojo/_base/xhr,dojo/aspect,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/dom-style,dojo/json,dojo/on,dojo/dnd/Manager,dojo/dnd/Source,dojo/query,dojo/io-query,dojo/topic,dojo/window,dojo/Deferred,dijit/_TemplatedMixin,dijit/_Widget,dijit/_WidgetBase,dijit/registry,dojox/html/entities,js/util/blocker/_BlockerMixin,js/webext/widgets/table/_TableFilteringMixin,js/webext/widgets/table/_TableSortingMixin,js/webext/widgets/table/_TableSelectableMixin,js/webext/widgets/table/_TableConfigMixin,js/webext/widgets/table/_TableHeaderFooterMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L){return m([C,y,E,D,G,N,L,K],{templateString:'<div style="position: relative;"><div data-dojo-attach-point="aboveTreeOptions" class="aboveTreeOptions"><div data-dojo-attach-point="tableTitleAttach" class="tableTitle"></div><div data-dojo-attach-point="expandCollapseAttach" class="inlineBlock expandCollapse"></div><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div></div><div data-dojo-attach-point="belowTreeOptions"></div><div class="selectableTable webextTable treeTable" data-dojo-attach-point="tableContainerAttach"><table data-dojo-attach-point="tableAttach"><thead data-dojo-attach-point="theadNode"><tr data-dojo-attach-point="theadAttach"></tr><tr data-dojo-attach-point="filterAttach" class="noPrint tableFilterRow"></tr><tr data-dojo-attach-point="theadSizerAttach"></tr></thead><tr data-dojo-attach-point="tbodySizerAttach"></tr><tfoot data-dojo-attach-point="tfootAttach" class="noPrint"></tfoot></table><div data-dojo-attach-point="footerSizerAttach"></div></div></div>',
serverSideProcessing:!0,hideFooter:!1,hideFooterLinks:!1,hidePagination:!0,allowHeaderLocking:!0,rowObjects:null,rowObjectList:null,rowPadding:25,idAttribute:"id",actionsTimer:null,draggable:!1,hideExpandCollapse:!1,totalRecords:void 0,rowsPerPage:10,pageNumber:1,tableTitle:"",getChildUrl:null,xhrMethod:"GET",collapseImageClass:"collapseImage",expandImageClass:"expandImage",expandCollapseAllLinkClass:"linkPointer",expandRoots:!1,cachedData:null,_checkHeaderFooterLocksTimeoutId:null,_scrollListener:null,
_resizeListener:null,constructor:function(){this.rowObjects=[];this.rowObjectList=[];this.expandedNodeList=[];this.actionsTimer=0},postCreate:function(){this.inherited(arguments);if(!this.noDataMessage)this.noDataMessage=i18n("No records found.");this.initSelectableMixin();this.initFilteringMixin();this.initConfigMixin();this.domNode.draggable=!1;this.tableTitleAttach.textContent=this.tableTitle;this.hideExpandCollapse||(this._addExpandCollapseLinks(),n.set(this.aboveTreeOptions,{minHeight:"2em"}));
this.drawHeadings();this["class"]&&b.add(this.tableAttach,this["class"]);this.style&&n.set(this.tableAttach,this.style);this.loadTable();this.attachHeaderFooterLockingEvents();null!==util.getIE()&&b.add(this.domNode,"ie"+util.getIE())},getTopLevelRowObjects:function(){return l.filter(this.rowObjectList,function(a){return!a.parent})},processData:function(a){return a},loadTable:function(){var a=this;a.pageNumber=parseInt(a.pageNumber,10);a.saveCurrentSettings();if(!a.serverSideProcessing&&a.cachedData)a.showTable(a.cachedData);
else if(void 0!==a.data)a.cachedData=a.data,a.showTable(a.cachedData);else if(void 0!==a.getData)a.cachedData=a.getData(),a.showTable(a.cachedData);else{a.block();var b={url:a.url,handleAs:"json",load:function(b,c){a.processXhrResponse&&a.processXhrResponse(b);if(!a.serverSideProcessing)a.cachedData=b;a.unblock();var f=c.xhr.getResponseHeader("Content-Range");if(b.records&&0===b.records.length&&1!==a.pageNumber)a.pageNumber--,a.loadTable();else if(a.serverSideProcessing&&f){var d=f.substring(f.indexOf("/")+
1),o=f.substring(0,f.indexOf("-")),f=f.substring(f.indexOf("-")+1,f.indexOf("/"));Number(f)===Number(o)&&1!==a.pageNumber?(a.pageNumber--,a.loadTable()):(b={records:b,totalRecords:Number(d)},a.showTable(b))}else a.showTable(b)},error:function(b){a.unblock();a.showError(b)}};if("GET"===a.xhrMethod.toUpperCase())b.content=a._getQueryData();else if("POST"===a.xhrMethod.toUpperCase()){b.postData=r.stringify({expandedNodeList:a.expandedNodeList});b.headers={"Content-Type":"application/json"};var c=a._getQueryData();
c[bootstrap.expectedSessionCookieName]=util.getCookie(bootstrap.expectedSessionCookieName);b.url=b.url+"?"+u.objectToQuery(c)}a.tableDataDeferred=h(a.xhrMethod,b);a.tableDataDeferred.addBoth(function(){a.tableDataDeferred=null})}},_getQueryData:function(){var a=this.getFilterData(this.baseFilters);this.queryData&&j.mixin(a,this.queryData);return a},redraw:function(){if(this.serverSideProcessing)this.cachedData=null,this.rowObjects=[],this.rowObjectList=[],this.totalRecords=void 0;this.loadTable()},
refresh:function(){this.cachedData=void 0;this.rowObjects=[];this.rowObjectList=[];this.setCheckboxState(!1);this.loadTable()},_refreshRowChildren:function(a){this._emptyRow(a);this.getNewChildren(a)},refreshRowChildrenForItem:function(a){(a=this._getRowObjectForItem(a))&&this._refreshRowChildren(a)},refreshSiblingsForItem:function(a){var a=this._getRowObjectForItem(a),b;if(a)b=a.parent;b?this._refreshRowChildren(b):this.loadTable()},_emptyRow:function(a){var b=this;l.forEach(a.children,function(a){b._emptyRow(a);
b._deleteRowOnly(a)});a.children=[];a.item.children=[]},_deleteRowOnly:function(a){a.domNode&&(l.forEach(A.findWidgets(a.domNode),this._destroyWidget),f.destroy(a.domNode));delete this.rowObjects[a.id];var b=l.indexOf(this.rowObjectList,a);-1!==b&&this.rowObjectList.splice(b,1);a.parent&&!this.shouldShowCollapseDom(a.parent)&&l.forEach(a.parent.collapseDoms,function(a){n.set(a,"visibility","hidden")})},showError:function(a){f.empty(this.filterAttach);var b=f.create("tr"),c=f.create("td");c.className=
"webextTableFooter";c.colSpan=this.columns.length;this.draggable&&c.colSpan++;var d=f.create("div"),o=f.create("span"),e=f.create("br"),n=f.create("span");o.innerHTML=i18n("An error has occurred.");o.style.fontSize="medium";if(a.responseText)n.innerHTML=i18n(a.responseText),n.style.fontSize="medium";d.appendChild(o);d.appendChild(e);d.appendChild(n);c.appendChild(d);b.appendChild(c);this.tfootAttach.appendChild(b)},showTable:function(a){var c=this,a=c.processData(a);c.tbody&&(c.dndContainer&&c.dndContainer.destroy(),
c.tableAttach.removeChild(c.tbody),l.forEach(A.findWidgets(c.tbody),c._destroyWidget));c.tbody=f.create("tbody",{className:"treeTable-body"});if(c.draggable)c.dndContainer=new o(c.tbody,{withHandles:!0,copyOnly:c.copyOnly,onSelectStart:function(){},creator:function(a,b){var d;if("avatar"===b){d=1;c.selectable&&d++;var o=f.create("tr",{innerHTML:a}).children[d];d=this.defaultCreator.apply(this,arguments);d.node=f.create("span",{innerHTML:o.innerHTML})}else d=this.defaultCreator.apply(this,arguments);
return d}}),d.around(c.dndContainer,"onDndDrop",function(a){return function(b,f,d,o){var e=b.before;c.suppressDefaultOnDrop?a.apply(this,[b,[],d,o]):a.apply(this,arguments);var n=[],s=null;l.forEach(c.rowObjectList,function(a){l.forEach(f,function(b){a.domNode===b&&n.push(a.item)});if(a.domNode===o.current)c._expandAllParents(a),s=a.item});c.onDrop(n,s,d,e);c.lastCurrentDom=null;c.lastBefore=null}}),d.after(c.dndContainer,"onDndStart",function(){l.forEach(s("tr.dojoDndAvatarHeader td"),function(a){if(1===
a.children.length){var b="Ctrl";e("mac")&&(b="&#8984; Cmd");f.create("div",{innerHTML:i18n("(Hold %s to copy)",b),className:"inlineBlock dndCopyHint"},a)}});var a=q.manager(),b=[];if(a.source===c.dndContainer)l.forEach(a.nodes,function(a){(a=c._getRowObjectForDomNode(a))&&b.push(a.item)}),a.sourceItems=b}),d.after(c.dndContainer,"onMouseMove",function(){if(c.dndContainer.isDragging){var a=q.manager(),b=c.dndContainer.current,f=c.dndContainer.before;if(c.lastCurrentDom!==b||c.lastBefore!==f)c.lastCurrentDom=
b,c.lastBefore=f,(b=c._getRowObjectForDomNode(b))&&c.canDropOnItem&&!c.canDropOnItem(a.sourceItems,b.item)&&a.canDrop(!1)}}),c.dndStartSubscription=w.subscribe("/dnd/start",function(){c.canDropOnItem&&setTimeout(function(){var a=q.manager(),f=[],d=[];l.forEach(c.rowObjectList,function(o){o.item&&o.domNode&&(b.remove(o.domNode,"invalidDropTarget"),b.remove(o.domNode,"validDropTarget"),c.canDropOnItem(a.sourceItems,o.item)?f.push(o.domNode):d.push(o.domNode))});0<d.length&&(l.forEach(f,function(a){b.add(a,
"validDropTarget")}),l.forEach(d,function(a){b.add(a,"invalidDropTarget")}))},1)});var n=[];if(j.isArray(a))n=c._initializeRowObjects(a),a=c.getDisplayData(n),c.totalRecords=a.totalRecords,n=a.records;else{if(void 0!==a.totalRecords&&0<=a.totalRecords)c.totalRecords=a.totalRecords;n=c._initializeRowObjects(a.records);if(!c.serverSideProcessing)a=c.getDisplayData(n),c.totalRecords=a.totalRecords,n=a.records}c._initializeRowObjectCollections(n);l.forEach(n,function(a){c.createRow(a);c.expandRoots&&
c._expand(a)});f.place(c.tbody,c.tfootAttach,"before");c.showFooter();l.forEach(c.expandedNodeList,function(a){if(a=c.rowObjects[a])a.domNode||!a.parent?c._expand(a):a.expanded=!0});c.scheduleCheckHeaderFooterLocks();c.onDisplayTable()},_initializeRowObjects:function(a,b){var c=this,f=[];l.forEach(a,function(a){var d=c.createTreeNode(a,b);f.push(d);d.children=c._initializeRowObjects(c.getItemChildren(a),d)});return f},_initializeRowObjectCollections:function(a){var b=this;b.rowObjects={};b.rowObjectList=
[];l.forEach(a,function(a){b._populateForRowObjectRecursive(a)})},_populateForRowObject:function(a){this.rowObjects[a.id]=a;this.rowObjectList.push(a)},_populateForRowObjectRecursive:function(a){var b=this;b._populateForRowObject(a);l.forEach(a.children,function(a){b._populateForRowObjectRecursive(a)})},createTreeNode:function(a,b){var c;c=0;var f=this.getTreeNodeId(a),d=this.hasChildren(a);b&&(f=b.id+"/"+f,c=b.level+1);c={id:f,level:c,expanded:!1,item:a,parent:b,children:[],domNode:null,hasChildren:d,
retrievedChildren:!1};b&&b.children.push(c);return c},getTreeNodeId:function(a){return a[this.idAttribute]},getDisplayData:function(a){var b={},a=this.filter(a);this.sort(a);var c=a.length;if(!this.hidePagination){var f=(this.pageNumber-1)*this.rowsPerPage;if(c<=f&&0<f)console.error("Page number out of range: Start index "+f+" is higher than "+c),this.pageNumber=Math.ceil(c/this.rowsPerPage),f=(this.pageNumber-1)*this.rowsPerPage;a=a.slice(f,f+this.rowsPerPage)}b.records=a;b.totalRecords=c;return b},
getItems:function(){var a=[];l.forEach(this.rowObjectList,function(b){!1!==b.visible&&a.push(b.item)});return a},getItemChildren:function(a){return a.children},getAllRowObjectDescendants:function(a){var b=this,c=[];l.forEach(a.children,function(a){c.push(a);c=c.concat(b.getAllRowObjectDescendants(a))});return c},setItemChildren:function(a,b){a.children=b},_getRowObjectForItem:function(a){var b;l.forEach(this.rowObjectList,function(c){c.item===a&&(b=c)});return b},_getRowObjectForDomNode:function(a){var b;
l.forEach(this.rowObjectList,function(c){c.domNode===a&&(b=c)});return b},_checkExpandCollapse:function(a){a.expanded?this._collapse(a):this._expand(a)},expand:function(a,b){var c=this,f=c._getRowObjectForItem(a);f&&(c._expand(f,b),b&&l.forEach(c.getItemChildren(a),function(a){c.expand(a,!0)}))},_expand:function(a,b){a.expanded||(this._toggle(a,b),this.scheduleCheckHeaderFooterLocks())},collapse:function(a){(a=this._getRowObjectForItem(a))&&this._collapse(a)},_collapse:function(a){a.expanded&&(this._toggle(a),
this.scheduleCheckHeaderFooterLocks())},_expandAllParents:function(a){a.parent&&this._expandAllParents(a.parent);this._expand(a)},_collapseAll:function(){var a=this;l.forEach(a.getItems(),function(b){a.collapse(b)})},_addExpandCollapseLinks:function(){var b=this;f.empty(b.expandCollapseAttach);var c=f.create("a",{innerHTML:i18n("Expand All"),style:"margin-"+(a.isBodyLtr()?"right":"left")+":10px;",className:b.expandCollapseAllLinkClass});c.onclick=function(){l.forEach(b.getItems(),function(a){b.expand(a,
!0)})};var d=f.create("a",{innerHTML:i18n("Collapse All"),className:b.expandCollapseAllLinkClass});a.isBodyLtr()?n.set(d,"float","none"):n.set(d,"float","left");d.onclick=function(){b._collapseAll()};f.place(c,b.expandCollapseAttach);f.place(d,b.expandCollapseAttach)},_toggle:function(a,c){var f=this;a.expanded?(l.forEach(a.children,function(a){f.hideRow(a)}),b.contains(a.domNode,"collapsedRow")||(b.add(a.domNode,"collapsedRow"),a.hasChildren&&l.forEach(a.collapseDoms,function(a){b.add(a,f.expandImageClass);
b.remove(a,f.collapseImageClass)})),-1!==f.expandedNodeList.indexOf(a.id)&&util.removeFromArray(f.expandedNodeList,a.id)):f.hasAllChildren(a)?(l.forEach(a.children,function(a){if(!a.domNode&&(f.createRow(a),a.expanded))a.expanded=!1,a.visible=!0,f._expand(a);a.visible&&f.unhideRow(a);l.forEach(f.expandedNodeList,function(b){if(a.id===b)a.expanded=!1,f._expand(a)})}),a.domNode&&b.contains(a.domNode,"collapsedRow")&&(b.remove(a.domNode,"collapsedRow"),a.hasChildren&&l.forEach(a.collapseDoms,function(a){b.add(a,
f.collapseImageClass);b.remove(a,f.expandImageClass)})),-1===f.expandedNodeList.indexOf(a.id)&&f.expandedNodeList.push(a.id)):f.getNewChildren(a,c);a.expanded=!a.expanded;f.saveCurrentSettings()},hideRow:function(a){var c=this;null!==a.domNode&&(b.contains(a.domNode,"hidden")||b.add(a.domNode,"hidden"));l.forEach(a.children,function(a){c.hideRow(a)})},unhideRow:function(a){var c=this;a.domNode||c.createRow(a);b.contains(a.domNode,"hidden")&&b.remove(a.domNode,"hidden");a.expanded?(b.contains(a.domNode,
"collapsedRow")&&b.remove(a.domNode,"collapsedRow"),l.forEach(a.children,function(a){a.visible&&c.unhideRow(a)})):b.contains(a.domNode,"collapsedRow")||b.add(a.domNode,"collapsedRow")},createRow:function(a,d){var o=this,e=!0,s,h,q,r;if(d)q=d.insertSorted,r=d.insertFiltered;s=f.create("tr");a.matchesFilters&&b.add(s,"matchesFilters");o.applyRowStyle(a.item,s);o.own(t(s,"click",function(){o.selectRow(s)}),t(s,"dblclick",function(){o._toggle(a)}));b.add(s,"collapsedRow");o.draggable&&(o.canDragItem(a.item)?
(b.add(s,"dojoDndItem"),f.create("td",{innerHTML:"::","class":"dojoDndHandle"},s)):f.create("td",{innerHTML:""},s));var j=0;l.forEach(o.columns,function(d){if(0===j){h=f.create("td");s.appendChild(h);var q=f.create("div",{"class":"cellWrapper"},h);d["class"]&&b.add(h,d["class"]);void 0!==d.style&&n.set(h,d.style);var r="",u=q;if(e&&!d.beforeExpander||d.alwaysShowExpandArrow)u=f.create("div");void 0!==d.field&&(r=a.item[d.field]);void 0!==d.formatter&&(r=d.formatter(a.item,r,h));if(null!==r)if(r instanceof
B)r.placeAt(u);else if("object"===typeof r&&1===r.nodeType&&"object"===typeof r.style&&"object"===typeof r.ownerDocument)u.appendChild(r);else if(void 0!==r&&"object"!==typeof r)u.innerHTML=z.encode(""+r);var x="";if("string"===typeof r)x=r;else if(x=a.item.name,void 0===x&&a.item.serviceData)x=a.item.serviceData.name;c.set(u,"dir",util.getResolvedBTD(x));c.set(u,"align",util.getUIDirAlign());if(e&&!d.beforeExpander||d.alwaysShowExpandArrow){b.add(u,"inlineBlock expandableCellContent");d=f.create("div",
{"class":"inlineBlock collapseSpace"},q);if(!a.collapseDoms)a.collapseDoms=[];a.collapseDoms.push(d);r=o.expandImageClass;if(0<a.children.length||o.getChildUrl&&!1!==a.hasChildren){if(a.expanded)b.remove(s,"collapsedRow"),r=o.collapseImageClass;b.add(d,"linkPointer "+r);o.own(t(d,"click",function(b){o._checkExpandCollapse(a);k.stop(b)}))}else if(0!==a.level&&o.shouldShowCollapseDom(a.parent)&&0>a.parent.collapseDoms[0].className.indexOf("linkPointer"))x=a.parent.collapseDoms[0],r=o.collapseImageClass,
b.remove(s,"collapsedRow"),b.add(x,"linkPointer "+r),o.own(t(x,"click",function(b){o._checkExpandCollapse(a.parent);k.stop(b)}));q.appendChild(d);0<a.level&&n.set(q,{paddingLeft:a.level*o.rowPadding+"px"});q.appendChild(u);e=!1}1<h.colSpan&&(j=h.colSpan-1)}else j--});a.domNode=s;var u=function(a){return!a.expanded||0===a.children.length?a:u(a.children[a.children.length-1])},x=a.parent;x||(x={children:o.getTopLevelRowObjects()});x.hasChildren=!0;(0===x.children.length||-1===l.indexOf(x.children,a))&&
x.children.push(a);if(q)x.children=o.sort(x.children);if(r)x.children=o.filter(x.children);q=function(b){var c=b.children,f=l.indexOf(c,a);if(0===f)return b;if(-1===f)f=c.length;return u(c[f-1])}(x).domNode;o.draggable?o.dndContainer.insertNodes(!1,[s],!1,q):q?f.place(s,q,"after"):o.tbody.firstChild?f.place(s,o.tbody.firstChild,"before"):f.place(s,o.tbody);o.serverSideProcessing?a.visible=!0:!1===a.visible&&o.hideRow(a);return s},selectRow:function(a){if(this.selectedRow!==a)this.unselectRow(),b.add(a,
"selected"),this.selectedRow=a;this.onRowSelect(this._getRowObjectForDomNode(a).item,a)},unselectRow:function(){if(this.selectedRow)b.remove(this.selectedRow,"selected"),this.selectedRow=null},canDragItem:function(){return!0},onRowSelect:function(){},onDrop:function(){},onDndStart:function(){},onDisplayTable:function(){},applyRowStyle:function(){},_createImg:function(a,d,o){var e=f.create("img",{src:this._blankGif});o&&c.set(e,o);d.appendChild(e);b.add(d,"inlineBlock");a&&b.add(e,a);return e},destroy:function(){clearTimeout(this._checkHeaderFooterLocksTimeoutId);
this._scrollListener&&this._scrollListener.remove();this._resizeListener&&this._resizeListener.remove();this.dndContainer&&this.dndContainer.destroy();this.dndStartSubscription&&this.dndStartSubscription.remove();this.perPageSelect&&this.perPageSelect.destroy();this.pageBox&&this.pageBox.destroy();this.selectStore&&this.selectStore.destroy();this.filterWidget&&this.filterWidget.destroy();this.tableDataDeferred&&this.tableDataDeferred.cancel();this.domNode&&l.forEach(A.findWidgets(this.domNode),function(a){a.destroyRecursive?
a.destroyRecursive():a.destroy()});this.inherited(arguments)},print:function(){var a=this,b=function(){window.print()};if(a.hidePagination)b();else{var c=function(b,c,f){var d=b[c];b[c]=f;return a.hasOwnProperty(c)?function(){b[c]=d}:function(){delete b[c]}},f=[],d=function(){l.forEach(f,function(a){a()});a.loadTable()};try{f.push(c(a,"hidePagination",!0)),f.push(c(a,"rowsPerPage",99999)),f.push(c(a,"tableConfigKey",void 0)),a.loadTable(),a.tableDataDeferred?a.tableDataDeferred.addCallback(b):b()}finally{a.tableDataDeferred?
a.tableDataDeferred.addBoth(d):d()}}},hasChildren:function(a){var b=!0;!1===a.children&&(b=!1);return b},hasAllChildren:function(a){if(!a.hasChildren||!a.retrievedChildren&&0<a.children.length)a.retrievedChildren=!0;return a.retrievedChildren},getNewChildren:function(a,c){var f=this;if(f.getChildUrl){var d=f.getChildUrl(a.item);if(d){var o;f.getChildFilters&&(o=f.getChildFilters(a.item));o=f.getFilterData(o);var e;if(f.getChildOutputType)e=f.getChildOutputType(a.item);else if(f.queryData)e=f.queryData;
e&&(o=j.mixin(o,e));b.add(a.domNode,"loadingImage");f.queuedRequests&&f._set("queuedRequests",_.union(f.queuedRequests,[d]));h.get({url:d,content:o,handleAs:"json",load:function(d){f._emptyRow(a);a.children=f._initializeRowObjects(d,a);f.setItemChildren(a.item,d);l.forEach(a.children,function(a){f._populateForRowObjectRecursive(a);a.visible=!0});a.retrievedChildren=!0;f.serverSideProcessing||(f.sort(a.children),f.filter(a.children));0<d.length?(a.hasChildren=!0,l.forEach(a.collapseDoms,function(a){n.set(a,
"visibility","visible")}),a.expanded=!1,f.expand(a.item,c)):(a.hasChildren=!1,l.forEach(a.collapseDoms,function(a){n.set(a,"visibility","hidden")}));b.remove(a.domNode,"loadingImage")},error:function(a){f.showError(a)},handle:function(a,b){f.queuedRequests&&f._set("queuedRequests",_.without(f.queuedRequests,b.args.url))}})}}},shouldShowCollapseDom:function(a){return!!a&&!!a.collapseDoms&&0<a.collapseDoms.length&&a.hasChildren&&l.some(a.children,function(a){return!!a.visible})},_destroyWidget:function(a){a&&
(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())},attachHeaderFooterLockingEvents:function(){if(window&&11!==util.getIE()&&this.allowHeaderLocking)this._scrollListener=t(window,"scroll",this.scheduleCheckHeaderFooterLocks.bind(this)),this._resizeListener=t(window,"resize",function(){try{this._headerLocked&&(this._unlockHeaderAndCellSize(),this._lockHeaderAndCellSize()),this._footerLocked&&(this._unlockFooter(),this._lockFooter())}catch(a){this._scrollListener.remove()}}.bind(this))},
scheduleCheckHeaderFooterLocks:function(){if(null===this._checkHeaderFooterLocksTimeoutId)this._checkHeaderFooterLocksTimeoutId=setTimeout(function(){try{this._checkHeaderFooterLocks()}finally{this._checkHeaderFooterLocksTimeoutId=null}}.bind(this))},_checkHeaderFooterLocks:function(){var c=v.getBox(),f=a.position(this.tableContainerAttach),d=a.position(this.belowTreeOptions).y,f=d+f.h;10>d&&0<f?(b.contains(this.theadNode,"thead-fixed-position")||this._lockHeaderAndCellSize(),90>f?n.set(this.theadNode,
"top",f-90+"px"):n.set(this.theadNode,"top","")):b.contains(this.theadNode,"thead-fixed-position")&&this._unlockHeaderAndCellSize();f>c.h&&d<c.h?(b.contains(this.tfootAttach,"tfoot-fixed-position")||this._lockFooter(),c=c.h-d,95>c?n.set(this.tfootAttach,"bottom","-"+(95-c)+"px"):n.set(this.tfootAttach,"bottom","")):b.contains(this.tfootAttach,"tfoot-fixed-position")&&this._unlockFooter()},_lockHeaderAndCellSize:function(){if(11!==util.getIE()&&this.allowHeaderLocking){var c=a.position(this.tableContainerAttach);
n.set(this.theadNode,"width",c.w+"px");var c=a.position(this.theadNode),d=[];this.tbody&&s("tr:first-child > td",this.tbody).forEach(function(b){d.push(a.position(b))});b.add(this.theadNode,"thead-fixed-position");if(this.tbody){var o;for(o=0;o<d.length;o++){var e=d[o];f.create("td",{className:"table-sizer-cell",style:{width:e.w+"px",height:c.h+"px"}},this.tbodySizerAttach);f.create("td",{className:"table-sizer-cell",style:{width:e.w+"px"}},this.theadSizerAttach)}}this._headerLocked=!0}},_unlockHeaderAndCellSize:function(){b.remove(this.theadNode,
"thead-fixed-position");n.set(this.theadNode,"width","");f.empty(this.tbodySizerAttach);f.empty(this.theadSizerAttach);this._headerLocked=!1},_lockFooter:function(){if(11!==util.getIE()&&this.allowHeaderLocking){var c=a.position(this.tableAttach);n.set(this.tfootAttach,"width",c.w-1+"px");s("tfoot > tr:first-child > td:first-child",this.tableAttach).forEach(function(a){n.set(a,"min-width",c.w-5+"px")});b.add(this.tfootAttach,"tfoot-fixed-position");var f=a.position(this.tfootAttach);n.set(this.footerSizerAttach,
"height",f.h+"px");this._footerLocked=!0}},_unlockFooter:function(){s("tfoot > tr:first-child > td:first-child",this.tableAttach).forEach(function(a){n.set(a,"min-width","")});b.remove(this.tfootAttach,"tfoot-fixed-position");n.set(this.footerSizerAttach,"height","");n.set(this.tfootAttach,"width","");this._footerLocked=!1},update:function(a){!this.serverSideProcessing&&!this.draggable&&j.isArray(this.data)?(this.cachedData=this.data=a,this.queuedRequests=[],this._updateChildren(this.data,null)):
console.error("update() does not support your treeTable configuration.")},_updateChildren:function(a,b){var c=this._getItemsWithExistingRow(a),f=this._getItemsWithoutExistingRow(a);c&&0<c.length&&this._processItems(c);if(f&&0<f.length){var d;if(b&&b[this.idAttribute]&&(d=this._getRowObjectByItemId(b[this.idAttribute])))d.visible=!0;c=this._initializeRowObjects(f,d);l.forEach(c,function(a){a.visible=!0;this._populateForRowObjectRecursive(a);if(!d||d.expanded)if(this.createRow(a),a.expanded)a.expanded=
!1,a.visible=!0,this._expand(a)},this);this._addExpandCollapseImage(d)}},_processItems:function(a){l.forEach(a,function(a){var b=this._getRowObjectByItemId(a[this.idAttribute]);if(b)b.visible=!0,this._updateColumns(b,a),a.children?this._updateChildren(a.children,a):this._checkLazyLoad(a,b)},this)},_checkLazyLoad:function(a,b){this.getChildUrl&&this.getChildUrl(a)&&b&&b.expanded&&this._getLazyLoadedData(this.getChildUrl(a)).then(j.hitch(this,function(b){this._updateChildren(b,a)}),j.hitch(this,function(a){this.showError(a)}))},
_updateColumns:function(a,b){l.forEach(this.columns,function(c,d){if(c.relevantFieldNames){if(this._hasDataChanged(a.item,b,c.relevantFieldNames)){if(a.domNode){var o=a.domNode.children[d],e=this._createNewTableCellNode(a,b,c,d);f.place(e,o,"replace")}a.hasChildren=this.hasChildren(b)}}else console.error("relevantFieldNames must be defined to use update()")},this);a.item=b},_getRowObjectByItemId:function(a){return _.find(this.rowObjectList,function(b){return b&&b.item&&b.item[this.idAttribute]===
a},this)},_hasDataChanged:function(a,b,c){return _.find(c,function(c){return!_.isEqual(a[c],b[c])})},_createNewTableCellNode:function(a,d,o,e){var s=0===e,e=f.create("td"),h=f.create("div",{"class":"cellWrapper"},e);o["class"]&&b.add(e,o["class"]);void 0!==o.style&&n.set(e,o.style);var q="",r=h;if(s&&!o.beforeExpander||o.alwaysShowExpandArrow)r=f.create("div");void 0!==o.field&&(q=d[o.field]);void 0!==o.formatter&&(q=o.formatter(d,q,e));if(q)if(q instanceof B)q.placeAt(r);else if("object"===typeof q&&
1===q.nodeType&&"object"===typeof q.style&&"object"===typeof q.ownerDocument)r.appendChild(q);else if(void 0!==q&&"object"!==typeof q)r.innerHTML=z.encode(""+q);var u="";if("string"===typeof q)u=q;else if(u=d.name,void 0===u&&d.serviceData)u=d.serviceData.name;c.set(r,"dir",util.getResolvedBTD(u));c.set(r,"align",util.getUIDirAlign());if(s&&!o.beforeExpander||o.alwaysShowExpandArrow){b.add(r,"inlineBlock expandableCellContent");o=f.create("div",{"class":"inlineBlock collapseSpace"},h);if(!a.collapseDoms)a.collapseDoms=
[];a.collapseDoms.push(o);s=this.getChildUrl&&this.getChildUrl(d);d.children&&0<d.children.length||s?(a.hasChildren=!0,b.remove(a.domNode,"collapsedRow"),b.remove(o,this.expandImageClass),b.remove(o,this.collapseImageClass),s&&(!a.children||0===a.children.length)?(a.retrievedChildren=!1,b.add(a.domNode,"collapsedRow"),b.add(o,"linkPointer "+this.expandImageClass)):a.expanded?b.add(o,"linkPointer "+this.collapseImageClass):(b.add(a.domNode,"collapsedRow"),b.add(o,"linkPointer "+this.expandImageClass)),
this.own(t(o,"click",j.hitch(this,"_expandCollapseClickHandler",a)))):0!==a.level&&this.shouldShowCollapseDom(a.parent)&&0>a.parent.collapseDoms[0].className.indexOf("linkPointer")&&(d=a.parent.collapseDoms[0],b.remove(a.domNode,"collapsedRow"),b.add(d,"linkPointer "+this.collapseimageClass),this.own(t(d,"click",function(b){this._checkExpandCollapse(a.parent);k.stop(b)})));h.appendChild(o);0<a.level&&n.set(h,{paddingLeft:a.level*this.rowPadding+"px"});h.appendChild(r)}return e},_getLazyLoadedData:function(a){this._set("queuedRequests",
_.union(this.queuedRequests,[a]));var b=new x,c=this;h.get({url:a,handleAs:"json",load:function(a){b.resolve(a)},error:function(a){b.reject(a)},handle:function(a,b){c._set("queuedRequests",_.without(c.queuedRequests,b.args.url))}});return b},_getItemsWithoutExistingRow:function(a){return _.filter(a,function(a){return!a||!a[this.idAttribute]||!this._getRowObjectByItemId(a[this.idAttribute])},this)},_getItemsWithExistingRow:function(a){return _.filter(a,function(a){return a&&a[this.idAttribute]&&this._getRowObjectByItemId(a[this.idAttribute])},
this)},_addExpandCollapseImage:function(a){if(a&&a.collapseDoms&&0<a.collapseDoms.length){var c=a.collapseDoms[0];b.contains(c,"linkPointer")||(b.remove(a.domNode,"collapsedRow"),b.remove(c,this.expandImageClass),b.remove(c,this.collapseImageClass),a.expanded?b.add(c,"linkPointer "+this.collapseImageClass):(b.add(a.domNode,"collapsedRow"),b.add(c,"linkPointer "+this.expandImageClass)),this.own(t(c,"click",j.hitch(this,"_expandCollapseClickHandler",a))))}},_expandCollapseClickHandler:function(a,b){this._checkExpandCollapse(a);
k.stop(b)}})})},"dojox/html/entities":function(){define(["dojo/_base/lang"],function(l){var m=l.getObject("dojox.html.entities",!0),k=function(e,h){var d,c;if(h._encCache&&h._encCache.regexp&&h._encCache.mapper&&h.length==h._encCache.length)d=h._encCache.mapper,c=h._encCache.regexp;else{d={};c=["["];var b;for(b=0;b<h.length;b++)d[h[b][0]]="&"+h[b][1]+";",c.push(h[b][0]);c.push("]");c=RegExp(c.join(""),"g");h._encCache={mapper:d,regexp:c,length:h.length}}return e=e.replace(c,function(a){return d[a]})},
j=function(e,h){var d,c;if(h._decCache&&h._decCache.regexp&&h._decCache.mapper&&h.length==h._decCache.length)d=h._decCache.mapper,c=h._decCache.regexp;else{d={};c=["("];var b;for(b=0;b<h.length;b++){var a="&"+h[b][1]+";";b&&c.push("|");d[a]=h[b][0];c.push(a)}c.push(")");c=RegExp(c.join(""),"g");h._decCache={mapper:d,regexp:c,length:h.length}}return e=e.replace(c,function(a){return d[a]})};m.html=[["&","amp"],['"',"quot"],["<","lt"],[">","gt"],["\u00a0","nbsp"]];m.latin=[["\u00a1","iexcl"],["\u00a2",
"cent"],["\u00a3","pound"],["\u20ac","euro"],["\u00a4","curren"],["\u00a5","yen"],["\u00a6","brvbar"],["\u00a7","sect"],["\u00a8","uml"],["\u00a9","copy"],["\u00aa","ordf"],["\u00ab","laquo"],["\u00ac","not"],["\u00ad","shy"],["\u00ae","reg"],["\u00af","macr"],["\u00b0","deg"],["\u00b1","plusmn"],["\u00b2","sup2"],["\u00b3","sup3"],["\u00b4","acute"],["\u00b5","micro"],["\u00b6","para"],["\u00b7","middot"],["\u00b8","cedil"],["\u00b9","sup1"],["\u00ba","ordm"],["\u00bb","raquo"],["\u00bc","frac14"],
["\u00bd","frac12"],["\u00be","frac34"],["\u00bf","iquest"],["\u00c0","Agrave"],["\u00c1","Aacute"],["\u00c2","Acirc"],["\u00c3","Atilde"],["\u00c4","Auml"],["\u00c5","Aring"],["\u00c6","AElig"],["\u00c7","Ccedil"],["\u00c8","Egrave"],["\u00c9","Eacute"],["\u00ca","Ecirc"],["\u00cb","Euml"],["\u00cc","Igrave"],["\u00cd","Iacute"],["\u00ce","Icirc"],["\u00cf","Iuml"],["\u00d0","ETH"],["\u00d1","Ntilde"],["\u00d2","Ograve"],["\u00d3","Oacute"],["\u00d4","Ocirc"],["\u00d5","Otilde"],["\u00d6","Ouml"],
["\u00d7","times"],["\u00d8","Oslash"],["\u00d9","Ugrave"],["\u00da","Uacute"],["\u00db","Ucirc"],["\u00dc","Uuml"],["\u00dd","Yacute"],["\u00de","THORN"],["\u00df","szlig"],["\u00e0","agrave"],["\u00e1","aacute"],["\u00e2","acirc"],["\u00e3","atilde"],["\u00e4","auml"],["\u00e5","aring"],["\u00e6","aelig"],["\u00e7","ccedil"],["\u00e8","egrave"],["\u00e9","eacute"],["\u00ea","ecirc"],["\u00eb","euml"],["\u00ec","igrave"],["\u00ed","iacute"],["\u00ee","icirc"],["\u00ef","iuml"],["\u00f0","eth"],["\u00f1",
"ntilde"],["\u00f2","ograve"],["\u00f3","oacute"],["\u00f4","ocirc"],["\u00f5","otilde"],["\u00f6","ouml"],["\u00f7","divide"],["\u00f8","oslash"],["\u00f9","ugrave"],["\u00fa","uacute"],["\u00fb","ucirc"],["\u00fc","uuml"],["\u00fd","yacute"],["\u00fe","thorn"],["\u00ff","yuml"],["\u0192","fnof"],["\u0391","Alpha"],["\u0392","Beta"],["\u0393","Gamma"],["\u0394","Delta"],["\u0395","Epsilon"],["\u0396","Zeta"],["\u0397","Eta"],["\u0398","Theta"],["\u0399","Iota"],["\u039a","Kappa"],["\u039b","Lambda"],
["\u039c","Mu"],["\u039d","Nu"],["\u039e","Xi"],["\u039f","Omicron"],["\u03a0","Pi"],["\u03a1","Rho"],["\u03a3","Sigma"],["\u03a4","Tau"],["\u03a5","Upsilon"],["\u03a6","Phi"],["\u03a7","Chi"],["\u03a8","Psi"],["\u03a9","Omega"],["\u03b1","alpha"],["\u03b2","beta"],["\u03b3","gamma"],["\u03b4","delta"],["\u03b5","epsilon"],["\u03b6","zeta"],["\u03b7","eta"],["\u03b8","theta"],["\u03b9","iota"],["\u03ba","kappa"],["\u03bb","lambda"],["\u03bc","mu"],["\u03bd","nu"],["\u03be","xi"],["\u03bf","omicron"],
["\u03c0","pi"],["\u03c1","rho"],["\u03c2","sigmaf"],["\u03c3","sigma"],["\u03c4","tau"],["\u03c5","upsilon"],["\u03c6","phi"],["\u03c7","chi"],["\u03c8","psi"],["\u03c9","omega"],["\u03d1","thetasym"],["\u03d2","upsih"],["\u03d6","piv"],["\u2022","bull"],["\u2026","hellip"],["\u2032","prime"],["\u2033","Prime"],["\u203e","oline"],["\u2044","frasl"],["\u2118","weierp"],["\u2111","image"],["\u211c","real"],["\u2122","trade"],["\u2135","alefsym"],["\u2190","larr"],["\u2191","uarr"],["\u2192","rarr"],
["\u2193","darr"],["\u2194","harr"],["\u21b5","crarr"],["\u21d0","lArr"],["\u21d1","uArr"],["\u21d2","rArr"],["\u21d3","dArr"],["\u21d4","hArr"],["\u2200","forall"],["\u2202","part"],["\u2203","exist"],["\u2205","empty"],["\u2207","nabla"],["\u2208","isin"],["\u2209","notin"],["\u220b","ni"],["\u220f","prod"],["\u2211","sum"],["\u2212","minus"],["\u2217","lowast"],["\u221a","radic"],["\u221d","prop"],["\u221e","infin"],["\u2220","ang"],["\u2227","and"],["\u2228","or"],["\u2229","cap"],["\u222a","cup"],
["\u222b","int"],["\u2234","there4"],["\u223c","sim"],["\u2245","cong"],["\u2248","asymp"],["\u2260","ne"],["\u2261","equiv"],["\u2264","le"],["\u2265","ge"],["\u2282","sub"],["\u2283","sup"],["\u2284","nsub"],["\u2286","sube"],["\u2287","supe"],["\u2295","oplus"],["\u2297","otimes"],["\u22a5","perp"],["\u22c5","sdot"],["\u2308","lceil"],["\u2309","rceil"],["\u230a","lfloor"],["\u230b","rfloor"],["\u2329","lang"],["\u232a","rang"],["\u25ca","loz"],["\u2660","spades"],["\u2663","clubs"],["\u2665",
"hearts"],["\u2666","diams"],["\u0152","Elig"],["\u0153","oelig"],["\u0160","Scaron"],["\u0161","scaron"],["\u0178","Yuml"],["\u02c6","circ"],["\u02dc","tilde"],["\u2002","ensp"],["\u2003","emsp"],["\u2009","thinsp"],["\u200c","zwnj"],["\u200d","zwj"],["\u200e","lrm"],["\u200f","rlm"],["\u2013","ndash"],["\u2014","mdash"],["\u2018","lsquo"],["\u2019","rsquo"],["\u201a","sbquo"],["\u201c","ldquo"],["\u201d","rdquo"],["\u201e","bdquo"],["\u2020","dagger"],["\u2021","Dagger"],["\u2030","permil"],["\u2039",
"lsaquo"],["\u203a","rsaquo"]];m.encode=function(e,h){e&&(h?e=k(e,h):(e=k(e,m.html),e=k(e,m.latin)));return e};m.decode=function(e,h){e&&(h?e=j(e,h):(e=j(e,m.html),e=j(e,m.latin)));return e};return m})},"js/webext/widgets/table/_TableFilteringMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/on,dojo/keys,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dijit/form/DateTextBox,dijit/form/FilteringSelect,dijit/form/Select,dijit/form/TextBox,dijit/form/ComboBox,dojox/data/JsonRestStore".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return l(null,{baseFilters:[],columns:[],filterAttach:null,draggable:!1,hasAnyFilterValues:!1,alwaysShowFilters:!0,_filterFields:[],_filterWidgets:[],_prevFilterFields:[],getItemsMatchingFilters:function(){var a=[];m.forEach(this.rowObjectList,function(b){(b.matchesFilters||b.item&&b.item.matchesFilters)&&a.push(b.item)});return a},initFilteringMixin:function(){this._filterFields=[];this._filterWidgets=[];var a=!1;m.forEach(this.columns,function(b){b.filterField&&
(a=!0)});a&&(this.drawFilterHiddenRow(),this.alwaysShowFilters&&this.drawFilters())},drawFilterHiddenRow:function(){var a=this;d.empty(this.filterAttach);var b=d.create("td");b.colSpan=this.draggable?this.columns.length+1:this.columns.length;var c=d.create("a");h.add(c,"linkPointer");c.innerHTML=i18n("Show Filters");c.onclick=function(){a.drawFilters()};b.appendChild(c);this.filterAttach.appendChild(b)},drawFilters:function(){var t=this;d.empty(this.filterAttach);this.draggable&&d.create("td",{},
this.filterAttach);m.forEach(this.columns,function(q){var o=d.create("td"),s=d.create("div");s.style.position="relative";if(q===t.columns[0]&&!t.alwaysShowFilters){var u=d.create("div",{style:{position:"absolute",top:"3px",left:"3px"}}),l=d.create("a",{"class":"linkPointer"},u);t._createImg("icon_delete",l);l.alt=i18n("Clear and hide filters");l.onclick=function(){t.drawFilterHiddenRow();t._filterFields=[];t.redraw()};s.appendChild(u)}if(q.filterField){var v=null,x=null;switch(q.filterType){case "filteringCombo":u=
new r({target:q.filterUrl,idAttribute:"name"});v=new n({name:q.filterField,store:u,autoComplete:!1,required:!1,queryExpr:"*${0}*",searchDelay:250,query:{name:""},onChange:function(a){var b=util.getNamedProperty(t._filterFields,q.filterField);void 0!==b&&util.removeFromArray(t._filterFields,b);t._filterFields.push({name:q.filterField,type:"eq",className:q.filterClass,values:[a]});(void 0===b&&a||void 0!==b&&b.values[0]!==a)&&t.applyFilters()}});break;case "filteringSelect":u=new r({target:q.filterUrl,
idAttribute:"name"});v=new b({name:q.filterField,store:u,autoComplete:!1,required:!1,onChange:function(a){var b=util.getNamedProperty(t._filterFields,q.filterField);void 0!==b&&util.removeFromArray(t._filterFields,b);t._filterFields.push({name:q.filterField,type:"eq",className:q.filterClass,values:[a]});(void 0===b&&a||void 0!==b&&b.values[0]!==a)&&t.applyFilters()}});break;case "text":case "textExact":v=new f({name:q.filterField,placeHolder:"Filter",onChange:function(a){var b=util.getNamedProperty(t._filterFields,
q.filterField);void 0!==b&&util.removeFromArray(t._filterFields,b);if(a){var c="like";"textExact"===q.filterType&&(c="eq");t._filterFields.push({name:q.filterField,type:c,className:q.filterClass,values:[a]})}(void 0===b&&a||void 0!==b&&b.values[0]!==a)&&t.applyFilters()},onKeyPress:function(a){if(13===a.charOrCode)this.onChange(v.textbox.value)},onBlur:function(){this.onChange(v.textbox.value)}});break;case "select":var y=[{label:i18n("Any"),value:"Any"}];m.forEach(q.filterOptions,function(a){y.push(a)});
v=new a({name:q.filterField,options:y,onChange:function(a){var b=util.getNamedProperty(t._filterFields,q.filterField);void 0!==b&&util.removeFromArray(t._filterFields,b);var c=a;"_EMPTY_VALUE_"===a&&(c="");a=void 0!==c&&null!==c;"Any"!==c&&t._filterFields.push({name:q.filterField,type:"eq",className:q.filterClass,values:[c]});(void 0===b&&a||void 0!==b&&b.values[0]!==c)&&t.applyFilters()}});break;case "date":v=new c({name:q.filterField+"_low",onChange:function(a){var a=a?a.getTime():t._getMinAllowedDateValue(),
b=util.getNamedProperty(t._filterFields,q.filterField);void 0===b&&t._filterFields.push({name:q.filterField,type:"range",className:q.filterClass});b=util.getNamedProperty(t._filterFields,q.filterField);void 0===b.values?(b.values=[],b.values[0]={low:a,high:t._getMaxAllowedDateValue()}):b.values[0].low=a;t.applyFilters()},onKeyPress:function(a){13===a.charOrCode&&(v.textbox.value?v.set("value",new Date(v.textbox.value)):v.set("value",null))}});x=new c({name:q.filterField+"_hi",onChange:function(a){var a=
a?a.getTime()+864E5:t._getMaxAllowedDateValue(),b=util.getNamedProperty(t._filterFields,q.filterField);void 0===b&&t._filterFields.push({name:q.filterField,type:"range",className:q.filterClass});b=util.getNamedProperty(t._filterFields,q.filterField);void 0===b.values?(b.values=[],b.values[0]={high:a,low:t._getMinAllowedDateValue()}):b.values[0].high=a;t.applyFilters()},onKeyPress:function(a){13===a.charOrCode&&(x.textbox.value?x.set("value",new Date(x.textbox.value)):x.set("value",null))}});break;
case "custom":if(!q.getFilterFields)throw"Column has no getFilterFields.";v=q.getFilterFields();if(!v.length)throw console.error("filterWidget",v),"Expected array returned from getFilterFields, instead found "+typeof v;m.forEach(v,function(a){if(!a.get("name"))a.name=util.randomString(30);k(a,"change",function(){t._customFilter(v,q)});k(a,"keypress",function(a){switch(a.charOrCode){case j.ENTER:t._customFilter(v,q)}})});break;default:console.error("Unexpected filterType: "+q.filterType)}u=util.getNamedProperty(t._filterFields,
q.filterField);void 0!==u&&(null!==x?v.set("value",u.values[0].low):v.set("value",u.values[0]));v.length?m.forEach(v,function(a){t._filterWidgets.push(a);a.placeAt(s);h.add(a.domNode,"filterField");e.set(a.domNode,"data-field-name",a.name)}):(t._filterWidgets.push(v),v.placeAt(s),h.add(v.domNode,"filterField"),e.set(v.domNode,"data-field-name",v.name));null!==x&&(void 0!==u&&x.set("value",u.values[0].high),d.create("span",{innerHTML:"&nbsp;-&nbsp;"},s),x.placeAt(s),e.set(x.domNode,"data-field-name",
x.name))}else d.create("div",{innerHTML:"&nbsp;",style:{height:"16px"}},s);o.appendChild(s);t.filterAttach.appendChild(o)})},_customFilter:function(a,b){var c=this,f=b.filterClass,d=!1;m.forEach(a,function(a){var e=a.get("name"),n=util.getNamedProperty(c._filterFields,e);void 0!==n&&util.removeFromArray(c._filterFields,n);var h=a.get("values");if(void 0===h){var r=a.get("value");r&&(h=[r])}h&&c._filterFields.push({name:e,column:b,widget:a,type:a.get("type"),className:f,values:h});if(!d){var j=[],
a=[];h&&(a=a.concat(h));n&&n.values&&(j=j.concat(n.values));a.length!==j.length?d=!0:m.forEach(a,function(a,b){a!==j[b]&&(d=!0)})}});d&&c.applyFilters()},setFilterValue:function(a,b,c,f){var d;m.forEach(this._filterWidgets,function(c){if(c.name===a)c.value=b,d=c});var e;void 0===d&&m.forEach(this._filterFields,function(d){if(d.name===a)e=d,d.values=b,d.className=f,d.type=c});void 0===e&&this._filterFields.push({name:a,values:b,type:c,className:f});this.redraw()},applyFilters:function(){this.pageNumber=
1;this.redraw()},adjustFilters:function(){},getFilterData:function(a){var b=this.rowsPerPage,c=this.pageNumber;this.hidePagination&&(b=1E4,c=1);var f={rowsPerPage:b,pageNumber:c,orderField:this.orderField,sortType:this.sortType,filterFields:[]};if(this.filters&&!this.baseFilters)this.baseFilters=this.filters;if(!a)a=this.baseFilters;m.forEach(a,function(a){f.filterFields.push(a.name);var b=[];m.forEach(a.values,function(a){b.push(a)});f["filterValue_"+a.name]=b;f["filterType_"+a.name]=a.type;f["filterClass_"+
a.name]=void 0!==a.className?a.className:"String"});m.forEach(this._filterFields,function(a){f.filterFields.push(a.name);var b=[];m.forEach(a.values,function(a){a instanceof Object?(b.push(a.low),b.push(a.high)):b.push(a)});f["filterValue_"+a.name]=b;f["filterType_"+a.name]=a.type;f["filterClass_"+a.name]=void 0!==a.className?a.className:"String"});if(this._filterFields&&!this._prevFilterFields||!this._filterFields&&this._prevFilterFields||this._filterFields.length!==this._prevFilterFields.length)this.totalRecords=
void 0;else for(a=b=a=0;a<this._filterFields.length;a++){c=!1;for(b=0;b<this._prevFilterFields.length;b++)if(this._filterFields[a]===this._prevFilterFields[b]){c=!0;break}if(!c){this.totalRecords=void 0;break}}this.adjustFilters(f);return f},filter:function(a){var b=this,c=[];m.forEach(a,function(a){var f=b.filterPass(a.item);if(b.hasFilterValues())a.matchesFilters=f;a.domNode&&(a.matchesFilters?h.add(a.domNode,"matchesFilters"):h.remove(a.domNode,"matchesFilters"));var d=b.filter(a.children);0<d.length||
f?(c.push(a),a.visible=!0):b.hasParentMatchingFilters(a)?a.visible=!0:(a.visible=!1,b.hideRow(a));0<d.length&&b.hasFilterValues()&&-1===b.expandedNodeList.indexOf(a.id)&&b.expandedNodeList.push(a.id);!f&&0===d.length&&-1!==b.expandedNodeList.indexOf(a.id)&&util.removeFromArray(b.expandedNodeList,a.id)});return c},hasParentMatchingFilters:function(a){var b=!1;a.matchesFilters?b=!0:a.parent&&(b=this.hasParentMatchingFilters(a.parent));return b},filterPass:function(a){var b=this,c=!0;this.itemPasses&&
!this.itemPasses(a)?c=!1:this.hasFilterValues()&&m.forEach(this._filterFields,function(f){var d;m.forEach(b.columns,function(a){if(a.filterField===f.name||a===f.column)d=a});var e=!1;if(void 0===d)console.error("Filtered field "+f.name+" had no column match.");else if(f.widget&&f.widget.filterPass)e=f.widget.filterPass(a,f.values);else{var n;n=d.getRawValue?d.getRawValue(a):a[d.filterField];if(null===n||void 0===n)n="";m.forEach(f.values,function(a){var b,c;"eq"===f.type?a===n&&(e=!0):"like"===f.type?
-1!==n.toLowerCase().indexOf(a.toLowerCase())&&(e=!0):"daterange"===f.type?(b=a.high?a.high.getTime():9007199254740992,a=a.low?a.low.getTime():0,c=Number(n),c<=b&&c>=a&&(e=!0)):"range"===f.type&&(b=a.high?Number(a.high):9007199254740992,a=a.low?Number(a.low):0,c=Number(n),c<=b&&c>=a&&(e=!0))})}e||(c=!1)});return c},hasFilterValues:function(){return 0!==this._filterFields.length},_getMinAllowedDateValue:function(){return 0},_getMaxAllowedDateValue:function(){return(new Date(864E13)).getTime()}})})},
"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(l,m,k){return l("dijit.form.DateTextBox",k,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:m,_selector:"date",value:new Date("")})})},"dijit/Calendar":function(){define("dojo/_base/array,dojo/date,dojo/date/locale,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/sniff,./CalendarLite,./_Widget,./_CssStateMixin,./_TemplatedMixin,./form/DropDownButton".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){var s=j("dijit.Calendar",[n,r,t],{cssStateNodes:{decrementMonth:"dijitCalendarArrow",incrementMonth:"dijitCalendarArrow",previousYearLabelNode:"dijitCalendarPreviousYear",nextYearLabelNode:"dijitCalendarNextYear"},setValue:function(a){c.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_createMonthWidget:function(){return new s._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:a.hitch(this,
"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp")},_onMonthSelect:function(a){var b=new this.dateClassObj(this.currentFocus);
b.setDate(1);b.setMonth(a);var a=this.dateModule.getDaysInMonth(b),c=this.currentFocus.getDate();b.setDate(Math.min(c,a));this._setCurrentFocusAttr(b)},_onDayMouseOver:function(a){if((a=h.contains(a.target,"dijitCalendarDateLabel")?a.target.parentNode:a.target)&&(a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate")||a==this.previousYearLabelNode||a==this.nextYearLabelNode))h.add(a,"dijitCalendarHoveredDate"),this._currentNode=a},_onDayMouseOut:function(a){if(this._currentNode&&!(a.relatedTarget&&
a.relatedTarget.parentNode==this._currentNode))a="dijitCalendarHoveredDate",h.contains(this._currentNode,"dijitCalendarActiveDate")&&(a+=" dijitCalendarActiveDate"),h.remove(this._currentNode,a),this._currentNode=null},_onDayMouseDown:function(a){if((a=a.target.parentNode)&&a.dijitDateValue&&!h.contains(a,"dijitCalendarDisabledDate"))h.add(a,"dijitCalendarActiveDate"),this._currentNode=a},_onDayMouseUp:function(a){(a=a.target.parentNode)&&a.dijitDateValue&&h.remove(a,"dijitCalendarActiveDate")},handleKey:function(a){var c=
-1,f,d=this.currentFocus;switch(a.keyCode){case b.RIGHT_ARROW:c=1;case b.LEFT_ARROW:f="day";this.isLeftToRight()||(c*=-1);break;case b.DOWN_ARROW:c=1;case b.UP_ARROW:f="week";break;case b.PAGE_DOWN:c=1;case b.PAGE_UP:f=a.ctrlKey||a.altKey?"year":"month";break;case b.END:d=this.dateModule.add(d,"month",1),f="day";case b.HOME:d=new this.dateClassObj(d);d.setDate(1);break;case b.ENTER:case b.SPACE:this.set("value",this.currentFocus);break;default:return!0}f&&(d=this.dateModule.add(d,f,c));this._setCurrentFocusAttr(d);
return!1},_onKeyDown:function(a){this.handleKey(a)||d.stop(a)},onValueSelected:function(){},onChange:function(a){this.onValueSelected(a)},getClassForDate:function(){}});s._MonthDropDownButton=j("dijit.Calendar._MonthDropDownButton",o,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new s._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect})},_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.dropDown.set("months",
b);this.containerNode.innerHTML=(6==f("ie")?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});s._MonthDropDown=j("dijit.Calendar._MonthDropDown",[r,q],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(a){this.domNode.innerHTML=l.map(a,
function(a,b){return a?"<div class='dijitCalendarMonthLabel' month='"+b+"'>"+a+"</div>":""}).join("")},_onClick:function(a){this.onChange(e.get(a.target,"month"))},onChange:function(){},_onMenuHover:function(a){h.toggle(a.target,"dijitCalendarMonthLabelHover","mouseover"==a.type)}});return s})},"dojo/date":function(){define("dojo/date",["./has","./_base/lang"],function(l,m){var k={};k.getDaysInMonth=function(j){var e=j.getMonth(),h=[31,28,31,30,31,30,31,31,30,31,30,31];return 1==e&&k.isLeapYear(j)?
29:h[e]};k.isLeapYear=function(j){j=j.getFullYear();return!(j%400)||!(j%4)&&!!(j%100)};k.getTimezoneName=function(j){var e=j.toString(),h="",d=e.indexOf("(");if(-1<d)h=e.substring(++d,e.indexOf(")"));else if(d=/([A-Z\/]+) \d{4}$/,e=e.match(d))h=e[1];else if(e=j.toLocaleString(),d=/ ([A-Z\/]+)$/,e=e.match(d))h=e[1];return"AM"==h||"PM"==h?"":h};k.compare=function(j,e,h){j=new Date(+j);e=new Date(+(e||new Date));"date"==h?(j.setHours(0,0,0,0),e.setHours(0,0,0,0)):"time"==h&&(j.setFullYear(0,0,0),e.setFullYear(0,
0,0));return j>e?1:j<e?-1:0};k.add=function(j,e,h){var d=new Date(+j),c=!1,b="Date";switch(e){case "day":break;case "weekday":var a;(e=h%5)?a=parseInt(h/5):(e=0<h?5:-5,a=0<h?(h-5)/5:(h+5)/5);var f=j.getDay(),n=0;6==f&&0<h?n=1:0==f&&0>h&&(n=-1);f+=e;if(0==f||6==f)n=0<h?2:-2;h=7*a+e+n;break;case "year":b="FullYear";c=!0;break;case "week":h*=7;break;case "quarter":h*=3;case "month":c=!0;b="Month";break;default:b="UTC"+e.charAt(0).toUpperCase()+e.substring(1)+"s"}if(b)d["set"+b](d["get"+b]()+h);c&&d.getDate()<
j.getDate()&&d.setDate(0);return d};k.difference=function(j,e,h){var e=e||new Date,h=h||"day",d=e.getFullYear()-j.getFullYear(),c=1;switch(h){case "quarter":j=j.getMonth();e=e.getMonth();j=Math.floor(j/3)+1;e=Math.floor(e/3)+1;c=e+4*d-j;break;case "weekday":d=Math.round(k.difference(j,e,"day"));h=parseInt(k.difference(j,e,"week"));if(0==d%7)d=5*h;else{var c=0,b=j.getDay(),a=e.getDay(),h=parseInt(d/7),e=d%7,j=new Date(j);j.setDate(j.getDate()+7*h);j=j.getDay();if(0<d)switch(!0){case 6==b:c=-1;break;
case 0==b:c=0;break;case 6==a:c=-1;break;case 0==a:c=-2;break;case 5<j+e:c=-2}else if(0>d)switch(!0){case 6==b:c=0;break;case 0==b:c=1;break;case 6==a:c=2;break;case 0==a:c=1;break;case 0>j+e:c=2}d=d+c-2*h}c=d;break;case "year":c=d;break;case "month":c=e.getMonth()-j.getMonth()+12*d;break;case "week":c=parseInt(k.difference(j,e,"day")/7);break;case "day":c/=24;case "hour":c/=60;case "minute":c/=60;case "second":c/=1E3;case "millisecond":c*=e.getTime()-j.getTime()}return Math.round(c)};m.mixin(m.getObject("dojo.date",
!0),k);return k})},"dojo/date/locale":function(){define("../_base/lang,../_base/array,../date,../cldr/supplemental,../i18n,../regexp,../string,../i18n!../cldr/nls/gregorian,module".split(","),function(l,m,k,j,e,h,d,c,b){function a(a,b,c,f){return f.replace(/([a-z])\1*/ig,function(e){var n,h,t=e.charAt(0),e=e.length,k=["abbr","wide","narrow"];switch(t){case "G":n=b[4>e?"eraAbbr":"eraNames"][0>a.getFullYear()?0:1];break;case "y":n=a.getFullYear();switch(e){case 1:break;case 2:if(!c.fullYear){n=""+n;
n=n.substr(n.length-2);break}default:h=!0}break;case "Q":case "q":n=Math.ceil((a.getMonth()+1)/3);h=!0;break;case "M":case "L":n=a.getMonth();3>e?(n+=1,h=!0):(t=["months","L"==t?"standAlone":"format",k[e-3]].join("-"),n=b[t][n]);break;case "w":n=r._getWeekOfYear(a,0);h=!0;break;case "d":n=a.getDate();h=!0;break;case "D":n=r._getDayOfYear(a);h=!0;break;case "e":case "c":if(n=a.getDay(),2>e){n=(n-j.getFirstDayOfWeek(c.locale)+8)%7;break}case "E":n=a.getDay();3>e?(n+=1,h=!0):(t=["days","c"==t?"standAlone":
"format",k[e-3]].join("-"),n=b[t][n]);break;case "a":t=12>a.getHours()?"am":"pm";n=c[t]||b["dayPeriods-format-wide-"+t];break;case "h":case "H":case "K":case "k":h=a.getHours();switch(t){case "h":n=h%12||12;break;case "H":n=h;break;case "K":n=h%12;break;case "k":n=h||24}h=!0;break;case "m":n=a.getMinutes();h=!0;break;case "s":n=a.getSeconds();h=!0;break;case "S":n=Math.round(a.getMilliseconds()*Math.pow(10,e-3));h=!0;break;case "v":case "z":if(n=r._getZone(a,!0,c))break;e=4;case "Z":t=r._getZone(a,
!1,c);t=[0>=t?"+":"-",d.pad(Math.floor(Math.abs(t)/60),2),d.pad(Math.abs(t)%60,2)];4==e&&(t.splice(0,0,"GMT"),t.splice(3,0,":"));n=t.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+f);}h&&(n=d.pad(n,e));return n})}function f(a,b,c,f){var d=function(a){return a},b=b||d,c=c||d,f=f||d,e=a.match(/(''|[^'])+/g),n="'"==a.charAt(0);m.forEach(e,function(a,f){a?(e[f]=(n?c:b)(a.replace(/''/g,"'")),n=!n):e[f]=""});return f(e.join(""))}function n(a,b,c,f){f=h.escapeString(f);
c.strict||(f=f.replace(" a"," ?a"));return f.replace(/([a-z])\1*/ig,function(f){var d;d=f.charAt(0);var e=f.length,n="",h="";c.strict?(1<e&&(n="0{"+(e-1)+"}"),2<e&&(h="0{"+(e-2)+"}")):(n="0?",h="0{0,2}");switch(d){case "y":d="\\d{2,4}";break;case "M":case "L":d=2<e?"\\S+?":"1[0-2]|"+n+"[1-9]";break;case "D":d="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+n+"[1-9][0-9]|"+h+"[1-9]";break;case "d":d="3[01]|[12]\\d|"+n+"[1-9]";break;case "w":d="[1-4][0-9]|5[0-3]|"+n+"[1-9]";break;case "E":case "e":case "c":d=
"\\S+";break;case "h":d="1[0-2]|"+n+"[1-9]";break;case "k":d="1[01]|"+n+"\\d";break;case "H":d="1\\d|2[0-3]|"+n+"\\d";break;case "K":d="1\\d|2[0-4]|"+n+"[1-9]";break;case "m":case "s":d="[0-5]\\d";break;case "S":d="\\d{"+e+"}";break;case "a":e=c.am||b["dayPeriods-format-wide-am"];n=c.pm||b["dayPeriods-format-wide-pm"];d=e+"|"+n;c.strict||(e!=e.toLowerCase()&&(d+="|"+e.toLowerCase()),n!=n.toLowerCase()&&(d+="|"+n.toLowerCase()),-1!=d.indexOf(".")&&(d+="|"+d.replace(/\./g,"")));d=d.replace(/\./g,"\\.");
break;default:d=".*"}a&&a.push(f);return"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var r={};l.setObject(b.id.replace(/\//g,"."),r);r._getZone=function(a,b){return b?k.getTimezoneName(a):a.getTimezoneOffset()};r.format=function(b,c){var c=c||{},d=e.normalizeLocale(c.locale),n=c.formatLength||"short",d=r._getGregorianBundle(d),h=[],j=l.hitch(this,a,b,d,c);if("year"==c.selector)return f(d["dateFormatItem-yyyy"]||"yyyy",j);var t;"date"!=c.selector&&(t=c.timePattern||d["timeFormat-"+n])&&h.push(f(t,
j));"time"!=c.selector&&(t=c.datePattern||d["dateFormat-"+n])&&h.push(f(t,j));return 1==h.length?h[0]:d["dateTimeFormat-"+n].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return h[b]})};r.regexp=function(a){return r._parseInfo(a).regexp};r._parseInfo=function(a){var a=a||{},b=e.normalizeLocale(a.locale),b=r._getGregorianBundle(b),c=a.formatLength||"short",d=a.datePattern||b["dateFormat-"+c],h=a.timePattern||b["timeFormat-"+c],c="date"==a.selector?d:"time"==a.selector?h:b["dateTimeFormat-"+
c].replace(/\{(\d+)\}/g,function(a,b){return[h,d][b]}),j=[];return{regexp:f(c,l.hitch(this,n,j,b,a)),tokens:j,bundle:b}};r.parse=function(a,b){var c=/[\u200E\u200F\u202A\u202E]/g,f=r._parseInfo(b),d=f.tokens,e=f.bundle,c=RegExp("^"+f.regexp.replace(c,"")+"$",f.strict?"":"i").exec(a&&a.replace(c,""));if(!c)return null;var n=["abbr","wide","narrow"],h=[1970,0,1,0,0,0,0],j="",c=m.every(c,function(a,c){if(!c)return!0;var f=d[c-1],s=f.length,f=f.charAt(0);switch(f){case "y":if(2!=s&&b.strict)h[0]=a;else if(100>
a)a=Number(a),f=""+(new Date).getFullYear(),s=100*f.substring(0,2),f=Math.min(Number(f.substring(2,4))+20,99),h[0]=a<f?s+a:s-100+a;else{if(b.strict)return!1;h[0]=a}break;case "M":case "L":if(2<s){if(s=e["months-"+("L"==f?"standAlone":"format")+"-"+n[s-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),s=m.map(s,function(a){return a.replace(".","").toLowerCase()})),a=m.indexOf(s,a),-1==a)return!1}else a--;h[1]=a;break;case "E":case "e":case "c":s=e["days-"+("c"==f?"standAlone":"format")+"-"+
n[s-3]].concat();b.strict||(a=a.toLowerCase(),s=m.map(s,function(a){return a.toLowerCase()}));a=m.indexOf(s,a);if(-1==a)return!1;break;case "D":h[1]=0;case "d":h[2]=a;break;case "a":s=b.am||e["dayPeriods-format-wide-am"];f=b.pm||e["dayPeriods-format-wide-pm"];if(!b.strict)var r=/\./g,a=a.replace(r,"").toLowerCase(),s=s.replace(r,"").toLowerCase(),f=f.replace(r,"").toLowerCase();if(b.strict&&a!=s&&a!=f)return!1;j=a==f?"p":a==s?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":if(23<a)return!1;
h[3]=a;break;case "m":h[4]=a;break;case "s":h[5]=a;break;case "S":h[6]=a}return!0}),f=+h[3];"p"===j&&12>f?h[3]=f+12:"a"===j&&12==f&&(h[3]=0);f=new Date(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);b.strict&&f.setFullYear(h[0]);var t=d.join(""),l=-1!=t.indexOf("d"),t=-1!=t.indexOf("M");if(!c||t&&f.getMonth()>h[1]||l&&f.getDate()>h[2])return null;if(t&&f.getMonth()<h[1]||l&&f.getDate()<h[2])f=k.add(f,"hour",1);return f};var t=[];r.addCustomFormats=function(a,b){t.push({pkg:a,name:b})};r._getGregorianBundle=
function(a){var b={};m.forEach(t,function(c){c=e.getLocalization(c.pkg,c.name,a);b=l.mixin(b,c)},this);return b};r.addCustomFormats(b.id.replace(/\/date\/locale$/,".cldr"),"gregorian");r.getNames=function(a,b,c,f){var d,f=r._getGregorianBundle(f),a=[a,c,b];"standAlone"==c&&(c=a.join("-"),d=f[c],1==d[0]&&(d=void 0));a[1]="format";return(d||f[a.join("-")]).concat()};r.isWeekend=function(a,b){var c=j.getWeekend(b),f=(a||new Date).getDay();c.end<c.start&&(c.end+=7,f<c.start&&(f+=7));return f>=c.start&&
f<=c.end};r._getDayOfYear=function(a){return k.difference(new Date(a.getFullYear(),0,1,a.getHours()),a)+1};r._getWeekOfYear=function(a,b){1==arguments.length&&(b=0);var c=(new Date(a.getFullYear(),0,1)).getDay(),f=Math.floor((r._getDayOfYear(a)+(c-b+7)%7-1)/7);c==b&&f++;return f};return r})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(l,m){var k={};l.setObject("dojo.cldr.supplemental",k);k.getFirstDayOfWeek=function(j){j={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,
iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[k._region(j)];return void 0===j?1:j};k._region=function(j){var j=m.normalizeLocale(j),j=j.split("-"),e=j[1];e?4==e.length&&(e=j[2]):e={de:"de",en:"us",
es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[j[0]];return e};k.getWeekend=function(j){var e=k._region(j),j={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[e],e={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[e];void 0===j&&(j=6);void 0===e&&(e=0);return{start:j,end:e}};return k})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],
function(l,m){var k={};m.setObject("dojo.regexp",k);k.escapeString=function(j,e){return j.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(h){return e&&-1!=e.indexOf(h)?h:"\\"+h})};k.buildGroupRE=function(j,e,h){if(!(j instanceof Array))return e(j);for(var d=[],c=0;c<j.length;c++)d.push(e(j[c]));return k.group(d.join("|"),h)};k.group=function(j,e){return"("+(e?"?:":"")+j+")"};return k})},"dijit/CalendarLite":function(){define("dojo/_base/array,dojo/_base/declare,dojo/cldr/supplemental,dojo/date,dojo/date/locale,dojo/date/stamp,dojo/dom,dojo/dom-class,dojo/_base/event,dojo/_base/lang,dojo/sniff,dojo/string,./_WidgetBase,./_TemplatedMixin,dojo/text!./templates/Calendar.html,./hccss".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){var o=m("dijit.CalendarLite",[r,t],{templateString:q,dowTemplateString:'<th class="dijitReset dijitCalendarDayLabelTemplate" role="columnheader" scope="col"><span class="dijitCalendarDayLabel">${d}</span></th>',dateTemplateString:'<td class="dijitReset" role="gridcell" data-dojo-attach-point="dateCells"><span class="dijitCalendarDateLabel" data-dojo-attach-point="dateLabels"></span></td>',weekTemplateString:'<tr class="dijitReset dijitCalendarWeekTemplate" role="row">${d}${d}${d}${d}${d}${d}${d}</tr>',
value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date,_setSummaryAttr:"gridNode",baseClass:"dijitCalendar",_isValidDate:function(a){return a&&!isNaN(a)&&"object"==typeof a&&a.toString()!=this.constructor.prototype.value.toString()},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var a=new this.dateClassObj(this.value);a.setHours(0,0,0,0);a.getDate()<this.value.getDate()&&(a=this.dateModule.add(a,"hour",1));return a}return null},_setValueAttr:function(a,
b){"string"==typeof a&&(a=h.fromISOString(a));a=this._patchDate(a);if(this._isValidDate(a)&&!this.isDisabledDate(a,this.lang)){if(this._set("value",a),this.set("currentFocus",a),this._markSelectedDates([a]),this._created&&(b||"undefined"==typeof b))this.onChange(this.get("value"))}else this._set("value",null),this._markSelectedDates([])},_patchDate:function(a){a&&(a=new this.dateClassObj(a),a.setHours(1,0,0,0));return a},_setText:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(a.ownerDocument.createTextNode(b))},
_populateGrid:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);var b=a.getDay(),c=this.dateModule.getDaysInMonth(a),f=this.dateModule.getDaysInMonth(this.dateModule.add(a,"month",-1)),d=new this.dateClassObj,e=k.getFirstDayOfWeek(this.lang);e>b&&(e-=7);this.summary||this.gridNode.setAttribute("summary",this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a)[a.getMonth()]);this._date2cell={};l.forEach(this.dateCells,function(o,n){var h=n+e,r=new this.dateClassObj(a),
j="dijitCalendar",q=0;h<b?(h=f-b+h+1,q=-1,j+="Previous"):h>=b+c?(h=h-b-c+1,q=1,j+="Next"):(h=h-b+1,j+="Current");q&&(r=this.dateModule.add(r,"month",q));r.setDate(h);this.dateModule.compare(r,d,"date")||(j="dijitCalendarCurrentDate "+j);this.isDisabledDate(r,this.lang)?(j="dijitCalendarDisabledDate "+j,o.setAttribute("aria-disabled","true")):(j="dijitCalendarEnabledDate "+j,o.removeAttribute("aria-disabled"),o.setAttribute("aria-selected","false"));(q=this.getClassForDate(r,this.lang))&&(j=q+" "+
j);o.className=j+"Month dijitCalendarDateTemplate";j=r.valueOf();this._date2cell[j]=o;o.dijitDateValue=j;this._setText(this.dateLabels[n],r.getDateLocalized?r.getDateLocalized(this.lang):r.getDate())},this)},_populateControls:function(){var a=new this.dateClassObj(this.currentFocus);a.setDate(1);this.monthWidget.set("month",a);var b=a.getFullYear()-1,c=new this.dateClassObj;l.forEach(["previous","current","next"],function(a){c.setFullYear(b++);this._setText(this[a+"YearLabelNode"],this.dateLocaleModule.format(c,
{selector:"year",locale:this.lang}))},this)},goToToday:function(){this.set("value",new this.dateClassObj)},constructor:function(b){this.dateModule=b.datePackage?a.getObject(b.datePackage,!1):j;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?a.getObject(b.datePackage+".locale",!1):e},_createMonthWidget:function(){return o._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode)},buildRendering:function(){var a=this.dowTemplateString,
b=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),c=k.getFirstDayOfWeek(this.lang);this.dayCellsHtml=n.substitute([a,a,a,a,a,a,a].join(""),{d:""},function(){return b[c++%7]});a=n.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[a,a,a,a,a,a].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);d.setSelectable(this.domNode,!1);a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",
a,!1)},postCreate:function(){this.inherited(arguments);this._connectControls()},_connectControls:function(){var b=a.hitch(this,function(a,b,c){this.connect(this[a],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,b,c))})});b("incrementMonth","month",1);b("decrementMonth","month",-1);b("nextYearLabelNode","year",1);b("previousYearLabelNode","year",-1)},_setCurrentFocusAttr:function(a,b){var c=this.currentFocus,d=this._getNodeByDate(c),a=this._patchDate(a);this._set("currentFocus",
a);if(!this._date2cell||0!=this.dateModule.difference(c,a,"month"))this._populateGrid(),this._populateControls(),this._markSelectedDates([this.value]);c=this._getNodeByDate(a);c.setAttribute("tabIndex",this.tabIndex);(this.focused||b)&&c.focus();d&&d!=c&&(f("webkit")?d.setAttribute("tabIndex","-1"):d.removeAttribute("tabIndex"))},focus:function(){this._setCurrentFocusAttr(this.currentFocus,!0)},_onDayClick:function(a){b.stop(a);for(a=a.target;a&&!a.dijitDateValue;a=a.parentNode);a&&!c.contains(a,
"dijitCalendarDisabledDate")&&this.set("value",a.dijitDateValue)},_getNodeByDate:function(a){return(a=this._patchDate(a))&&this._date2cell?this._date2cell[a.valueOf()]:null},_markSelectedDates:function(b){function f(a,b){c.toggle(b,"dijitCalendarSelectedDate",a);b.setAttribute("aria-selected",a?"true":"false")}l.forEach(this._selectedCells||[],a.partial(f,!1));this._selectedCells=l.filter(l.map(b,this._getNodeByDate,this),function(a){return a});l.forEach(this._selectedCells,a.partial(f,!0))},onChange:function(){},
isDisabledDate:function(){},getClassForDate:function(){}});o._MonthWidget=m("dijit.CalendarLite._MonthWidget",r,{_setMonthAttr:function(a){var b=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,a);this.domNode.innerHTML=(6==f("ie")?"":"<div class='dijitSpacer'>"+l.map(b,function(a){return"<div>"+a+"</div>"}).join("")+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+b[a.getMonth()]+"</div>"}});return o})},"url:dijit/templates/Calendar.html":'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer" role="grid" aria-labelledby="${id}_mddb ${id}_year" data-dojo-attach-point="gridNode">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' data-dojo-attach-point="decrementMonth" scope="col">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarDecrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="decreaseArrowNode" class="dijitA11ySideArrow">-</span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5" scope="col">\n\t\t\t\t<div data-dojo-attach-point="monthNode">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset dijitCalendarArrow\' scope="col" data-dojo-attach-point="incrementMonth">\n\t\t\t\t<img src="${_blankGif}" alt="" class="dijitCalendarIncrementControl dijitCalendarIncrease" role="presentation"/>\n\t\t\t\t<span data-dojo-attach-point="increaseArrowNode" class="dijitA11ySideArrow">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role="row">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point="dateRowsNode" data-dojo-attach-event="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7" role="presentation">\n\t\t\t\t<div class="dijitCalendarYearLabel">\n\t\t\t\t\t<span data-dojo-attach-point="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear" role="button"></span>\n\t\t\t\t\t<span data-dojo-attach-point="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear" role="button" id="${id}_year"></span>\n\t\t\t\t\t<span data-dojo-attach-point="nextYearLabelNode" class="dijitInline dijitCalendarNextYear" role="button"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n',
"dijit/form/DropDownButton":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/query,../registry,../popup,./Button,../_Container,../_HasDropDown,dojo/text!./templates/DropDownButton.html".split(","),function(l,m,k,j,e,h,d,c,b){return l("dijit.form.DropDownButton",[h,d,c],{baseClass:"dijitDropDownButton",templateString:b,_fillContent:function(){if(this.srcNodeRef){var a=k("*",this.srcNodeRef);this.inherited(arguments,[a[0]]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&
this.dropDownContainer){var a=k("[widgetId]",this.dropDownContainer)[0];this.dropDown=j.byNode(a);delete this.dropDownContainer}this.dropDown&&e.hide(this.dropDown);this.inherited(arguments)}},isLoaded:function(){var a=this.dropDown;return!!a&&(!a.href||a.isLoaded)},loadDropDown:function(a){var b=this.dropDown,c=b.on("load",m.hitch(this,function(){c.remove();a()}));b.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/popup":function(){define("dojo/_base/array,dojo/aspect,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,./place,./BackgroundIframe,./main".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){function u(){this._popupWrapper&&(d.destroy(this._popupWrapper),delete this._popupWrapper)}j=j(null,{_stack:[],_beginZIndex:1E3,_idGen:1,_createWrapper:function(a){var b=a._popupWrapper,c=a.domNode;if(!b)b=d.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":a["aria-label"]||a.label||a.name||a.id},a.ownerDocumentBody),b.appendChild(c),c=c.style,c.display="",c.visibility="",c.position="",c.top="0px",a._popupWrapper=b,m.after(a,
"destroy",u,!0);return b},moveOffScreen:function(a){a=this._createWrapper(a);b.set(a,{visibility:"hidden",top:"-9999px",display:""})},hide:function(a){a=this._createWrapper(a);b.set(a,"display","none")},getTopPopup:function(){for(var a=this._stack,b=a.length-1;0<b&&a[b].parent===a[b-1].widget;b--);return a[b]},open:function(b){for(var d=this._stack,s=b.popup,j=b.orient||["below","below-alt","above","above-alt"],u=b.parent?b.parent.isLeftToRight():c.isBodyLtr(s.ownerDocument),l=b.around,m=b.around&&
b.around.id?b.around.id+"_dropdown":"popup_"+this._idGen++;d.length&&(!b.parent||!e.isDescendant(b.parent.domNode,d[d.length-1].widget.domNode));)this.close(d[d.length-1].widget);var z=this._createWrapper(s);h.set(z,{id:m,style:{zIndex:this._beginZIndex+d.length},"class":"dijitPopup "+(s.baseClass||s["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:b.parent?b.parent.id:""});if(f("bgIframe")&&!s.bgIframe)s.bgIframe=new o(z);j=l?q.around(z,l,j,u,s.orient?r.hitch(s,"orient"):null):q.at(z,b,"R"==
j?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],b.padding);z.style.display="";z.style.visibility="visible";s.domNode.style.visibility="visible";u=[];u.push(t(z,k._keypress,r.hitch(this,function(c){if(c.charOrCode==n.ESCAPE&&b.onCancel)a.stop(c),b.onCancel();else if(c.charOrCode===n.TAB&&(a.stop(c),(c=this.getTopPopup())&&c.onCancel))c.onCancel()})));s.onCancel&&b.onCancel&&u.push(s.on("cancel",b.onCancel));u.push(s.on(s.onExecute?"execute":"change",r.hitch(this,function(){var a=this.getTopPopup();if(a&&
a.onExecute)a.onExecute()})));d.push({widget:s,parent:b.parent,onExecute:b.onExecute,onCancel:b.onCancel,onClose:b.onClose,handlers:u});if(s.onOpen)s.onOpen(j);return j},close:function(a){for(var b=this._stack;a&&l.some(b,function(b){return b.widget==a})||!a&&b.length;){var c=b.pop(),f=c.widget,d=c.onClose;if(f.onClose)f.onClose();for(var e;e=c.handlers.pop();)e.remove();f&&f.domNode&&this.hide(f);d&&d()}}});return s.popup=new j})},"dijit/_HasDropDown":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/keys,dojo/_base/lang,dojo/on,dojo/window,./registry,./focus,./popup,./_FocusMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return l("dijit._HasDropDown",s,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(a){if(!this.disabled&&!this.readOnly)a.preventDefault(),this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp"),this.toggleDropDown()},_onDropDownMouseUp:function(a){a&&this._docHandler&&
this.disconnect(this._docHandler);var c=this.dropDown,f=!1;if(a&&this._opened){var e=d.position(this._buttonNode,!0);if(!(a.pageX>=e.x&&a.pageX<=e.x+e.w)||!(a.pageY>=e.y&&a.pageY<=e.y+e.h)){for(e=a.target;e&&!f;)h.contains(e,"dijitPopup")?f=!0:e=e.parentNode;if(f){e=a.target;if(c.onItemClick){for(var o;e&&!(o=t.byNode(e));)e=e.parentNode;if(o&&o.onClick&&o.getParent)o.getParent().onItemClick(o,a)}return}}}if(this._opened){if(c.focus&&!1!==c.autoFocus)this._focusDropDownTimer=this.defer(function(){c.focus();
delete this._focusDropDownTimer})}else this.focus&&this.defer("focus");if(b("touch"))this._justGotMouseUp=!0,this.defer(function(){this._justGotMouseUp=!1})},_onDropDownClick:function(a){b("touch")&&!this._justGotMouseUp&&(this._onDropDownMouseDown(a),this._onDropDownMouseUp(a));this._stopClickEvents&&k.stop(a)},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;
var a={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";h.add(this._arrowWrapperNode||this._buttonNode,"dijit"+a+"ArrowButton")},postCreate:function(){this.inherited(arguments);var a=this.focusNode||this.domNode;this.own(n(this._buttonNode,"mousedown",f.hitch(this,"_onDropDownMouseDown")),n(this._buttonNode,"click",f.hitch(this,"_onDropDownClick")),n(a,
"keydown",f.hitch(this,"_onKey")),n(a,"keyup",f.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown);this.inherited(arguments)},_onKey:function(b){if(!this.disabled&&!this.readOnly){var c=this.dropDown,f=b.target;if(c&&this._opened&&c.handleKey&&!1===c.handleKey(b))k.stop(b);else if(c&&this._opened&&b.keyCode==a.ESCAPE)this.closeDropDown(),k.stop(b);else if(!this._opened&&(b.keyCode==a.DOWN_ARROW||(b.keyCode==
a.ENTER||b.keyCode==a.SPACE)&&("input"!==(f.tagName||"").toLowerCase()||f.type&&"text"!==f.type.toLowerCase())))this._toggleOnKeyUp=!0,k.stop(b)}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var a=this.dropDown;a&&a.focus&&this.defer(f.hitch(a,"focus"),1)}},_onBlur:function(){this.closeDropDown(q.curNode&&this.dropDown&&j.isDescendant(q.curNode,this.dropDown.domNode));this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(a){a()},
loadAndOpenDropDown:function(){var a=new m,b=f.hitch(this,function(){this.openDropDown();a.resolve(this.dropDown)});this.isLoaded()?b():this.loadDropDown(b);return a},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown():this.loadAndOpenDropDown())},openDropDown:function(){var a=this.dropDown,b=a.domNode,n=this._aroundNode||this.domNode,s=this;if(!this._preparedNode){this._preparedNode=!0;if(b.style.width)this._explicitDDWidth=!0;if(b.style.height)this._explicitDDHeight=
!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var j={display:"",visibility:"hidden"};if(!this._explicitDDWidth)j.width="";if(!this._explicitDDHeight)j.height="";c.set(b,j);j=this.maxHeight;if(-1==j)var j=r.getBox(this.ownerDocument),q=d.position(n,!1),j=Math.floor(Math.max(q.y,j.h-(q.y+q.h)));o.moveOffScreen(a);a.startup&&!a._started&&a.startup();var q=d.getMarginSize(b),t=j&&q.h>j;c.set(b,{overflowX:"visible",overflowY:t?"auto":"visible"});t?(q.h=j,"w"in q&&(q.w+=16)):delete q.h;this.forceWidth?
q.w=n.offsetWidth:this.autoWidth?q.w=Math.max(q.w,n.offsetWidth):delete q.w;f.isFunction(a.resize)?a.resize(q):d.setMarginBox(b,q)}n=o.open({parent:this,popup:a,around:n,orient:this.dropDownPosition,onExecute:function(){s.closeDropDown(!0)},onCancel:function(){s.closeDropDown(!0)},onClose:function(){e.set(s._popupStateNode,"popupActive",!1);h.remove(s._popupStateNode,"dijitHasDropDownOpen");s._set("_opened",!1)}});e.set(this._popupStateNode,"popupActive","true");h.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",a.id);"presentation"!==b.getAttribute("role")&&!b.getAttribute("aria-labelledby")&&b.setAttribute("aria-labelledby",this.id);return n},closeDropDown:function(a){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer);if(this._opened)this._popupStateNode.setAttribute("aria-expanded","false"),a&&this.focus(),o.close(this.dropDown),this._opened=
!1}})})},"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n\t><span class=\'dijitReset dijitInline dijitButtonNode\'\n\t\tdata-dojo-attach-event="ondijitclick:_onClick" data-dojo-attach-point="_buttonNode"\n\t\t><span class="dijitReset dijitStretch dijitButtonContents"\n\t\t\tdata-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n\t\t\trole="button" aria-haspopup="true" aria-labelledby="${id}_label"\n\t\t\t><span class="dijitReset dijitInline dijitIcon"\n\t\t\t\tdata-dojo-attach-point="iconNode"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitButtonText"\n\t\t\t\tdata-dojo-attach-point="containerNode"\n\t\t\t\tid="${id}_label"\n\t\t\t></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n\t\t\t><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n\t\tdata-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',
"dijit/form/_DateTimeTextBox":function(){define("dojo/date,dojo/date/locale,dojo/date/stamp,dojo/_base/declare,dojo/_base/lang,./RangeBoundTextBox,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(l,m,k,j,e,h,d,c){return j("dijit.form._DateTimeTextBox",[h,d],{templateString:c,hasDownArrow:!0,cssStateNodes:{_buttonNode:"dijitDownArrowButton"},pattern:m.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},compare:function(b,
a){var c=this._isInvalidDate(b),d=this._isInvalidDate(a);return c?d?0:-1:d?1:l.compare(b,a,this._selector)},forceWidth:!0,format:function(b,a){return!b?"":this.dateLocaleModule.format(b,a)},parse:function(b,a){return this.dateLocaleModule.parse(b,a)||(this._isEmpty(b)?null:void 0)},serialize:function(b,a){b.toGregorian&&(b=b.toGregorian());return k.toISOString(b,a)},dropDownDefaultValue:new Date,value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(b){this.dateModule=
b.datePackage?e.getObject(b.datePackage,!1):l;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=b.datePackage?e.getObject(b.datePackage+".locale",!1):m;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString()},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow)this._buttonNode.style.display="none";if(!this.hasDownArrow)this._buttonNode=this.domNode,this.baseClass+=" dijitComboBoxOpenOnClick"},_setConstraintsAttr:function(b){b.selector=
this._selector;b.fullYear=!0;var a=k.fromISOString;if("string"==typeof b.min)b.min=a(b.min);if("string"==typeof b.max)b.max=a(b.max);this.inherited(arguments)},_isInvalidDate:function(b){return!b||isNaN(b)||"object"!=typeof b||b.toString()==this._invalidDate},_setValueAttr:function(b,a,c){void 0!==b&&("string"==typeof b&&(b=k.fromISOString(b)),this._isInvalidDate(b)&&(b=null),b instanceof Date&&!(this.dateClassObj instanceof Date)&&(b=new this.dateClassObj(b)));this.inherited(arguments);if(this.value instanceof
Date)this.filterString="";this.dropDown&&this.dropDown.set("value",b,!1)},_set:function(b,a){"value"==b&&this.value instanceof Date&&0==this.compare(a,this.value)||this.inherited(arguments)},_setDropDownDefaultValueAttr:function(b){this._isInvalidDate(b)&&(b=new this.dateClassObj);this.dropDownDefaultValue=b},openDropDown:function(b){this.dropDown&&this.dropDown.destroy();var a=e.isString(this.popupClass)?e.getObject(this.popupClass,!1):this.popupClass,c=this,d=this.get("value");this.dropDown=new a({onChange:function(a){c.set("value",
a,!0)},id:this.id+"_popup",dir:c.dir,lang:c.lang,value:d,currentFocus:!this._isInvalidDate(d)?d:this.dropDownDefaultValue,constraints:c.constraints,filterString:c.filterString,datePackage:c.params.datePackage,isDisabledDate:function(a){return!c.rangeCheck(a,c.constraints)}});this.inherited(arguments)},_getDisplayedValueAttr:function(){return this.textbox.value},_setDisplayedValueAttr:function(b,a){this._setValueAttr(this.parse(b,this.constraints),a,b)}})})},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare",
"dojo/i18n","./MappedTextBox"],function(l,m,k){return l("dijit.form.RangeBoundTextBox",k,{rangeMessage:"",rangeCheck:function(j,e){return("min"in e?0<=this.compare(j,e.min):!0)&&("max"in e?0>=this.compare(j,e.max):!0)},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints)},_isDefinitelyOutOfRange:function(){var j=this.get("value");if(null==j)return!1;var e=!1;if("min"in this.constraints)e=this.constraints.min,e=0>this.compare(j,"number"==typeof e&&0<=e&&0!=j?0:e);if(!e&&
"max"in this.constraints)e=this.constraints.max,e=0<this.compare(j,"number"!=typeof e||0<e?e:0);return e},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange()},isValid:function(j){return this.inherited(arguments)&&(this._isEmpty(this.textbox.value)&&!this.required||this.isInRange(j))},getErrorMessage:function(j){var e=this.get("value");return null!=e&&""!==e&&("number"!=typeof e||!isNaN(e))&&!this.isInRange(j)?this.rangeMessage:this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);
if(!this.rangeMessage)this.messages=m.getLocalization("dijit.form","validate",this.lang),this.rangeMessage=this.messages.rangeMessage},applyTextDir:function(){}})})},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(l,m,k){return l("dijit.form.MappedTextBox",k,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting=""},_setNameAttr:null,serialize:function(j){return j.toString?j.toString():""},toString:function(){var j=
this.filter(this.get("value"));return null!=j?"string"==typeof j?j:this.serialize(j,this.constraints):""},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this.valueNode=m.place("<input type='hidden'"+(this.name?' name="'+this.name.replace(/"/g,"&quot;")+'"':"")+"/>",this.textbox,"after")},reset:function(){this.valueNode.value="";this.inherited(arguments)}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/i18n,./TextBox,../Tooltip,dojo/text!./templates/ValidationTextBox.html,dojo/i18n!./nls/validate".split(","),
function(l,m,k,j,e,h){var d;return d=l("dijit.form.ValidationTextBox",j,{templateString:h,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(c,b){b!=d.prototype[c]&&(m.deprecated("ValidationTextBox id="+this.id+", set('"+c+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",b))},_setRegExpGenAttr:function(c){this._deprecateRegExp("regExpGen",
c);this.regExpGen=this._getPatternAttr},_setRegExpAttr:function(c){this._deprecateRegExp("regExp",c)},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused)},validator:function(c,b){return RegExp("^(?:"+this._getPatternAttr(b)+")"+(this.required?"":"?")+"$").test(c)&&(!this.required||!this._isEmpty(c))&&(this._isEmpty(c)||void 0!==this.parse(c,b))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.constraints)},_isEmpty:function(c){return(this.trim?/^\s*$/:/^$/).test(c)},getErrorMessage:function(){var c="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,b="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?c:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?b:c},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(c){var b=
"",a=this.disabled||this.isValid(c);if(a)this._maskValidSubsetError=!0;var f=this._isEmpty(this.textbox.value),d=!a&&c&&this._isValidSubset();this._set("state",a?"":((!this._hasBeenBlurred||c)&&f||d)&&(this._maskValidSubsetError||d&&!this._hasBeenBlurred&&c)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid",a?"false":"true");"Error"==this.state?(this._maskValidSubsetError=c&&d,b=this.getErrorMessage(c)):"Incomplete"==this.state?(b=this.getPromptMessage(c),this._maskValidSubsetError=
!this._hasBeenBlurred||c):f&&(b=this.getPromptMessage(c));this.set("message",b);return a},displayMessage:function(c){c&&this.focused?e.show(c,this.domNode,this.tooltipPosition,!this.isLeftToRight()):e.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(){this.constraints={};this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(c){if(!c.locale&&
this.lang)c.locale=this.lang;this._set("constraints",c);this._refreshState()},_setPatternAttr:function(c){this._set("pattern",c)},_getPatternAttr:function(c){var b=this.pattern;"function"==(typeof b).toLowerCase()&&(b=this.pattern(c||this.constraints));if(b!=this._lastRegExp){var a="";this._lastRegExp=b;".*"!=b&&b.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(b){switch(b.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":a+=b;break;case ")":a+="|$)";
break;default:a+="(?:"+b+"|$)"}});try{"".search(a)}catch(f){a=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+a+")$"}return b},postMixInProperties:function(){this.inherited(arguments);this.messages=k.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(c){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(c){this._set("required",c);this.focusNode.setAttribute("aria-required",
c);this._refreshState()},_setMessageAttr:function(c){this._set("message",c);this.displayMessage(c)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)}})})},"dijit/form/TextBox":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/_base/kernel,dojo/_base/lang,dojo/sniff,./_FormValueWidget,./_TextBoxMixin,dojo/text!./templates/TextBox.html,../main".split(","),function(l,m,k,j,e,h,d,c,
b,a){l=l("dijit.form.TextBox",[d,c],{templateString:b,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:h("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>h("ie")&&this.defer(function(){try{var a=k.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_onInput:function(a){this.inherited(arguments);this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_setPlaceHolderAttr:function(a){this._set("placeHolder",
a);if(!this._phspan)this._attachPoints.push("_phspan"),this._phspan=m.create("span",{onmousedown:function(a){a.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_updatePlaceHolder:function(){if(this._phspan)this._phspan.style.display=this.placeHolder&&!this.focused&&!this.textbox.value?"":"none"},_setValueAttr:function(a,b,c){this.inherited(arguments);
this._updatePlaceHolder()},getDisplayedValue:function(){j.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){j.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){if(!this.disabled&&(this.inherited(arguments),this._updatePlaceHolder(),h("mozilla")&&this.selectOnClick))this.textbox.selectionStart=
this.textbox.selectionEnd=void 0},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});if(h("ie"))l.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},a._setSelectionRange=c._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),
a.select())};return l})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(l,m,k,j){return l("dijit.form._FormValueWidget",[k,j],{_layoutHackIE7:function(){if(7==m("ie"))for(var e=this.domNode,h=e.parentNode,d=e.firstChild||e,c=d.style.filter,b=this;h&&0==h.clientHeight;)(function(){var a=b.connect(h,"onscroll",function(){b.disconnect(a);d.style.filter=(new Date).getMilliseconds();b.defer(function(){d.style.filter=c})})})(),
h=h.parentNode}})})},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(l,m,k,j,e){return l("dijit.form._FormValueMixin",e,{readOnly:!1,_setReadOnlyAttr:function(e){m.set(this.focusNode,"readOnly",e);this._set("readOnly",e)},postCreate:function(){this.inherited(arguments);j("ie")&&this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);if(void 0===this._resetValue)this._lastValueReported=this._resetValue=
this.value},_setValueAttr:function(e,d){this._handleOnChange(e,d)},_handleOnChange:function(e,d){this._set("value",e);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)},_onKeyDown:function(e){if(e.keyCode==k.ESCAPE&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(9>j("ie")||j("ie")&&j("quirks"))){e.preventDefault();var d=e.srcElement,c=d.ownerDocument.createEventObject();c.keyCode=k.ESCAPE;
c.shiftKey=e.shiftKey;d.fireEvent("onkeypress",c)}}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,../main".split(","),function(l,m,k,j,e,h,d,c){var b=m("dijit.form._TextBoxMixin",null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var d;
void 0!==a&&(d=this.filter(a),"string"!=typeof c&&(c=null!==d&&("number"!=typeof d||!isNaN(d))?this.filter(this.format(d,this.constraints)):""));if(null!=c&&("number"!=typeof c||!isNaN(c))&&this.textbox.value!=c)this.textbox.value=c,this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,c);this.inherited(arguments,[d,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==
a?a="":"string"!=typeof a&&(a=""+a);this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"));"auto"==this.textDir&&this.applyTextDir(this.focusNode,a)},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(a){"auto"==this.textDir&&this.applyTextDir(this.focusNode,this.focusNode.value);this._processInput(a)},_processInput:function(){this._refreshState();
this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(d(this.textbox,"keydown, keypress, paste, cut, input, compositionend",h.hitch(this,function(a){var b;if("keydown"==a.type){b=a.keyCode;switch(b){case e.SHIFT:case e.ALT:case e.CTRL:case e.META:case e.CAPS_LOCK:case e.NUM_LOCK:case e.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&!a.altKey){switch(b){case e.NUMPAD_0:case e.NUMPAD_1:case e.NUMPAD_2:case e.NUMPAD_3:case e.NUMPAD_4:case e.NUMPAD_5:case e.NUMPAD_6:case e.NUMPAD_7:case e.NUMPAD_8:case e.NUMPAD_9:case e.NUMPAD_MULTIPLY:case e.NUMPAD_PLUS:case e.NUMPAD_ENTER:case e.NUMPAD_MINUS:case e.NUMPAD_PERIOD:case e.NUMPAD_DIVIDE:return}if(65<=
b&&90>=b||48<=b&&57>=b||b==e.SPACE)return;b=!1;for(var c in e)if(e[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==e.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}if("input"==a.type){if(this.__skipInputEvent){this.__skipInputEvent=
!1;return}}else this.__skipInputEvent=!0;var d={faux:!0},j;for(j in a)"layerX"!=j&&"layerY"!=j&&(c=a[j],"function"!=typeof c&&"undefined"!=typeof c&&(d[j]=c));h.mixin(d,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){d._wasConsumed=!0;a.preventDefault()},stopPropagation:function(){a.stopPropagation()}});!1===this.onInput(d)&&(d.preventDefault(),d.stopPropagation());d._wasConsumed||this.defer(function(){this._onInput(d)})})))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;
if("string"!=typeof a)return a;this.trim&&(a=h.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){if(!this.disabled&&
!this.readOnly){if(this.selectOnClick&&"mouse"==a)this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;this._isTextSelected()||b.selectInputText(this.textbox)}),this.defer(function(){if(this._selectOnClickHandle)this.disconnect(this._selectOnClickHandle),this._selectOnClickHandle=null},500);this.inherited(arguments);this._refreshState()}},reset:function(){this.textbox.value="";this.inherited(arguments)},
_setTextDirAttr:function(a){if(!this._created||this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.focusNode.value)}});b._setSelectionRange=c._setSelectionRange=function(a,b,c){a.setSelectionRange&&a.setSelectionRange(b,c)};b.selectInputText=c.selectInputText=function(a,c,d){a=k.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),b._setSelectionRange(a,c,d)}catch(e){}};return b})},"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n\t\t\t${!nameAttrSetting} type=\'${type}\'\n\t/></div\n></div>\n',
"url:dijit/form/templates/DropDownBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}"\n\trole="combobox"\n\taria-haspopup="true"\n\tdata-dojo-attach-point="_popupStateNode"\n\t><div class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\'\n\t\tdata-dojo-attach-point="_buttonNode" role="presentation"\n\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' ${!nameAttrSetting} type="text" autocomplete="off"\n\t\t\tdata-dojo-attach-point="textbox,focusNode" role="textbox"\n\t/></div\n></div>\n',
"dijit/form/FilteringSelect":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/lang,dojo/when,./MappedTextBox,./ComboBoxMixin".split(","),function(l,m,k,j,e,h){return m("dijit.form.FilteringSelect",[e,h],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return!!this.item||!this.required&&""==this.get("displayedValue")},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(d,c,b,a){c&&
c[this.searchAttr]!==this._lastQuery||!c&&d.length&&this.store.getIdentity(d[0])!=this._lastQuery||(d.length?this.set("item",d[0],a):this.set("value","",a||void 0===a&&!this.focused,this.textbox.value,null))},_openResultList:function(d,c,b){c[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),void 0===this.item&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(d,c,b,a){this._onChangeActive||(c=null);
if(void 0===a){if(null===d||""===d)if(d="",!k.isString(b)){this._setDisplayedValueAttr(b||"",c);return}var f=this;this._lastQuery=d;j(this.store.get(d),function(a){f._callbackSetLabel(a?[a]:[],void 0,void 0,c)})}else this.valueNode.value=d,this.inherited(arguments)},_setItemAttr:function(d,c,b){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(d){return d.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(d,c){null==d&&(d="");if(!this._created){if(!("displayedValue"in
this.params))return;c=!1}if(this.store){this.closeDropDown();var b=k.clone(this.query),a=this._getDisplayQueryString(d),f;this.store._oldAPI?f=a:(f=l.patternToRegExp(a,this.ignoreCase),f.toString=function(){return a});this._lastQuery=b[this.searchAttr]=f;this._lastDisplayedValue=this.textbox.value=d;this._set("displayedValue",d);var e=this,h={ignoreCase:this.ignoreCase,deep:!0};k.mixin(h,this.fetchProperties);this._fetchHandle=this.store.query(b,h);j(this._fetchHandle,function(a){e._fetchHandle=null;
e._callbackSetLabel(a||[],b,h,c)},function(a){e._fetchHandle=null;e._cancelingQuery||console.error("dijit.form.FilteringSelect: "+a.toString())})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})})},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(l){var m={};l.setObject("dojo.data.util.filter",m);m.patternToRegExp=function(k,j){for(var e="^",h=null,d=0;d<k.length;d++)switch(h=k.charAt(d),h){case "\\":e+=h;d++;e+=k.charAt(d);break;case "*":e+=".*";break;
case "?":e+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":e+="\\";default:e+=h}e+="$";return j?RegExp(e,"mi"):RegExp(e,"m")};return m})},"dijit/form/ComboBoxMixin":function(){define("dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/store/util/QueryResults,./_AutoCompleterMixin,./_ComboBoxMenu,../_HasDropDown,dojo/text!./templates/DropDownBox.html".split(","),function(l,m,k,j,e,h,d,c,b){return l("dijit.form.ComboBoxMixin",
[c,h],{dropDownClass:d,hasDownArrow:!0,templateString:b,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{_buttonNode:"dijitDownArrowButton"},_setHasDownArrowAttr:function(a){this._set("hasDownArrow",a);this._buttonNode.style.display=a?"":"none"},_showResultList:function(){this.displayMessage("");this.inherited(arguments)},_setStoreAttr:function(a){a.get||j.mixin(a,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});
return b.promise},query:function(a,b){var c=new m(function(){d.abort&&d.abort()});c.total=new m;var d=this.fetch(j.mixin({query:a,onBegin:function(a){c.total.resolve(a)},onComplete:function(a){c.resolve(a)},onError:function(a){c.reject(a)}},b));return e(c)}});this._set("store",a)},postMixInProperties:function(){var a=this.params.store||this.store;a&&this._setStoreAttr(a);this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var b=this.declaredClass;j.mixin(this.store,{getValue:function(a,
c){k.deprecated(b+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return a[c]},getLabel:function(a){k.deprecated(b+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return a.name},fetch:function(a){k.deprecated(b+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");require(["dojo/data/ObjectStore"],j.hitch(this,function(b){(new b({objectStore:this})).fetch(a)}))}})}}})})},"dijit/form/_AutoCompleterMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/regexp,dojo/sniff,dojo/string,./DataList,../registry,./_TextBoxMixin,./_SearchMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return m("dijit.form._AutoCompleterMixin",t,{item:null,autoComplete:!0,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:!1,_getCaretPos:function(a){var c=0;if("number"==typeof a.selectionStart)c=a.selectionStart;else if(b("ie")){var f=a.ownerDocument.selection.createRange().duplicate(),a=a.createTextRange();f.move("character",0);a.move("character",0);try{a.setEndPoint("EndToEnd",f),c=(""+a.text).replace(/\r/g,"").length}catch(d){}}return c},
_setCaretPos:function(a,b){b=parseInt(b);r.selectInputText(a,b,b)},_setDisabledAttr:function(a){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",a?"true":"false")},_onKey:function(a){if(!(32<=a.charCode)){var b=a.charCode||a.keyCode;if(!(b==e.ALT||b==e.CTRL||b==e.META||b==e.SHIFT)){var c=this.dropDown,f=null;this._abortQuery();this.inherited(arguments);if(!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(f=c.getHighlightedOption()),b){case e.PAGE_DOWN:case e.DOWN_ARROW:case e.PAGE_UP:case e.UP_ARROW:this._opened&&
this._announceOption(f);j.stop(a);break;case e.ENTER:if(f){if(f==c.nextButton){this._nextSearch(1);j.stop(a);break}else if(f==c.previousButton){this._nextSearch(-1);j.stop(a);break}j.stop(a)}else this._setBlurValue(),this._setCaretPos(this.focusNode,this.focusNode.value.length);case e.TAB:b=this.get("displayedValue");if(c&&(b==c._messages.previousMessage||b==c._messages.nextMessage))break;f&&this._selectOption(f);case e.ESCAPE:if(this._opened)this._lastQuery=null,this.closeDropDown()}}}},_autoCompleteText:function(a){var b=
this.focusNode;r.selectInputText(b,b.value.length);var c=this.ignoreCase?"toLowerCase":"substr";if(0==a[c](0).indexOf(this.focusNode.value[c](0))){if(c=this.autoComplete?this._getCaretPos(b):b.value.length,c+1>b.value.length)b.value=a,r.selectInputText(b,c)}else b.value=a,r.selectInputText(b)},_openResultList:function(a,b,c){var f=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();!a.length&&0==c.start?this.closeDropDown():(this._nextSearch=this.dropDown.onPage=h.hitch(this,function(b){a.nextPage(-1!==
b);this.focus()}),this.dropDown.createOptions(a,c,h.hitch(this,"_getMenuLabelFromItem")),this._showResultList(),"direction"in c?(c.direction?this.dropDown.highlightFirstOption():c.direction||this.dropDown.highlightLastOption(),f&&this._announceOption(this.dropDown.getHighlightedOption())):this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(b[this.searchAttr].toString())&&this._announceOption(this.dropDown.containerNode.firstChild.nextSibling))},_showResultList:function(){this.closeDropDown(!0);
this.openDropDown();this.domNode.setAttribute("aria-expanded","true")},loadDropDown:function(){this._startSearchAll()},isLoaded:function(){return!1},closeDropDown:function(){this._abortQuery();this._opened&&(this.inherited(arguments),this.domNode.setAttribute("aria-expanded","false"))},_setBlurValue:function(){var a=this.get("displayedValue"),b=this.dropDown;b&&(a==b._messages.previousMessage||a==b._messages.nextMessage)?this._setValueAttr(this._lastValueReported,!0):"undefined"==typeof this.item?
(this.item=null,this.set("displayedValue",a)):(this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0),this._refreshState());this.focusNode.removeAttribute("aria-activedescendant")},_setItemAttr:function(a,b,c){var f="";a&&(c||(c=this.store._oldAPI?this.store.getValue(a,this.searchAttr):a[this.searchAttr]),f=this._getValueField()!=this.searchAttr?this.store.getIdentity(a):c);this.set("value",f,b,c,a)},_announceOption:function(a){if(a){var b;if(a==this.dropDown.nextButton||a==this.dropDown.previousButton)b=
a.innerHTML,this.item=void 0,this.value="";else{var c=this.dropDown.items[a.getAttribute("item")];b=(this.store._oldAPI?this.store.getValue(c,this.searchAttr):c[this.searchAttr]).toString();this.set("item",c,!1,b)}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",k.get(a,"id"));this._autoCompleteText(b)}},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._setCaretPos(this.focusNode,this.focusNode.value.length);
this._handleOnChange(this.value,!0);this.focusNode.removeAttribute("aria-activedescendant")},_startSearchAll:function(){this._startSearch("")},_startSearchFromInput:function(){this.item=void 0;this.inherited(arguments)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new (h.isString(this.dropDownClass)?h.getObject(this.dropDownClass,!1):this.dropDownClass)({onChange:h.hitch(this,this._selectOption),id:b,dir:this.dir,textDir:this.textDir})}this._lastInput=a;this.inherited(arguments)},
_getValueField:function(){return this.searchAttr},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&(this.store=new f({},this.srcNodeRef),!("value"in this.params))){var a=this.item=this.store.fetchSelectedItem();if(a){var b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(a,b):a[b]}}},postCreate:function(){var a=d('label[for="'+this.id+'"]');if(a.length){if(!a[0].id)a[0].id=this.id+"_label";this.domNode.setAttribute("aria-labelledby",a[0].id)}this.inherited(arguments);
this.connect(this,"onSearch","_openResultList")},_getMenuLabelFromItem:function(a){var a=this.labelFunc(a,this.store),b=this.labelType;"none"!=this.highlightMatch&&"text"==this.labelType&&this._lastInput&&(a=this.doHighlight(a,this._lastInput),b="html");return{html:"html"==b,label:a}},doHighlight:function(a,b){var f=(this.ignoreCase?"i":"")+("all"==this.highlightMatch?"g":""),d=this.queryExpr.indexOf("${0}"),b=c.escapeString(b);return this._escapeHtml(a.replace(RegExp((0==d?"^":"")+"("+b+")"+(d==
this.queryExpr.length-4?"$":""),f),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,'<span class="dijitComboBoxHighlightMatch">$1</span>')},_escapeHtml:function(a){return a=(""+a).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;")},reset:function(){this.item=null;this.inherited(arguments)},labelFunc:function(a,b){return(b._oldAPI?b.getValue(a,this.labelAttr||this.searchAttr):a[this.labelAttr||this.searchAttr]).toString()},_setValueAttr:function(a,b,c,
f){this._set("item",f||null);null==a&&(a="");this.inherited(arguments)},_setTextDirAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDown._set("textDir",a)}})})},"dijit/form/DataList":function(){define("dojo/_base/declare,dojo/dom,dojo/_base/lang,dojo/query,dojo/store/Memory,../registry".split(","),function(l,m,k,j,e,h){function d(c){return{id:c.value,value:c.value,name:k.trim(c.innerText||c.textContent||"")}}return l("dijit.form.DataList",e,{constructor:function(c,b){this.domNode=
m.byId(b);k.mixin(this,c);this.id&&h.add(this);this.domNode.style.display="none";this.inherited(arguments,[{data:j("option",this.domNode).map(d)}])},destroy:function(){h.remove(this.id)},fetchSelectedItem:function(){var c=j("> option[selected]",this.domNode)[0]||j("> option",this.domNode)[0];return c&&d(c)}})})},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(l,m,k){return l("dojo.store.Memory",null,{constructor:function(j){for(var e in j)this[e]=
j[e];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:k,get:function(j){return this.data[this.index[j]]},getIdentity:function(j){return j[this.idProperty]},put:function(j,e){var h=this.data,d=this.index,c=this.idProperty,c=j[c]=e&&"id"in e?e.id:c in j?j[c]:Math.random();if(c in d){if(e&&!1===e.overwrite)throw Error("Object already exists");h[d[c]]=j}else d[c]=h.push(j)-1;return c},add:function(j,e){(e=e||{}).overwrite=!1;return this.put(j,e)},remove:function(j){var e=
this.index,h=this.data;if(j in e)return h.splice(e[j],1),this.setData(h),!0},query:function(j,e){return m(this.queryEngine(j,e)(this.data))},setData:function(j){var a;j.items?(this.idProperty=j.identifier,a=this.data=j.items,j=a):this.data=j;this.index={};for(var e=0,h=j.length;e<h;e++)this.index[j[e][this.idProperty]]=e}})})},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(l){return function(m,k){function j(e){var e=l.filter(e,m),d=k&&k.sort;d&&e.sort("function"==
typeof d?d:function(b,a){for(var c,e=0;c=d[e];e++){var h=b[c.attribute],j=a[c.attribute];if(h!=j)return!!c.descending==(null==h||h>j)?-1:1}return 0});if(k&&(k.start||k.count)){var c=e.length,e=e.slice(k.start||0,(k.start||0)+(k.count||Infinity));e.total=c}return e}switch(typeof m){default:throw Error("Can not query with a "+typeof m);case "object":case "undefined":var e=m,m=function(h){for(var d in e){var c=e[d];if(c&&c.test){if(!c.test(h[d],h))return!1}else if(c!=h[d])return!1}return!0};break;case "string":if(!this[m])throw Error("No filter function "+
m+" was found in store");m=this[m];case "function":}j.matches=m;return j}})},"dijit/form/_SearchMixin":function(){define("dojo/data/util/filter,dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/query,dojo/sniff,dojo/string,dojo/when,../registry".split(","),function(l,m,k,j,e,h,d,c,b,a){return m("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:!0,_abortQuery:function(){if(this.searchTimer)this.searchTimer=
this.searchTimer.remove();if(this._queryDeferHandle)this._queryDeferHandle=this._queryDeferHandle.remove();if(this._fetchHandle){if(this._fetchHandle.abort)this._cancelingQuery=!0,this._fetchHandle.abort(),this._cancelingQuery=!1;if(this._fetchHandle.cancel)this._cancelingQuery=!0,this._fetchHandle.cancel(),this._cancelingQuery=!1;this._fetchHandle=null}},_processInput:function(a){if(!this.disabled&&!this.readOnly){var b=a.charOrCode;if(!("type"in a&&"key"==a.type.substring(0,3)&&(a.altKey||(a.ctrlKey||
a.metaKey)&&"x"!=b&&"v"!=b||b==j.SHIFT))){this._prev_key_backspace=a=!1;switch(b){case j.DELETE:case j.BACKSPACE:a=this._maskValidSubsetError=this._prev_key_backspace=!0;break;default:a="string"==typeof b||229==b}if(a)if(this.store)this.searchTimer=this.defer("_startSearchFromInput",1);else this.onSearch()}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"))},_startSearch:function(a){this._abortQuery();var d=this,h=e.clone(this.query),
j={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:!0}},q=c.substitute(this.queryExpr,[a]),o,s=function(){var a=d._fetchHandle=d.store.query(h,j);!d.disabled&&!(d.readOnly||o!==d._lastQuery)&&b(a,function(c){d._fetchHandle=null;!d.disabled&&!d.readOnly&&o===d._lastQuery&&b(a.total,function(a){c.total=a;var b=d.pageSize;if(isNaN(b)||b>c.total)b=c.total;c.nextPage=function(a){j.direction=a=!1!==a;j.count=b;if(a){if(j.start+=c.length,j.start>=c.total)j.count=0}else if(j.start-=
b,0>j.start)j.count=Math.max(b+j.start,0),j.start=0;0>=j.count?(c.length=0,d.onSearch(c,h,j)):s()};d.onSearch(c,h,j)})},function(a){d._fetchHandle=null;d._cancelingQuery||console.error(d.declaredClass+" "+a.toString())})};e.mixin(j,this.fetchProperties);this.store._oldAPI?o=q:(o=l.patternToRegExp(q,this.ignoreCase),o.toString=function(){return q});this._lastQuery=h[this.searchAttr]=o;this._queryDeferHandle=this.defer(s,this.searchDelay)},constructor:function(){this.query={};this.fetchProperties={}},
postMixInProperties:function(){if(!this.store){var b=this.list;if(b)this.store=a.byId(b)}this.inherited(arguments)}})})},"dijit/form/_ComboBoxMenu":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/keys,../_WidgetBase,../_TemplatedMixin,./_ComboBoxMenuMixin,./_ListMouseMixin".split(","),function(l,m,k,j,e,h,d,c){return l("dijit.form._ComboBoxMenu",[e,h,c,d],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'><div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div><div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div></div>",
baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);this.isLeftToRight()||(m.add(this.previousButton,"dijitMenuItemRtl"),m.add(this.nextButton,"dijitMenuItemRtl"));this.containerNode.setAttribute("role","listbox")},_createMenuItem:function(){var b=this.ownerDocument.createElement("div");b.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");b.setAttribute("role","option");return b},onHover:function(b){m.add(b,"dijitMenuItemHover")},onUnhover:function(b){m.remove(b,
"dijitMenuItemHover")},onSelect:function(b){m.add(b,"dijitMenuItemSelected")},onDeselect:function(b){m.remove(b,"dijitMenuItemSelected")},_page:function(b){var a=0,c=this.domNode.scrollTop,d=k.get(this.domNode,"height");for(this.getHighlightedOption()||this.selectNextNode();a<d;){var e=this.getHighlightedOption();if(b){if(!e.previousSibling||"none"==e.previousSibling.style.display)break;this.selectPreviousNode()}else{if(!e.nextSibling||"none"==e.nextSibling.style.display)break;this.selectNextNode()}e=
this.domNode.scrollTop;a+=(e-c)*(b?-1:1);c=e}},handleKey:function(b){switch(b.keyCode){case j.DOWN_ARROW:return this.selectNextNode(),!1;case j.PAGE_DOWN:return this._page(!1),!1;case j.UP_ARROW:return this.selectPreviousNode(),!1;case j.PAGE_UP:return this._page(!0),!1;default:return!0}}})})},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(l,m,k,j){return m("dijit.form._ComboBoxMenuMixin",
null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=j.getLocalization("dijit.form","ComboBox",this.lang)},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage},_setValueAttr:function(e){this.value=e;this.onChange(e)},onClick:function(e){if(e==this.previousButton)this._setSelectedAttr(null),this.onPage(-1);else if(e==this.nextButton)this._setSelectedAttr(null),
this.onPage(1);else this.onChange(e)},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null)},_createOption:function(e,h){var d=this._createMenuItem(),c=h(e);c.html?d.innerHTML=c.label:d.appendChild(d.ownerDocument.createTextNode(c.label));if(""==d.innerHTML)d.innerHTML="&#160;";this.applyTextDir(d,d.innerText||d.textContent||"");return d},createOptions:function(e,h,d){this.items=e;this.previousButton.style.display=0==h.start?"none":"";k.set(this.previousButton,"id",
this.id+"_prev");l.forEach(e,function(b,a){var c=this._createOption(b,d);c.setAttribute("item",a);k.set(c,"id",this.id+a);this.nextButton.parentNode.insertBefore(c,this.nextButton)},this);var c=!1;e.total&&!e.total.then&&-1!=e.total?h.start+h.count<e.total?c=!0:h.start+h.count>e.total&&h.count==e.length&&(c=!0):h.count==e.length&&(c=!0);this.nextButton.style.display=c?"":"none";k.set(this.nextButton,"id",this.id+"_next")},clearResultList:function(){for(var e=this.containerNode;2<e.childNodes.length;)e.removeChild(e.childNodes[e.childNodes.length-
2]);this._setSelectedAttr(null)},highlightFirstOption:function(){this.selectFirstNode()},highlightLastOption:function(){this.selectLastNode()},selectFirstNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.previousButton&&this.selectNextNode()},selectLastNode:function(){this.inherited(arguments);this.getHighlightedOption()==this.nextButton&&this.selectPreviousNode()},getHighlightedOption:function(){return this.selected}})})},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare",
"dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(l,m,k,j,e){return l("dijit.form._ListMouseMixin",e,{postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,j.press,function(e){e.preventDefault()}));this._listConnect(j.press,"_onMouseDown");this._listConnect(j.release,"_onMouseUp");this._listConnect(m.enter,"_onMouseOver");this._listConnect(m.leave,"_onMouseOut")},_onMouseDown:function(e,d){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;this._isDragging=
!0;this._setSelectedAttr(d)},_onMouseUp:function(e,d){this._isDragging=!1;var c=this.selected,b=this._hoveredNode;if(c&&d==c)this.onClick(c);else b&&d==b&&(this._setSelectedAttr(b),this.onClick(b))},_onMouseOut:function(){if(this._hoveredNode)this.onUnhover(this._hoveredNode),this._hoveredNode=null;if(this._isDragging)this._cancelDrag=(new Date).getTime()+1E3},_onMouseOver:function(e,d){if(this._cancelDrag){if((new Date).getTime()>this._cancelDrag)this._isDragging=!1;this._cancelDrag=null}this._hoveredNode=
d;this.onHover(d);this._isDragging&&this._setSelectedAttr(d)}})})},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(l,m,k){return l("dijit.form._ListBase",null,{selected:null,_listConnect:function(j,e){var h=this;return h.own(m(h.containerNode,m.selector(function(d,c,b){return d.parentNode==b},j),function(d){d.preventDefault();h[e](d,this)}))},selectFirstNode:function(){for(var j=this.containerNode.firstChild;j&&"none"==j.style.display;)j=j.nextSibling;
this._setSelectedAttr(j)},selectLastNode:function(){for(var j=this.containerNode.lastChild;j&&"none"==j.style.display;)j=j.previousSibling;this._setSelectedAttr(j)},selectNextNode:function(){var j=this.selected;if(j){for(j=j.nextSibling;j&&"none"==j.style.display;)j=j.nextSibling;j?this._setSelectedAttr(j):this.selectFirstNode()}else this.selectFirstNode()},selectPreviousNode:function(){var j=this.selected;if(j){for(j=j.previousSibling;j&&"none"==j.style.display;)j=j.previousSibling;j?this._setSelectedAttr(j):
this.selectLastNode()}else this.selectLastNode()},_setSelectedAttr:function(j){if(this.selected!=j){var e=this.selected;if(e)this.onDeselect(e),this.selected=null;if(j)this.selected=j,k.scrollIntoView(j),this.onSelect(j)}else if(j)this.onSelect(j)}})})},"dijit/form/Select":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/i18n,dojo/_base/lang,dojo/sniff,./_FormSelectWidget,../_HasDropDown,../Menu,../MenuItem,../MenuSeparator,../Tooltip,dojo/text!./templates/Select.html,dojo/i18n!./nls/validate".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){var s=m("dijit.form._SelectMenu",n,{autoFocus:!0,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=this.ownerDocument.createElement("div");b.style.cssText="overflow-x: hidden; overflow-y: scroll";a.parentNode&&a.parentNode.replaceChild(b,a);j.remove(a,"dijitMenuTable");b.className=a.className+" dijitSelectMenu";a.className="dijitReset dijitMenuTable";b.setAttribute("role","listbox");a.setAttribute("role",
"presentation");b.appendChild(a)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",h.stop)},focus:function(){var a=!1,b=this.parentWidget.value;c.isArray(b)&&(b=b[b.length-1]);b&&l.forEach(this.parentWidget._getChildren(),function(c){c.option&&b===c.option.value&&(a=!0,this.focusChild(c,!1))},this);a||this.inherited(arguments)},resize:function(a){if(a&&(e.setMarginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"}}),m=m("dijit.form.Select",
[a,f],{baseClass:"dijitSelect dijitValidationTextBox",templateString:o,_buttonInputDisabled:b("ie")?"disabled":"",required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:!1,_childrenLoaded:!1,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}this.dropDown=new s({id:this.id+"_menu",parentWidget:this});j.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,
"Menu "))},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new t({ownerDocument:this.ownerDocument});var b=c.hitch(this,"_setValueAttr",a),a=new r({option:a,label:a.label||this.emptyLabel,onClick:b,ownerDocument:this.ownerDocument,dir:this.dir,disabled:a.disabled||!1});a.focusNode.setAttribute("role","option");return a},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},
_loadChildren:function(a){!0===a?(this.dropDown&&delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):(l.forEach(this._getChildren(),function(a){a.destroyRecursive()}),this.dropDown.addChild(new r({ownerDocument:this.ownerDocument,label:this.emptyLabel})))):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value,!1)},_refreshState:function(){this._started&&this.validate(this.focused)},startup:function(){this.inherited(arguments);
this._refreshState()},_setValueAttr:function(a){this.inherited(arguments);k.set(this.valueNode,"value",this.get("value"));this._refreshState()},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",a);this._refreshState()},_setOptionsAttr:function(a){this._isLoaded=!1;this._set("options",a)},_setDisplay:function(a){a=a||this.emptyLabel;this.containerNode.innerHTML='<span role="option" class="dijitReset dijitInline '+
this.baseClass.replace(/\s+|$/g,"Label ")+'">'+a+"</span>"},validate:function(a){a=this.disabled||this.isValid(a);this._set("state",a?"":this._hasBeenBlurred?"Error":"Incomplete");this.focusNode.setAttribute("aria-invalid",a?"false":"true");var b=a?"":this._missingMsg;b&&this.focused&&this._hasBeenBlurred?q.show(b,this.domNode,this.tooltipPosition,!this.isLeftToRight()):q.hide(this.domNode);this._set("message",b);return a},isValid:function(){return!this.required||0===this.value||!/^\s*$/.test(this.value||
"")},reset:function(){this.inherited(arguments);q.hide(this.domNode);this._refreshState()},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=d.getLocalization("dijit.form","validate",this.lang).missingMessage},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onselectstart",h.stop);this.domNode.setAttribute("aria-expanded","false");9>b("ie")&&this.defer(function(){try{var a=domStyle.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=
this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setStyleAttr:function(a){this.inherited(arguments);j.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width)},isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=
""},destroy:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)},_onFocus:function(){this.validate(!0);this.inherited(arguments)},_onBlur:function(){q.hide(this.domNode);this.inherited(arguments);this.validate(!1)}});m._Menu=s;return m})},"dijit/form/_FormSelectWidget":function(){define("dojo/_base/array,dojo/_base/Deferred,dojo/aspect,dojo/data/util/sorter,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/_base/kernel,dojo/_base/lang,dojo/query,dojo/when,dojo/store/util/QueryResults,./_FormValueWidget".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return e("dijit.form._FormSelectWidget",r,{multiple:!1,options:null,store:null,query:null,queryOptions:null,labelAttr:"",onFetch:null,sortByLabel:!0,loadChildrenOnOpen:!1,onLoadDeferred:null,getOptions:function(a){var c=this.options||[];if(null==a)return c;if(b.isArray(a))return l.map(a,"return this.getOptions(item);",this);b.isString(a)&&(a={value:a});b.isObject(a)&&(l.some(c,function(b,c){for(var d in a)if(!(d in b)||b[d]!=a[d])return!1;a=c;return!0})||(a=-1));
return 0<=a&&a<c.length?c[a]:null},addOption:function(a){l.forEach([].concat(a),function(a){a&&b.isObject(a)&&this.options.push(a)},this);this._loadChildren()},removeOption:function(a){a=this.getOptions([].concat(a));l.forEach(a,function(a){if(a)this.options=l.filter(this.options,function(b){return b.value!==a.value||b.label!==a.label}),this._removeOptionItem(a)},this);this._loadChildren()},updateOption:function(a){l.forEach([].concat(a),function(a){var b=this.getOptions({value:a.value}),c;if(b)for(c in a)b[c]=
a[c]},this);this._loadChildren()},setStore:function(a,c,d){var e=this.store,d=d||{};if(e!==a){for(var h;h=this._notifyConnections.pop();)h.remove();if(!a.get&&(b.mixin(a,{_oldAPI:!0,get:function(a){var b=new m;this.fetchItemByIdentity({identity:a,onItem:function(a){b.resolve(a)},onError:function(a){b.reject(a)}});return b.promise},query:function(a,c){var d=new m(function(){f.abort&&f.abort()});d.total=new m;var f=this.fetch(b.mixin({query:a,onBegin:function(a){d.total.resolve(a)},onComplete:function(a){d.resolve(a)},
onError:function(a){d.reject(a)}},c));return new n(d)}}),a.getFeatures()["dojo.data.api.Notification"]))this._notifyConnections=[k.after(a,"onNew",b.hitch(this,"_onNewItem"),!0),k.after(a,"onDelete",b.hitch(this,"_onDeleteItem"),!0),k.after(a,"onSet",b.hitch(this,"_onSetItem"),!0)];this._set("store",a)}this.options&&this.options.length&&this.removeOption(this.options);this._queryRes&&this._queryRes.close&&this._queryRes.close();d.query&&(this._set("query",d.query),this._set("queryOptions",d.queryOptions));
if(a)this._loadingStore=!0,this.onLoadDeferred=new m,this._queryRes=a.query(this.query,this.queryOptions),f(this._queryRes,b.hitch(this,function(f){if(this.sortByLabel&&!d.sort&&f.length)if(a.getValue)f.sort(j.createSortFunction([{attribute:a.getLabelAttributes(f[0])[0]}],a));else{var e=this.labelAttr;f.sort(function(a,b){return a[e]>b[e]?1:b[e]>a[e]?-1:0})}d.onFetch&&(f=d.onFetch.call(this,f,d));l.forEach(f,function(a){this._addOptionForItem(a)},this);this._queryRes.observe&&this._queryRes.observe(b.hitch(this,
function(a,b,c){b==c?this._onSetItem(a):(-1!=b&&this._onDeleteItem(a),-1!=c&&this._onNewItem(a))}),!0);this._loadingStore=!1;this.set("value","_pendingValue"in this?this._pendingValue:c);delete this._pendingValue;this.loadChildrenOnOpen?this._pseudoLoadChildren(f):this._loadChildren();this.onLoadDeferred.resolve(!0);this.onSetStore()}),function(a){console.error("dijit.form.Select: "+a.toString());this.onLoadDeferred.reject(a)});return e},_setValueAttr:function(a,c){this._onChangeActive||(c=null);
if(this._loadingStore)this._pendingValue=a;else if(null!=a){var a=b.isArray(a)?l.map(a,function(a){return b.isObject(a)?a:{value:a}}):b.isObject(a)?[a]:[{value:a}],a=l.filter(this.getOptions(a),function(a){return a&&a.value}),d=this.getOptions()||[];if(!this.multiple&&(!a[0]||!a[0].value)&&d.length)a[0]=d[0];l.forEach(d,function(b){b.selected=l.some(a,function(a){return a.value===b.value})});d=l.map(a,function(a){return a.value});if(!("undefined"==typeof d||"undefined"==typeof d[0])){var f=l.map(a,
function(a){return a.label});this._setDisplay(this.multiple?f:f[0]);this.inherited(arguments,[this.multiple?d:d[0],c]);this._updateSelection()}}},_getDisplayedValueAttr:function(){var a=l.map([].concat(this.get("selectedOptions")),function(a){return a&&"label"in a?a.label:a?a.value:null},this);return this.multiple?a:a[0]},_setDisplayedValueAttr:function(a){this.set("value",this.getOptions("string"==typeof a?{label:a}:a))},_loadChildren:function(){this._loadingStore||(l.forEach(this._getChildren(),
function(a){a.destroyRecursive()}),l.forEach(this.options,this._addOptionItem,this),this._updateSelection())},_updateSelection:function(){this._set("value",this._getValueFromOpts());var a=[].concat(this.value);a&&a[0]&&l.forEach(this._getChildren(),function(b){var c=l.some(a,function(a){return b.option&&a===b.option.value});d.toggle(b.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),c);b.domNode.setAttribute("aria-selected",c?"true":"false")},this)},_getValueFromOpts:function(){var a=this.getOptions()||
[];if(!this.multiple&&a.length){var b=l.filter(a,function(a){return a.selected})[0];if(b&&b.value)return b.value;a[0].selected=!0;return a[0].value}return this.multiple?l.map(l.filter(a,function(a){return a.selected}),function(a){return a.value})||[]:""},_onNewItem:function(a,b){(!b||!b.parent)&&this._addOptionForItem(a)},_onDeleteItem:function(a){this.removeOption({value:this.store.getIdentity(a)})},_onSetItem:function(a){this.updateOption(this._getOptionObjForItem(a))},_getOptionObjForItem:function(a){var b=
this.store,c=this.labelAttr&&this.labelAttr in a?a[this.labelAttr]:b.getLabel(a);return{value:c?b.getIdentity(a):null,label:c,item:a}},_addOptionForItem:function(a){var b=this.store;b.isItemLoaded&&!b.isItemLoaded(a)?b.loadItem({item:a,onItem:function(a){this._addOptionForItem(a)},scope:this}):this.addOption(this._getOptionObjForItem(a))},constructor:function(a){this._oValue=(a||{}).value||null;this._notifyConnections=[]},buildRendering:function(){this.inherited(arguments);h.setSelectable(this.focusNode,
!1)},_fillContent:function(){if(!this.options)this.options=this.srcNodeRef?a("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+c._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",
this._getValueFromOpts())},postCreate:function(){this.inherited(arguments);k.after(this,"onChange",b.hitch(this,"_updateSelection"));var a=this.store;if(a&&(a.getIdentity||a.getFeatures()["dojo.data.api.Identity"]))this.store=null,this.setStore(a,this._oValue)},startup:function(){this._loadChildren();this.inherited(arguments)},destroy:function(){for(var a;a=this._notifyConnections.pop();)a.remove();this._queryRes&&this._queryRes.close&&this._queryRes.close();this.inherited(arguments)},_addOptionItem:function(){},
_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return[]},_getSelectedOptionsAttr:function(){return this.getOptions({selected:!0})},_pseudoLoadChildren:function(){},onSetStore:function(){}})})},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(l){var m={};l.setObject("dojo.data.util.sorter",m);m.basicComparator=function(k,j){var e=-1;null===k&&(k=void 0);null===j&&(j=void 0);if(k==j)e=0;else if(k>j||null==k)e=1;return e};m.createSortFunction=function(k,
j){function e(a,b,c,d){return function(f,e){var n=d.getValue(f,a),h=d.getValue(e,a);return b*c(n,h)}}for(var h=[],d,c=j.comparatorMap,b=m.basicComparator,a=0;a<k.length;a++){d=k[a];var f=d.attribute;if(f){d=d.descending?-1:1;var n=b;c&&("string"!==typeof f&&"toString"in f&&(f=f.toString()),n=c[f]||b);h.push(e(f,d,n,j))}}return function(a,b){for(var c=0;c<h.length;){var d=h[c++](a,b);if(0!==d)return d}return 0}};return m})},"dijit/Menu":function(){define("require,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-geometry,dojo/dom-style,dojo/keys,dojo/_base/lang,dojo/on,dojo/sniff,dojo/_base/window,dojo/window,./popup,./DropDownMenu,dojo/ready".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){n("dijit-legacy-requires")&&s(0,function(){l(["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"])});return k("dijit.Menu",o,{constructor:function(){this._bindings=[]},targetNodeIds:[],selector:"",contextMenuForWindow:!1,leftClickToOpen:!1,refocus:!0,postCreate:function(){this.contextMenuForWindow?this.bindDomNode(this.ownerDocumentBody):m.forEach(this.targetNodeIds,this.bindDomNode,this);this.inherited(arguments)},_iframeContentWindow:function(a){return t.get(this._iframeContentDocument(a))||
this._iframeContentDocument(a).__parent__||a.name&&r.doc.frames[a.name]||null},_iframeContentDocument:function(a){return a.contentDocument||a.contentWindow&&a.contentWindow.document||a.name&&r.doc.frames[a.name]&&r.doc.frames[a.name].document||null},bindDomNode:function(c){var c=e.byId(c,this.ownerDocument),d;if("iframe"==c.tagName.toLowerCase()){var o=c,n=this._iframeContentWindow(o);d=r.body(n.document)}else d=c==r.body(this.ownerDocument)?this.ownerDocument.documentElement:c;var s={node:c,iframe:o};
h.set(c,"_dijitMenu"+this.id,this._bindings.push(s));var q=a.hitch(this,function(a){var c=this.selector,d=c?function(a){return f.selector(c,a)}:function(a){return a},e=this;return[f(a,d(this.leftClickToOpen?"click":"contextmenu"),function(a){j.stop(a);e._scheduleOpen(this,o,{x:a.pageX,y:a.pageY})}),f(a,d("keydown"),function(a){a.shiftKey&&a.keyCode==b.F10&&(j.stop(a),e._scheduleOpen(this,o))})]});s.connects=d?q(d):[];if(o)s.onloadHandler=a.hitch(this,function(){var a=this._iframeContentWindow(o);
d=r.body(a.document);s.connects=q(d)}),o.addEventListener?o.addEventListener("load",s.onloadHandler,!1):o.attachEvent("onload",s.onloadHandler)},unBindDomNode:function(a){var b;try{b=e.byId(a,this.ownerDocument)}catch(c){return}a="_dijitMenu"+this.id;if(b&&h.has(b,a)){for(var d=h.get(b,a)-1,f=this._bindings[d],o;o=f.connects.pop();)o.remove();(o=f.iframe)&&(o.removeEventListener?o.removeEventListener("load",f.onloadHandler,!1):o.detachEvent("onload",f.onloadHandler));h.remove(b,a);delete this._bindings[d]}},
_scheduleOpen:function(a,b,c){if(!this._openTimer)this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:a,iframe:b,coords:c})},1)},_openMyself:function(a){function b(){t.refocus&&k&&k.focus();q.close(t)}var f=a.target,o=a.iframe,a=a.coords;this.currentTarget=f;if(a){if(o){var f=d.position(o,!0),h=this._iframeContentWindow(o),h=d.docScroll(h.document),s=c.getComputedStyle(o),j=c.toPixelValue,r=(n("ie")&&n("quirks")?0:j(o,s.paddingLeft))+(n("ie")&&n("quirks")?j(o,s.borderLeftWidth):
0),o=(n("ie")&&n("quirks")?0:j(o,s.paddingTop))+(n("ie")&&n("quirks")?j(o,s.borderTopWidth):0);a.x+=f.x+r-h.x;a.y+=f.y+o-h.y}}else a=d.position(f,!0),a.x+=10,a.y+=10;var t=this,o=this._focusManager.get("prevNode"),f=this._focusManager.get("curNode"),k=!f||e.isDescendant(f,this.domNode)?o:f;q.open({popup:this,x:a.x,y:a.y,onExecute:b,onCancel:b,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);q.close(this)}},destroy:function(){m.forEach(this._bindings,
function(a){a&&this.unBindDomNode(a.node)},this);this.inherited(arguments)}})})},"dijit/DropDownMenu":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/text!./templates/Menu.html,./_OnDijitClickMixin,./_MenuBase".split(","),function(l,m,k,j,e,h){return l("dijit.DropDownMenu",[h,e],{templateString:j,baseClass:"dijitMenu",postCreate:function(){this.inherited(arguments);var d=this.isLeftToRight();this._openSubMenuKey=d?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=d?k.LEFT_ARROW:
k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW])},_onKeyPress:function(d){if(!d.ctrlKey&&!d.altKey)switch(d.charOrCode){case this._openSubMenuKey:this._moveToPopup(d);m.stop(d);break;case this._closeSubMenuKey:if(this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);else m.stop(d)}}})})},"url:dijit/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"\n\t   data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\n\t<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody>\n</table>\n',
"dijit/_MenuBase":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/lang,dojo/mouse,dojo/on,dojo/window,./a11yclick,./popup,./registry,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return m("dijit._MenuBase",[r,q,t],{parentMenu:null,popupDelay:500,autoFocus:!1,childSelector:function(a){var b=n.byNode(a);return a.parentNode==this.containerNode&&b&&b.focus},postCreate:function(){var b=this,f="string"==
typeof this.childSelector?this.childSelector:h.hitch(this,"childSelector");this.own(c(this.containerNode,c.selector(f,d.enter),function(){b.onItemHover(n.byNode(this))}),c(this.containerNode,c.selector(f,d.leave),function(){b.onItemUnhover(n.byNode(this))}),c(this.containerNode,c.selector(f,a),function(a){b.onItemClick(n.byNode(this),a);a.stopPropagation();a.preventDefault()}));this.inherited(arguments)},onExecute:function(){},onCancel:function(){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&
!this.focusedChild.disabled)this.onItemClick(this.focusedChild,a);else(a=this._getTopMenu())&&a._isMenuBar&&a.focusNext()},_onPopupHover:function(){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var a=this.currentPopup.parentMenu;a.focusedChild&&a.focusedChild._setSelected(!1);a.focusedChild=this.currentPopup.from_item;a.focusedChild._setSelected(!0);this._stopPendingCloseTimer(this.currentPopup)}},onItemHover:function(a){if(this.isActive&&(this.focusChild(a),this.focusedChild.popup&&
!this.focusedChild.disabled&&!this.hover_timer))this.hover_timer=this.defer("_openPopup",this.popupDelay);this.focusedChild&&this.focusChild(a);this._hoveredChild=a;a._set("hovering",!0)},_onChildBlur:function(a){this._stopPopupTimer();a._setSelected(!1);var b=a.popup;if(b)this._stopPendingCloseTimer(b),b._pendingClose_timer=this.defer(function(){b._pendingClose_timer=null;if(b.parentMenu)b.parentMenu.currentPopup=null;f.close(b)},this.popupDelay)},onItemUnhover:function(a){this.isActive&&this._stopPopupTimer();
if(this._hoveredChild==a)this._hoveredChild=null;a._set("hovering",!1)},_stopPopupTimer:function(){if(this.hover_timer)this.hover_timer=this.hover_timer.remove()},_stopPendingCloseTimer:function(a){if(a._pendingClose_timer)a._pendingClose_timer=a._pendingClose_timer.remove()},_stopFocusTimer:function(){if(this._focus_timer)this._focus_timer=this._focus_timer.remove()},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu);return a},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&
this._markActive();this.focusChild(a);if(a.disabled)return!1;a.popup?this._openPopup("keypress"==b.type):(this.onExecute(),a._onClick?a._onClick(b):a.onClick(b))},_openPopup:function(a){this._stopPopupTimer();var b=this.focusedChild;if(b){var d=b.popup;if(!d.isShowingNow){this.currentPopup&&(this._stopPendingCloseTimer(this.currentPopup),f.close(this.currentPopup));d.parentMenu=this;d.from_item=b;var e=this;f.open({parent:this,popup:d,around:b.domNode,orient:this._orient||["after","before"],onCancel:function(){e.focusChild(b);
e._cleanUp();b._setSelected(!0);e.focusedChild=b},onExecute:h.hitch(this,"_cleanUp")});this.currentPopup=d;this.popupHoverHandle&&this.popupHoverHandle.remove();this.own(this.popupHoverHandle=c.once(d.domNode,"mouseover",h.hitch(e,"_onPopupHover")))}if(a&&d.focus)d._focus_timer=this.defer(h.hitch(d,function(){this._focus_timer=null;this.focus()}))}},_markActive:function(){this.isActive=!0;e.replace(this.domNode,"dijitMenuActive","dijitMenuPassive")},onOpen:function(){this.isShowingNow=!0;this._markActive()},
_markInactive:function(){this.isActive=!1;e.replace(this.domNode,"dijitMenuPassive","dijitMenuActive")},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=!1;this.parentMenu=null},_closeChild:function(){this._stopPopupTimer();if(this.currentPopup)0<=l.indexOf(this._focusManager.activeStack,this.id)&&(j.set(this.focusedChild.focusNode,"tabIndex",this.tabIndex),this.focusedChild.focusNode.focus()),f.close(this.currentPopup),this.currentPopup=null;if(this.focusedChild)this.focusedChild._setSelected(!1),
this.onItemUnhover(this.focusedChild),this.focusedChild=null},_onItemFocus:function(a){if(this._hoveredChild&&this._hoveredChild!=a)this.onItemUnhover(this._hoveredChild)},_onBlur:function(){this._cleanUp();this.inherited(arguments)},_cleanUp:function(){this._closeChild();"undefined"==typeof this.isShowingNow&&this._markInactive()}})})},"dijit/_KeyNavContainer":function(){define("dojo/_base/kernel,./_Container,./_FocusMixin,dojo/_base/array,dojo/keys,dojo/_base/declare,dojo/_base/event,dojo/dom-attr,dojo/_base/lang".split(","),
function(l,m,k,j,e,h,d,c,b){return h("dijit._KeyNavContainer",[k,m],{tabIndex:"0",connectKeyNavHandlers:function(a,c){var d=this._keyNavCodes={},h=b.hitch(this,"focusPrev"),t=b.hitch(this,"focusNext");j.forEach(a,function(a){d[a]=h});j.forEach(c,function(a){d[a]=t});d[e.HOME]=b.hitch(this,"focusFirstChild");d[e.END]=b.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus")},startupKeyNavChildren:function(){l.deprecated("startupKeyNavChildren() call no longer needed",
"","2.0")},startup:function(){this.inherited(arguments);j.forEach(this.getChildren(),b.hitch(this,"_startupChild"))},addChild:function(a,b){this.inherited(arguments);this._startupChild(a)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusLastChild:function(){this.focusChild(this._getLastFocusableChild())},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1))},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,
-1),!0)},focusChild:function(a,b){a&&(this.focusedChild&&a!==this.focusedChild&&this._onChildBlur(this.focusedChild),a.set("tabIndex",this.tabIndex),a.focus(b?"end":"start"),this._set("focusedChild",a))},_startupChild:function(a){a.set("tabIndex","-1");this.connect(a,"_onFocus",function(){a.set("tabIndex",this.tabIndex)});this.connect(a,"_onBlur",function(){a.set("tabIndex","-1")})},_onContainerFocus:function(a){a.target!==this.domNode||this.focusedChild||(this.focusFirstChild(),c.set(this.domNode,
"tabIndex","-1"))},_onBlur:function(a){this.tabIndex&&c.set(this.domNode,"tabIndex",this.tabIndex);this.focusedChild=null;this.inherited(arguments)},_onContainerKeypress:function(a){if(!a.ctrlKey&&!a.altKey){var b=this._keyNavCodes[a.charOrCode];b&&(b(),d.stop(a))}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1)},_getNextFocusableChild:function(a,b){a&&(a=this._getSiblingOfChild(a,
b));for(var c=this.getChildren(),d=0;d<c.length;d++){a||(a=c[0<b?0:c.length-1]);if(a.isFocusable())return a;a=this._getSiblingOfChild(a,b)}return null}})})},"dijit/MenuItem":function(){define("dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/_base/kernel,dojo/sniff,./_Widget,./_TemplatedMixin,./_Contained,./_CssStateMixin,dojo/text!./templates/MenuItem.html".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return l("dijit.MenuItem",[d,c,b,a],{templateString:f,baseClass:"dijitMenuItem",label:"",
_setLabelAttr:function(a){this.containerNode.innerHTML=a;this._set("label",a);"auto"===this.textDir&&this.applyTextDir(this.focusNode,this.label)},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:!1,_fillContent:function(a){a&&!("label"in this.params)&&this.set("label",a.innerHTML)},buildRendering:function(){this.inherited(arguments);var a=this.id+"_text";k.set(this.containerNode,"id",a);this.accelKeyNode&&(k.set(this.accelKeyNode,"id",this.id+"_accel"),
a+=" "+this.id+"_accel");this.domNode.setAttribute("aria-labelledby",a);m.setSelectable(this.domNode,!1)},onClick:function(){},focus:function(){try{8==h("ie")&&this.containerNode.focus(),this.focusNode.focus()}catch(a){}},_onFocus:function(){this._setSelected(!0);this.getParent()._onItemFocus(this);this.inherited(arguments)},_setSelected:function(a){j.toggle(this.domNode,"dijitMenuItemSelected",a)},setLabel:function(a){e.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.",
"","2.0");this.set("label",a)},setDisabled:function(a){e.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",a)},_setDisabledAttr:function(a){this.focusNode.setAttribute("aria-disabled",a?"true":"false");this._set("disabled",a)},_setAccelKeyAttr:function(a){this.accelKeyNode.style.display=a?"":"none";this.accelKeyNode.innerHTML=a;k.set(this.containerNode,"colSpan",a?"1":"2");this._set("accelKey",a)},_setTextDirAttr:function(a){if(!this._created||
this.textDir!=a)this._set("textDir",a),this.applyTextDir(this.focusNode,this.label)}})})},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(l,m){return l("dijit._Contained",null,{_getSibling:function(k){var j=this.domNode;do j=j[k+"Sibling"];while(j&&1!=j.nodeType);return j&&m.byNode(j)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var k=this.getParent();return!k||
!k.getIndexOfChild?-1:k.getIndexOfChild(this)}})})},"url:dijit/templates/MenuItem.html":'<tr class="dijitReset dijitMenuItem" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">\n\t<td class="dijitReset dijitMenuItemIconCell" role="presentation">\n\t\t<img src="${_blankGif}" alt="" class="dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"/>\n\t</td>\n\t<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode"></td>\n\t<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>\n\t<td class="dijitReset dijitMenuArrowCell" role="presentation">\n\t\t<div data-dojo-attach-point="arrowWrapper" style="visibility: hidden">\n\t\t\t<img src="${_blankGif}" alt="" class="dijitMenuExpand"/>\n\t\t\t<span class="dijitMenuExpandA11y">+</span>\n\t\t</div>\n\t</td>\n</tr>\n',
"dijit/MenuSeparator":function(){define("dojo/_base/declare,dojo/dom,./_WidgetBase,./_TemplatedMixin,./_Contained,dojo/text!./templates/MenuSeparator.html".split(","),function(l,m,k,j,e,h){return l("dijit.MenuSeparator",[k,j,e],{templateString:h,buildRendering:function(){this.inherited(arguments);m.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"url:dijit/templates/MenuSeparator.html":'<tr class="dijitMenuSeparator" role="separator">\n\t<td class="dijitMenuSeparatorIconCell">\n\t\t<div class="dijitMenuSeparatorTop"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n\t<td colspan="3" class="dijitMenuSeparatorLabelCell">\n\t\t<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>\n\t\t<div class="dijitMenuSeparatorBottom"></div>\n\t</td>\n</tr>',
"url:dijit/form/templates/Select.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tdata-dojo-attach-point="_buttonNode,tableNode,focusNode,_popupStateNode" cellspacing=\'0\' cellpadding=\'0\'\n\trole="listbox" aria-haspopup="true"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonContents" role="presentation"\n\t\t\t><div class="dijitReset dijitInputField dijitButtonText"  data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitValidationContainer"\n\t\t\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t/></div\n\t\t\t><input type="hidden" ${!nameAttrSetting} data-dojo-attach-point="valueNode" value="${value}" aria-hidden="true"\n\t\t/></td\n\t\t><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer"\n\t\t\tdata-dojo-attach-point="titleNode" role="presentation"\n\t\t\t><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t${_buttonInputDisabled}\n\t\t/></td\n\t></tr></tbody\n></table>\n',
"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(l,m,k){return l("dijit.form.ComboBox",[m,k],{})})},"dojox/data/JsonRestStore":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,dojox/rpc/Rest,dojox/rpc/JsonRest,dojox/json/schema,dojox/data/ServiceStore".split(","),function(l,m,k,j,e,h,d){var c=l.getObject("dojox.rpc",!0),b=m("dojox.data.JsonRestStore",d,{constructor:function(a){k.connect(j._index,"onUpdate",this,
function(a,b,c,d){var f=this.service.servicePath;if(a.__id&&a.__id.substring(0,f.length)==f)this.onSet(a,b,c,d)});this.idAttribute=this.idAttribute||"id";if("string"==typeof a.target&&(a.target=a.target.match(/\/$/)||this.allowNoTrailingSlash?a.target:a.target+"/",!this.service))this.service=e.services[a.target]||j(a.target,!0);e.registerService(this.service,a.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.service.idAsRef=this.idAsRef;
this.schema._idAttr=this.idAttribute;var b=e.getConstructor(this.service),c=this;this._constructor=function(a){b.call(this,a);c.onNew(this)};this._constructor.prototype=b.prototype;this._index=j._index},loadReferencedSchema:!0,idAsRef:!1,referenceIntegrity:!0,target:"",allowNoTrailingSlash:!1,newItem:function(a,b){a=new this._constructor(a);if(b){var c=this.getValue(b.parent,b.attribute,[]),c=c.concat([a]);a.__parent=c;this.setValue(b.parent,b.attribute,c)}return a},deleteItem:function(b){var c=[],
d=a._getStoreForItem(b)||this;if(this.referenceIntegrity){e._saveNotNeeded=!0;var h=j._index,q=function(e){var f;var o;c.push(e);e.__checked=1;for(var j in e)if("__"!=j.substring(0,2)){var k=e[j];k==b?e!=h&&(e instanceof Array?(o=o||[]).push(j):(a._getStoreForItem(e)||d).unsetAttribute(e,j)):"object"==typeof k&&k&&(k.__checked||q(k),"object"==typeof k.__checked&&e!=h&&(a._getStoreForItem(e)||d).setValue(e,j,k.__checked))}if(o){j=o.length;for(f=e.__checked=e.concat(),e=f;j--;)e.splice(o[j],1);return e}return null};
q(h);e._saveNotNeeded=!1;for(var o=0;c[o];)delete c[o++].__checked}e.deleteObject(b);d.onDelete(b)},changing:function(a,b){e.changing(a,b)},cancelChanging:function(a){if(a.__id){dirtyObjects=e.getDirtyObjects();for(var b=0;b<dirtyObjects.length;b++)if(a==dirtyObjects[b].object){dirtyObjects.splice(b,1);break}}},setValue:function(b,c,d){var e=b[c],j=b.__id?a._getStoreForItem(b):this;h&&j.schema&&j.schema.properties&&h.mustBeValid(h.checkPropertyChange(d,j.schema.properties[c]));if(c==j.idAttribute)throw Error("Can not change the identity attribute for an item");
j.changing(b);if((b[c]=d)&&!d.__parent)d.__parent=b;j.onSet(b,c,e,d)},setValues:function(a,b,c){if(!l.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.setValue(a,b,c)},unsetAttribute:function(a,b){this.changing(a);var c=a[b];delete a[b];this.onSet(a,b,c,void 0)},save:function(a){if(!a||!a.global)(a=a||{}).service=this.service;if("syncMode"in a?a.syncMode:this.syncMode)c._sync=!0;a=e.commit(a);this.serverVersion=this._updates&&this._updates.length;return a},
revert:function(a){e.revert(a&&a.global&&this.service)},isDirty:function(a){return e.isDirty(a,this)},isItem:function(a,b){return a&&a.__id&&(b||this.service==e.getServiceAndId(a.__id).service)},_doQuery:function(a){var b=e.query(this.service,"string"==typeof a.queryStr?a.queryStr:a.query,a),c=this;this.loadReferencedSchema&&b.addCallback(function(a){var d=b.ioArgs&&b.ioArgs.xhr&&b.ioArgs.xhr.getResponseHeader("Content-Type"),f=d&&d.match(/definedby\s*=\s*([^;]*)/);d&&!f&&(f=(f=b.ioArgs.xhr.getResponseHeader("Link"))&&
f.match(/<([^>]*)>;\s*rel="?definedby"?/));if(f=f&&f[1])return d=e.getServiceAndId((c.target+f).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3")),d=e.byId(d.service,d.id),d.addCallbacks(function(b){l.mixin(c.schema,b);return a},function(b){console.error(b);return a}),d});return b},_processResults:function(a,b){var c=a.length;return{totalCount:b.fullLength||(b.request.count==c?(b.request.start||0)+2*c:c),items:a}},getConstructor:function(){return this._constructor},getIdentity:function(a){a=
a.__clientId||a.__id;if(!a)return a;var b=this.service.servicePath.replace(/[^\/]*$/,"");return a.substring(0,b.length)!=b?a:a.substring(b.length)},fetchItemByIdentity:function(a){var b=a.identity,c=this;if(b.toString().match(/^(\w*:)?\//))b=e.getServiceAndId(b),c=b.service._store,a.identity=b.id;a._prefix=c.service.servicePath.replace(/[^\/]*$/,"");return c.inherited(arguments)},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var a=this.inherited(arguments);a["dojo.data.api.Write"]=
!0;a["dojo.data.api.Notification"]=!0;return a},getParent:function(a){return a&&a.__parent}});b.getStore=function(a,c){if("string"==typeof a.target){a.target=a.target.match(/\/$/)||a.allowNoTrailingSlash?a.target:a.target+"/";var d=(e.services[a.target]||{})._store;if(d)return d}return new (c||b)(a)};var a=l.getObject("dojox.data",!0);a._getStoreForItem=function(a){if(a.__id){var c=e.getServiceAndId(a.__id);if(c&&c.service._store)return c.service._store;a=a.__id.toString().match(/.*\//)[0];return new b({target:a})}return null};
l.getObject("dojox.json.ref",!0)._useRefs=!0;return b})},"dojox/rpc/Rest":function(){define("dojox/rpc/Rest",["dojo","dojox"],function(l,m){function k(e,h,d){e.addCallback(function(c){if(e.ioArgs.xhr&&d)d=e.ioArgs.xhr.getResponseHeader("Content-Range"),e.fullLength=d&&(d=d.match(/\/(.*)/))&&parseInt(d[1]);return c});return e}l.getObject("rpc.Rest",!0,m);m.rpc&&m.rpc.transportRegistry&&m.rpc.transportRegistry.register("REST",function(e){return"REST"==e},{getExecutor:function(e,h,d){return new m.rpc.Rest(h.name,
(h.contentType||d._smd.contentType||"").match(/json|javascript/),null,function(c,b){var a=d._getRequest(h,[c]);a.url=a.target+(a.data?"?"+a.data:"");if(b&&(0<=b.start||0<=b.count))a.headers=a.headers||{},a.headers.Range="items="+(b.start||"0")+"-"+("count"in b&&Infinity!=b.count?b.count+(b.start||0)-1:"");return a})}});var j;j=m.rpc.Rest=function(e,h,d,c){function b(b){a[b]=function(c,d){return j._change(b,a,c,d)}}var a;a=function(b,c){return j._get(a,b,c)};a.isJson=h;a._schema=d;a.cache={serialize:h?
(m.json&&m.json.ref||l).toJson:function(a){return a}};a._getRequest=c||function(a,b){l.isObject(a)&&(a=(a=l.objectToQuery(a))?"?"+a:"");if(b&&b.sort&&!b.queryStr){for(var a=a+((a?"&":"?")+"sort("),c=0;c<b.sort.length;c++)var d=b.sort[c],a=a+((0<c?",":"")+(d.descending?"-":"+")+encodeURIComponent(d.attribute));a+=")"}c={url:e+(null==a?"":a),handleAs:h?"json":"text",contentType:h?"application/json":"text/plain",sync:m.rpc._sync,headers:{Accept:h?"application/json,application/javascript":"*/*"}};if(b&&
(0<=b.start||0<=b.count))c.headers.Range="items="+(b.start||"0")+"-"+("count"in b&&Infinity!=b.count?b.count+(b.start||0)-1:"");m.rpc._sync=!1;return c};b("put");b("post");b("delete");a.servicePath=e;return a};j._index={};j._timeStamps={};j._change=function(e,h,d,c){d=h._getRequest(d);d[e+"Data"]=c;return k(l.xhr(e.toUpperCase(),d,!0),h)};j._get=function(e,h,d){d=d||{};return k(l.xhrGet(e._getRequest(h,d)),e,0<=d.start||0<=d.count,h)};return j})},"dojo/main":function(){define("./_base/kernel,./has,require,./sniff,./_base/lang,./_base/array,./_base/config,./ready,./_base/declare,./_base/connect,./_base/Deferred,./_base/json,./_base/Color,./has!dojo-firebug?./_firebug/firebug,./_base/browser,./_base/loader".split(","),
function(l,m,k,j,e,h,d,c){d.isDebug&&k(["./_firebug/firebug"]);var b=d.require;b&&(b=h.map(e.isArray(b)?b:[b],function(a){return a.replace(/\./g,"/")}),l.isAsync?k(b):c(1,function(){k(b)}));return l})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready,./kernel,./connect,./unload,./window,./event,./html,./NodeList,../query,./xhr,./fx".split(","),function(l){return l})},"dojo/_base/loader":function(){define("./kernel,../has,require,module,./json,./lang,./array".split(","),
function(l,m,k,j,e,h,d){var c=function(a){return a.replace(/\./g,"/")},b=/\/\/>>built/,a=[],f=[],n=function(b,c,e){a.push(e);d.forEach(b.split(","),function(a){a=G(a,c.module);f.push(a);K(a)});r()},r=function(){var b,c;for(c in E){b=E[c];if(void 0===b.noReqPluginCheck)b.noReqPluginCheck=/loadInit\!/.test(c)||/require\!/.test(c)?1:0;if(!b.executed&&!b.noReqPluginCheck&&b.injected==x)return}R(function(){var b=a;a=[];d.forEach(b,function(a){a(1)})})},t=function(a,b,c){var d=/\(|\)/g,f=1;for(d.lastIndex=
b;(b=d.exec(a))&&!(f=")"==b[0]?f-1:f+1,0==f););if(0!=f)throw"unmatched paren around character "+d.lastIndex+" in: "+a;return[l.trim(a.substring(c,d.lastIndex))+";\n",d.lastIndex]},q=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/mg,o=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/mg,s=/(^|\s)(require|define)\s*\(/m,u=function(a,b){var c,d,f,e=[],h=[];c=[];for(b=b||a.replace(q,function(a){o.lastIndex=s.lastIndex=0;return o.test(a)||s.test(a)?"":a});c=o.exec(b);)d=
o.lastIndex,f=d-c[0].length,d=t(b,d,f),"loadInit"==c[2]?e.push(d[0]):h.push(d[0]),o.lastIndex=d[1];c=e.concat(h);return c.length||!s.test(b)?[a.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),c.join(""),c]:0},w=k.initSyncLoader(n,r,function(a,c){var d,f,e=[],o=[];if(b.test(c)||!(d=u(c)))return 0;f=a.mid+"-*loadInit";for(var h in G("dojo",a).result.scopeMap)e.push(h),o.push('"'+h+'"');return"// xdomain rewrite of "+a.mid+"\ndefine('"+f+"',{\n\tnames:"+l.toJson(e)+",\n\tdef:function("+
e.join(",")+"){"+d[1]+"}});\n\ndefine("+l.toJson(e.concat(["dojo/loadInit!"+f]))+", function("+e.join(",")+"){\n"+d[0]+"});"}),v=w.sync,x=w.requested,y=w.arrived,C=w.nonmodule,B=w.executing,A=w.executed,z=w.syncExecStack,E=w.modules,D=w.execQ,G=w.getModule,K=w.injectModule,N=w.setArrived,L=w.signal,I=w.finishExec,J=w.execModule,U=w.getLegacyMode,R=w.guardCheckComplete,n=w.dojoRequirePlugin;l.provide=function(a){var b=z[0],d=h.mixin(G(c(a),k.module),{executed:B,result:h.getObject(a,!0)});N(d);if(b)(b.provides||
(b.provides=[])).push(function(){d.result=h.getObject(a);delete d.provides;d.executed!==A&&I(d)});return d.result};m.add("config-publishRequireResult",1,0,0);l.require=function(a,b){var d=function(a,b){var d=G(c(a),k.module);if(z.length&&z[0].finish)z[0].finish.push(a);else{if(d.executed)return d.result;b&&(d.result=C);var f=U();K(d);f=U();d.executed!==A&&d.injected===y&&w.guardCheckComplete(function(){J(d)});if(d.executed)return d.result;f==v?d.cjs?D.unshift(d):z.length&&(z[0].finish=[a]):D.push(d)}}(a,
b);m("config-publishRequireResult")&&!h.exists(a)&&void 0!==d&&h.setObject(a,d);return d};l.loadInit=function(a){a()};l.registerModulePath=function(a,b){var c={};c[a.replace(/\./g,"/")]=b;k({paths:c})};l.platformRequire=function(a){for(var a=(a.common||[]).concat(a[l._name]||a["default"]||[]),b;a.length;)h.isArray(b=a.shift())?l.require.apply(l,b):l.require(b)};l.requireIf=l.requireAfterIf=function(a,b,c){a&&l.require(b,c)};l.requireLocalization=function(a,b,c){k(["../i18n"],function(d){d.getLocalization(a,
b,c)})};return{extractLegacyApiApplications:u,require:n,loadInit:function(a,b,d){b([a],function(a){b(a.names,function(){for(var f="",e=[],o=0;o<arguments.length;o++)f+="var "+a.names[o]+"= arguments["+o+"]; ",e.push(arguments[o]);eval(f);var h=b.module,s=[],r,f={provide:function(a){a=c(a);a=G(a,h);a!==h&&N(a)},require:function(a,b){a=c(a);b&&(G(a,h).result=C);s.push(a)},requireLocalization:function(a,b,d){r||(r=["dojo/i18n"]);d=(d||l.locale).toLowerCase();a=c(a)+"/nls/"+(/root/i.test(d)?"":d+"/")+
c(b);G(a,h).isXd&&r.push("dojo/i18n!"+a)},loadInit:function(a){a()}},o={},q;try{for(q in f)o[q]=l[q],l[q]=f[q];a.def.apply(null,e)}catch(t){L("error",[{src:j.id,id:"failedDojoLoadInit"},t])}finally{for(q in f)l[q]=o[q]}r&&(s=s.concat(r));s.length?n(s.join(","),b,d):d()})})}}})},"dojox/main":function(){define(["dojo/_base/kernel"],function(l){return l.dojox})},"dojox/rpc/JsonRest":function(){define("dojox/rpc/JsonRest",["dojo","dojox","dojox/json/ref","dojox/rpc/Rest"],function(l,m){function k(d,c,
b,a){(c=c.ioArgs&&c.ioArgs.xhr&&c.ioArgs.xhr.getResponseHeader("Last-Modified"))&&e._timeStamps&&(e._timeStamps[a]=c);var f=d._schema&&d._schema.hrefProperty;if(f)m.json.ref.refAttribute=f;b=b&&m.json.ref.resolveJson(b,{defaultId:a,index:e._index,timeStamps:c&&e._timeStamps,time:c,idPrefix:d.servicePath.replace(/[^\/]*$/,""),idAttribute:h.getIdAttribute(d),schemas:h.schemas,loader:h._loader,idAsRef:d.idAsRef,assignAbsoluteIds:!0});m.json.ref.refAttribute="$ref";return b}var j=[],e=m.rpc.Rest,h;h=
m.rpc.JsonRest={serviceClass:m.rpc.Rest,conflictDateHeader:"If-Unmodified-Since",commit:function(d){for(var d=d||{},c=[],b={},a=[],f=0;f<j.length;f++){var n=j[f],r=n.object,t=n.old;if((!d.service||!r&&!t||!(r||t).__id.indexOf(d.service.servicePath))&&n.save){delete r.__isDirty;if(r)if(t){var q;if(q=r.__id.match(/(.*)#.*/))r=e._index[q[1]];if(!(r.__id in b)){b[r.__id]=r;if(d.incrementalUpdates&&!q)var o=("function"==typeof d.incrementalUpdates?d.incrementalUpdates:function(){o={};for(var a in r)if(r.hasOwnProperty(a))r[a]!==
t[a]&&(o[a]=r[a]);else if(t.hasOwnProperty(a))return null;return o})(r,t);o?c.push({method:"post",target:r,content:o}):c.push({method:"put",target:r,content:r})}}else q=h.getServiceAndId(r.__id).service,h.getIdAttribute(q)in r&&!d.alwaysPostNewItems?c.push({method:"put",target:r,content:r}):c.push({method:"post",target:{__id:q.servicePath},content:r});else t&&c.push({method:"delete",target:t});a.push(n);j.splice(f--,1)}}l.connect(d,"onError",function(){if(!1!==d.revertOnError){var b=j;j=a;h.revert();
j=b}else l.forEach(a,function(a){h.changing(a.object,!a.object)})});h.sendToServer(c,d);return c},sendToServer:function(d,c){var b=l.xhr,a=d.length,f,n,j,t=this.conflictDateHeader;l.xhr=function(a,c){c.headers=c.headers||{};c.headers.Transaction=d.length-1==f?"commit":"open";t&&j&&(c.headers[t]=j);n&&(c.headers["Content-ID"]="<"+n+">");return b.apply(l,arguments)};for(f=0;f<d.length;f++){var q=d[f];m.rpc.JsonRest._contentId=q.content&&q.content.__id;var o="post"==q.method;(j="put"==q.method&&e._timeStamps[q.content.__id])&&
(e._timeStamps[q.content.__id]=new Date+"");n=o&&m.rpc.JsonRest._contentId;var s=h.getServiceAndId(q.target.__id),o=s.service,s=q.deferred=o[q.method](s.id.replace(/#/,""),m.json.ref.toJson(q.content,!1,o.servicePath,!0));(function(b,f,o){f.addCallback(function(h){try{var n=f.ioArgs.xhr&&f.ioArgs.xhr.getResponseHeader("Location");if(n){var s=n.match(/(^\w+:\/\/)/)&&n.indexOf(o.servicePath),n=0<s?n.substring(s):(o.servicePath+n).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");b.__id=
n;e._index[n]=b}h=k(o,f,h,b&&b.__id)}catch(j){}--a||c.onComplete&&c.onComplete.call(c.scope,d);return h})})(q.content,s,o);s.addErrback(function(b){a=-1;c.onError.call(c.scope,b)})}l.xhr=b},getDirtyObjects:function(){return j},revert:function(d){for(var c=j.length;0<c;){c--;var b=j[c],a=b.object,b=b.old,f=m.data._getStoreForItem(a||b);if(!d||!a&&!b||!(a||b).__id.indexOf(d.servicePath)){if(a&&b){for(var e in b)if(b.hasOwnProperty(e)&&a[e]!==b[e]){if(f)f.onSet(a,e,a[e],b[e]);a[e]=b[e]}for(e in a)if(!b.hasOwnProperty(e)){if(f)f.onSet(a,
e,a[e]);delete a[e]}}else if(b){if(f)f.onNew(b)}else if(f)f.onDelete(a);delete (a||b).__isDirty;j.splice(c,1)}}},changing:function(d,c){if(d.__id){d.__isDirty=!0;for(var b=0;b<j.length;b++){var a=j[b];if(d==a.object){if(c&&(a.object=!1,!this._saveNotNeeded))a.save=!0;return}}a=d instanceof Array?[]:{};for(b in d)d.hasOwnProperty(b)&&(a[b]=d[b]);j.push({object:!c&&d,old:a,save:!this._saveNotNeeded})}},deleteObject:function(d){this.changing(d,!0)},getConstructor:function(d,c){if("string"==typeof d){var b=
d,d=new m.rpc.Rest(d,!0);this.registerService(d,b,c)}if(d._constructor)return d._constructor;d._constructor=function(a){function b(a){if(a){b(a["extends"]);t=a.properties;for(var d in t){var e=t[d];e&&"object"==typeof e&&"default"in e&&(c[d]=e["default"])}}a&&a.prototype&&a.prototype.initialize&&(q=!0,a.prototype.initialize.apply(c,r))}var c=this,r=arguments,t,q;b(d._schema);!q&&a&&"object"==typeof a&&l.mixin(c,a);var o=h.getIdAttribute(d);e._index[this.__id=this.__clientId=d.servicePath+(this[o]||
Math.random().toString(16).substring(2,14)+"@"+(m.rpc.Client&&m.rpc.Client.clientId||"client"))]=this;m.json.schema&&t&&m.json.schema.mustBeValid(m.json.schema.validate(this,d._schema));j.push({object:this,save:!0})};return l.mixin(d._constructor,d._schema,{load:d})},fetch:function(d){d=h.getServiceAndId(d);return this.byId(d.service,d.id)},getIdAttribute:function(d){var d=d._schema,c;if(d&&!(c=d._idAttr))for(var b in d.properties)if(d.properties[b].identity||"self"==d.properties[b].link)d._idAttr=
c=b;return c||"id"},getServiceAndId:function(d){var c="",b;for(b in h.services)d.substring(0,b.length)==b&&b.length>=c.length&&(c=b);if(c)return{service:h.services[c],id:d.substring(c.length)};d=d.match(/^(.*\/)([^\/]*)$/);return{service:new h.serviceClass(d[1],!0),id:d[2]}},services:{},schemas:{},registerService:function(d,c,b){c=d.servicePath=c||d.servicePath;d._schema=h.schemas[c]=b||d._schema||{};h.services[c]=d},byId:function(d,c){var b,a=e._index[(d.servicePath||"")+c];return a&&!a._loadObject?
(b=new l.Deferred,b.callback(a),b):this.query(d,c)},query:function(d,c,b){var a=d(c,b);a.addCallback(function(f){return f.nodeType&&f.cloneNode?f:k(d,a,f,"string"!=typeof c||b&&(b.start||b.count)?void 0:c)});return a},_loader:function(d){var c=h.getServiceAndId(this.__id),b=this;h.query(c.service,c.id).addBoth(function(a){a==b?(delete a.$ref,delete a._loadObject):b._loadObject=function(b){b(a)};d(a)})},isDirty:function(d,c){return!d?c?l.some(j,function(b){return m.data._getStoreForItem(b.object||
b.old)==c}):!!j.length:d.__isDirty}};return m.rpc.JsonRest})},"dojox/json/ref":function(){define("dojo/_base/array,dojo/_base/json,dojo/_base/kernel,dojo/_base/lang,dojo/date/stamp,dojox".split(","),function(l,m,k,j,e,h){j.getObject("json",!0,h);return h.json.ref={resolveJson:function(d,c){function b(y,m,B,A,z,E){var D,G,K,B=a in y?y[a]:B;if(a in y||void 0!==B&&A)B=(j+B).replace(l,"$2$3");A=E||y;if(void 0!==B){if(t)y.__id=B;if(c.schemas&&!(y instanceof Array)&&(K=B.match(/^(.+\/)[^\.\[]*$/)))z=c.schemas[K[1]];
if(q[B]&&y instanceof Array==q[B]instanceof Array)A=q[B],delete A.$ref,delete A._loadObject,G=!0;else if(K=z&&z.prototype)x.prototype=K,A=new x;q[B]=A;if(o)o[B]=c.time}for(;z;){if(K=z.properties)for(D in y){var N=K[D];N&&"date-time"==N.format&&"string"==typeof y[D]&&(y[D]=e.fromISOString(y[D]))}z=z["extends"]}z=y.length;for(D in y){if(D==z)break;if(y.hasOwnProperty(D)){K=y[D];if("object"==typeof K&&K&&!(K instanceof Date)&&"__parent"!=D){s=K[f]||h&&K[a];if((!s||!K.__parent)&&y!=k)K.__parent=A;if(s)if(delete y[D],
E=s.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/),q[(j+s).replace(l,"$2$3")]?s=q[(j+s).replace(l,"$2$3")]:(s="$"==E[1]||"this"==E[1]||""==E[1]?d:q[(j+E[1]).replace(l,"$2$3")])&&E[3]&&E[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(a,b,c,d,f){s=s&&s[c?c.replace(/[\"\'\\]/,""):f]}),s)K=s;else{if(!m){var L;L||k.push(A);L=!0;K=b(K,!1,K[f],!0,N);K._loadObject=c.loader}}else m||(K=b(K,k==y,void 0===B?void 0:v(B,D),!1,N,A!=y&&"object"==typeof A[D]&&A[D]))}y[D]=
K;if(A!=y&&!A.__isDirty&&(E=A[D],A[D]=K,G&&K!==E&&!A._loadObject&&!("_"==D.charAt(0)&&"_"==D.charAt(1))&&"$ref"!=D&&!(K instanceof Date&&E instanceof Date&&K.getTime()==E.getTime())&&!("function"==typeof K&&"function"==typeof E&&K.toString()==E.toString())&&q.onUpdate))q.onUpdate(A,D,E,K)}}if(G&&(a in y||A instanceof Array))for(D in A){if(!A.__isDirty&&A.hasOwnProperty(D)&&!y.hasOwnProperty(D)&&!("_"==D.charAt(0)&&"_"==D.charAt(1))&&!(A instanceof Array&&isNaN(D))){if(q.onUpdate&&"_loadObject"!=D&&
"_idAttr"!=D)q.onUpdate(A,D,A[D],void 0);for(delete A[D];A instanceof Array&&A.length&&void 0===A[A.length-1];)A.length--}}else if(q.onLoad)q.onLoad(A);return A}var c=c||{},a=c.idAttribute||"id",f=this.refAttribute,h=c.idAsRef,j=c.idPrefix||"",t=c.assignAbsoluteIds,q=c.index||{},o=c.timeStamps,s,k=[],l=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,v=this._addProp,x=function(){};d&&"object"==typeof d&&(d=b(d,!1,c.defaultId,!0),b(k,!1));return d},fromJson:function(d,c){try{var b=eval("("+d+")")}catch(a){throw new SyntaxError("Invalid JSON string: "+
a.message+" parsing: "+d);}return b?this.resolveJson(b,c):b},toJson:function(d,c,b,a){function f(a,d,s){if("object"==typeof a&&a){if(a instanceof Date)return'"'+e.toISOString(a,{zulu:!0})+'"';var x=a.__id;if(x){if("#"!=d&&(n&&!x.match(/#/)||q[x]))return s=x,"#"!=x.charAt(0)&&(s=a.__clientId==x?"cid:"+x:x.substring(0,b.length)==b?x.substring(b.length):x),a={},a[t]=s,f(a,"#");d=x}else a.__id=d,o[d]=a;q[d]=a;var s=s||"",k=c?s+m.toJsonIndentStr:"",C=c?"\n":"",x=c?" ":"";if(a instanceof Array)return"["+
l.map(a,function(a,b){var c=f(a,j(d,b),k);"string"!=typeof c&&(c="undefined");return C+k+c}).join(","+x)+C+s+"]";var B=[],A;for(A in a)if(a.hasOwnProperty(A)){var z;if("number"==typeof A)z='"'+A+'"';else if("string"==typeof A&&("_"!=A.charAt(0)||"_"!=A.charAt(1)))z=m._escapeString(A);else continue;var E=f(a[A],j(d,A),k);"string"==typeof E&&B.push(C+k+z+":"+x+E)}return"{"+B.join(","+x)+C+s+"}"}return"function"==typeof a&&h.json.ref.serializeFunctions?a.toString():m.toJson(a)}var n=this._useRefs,j=
this._addProp,t=this.refAttribute,b=b||"",q={},o={},d=f(d,"#","");if(!a)for(var s in o)delete o[s].__id;return d},_addProp:function(d,c){return d+(d.match(/#/)?1==d.length?"":".":"#")+c},refAttribute:"$ref",_useRefs:!1,serializeFunctions:!1}})},"dojox/json/schema":function(){define(["dojo/_base/kernel","dojox","dojo/_base/array"],function(l,m){l.getObject("json.schema",!0,m);m.json.schema.validate=function(k,j){return this._validate(k,j,!1)};m.json.schema.checkPropertyChange=function(k,j,e){return this._validate(k,
j,e||"property")};m.json.schema.mustBeValid=function(k){if(!k.valid)throw new TypeError(l.map(k.errors,function(j){return"for property "+j.property+": "+j.message}).join(", "));};m.json.schema._validate=function(k,j,e){function h(b,a,f,n){function j(a){c.push({property:f,message:a})}function t(a,b){if(a){if("string"==typeof a&&"any"!=a&&("null"==a?null!==b:typeof b!=a)&&!(b instanceof Array&&"array"==a)&&!("integer"==a&&0===b%1))return[{property:f,message:typeof b+" value found, but a "+a+" is required"}];
if(a instanceof Array){for(var d=[],e=0;e<a.length&&(d=t(a[e],b)).length;e++);if(d.length)return d}else if("object"==typeof a)return d=c,c=[],h(b,a,f),e=c,c=d,e}return[]}var q,f=f+(f?"number"==typeof n?"["+n+"]":"undefined"==typeof n?"":"."+n:n);if(("object"!=typeof a||a instanceof Array)&&(f||"function"!=typeof a))return"function"==typeof a?Object(b)instanceof a||j("is not an instance of the class/constructor "+a.name):a&&j("Invalid schema/property definition "+a),null;e&&a.readonly&&j("is a readonly field, it can not be changed");
a["extends"]&&h(b,a["extends"],f,n);if(void 0===b)a.optional||j("is missing and it is not optional");else if(c=c.concat(t(a.type,b)),a.disallow&&!t(a.disallow,b).length&&j(" disallowed value was matched"),null!==b){if(b instanceof Array){if(a.items)if(a.items instanceof Array)for(n=0,q=b.length;n<q;n++)c.concat(h(b[n],a.items[n],f,n));else for(n=0,q=b.length;n<q;n++)c.concat(h(b[n],a.items,f,n));a.minItems&&b.length<a.minItems&&j("There must be a minimum of "+a.minItems+" in the array");a.maxItems&&
b.length>a.maxItems&&j("There must be a maximum of "+a.maxItems+" in the array")}else a.properties&&c.concat(d(b,a.properties,f,a.additionalProperties));a.pattern&&"string"==typeof b&&!b.match(a.pattern)&&j("does not match the regex pattern "+a.pattern);a.maxLength&&"string"==typeof b&&b.length>a.maxLength&&j("may only be "+a.maxLength+" characters long");a.minLength&&"string"==typeof b&&b.length<a.minLength&&j("must be at least "+a.minLength+" characters long");void 0!==typeof a.minimum&&typeof b==
typeof a.minimum&&a.minimum>b&&j("must have a minimum value of "+a.minimum);void 0!==typeof a.maximum&&typeof b==typeof a.maximum&&a.maximum<b&&j("must have a maximum value of "+a.maximum);if(a["enum"]){n=a["enum"];q=n.length;for(var o,s=0;s<q;s++)if(n[s]===b){o=1;break}o||j("does not have a value in the enumeration "+n.join(", "))}"number"==typeof a.maxDecimal&&b.toString().match(RegExp("\\.[0-9]{"+(a.maxDecimal+1)+",}"))&&j("may only have "+a.maxDecimal+" digits of decimal places")}return null}
function d(b,a,d,n){if("object"==typeof a){("object"!=typeof b||b instanceof Array)&&c.push({property:d,message:"an object is required"});for(var j in a)if(a.hasOwnProperty(j)&&!("_"==j.charAt(0)&&"_"==j.charAt(1))){var t=b[j];h(t,a[j],d,j)}}for(j in b)b.hasOwnProperty(j)&&!("_"==j.charAt(0)&&"_"==j.charAt(1))&&a&&!a[j]&&!1===n&&c.push({property:d,message:typeof t+"The property "+j+" is not defined in the schema and the schema does not allow additional properties"}),(t=a&&a[j]&&a[j].requires)&&!(t in
b)&&c.push({property:d,message:"the presence of the property "+j+" requires that "+t+" also be present"}),t=b[j],a&&"object"==typeof a&&!(j in a)&&h(t,n,d,j),!e&&t&&t.$schema&&(c=c.concat(h(t,t.$schema,d,j)));return c}var c=[];j&&h(k,j,"",e||"");!e&&k&&k.$schema&&h(k,k.$schema,"","");return{valid:!c.length,errors:c}};return m.json.schema})},"dojox/data/ServiceStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(l,m,k){return l("dojox.data.ServiceStore",m.getObject("dojox.data.ClientFilter",
0)||null,{service:null,constructor:function(j){this.byId=this.fetchItemByIdentity;this._index={};j&&m.mixin(this,j);this.idAttribute=j&&j.idAttribute||this.schema&&this.schema._idAttr},schema:null,idAttribute:"id",labelAttribute:"label",syncMode:!1,estimateCountFactor:1,getSchema:function(){return this.schema},loadLazyValues:!0,getValue:function(j,e,h){var d=j[e];return d||(e in j?d:j._loadObject?(dojox.rpc._sync=!0)&&arguments.callee.call(this,dojox.data.ServiceStore.prototype.loadItem({item:j})||
{},e,h):h)},getValues:function(j,e){var h=this.getValue(j,e);return h instanceof Array?h:void 0===h?[]:[h]},getAttributes:function(j){var e=[],h;for(h in j)j.hasOwnProperty(h)&&!("_"==h.charAt(0)&&"_"==h.charAt(1))&&e.push(h);return e},hasAttribute:function(j,e){return e in j},containsValue:function(j,e,h){return-1<k.indexOf(this.getValues(j,e),h)},isItem:function(j){return"object"==typeof j&&j&&!(j instanceof Date)},isItemLoaded:function(j){return j&&!j._loadObject},loadItem:function(j){var e;j.item._loadObject?
j.item._loadObject(function(h){e=h;delete e._loadObject;var d=h instanceof Error?j.onError:j.onItem;d&&d.call(j.scope,h)}):j.onItem&&j.onItem.call(j.scope,j.item);return e},_currentId:0,_processResults:function(j,e){if(j&&"object"==typeof j){var h=j.__id;if(!h&&(h=this.idAttribute?j[this.idAttribute]:this._currentId++,void 0!==h)){var d=this._index[h];if(d){for(var c in d)delete d[c];j=m.mixin(d,j)}j.__id=h;this._index[h]=j}for(var b in j)j[b]=this._processResults(j[b],e).items;h=j.length}return{totalCount:e.request.count==
h?(e.request.start||0)+h*this.estimateCountFactor:h,items:j}},close:function(j){return j&&j.abort&&j.abort()},fetch:function(j){j=j||{};if("syncMode"in j?j.syncMode:this.syncMode)dojox.rpc._sync=!0;var e=this,h=j.scope||e,d=this.cachingFetch?this.cachingFetch(j):this._doQuery(j);d.request=j;d.addCallback(function(c){j.clientFetch&&(c=e.clientSideFetch({query:j.clientFetch,sort:j.sort,start:j.start,count:j.count},c));var b=e._processResults(c,d),c=j.results=b.items;j.onBegin&&j.onBegin.call(h,b.totalCount,
j);if(j.onItem)for(b=0;b<c.length;b++)j.onItem.call(h,c[b],j);j.onComplete&&j.onComplete.call(h,j.onItem?null:c,j);return c});d.addErrback(j.onError&&function(c){return j.onError.call(h,c,j)});j.abort=function(){d.cancel()};j.store=this;return j},_doQuery:function(j){return this.service("string"==typeof j.queryStr?j.queryStr:j.query)},getFeatures:function(){return{"dojo.data.api.Read":!0,"dojo.data.api.Identity":!0,"dojo.data.api.Schema":this.schema}},getLabel:function(j){return this.getValue(j,this.labelAttribute)},
getLabelAttributes:function(){return[this.labelAttribute]},getIdentity:function(j){return j.__id},getIdentityAttributes:function(){return[this.idAttribute]},fetchItemByIdentity:function(j){var e=this._index[(j._prefix||"")+j.identity];if(e){if(e._loadObject)return j.item=e,this.loadItem(j);j.onItem&&j.onItem.call(j.scope,e)}else return this.fetch({query:j.identity,onComplete:j.onItem,onError:j.onError,scope:j.scope}).results;return e}})})},"js/webext/widgets/table/_TableSortingMixin":function(){define(["dojo/_base/declare",
"dojo/_base/array"],function(l,m){return l(null,{sort:function(k,j){var e=this;j||(j=0);var h=e.orderField;e.orderField instanceof Array&&e.orderField.length>j&&(h=e.orderField[j]);void 0!==h&&m.forEach(e.columns,function(d){var c=!!d.getRawValue;void 0!==d.orderField&&d.orderField===h&&k.sort(function(b,a){var f=null,h=null;c?(f=d.getRawValue(b.item),h=d.getRawValue(a.item)):(f=b.item[d.orderField],h=a.item[d.orderField]);var j=!0,t=!0;if(null===f||void 0===f)j=!1;if(null===h||void 0===h)t=!1;var q=
0;!j||!t?!j&&!t?q=0:j?q=1:t&&(q=-1):(j=typeof f,"number"===j?q=f-h:"string"===j?q=f.localeCompare(h):"object"===j&&f instanceof Date&&(q=f-h));"desc"===e.sortType&&(q*=-1);return q})});m.forEach(k,function(d){d.children&&0<d.children.length&&e.sort(d.children,j+1)});return k}})})},"js/webext/widgets/table/_TableSelectableMixin":function(){define(["dojo/_base/declare","dojo/_base/array","dijit/form/CheckBox","dijit/form/RadioButton"],function(l,m,k,j){return l(null,{lastSelectedRowObject:null,onSelectItem:function(){},
onDeselectItem:function(){},isSelectable:function(){return!0},getSelectedItems:function(){var e=this,h=[];m.forEach(e.selectedItems,function(d){(d=e.rowObjects[d])&&d.visible&&h.push(d.item)});return h},selectItems:function(e){var h=this;m.forEach(e,function(d){d=h._getRowObjectForItem(d);d.parent&&h._expandAllParents(d.parent);d.selectCheckbox&&d.visible&&d.selectCheckbox.set("value",!0)})},deselectItems:function(e){var h=this;m.forEach(e,function(d){d=h._getRowObjectForItem(d);d.parent&&h._expandAllParents(d.parent);
d.selectCheckbox&&d.visible&&d.selectCheckbox.set("value",!1)})},deselectAll:function(){m.forEach(this.rowObjectList,function(e){e.selectCheckbox&&e.selectCheckbox.set("value",!1)})},initSelectableMixin:function(){var e=this;this.selectedItems=[];if(this.selectable&&(this.columns.unshift({name:"",width:"14px",beforeExpander:!0,headingFormatter:function(){if(!e.radioSelect)return e.selectAllCheckbox=new k,e.selectAllCheckbox.on("change",function(h){m.forEach(e.rowObjectList,function(d){d.selectCheckbox&&
(!1===h||d.visible)&&d.selectCheckbox.set("value",h)})}),e.selectAllCheckbox},formatter:function(h){var d=e._getRowObjectForItem(h);if(e.isSelectable(h)){var h=e._getRowObjectForItem(h),c=-1!==e.selectedItems.indexOf(d.id),b;b=e.radioSelect?new j({name:"treeSelect",value:h.id,checked:c}):new k({checked:c});b.on("click",function(a){if(b.get("checked")){if(a.shiftKey&&e.lastSelectedRowObject){var c=!1;m.forEach(e.rowObjectList,function(a){if(a===d||a===e.lastSelectedRowObject)c=!c;var b=!a.parent||
a.parent&&a.parent.expanded;c&&a.visible&&b&&e._setSelected(a,!0)})}e.lastSelectedRowObject=d}else e.lastSelectedRowObject=null});b.on("change",function(a){e._setSelected(d,a)});return h.selectCheckbox=b}}}),e.draggable))this.on("displayTable",function(){var h=[];m.forEach(e.selectedItems,function(d){var c=e.rowObjects[d];c&&c.visible&&h.push(d)});m.forEach(h,function(d){var c=e.rowObjects[d];util.removeFromArray(e.selectedItems,d);c&&c.visible&&e._setSelected(c,!0)})})},setCheckboxState:function(e){this.selectAllCheckbox&&
this.selectAllCheckbox.set("checked",e)},_setSelected:function(e,h){var d=this;h?-1===d.selectedItems.indexOf(e.id)&&(d.selectedItems.push(e.id),this.draggable&&(d.dndContainer._addItemClass(e.domNode,"Selected"),d.dndContainer.selection[e.domNode.id]=1),d.onSelectItem(e.item)):(util.removeFromArray(d.selectedItems,e.id),this.draggable&&(d.dndContainer._removeItemClass(e.domNode,"Selected"),delete d.dndContainer.selection[e.domNode.id]),d.onDeselectItem(e.item));e.selectCheckbox&&e.selectCheckbox.set("value",
h);d.cascadeSelectedState&&m.forEach(d.getAllRowObjectDescendants(e),function(c){d._setSelected(c,h)})}})})},"dijit/form/RadioButton":function(){define(["dojo/_base/declare","./CheckBox","./_RadioButtonMixin"],function(l,m,k){return l("dijit.form.RadioButton",[m,k],{baseClass:"dijitRadio"})})},"dijit/form/_RadioButtonMixin":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/_base/event,dojo/_base/lang,dojo/query,../registry".split(","),function(l,m,k,j,e,h,d){return m("dijit.form._RadioButtonMixin",
null,{type:"radio",_getRelatedWidgets:function(){var c=[];h("input[type=radio]",this.focusNode.form||this.ownerDocument).forEach(e.hitch(this,function(b){b.name==this.name&&b.form==this.focusNode.form&&(b=d.getEnclosingWidget(b))&&c.push(b)}));return c},_setCheckedAttr:function(c){this.inherited(arguments);this._created&&c&&l.forEach(this._getRelatedWidgets(),e.hitch(this,function(b){b!=this&&b.checked&&b.set("checked",!1)}))},_getSubmitValue:function(c){return null==c?"on":c},_onClick:function(c){if(this.checked||
this.disabled)return j.stop(c),!1;return this.readOnly?(j.stop(c),l.forEach(this._getRelatedWidgets(),e.hitch(this,function(b){k.set(this.focusNode||this.domNode,"checked",b.checked)})),!1):this.inherited(arguments)}})})},"js/webext/widgets/table/_TableConfigMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/json"],function(l,m,k){var j=m.getObject("lscache");return l(null,{_cookieName:"savedTableConfig",rowsPerPage:10,pageNumber:1,orderField:null,sortType:"asc",expandedNodeList:null,
pageOptions:[10,25,50,100,250],initConfigMixin:function(){this.defaultRowsPerPage=this.rowsPerPage;this.defaultPageNumber=this.pageNumber;this.defaultOrderField=this.orderField;this.defaultSortType=this.sortType;var e=this.getStoredConfig();if(void 0!==e){if(void 0!==e.rowsPerPage)this.rowsPerPage=e.rowsPerPage;if(void 0!==e.pageNumber)this.pageNumber=e.pageNumber;if(void 0!==e.orderField)this.orderField=e.orderField;if(void 0!==e.sortType)this.sortType=e.sortType;if(void 0!==e.expandedNodeList)this.expandedNodeList=
e.expandedNodeList}},getStoredConfig:function(){var e;if(this.tableConfigKey){if(j){var h=j.get(this.tableConfigKey);if("String"===typeof h)return k.parse(h);if(h)return h}e||(h=util.getCookie(this._cookieName))&&(e=k.parse(h)[this.tableConfigKey])}return e},storeConfig:function(e){if(this.tableConfigKey)if(j)j.set(this.tableConfigKey,k.stringify(e),525600);else{var h={},d=util.getCookie(this._cookieName);d&&(h=k.parse(d));h[this.tableConfigKey]=e;for(var c;3900<k.stringify(h).length;){e=!0;d={};
for(c in h)h.hasOwnProperty(c)&&(e||(d[c]=h[c]),e=!1);h=d}util.setCookie(this._cookieName,k.stringify(h))}},saveCurrentSettings:function(){if(void 0!==this.tableConfigKey){var e={};if(this.rowsPerPage!==this.defaultRowsPerPage)e.rowsPerPage=this.rowsPerPage;if(this.pageNumber!==this.defaultPageNumber)e.pageNumber=this.pageNumber;if(this.orderField!==this.defaultOrderField)e.orderField=this.orderField;if(this.sortType!==this.defaultSortType)e.sortType=this.sortType;e.expandedNodeList=this.expandedNodeList;
this.storeConfig(e)}}})})},"js/webext/widgets/table/_TableHeaderFooterMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/keys,dojo/on,dojox/html/entities,dijit/form/Select,dijit/form/TextBox,dijit/Tooltip,dijit/_WidgetBase".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return l(null,{totalPages:void 0,pageOptions:[10,25,50,100,250],prevPage:void 0,drawHeadings:function(){var a=this;j.empty(this.theadAttach);this.draggable&&j.create("th",
{},this.theadAttach);m.forEach(this.columns,function(b){var h=j.create("th");b.style&&e.set(h,b.style);b.styleHeading&&e.set(h,b.styleHeading);if(void 0!==b.width)h.style.width=b.width;b["class"]&&k.add(h,b["class"]);if(b.headingFormatter){var o=b.headingFormatter(h);if(o instanceof n)o.placeAt(h);else if("object"===typeof o&&1===o.nodeType&&"object"===typeof o.style&&"object"===typeof o.ownerDocument)h.appendChild(o);else if(void 0!==o&&"object"!==typeof o)h.innerHTML=c.encode(""+o)}else{var s=j.create("div",
{style:{position:"relative"}}),o=j.create("span");o.innerHTML=c.encode(""+b.name);s.appendChild(o);b.description&&(o=a._createImg("helpImage",s),new f({connectId:[o],label:b.description,showDelay:200,position:["after","above","below","before"]}));if(b.orderField){k.add(h,"sortableColumn");s.tabIndex=0;var u=b.orderField===a.orderField||a.orderField instanceof Array&&0<a.orderField.length&&b.orderField===a.orderField[0];if(u){if(a.sortImageContainer&&a.sortImageContainer.parentNode)a.sortImageContainer.parentNode.removeChild(a.sortImageContainer),
a.sortImageContainer=void 0;var o=j.create("div",{"class":"sortImageWrapper"}),l=a._createImg("sortImage",o);k.toggle(l,"arrow_asc","asc"===a.sortType);k.toggle(l,"arrow_desc","desc"===a.sortType);l.alt="asc"===a.sortType?"ascending":"descending";o.appendChild(l);s.appendChild(o);a.sortImageContainer=o}var v=function(){if(a.sortImageContainer)a.sortImageContainer.parentNode.removeChild(a.sortImageContainer),a.sortImageContainer=null;var c=j.create("div",{"class":"sortImageWrapper"},s),d=a._createImg("sortImage",
c);c.appendChild(d);a.sortType=u&&"asc"===a.sortType?"desc":"asc";k.toggle(d,"arrow_asc","asc"===a.sortType);k.toggle(d,"arrow_desc","desc"===a.sortType);d.alt="asc"===a.sortType?"ascending":"descending";a.sortImageContainer=c;a.sortColumn=b;a.orderField=b.orderField;a.redraw();u=b.orderField===a.orderField||a.orderField instanceof Array&&0<a.orderField.length&&b.orderField===a.orderField[0]};d(h,"click",v);d(h,"keypress",function(a){13===a.charOrCode&&v()})}h.appendChild(s)}a.theadAttach.appendChild(h)})},
showFooter:function(){var a=this;a.totalPages=void 0!==a.totalRecords?Math.ceil(a.totalRecords/a.rowsPerPage):void 0;if(!this.hideFooter){j.empty(a.tfootAttach);var c=j.create("tr"),f=j.create("td");f.className="webextTableFooter";f.colSpan=a.columns.length;a.draggable&&f.colSpan++;var o=j.create("div");k.remove(this.tableAttach,"no-items-in-table");var h=j.create("div");if(0!==a.totalRecords&&!this.hidePagination){h.className="perPage";var n=[];m.forEach(this.pageOptions,function(b){n.push({label:""+
b,value:""+b,selected:a.rowsPerPage===b})});var l=j.create("span");l.style.paddingTop="2px";l.innerHTML=util.i18n("Items per page: ");h.appendChild(l);o.appendChild(h);l=new b({options:n,onChange:function(b){b=Number(b);if(a.rowsPerPage!==b){var c=(a.pageNumber-1)*a.rowsPerPage+1;a.rowsPerPage=b;a.pageNumber=Math.ceil(c/a.rowsPerPage);a.loadTable()}}});e.set(l.domNode,"display","inline-Block");l.placeAt(h);a.own(l);l=a.createPageNumberContainer();o.appendChild(l)}o.appendChild(h);l=j.create("span",
{"class":"numRecords"},h);if(0===a.totalRecords&&void 0!==a.noDataMessage&&!a.hasFilterValues())l=j.create("tr",{"class":"noDataRow"},a.tfootAttach),l=j.create("td",{colSpan:f.colSpan},l),j.create("span",{innerHTML:a.noDataMessage},l),k.add(a.tableAttach,"no-items-in-table");else if(!a.hidePagination)if(1===this.totalRecords)l.innerHTML=i18n("%s record",this.totalRecords);else if(a.totalRecords)l.innerHTML=i18n("%s records",this.totalRecords);if(!a.hideFooterLinks){if(!a.hidePagination&&a.totalRecords)j.create("span",
{},h).innerHTML="-";l=j.create("a",{},h);k.add(l,"linkPointer");l.onclick=function(){a.refresh()};l.innerHTML=i18n("Refresh");this.hidePrintLink||(h=j.create("a",{"class":"linkPointer",innerHTML:util.i18n("Print")},h),d(h,"click",function(){a.print()}))}f.appendChild(o);c.appendChild(f);a.tfootAttach.appendChild(c)}},createPageNumberContainer:function(){var b=this,c=j.create("div",{className:"pageNumbers inline-block"}),d=j.create("span");if(b.totalPages)d.innerText=b.pageNumber+" of "+b.totalPages+
" pages",c.appendChild(d);var f=1<this.pageNumber,d=b.createFirstLink(f),f=b.createPreviousLink(f);c.appendChild(d);c.appendChild(f);if(b.totalPages&&this.pageNumber>b.totalPages)this.pageNumber=b.totalPages;var h=new a({title:util.i18n("current page"),name:"page",value:this.pageNumber,onKeyPress:function(a){if(b._isEnterKeyPressed(a)&&(b.prevPage=b.pageNumber,a=parseInt(h.textbox.value,10),1<=a&&a!==b.pageNumber)){if(b.totalPages&&a>b.totalPages)a=b.totalPages;b.pageNumber=a;b.loadTable()}},onFocus:function(){h.textbox.select()}});
e.set(h.domNode,"width",10+10*(""+this.totalPages).length+"px");h.placeAt(c);b.own(h);h.textbox.style.textAlign="center";f=this.pageNumber<b.totalPages;d=b.totalPages?f:!1;f=b.createNextLink(b.totalPages?f:!0);d=b.createLastLink(d);c.appendChild(f);c.appendChild(d);return c},createFirstLink:function(a){var b=this;if(a){a=j.create("a",{"class":"linkPointer",tabindex:"0"});this._createImg("arrow_fastBackwards",a,{alt:util.i18n("first page")});var c=function(){b.pageNumber=1;b.loadTable()};a.onclick=
c;a.onkeyup=function(a){b._isEnterKeyPressed(a)&&c()}}else a=j.create("span"),this._createImg("arrow_fastBackwards_grey",a,{alt:util.i18n("first page disabled")});return a},createPreviousLink:function(a){var b=this;if(a){a=j.create("a",{"class":"linkPointer",tabindex:"0"});this._createImg("arrow_backwards",a,{alt:util.i18n("previous page")});var c=function(){b.prevPage=b.pageNumber;b.pageNumber--;b.loadTable()};a.onclick=c;a.onkeyup=function(a){b._isEnterKeyPressed(a)&&c()}}else a=j.create("span"),
this._createImg("arrow_backwards_grey",a,{alt:util.i18n("previous page disabled")});return a},createNextLink:function(a){var b=this;if(a){a=j.create("a",{"class":"linkPointer",tabindex:"0"});this._createImg("arrow_forward",a,{alt:util.i18n("next page")});var c=function(){b.prevPage=b.pageNumber;b.pageNumber++;b.loadTable()};a.onclick=c;a.onkeyup=function(a){b._isEnterKeyPressed(a)&&c()}}else a=j.create("span"),this._createImg("arrow_forward_grey",a,{alt:util.i18n("next page disabled")});return a},
createLastLink:function(a){var b=this;if(a){a=j.create("a",{"class":"linkPointer",tabindex:"0"});this._createImg("arrow_fastForward",a,{alt:util.i18n("last page")});var c=function(){b.pageNumber=b.totalPages;b.loadTable()};a.onclick=c;a.onkeyup=function(a){b._isEnterKeyPressed(a)&&c()}}else a=j.create("span"),this._createImg("arrow_fastForward_grey",a,{alt:util.i18n("last page disabled")});return a},_isEnterKeyPressed:function(a){return(a.charCode||a.keyCode)===h.ENTER}})})},"js/webext/widgets/form/MenuButton":function(){define(["dijit/form/DropDownButton",
"dijit/DropDownMenu","dijit/MenuItem","dojo/_base/array","dojo/_base/declare"],function(l,m,k,j,e){return e([l],{postCreate:function(){this.inherited(arguments);var e=this;this.dropDown=new m;j.forEach(this.options,function(d){e.dropDown.addChild(new k(d))})}})})},"deploy/widgets/version/VersionSelect":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,dojo/_base/array,js/webext/widgets/select/WebextSelect,dojo/store/Memory,js/webext/widgets/FormDelegates".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return k("deploy.widgets.version.VersionSelect",[m,l],{templateString:'<div class="versionSelect" data-dojo-attach-point="versionAttach"><div data-dojo-attach-point="versionSelectAttach" class="inline-block version-select-drop-down"></div><div data-dojo-attach-point="latestAttach" class="inline-block latest-version-link"></div></div>',extraSimpleLinkToHandlers:[],postCreate:function(){this.inherited(arguments);var d=this.component,j,t;if(this.environment&&!this.allowInvalidVersions)j=
bootstrap.restUrl+"deploy/component/"+d.id+"/versionsByEnvironment/"+this.environment.id;else if(j=bootstrap.restUrl+"deploy/version",t={filterFields:["component.id"],"filterType_component.id":"eq","filterValue_component.id":d.id,"filterClass_component.id":"UUID"},!this.allowInactiveVersions)t.filterFields.push("active"),t.filterType_active="eq",t.filterValue_active=!0,t.filterClass_active="Boolean";this.versionSelect=f.retrieveDelegate("TableFilterMultiSelect")({url:j,value:this.value,defaultQuery:t});
this.versionSelect.placeAt(this.versionSelectAttach);this.versionSelect.dropDown&&h.add(this.versionSelect.dropDown.textbox,"versionSelectTextBox");if(this.extraSimpleLinkToHandlers&&0!==this.extraSimpleLinkToHandlers.length){var q=[],o={};q.push({label:i18n("Version Lookups"),value:i18n("Version Lookups")});c.forEach(this.extraSimpleLinkToHandlers,function(a){o[a.name]=a.handler;q.push({label:a.name,value:a.name})});d=new a({data:q,idProperty:"value"});this.extraSelect=new b({autoSelectFirst:!0,
name:"SelectorSelector",store:d,searchAttr:"value",onChange:function(a){if(o.hasOwnProperty(a))o[a]()}});this.extraSelect.placeAt(this.latestAttach)}else this.latest=e.create("a",{innerHTML:i18n("Latest Available"),"class":"inline-block linkPointer"},this.latestAttach)}})})},"js/webext/widgets/select/WebextSelect":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/xhr,dojo/_base/json,dojo/aspect,dojo/window,dojo/on,dojo/mouse,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-attr,dojo/dom-geometry,dojo/when,dijit/form/FilteringSelect,js/util/loading/LoadingSpinner".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return k("js.webext.widgets.select.WebextSelect",[m,l],{templateString:'<div class="webext-select combo-check-box-select filtering-scroll-select"><div class="combo-box-attach" data-dojo-attach-point="comboBoxAttachPoint"></div></div>',store:null,displayedValue:null,searchAttr:"name",value:"",queryExpr:"${0}*",pageSize:30,maxHeight:280,allowNone:!1,autoSelectFirst:!1,readOnly:!1,required:!1,trim:!1,validate:!0,enforceTranslatedDisplayValues:!1,postCreate:function(){this.inherited(arguments);
var b=this;this._createDropDownWidget();this._attachDropDownEvents();if(!b.required&&b.allowNone&&!b.readOnly){dojo.addClass(this.comboBoxAttachPoint,"allowsNone");var d=n.create("div",{className:"clear-container"},b.dropDown.domNode),d=n.create("div",{className:"icon_delete",title:i18n("Clear Selection")},d);this.own(a(d,"click",function(){b.dropDown.set("value","",void 0,void 0,"")}))}b._setInitialValue();c.after(b.dropDown,"_startSearch",function(){b._spinner&&b._spinner.show();var a=b.dropDown.dropDown;
a._webextData||(b._setupInfiniteScroll(a),b._setupStylingInterceptors(a))});c.after(b.store,"query",function(a){s(a,function(){},function(a){a.dojoType&&"cancel"===a.dojoType||(b.onQueryError(a),b._spinner&&b._spinner.hide())});return a})},_createDropDownWidget:function(){this.dropDown=new u({autoComplete:!1,labelAttr:this.searchAttr,maxHeight:this.maxHeight,pageSize:this.pageSize,placeHolder:this.placeHolder,query:this.defaultQuery||{},readOnly:this.readOnly||!1,required:this.required||!1,searchAttr:this.searchAttr,
queryExpr:this.queryExpr,store:this.store,style:this.style});this.dropDown.placeAt(this.comboBoxAttachPoint);this._spinner=(new w({color:"blue"})).placeAt(this.dropDown)},_attachDropDownEvents:function(){var b=this;b.dropDown.on("change",function(a){var c=b.dropDown.item;if(c)b.onChange(a,c);else b.onChange(null,c)});b.dropDown.own(a(b.dropDown,"blur",function(){b._spinner&&b._spinner.hide()}));c.after(b.dropDown,"_setValueAttr",function(a,c,d,f){r.remove(b.dropDown.domNode,"dijitPlaceHolder");f?
(r.add(b.domNode,"has-value"),b.onSetItem(a,f)):(r.remove(b.domNode,"has-value"),b.onSetItem(null,f));b.enforceTranslatedDisplayValues&&b._onSelectItem()},!0);this.enforceTranslatedDisplayValues&&c.after(b.dropDown,"_announceOption",function(){b._onSelectItem()},!0)},_setInitialValue:function(){var a=this;a.value?(this.dropDown.set("value",a.value,!1,a.value+"...",{}),r.add(this.dropDown.domNode,"dijitPlaceHolder"),this.dropDown.set("value",a.value)):a.displayedValue?a.dropDown.set("displayedValue",
a.displayedValue):a.autoSelectFirst&&a.store.query(a.defaultQuery||{},{count:1}).forEach(function(b){a.dropDown.set("item",b,!1,b[a.searchAttr])})},_setupInfiniteScroll:function(a){var b=this;a._webextData={isLoading:!1};a.on("scroll",function(){if(a.nextButton){var b=o.position(a.domNode),c=b.h,b=b.y,d=o.position(a.nextButton),f=d.h;if(200>=d.y-(c+b)&&0!==f&&!a._webextData.isLoading)a._webextData.isLoading=!0,a.onPage(1)}});c.around(b.dropDown,"_openResultList",function(c){return function(){b._spinner&&
b._spinner.hide();var d=a.domNode.scrollTop,f=a.getHighlightedOption();c.apply(b.dropDown,arguments);a.set("selected",f);a.domNode.scrollTop=d;a._webextData.isLoading=!1}});c.around(a,"createOptions",function(c){return function(d,f,e){var o=b.onFilterResult(d),d=a.items||[];c.apply(a,[o,f,e]);if(a._webextData.isLoading&&(a.items=d.concat(o),a.nextButton))for(f=a.nextButton.previousSibling;f;)e=Number(f.getAttribute("item")),f.setAttribute("item",e+d.length),f=0===e?null:f.previousSibling;if(a.previousButton)a.previousButton.style.display=
"none";if(a.nextButton)a.nextButton.innerHTML=i18n("Loading...")}});c.around(a,"clearResultList",function(b){return function(){a._webextData.isLoading||b.apply(a,arguments)}})},_setupStylingInterceptors:function(a){var b=this;c.around(a,"_createOption",function(c){return function(d,f){var e=c.apply(a,arguments);b.formatDropDownLabel(e,d);return e}})},formatDropDownLabel:function(){},_setValueAttr:function(a){this.dropDown&&this.dropDown.set("value",a)},_setDisplayedValueAttr:function(a){this.dropDown&&
this.dropDown.set("displayedValue",a)},_getValueAttr:function(){return this.dropDown.get("value")},_getItemAttr:function(){return this.dropDown.get("item")},onChange:function(){},_onSelectItem:function(){this._setTextDisplayedValue(i18n(this._getTextDisplayedValue()))},onSetItem:function(){},onQueryError:function(){},onFilterResult:function(a){return a},focus:function(){},_setTextDisplayedValue:function(a){if(this.dropDown&&this.dropDown.textbox&&this.dropDown.textbox.value)this.dropDown.textbox.value=
a},_getTextDisplayedValue:function(){return this.dropDown&&this.dropDown.textbox&&this.dropDown.textbox.value?this.dropDown.textbox.value:null}})})},"js/util/loading/LoadingSpinner":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/dom-construct,dojo/dom-class,dojo/dom-style".split(","),function(l,m,k,j,e,h){return l([m,k],{templateString:'<span class="webext-spinner"><div class="" data-dojo-attach-point="spinnerAttach"></div></span>',color:"black",postCreate:function(){this.inherited(arguments);
this.changeColor(this.color);this.hide()},spin:function(d){var c=this;if(!this.intervalId){var b=0;this.intervalId=setInterval(function(){c.spinnerAttach&&(h.set(c.spinnerAttach,"-webkit-transform","rotate("+b+"deg)"),h.set(c.spinnerAttach,"mozTransform","rotate("+b+"deg)"),h.set(c.spinnerAttach,"-moz-transform","rotate("+b+"deg)"),h.set(c.spinnerAttach,"-ms-transform","rotate("+b+"deg)"),h.set(c.spinnerAttach,"-o-transform","rotate("+b+"deg)"),h.set(c.spinnerAttach,"transform","rotate("+b+"deg)"));
360===b&&(b=0);b+=4},10)}d&&this.intervalId&&setTimeout(function(){clearInterval(c.intervalId);c.spinnerAttach&&(h.set(c.spinnerAttach,"-webkit-transform","rotate(0deg)"),h.set(c.spinnerAttach,"mozTransform","rotate(0deg)"),h.set(c.spinnerAttach,"-moz-transform","rotate(0deg)"),h.set(c.spinnerAttach,"-ms-transform","rotate(0deg)"),h.set(c.spinnerAttach,"-o-transform","rotate(0deg)"),h.set(c.spinnerAttach,"transform","rotate(0deg)"));delete c.intervalId},250)},show:function(){this.spin();e.contains(this.domNode,
"hide-spinner")&&e.remove(this.domNode,"hide-spinner");e.add(this.domNode,"show-spinner")},hide:function(){e.contains(this.domNode,"show-spinner")&&e.remove(this.domNode,"show-spinner");e.add(this.domNode,"hide-spinner");this.spin(!0)},changeColor:function(d){d=d.toLowerCase();switch(d){case "white":break;case "blue":break;case "darkblue":break;default:d="black"}e.contains(this.spinnerAttach,this.color+"-spinner")&&e.remove(this.spinnerAttach,this.color+"-spinner");e.add(this.spinnerAttach,d+"-spinner")}})})},
"deploy/widgets/version/VersionDisplay":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/on,dojo/json,dojo/mouse,dojo/_base/declare,dojo/_base/Color,dojo/dom-construct,dojo/dom-class,dojo/dom-style,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),function(l,m,k,j,e,h,d,c,b){return h([m,l],{templateString:'<div class="tagDisplay" data-dojo-attach-point="versionDiv"><div class="tagContainer tagBox" data-dojo-attach-point="versionAttach"></div></div>',draggable:!0,postCreate:function(){var a=
this;a.inherited(arguments);a.draggable&&b.add(a.versionDiv,"dojoDndItem");var d="",d=a.version instanceof String||"string"===typeof a.version?a.version.escape():a.version.name.escape(),d=c.create("div",{innerHTML:d});b.add(d,"tagName");c.place(d,a.versionAttach);if(!a.readOnly){var h=c.create("div",{title:i18n("Delete"),innerHTML:"x"});b.add(h,"inlineBlock");b.add(h,"tagDelete");k(h,"click",function(){a.onDelete()});k(h,e.enter,function(){b.add(h,"tagSelector")});k(h,e.leave,function(){b.remove(h,
"tagSelector")});c.place(h,a.versionAttach)}},onDelete:function(){this.destroy()}})})},"js/webext/widgets/GenericConfirm":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/kernel,dojo/aspect,dojo/dom-class,dojo/dom-construct,dojox/html/entities,dijit/_WidgetBase,dijit/form/Button,dijit/form/TextBox,js/webext/widgets/Dialog".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return m([b],{messages:null,inputFieldArray:null,confirmLabel:null,cancelLabel:null,title:null,hasInput:!1,
forceRawMessages:!1,postCreate:function(){var b=this;b.inherited(arguments);b.inputFieldArray=[];if(!b.cancelLabel)b.cancelLabel=i18n("Cancel");if(!b.confirmLabel)b.confirmLabel=i18n("OK");if(b.message&&null===b.messages)b.messages=[],b.messages.push(b.message);if(!b.title)b.title=i18n("Confirmation");var t=new n({title:b.title,closable:!0,draggable:!0,destroyOnHide:!0,execute:function(){b.action();t.hide()},extraClasses:["ucd-generic-confirm-alert"]});h.add(t.containerNode,"webext-generic-confirm");
b.own(t);e.after(t,"onHide",k.hitch(b,"destroy"));e.after(t,"onCancel",k.hitch(b,"cancelAction"));l.forEach(b.messages,function(a){b.forceRawMessages?j.deprecated("forceRawMessages is intended to support legacy code, but is discouraged, and may not be supported in the future."):a=c.encode(a);d.create("div",{className:"confirm-message",innerHTML:a||"&nbsp;"},t.containerNode);b.hasInput&&(a=new f({}),t.own(a),a.placeAt(t.containerNode),b.inputFieldArray.push(a));d.create("div",{className:"clear"},t.containerNode)});
var q=d.create("div");if(b.hasInput||b.showUnderField||void 0===b.showUnderField)q.className="underField";var o=new a({label:b.confirmLabel,showTitle:!1,onClick:function(){t.execute()}});t.own(o);o.placeAt(q);h.add(o.domNode,"idxButtonSpecial");o=new a({label:b.cancelLabel,showTitle:!1,onClick:function(){t.onCancel()}});t.own(o);o.placeAt(q);t.containerNode.appendChild(q);t.show()},getInput:function(){var a=[];l.forEach(this.inputFieldArray,function(b){a.push(b.attr("value"))});this.inputFieldArray=
[];return a},action:function(){},cancelAction:function(){}})})},"js/webext/widgets/RestSelect":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/kernel,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/form/Select,dijit/MenuSeparator,dijit/_base/wai,dojo/_base/xhr,dojo/_base/array,dijit/MenuItem,dojox/html/entities".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return l([j,e],{templateString:'<span class="restSelect inlineBlock">    <span data-dojo-attach-point="restSelect"></span></span>',
name:"",value:null,cachedValues:null,autoSelectFirst:!0,allowNone:!0,noneValue:"NONE_VALUE",escapeHTMLLabel:!0,loaded:!1,constructor:function(a){a.onChange&&k.deprecated("RestSelect#onChange","onChange property is discouraged, use aspect.after(X, 'onChange', func) instead");if(a.tooltipField)this.tooltipField=a.tooltipField;this.cachedValues={};this.watch("restUrl",this._updateRestUrl)},_setDisabledAttr:function(a){this.disabled=!!a;this.loaded&&this.selectWidget.set("disabled",this.disabled)},postCreate:function(){var e=
this;if(void 0===this.value)this.value=null;this.selectWidget=new h({name:e.name,options:[{label:i18n("Loading..."),value:e.value||this.noneValue}],disabled:!0});this.selectWidget.placeAt(this.restSelect);b.get({url:this.restUrl,handleAs:"json",headers:{Accept:"application/json"},error:function(a){if(e.restSelect)console.error(a),a=e.selectWidget.getOptions(0),a.label=i18n("Error!"),e.selectWidget.updateOption(a),e.selectWidget.set("disabled",!0)},load:function(b){if(e.restSelect){e.selectWidget.destroy();
e.selectWidget=null;e.loaded=!0;var j=[],o=!1;a.forEach(b,function(a){if(e.isValid(a)){var b=e.getLabel(a);e.escapeHTMLLabel&&"string"===typeof b&&(b=n.encode(b));var c=e.getValue(a),d=e.getStyle(a),f=e.value===c;f&&(o=!0);b={label:b,value:""+c,style:d,selected:f};e.tooltipField&&a.hasOwnProperty(e.tooltipField)&&(b[e.tooltipField]=a[e.tooltipField]);j.push(b);e.cachedValues[""+c]=a}});if(e.autoSelectFirst&&null===e.value&&!e.allowNone&&0<j.length)o=j[0].selected=!0;!o&&null!==e.value&&!e.noIllegalValues&&
(o=!0,j.push({label:e.existingValueLabel||e.value,value:e.value,style:"font-style:italic;",selected:!0}));e.allowNone?(b=e.noneLabel||i18n("None"),j.splice(0,0,{label:b,value:e.noneValue,selected:null===e.value&&!o})):0===j.length?(b=e.noDataMessage||i18n("No selections found"),j.splice(0,0,{label:b,value:e.noneValue,selected:null===e.value}),e.disabled=!0):null===e.value&&1<j.length&&!e.autoSelectFirst&&(b=e.noneLabel||i18n("-- Make Selection --"),j.splice(0,0,{label:b,value:e.noneValue,selected:!o}));
if(1===j.length)j[0].selected=!0;e.selectWidget=new h({name:e.name,className:e.className,options:j,disabled:!!e.disabled,maxHeight:250,onChange:function(a){a===e.noneValue&&(a="");e.value=a;e.onChange(e.value,e.cachedValues[e.value])},_getMenuItemForOption:function(a){if(!a.value&&!a.label)return new d;var b=m.hitch(this,"_setValueAttr",a),b={option:a,label:a.label||this.emptyLabel,style:a.style,onClick:b,disabled:a.disabled||!1};if(e.tooltipField)b.title=util.escape(a[e.tooltipField]);a=new f(b);
c.setWaiRole(a.focusNode,"listitem");return a}});e.selectWidget.placeAt(e.restSelect);b=e.selectWidget.get("value");if(e.value!==b&&(b||e.value))b===e.noneValue&&(b=""),e.value=b;e.onLoad();e.onChange(e.value,e.cachedValues[e.value])}}})},_updateRestUrl:function(){this.selectWidget.destroy();this.selectWidget=null;this.postCreate()},getStyle:function(){return{}},isValid:function(){return!0},onLoad:function(){},onChange:function(){},setValue:function(a){this.selectWidget.set("value",a||this.noneValue)},
_getItemAttr:function(){var a=this.cachedValues[this.selectWidget.get("value")];return void 0===a?null:a},_getDisplayedValueAttr:function(){return this.selectWidget.get("displayedValue")},destroy:function(){this.selectWidget.destroy();this.inherited(arguments)},getLabel:function(a){return a.name},getValue:function(a){return a.id}})})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(l,m,k){m.mixin(k,{hasWaiRole:function(j,e){var h=this.getWaiRole(j);
return e?-1<h.indexOf(e):0<h.length},getWaiRole:function(j){return m.trim((l.get(j,"role")||"").replace("wairole:",""))},setWaiRole:function(j,e){l.set(j,"role",e)},removeWaiRole:function(j,e){var h=l.get(j,"role");h&&(e?(h=m.trim((" "+h+" ").replace(" "+e+" "," ")),l.set(j,"role",h)):j.removeAttribute("role"))},hasWaiState:function(j,e){return j.hasAttribute?j.hasAttribute("aria-"+e):!!j.getAttribute("aria-"+e)},getWaiState:function(j,e){return j.getAttribute("aria-"+e)||""},setWaiState:function(j,
e,h){j.setAttribute("aria-"+e,h)},removeWaiState:function(j,e){j.removeAttribute("aria-"+e)}});return k})},"deploy/widgets/patterns/PatternPropertySelectionDialog":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/dom-construct,dojo/dom-class,dojo/on,dojo/aspect,js/webext/widgets/Dialog,deploy/widgets/environment/EditLandscaperBlueprintProperties".split(","),function(l,m,k,j,e,h,d,c,b,a){return j("deploy.widgets.patterns.PatternPropertySelectionDialog",
[m,l],{templateString:'<div class="versionSelector">  <div data-dojo-attach-point="textAttach">    <div data-dojo-attach-point="selectedAttach" class="inlineBlock"></div>     (<div data-dojo-attach-point="linkAttach" class="linkPointer inlineBlock"></div>)  </div>  <div data-dojo-attach-point="dialogAttach"></div></div>',postCreate:function(){var c=this;this.linkAttach.innerHTML=i18n("Set Properties");this.propertiesDialog=new b({title:i18n("Blueprint Properties"),closable:!0,draggable:!0});h.add(this.propertiesDialog.domNode,
"property-selection-dialog");this.dialogDiv=e.create("div",{},this.propertiesDialog.containerNode);var n=e.create("div",{"class":"underField",style:"margin-top: 15px;"});this.propertySelection=new a({blueprint:c.applicationProcess.blueprint,environment:c.environment,dialog:c.propertiesDialog});var j=new k({label:i18n("OK"),onClick:function(){c.propertiesDialog.hide()}});h.add(j.domNode,"idxButtonSpecial");j.placeAt(n);this.propertySelection.placeAt(this.dialogDiv);e.place(n,this.dialogDiv);d(this.linkAttach,
"click",function(){c.showDialog()})},showDialog:function(){this.propertiesDialog.show()},_getValueAttr:function(){return this.propertySelection?this.propertySelection.getData():null},validate:function(){var a=[];this.propertySelection&&(a=this.propertySelection.validate());return a},validateCloudProperties:function(a){return this.propertySelection.validateCloudProperties(a)},destroy:function(){this.propertiesDialog&&this.propertiesDialog.destroyRecursive();this.inherited(arguments)}})})},"deploy/widgets/environment/EditLandscaperBlueprintProperties":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/TextBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,js/webext/widgets/DomNode,deploy/widgets/Formatters,dojo/store/Memory,dojo/_base/lang,js/webext/widgets/select/WebextSelect".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j([m,l],{templateString:'<div class="editEnvironment">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this,f;f=this.isApplyToEnvironment()?bootstrap.restUrl+"deploy/environment/"+this.environment.id+"/apply":bootstrap.restUrl+"deploy/environment";var e=this.blueprint?!1:!0;this.form=new d({submitUrl:f,readOnly:c.readOnly,saveLabel:i18n("Apply"),showButtons:e,preSubmit:function(){c.dialog&&c.dialog.hideError()},
onSubmit:function(a){var b=c.form.postSubmit;delete c.form.postSubmit;c.validateCloudProperties(a).then(function(){c.form.postSubmit=b;c.form.submitOverXhr(a)},function(a){c.form.postSubmit=b;c.form.unblock();c.form.onError(a)})},postSubmit:function(a){void 0!==c.callback&&c.callback();navBar.setHash("environment/"+a.id+"/history",!1,!0)},addData:function(a){for(var b in c.environmentData)c.environmentData.hasOwnProperty(b)&&(a[b]=c.environmentData[b]);if(c.environment&&(a.name=c.environment.name,
c.isApplyToEnvironment()))a.externalEnvironmentId=c.environment.extEnvironment[0].externalId;a.validate=!0;a.cloudBlueprintId=c.blueprint.id;a.cloudBlueprintLocation=c.blueprint.location;a.cloudBlueprint=c.blueprint.name;a.cloudBlueprintUrl=c.blueprint.url;a.integrationProviderId=c.blueprint.integrationProviderId;a.cloudProjectId=c.cloudProjectId;a.regionId=c.regionId;delete a.blueprintId;a.parameters={};dojo.forEach(c.parameters,function(b){var c="parameter/"+b,d=a[c];d&&""!==d.trim()&&(a.parameters[b]=
d);delete a[c]});if("_no_label"===a.cloudConfiguration)a.configuration="";else if(c.configuration)a.cloudConfigurationId=c.configuration.id,a.cloudConfiguration=c.configuration.name,a.cloudConfigurationLocation=c.configuration.location},onError:function(a){var b=c.configuration?c.configuration.name:"",a=c._decodeJson(a.responseText);if(c.dialog)try{var d=JSON.parse(a);c.dialog.showError(c.form,c.blueprint.name,b,d)}catch(f){c.dialog.showError(c.form,c.blueprint.name,b,util.escape(a))}},onCancel:function(){void 0!==
c.callback&&c.callback();if(void 0!==c.onCancel)c.onCancel()}});this.form.placeAt(this.formAttach);f=new b;h.create("div",{style:"display: inline-block;","class":"iconCloud"},f.domAttach);h.create("div",{innerHTML:i18n("Cloud Provisioning"),style:{fontWeight:"bold",display:"inline-block",marginBottom:"6px"}},f.domAttach);c.form.addField({name:"",widget:f});this.form.addField({type:"Invisible",name:"_blueprintInsert"});this.form.addField({type:"Invisible",name:"_cloudProjectInsert"});this.form.addField({type:"Invisible",
name:"_regionInsert"});this.form.addField({type:"Invisible",name:"_blueprintVersionInsert"});this.form.addField({type:"Invisible",name:"_configurationInsert"});this.form.addField({type:"Invisible",name:"_configurationVersionInsert"});this.form.addField({type:"Invisible",name:"_blueprintProperties"});this.blueprint?(this.form.addField({name:"cloudBlueprint",label:i18n("Blueprint"),type:"Text",readOnly:!0,value:this.blueprint.name},"_blueprintInsert"),c.blueprintChange()):c.form.addField({name:"blueprintId",
label:i18n("Blueprint"),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+"deploy/application/"+this.application.id+"/blueprints/external",storeType:"Memory",formatDropDownLabel:a.environmentBlueprintDropDownFormatter,onChange:function(a,b){if(a&&"landscaper"===b.source)c.blueprint=b,c.blueprintChange()}},"_blueprintInsert")},blueprintChange:function(){var a=this;a.form.hasField("cloudProjectId")&&a.form.removeField("cloudProjectId");var b=new c({restUrl:bootstrap.restUrl+"integration/pattern/"+
a.blueprint.integrationProviderId+"/cloudprojects/",allowNone:!1,getLabel:function(a){return a.displayName}});a.form.addField({name:"cloudProjectId",label:i18n("Cloud Project"),widget:b,required:!0,description:i18n("Choose a cloud project to create the environment. Cloud project defines the target cloud for the environment.")},"_cloudProjectInsert");b.on("change",function(b){b?(a.cloudProjectId=b,a.clearProject(),a.refreshRegion(),a.refreshConfiguration()):(a.cloudProjectId=null,a.clearProject())});
a.form.hasField("cloudBlueprintVersion")&&a.form.removeField("cloudBlueprintVersion");b=new c({restUrl:bootstrap.restUrl+"integration/pattern/"+a.blueprint.integrationProviderId+"/blueprint/"+a.blueprint.id+"/version"});a.form.addField({name:"cloudBlueprintVersion",label:i18n("Blueprint Version"),widget:b,required:!0,description:i18n("Choose a blueprint version for the blueprint used to create the environment.")},"_blueprintVersionInsert");b.on("change",function(b){a.blueprintVersion=b?b:null;a.refreshParameters()});
a.refreshConfiguration()},clearProject:function(){this.form.hasField("regionId")&&this.form.removeField("regionId");this.form.hasField("cloudConfiguration")&&this.form.removeField("cloudConfiguration");this.form.hasField("cloudConfiguration")&&this.form.removeField("cloudConfiguration");this.form.hasField("cloudConfigurationVersion")&&this.form.removeField("cloudConfigurationVersion");this.form.hasField("propSectionLabel")&&this.form.removeField("propSectionLabel");this.removeParameters();this.configuration=
null},refreshRegion:function(){var a=this;if(a.cloudProjectId){var b=new c({restUrl:bootstrap.restUrl+"integration/pattern/"+a.blueprint.integrationProviderId+"/cloudProject/"+a.cloudProjectId+"/regions",allowNone:!1,getLabel:function(a){return a.name}});a.form.addField({name:"regionId",label:i18n("Region"),widget:b,required:!0,description:i18n("Choose a region to create the environment.")},"_regionInsert");b.on("change",function(b){a.regionId=b?b:null;a.refreshParameters()})}},refreshConfiguration:function(){var a=
this;a.cloudProjectId&&(a.form.block(),dojo.xhrGet({url:bootstrap.restUrl+"integration/pattern/"+a.blueprint.integrationProviderId+"/blueprint/"+a.blueprint.id+"/cloudproject/"+a.cloudProjectId+"/configuration",handleAs:"json",headers:a.getHeaders(),load:function(b){b=new f({data:b,idProperty:"id"});b=new r({store:b,onChange:function(b,d){a.form.block();a.form.hasField("cloudConfigurationVersion")&&a.form.removeField("cloudConfigurationVersion");if(b){a.removeParameters();a.configuration=d;var f=
new c({restUrl:bootstrap.restUrl+"integration/pattern/"+a.blueprint.integrationProviderId+"/blueprint/"+a.blueprint.id+"/configuration/"+d.id+"/version"});a.form.hasField("cloudConfigurationVersion")||a.form.addField({name:"cloudConfigurationVersion",label:i18n("Configuration Version"),widget:f,required:!0,description:i18n("Choose a configuration version for the configuration used to create the environment.")},"_configurationVersionInsert");f.on("change",function(b){a.configurationVersion=b?b:null;
a.refreshParameters()})}else a.configuration=null,a.configurationVersion=null,a.refreshParameters();a.form.unblock()}});a.form.addField({name:"cloudConfiguration",label:i18n("Configuration"),widget:b,required:!1,description:i18n("Choose a configuration for the blueprint used to create the environment.")},"_configurationInsert");a.form.unblock()},error:function(){a.form.unblock()}}))},refreshParameters:function(){this.form.hasField("propSectionLabel")||this.form.addField({name:"propSectionLabel",type:"SectionLabel",
value:i18n("Set property values for nodes to be created for this environment"),style:{fontWeight:"bold"}},"_blueprintProperties");this.form.hasField("_parameters")||this.form.addField({type:"Invisible",name:"_parameters"});this.removeParameters();this.addParameters()},removeParameters:function(){var a=this;dojo.forEach(a.parameters,function(b){b="parameter/"+b;a.form.hasField(b)&&a.form.removeField(b)});this.parameters=[];a.clearCostSection()},getHeaders:function(){var a={};a.Location=this.blueprint.location;
if(this.configuration)a.ConfigurationLocation=this.configuration.location;if(this.regionId)a.Region=this.regionId;return a},addParameters:function(){var a=this,b=a.configuration&&a.configurationVersion?"/configuration/"+a.configuration.id+"/version/"+a.configurationVersion:"";a.blueprint&&a.cloudProjectId&&a.blueprintVersion&&a.regionId&&(a.form.block(),dojo.xhrGet({url:bootstrap.restUrl+"integration/pattern/"+a.blueprint.integrationProviderId+"/blueprint/"+a.blueprint.id+"/version/"+a.blueprintVersion+
"/cloudproject/"+a.cloudProjectId+b+"/parameters",handleAs:"json",headers:a.getHeaders(),load:function(b){var c=["ucd_hostname","ucd_password","ucd_server_url","ucd_user"];dojo.forEach(b,function(b){a.creatingParameters=!0;-1===c.indexOf(b.name)&&a.createParameter(b)});a.creatingParameters=!1;a.disableCostComputation=!1;a.form.unblock();a.displayCost()}}))},createParameter:function(a){var b=this,c=b.form,d=a.value,e=a.name;b.parameters.push(a.name);var h=-1!==["image","flavor","size"].indexOf(a.propertyName),
j="parameter/"+e;b.form.hasField(j)&&b.form.removeField(j);if("SELECT"===a.type){var x=n.clone(a);x.name=e;var y=d,a=a.allowedValues||[];dojo.forEach(a,function(a){if(a.value===d||a.label===d)y=a.label});a=new f({data:a,idProperty:"value"});x.placeHolder=y;x.idProperty="value";x.searchAttr="label";x.labelAttr="label";x.store=a;x.style="width: 300px;";x.value="";x.costMetricProperty=h;x.onChange=function(){!b.creatingParameters&&this.costMetricProperty&&b.displayCost()};h=new r(x)}else x="SECURE"===
a.type||"PASSWORD"===a.type,h=new k({value:"",placeHolder:x&&d?"****":d,style:"width: 300px;",type:x?"password":"text",costMetricProperty:h,intermediateChanges:!0,timeout:null,onChange:function(){if(!b.creatingParameters&&this.costMetricProperty)this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){b.displayCost()},1E3)}});c.addField({name:j,label:e,required:!1,widget:h},"_parameters")},_decodeJson:function(a){return a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(b)})},
submitForm:function(){this.form.submitForm()},displayCost:function(){var a=this;if(!a.disableCostComputation){a.form.block();var c=a.form.getData(),c=a.form.formatData(c);if(a.form.hasField("estimatedCostLabel")){a.form.removeField("estimatedCostLabel");var d=new b,f=h.create("div",{className:"labelsAndValues-labelCell inlineBlock"});d.domNode.appendChild(f);a.form.addField({name:"estimatedCostLabel",label:"",required:!1,widget:d},"_estimateCostInsert")}dojo.xhrPut({url:bootstrap.restUrl+"integration/pattern/"+
a.blueprint.integrationProviderId+"/blueprint/"+a.blueprint.id+"/cost",handleAs:"json",putData:c,headers:a.getHeaders(),sync:!1,load:function(b){if("UNKNOWN_COST_CENTER"===b.costStatus)a.disableCostComputation=!0,a.clearCostSection();else{var c=null,d=null,f=null;"ERROR"===b.costStatus?(c=i18n("Error estimating cost."),d=b.statusMessage,f="errorIcon inlineBlock"):(c=i18n("$ %s per hour",b.cost.toFixed(2)),"MISSING_DATA"===b.costStatus&&(d=i18n("The estimate is approximate because some cost data are missing."),
f="warningIcon inlineBlock"));a.createCostLabel(c,d,f)}a.form.unblock()},error:function(){a.form.unblock()}})}},clearCostSection:function(){this.form.hasField("estimatedCostSectionLabel")&&this.form.removeField("estimatedCostSectionLabel");this.form.hasField("estimatedCostLabel")&&this.form.removeField("estimatedCostLabel")},createCostLabel:function(a,c,d){this.form.hasField("estimatedCostSectionLabel")||this.form.addField({name:"estimatedCostSectionLabel",type:"SectionLabel",value:i18n("Estimated cost"),
style:{fontWeight:"bold"}},"_estimateCostInsert");this.form.hasField("estimatedCostLabel")&&this.form.removeField("estimatedCostLabel");var f=new b,a=h.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:a,style:{fontWeight:"normal"}});f.domNode.appendChild(a);c&&(c=h.create("div",{className:d,title:c}),f.domNode.appendChild(c));this.form.addField({name:"estimatedCostLabel",label:"",required:!1,widget:f},"_estimateCostInsert")},getData:function(){return this.form.getData()},
validate:function(){return this.form.validateRequired()},validateCloudProperties:function(a){a=this.form.formatData(a);return dojo.xhrPut({url:bootstrap.restUrl+"integration/pattern/"+this.blueprint.integrationProviderId+"/blueprint/"+this.blueprint.id+"/validate",handleAs:"json",putData:a,headers:this.getHeaders(),sync:!1})},isApplyToEnvironment:function(){return this.environment&&this.environment.extEnvironment&&0<this.environment.extEnvironment.length}})})},"deploy/widgets/Formatters":function(){define("dojo/_base/array,dojo/_base/xhr,dojo/Deferred,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/mouse,dojo/on,dijit/form/Button,dijit/Tooltip,dijit/TooltipDialog,dijit/popup,deploy/widgets/tag/TagDisplay,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return{applicationLinkFormatter:function(a){var b="";if(a)a.deleted?b=i18n("%s (Deleted)",a.name):!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#application/"+a.id):b=a.name;return b},applicationTemplateLinkFormatter:function(a){var b="";if(a)!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#applicationTemplate/"+a.id+"/-1"):b=a.name.escape();return b},environmentLinkFormatter:function(a){var b=
"";if(a)!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#environment/"+a.id):b=a.name.escape();return b},environmentBlueprintDropDownFormatter:function(a,b){"landscaper"===b.source&&j.create("div",{"class":"inlineBlock general-icon cloud-icon dark-cloud-icon"},a,"first")},applicationProcessDropDownFormatter:function(a,b){"patternApplicationProcess"===b.metadataType&&j.create("div",{"class":"inlineBlock general-icon cloud-icon dark-cloud-icon"},a,"first")},
applicationProcessLinkFormatter:function(a){var b=j.create("div"),c=j.create("a",{},b);if(a)if(c.innerHTML=a.name.escape(),"patternApplicationProcess"===a.metadataType){if(a.blueprint)c.href=a.blueprint.url;j.create("div",{"class":"inlineBlock general-icon cloud-icon dark-cloud-icon"},c,"first")}else if(c.className="actionsLink",c.href="#applicationProcess/"+a.id+"/"+(a.version||"-1"),a.applicationTemplate)c=j.create("span"),c.innerHTML="("+a.applicationTemplate.name.escape()+")",b.appendChild(c);
return b},applicationTemplateProcessLinkFormatter:function(a){var b=j.create("div"),c=j.create("a",{},b);c.innerHTML=a.name.escape();c.className="actionsLink";c.href="#applicationProcess/"+a.id+"/"+(a.version||"-1");return b},genericProcessLinkFormatter:function(a){var b="";if(a)!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#process/"+a.id+"/"+(a.version||"-1")):b=a.name.escape();return b},snapshotLinkFormatter:function(a){var b=j.create("div");a&&
(j.create("a",{innerHTML:a.name.escape(),"class":"actionsLink",href:"#snapshot/"+a.id},b),(a.versionsLocked||a.configLocked)&&j.create("span",{innerHTML:i18n("(Locked)")},b));return b},componentLinkFormatter:function(a){var b="";if(a)a.deleted?(b=document.createElement("div"),b.innerHTML=i18n("%s (Deleted)",a.name.escape())):!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#component/"+a.id):(b=document.createElement("div"),b.innerHTML=a.name.escape());
return b},componentTemplateLinkFormatter:function(a){var b="";if(a)!a.security||a.security.read?(b=document.createElement("a"),b.innerHTML=a.name.escape(),b.href="#componentTemplate/"+a.id+"/"+a.version):b=a.name.escape();return b},componentProcessLinkFormatter:function(a){var b=document.createElement("div");if(a){var c=document.createElement("a");c.className="actionsLink";c.innerHTML=a.name.escape();c.href="#componentProcess/"+a.id+"/"+(a.version||"-1");b.appendChild(c);if(a.componentTemplate)c=
document.createElement("span"),c.innerHTML="("+a.componentTemplate.name.escape()+")",b.appendChild(c)}return b},componentTemplateProcessLinkFormatter:function(a){var b=document.createElement("a");if(a)b.innerHTML=a.name.escape(),b.href="#componentProcess/"+a.id+"/"+(a.version||"-1");return b},versionLinkFormatter:function(a,b){var d=document.createElement("div");if(a){if(!a.component||!a.component.security||a.component.security.read){var f=j.create("a",{innerHTML:a.name.escape(),href:"#version/"+
a.id,className:"linkPointer"},d);b&&c(f,"click",function(a){b(a)})}else j.create("span",{innerHTML:name},d);a.archived&&j.create("span",{innerHTML:i18n(" (archived)"),"class":"actionsLink"},d)}return d},versionPopupFormatter:function(a,b,c){var d=this,f=j.create("div",{className:"inventory-popup-contents"}),e=b?6:5;l.forEach(a,function(a,c){if(!b&&c<e){var o=d.versionLinkFormatter(a.version||a);h.set(o,"display","block");f.appendChild(o)}else b=!1});c&&(a=j.create("a",{innerHTML:5<a.length?i18n("%s More...",
a.length-5):i18n("View All"),className:"linkPointer",style:"display: block;"},f),c(a));return f},moreVersionsLinkFormatter:function(a,b){return j.create("a",{innerHTML:i18n("(+ %s more)",a),title:i18n("Click to view all"),className:"linkPointer",style:"margin-left: 5px;"},b)},versionTypeFormatter:function(a){var b=j.create("div");if(a.type){a=a.type;switch(a){case "FULL":a=i18n("Full");break;case "INCREMENTAL":a=i18n("Incremental")}j.create("span",{innerHTML:a},b)}return b},inventoryGridColumnsFormatter:function(a,
b,d,f){var h=this,n=[];a&&(n=[{name:i18n("Component"),orderField:"component",filterField:"component",filterType:"text",getRawValue:function(a){return a.component.name},formatter:function(a){return h.componentLinkFormatter(a.component)}}]);n=n.concat([{name:i18n("Version"),orderField:"version",filterField:"version",filterType:"text",getRawValue:function(a){return a.version.name},formatter:function(c,d,f){var d=j.create("div"),n=h.versionLinkFormatter(c.version,b);d.appendChild(n);a&&(e.add(n,"inlineBlock"),
a(c,c.additionalVersions,d,f));return d}},{name:i18n("Date Deployed"),orderField:"date",filterField:"date",filterType:"date",getRawValue:function(a){return a.date},formatter:function(a){return util.dateFormatShort(a.date)}}]);d&&(n=n.concat([{name:i18n("Type"),formatter:function(a){return h.versionTypeFormatter(a.version)}}]));f&&(n=n.concat([{name:i18n("Snapshot"),orderField:"snapshot",filterField:"snapshot",filterType:"text",getRawValue:function(a){var b="";if(a.snapshot)b=a.snapshot.name;return b},
formatter:function(a){return h.snapshotLinkFormatter(a.snapshot)}},{name:i18n("Properties"),formatter:function(a){var d=document.createElement("a");if(void 0!==a.propVersion)d.innerHTML=i18n("Version %s",a.propVersion),d.href="#environmentPropSheet/"+a.environment.id+"/"+a.component.id+"/"+a.propVersion,b&&c(d,"click",function(){b()});return d}},{name:i18n("Status"),orderField:"status",filterField:"status",filterType:"text",getRawValue:function(a){return a.status.name},formatter:function(a,b,c){return h.statusFormatter(a.status,
b,c)}}]));return n=n.concat([{name:i18n("Compliancy"),field:"status",formatter:function(a,b,c){var f=a.compliancy.desiredCount,o=a.compliancy.correctCount;(a=a.additionalVersions)&&!d&&l.forEach(a,function(a){if(a.compliancy)a=a.compliancy,f+=a.desiredCount,o+=a.correctCount});a="";f===o?(a=i18n("Compliant (%s/%s)",""+o,""+f),e.add(c,"success-state-color")):(a=i18n("Noncompliant (%s/%s)",""+o,""+f),e.add(c,"failed-state-color"));c.style.textAlign="center";if(!d){var c=j.create("div",{className:"inlineBlock environment-compliancy"}),
b=100*(o/f),h=100-b;j.create("div",{className:"successMeter success-state-color",style:{width:b+"%"}},c);j.create("div",{className:"failMeter failed-state-color",style:{width:h+"%"}},c);j.create("span",{innerHTML:a},c);a=c}return a}},{name:i18n("Actions"),formatter:function(a){var d="";if(a.deploymentRequestId)d=document.createElement("a"),d.innerHTML=i18n("View Request"),d.href="#deploymentRequest/"+a.deploymentRequestId,b&&c(d,"click",function(){b()});return d}}])},resourceLinkFormatter:function(a){var b=
document.createElement("div");if(a){j.place(this.getResourceIcon(a),b);var c=a.security&&!a.security.read;a.role&&"Agent Placeholder"===a.role.name&&(c=!0);var d=this.resourceNameFormatter(a);c?b.appendChild(d):(c=document.createElement("a"),c.appendChild(d),c.href="#resource/"+a.id,b.appendChild(c))}d=!1;a.role&&a.role.specialType&&"COMPONENT"===a.role.specialType&&(d=!0);(a.agent||a.agentPool||a.prototype||d)&&j.place(this.resourceParentFormatter(a),b);return b},resourceNonLinkFormatter:function(b,
f){var e=document.createElement("div");b&&(j.place(this.getResourceIcon(b),e),j.place(this.resourceNameFormatter(b),e),f&&b.description&&(c(e,d.enter,function(){a.show(util.escape(b.description),this)}),c(e,d.leave,function(){a.hide(this)})));return e},resourceNameFormatter:function(a){return a.componentTag?(new r({readOnly:!0,tags:[a.componentTag],style:{marginLeft:"-15px"}})).domNode:j.create("span",{innerHTML:a.name.escape()})},tagNameFormatter:function(a){return(new r({readOnly:!0,tags:[a],style:{marginLeft:"-15px"}})).domNode},
resourcePathFormatter:function(a){var b=document.createElement("div");if(a){var c=a.security&&!a.security.read;a.role&&"Agent Placeholder"===a.role.name&&(c=!0);c?j.create("span",{innerHTML:a.path.replace(/\//g," / ").escape()},b):(c=document.createElement("a"),c.innerHTML=a.path.replace(/\//g," / ").escape(),c.href="#resource/"+a.id,b.appendChild(c))}(a.agent||a.agentPool||a.prototype)&&j.place(this.resourceParentFormatter(a),b);return b},resourceLinkFormatterWithPath:function(a){var b=document.createElement("div");
if(a){j.place(this.getResourceIcon(a),b);if(!a.security||a.security.read){var c=document.createElement("a");c.innerHTML=a.name.escape();c.href="#resource/"+a.id;b.appendChild(c);l.forEach(a.roles,function(a){var c=document.createElement("div");c.innerHTML=a.name.escape();c.style.backgroundColor=a.color;c.className="roleLabel";b.appendChild(c)})}else j.create("span",{innerHTML:a.name.escape()},b);if(a.parent){c=this.resourceLinkFormatterWithPath(a.parent);e.add(c,"inlineBlock");var d=j.create("span",
{innerHTML:"&nbsp;/&nbsp;"});j.place(d,b,"first");j.place(c,b,"first")}}(a.agent||a.agentPool||a.prototype)&&j.place(this.resourceParentFormatter(a),b);return b},resourceInventoryFormatter:function(a,h,r){var k=this,l=j.create("div"),x=a.versions||a.version,y=function(b,c,d){var f=!a.component||!a.component.security||a.component.security.read,f=f&&r,e=b.name.escape();b.archived&&(e+=i18n(" %s (archived)",b.name.escape()));j.create(f?"a":"div",{innerHTML:e,className:f?"linkPointer":"",href:f?"#version/"+
b.id:void 0,style:"display: "+(d?"inline-block;":"block;")},c)};if(x&&Array.isArray(x)){var m=x[0];m&&y(m,l,!0);if(1<x.length){var y=function(d){c(d,"click",function(){var c=new t({title:i18n("Inventory for %s",a.name),closable:!0,draggable:!0}),d=[{name:i18n("Component"),formatter:function(a){var b="";a.component&&(b=k.componentLinkFormatter(a.component));return b}},{name:i18n("Version"),formatter:function(a){return k.versionLinkFormatter(a,function(){c.hide()})}},{name:i18n("Date Created"),formatter:function(a){return util.tableDateFormatter(null,
a.created)}},{name:i18n("Type"),formatter:function(a){return k.versionTypeFormatter(a)}}];(new q({getData:function(){return a.versions||a.version},serverSideProcessing:!1,hideExpandCollapse:!0,hideFooterLinks:!0,columns:d})).placeAt(c.containerNode);d=(new b({label:i18n("Close"),onClick:function(){c.hide()}})).placeAt(c.containerNode,"last");e.add(d.domNode,"underField");c.show()})},B=k.moreVersionsLinkFormatter(x.length-1,l);y(B);var A=!1,z=new f({content:k.versionPopupFormatter(x,!0,r?y:null),onMouseLeave:function(){n.close(z);
A=!1},className:"inventory-popup"});y(z.connectorNode);c(B,d.enter,function(){n.open({popup:z,around:B})});var E=function(){n.close(z)};c(B,"click",E);c(z.domNode,"click",E);c(z.connectorNode,"click",E);c(z.domNode,d.enter,function(){A=!0});c(h,d.leave,function(){setTimeout(function(){A||(E(),A=!1)},100)})}}return l},getResourceNameRawValue:function(a){var b;b=function(a){var c=a.name;a.parent&&(c=b(a.parent)+"/"+c);return c};return b(a)},resourceParentFormatter:function(a){var b=j.create("div",{"class":"inlineBlock"}),
c=a.role&&a.role.specialType&&"COMPONENT"===a.role.specialType,d=a.agentPool&&(!a.agentPool.security||a.agentPool.security.read),f=a.prototype;a.agent&&(!a.agent.security||a.agent.security.read)?j.create("a",{href:"#agent/"+a.agent.id,innerHTML:"&nbsp;&nbsp;"+i18n("(View Agent)")},b):d?j.create("a",{href:"#agentPool/"+a.agentPool.id,innerHTML:"&nbsp;&nbsp;"+i18n("(View Agent Pool)")},b):f?j.create("span",{innerHTML:"&nbsp;&nbsp;"+i18n("(Prototype)")},b):c&&this.canGetComponent(a.role.id).then(function(c){c&&
j.create("a",{href:"#componentResourceRole/"+a.role.id,innerHTML:"&nbsp;&nbsp;"+i18n("(View Component)")},b)});return b},canGetComponent:function(a){var b=new k;this.getComponentIdFromResourceRoleId(a).then(function(a){a?m.get({url:bootstrap.restUrl+"deploy/component/"+a.componentId,handleAs:"json",load:function(){b.resolve(!0)},error:function(){b.resolve(!1)}}):b.resolve(!1)});return b},getComponentIdFromResourceRoleId:function(a){var b=new k;m.get({url:bootstrap.restUrl+"resource/resourceRole/component/"+
a,handleAs:"json",load:function(a){b.resolve(a)},error:function(){b.resolve(!1)}});return b},getResourceIcon:function(a){a=a.agent?"glyph-Glyph_database__ui-05":a.agentPool?"glyph-Glyph_database__ui-05":a.componentTag?"glyph-Glyph_component__ui-05":a.role?"COMPONENT"===a.role.specialType?"glyph-Glyph_component__ui-05":"DYNAMIC_GROUP"===a.role.specialType?"glyph-Glyph_folder__ui-05":"AGENT_PLACEHOLDER"===a.role.specialType?"glyph-Glyph_database__ui-05":-1<a.role.name.indexOf("WebSphere")?"websphere-icon":
-1<a.role.name.indexOf("zOSMFService")?"zosmfservice-icon":-1<a.role.name.indexOf("zOSMFSoftwareInstance")?"zosmfsoftwareinstance-icon":"glyph-Glyph_folder__ui-05":"glyph-Glyph_folder__ui-05";a=this.createIcon(a);e.add(a,"inline-table-icon");return a},createIcon:function(a,b,c){var d="inlineBlock general-icon "+a;c&&(d="inlineBlock "+c+" "+a);return j.create("div",{"class":d,title:b||""})},resourceStatusFormatter:function(a,b,c){var d=document.createElement("div");d.style.textAlign="center";a.status&&
("agent"===a.type||"agentPool"===a.type)?d=formatters.agentStatusFormatter(a,b,c):e.add(c,"statusNotApplicable");return d},agentStatusFormatter:function(a,b,c){b=document.createElement("div");b.style.textAlign="center";"ONLINE"===a.status?(b.innerHTML=i18n("Online"),e.add(c,"connected-state-color")):"CONNECTING"===a.status?(b.innerHTML=i18n("Connecting"),e.add(c,"running-state-color")):"UPGRADE_REQUIRED"===a.status?(b.innerHTML=i18n("Upgrade Required"),e.add(c,"warning-state-color")):"UPGRADE_RECOMMND"===
a.status?(b.innerHTML=i18n("Upgrade Recommended"),e.add(c,"running-state-color")):"OFFLINE"===a.status?(b.innerHTML=i18n("Offline"),e.add(c,"disconnected-state-color")):"ERROR"===a.status?(b.innerHTML=i18n("Error"),e.add(c,"disconnected-state-color")):"INSTALLABLE"===a.status?(b.innerHTML=i18n("Installable"),e.add(c,"installable-state-color")):(b.innerHTML=i18n("N/A"),e.add(c,"gray-state-color"));return b},agentLinkFormatter:function(a){var b=document.createElement("div");if(a){var c=document.createElement("a");
c.innerHTML=a.name.escape();c.href="#agent/"+a.id;b.appendChild(c)}return b},relayLinkFormatter:function(a){var b=document.createElement("div");if(a){var c=document.createElement("a");c.innerHTML=a.name.escape();c.href="#relay/"+a.id;b.appendChild(c)}return b},agentPoolLinkFormatter:function(a){var b=document.createElement("div");if(a){var c=document.createElement("a");c.innerHTML=a.name.escape();c.href="#agentPool/"+a.id;b.appendChild(c)}return b},resourceRoleFormatter:function(a,b,c){b=i18n("All");
c.style.textAlign="center";if(a)b=a.name.escape(),c.style.backgroundColor=a.color;return b},resourceRoleLinkFormatter:function(a,b,c){c.style.backgroundColor=a.color;b=document.createElement("a");if(a)b.innerHTML=a.name.escape(),b.href="#resourceRole/"+a.id;return b},resourceTemplateLinkFormatter:function(a){var b=j.create("div");a&&j.create("a",{innerHTML:a.name.escape(),href:"#resourceTemplate/"+a.id},b);return b},processLinkFormatter:function(a){var b=document.createElement("div");if(a){var c=
document.createElement("a");c.innerHTML=a.name.escape();c.href="#process/"+a.id+"/"+a.version;b.appendChild(c)}return b},requestStatusFormatter:function(a,b,c){var d=i18n("Unknown");c.style.textAlign="center";a.failed?(e.add(c,"failed-state-color"),d=i18n("Failed")):a.rootTrace||a.state?d=this.activityStatusFormatter(a.rootTrace||a,b,c):!a.traceId&&"FAULTED"===a.result?(e.add(c,"failed-state-color"),d=i18n("Could Not Start")):a.approval?d=this.approvalStatusFormatter(a.approval,b,c):a.status?d=this.applicationProcessStatusFormatter(a.status,
b,c):a.entry&&!a.entry.fired?(e.add(c,"gray-state-color"),d=i18n("Scheduled")):a.entry&&a.entry.fired&&(e.add(c,"failed-state-color"),d=i18n("Cancelled"));return d},applicationProcessStatusFormatter:function(a,b,c){b=i18n("Unknown");c.style.textAlign="center";"FAILURE"===a?(b=i18n("Failed"),e.add(c,"failed-state-color")):"RUNNING"===a?(b=i18n("Executing"),e.add(c,"running-state-color")):"SUCCESS"===a?(b=i18n("Success"),e.add(c,"success-state-color")):"SCHEDULED"===a?(b=i18n("Scheduled"),e.add(c,"gray-state-color")):
"CANCELLED"===a?(b=i18n("Cancelled"),e.add(c,"grey-state-color")):"AWAITING_APPROVAL"===a?(b=i18n("Awaiting Approval"),e.add(c,"grey-state-color")):"APPROVAL_REJECTED"===a&&(b=i18n("Approval Rejected"),e.add(c,"failed-state-color"));return b},sourceConfigStatusFormatter:function(a,b,c){b=i18n("Unknown");c.style.textAlign="center";"FAILURE"===a.status?(b=i18n("Failed"),e.add(c,"failed-state-color")):"EXECUTING"===a.status?(b=i18n("Executing"),e.add(c,"running-state-color")):"SUCCESS"===a.status?(b=
i18n("Success"),e.add(c,"success-state-color")):"WAITING"===a.status?(b=i18n("Waiting"),e.add(c,"running-state-color")):"CANCELLED"===a.status&&(b=i18n("Cancelled"),e.add(c,"grey-state-color"));return b},activityStatusFormatter:function(a,b,c){var b=a.state,d=a.result,f="",h=util.getNamedProperty(a.properties,"_SYS_FAILURE_CAUGHT");void 0!==h&&"true"===h.value&&(d="FAULTED");c.style.textAlign="center";if("CLOSED"===b&&"SUCCEEDED"===d)a.metadata&&a.metadata.notNeeded?(e.add(c,"gray-state-color"),f=
i18n("Not Needed")):(e.add(c,"success-state-color"),f=i18n("Success"));else if("CLOSED"===b&&"CANCELED"===d)e.add(c,"gray-state-color"),f=i18n("Canceled");else if("EXECUTING"===b)a.paused?(e.add(c,"gray-state-color"),f=i18n("Paused")):(e.add(c,"running-state-color"),f=i18n("Running"));else if("CLOSED"===b&&"FAULTED"===d||"FAULTING"===b)e.add(c,"failed-state-color"),f=i18n("Failed");return f},approvalStatusFormatter:function(a,b,c){b="";c.style.textAlign="center";a.failed?(b=i18n("Approval Failed"),
e.add(c,"failed-state-color")):a.finished?(b=i18n("Approved"),e.add(c,"success-state-color")):a.cancelled?(b=i18n("Approval Cancelled"),e.add(c,"gray-state-color")):(b=i18n("Approval In Progress"),e.add(c,"running-state-color"));return b},statusFormatter:function(a,b,c){b="";if(a)b=formatters.statusTranslator(a.name),c.style.backgroundColor=a.color,c.style.textAlign="center",c.style.color=util.isDarkColor(a.color)?"#FFF":"#000";return b},conditionFormatter:function(a){var b="";if(a&&(b={backgroundColor:a.color},
e.add(a,"statusBox"),util.isDarkColor(a.color)))b.color="#FFF";return b},conditionAttachBoxFormatter:function(a){var b="";if(a&&(b={backgroundColor:a.color},util.isDarkColor(a.color)))b.color="#FFF";return b},conditionXButtonFormatter:function(a,b){var c="";b&&a&&(c=j.create("div",{"class":"linkPointer environmentStatusButton"},a));return c},statusTranslator:function(a){return"Active"===a?i18n("Active"):a},artifactFormatter:function(a){var b=document.createElement("div",{"class":"inlineBlock"});a&&
j.place(this.getArtifactIcon(a),b);j.create("span",{innerHTML:a.name.escape()},b);return b},booleanTranslator:function(a){var b=null;return b=a?i18n("true"):i18n("false")},zosArtifactFormatter:function(a,b){var c=document.createElement("div",{"class":"inlineBlock"});if(a.userAttributes&&a.userAttributes.zOSResourceInputsKey&&a.userAttributes.zOSResourceInputsKey.url){var d=a.userAttributes.zOSResourceInputsKey.url;0!==d.trim().toUpperCase().indexOf("HTTP")&&b&&(d=b+d);j.create("a",{"class":"linkPointer",
href:d,target:"_blank",innerHTML:a.name.escape()},c);return c}a&&j.place(this.getNoIcon(a),c);j.create("span",{innerHTML:a.name.escape()},c);return c},getNoIcon:function(){var a=this.createIcon("dijitIcon dijitTreeIcon dijitLeaf");return a=j.create("span")},getArtifactIcon:function(a){return a="file"===a.type?"artifactIcon dijitIcon dijitTreeIcon dijitLeaf":"folderIcon",this.createIcon(a)}}})},"dijit/TooltipDialog":function(){define("dojo/_base/declare,dojo/dom-class,dojo/_base/event,dojo/keys,dojo/_base/lang,./focus,./layout/ContentPane,./_DialogMixin,./form/_FormMixin,./_TemplatedMixin,dojo/text!./templates/TooltipDialog.html,./main".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return l("dijit.TooltipDialog",[d,a,b,c],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:f,_setTitleAttr:function(a){this.containerNode.title=a;this._set("title",a)},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey")},orient:function(a,b,c){a={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow",
"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];m.replace(this.domNode,a,this._currentOrientClass||"");this._currentOrientClass=a},focus:function(){this._getFocusItems(this.containerNode);h.focus(this._firstFocusItem)},onOpen:function(a){this.orient(this.domNode,a.aroundCorner,a.corner);var b=
a.aroundNodePos;if("M"==a.corner.charAt(0)&&"M"==a.aroundCorner.charAt(0))this.connectorNode.style.top=b.y+(b.h-this.connectorNode.offsetHeight>>1)-a.y+"px",this.connectorNode.style.left="";else if("M"==a.corner.charAt(1)&&"M"==a.aroundCorner.charAt(1))this.connectorNode.style.left=b.x+(b.w-this.connectorNode.offsetWidth>>1)-a.x+"px";this._onShow()},onClose:function(){this.onHide()},_onKey:function(a){var b=a.target;a.charOrCode===j.TAB&&this._getFocusItems(this.containerNode);var c=this._firstFocusItem==
this._lastFocusItem;a.charOrCode==j.ESCAPE?(this.defer("onCancel"),k.stop(a)):b==this._firstFocusItem&&a.shiftKey&&a.charOrCode===j.TAB?(c||h.focus(this._lastFocusItem),k.stop(a)):b==this._lastFocusItem&&a.charOrCode===j.TAB&&!a.shiftKey?(c||h.focus(this._firstFocusItem),k.stop(a)):a.charOrCode===j.TAB&&a.stopPropagation()}})})},"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\n\t<div class="dijitTooltipContainer" role="presentation">\n\t\t<div class="dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point="containerNode"></div>\n\t</div>\n\t<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n',
"deploy/widgets/tag/TagDisplay":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/on,dojo/json,dojo/mouse,dojo/_base/declare,dojo/_base/Color,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/dom-style,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return d([m,l],{templateString:'<div class="tagDisplay"><div class="tagContainer" data-dojo-attach-point="tagAttach"></div></div>',postCreate:function(){this.inherited(arguments);
var b=this;dojo.forEach(b.tags,function(c){var d=b._isDark(c.color),e=a.create("div",{className:"inlineBlock tagBox",style:{backgroundColor:c.color},title:c.description||""});d&&f.add(e,"darkColor");d=a.create("div",{innerHTML:c.name.escape()});f.add(d,"tagName");a.place(d,e);d=b._checkDisabled(c);if(!b.readOnly&&!d){var n=a.create("div",{className:"inlineBlock tagDelete",title:i18n("Delete"),innerHTML:"x"});j(n,"click",function(){b.confirmDelete(c,e)});j(n,h.enter,function(){f.add(n,"tagSelector")});
j(n,h.leave,function(){f.remove(n,"tagSelector")});a.place(n,e)}a.place(e,b.tagAttach)})},confirmDelete:function(c,d){var f=this;new t({message:i18n("Are you sure you want to remove %s?",c.name),action:function(){b.del({url:bootstrap.restUrl+"tag/"+f.objectType+"/"+c.id,sync:!0,putData:e.stringify({ids:[f.itemId]}),handleAs:"json",headers:{"Content-Type":"application/json"},load:function(){a.destroy(d)},error:function(a){new r({message:util.escape(a.responseText)})}});f.callback&&f.callback()}})},
_checkDisabled:function(a){var b=-1;this.disabledTags&&(b=k.indexOf(this.disabledTags.map(function(a){return a.id}),a.id));return-1!==b},_isDark:function(a){a=(new c(a)).toRgb();return 0.5<1-(0.25*a[0]+0.6*a[1]+0.1*a[2])/255},getTint:function(a){var a=(new c(a)).toRgb(),b=[];k.forEach(a,function(a){b.push(1.6*a)});return c.fromArray(b).toHex()},getShade:function(a){var a=(new c(a)).toRgb(),b=[];k.forEach(a,function(a){b.push(0.6*a)});return c.fromArray(b).toHex()}})})},"deploy/widgets/calendar/CalendarBase":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/TextBox,dijit/form/DateTextBox,dijit/form/TimeTextBox,dijit/form/Select,dijit/Calendar,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/cldr/supplemental,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,dojo/mouse,dojo/date/locale,dojox/calendar/Calendar,dojo/store/JsonRest,dojo/store/Memory,dojo/store/Observable,dojo/date/stamp,js/util/blocker/_BlockerMixin,js/webext/widgets/select/WebextSelect,js/webext/widgets/select/WebextMultiSelect,js/webext/widgets/BidiDateUtil".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E){return a("deploy.widgets.calendar.CalendarBase",[m,l,B],{templateString:'<div class="calendar"><div class="calendar-sidebar"><div class="calendar-sidebar-tabs" data-dojo-attach-point="calendarSidebarTabsAttachPoint"></div><div data-dojo-attach-point="calendarSidebarAttachPoint"></div><div data-dojo-attach-point="calendarSidebarPanel" class="calendar-sidebar-panel"><div data-dojo-attach-point="calendarSidebarCreateButtonAttachPoint"></div><div data-dojo-attach-point="calendarSidebarPanelAttachPoint"></div></div><div class="calendar-sidebar-panel calendar-sidebar-panel-filters hidden" data-dojo-attach-point="calendarSidebarFilterAttachPoint"></div></div><div class="calendar-contents"><div data-dojo-attach-point="calendarAttachPoint"></div></div></div>',
height:640,labelHeight:14,itemStartAttr:"startDate",itemEndAttr:"endDate",itemNameAttr:"name",initialView:"month",startHours:0,endHours:24,hourSize:40,showCreateRequest:!0,serviceUrlPattern:null,serviceUrlPatterns:{startTime:"{startTime}",endTime:"{endTime}"},postCreate:function(){this.inherited(arguments);this.now=E.getNewDate();this.months=E.getLocale().getNames("months","wide","standAlone","",E.getNewDate());var a=n.getFirstDayOfWeek();0===a?r.add(this.calendarAttachPoint,"sunday-first-day-of-week"):
1===a&&r.add(this.calendarAttachPoint,"monday-first-day-of-week");this._createCalendar()},_createCalendar:function(a){var b=this;a?(this.calendar=(new w({datePackage:E.getDatePackage(),date:E.getNewDate(),startTimeAttr:b.itemStartAttr,endTimeAttr:b.itemEndAttr,summaryAttr:b.itemNameAttr,store:new y(new x({data:a})),cssClassFunc:function(a){return b.itemClassName(a)},columnViewProps:{minHours:b.startHours,maxHours:b.endHours,hourSize:b.hourSize},onCurrentViewChange:function(a){b._highlightCurrentTime(a);
b.onChangeCalendarView(a)},dateInterval:b.initialView,isItemMoveEnabled:function(a){return b.canMoveItem(a)},isItemResizeEnabled:function(a){return b.canResizeItem(a)},onRenderersLayoutDone:function(a){b._onItemCreate(a,this.store)},onItemRollOver:function(a){b._onItemHover(a,a.source.itemToRenderer[a.item.id])},onItemRollOut:function(a){b._onItemHover(a,a.source.itemToRenderer[a.item.id],!0)},onItemClick:function(a){b.updateSidebar(a);b._onItemClick(a,a.source.itemToRenderer[a.item.id])},style:"position:relative; height:"+
b.height+"px;"})).placeAt(this.calendarAttachPoint),this._addCalendarTitle(),this._addCalendarToolbarHighlight(),this._addCalendarEditConditions(),this._addEntryOnClick(),this._createSidebar(),this.calendar.matrixView.labelRendererHeight=this.labelHeight,this.calendar.matrixView.roundToDay=this.roundToDay||!1,this.calendar.columnView.scrollMethod="dom"):this.loadData()},_onItemCreate:function(a,c){var d=this;b.forEach(a.rendererList,function(a){var b=c.get(a.renderer.item.id);d.onItemCreate(b,a)})},
onItemCreate:function(){},_onItemHover:function(a,c,d){var f=this;b.forEach(c,function(b){f.onItemHover(a,b,d)})},onItemHover:function(){},_onItemClick:function(a,c){var d=this;b.forEach(c,function(b){d.onItemClick(a,b)});this.lastItemClicked={item:a,renderList:c}},onItemClick:function(){},onGridClick:function(){},_highlightCurrentTime:function(a){var b=this;if(a.newView.secondarySheet){if(!this.currentTimeBar)this.currentTimeBar=t.create("div",{className:"current-time-bar"},a.newView.grid,"first");
var c=function(){var a=new Date,c=a.getHours(),d=a.getMinutes(),a=a.getSeconds(),f=60/b.hourSize;q.set(b.currentTimeBar,"top",c*b.hourSize+d/f+a/(60*f)-1+"px")};c();setInterval(function(){c()},1E4)}},onChangeCalendarView:function(){},itemClassName:function(){return"entry"},canMoveItem:function(){return!0},canResizeItem:function(){return!0},refreshCalendar:function(a,b){this.loadData(a,b)},refresh:function(){this.loadData(this.calendar?new Date(this.calendar.date):null)},loadData:function(a,b){var c=
this,d;d=c.calendar?"month"===c.calendar.dateInterval:"month"===c.initialView;this.block();f.get({url:c.getCalendarUrl(a,b),handleAs:"json",load:function(a){c.unblock();c.addItemsToCalendar(c.formatData(a,d))}})},getCalendarUrl:function(a,b){var D;var c=this.serviceUrlPattern,d,f=null;a&&b?(d=new Date(a),f=new Date(b)):a?(d=new Date(a.getFullYear(),a.getMonth()),f=util.shiftMonths(d,1)):(d=new Date,D=f=new Date(d.getFullYear(),d.getMonth()),d=D,f=util.shiftMonths(f,1));d=util.getStartOfWeek(d);f=
util.getEndOfWeek(f);c=c.replace(this.serviceUrlPatterns.startTime,d.valueOf());return c=c.replace(this.serviceUrlPatterns.endTime,f.valueOf())},formatData:function(a){return this.formatAndFilterItems(a,"entry")},formatAndFilterItems:function(a,c,d){var f=this,e=[];b.forEach(a,function(a){a=f.formatItem(a,c,d);(!f.applyFilters||f.filterCalendar(a))&&e.push(a)});return e},formatItem:function(a){return a},addItemsToCalendar:function(a){this.calendar?this.calendar.set("store",new x({data:a})):this._createCalendar(a)},
_addCalendarTitle:function(){this.calendar.calendarTitle=t.create("div",{innerHTML:this.months[this.calendar.date.getMonth()],className:"calendar-title"});t.place(this.calendar.calendarTitle,this.calendar.buttonContainer,"first")},_addCalendarToolbarHighlight:function(){var a=this.calendar,c=a.monthButton,d=function(){r.add(c.domNode,"current-calendar-view")};d();var f=[a.todayButton,a.dayButton,a.fourDaysButton,a.weekButton,a.monthButton];b.forEach(f,function(b){o(b,"click",function(){r.remove(c.domNode,
"current-calendar-view");c=b===a.todayButton?f[1]:b;d()})})},_addCalendarEditConditions:function(){var a=this,b,c;this.calendar.on("itemEditBegin",function(a){b=a.item.startTime;c=a.item.endTime});this.calendar.on("itemEditEnd",function(d){a.itemEndEdit(d,b,c)})},itemEndEdit:function(a,b,c){this.updateSidebar(a);a.item.originalDate=b;a.item.originalEndDate=c;this.updateItem(a.item,"move",a.item.startDate,a.item.endDate)},enableCreateOnShiftDoubleClick:function(){return!0},enableCreateOnControlAltClick:function(){return!0},
_addEntryOnClick:function(){var a=this;this.enableCreateOnShiftDoubleClick()&&this.addCreateOnShiftDoubleClick();this.enableCreateOnControlAltClick()&&(this.calendar.set("createOnGridClick",!0),this.calendar.set("createItemFunc",function(b,c,d){if(d.ctrlKey||d.altKey)return a.tempCreateItem=a.addCreateOnControlAltClick(b,c),a.tempCreateItem}))},addCreateOnShiftDoubleClick:function(){var a=this,b=function(b){a.calendar.gridClick=!0;a.updateSidebar(b,!0);a.calendar.gridClick=!1};this.calendar.on("gridClick",
function(c){b(c);a.onGridClick(c)});this.calendar.on("gridDoubleClick",function(a){b(a,!0)})},addCreateOnControlAltClick:function(a,b){var c,d;d=this.calendar.columnView;var f=this.calendar.dateModule;a===d?(c=this.calendar.floorDate(b,"minute",d.timeSlotDuration),d=f.add(c,"minute",d.timeSlotDuration)):(c=this.calendar.floorToDay(b),d=f.add(c,"day",1));f=i18n("New Entry");return{id:"noId",summary:f,name:f,startDate:c,endDate:d,clickCreate:!0,calendarId:this.calendarId}},_createSidebar:function(){var a=
this;this.calendar.gridClick=!1;this.sidebar={};this._addSidebarTabs();this.addSidebarCreateButtons();this.addCalendarFilters();this.sidebar.calendar=new c({datePackage:E.getDatePackage(),minDate:null,maxDate:null,getClassForDate:function(a){if(this.minDate&&this.maxDate){var b=this.dateModule;if(0<=b.compare(a,this.minDate)&&0>=b.compare(a,this.maxDate))return"highlighted-date"}return null},updateSideCalendar:function(a,b){this.set("currentFocus",a,!1);this.set("minDate",a);this.set("maxDate",b);
this._populateGrid()}},this.calendarSidebarAttachPoint);this.sidebar.calendar.on("change",function(b){a.calendar&&!a.calendar.gridClick&&a.calendar.set("date",b)});this.calendar.on("timeIntervalChange",function(b){a.sidebar.calendar.updateSideCalendar(b.startTime,b.endTime);b.oldStartTime&&b.oldEndTime&&a.refreshCalendar(b.startTime,b.endTime);a.calendar.calendarTitle.innerHTML=a.months[a.calendar.date.getMonth()]+" "+a.calendar.date.getFullYear()});this.sidebarContainer=t.create("div",{className:"calendar-sidebar-panel-container"},
this.calendarSidebarPanelAttachPoint)},_addSidebarTabs:function(){var a=this,b,c,d=t.create("div",{innerHTML:i18n("Details"),className:"calendar-sidebar-tab current-calendar-tab inline-block"},this.calendarSidebarTabsAttachPoint);b=d;c=a.calendarSidebarPanel;var f=t.create("div",{innerHTML:i18n("Filters"),className:"calendar-sidebar-tab inline-block"},this.calendarSidebarTabsAttachPoint);this.showTab=function(f,e){r.remove(b,"current-calendar-tab");r.add(c,"hidden");b=f||d;c=e||a.calendarSidebarPanel;
r.add(b,"current-calendar-tab");r.remove(c,"hidden")};o(d,"click",function(){a.showTab()});o(f,"click",function(){a.showTab(f,a.calendarSidebarFilterAttachPoint)})},addSidebarCreateButtons:function(){},createSidebarCreateButton:function(a){var b=t.create("div",{className:"calendar-sidebar-create-button-container"},this.calendarSidebarCreateButtonAttachPoint),b=(new k({label:a.label,onClick:a.onClick})).placeAt(b);a.highlight&&r.add(b.domNode,"idxButtonSpecial");if(a.hoverMessage){var c=t.create("div",
{innerHTML:a.hoverMessage,className:"calendar-sidebar-hover-container hidden"},this.calendarSidebarPanelAttachPoint);o(b,s.enter,function(){r.remove(c,"hidden")});o(b,s.leave,function(){r.add(c,"hidden")})}return b},showSaveMessage:function(a,b){var c=this,d=b||this.calendarSidebarPanelAttachPoint;if(!this.calendarSaveMessage)this.calendarSaveMessage=t.create("div",{className:"calendar-sidebar-save-message hidden"}),o(this.calendarSaveMessage,s.enter,function(){r.add(c.calendarSaveMessage,"hidden")});
this.calendarSaveMessage.innerHTML=a||i18n("Calendar Saved");t.place(this.calendarSaveMessage,d,"first");r.remove(this.calendarSaveMessage,"hidden");setTimeout(function(){r.add(c.calendarSaveMessage,"hidden")},2500)},createSidebarItem:function(a){var b=a.type||"div",c=t.create(b,{className:a.className||"",innerHTML:a.innerHTML||""},a.attachPoint||this.sidebarContainer||"");if("a"===b&&a.href)c.href=a.href;return c},_createItemForSidebar:function(a,b,c){return{innerHTML:a||"",attachPoint:b||this.sidebarContainer||
"",className:c||""}},createSidebarSection:function(a,b){return this.createSidebarItem(this._createItemForSidebar(a,b,"calendar-sidebar-panel-section"))},createSidebarLabel:function(a,b){return this.createSidebarItem(this._createItemForSidebar(a,b,"calendar-sidebar-panel-label"))},createSidebarLabelContainer:function(a,b){var c=b||this.createSidebarSection();this.createSidebarLabel(a,c);return c},createSidebarText:function(a,b,c){c=this.createSidebarLabelContainer(a,c);this.createSidebarItem(this._createItemForSidebar(b,
c,"calendar-sidebar-panel-text"))},createSidebarLink:function(a,b,c,d,f){d?this.createSidebarText(a,b,f):(f=this.createSidebarLabelContainer(a,f),this.createSidebarItem({innerHTML:b,attachPoint:f,className:"calendar-sidebar-panel-text calendar-sidebar-panel-link",href:c,type:"a"}))},createSidebarTitle:function(a,b){var c=b||this.createSidebarSection();this.createSidebarItem(this._createItemForSidebar(a,c,"calendar-sidebar-panel-title"))},createSidebarButton:function(a,b,c,d,f,e){d=d||this.sidebarContainer;
a=f?t.create("a",{innerHTML:a,title:e||a,className:"calendar-sidebar-button-link linkPointer "+b},d):(new k({label:a})).placeAt(d);f||r.add(a.domNode,b+" calendar-sidebar-button");o(a,"click",function(){c()});return a},clearSidebar:function(){t.empty(this.sidebarContainer)},updateSidebar:function(a){a=a.item||null;this.clearSidebar();this.showTab();if(a){a.name&&this.createSidebarTitle(a.name);if(a.startDate){var b=this.createSidebarLabelContainer(a.endDate?i18n("Start Date"):i18n("Date"));(new e({datePackage:E.getDatePackage(),
value:E.getNewDate(a.startDate)})).placeAt(b);(new h({value:a.startDate})).placeAt(b)}a.endDate&&(b=this.createSidebarLabelContainer(i18n("End Date")),(new e({datePackage:E.getDatePackage(),value:E.getNewDate(a.endDate)})).placeAt(b),(new h({value:a.endDate})).placeAt(b))}},updateItem:function(a,b){var c=this.calendar.store;if(b.date)a.startDate=b.date;if(b.endDate)a.endDate=b.endDate;c.put(a);this.showSaveMessage()},createCalendarFilterSection:function(a){var b=a.section||this.createSidebarLabelContainer(a.label);
a.placeAt?t.place(b,a.placeAt):a.noPlace||t.place(b,this.calendarSidebarFilterAttachPoint);var c=null,c=null,d;a.url?(c=new v({target:a.url,idProperty:"id"}),d={store:c,placeHolder:a.placeHolder||i18n("All"),pageSize:"10",listClassName:a.listClassName}):a.options&&a.value&&(c=new x({data:a.options,idProperty:"value"}),d={store:c,placeHolder:a.placeHolder||i18n("All"),searchAttr:"label"});if(a.onChange)d.onChange=a.onChange;if(a.formatDropDownLabel)d.formatDropDownLabel=a.formatDropDownLabel;if(a.multiple){if(a.formatSelectedItem)d.formatSelectedItem=
a.formatSelectedItem;c=new z(d)}else c=new A(d);c.placeAt(b);a.className&&r.add(c.domNode,a.className);return c},addCalendarFilters:function(){},filterCalendar:function(){return!0}})})},"dijit/form/TimeTextBox":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","../_TimePicker","./_DateTimeTextBox"],function(l,m,k,j,e){return l("dijit.form.TimeTextBox",e,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:j,_selector:"time",value:new Date(""),_onKey:function(e){if(!this.disabled&&
!this.readOnly)switch(this.inherited(arguments),e.keyCode){case m.ENTER:case m.TAB:case m.ESCAPE:case m.DOWN_ARROW:case m.UP_ARROW:break;default:this.defer(function(){var d=this.get("displayedValue");this.filterString=d&&!this.parse(d,this.constraints)?d.toLowerCase():"";this._opened&&this.closeDropDown();this.openDropDown()})}}})})},"dijit/_TimePicker":function(){define("dojo/_base/array,dojo/date,dojo/date/locale,dojo/date/stamp,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/_base/event,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/query,dojo/mouse,./typematic,./_Widget,./_TemplatedMixin,./form/_FormValueWidget,dojo/text!./templates/TimePicker.html".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return e("dijit._TimePicker",[o,s],{templateString:w,baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date,_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:j.toISOString,setValue:function(a){b.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",a)},_setValueAttr:function(a){this._set("value",
a);this._showText()},_setFilterStringAttr:function(a){this._set("filterString",a);this._showText()},isDisabledDate:function(){return!1},_getFilteredNodes:function(a,b,c,d){var f=[],d=d?d.date:this._refDate,e=a,h=this._maxIncrement+Math.abs(e),o=c?-1:1,n=c?1:0,j=1-n;do{e-=n;if(a=this._createOption(e)){if(c&&a.date>d||!c&&a.date<d)break;f[c?"unshift":"push"](a);d=a.date}e+=j}while(f.length<b&&e*o<h);return f},_showText:function(){var a=j.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=
a(this.clickableIncrement);this._visibleIncrementDate=a(this.visibleIncrement);this._visibleRangeDate=a(this.visibleRange);var b=function(a){return 3600*a.getHours()+60*a.getMinutes()+a.getSeconds()},a=b(this._clickableIncrementDate),c=b(this._visibleIncrementDate),b=b(this._visibleRangeDate),d=(this.value||this.currentFocus).getTime();this._refDate=new Date(d-d%(1E3*a));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=b/a;this._visibleIncrement=c/a;this._maxIncrement=
86400/a;b=Math.min(this._totalIncrements,10);a=this._getFilteredNodes(0,(b>>1)+1,!1);c=[];b-=a.length;d=this._getFilteredNodes(0,b,!0,a[0]);d.length<b&&0<a.length&&(c=this._getFilteredNodes(a[a.length-1].idx+1,b-d.length,!1,a[a.length-1]));l.forEach(d.concat(a,c),function(a){this.timeMenu.appendChild(a)},this);if(!d.length&&!a.length&&!c.length&&this.filterString)this.filterString="",this._showText()},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited(arguments);
this._setConstraintsAttr(this.constraints)},_setConstraintsAttr:function(a){f.mixin(this,a);if(!a.locale)a.locale=this.lang},postCreate:function(){this.connect(this.timeMenu,t.wheel,"_mouseWheeled");this.own(q.addMouseListener(this.upArrow,this,"_onArrowUp",33,250),q.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments)},_buttonMouse:function(a){h.toggle(a.currentTarget,a.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover","mouseenter"==a.type||"mouseover"==
a.type)},_createOption:function(a){var b=new Date(this._refDate),c=this._clickableIncrementDate;b.setTime(b.getTime()+36E5*c.getHours()*a+6E4*c.getMinutes()*a+1E3*c.getSeconds()*a);"time"==this.constraints.selector&&b.setFullYear(1970,0,1);c=k.format(b,this.constraints);if(this.filterString&&0!==c.toLowerCase().indexOf(this.filterString))return null;var f=this.ownerDocument.createElement("div");f.className=this.baseClass+"Item";f.date=b;f.idx=a;d.create("div",{"class":this.baseClass+"ItemInner",innerHTML:c},
f);1>a%this._visibleIncrement&&-1<a%this._visibleIncrement?h.add(f,this.baseClass+"Marker"):a%this._clickableIncrement||h.add(f,this.baseClass+"Tick");this.isDisabledDate(b)&&h.add(f,this.baseClass+"ItemDisabled");if(this.value&&!m.compare(this.value,b,this.constraints.selector))f.selected=!0,h.add(f,this.baseClass+"ItemSelected"),h.contains(f,this.baseClass+"Marker")?h.add(f,this.baseClass+"MarkerSelected"):h.add(f,this.baseClass+"TickSelected"),this._highlightOption(f,!0);return f},_onOptionSelected:function(a){if((a=
a.target.date||a.target.parentNode.date)&&!this.isDisabledDate(a))this._highlighted_option=null,this.set("value",a),this.onChange(a)},onChange:function(){},_highlightOption:function(a,b){if(a){if(b)this._highlighted_option&&this._highlightOption(this._highlighted_option,!1),this._highlighted_option=a;else{if(this._highlighted_option!==a)return;this._highlighted_option=null}h.toggle(a,this.baseClass+"ItemHover",b);h.contains(a,this.baseClass+"Marker")?h.toggle(a,this.baseClass+"MarkerHover",b):h.toggle(a,
this.baseClass+"TickHover",b)}},onmouseover:function(a){this._keyboardSelected=null;a=a.target.parentNode===this.timeMenu?a.target:a.target.parentNode;h.contains(a,this.baseClass+"Item")&&this._highlightOption(a,!0)},onmouseout:function(a){this._keyboardSelected=null;this._highlightOption(a.target.parentNode===this.timeMenu?a.target:a.target.parentNode,!1)},_mouseWheeled:function(a){this._keyboardSelected=null;c.stop(a);this[0<a.wheelDelta?"_onArrowUp":"_onArrowDown"]()},_onArrowUp:function(a){-1===
a?h.remove(this.upArrow,"dijitUpArrowActive"):(0===a&&h.add(this.upArrow,"dijitUpArrowActive"),this.timeMenu.childNodes.length&&(a=this._getFilteredNodes(this.timeMenu.childNodes[0].idx,1,!0,this.timeMenu.childNodes[0]),a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),this.timeMenu.insertBefore(a[0],this.timeMenu.childNodes[0]))))},_onArrowDown:function(a){-1===a?h.remove(this.downArrow,"dijitDownArrowActive"):(0===a&&h.add(this.downArrow,"dijitDownArrowActive"),
this.timeMenu.childNodes.length&&(a=this._getFilteredNodes(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].idx+1,1,!1,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]),a.length&&(this.timeMenu.removeChild(this.timeMenu.childNodes[0]),this.timeMenu.appendChild(a[0]))))},handleKey:function(b){if(b.keyCode==a.DOWN_ARROW||b.keyCode==a.UP_ARROW){c.stop(b);if(this._highlighted_option&&!this._highlighted_option.parentNode)this._highlighted_option=null;var d=this.timeMenu,f=this._highlighted_option||
r("."+this.baseClass+"ItemSelected",d)[0];f?d.childNodes.length&&(b.keyCode==a.DOWN_ARROW&&!f.nextSibling?this._onArrowDown():b.keyCode==a.UP_ARROW&&!f.previousSibling&&this._onArrowUp(),f=b.keyCode==a.DOWN_ARROW?f.nextSibling:f.previousSibling):f=d.childNodes[0];this._highlightOption(f,!0);this._keyboardSelected=f;return!1}if(b.keyCode==a.ENTER||b.keyCode===a.TAB){if(!this._keyboardSelected&&b.keyCode===a.TAB)return!0;this._highlighted_option&&this._onOptionSelected({target:this._highlighted_option});
return b.keyCode===a.TAB}}})})},"dijit/typematic":function(){define("dojo/_base/array,dojo/_base/connect,dojo/_base/event,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/sniff,./main".split(","),function(l,m,k,j,e,h,d,c){var b=c.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),
this._minDelay);this._timer=setTimeout(e.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,b,c,d,h,j,o,s){if(h!=this._obj){this.stop();this._initialDelay=o||500;this._subsequentDelay=j||0.9;this._minDelay=s||10;this._obj=h;this._node=c;this._count=this._currentTimeout=-1;this._callback=e.hitch(b,d);this._evt={faux:!0};for(var k in a)"layerX"!=k&&"layerY"!=k&&(b=a[k],"function"!=typeof b&&"undefined"!=typeof b&&(this._evt[k]=b));this._fireEventAndReload()}},stop:function(){if(this._timer)clearTimeout(this._timer),
this._timer=null;if(this._obj)this._callback(-1,this._node,this._evt),this._obj=null},addKeyListener:function(a,c,d,r,t,q,o){if(c.keyCode)c.charOrCode=c.keyCode,j.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");else if(c.charCode)c.charOrCode=String.fromCharCode(c.charCode),j.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");var s=[h(a,m._keypress,
e.hitch(this,function(e){e.charOrCode==c.charOrCode&&(void 0===c.ctrlKey||c.ctrlKey==e.ctrlKey)&&(void 0===c.altKey||c.altKey==e.altKey)&&(void 0===c.metaKey||c.metaKey==(e.metaKey||!1))&&(void 0===c.shiftKey||c.shiftKey==e.shiftKey)?(k.stop(e),b.trigger(e,d,a,r,c,t,q,o)):b._obj==c&&b.stop()})),h(a,"keyup",e.hitch(this,function(){b._obj==c&&b.stop()}))];return{remove:function(){l.forEach(s,function(a){a.remove()})}}},addMouseListener:function(a,c,n,j,t,q){var o=[h(a,"mousedown",e.hitch(this,function(d){d.preventDefault();
b.trigger(d,c,a,n,a,j,t,q)})),h(a,"mouseup",e.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),h(a,"mouseout",e.hitch(this,function(a){this._obj&&a.preventDefault();b.stop()})),h(a,"dblclick",e.hitch(this,function(h){h.preventDefault();9>d("ie")&&(b.trigger(h,c,a,n,a,j,t,q),setTimeout(e.hitch(this,b.stop),50))}))];return{remove:function(){l.forEach(o,function(a){a.remove()})}}},addListener:function(a,b,c,d,e,h,o,j){var k=[this.addKeyListener(b,c,d,e,h,o,j),this.addMouseListener(a,
d,e,h,o,j)];return{remove:function(){l.forEach(k,function(a){a.remove()})}}}};return b})},"url:dijit/templates/TimePicker.html":'<div id="widget_${id}" class="dijitMenu"\n    ><div data-dojo-attach-point="upArrow" class="dijitButtonNode dijitUpArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9650;</div></div\n    ><div data-dojo-attach-point="timeMenu,focusNode" data-dojo-attach-event="onclick:_onOptionSelected,onmouseover,onmouseout"></div\n    ><div data-dojo-attach-point="downArrow" class="dijitButtonNode dijitDownArrowButton" data-dojo-attach-event="onmouseenter:_buttonMouse,onmouseleave:_buttonMouse"\n\t\t><div class="dijitReset dijitInline dijitArrowButtonInner" role="presentation">&#160;</div\n\t\t><div class="dijitArrowButtonChar">&#9660;</div></div\n></div>\n',
"dojox/calendar/Calendar":function(){define("dojo/_base/declare,dojo/_base/lang,./CalendarBase,./ColumnView,./ColumnViewSecondarySheet,./VerticalRenderer,./MatrixView,./HorizontalRenderer,./LabelRenderer,./ExpandRenderer,./Keyboard,./Mouse,dojo/text!./templates/Calendar.html,dijit/form/Button,dijit/Toolbar,dijit/ToolbarSeparator".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return l("dojox.calendar.Calendar",k,{templateString:r,_createDefaultViews:function(){var r=l([e,f,n]),r=l([j,f,n])(m.mixin({secondarySheetClass:r,
verticalRenderer:h,horizontalRenderer:c,expandRenderer:a},this.columnViewProps)),q=l([d,f,n])(m.mixin({horizontalRenderer:c,labelRenderer:b,expandRenderer:a},this.matrixViewProps));this.columnView=r;this.matrixView=q;r=[r,q];this.installDefaultViewsActions(r);return r},installDefaultViewsActions:function(){this.matrixView.on("rowHeaderClick",m.hitch(this,this.matrixViewRowHeaderClick));this.columnView.on("columnHeaderClick",m.hitch(this,this.columnViewColumnHeaderClick))}})})},"dojox/calendar/CalendarBase":function(){define("dojo/_base/declare,dojo/_base/sniff,dojo/_base/event,dojo/_base/lang,dojo/_base/array,dojo/cldr/supplemental,dojo/dom,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/date,dojo/date/locale,dojo/_base/fx,dojo/fx,dojo/on,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,./StoreMixin,dojox/widget/_Invalidating,dojox/widget/Selection,dojox/calendar/time,dojo/i18n!./nls/buttons".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C){return l("dojox.calendar.CalendarBase",[o,s,u,w,v,x],{baseClass:"dojoxCalendar",datePackage:f,startDate:null,endDate:null,date:null,dateInterval:"week",dateIntervalSteps:1,viewContainer:null,firstDayOfWeek:-1,formatItemTimeFunc:null,editable:!0,moveEnabled:!0,resizeEnabled:!0,columnView:null,matrixView:null,columnViewProps:null,matrixViewProps:null,createOnGridClick:!1,createItemFunc:null,_currentViewIndex:-1,views:null,_calendar:"gregorian",
constructor:function(a){this.views=[];this.invalidatingProperties="store,items,startDate,endDate,views,date,dateInterval,dateIntervalSteps,firstDayOfWeek".split(",");a=a||{};this._calendar=a.datePackage?a.datePackage.substr(a.datePackage.lastIndexOf(".")+1):this._calendar;this.dateModule=a.datePackage?j.getObject(a.datePackage,!1):f;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?j.getObject(a.datePackage+".locale",!1):n;this.invalidateRendering()},destroy:function(a){e.forEach(this._buttonHandles,
function(a){a.remove()});this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);(null==this.views||0==this.views.length)&&this.set("views",this._createDefaultViews())},_applyAttributes:function(){this._applyAttr=!0;this.inherited(arguments);delete this._applyAttr},_setStartDateAttr:function(a){this._set("startDate",a);this._timeRangeInvalidated=!0},_setEndDateAttr:function(a){this._set("endDate",a);this._timeRangeInvalidated=!0},_setDateAttr:function(a){this._set("date",a);
this._timeRangeInvalidated=!0},_setDateIntervalAttr:function(a){this._set("dateInterval",a);this._timeRangeInvalidated=!0},_setDateIntervalStepsAttr:function(a){this._set("dateIntervalSteps",a);this._timeRangeInvalidated=!0},_setFirstDayOfWeekAttr:function(a){this._set("firstDayOfWeek",a);if(null!=this.get("date")&&"week"==this.get("dateInterval"))this._timeRangeInvalidated=!0},_setTextDirAttr:function(a){e.forEach(this.views,function(b){b.set("textDir",a)})},refreshRendering:function(){this.inherited(arguments);
this._validateProperties()},_refreshItemsRendering:function(){this.currentView&&this.currentView._refreshItemsRendering()},_validateProperties:function(){var a=this.dateModule,b=this.get("startDate"),c=this.get("endDate"),d=this.get("date");(-1>this.firstDayOfWeek||6<this.firstDayOfWeek)&&this._set("firstDayOfWeek",0);if(null==d&&(null!=b||null!=c)){if(null==b)b=new this.dateClassObj,this._set("startDate",b),this._timeRangeInvalidated=!0;if(null==c)c=new this.dateClassObj,this._set("endDate",c),this._timeRangeInvalidated=
!0;if(0<=a.compare(b,c))c=a.add(b,"day",1),this._set("endDate",c),this._timeRangeInvalidated=!0}else{if(null==this.date)this._set("date",new this.dateClassObj),this._timeRangeInvalidated=!0;b=this.get("dateInterval");if("day"!=b&&"week"!=b&&"month"!=b)this._set("dateInterval","day"),this._timeRangeInvalidated=!0;b=this.get("dateIntervalSteps");j.isString(b)&&(b=parseInt(b),this._set("dateIntervalSteps",b));if(0>=b)this.set("dateIntervalSteps",1),this._timeRangeInvalidated=!0}if(this._timeRangeInvalidated){this._timeRangeInvalidated=
!1;var f=this.computeTimeInterval();if(null==this._timeInterval||a.compare(this._timeInterval[0],0!=f[0])||a.compare(this._timeInterval[1],0!=f[1]))this.onTimeIntervalChange({oldStartTime:null==this._timeInterval?null:this._timeInterval[0],oldEndTime:null==this._timeInterval?null:this._timeInterval[1],startTime:f[0],endTime:f[1]});this._timeInterval=f;var h=this.dateModule.difference(this._timeInterval[0],this._timeInterval[1],"day"),o=this._computeCurrentView(f[0],f[1],h),n=e.indexOf(this.views,
o);if(!(null==o||-1==n))if(this.animateRange&&(!m("ie")||8<m("ie")))if(this.currentView){var s=this.isLeftToRight(),q="left"==this._animRangeInDir||null==this._animRangeInDir,a="left"==this._animRangeOutDir||null==this._animRangeOutDir;this._animateRange(this.currentView.domNode,a&&s,!1,0,a?-100:100,j.hitch(this,function(){this.animateRangeTimer=setTimeout(j.hitch(this,function(){this._applyViewChange(o,n,f,h);this._animateRange(this.currentView.domNode,q&&s,!0,q?-100:100,0);this._animRangeOutDir=
this._animRangeInDir=null}),100)}))}else this._applyViewChange(o,n,f,h);else this._applyViewChange(o,n,f,h)}},_applyViewChange:function(a,c,d,f){this._configureView(a,c,d,f);if(c!=this._currentViewIndex)null==this.currentView?(a.set("items",this.items),this.set("currentView",a)):null==this.items||0==this.items.length?(this.set("currentView",a),this.animateRange&&(!m("ie")||8<m("ie"))&&b.set(this.currentView.domNode,"opacity",0),a.set("items",this.items)):(this.currentView=a,a.set("items",this.items),
this.set("currentView",a),this.animateRange&&(!m("ie")||8<m("ie"))&&b.set(this.currentView.domNode,"opacity",0))},_timeInterval:null,computeTimeInterval:function(){var a=this.dateModule,b=this.get("date");if(null==b)return[this.floorToDay(this.get("startDate")),a.add(this.get("endDate"),"day",1)];var b=this.floorToDay(b),c=this.get("dateInterval"),d=this.get("dateIntervalSteps"),f;switch(c){case "day":f=a.add(b,"day",d);break;case "week":b=this.floorToWeek(b);f=a.add(b,"week",d);break;case "month":b.setDate(1),
f=a.add(b,"month",d)}return[b,f]},onTimeIntervalChange:function(){},views:null,_setViewsAttr:function(a){if(!this._applyAttr)for(var b=0;b<this.views.length;b++)this._onViewRemoved(this.views[b]);if(null!=a)for(b=0;b<a.length;b++)this._onViewAdded(a[b]);this._set("views",null==a?[]:a.concat())},_getViewsAttr:function(){return this.views.concat()},_createDefaultViews:function(){},addView:function(a,b){if(0>=b||b>this.views.length)b=this.views.length;this.views.splice(b,a);this._onViewAdded(a)},removeView:function(){0>
index||index>=this.views.length||(this._onViewRemoved(this.views[index]),this.views.splice(index,1))},_onViewAdded:function(d){d.owner=this;d.buttonContainer=this.buttonContainer;d._calendar=this._calendar;d.datePackage=this.datePackage;d.dateModule=this.dateModule;d.dateClassObj=this.dateClassObj;d.dateLocaleModule=this.dateLocaleModule;b.set(d.domNode,"display","none");c.add(d.domNode,"view");a.place(d.domNode,this.viewContainer);this.onViewAdded(d)},onViewAdded:function(){},_onViewRemoved:function(a){a.owner=
null;a.buttonContainer=null;c.remove(a.domNode,"view");this.viewContainer.removeChild(a.domNode);this.onViewRemoved(a)},onViewRemoved:function(){},_setCurrentViewAttr:function(a){var b=e.indexOf(this.views,a);if(-1!=b){var c=this.get("currentView");this._currentViewIndex=b;this._set("currentView",a);this._showView(c,a);this.onCurrentViewChange({oldView:c,newView:a})}},_getCurrentViewAttr:function(){return this.views[this._currentViewIndex]},onCurrentViewChange:function(){},_configureView:function(a,
b,c,d){b=this.dateModule;if("columns"==a.viewKind)a.set("startDate",c[0]),a.set("columnCount",d);else if("matrix"==a.viewKind)if(7<d){var f=this.floorToWeek(c[0]),d=this.floorToWeek(c[1]);0!=b.compare(d,c[1])&&(d=this.dateModule.add(d,"week",1));d=this.dateModule.difference(f,d,"day");a.set("startDate",f);a.set("columnCount",7);a.set("rowCount",Math.ceil(d/7));a.set("refStartTime",c[0]);a.set("refEndTime",c[1])}else a.set("startDate",c[0]),a.set("columnCount",d),a.set("rowCount",1),a.set("refStartTime",
null),a.set("refEndTime",null)},_computeCurrentView:function(a,b,c){return 7>=c?this.columnView:this.matrixView},matrixViewRowHeaderClick:function(a){var b=this.matrixView.getExpandedRowIndex();if(b==a.index)this.matrixView.collapseRow();else if(-1==b)this.matrixView.expandRow(a.index);else{var c=this.matrixView.on("expandAnimationEnd",j.hitch(this,function(){c.remove();this.matrixView.expandRow(a.index)}));this.matrixView.collapseRow()}},columnViewColumnHeaderClick:function(a){0==this.dateModule.compare(a.date,
this._timeInterval[0])&&"day"==this.dateInterval&&1==this.dateIntervalSteps?this.set("dateInterval","week"):(this.set("date",a.date),this.set("dateInterval","day"),this.set("dateIntervalSteps",1))},viewChangeDuration:0,_showView:function(a,c){null!=a&&b.set(a.domNode,"display","none");null!=c&&(b.set(c.domNode,"display","block"),c.resize(),(!m("ie")||7<m("ie"))&&b.set(c.domNode,"opacity","1"))},_setItemsAttr:function(a){this._set("items",a);this.currentView&&(this.currentView.set("items",a),this.currentView.invalidateRendering())},
floorToDay:function(a,b){return y.floorToDay(a,b,this.dateClassObj)},floorToWeek:function(a){return y.floorToWeek(a,this.dateClassObj,this.dateModule,this.firstDayOfWeek,this.locale)},newDate:function(a){return y.newDate(a,this.dateClassObj)},isToday:function(a){return y.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return y.isStartOfDay(a,this.dateClassObj,this.dateModule)},floorDate:function(a,b,c,d){return y.floor(a,b,c,d,this.classFuncObj)},animateRange:!0,animationRangeDuration:400,
_animateRange:function(a,c,d,f,e,h){this.animateRangeTimer&&(clearTimeout(this.animateRangeTimer),delete this.animateRangeTimer);c=d?r.fadeIn:r.fadeOut;b.set(a,{left:f+"px",right:-f+"px"});t.combine([r.animateProperty({node:a,properties:{left:e,right:-e},duration:this.animationRangeDuration/2,onEnd:h}),c({node:a,duration:this.animationRangeDuration/2})]).play()},_animRangeOutDir:null,_animRangeOutDir:null,nextRange:function(){this._animRangeOutDir="left";this._animRangeInDir="right";this._navigate(1)},
previousRange:function(){this._animRangeOutDir="right";this._animRangeInDir="left";this._navigate(-1)},_navigate:function(a){var b=this.get("date"),c=this.dateModule;if(null==b){var b=this.get("startDate"),d=this.get("endDate"),f=c.difference(b,d,"day");1==a?(d=c.add(d,"day",1),this.set("startDate",d),this.set("endDate",c.add(d,"day",f))):(b=c.add(b,"day",-1),this.set("startDate",c.add(b,"day",-f)),this.set("endDate",b))}else d=this.get("dateInterval"),f=this.get("dateIntervalSteps"),this.set("date",
c.add(b,d,a*f))},goToday:function(){this.set("date",this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval","day");this.set("dateIntervalSteps",1)},postCreate:function(){this.inherited(arguments);this.configureButtons()},configureButtons:function(){var a=[],b=!this.isLeftToRight();this.previousButton&&(this.previousButton.set("label",C[b?"nextButton":"previousButton"]),a.push(q(this.previousButton,"click",j.hitch(this,b?this.nextRange:this.previousRange))));this.nextButton&&(this.nextButton.set("label",
C[b?"previousButton":"nextButton"]),a.push(q(this.nextButton,"click",j.hitch(this,b?this.previousRange:this.nextRange))));if(b&&this.previousButton&&this.nextButton)b=this.previousButton,this.previousButton=this.nextButton,this.nextButton=b;this.todayButton&&(this.todayButton.set("label",C.todayButton),a.push(q(this.todayButton,"click",j.hitch(this,this.todayButtonClick))));this.dayButton&&(this.dayButton.set("label",C.dayButton),a.push(q(this.dayButton,"click",j.hitch(this,this.dayButtonClick))));
this.weekButton&&(this.weekButton.set("label",C.weekButton),a.push(q(this.weekButton,"click",j.hitch(this,this.weekButtonClick))));this.fourDaysButton&&(this.fourDaysButton.set("label",C.fourDaysButton),a.push(q(this.fourDaysButton,"click",j.hitch(this,this.fourDaysButtonClick))));this.monthButton&&(this.monthButton.set("label",C.monthButton),a.push(q(this.monthButton,"click",j.hitch(this,this.monthButtonClick))));this._buttonHandles=a},todayButtonClick:function(){this.goToday()},dayButtonClick:function(){null==
this.get("date")&&this.set("date",this.floorToDay(new this.dateClassObj,!0));this.set("dateInterval","day");this.set("dateIntervalSteps",1)},weekButtonClick:function(){this.set("dateInterval","week");this.set("dateIntervalSteps",1)},fourDaysButtonClick:function(){this.set("dateInterval","day");this.set("dateIntervalSteps",4)},monthButtonClick:function(){this.set("dateInterval","month");this.set("dateIntervalSteps",1)},updateRenderers:function(a,b){this.currentView&&this.currentView.updateRenderers(a,
b)},getIdentity:function(a){return a?a.id:null},_setHoveredItem:function(a,b){if(this.hoveredItem&&a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this.currentView._updateEditingCapabilities(a,b)}},hoveredItem:null,isItemHovered:function(a){return null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemEditable:function(){return this.editable},isItemMoveEnabled:function(){return this.isItemEditable()&&
this.moveEnabled},isItemResizeEnabled:function(){return this.isItemEditable()&&this.resizeEnabled},onGridClick:function(){},onGridDoubleClick:function(){},onItemClick:function(){},onItemDoubleClick:function(){},onItemContextMenu:function(){},onItemEditBegin:function(){},onItemEditEnd:function(){},onItemEditBeginGesture:function(){},onItemEditMoveGesture:function(){},onItemEditResizeGesture:function(){},onItemEditEndGesture:function(){},onItemRollOver:function(){},onItemRollOut:function(){},onColumnHeaderClick:function(){},
onRowHeaderClick:function(){},onExpandRendererClick:function(){},onRendererCreated:function(){},onRendererRecycled:function(){},onRendererReused:function(){},onRendererDestroyed:function(){},onRenderersLayoutDone:function(){}})})},"dojo/fx":function(){define("./_base/lang,./Evented,./_base/kernel,./_base/array,./_base/connect,./_base/fx,./dom,./dom-style,./dom-geometry,./ready,require".split(","),function(l,m,k,j,e,h,d,c,b,a,f){k.isAsync||a(0,function(){f(["./fx/Toggler"])});var k=k.fx={},a={_fire:function(a,
b){this[a]&&this[a].apply(this,b||[]);return this}},n=function(a){this._index=-1;this._animations=a||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;j.forEach(this._animations,function(a){this.duration+=a.duration;a.delay&&(this.duration+=a.delay)},this)};n.prototype=new m;l.extend(n,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){e.disconnect(this._onAnimateCtx);e.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;this._index+1==
this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=e.connect(this._current,"onAnimate",this,"_onAnimate"),this._onEndCtx=e.connect(this._current,"onEnd",this,"_onEnd"),this._current.play(0,!0))},play:function(a,b){if(!this._current)this._current=this._animations[this._index=0];if(!b&&"playing"==this._current.status())return this;var c=e.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin")}),d=e.connect(this._current,
"onBegin",this,function(a){this._fire("onBegin",arguments)}),f=e.connect(this._current,"onPlay",this,function(a){this._fire("onPlay",arguments);e.disconnect(c);e.disconnect(d);e.disconnect(f)});this._onAnimateCtx&&e.disconnect(this._onAnimateCtx);this._onAnimateCtx=e.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx&&e.disconnect(this._onEndCtx);this._onEndCtx=e.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this},pause:function(){if(this._current){var a=
e.connect(this._current,"onPause",this,function(b){this._fire("onPause",arguments);e.disconnect(a)});this._current.pause()}return this},gotoPercent:function(a,b){this.pause();var c=this.duration*a;this._current=null;j.some(this._animations,function(a){if(a.duration<=c)return this._current=a,!0;c-=a.duration;return!1});this._current&&this._current.gotoPercent(c/this._current.duration,b);return this},stop:function(a){if(this._current){if(a){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);
this._current=this._animations[this._index]}var b=e.connect(this._current,"onStop",this,function(a){this._fire("onStop",arguments);e.disconnect(b)});this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&e.disconnect(this._onAnimateCtx);this._onEndCtx&&e.disconnect(this._onEndCtx)}});l.extend(n,a);k.chain=function(a){return new n(a)};var r=function(a){this._animations=a||[];this._connects=[];this.duration=this._finished=
0;j.forEach(a,function(a){var b=a.duration;a.delay&&(b+=a.delay);if(this.duration<b)this.duration=b;this._connects.push(e.connect(a,"onEnd",this,"_onEnd"))},this);this._pseudoAnimation=new h.Animation({curve:[0,1],duration:this.duration});var b=this;j.forEach("beforeBegin,onBegin,onPlay,onAnimate,onPause,onStop,onEnd".split(","),function(a){b._connects.push(e.connect(b._pseudoAnimation,a,function(){b._fire(a,arguments)}))})};l.extend(r,{_doAction:function(a,b){j.forEach(this._animations,function(c){c[a].apply(c,
b)});return this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(a,b){var c=this._pseudoAnimation;c[a].apply(c,b)},play:function(a,b){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this},gotoPercent:function(a,b){var c=this.duration*a;j.forEach(this._animations,function(a){a.gotoPercent(a.duration<c?1:c/a.duration,b)});
this._call("gotoPercent",arguments);return this},stop:function(a){this._doAction("stop",arguments);this._call("stop",arguments);return this},status:function(){return this._pseudoAnimation.status()},destroy:function(){j.forEach(this._connects,e.disconnect)}});l.extend(r,a);k.combine=function(a){return new r(a)};k.wipeIn=function(a){var b=a.node=d.byId(a.node),f=b.style,n,a=h.animateProperty(l.mixin({properties:{height:{start:function(){n=f.overflow;f.overflow="hidden";if("hidden"==f.visibility||"none"==
f.display)return f.height="1px",f.display="",f.visibility="",1;var a=c.get(b,"height");return Math.max(a,1)},end:function(){return b.scrollHeight}}}},a)),j=function(){f.height="auto";f.overflow=n};e.connect(a,"onStop",j);e.connect(a,"onEnd",j);return a};k.wipeOut=function(a){var b=(a.node=d.byId(a.node)).style,c,a=h.animateProperty(l.mixin({properties:{height:{end:1}}},a));e.connect(a,"beforeBegin",function(){c=b.overflow;b.overflow="hidden";b.display=""});var f=function(){b.overflow=c;b.height="auto";
b.display="none"};e.connect(a,"onStop",f);e.connect(a,"onEnd",f);return a};k.slideTo=function(a){var f=null,o=null,n=function(a){return function(){var d=c.getComputedStyle(a),e=d.position;f="absolute"==e?a.offsetTop:parseInt(d.top)||0;o="absolute"==e?a.offsetLeft:parseInt(d.left)||0;if("absolute"!=e&&"relative"!=e)d=b.position(a,!0),f=d.y,o=d.x,a.style.position="absolute",a.style.top=f+"px",a.style.left=o+"px"}}(a.node=d.byId(a.node));n();a=h.animateProperty(l.mixin({properties:{top:a.top||0,left:a.left||
0}},a));e.connect(a,"beforeBegin",a,n);return a};return k})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(l,m,k){return m("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,_beforeFillContent:function(){if(this.widgetsInTemplate){var j=this._startupWidgets=k.parse(this.domNode,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,
scope:"dojo"});if(!j.isFulfilled())throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");this._attachTemplateNodes(j,function(e,h){return e[h]})}},startup:function(){l.forEach(this._startupWidgets,function(j){j&&!j._started&&j.startup&&j.startup()});this.inherited(arguments)}})})},"dojox/calendar/StoreMixin":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/html,dojo/_base/lang,dojo/dom-class,dojo/Stateful,dojo/when".split(","),
function(l,m,k,j,e,h,d){return l("dojox.calendar.StoreMixin",h,{store:null,query:{},startTimeAttr:"startTime",endTimeAttr:"endTime",summaryAttr:"summary",allDayAttr:"allDay",cssClassFunc:null,decodeDate:null,encodeDate:null,displayedItemsInvalidated:!1,itemToRenderItem:function(c,b){return this.owner?this.owner.itemToRenderItem(c,b):{id:b.getIdentity(c),summary:c[this.summaryAttr],startTime:this.decodeDate&&this.decodeDate(c[this.startTimeAttr])||this.newDate(c[this.startTimeAttr],this.dateClassObj),
endTime:this.decodeDate&&this.decodeDate(c[this.endTimeAttr])||this.newDate(c[this.endTimeAttr],this.dateClassObj),allDay:null!=c[this.allDayAttr]?c[this.allDayAttr]:!1,cssClass:this.cssClassFunc?this.cssClassFunc(c):null}},renderItemToItem:function(c,b){if(this.owner)return this.owner.renderItemToItem(c,b);var a={};a[b.idProperty]=c.id;a[this.summaryAttr]=c.summary;a[this.startTimeAttr]=this.encodeDate&&this.encodeDate(c.startTime)||c.startTime;a[this.endTimeAttr]=this.encodeDate&&this.encodeDate(c.endTime)||
c.endTime;return j.mixin(b.get(c.id),a)},_computeVisibleItems:function(c){var b=c.startTime,a=c.endTime;if(this.items)c.items=m.filter(this.items,function(d){return this.isOverlapping(c,d.startTime,d.endTime,b,a)},this)},_initItems:function(c){this.set("items",c);return c},_refreshItemsRendering:function(){},_updateItems:function(c,b,a){var d=!0,e=null,c=this.itemToRenderItem(c,this.store);-1!=b?a!=b?(this.items.splice(b,1),this.setItemSelected&&this.isItemSelected(c)&&(this.setItemSelected(c,!1),
this.dispatchChange(c,this.get("selectedItem"),null,null))):(e=this.items[b],b=this.dateModule,d=0!=b.compare(c.startTime,e.startTime)||0!=b.compare(c.endTime,e.endTime),j.mixin(e,c)):-1!=a&&this.items.splice(a,0,c);d?this._refreshItemsRendering():this.updateRenderers(e)},_setStoreAttr:function(c){this.displayedItemsInvalidated=!0;var b;if(this._observeHandler)this._observeHandler.remove(),this._observeHandler=null;if(c){b=c.query(this.query);if(b.observe)this._observeHandler=b.observe(j.hitch(this,
this._updateItems),!0);b=b.map(j.hitch(this,function(a){return this.itemToRenderItem(a,c)}));b=d(b,j.hitch(this,this._initItems))}else b=this._initItems([]);this._set("store",c);return b}})})},"dojox/widget/_Invalidating":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Stateful"],function(l,m,k){return l("dojox.widget._Invalidating",k,{invalidatingProperties:null,invalidRendering:!1,postscript:function(j){this.inherited(arguments);if(this.invalidatingProperties)for(var e=this.invalidatingProperties,
h=0;h<e.length;h++)this.watch(e[h],m.hitch(this,this.invalidateRendering)),j&&e[h]in j&&this.invalidateRendering()},addInvalidatingProperties:function(j){this.invalidatingProperties=this.invalidatingProperties?this.invalidatingProperties.concat(j):j},invalidateRendering:function(){if(!this.invalidRendering)this.invalidRendering=!0,setTimeout(m.hitch(this,this.validateRendering),0)},validateRendering:function(){if(this.invalidRendering)this.refreshRendering(),this.invalidRendering=!1},refreshRendering:function(){}})})},
"dojox/widget/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/Stateful"],function(l,m,k,j){return l("dojox.widget.Selection",j,{constructor:function(){this.selectedItems=[]},selectionMode:"single",_setSelectionModeAttr:function(e){"none"!=e&&"single"!=e&&"multiple"!=e&&(e="single");if(e!=this.selectionMode)this.selectionMode=e,"none"==e?this.set("selectedItems",null):"single"==e&&this.set("selectedItem",this.selectedItem)},selectedItem:null,_setSelectedItemAttr:function(e){this.selectedItem!=
e&&(this._set("selectedItem",e),this.set("selectedItems",e?[e]:null))},selectedItems:null,_setSelectedItemsAttr:function(e){var h=this.selectedItems;this.selectedItems=e;this.selectedItem=null;null!=h&&0<h.length&&this.updateRenderers(h,!0);if(this.selectedItems&&0<this.selectedItems.length)this.selectedItem=this.selectedItems[0],this.updateRenderers(this.selectedItems,!0)},_getSelectedItemsAttr:function(){return null==this.selectedItems?[]:this.selectedItems.concat()},isItemSelected:function(e){return null==
this.selectedItems||0==this.selectedItems.length?!1:m.some(this.selectedItems,k.hitch(this,function(h){return this.getIdentity(h)==this.getIdentity(e)}))},getIdentity:function(){},setItemSelected:function(e,h){if(!("none"==this.selectionMode||null==e)){var d=this.get("selectedItems");this.get("selectedItems");if("single"==this.selectionMode)h?this.set("selectedItem",e):this.isItemSelected(e)&&this.set("selectedItems",null);else if(h)this.isItemSelected(e)||(null==d?d=[e]:d.unshift(e),this.set("selectedItems",
d));else{var c=m.filter(d,function(b){return b.id!=e.id});null==c||c.length==d.length||this.set("selectedItems",c)}}},selectFromEvent:function(e,h,d,c){if("none"==this.selectionMode)return!1;var b,a=this.get("selectedItem"),f=h?this.isItemSelected(h):!1;null==h?!e.ctrlKey&&null!=this.selectedItem&&(this.set("selectedItem",null),b=!0):"multiple"==this.selectionMode?(e.ctrlKey?this.setItemSelected(h,!f):this.set("selectedItem",h),b=!0):e.ctrlKey?(this.set("selectedItem",f?null:h),b=!0):f||(this.set("selectedItem",
h),b=!0);c&&b&&this.dispatchChange(a,this.get("selectedItem"),d,e);return b},dispatchChange:function(e,h,d,c){this.onChange({oldValue:e,newValue:h,renderer:d,triggerEvent:c})},onChange:function(){}})})},"dojox/calendar/time":function(){define(["dojo/_base/lang","dojo/date","dojo/cldr/supplemental","dojo/date/stamp"],function(l,m,k,j){var e={};e.newDate=function(h,d){var d=d||Date,c;if("number"==typeof h)return new d(e);if(h.getTime)return new d(h.getTime());if(h.toGregorian)return c=h.toGregorian(),
d!==Date&&(c=new d(c.getTime())),c;if("string"==typeof h)return c=j.fromISOString(h),null===c?c=new d(h):d!==Date&&(c=new d(c.getTime())),c};e.floorToDay=function(h,d,c){d||(h=e.newDate(h,c||Date));h.setHours(0,0,0,0);return h};e.floorToMonth=function(h,d,c){d||(h=e.newDate(h,c||Date));h.setDate(1);h.setHours(0,0,0,0);return h};e.floorToWeek=function(h,d,c,b,a){d=d||Date;c=c||m;b=void 0==b||0>b?k.getFirstDayOfWeek(a):b;a=h.getDay();return a==b?h:e.floorToDay(c.add(h,"day",a>b?-a+b:b-a),!0,d)};e.floor=
function(h,d,c,b,a){b=e.floorToDay(h,b,a);switch(d){case "week":return e.floorToWeek(b,firstDayOfWeek,dateModule,locale);case "minute":b.setHours(h.getHours());b.setMinutes(Math.floor(h.getMinutes()/c)*c);break;case "hour":b.setHours(Math.floor(h.getHours()/c)*c)}return b};e.isStartOfDay=function(e,d,c){c=c||m;return 0==c.compare(this.floorToDay(e,!1,d),e)};e.isToday=function(e,d){var c=new (d||Date);return e.getFullYear()==c.getFullYear()&&e.getMonth()==c.getMonth()&&e.getDate()==c.getDate()};return e})},
"dojox/calendar/ColumnView":function(){define("dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/sniff,dojo/_base/fx,dojo/dom,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/on,dojo/date,dojo/date/locale,dojo/query,dojox/html/metrics,./SimpleColumnView,dojo/text!./templates/ColumnView.html,./ColumnViewSecondarySheet".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u){return l("dojox.calendar.ColumnView",o,{templateString:s,baseClass:"dojoxCalendarColumnView",
secondarySheetClass:u,secondarySheetProps:null,headerPadding:3,buildRendering:function(){this.inherited(arguments);if(this.secondarySheetNode)this.secondarySheet=new this.secondarySheetClass(k.mixin({owner:this},this.secondarySheetProps),this.secondarySheetNode),this.secondarySheetNode=this.secondarySheet.domNode},destroy:function(a){this.secondarySheet&&this.secondarySheet.destroy(a);this.inherited(arguments)},_setVisibility:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet._setVisibility(a)},
invalidateLayout:function(){this._layoutRenderers(this.renderData);this.secondarySheet&&this.secondarySheet._layoutRenderers(this.secondarySheet.renderData)},onRowHeaderClick:function(){},resizeSecondarySheet:function(a){if(this.secondarySheetNode){var d=b.getMarginBox(this.header).h;c.set(this.secondarySheetNode,"height",a+"px");this.secondarySheet._resizeHandler(null,!0);a=a+d+this.headerPadding+"px";c.set(this.scrollContainer,"top",a);this.vScrollBar&&c.set(this.vScrollBar,"top",a)}},updateRenderers:function(a,
b){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.updateRenderers(a,b)},_setItemsAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("items",a)},_setStartDateAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("startDate",a)},_setColumnCountAttr:function(a){this.inherited(arguments);this.secondarySheet&&this.secondarySheet.set("columnCount",a)},_setHorizontalRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("horizontalRenderer",
a)},_getHorizontalRendererAttr:function(){if(this.secondarySheet)return this.secondarySheet.get("horizontalRenderer")},_setExpandRendererAttr:function(a){this.secondarySheet&&this.secondarySheet.set("expandRenderer",a)},_getExpandRendererAttr:function(){if(this.secondarySheet)return this.secondarySheet.get("expandRenderer")},_setTextDirAttr:function(a){this.secondarySheet.set("textDir",a);this._set("textDir",a)},_defaultItemToRendererKindFunc:function(a){return a.allDay?null:"vertical"},getSecondarySheet:function(){return this.secondarySheet},
_onGridTouchStart:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"touch")},_onGridMouseDown:function(a){this.inherited(arguments);this._doEndItemEditing(this.secondarySheet,"mouse")},_configureScrollBar:function(a){this.inherited(arguments);if(this.secondarySheetNode){var b=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition;c.set(this.secondarySheetNode,b?"right":"left",a.scrollbarWidth+"px");c.set(this.secondarySheetNode,b?"left":"right","0")}},_refreshItemsRendering:function(){this.inherited(arguments);
if(this.secondarySheet){var a=this.secondarySheet.renderData;this.secondarySheet._computeVisibleItems(a);this.secondarySheet._layoutRenderers(a)}},_layoutRenderers:function(a){if(!this.secondarySheet._domReady)this.secondarySheet._domReady=!0,this.secondarySheet._layoutRenderers(this.secondarySheet.renderData);this.inherited(arguments)},invalidateRendering:function(){this.secondarySheet&&this.secondarySheet.invalidateRendering();this.inherited(arguments)}})})},"dojox/html/metrics":function(){define("dojo/_base/kernel,dojo/_base/lang,dojo/_base/sniff,dojo/ready,dojo/_base/unload,dojo/_base/window,dojo/dom-geometry".split(","),
function(l,m,k,j,e,h,d){var c=m.getObject("dojox.html.metrics",!0),b=m.getObject("dojox");c.getFontMeasurements=function(){var a={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(k("ie"))h.doc.documentElement.style.fontSize="100%";var b=h.doc.createElement("div"),c=b.style;c.position="absolute";c.left="-100px";c.top="0";c.width="30px";c.height="1000em";c.borderWidth="0";c.margin="0";c.padding="0";c.outline="0";c.lineHeight="1";
c.overflow="hidden";h.body().appendChild(b);for(var d in a)c.fontSize=d,a[d]=16*Math.round(12*b.offsetHeight/16)/12/1E3;h.body().removeChild(b);return a};var a=null;c.getCachedFontMeasurements=function(b){if(b||!a)a=c.getFontMeasurements();return a};var f=null,n={};c.getTextBox=function(a,b,c){var e,j;if(f)e=f;else{e=f=h.doc.createElement("div");var r=h.doc.createElement("div");r.appendChild(e);j=r.style;j.overflow="scroll";j.position="absolute";j.left="0px";j.top="-10000px";j.width="1px";j.height=
"1px";j.visibility="hidden";j.borderWidth="0";j.margin="0";j.padding="0";j.outline="0";h.body().appendChild(r)}e.className="";j=e.style;j.borderWidth="0";j.margin="0";j.padding="0";j.outline="0";if(1<arguments.length&&b)for(var t in b)t in n||(j[t]=b[t]);if(2<arguments.length&&c)e.className=c;e.innerHTML=a;j=d.position(e);j.w=e.parentNode.scrollWidth;return j};var r=16,t=16;c.getScrollbar=function(){return{w:r,h:t}};c._fontResizeNode=null;c.initOnFontResize=function(){var a=c._fontResizeNode=h.doc.createElement("iframe"),
d=a.style;d.position="absolute";d.width="5em";d.height="10em";d.top="-10000px";d.display="none";k("ie")?a.onreadystatechange=function(){if("complete"==a.contentWindow.document.readyState)a.onresize=a.contentWindow.parent[b._scopeName].html.metrics._fontresize}:a.onload=function(){a.contentWindow.onresize=a.contentWindow.parent[b._scopeName].html.metrics._fontresize};a.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");
h.body().appendChild(a);c.initOnFontResize=function(){}};c.onFontResize=function(){};c._fontresize=function(){c.onFontResize()};e.addOnUnload(function(){var a=c._fontResizeNode;if(a){if(k("ie")&&a.onresize)a.onresize=null;else if(a.contentWindow&&a.contentWindow.onresize)a.contentWindow.onresize=null;c._fontResizeNode=null}});j(function(){try{var a=h.doc.createElement("div");a.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";h.body().appendChild(a);
r=a.offsetWidth-a.clientWidth;t=a.offsetHeight-a.clientHeight;h.body().removeChild(a);delete a}catch(b){}"fontSizeWatch"in l.config&&l.config.fontSizeWatch&&c.initOnFontResize()});return c})},"dojox/calendar/SimpleColumnView":function(){define("./ViewBase,dijit/_TemplatedMixin,./_VerticalScrollBarBase,dojo/text!./templates/SimpleColumnView.html,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/_base/fx,dojo/_base/html,dojo/on,dojo/dom,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/mouse,dojo/query,dojox/html/metrics".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){return e("dojox.calendar.SimpleColumnView",[l,m],{baseClass:"dojoxCalendarSimpleColumnView",templateString:j,viewKind:"columns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:7,minHours:8,maxHours:18,hourSize:100,timeSlotDuration:15,verticalRenderer:null,percentOverlap:70,horizontalGap:4,_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties="columnCount,startDate,minHours,maxHours,hourSize,verticalRenderer,rowHeaderTimePattern,columnHeaderDatePattern,timeSlotDuration,percentOverlap,horizontalGap,scrollBarRTLPosition,itemToRendererKindFunc,layoutPriorityFunction,formatItemTimeFunc,textDir,items".split(",");
this._columnHeaderHandlers=[]},destroy:function(a){this._cleanupColumnHeader();this.scrollBar&&this.scrollBar.destroy(a);this.inherited(arguments)},_scrollBar_onScroll:function(a){this._setScrollPosition(a)},buildRendering:function(){this.inherited(arguments);if(this.vScrollBar)this.scrollBar=new k({content:this.vScrollBarContent},this.vScrollBar),this.scrollBar.on("scroll",d.hitch(this,this._scrollBar_onScroll)),this._viewHandles.push(n(this.scrollContainer,u.wheel,dojo.hitch(this,this._mouseWheelScrollHander)))},
postscript:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_setVerticalRendererAttr:function(a){this._destroyRenderersByKind("vertical");this._set("verticalRenderer",a)},_createRenderData:function(){var a={};a.minHours=this.get("minHours");a.maxHours=this.get("maxHours");a.hourSize=this.get("hourSize");a.hourCount=a.maxHours-a.minHours;a.slotDuration=this.get("timeSlotDuration");a.slotSize=Math.ceil(a.hourSize/(60/a.slotDuration));a.hourSize=
a.slotSize*(60/a.slotDuration);a.sheetHeight=a.hourSize*a.hourCount;a.scrollbarWidth=v.getScrollbar().w+1;a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=this.get("columnCount");var b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.columnCount;c++)a.dates.push(b),b=a.dateModule.add(b,"day",1),b=this.floorToDay(b,!1,a);a.startTime=new a.dateClassObj(a.dates[0]);
a.startTime.setHours(a.minHours);a.endTime=new a.dateClassObj(a.dates[a.columnCount-1]);a.endTime.setHours(a.maxHours);if(this.displayedItemsInvalidated)this.displayedItemsInvalidated=!1,this._computeVisibleItems(a),this._isEditing&&this._endItemEditing(null,!1);else if(this.renderData)a.items=this.renderData.items;return a},_validateProperties:function(){this.inherited(arguments);var a=this.minHours;if(0>a||24<a||isNaN(a))this.minHours=0;a=this.maxHours;if(0>a||24<a||isNaN(a))this.minHours=24;if(this.minHours>
this.maxHours){var b=this.maxHours;this.maxHours=this.minHours;this.maxHours=b}if(1>a-this.minHours)this.minHours=0,this.maxHours=24;if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;if(0>this.percentOverlap||100<this.percentOverlap||isNaN(this.percentOverlap))this.percentOverlap=70;if(5>this.hourSize||isNaN(this.hourSize))this.hourSize=10;a=this.timeSlotDuration;1>a||60<a||isNaN(a)},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=
!0;this._set("columnCount",a)},__fixEvt:function(a){a.sheet="primary";a.source=this;return a},_formatRowHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"time",timePattern:this.rowHeaderTimePattern})},_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.columnHeaderDatePattern,formatLength:"medium"})},startTimeOfDay:null,scrollBarRTLPosition:"left",_getStartTimeOfDay:function(){var a=(this.get("maxHours")-
this.get("minHours"))*this._getScrollPosition()/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},_getEndTimeOfDay:function(){var a=(this.get("maxHours")-this.get("minHours"))*(this._getScrollPosition()+this.scrollContainer.offsetHeight)/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(a),minutes:60*(a-Math.floor(a))}},_setStartTimeOfDayAttr:function(a){this._setStartTimeOfDay(a.hours,a.minutes,a.duration,a.easing)},
_getStartTimeOfDayAttr:function(){return this._getStartTimeOfDay()},_setStartTimeOfDay:function(a,b,c,d){var f=this.renderData,a=a||f.minHours,b=b||0,c=c||0;0>b?b=0:59<b&&(b=59);0>a?a=0:24<a&&(a=24);var a=60*a+b,b=60*f.minHours,e=60*f.maxHours;a<b?a=b:a>e&&(a=e);a=(a-b)*f.sheetHeight/(e-b);a=Math.min(f.sheetHeight-this.scrollContainer.offsetHeight,a);this._scrollToPosition(a,c,d)},_scrollToPosition:function(b,c,f){if(c){this._scrollAnimation&&this._scrollAnimation.stop();var e=this._getScrollPosition(),
c=Math.abs((b-e)*c/this.renderData.sheetHeight);this._scrollAnimation=new a.Animation({curve:[e,b],duration:c,easing:f,onAnimate:d.hitch(this,function(a){this._setScrollImpl(a)})});this._scrollAnimation.play()}else this._setScrollImpl(b)},_setScrollImpl:function(a){this._setScrollPosition(a);this.scrollBar&&this.scrollBar.set("value",a)},ensureVisibility:function(a,b,c,d,f){d=void 0==d?this.renderData.slotDuration:d;if(this.scrollable&&this.autoScroll){var a=60*a.getHours()+a.getMinutes()-d,b=60*
b.getHours()+b.getMinutes()+d,d=this._getStartTimeOfDay(),e=this._getEndTimeOfDay(),d=60*d.hours+d.minutes,e=60*e.hours+e.minutes,h=!1,o=null;switch(c){case "start":h=a>=d&&a<=e;o=a;break;case "end":h=b>=d&&b<=e;o=b-(e-d);break;case "both":h=a>=d&&b<=e,o=a}h||this._setStartTimeOfDay(Math.floor(o/60),o%60,f)}},scrollView:function(a){var b=this._getStartTimeOfDay(),b=60*b.hours+b.minutes+a*this.timeSlotDuration;this._setStartTimeOfDay(Math.floor(b/60),b%60)},_mouseWheelScrollHander:function(a){this.scrollView(0<
a.wheelDelta?-1:1)},refreshRendering:function(){if(this._initialized){this._validateProperties();var a=this.renderData,b=this._createRenderData();this.renderData=b;this._createRendering(b,a);this._layoutRenderers(b)}},_createRendering:function(a,b){q.set(this.sheetContainer,"height",a.sheetHeight+"px");this._configureScrollBar(a);this._buildColumnHeader(a,b);this._buildRowHeader(a,b);this._buildGrid(a,b);this._buildItemContainer(a,b)},_configureScrollBar:function(a){b("ie")&&this.scrollBar&&q.set(this.scrollBar.domNode,
"width",a.scrollbarWidth+1+"px");var c=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition,d=c?"right":"left",f=c?"left":"right";this.scrollBar&&(this.scrollBar.set("maximum",a.sheetHeight),q.set(this.scrollBar.domNode,d,0),q.set(this.scrollBar.domNode,c?"left":"right","auto"));q.set(this.scrollContainer,d,a.scrollbarWidth+"px");q.set(this.scrollContainer,f,"0");q.set(this.header,d,a.scrollbarWidth+"px");q.set(this.header,f,"0");this.buttonContainer&&null!=this.owner&&this.owner.currentView==
this&&(q.set(this.buttonContainer,d,a.scrollbarWidth+"px"),q.set(this.buttonContainer,f,"0"))},_columnHeaderClick:function(a){h.stop(a);var b=w("td",this.columnHeaderTable).indexOf(a.currentTarget);this._onColumnHeaderClick({index:b,date:this.renderData.dates[b],triggerEvent:a})},_buildColumnHeader:function(a,c){var e=this.columnHeaderTable;if(e){var o=a.columnCount-(c?c.columnCount:0);if(8==b("ie"))if(null==this._colTableSave)this._colTableSave=d.clone(e);else if(0>o)this._cleanupColumnHeader(),
this.columnHeader.removeChild(e),s.destroy(e),this.columnHeaderTable=e=d.clone(this._colTableSave),this.columnHeader.appendChild(e),o=a.columnCount;var j=w("tbody",e),q=w("tr",e),r,j=1==j.length?j[0]:f.create("tbody",null,e),q=1==q.length?q[0]:s.create("tr",null,j);if(0<o)for(j=0;j<o;j++){r=s.create("td",null,q);var k=[];k.push(n(r,"click",d.hitch(this,this._columnHeaderClick)));b("touch")?(k.push(n(r,"touchstart",function(a){h.stop(a);t.add(a.currentTarget,"Active")})),k.push(n(r,"touchend",function(a){h.stop(a);
t.remove(a.currentTarget,"Active")}))):(k.push(n(r,"mousedown",function(a){h.stop(a);t.add(a.currentTarget,"Active")})),k.push(n(r,"mouseup",function(a){h.stop(a);t.remove(a.currentTarget,"Active")})),k.push(n(r,"mouseover",function(a){h.stop(a);t.add(a.currentTarget,"Hover")})),k.push(n(r,"mouseout",function(a){h.stop(a);t.remove(a.currentTarget,"Hover")})));this._columnHeaderHandlers.push(k)}else{o=-o;for(j=0;j<o;j++){r=q.lastChild;q.removeChild(r);s.destroy(r);for(r=this._columnHeaderHandlers.pop();0<
r.length;)r.pop().remove()}}w("td",e).forEach(function(b,c){b.className="";0==c?t.add(b,"first-child"):c==this.renderData.columnCount-1&&t.add(b,"last-child");var d=a.dates[c];this._setText(b,this._formatColumnHeaderLabel(d));this.styleColumnHeaderCell(b,d,a)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,a.dateLocaleModule.format(a.dates[0],{selector:"date",datePattern:"yyyy"}))}},_cleanupColumnHeader:function(){for(;0<this._columnHeaderHandlers.length;)for(var a=
this._columnHeaderHandlers.pop();0<a.length;)a.pop().remove()},styleColumnHeaderCell:function(a,b){if(this.isToday(b))return t.add(a,"dojoxCalendarToday");if(this.isWeekEnd(b))return t.add(a,"dojoxCalendarWeekend")},_buildRowHeader:function(a,c){var d=this.rowHeaderTable;if(d){q.set(d,"height",a.sheetHeight+"px");var f=w("tbody",d),e,f=1==f.length?f[0]:s.create("tbody",null,d),h=a.hourCount-(c?c.hourCount:0);if(0<h)for(var o=0;o<h;o++)e=s.create("tr",null,f),s.create("td",null,e);else{h=-h;for(o=
0;o<h;o++)f.removeChild(f.lastChild)}var n=new Date(2E3,0,1,0,0,0);w("tr",d).forEach(function(c,d){var f=w("td",c)[0];f.className="";var e=a.hourSize;7==b("ie")&&(e-=2);q.set(c,"height",e+"px");n.setHours(this.renderData.minHours+d);this.styleRowHeaderCell(f,n.getHours(),a);this._setText(f,this._formatRowHeaderLabel(n))},this)}},styleRowHeaderCell:function(){},_buildGrid:function(a,c){var f=this.gridTable;if(f){q.set(f,"height",a.sheetHeight+"px");var e=Math.floor(60/a.slotDuration)*a.hourCount,h=
e-(c?Math.floor(60/c.slotDuration)*c.hourCount:0),o=0<h,n=a.columnCount-(c?c.columnCount:0);if(8==b("ie"))if(null==this._gridTableSave)this._gridTableSave=d.clone(f);else if(0>n)this.grid.removeChild(f),s.destroy(f),this.gridTable=f=d.clone(this._gridTableSave),this.grid.appendChild(f),n=a.columnCount,h=e,o=!0;var j=w("tbody",f),j=1==j.length?j[0]:s.create("tbody",null,f);if(o)for(var r=0;r<h;r++)s.create("tr",null,j);else{h=-h;for(r=0;r<h;r++)j.removeChild(j.lastChild)}var k=Math.floor(60/a.slotDuration)*
a.hourCount-h,l=o||0<n,n=l?n:-n;w("tr",f).forEach(function(b,c){if(l)for(var d=c>=k?a.columnCount:n,c=0;c<d;c++)s.create("td",null,b);else for(c=0;c<n;c++)b.removeChild(b.lastChild)});w("tr",f).forEach(function(b,c){q.set(b,"height",a.slotSize+"px");0==c?t.add(b,"first-child"):c==e-1&&t.add(b,"last-child");var d=c*this.renderData.slotDuration%60;w("td",b).forEach(function(b,c){b.className="";0==c?t.add(b,"first-child"):c==this.renderData.columnCount-1&&t.add(b,"last-child");this.styleGridColumn(b,
a.dates[c],a);switch(d){case 0:t.add(b,"hour");break;case 30:t.add(b,"halfhour");break;case 15:case 45:t.add(b,"quarterhour")}},this)},this)}},styleGridColumn:function(a,b){if(this.isToday(b))return t.add(a,"dojoxCalendarToday");if(this.isWeekEnd(b))return t.add(a,"dojoxCalendarWeekend")},_buildItemContainer:function(a,c){var f=this.itemContainerTable;if(f){var e=[];q.set(f,"height",a.sheetHeight+"px");var h=a.columnCount-(c?c.columnCount:0);if(8==b("ie"))if(null==this._itemTableSave)this._itemTableSave=
d.clone(f);else if(0>h)this.itemContainer.removeChild(f),this._recycleItemRenderers(!0),s.destroy(f),this.itemContainerTable=f=d.clone(this._itemTableSave),this.itemContainer.appendChild(f),h=a.columnCount;var o=w("tbody",f),n=w("tr",f),o=1==o.length?o[0]:s.create("tbody",null,f),n=1==n.length?n[0]:s.create("tr",null,o);if(0<h)for(var j=0;j<h;j++)o=s.create("td",null,n),s.create("div",{className:"dojoxCalendarContainerColumn"},o);else{h=-h;for(j=0;j<h;j++)n.removeChild(n.lastChild)}w("td>div",f).forEach(function(b){q.set(b,
{height:a.sheetHeight+"px"});e.push(b)},this);a.cells=e}},_overlapLayoutPass2:function(a){var b,c,d,f;d=a[a.length-1];for(c=0;c<d.length;c++)d[c].extent=1;for(b=0;b<a.length-1;b++){d=a[b];for(c=0;c<d.length;c++)if(f=d[c],-1==f.extent){f.extent=1;for(var e=0,h=!1,o=b+1;o<a.length&&!h;o++){for(var n=a[o],j=0;j<n.length&&!h;j++){var s=n[j];f.start<s.end&&s.start<f.end&&(h=!0)}h||e++}f.extent+=e}}},_defaultItemToRendererKindFunc:function(){return"vertical"},_layoutInterval:function(a,b,c,d,f){var e=[];
a.colW=this.itemContainer.offsetWidth/a.columnCount;for(var h=0;h<f.length;h++){var o=f[h];"vertical"==this._itemToRendererKind(o)&&e.push(o)}0<e.length&&this._layoutVerticalItems(a,b,c,d,e)},_layoutVerticalItems:function(a,b,c,f,e){if(null!=this.verticalRenderer){for(var b=a.cells[b],h=[],o=0;o<e.length;o++){var n=e[o],j=this.computeRangeOverlap(a,n.startTime,n.endTime,c,f),r=this.computeProjectionOnDate(a,c,j[0],a.sheetHeight),t=this.computeProjectionOnDate(a,c,j[1],a.sheetHeight);t>r&&(n=d.mixin({start:r,
end:t,range:j,item:n},n),h.push(n))}c=this.computeOverlapping(h,this._overlapLayoutPass2).numLanes;f=this.percentOverlap/100;for(o=0;o<h.length;o++){n=h[o];r=n.lane;j=n.extent;0==f?(e=1==c?a.colW:(a.colW-(c-1)*this.horizontalGap)/c,r*=e+this.horizontalGap,e=1==j?e:e*j+(j-1)*this.horizontalGap,e=100*e/a.colW,r=100*r/a.colW):(e=1==c?100:100/(c-(c-1)*f),r*=e-f*e,e=1==j?e:e*(j-(j-1)*f));j=this._createRenderer(n,"vertical",this.verticalRenderer,"dojoxCalendarVertical");q.set(j.container,{top:n.start+"px",
left:r+"%",width:e+"%",height:n.end-n.start+1+"px"});var r=this.isItemBeingEdited(n),t=this.isItemSelected(n),k=this.isItemHovered(n),l=this.isItemFocused(n),u=j.renderer;u.set("hovered",k);u.set("selected",t);u.set("edited",r);u.set("focused",this.showFocus?l:!1);u.set("moveEnabled",this.isItemMoveEnabled(n,"vertical"));u.set("resizeEnabled",this.isItemResizeEnabled(n,"vertical"));this.applyRendererZIndex(n,j,k,t,r,l);u.updateRendering&&u.updateRendering(e,n.end-n.start+1);s.place(j.container,b);
q.set(j.container,"display","block")}}},_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return this.isLeftToRight()?c:-c},getTime:function(a,b,c,d){null!=a&&(c=o.position(this.itemContainer,!0),a.touches?(d=void 0==d?0:d,b=a.touches[d].pageX-c.x,c=a.touches[d].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));a=o.getContentBox(this.itemContainer);this.isLeftToRight()||(b=a.w-b);0>b?b=0:b>a.w&&(b=a.w-1);0>c?c=
0:c>a.h&&(c=a.h-1);b=Math.floor(b/(o.getMarginBox(this.itemContainer).w/this.renderData.columnCount));c=this.getTimeOfDay(c,this.renderData);a=null;b<this.renderData.dates.length&&(a=this.newDate(this.renderData.dates[b]),a=this.floorToDay(a,!0),a.setHours(c.hours),a.setMinutes(c.minutes));return a},_onGridMouseUp:function(a){this.inherited(arguments);if(this._gridMouseDown)this._gridMouseDown=!1,this._onGridClick({date:this.getTime(a),triggerEvent:a})},_onGridTouchStart:function(a){this.inherited(arguments);
var b=this._gridProps;b.moved=!1;b.start=a.touches[0].screenY;b.scrollTop=this._getScrollPosition()},_onGridTouchMove:function(a){this.inherited(arguments);if(1<a.touches.length&&!this._isEditing)h.stop(a);else if(this._gridProps&&!this._isEditing){var b=a.touches[0].screenX,c=a.touches[0].screenY,d=this._edProps;if(!d||d&&(25<Math.abs(b-d.start.x)||25<Math.abs(c-d.start.y)))this._gridProps.moved=!0,b=this._gridProps.scrollTop-(a.touches[0].screenY-this._gridProps.start),c=this.itemContainer.offsetHeight-
this.scrollContainer.offsetHeight,0>b?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(0),this._gridProps.scrollTop=0):b>c?(this._gridProps.start=a.touches[0].screenY,this._setScrollImpl(c),this._gridProps.scrollTop=c):this._setScrollImpl(b)}},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;if(b){if(!this._isEditing&&!b.moved&&(!b.fromItem&&!b.editingOnStart&&this.selectFromEvent(a,null,null,!0),!b.fromItem))this._pendingDoubleTap&&this._pendingDoubleTap.grid?
(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(d.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)});this._gridProps=null}},_onColumnHeaderClick:function(a){this._dispatchCalendarEvt(a,"onColumnHeaderClick")},
onColumnHeaderClick:function(){},getTimeOfDay:function(a,b){var c=60*b.minHours,c=c+a*(60*b.maxHours-c)/b.sheetHeight;return{hours:Math.floor(c/60),minutes:Math.floor(c%60)}},_isItemInView:function(a){var b=this.inherited(arguments);if(b){var c=this.renderData;if(c.dateModule.difference(a.startTime,a.endTime,"millisecond")>36E5*(24-c.maxHours+c.minHours))return!0;var d=60*a.startTime.getHours()+a.startTime.getMinutes(),f=60*a.endTime.getHours()+a.endTime.getMinutes(),e=60*c.minHours,c=60*c.maxHours;
if(0<d&&d<e||d>c&&1440>=d||0<f&&f<e||f>c&&1440>=f)return!1}return b},_ensureItemInView:function(a){var b,c=a.startTime,d=a.endTime,f=this.renderData,e=f.dateModule,h=Math.abs(e.difference(a.startTime,a.endTime,"millisecond"));if(h>36E5*(24-f.maxHours+f.minHours))return!1;var c=60*c.getHours()+c.getMinutes(),d=60*d.getHours()+d.getMinutes(),o=60*f.minHours,n=60*f.maxHours;if(0<c&&c<o)this.floorToDay(a.startTime,!0,f),a.startTime.setHours(f.minHours),a.endTime=e.add(a.startTime,"millisecond",h),b=!0;
else if(c>n&&1440>=c)this.floorToDay(a.startTime,!0,f),a.startTime=e.add(a.startTime,"day",1),a.startTime.setHours(f.minHours),a.endTime=e.add(a.startTime,"millisecond",h),b=!0;if(0<d&&d<o)this.floorToDay(a.endTime,!0,f),a.endTime=e.add(a.endTime,"day",-1),a.endTime.setHours(f.maxHours),a.startTime=e.add(a.endTime,"millisecond",-h),b=!0;else if(d>n&&1440>=d)this.floorToDay(a.endTime,!0,f),a.endTime.setHours(f.maxHours),a.startTime=e.add(a.endTime,"millisecond",-h),b=!0;return b=b||this.inherited(arguments)},
_onScrollTimer_tick:function(){this._scrollToPosition(this._getScrollPosition()+this._scrollProps.scrollStep)},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!0})})},"dojox/calendar/ViewBase":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/window,dojo/_base/event,dojo/_base/html,dojo/_base/sniff,dojo/query,dojo/dom,dojo/dom-style,dojo/dom-construct,dojo/dom-geometry,dojo/on,dojo/date,dojo/date/locale,dijit/_WidgetBase,dojox/widget/_Invalidating,dojox/widget/Selection,dojox/calendar/time,./StoreMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){return l("dojox.calendar.ViewBase",[o,v,s,u],{datePackage:t,_calendar:"gregorian",viewKind:null,_layoutStep:1,_layoutUnit:"day",resizeCursor:"n-resize",formatItemTimeFunc:null,_getFormatItemTimeFuncAttr:function(){return null!=this.owner?this.owner.get("formatItemTimeFunc"):this.formatItemTimeFunc},_viewHandles:null,doubleTapDelay:300,constructor:function(a){a=a||{};this._calendar=a.datePackage?a.datePackage.substr(a.datePackage.lastIndexOf(".")+1):
this._calendar;this.dateModule=a.datePackage?m.getObject(a.datePackage,!1):t;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=a.datePackage?m.getObject(a.datePackage+".locale",!1):q;this.rendererPool=[];this.rendererList=[];this.itemToRenderer={};this._viewHandles=[]},destroy:function(a){for(;0<this.rendererList.length;)this._destroyRenderer(this.rendererList.pop());for(kind in this._rendererPool){var b=this._rendererPool[kind];if(b)for(;0<b.length;)this._destroyRenderer(b.pop())}for(;0<
this._viewHandles.length;)this._viewHandles.pop().remove();this.inherited(arguments)},_createRenderData:function(){},_validateProperties:function(){},_setText:function(a,b,c){if(null!=b)if(!c&&a.hasChildNodes())a.childNodes[0].childNodes[0].nodeValue=b;else{for(;a.hasChildNodes();)a.removeChild(a.lastChild);var d=j.doc.createElement("span");this.applyTextDir(d,b);c?d.innerHTML=b:d.appendChild(j.doc.createTextNode(b));a.appendChild(d)}},isAscendantHasClass:function(a,b,c){for(;a!=b&&a!=document;){if(dojo.hasClass(a,
c))return!0;a=a.parentNode}return!1},isWeekEnd:function(a){return q.isWeekend(a)},getWeekNumberLabel:function(a){a.toGregorian&&(a=a.toGregorian());return q.format(a,{selector:"date",datePattern:"w"})},floorToDay:function(a,b){return w.floorToDay(a,b,this.dateClassObj)},floorToMonth:function(a,b){return w.floorToMonth(a,b,this.dateClassObj)},floorDate:function(a,b,c,d){return w.floor(a,b,c,d,this.dateClassObj)},isToday:function(a){return w.isToday(a,this.dateClassObj)},isStartOfDay:function(a){return w.isStartOfDay(a,
this.dateClassObj,this.dateModule)},isOverlapping:function(a,b,c,d,f,e){if(null==b||null==d||null==c||null==f)return!1;a=a.dateModule;if(e){if(1==a.compare(b,f)||1==a.compare(d,c))return!1}else if(-1!=a.compare(b,f)||-1!=a.compare(d,c))return!1;return!0},computeRangeOverlap:function(a,b,c,d,f,e){var h=a.dateModule;if(null==b||null==d||null==c||null==f)return null;var o=h.compare(b,f),n=h.compare(d,c);if(e){if(0==o||1==o||0==n||1==n)return null}else if(1==o||1==n)return null;return[this.newDate(0<
h.compare(b,d)?b:d,a),this.newDate(0<h.compare(c,f)?f:c,a)]},isSameDay:function(a,b){return null==a||null==b?!1:a.getFullYear()==b.getFullYear()&&a.getMonth()==b.getMonth()&&a.getDate()==b.getDate()},computeProjectionOnDate:function(a,b,c,d){var f=a.dateModule;if(0>=d||-1==f.compare(c,b))return 0;var e=this.floorToDay(b,!1,a);if(c.getDate()!=e.getDate())if(c.getMonth()==e.getMonth()){if(c.getDate()<e.getDate())return 0;if(c.getDate()>e.getDate())return d}else if(c.getFullYear()==e.getFullYear()){if(c.getMonth()<
e.getMonth())return 0;if(c.getMonth()>e.getMonth())return d}else{if(c.getFullYear()<e.getFullYear())return 0;if(c.getFullYear()>e.getFullYear())return d}if(this.isSameDay(b,c)){e=m.clone(b);f=0;null!=a.minHours&&0!=a.minHours&&(e.setHours(a.minHours),f=3600*e.getHours()+60*e.getMinutes()+e.getSeconds());e=m.clone(b);null==a.maxHours||24==a.maxHours?a=86400:(e.setHours(a.maxHours),a=3600*e.getHours()+60*e.getMinutes()+e.getSeconds());b=3600*c.getHours()+60*c.getMinutes()+c.getSeconds()-f;if(0>b)return 0;
if(b>a)return d;d=d*b/(a-f)}else{if(c.getDate()<b.getDate()&&c.getMonth()==b.getMonth())return 0;c=this.floorToDay(c);e=a.dateModule.add(b,"day",1);e=this.floorToDay(e,!1,a);d=1==f.compare(c,b)&&0==f.compare(c,e)||1==f.compare(c,e)?d:0}return d},getTime:function(){return null},newDate:function(a){return w.newDate(a,this.dateClassObj)},_isItemInView:function(a){var b=this.renderData,c=b.dateModule;return-1==c.compare(a.startTime,b.startTime)||1==c.compare(a.endTime,b.endTime)?!1:!0},_ensureItemInView:function(a){var b=
this.renderData,c=b.dateModule,d=Math.abs(c.difference(a.startTime,a.endTime,"millisecond")),f=!1;if(-1==c.compare(a.startTime,b.startTime))a.startTime=b.startTime,a.endTime=c.add(a.startTime,"millisecond",d),f=!0;else if(1==c.compare(a.endTime,b.endTime))a.endTime=b.endTime,a.startTime=c.add(a.endTime,"millisecond",-d),f=!0;return f},scrollable:!0,autoScroll:!0,_autoScroll:function(){return!1},scrollMethod:"auto",_setScrollMethodAttr:function(b){if(this.scrollMethod!=b){this.scrollMethod=b;if(void 0!==
this._domScroll)this._domScroll?a.set(this.sheetContainer,this._cssPrefix+"transform","translateY(0px)"):this.scrollContainer.scrollTop=0;delete this._domScroll;b=this._getScrollPosition();delete this._scrollPos;this._setScrollPosition(b)}},_startAutoScroll:function(a){var b=this._scrollProps;if(!b)b=this._scrollProps={};b.scrollStep=a;if(!b.isScrolling)b.isScrolling=!0,b.scrollTimer=setInterval(m.hitch(this,this._onScrollTimer_tick),10)},_stopAutoScroll:function(){var a=this._scrollProps;if(a&&a.isScrolling)clearInterval(a.scrollTimer),
a.scrollTimer=null;this._scrollProps=null},_onScrollTimer_tick:function(){},_scrollPos:0,getCSSPrefix:function(){if(d("ie"))return"-ms-";if(d("webkit"))return"-webkit-";if(d("mozilla"))return"-moz-";if(d("opera"))return"-o-"},_setScrollPosition:function(b){if(this._scrollPos!=b){if(void 0===this._domScroll){var c=this.get("scrollMethod");this._domScroll="auto"===c?!d("ios")&&!d("android")&&!d("webkit"):"dom"===c}c=n.getMarginBox(this.scrollContainer);c=n.getMarginBox(this.sheetContainer).h-c.h;0>
b?b=0:b>c&&(b=c);this._scrollPos=b;if(this._domScroll)this.scrollContainer.scrollTop=b;else{if(!this._cssPrefix)this._cssPrefix=this.getCSSPrefix();a.set(this.sheetContainer,this._cssPrefix+"transform","translateY(-"+b+"px)")}}},_getScrollPosition:function(){return this._scrollPos},scrollView:function(){},ensureVisibility:function(){},_getStoreAttr:function(){return this.owner?this.owner.get("store"):this.store},_setItemsAttr:function(a){this._set("items",a);this.displayedItemsInvalidated=!0},_refreshItemsRendering:function(){var a=
this.renderData;this._computeVisibleItems(a);this._layoutRenderers(a)},invalidateLayout:function(){this._layoutRenderers(this.renderData)},resize:function(){},computeOverlapping:function(a,b){if(0==a.length)return{numLanes:0,addedPassRes:[1]};for(var c=[],d=0;d<a.length;d++)this._layoutPass1(a[d],c);d=null;b&&(d=m.hitch(this,b)(c));return{numLanes:c.length,addedPassRes:d}},_layoutPass1:function(a,b){for(var c=!0,d=0;d<b.length;d++){for(var f=b[d],c=!1,e=0;e<f.length&&!c;e++)if(f[e].start<a.end&&a.start<
f[e].end)c=!0,f[e].extent=1;if(!c){a.lane=d;a.extent=-1;f.push(a);return}}b.push([a]);a.lane=b.length-1;a.extent=-1},_layoutInterval:function(){},layoutPriorityFunction:null,_sortItemsFunction:function(a,b){var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_layoutRenderers:function(a){if(a.items){this._recycleItemRenderers();for(var b=a.dateModule,c=this.newDate(a.startTime),d=m.clone(c),f=a.items.concat(),e=[],h,o=0;-1==b.compare(c,
a.endTime)&&0<f.length;){var c=b.add(c,this._layoutUnit,this._layoutStep),c=this.floorToDay(c,!0,a),n=m.clone(c);a.minHours&&d.setHours(a.minHours);a.maxHours&&24!=a.maxHours&&(n=b.add(c,"day",-1),n=this.floorToDay(n,!0,a),n.setHours(a.maxHours));h=k.filter(f,function(c){var f=this.isOverlapping(a,c.startTime,c.endTime,d,n);f?1==b.compare(c.endTime,n)&&e.push(c):e.push(c);return f},this);f=e;e=[];0<h.length&&(h.sort(m.hitch(this,this.layoutPriorityFunction?this.layoutPriorityFunction:this._sortItemsFunction)),
this._layoutInterval(a,o,d,n,h));d=m.clone(c);o++}this._onRenderersLayoutDone(this)}},_recycleItemRenderers:function(a){for(;0<this.rendererList.length;)this._recycleRenderer(this.rendererList.pop(),a);this.itemToRenderer={}},rendererPool:null,rendererList:null,itemToRenderer:null,getRenderers:function(a){if(null==a||null==a.id)return null;a=this.itemToRenderer[a.id];return null==a?null:a.concat()},_rendererHandles:{},itemToRendererKindFunc:null,_itemToRendererKind:function(a){return this.itemToRendererKindFunc?
this.itemToRendererKindFunc(a):this._defaultItemToRendererKindFunc(a)},_defaultItemToRendererKindFunc:function(){return null},_createRenderer:function(a,b,c,d){if(null!=a&&null!=b&&null!=c){var e,h=this.rendererPool[b];null!=h&&(e=h.shift());null==e?(c=new c,e=f.create("div"),e.className="dojoxCalendarEventContainer "+d,e.appendChild(c.domNode),e={renderer:c,container:c.domNode,kind:b},this._onRendererCreated(e)):(c=e.renderer,this._onRendererReused(c));c.owner=this;c.set("rendererKind",b);c.set("item",
a);b=this.itemToRenderer[a.id];null==b&&(this.itemToRenderer[a.id]=b=[]);b.push(e);this.rendererList.push(e);return e}return null},_onRendererCreated:function(a){this.onRendererCreated(a);var b=this.owner&&this.owner.owner?this.owner.owner:this.owner;if(b)b.onRendererCreated(a)},onRendererCreated:function(){},_onRendererRecycled:function(a){this.onRendererRecycled(a);var b=this.owner&&this.owner.owner?this.owner.owner:this.owner;if(b)b.onRendererRecycled(a)},onRendererRecycled:function(){},_onRendererReused:function(a){this.onRendererReused(a);
var b=this.owner&&this.owner.owner?this.owner.owner:this.owner;if(b)b.onRendererReused(a)},onRendererReused:function(){},_onRendererDestroyed:function(a){this.onRendererDestroyed(a);var b=this.owner&&this.owner.owner?this.owner.owner:this.owner;if(b)b.onRendererDestroyed(a)},onRendererDestroyed:function(){},_onRenderersLayoutDone:function(a){this.onRenderersLayoutDone(a);if(null!=this.owner)this.owner.onRenderersLayoutDone(a)},onRenderersLayoutDone:function(){},_recycleRenderer:function(b,c){this._onRendererRecycled(b);
var d=this.rendererPool[b.kind];null==d?this.rendererPool[b.kind]=[b]:d.push(b);c&&b.container.parentNode.removeChild(b.container);a.set(b.container,"display","none");b.renderer.owner=null;b.renderer.set("item",null)},_destroyRenderer:function(a){this._onRendererDestroyed(a);var b=a.renderer;k.forEach(b.__handles,function(a){a.remove()});b.destroy&&b.destroy();h.destroy(a.container)},_destroyRenderersByKind:function(a){for(var b=[],c=0;c<this.rendererList.length;c++){var d=this.rendererList[c];d.kind==
a?this._destroyRenderer(d):b.push(d)}this.rendererList=b;if(a=this.rendererPool[a])for(;0<a.length;)this._destroyRenderer(a.pop())},_updateEditingCapabilities:function(a,b){var c=this.isItemMoveEnabled(a,b.rendererKind),d=this.isItemResizeEnabled(a,b.rendererKind),f=!1;c!=b.get("moveEnabled")&&(b.set("moveEnabled",c),f=!0);d!=b.get("resizeEnabled")&&(b.set("resizeEnabled",d),f=!0);f&&b.updateRendering()},updateRenderers:function(a,b){if(null!=a)for(var c=m.isArray(a)?a:[a],d=0;d<c.length;d++){var f=
c[d];if(!(null==f||null==f.id)){var e=this.itemToRenderer[f.id];if(null!=e)for(var h=this.isItemSelected(f),o=this.isItemHovered(f),n=this.isItemBeingEdited(f),j=this.showFocus?this.isItemFocused(f):!1,s=0;s<e.length;s++){var r=e[s].renderer;r.set("hovered",o);r.set("selected",h);r.set("edited",n);r.set("focused",j);this.applyRendererZIndex(f,e[s],o,h,n,j);b||(r.set("item",f),r.updateRendering&&r.updateRendering())}}}},applyRendererZIndex:function(b,c,d,f,e){a.set(c.container,{zIndex:e||f?20:void 0==
b.lane?0:b.lane})},getIdentity:function(a){return this.owner?this.owner.getIdentity(a):a.id},_setHoveredItem:function(a,b){if(this.owner)this.owner._setHoveredItem(a,b);else if(this.hoveredItem&&a&&this.hoveredItem.id!=a.id||null==a||null==this.hoveredItem){var c=this.hoveredItem;this.hoveredItem=a;this.updateRenderers([c,this.hoveredItem],!0);a&&b&&this._updateEditingCapabilities(a,b)}},hoveredItem:null,isItemHovered:function(a){return this._isEditing&&this._edProps?a.id==this._edProps.editedItem.id:
this.owner?this.owner.isItemHovered(a):null!=this.hoveredItem&&this.hoveredItem.id==a.id},isItemFocused:function(a){return this._isItemFocused?this._isItemFocused(a):!1},_setSelectionModeAttr:function(a){this.owner?this.owner.set("selectionMode",a):this.inherited(arguments)},_getSelectionModeAttr:function(a){return this.owner?this.owner.get("selectionMode"):this.inherited(arguments)},_setSelectedItemAttr:function(a){this.owner?this.owner.set("selectedItem",a):this.inherited(arguments)},_getSelectedItemAttr:function(){return this.owner?
this.owner.get("selectedItem"):this.selectedItem},_setSelectedItemsAttr:function(a){this.owner?this.owner.set("selectedItems",a):this.inherited(arguments)},_getSelectedItemsAttr:function(){return this.owner?this.owner.get("selectedItems"):this.inherited(arguments)},isItemSelected:function(a){return this.owner?this.owner.isItemSelected(a):this.inherited(arguments)},selectFromEvent:function(a,b,c,d){this.owner?this.owner.selectFromEvent(a,b,c,d):this.inherited(arguments)},setItemSelected:function(a,
b){this.owner?this.owner.setItemSelected(a,b):this.inherited(arguments)},createItemFunc:null,_getCreateItemFuncAttr:function(){return this.owner?this.owner.get("createItemFunc"):this.createItemFunc},createOnGridClick:!1,_getCreateOnGridClickAttr:function(){return this.owner?this.owner.get("createOnGridClick"):this.createOnGridClick},_gridMouseDown:!1,_onGridMouseDown:function(a){this._gridMouseDown=!0;this.showFocus=!1;this._isEditing&&this._endItemEditing("mouse",!1);this._doEndItemEditing(this.owner,
"mouse");this.set("focusedItem",null);this.selectFromEvent(a,null,null,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus();if(this._onRendererHandleMouseDown){var b=this.get("createItemFunc");if(b){var b=b(this,this.getTime(a),a),c=this.get("store");if(b&&null!=c&&(c.put(b),(b=this.getRenderers(b))&&0<b.length))(b=b[0])&&this._onRendererHandleMouseDown(a,b.renderer,"resizeEnd")}}},_onGridMouseMove:function(){},_onGridMouseUp:function(){},_onGridTouchStart:function(a){var b=this._edProps;
this._gridProps={event:a,fromItem:this.isAscendantHasClass(a.target,this.eventContainer,"dojoxCalendarEventContainer")};if(this._isEditing){if(this._gridProps)this._gridProps.editingOnStart=!0;m.mixin(b,this._getTouchesOnRenderers(a,b.editedItem));if(0==b.touchesLen){if(b&&b.endEditingTimer)clearTimeout(b.endEditingTimer),b.endEditingTimer=null;this._endItemEditing("touch",!1)}}this._doEndItemEditing(this.owner,"touch");e.stop(a)},_doEndItemEditing:function(a,b){if(a&&a._isEditing){if((p=a._edProps)&&
p.endEditingTimer)clearTimeout(p.endEditingTimer),p.endEditingTimer=null;a._endItemEditing(b,!1)}},_onGridTouchEnd:function(){},_onGridTouchMove:function(){},__fixEvt:function(a){return a},_dispatchCalendarEvt:function(a,b){a=this.__fixEvt(a);this[b](a);if(this.owner)this.owner[b](a);return a},_onGridClick:function(a){a.triggerEvent||(a={date:this.getTime(a),triggerEvent:a});this._dispatchCalendarEvt(a,"onGridClick")},onGridClick:function(){},_onGridDoubleClick:function(a){a.triggerEvent||(a={date:this.getTime(a),
triggerEvent:a});this._dispatchCalendarEvt(a,"onGridDoubleClick")},onGridDoubleClick:function(){},_onItemClick:function(a){this._dispatchCalendarEvt(a,"onItemClick")},onItemClick:function(){},_onItemDoubleClick:function(a){this._dispatchCalendarEvt(a,"onItemDoubleClick")},onItemDoubleClick:function(){},_onItemContextMenu:function(a){this._dispatchCalendarEvt(a,"onItemContextMenu")},onItemContextMenu:function(){},_getStartEndRenderers:function(a){a=this.itemToRenderer[a.id];if(null!=a){if(1==a.length)return a=
a[0].renderer,[a,a];for(var b=this.renderData,c=!1,d=!1,f=[],e=0;e<a.length;e++){var h=a[e].renderer;c||(c=0==b.dateModule.compare(h.item.range[0],h.item.startTime),f[0]=h);d||(d=0==b.dateModule.compare(h.item.range[1],h.item.endTime),f[1]=h);if(c&&d)break}return f}},editable:!0,moveEnabled:!0,resizeEnabled:!0,isItemEditable:function(){return this.editable&&(this.owner?this.owner.isItemEditable():!0)},isItemMoveEnabled:function(a,b){return this.isItemEditable(a,b)&&this.moveEnabled&&(this.owner?this.owner.isItemMoveEnabled(a,
b):!0)},isItemResizeEnabled:function(a,b){return this.isItemEditable(a,b)&&this.resizeEnabled&&(this.owner?this.owner.isItemResizeEnabled(a,b):!0)},_isEditing:!1,isItemBeingEdited:function(a){return this._isEditing&&this._edProps&&this._edProps.editedItem&&this._edProps.editedItem.id==a.id},_setEditingProperties:function(a){this._edProps=a},_startItemEditing:function(a,b){this._isEditing=!0;var c=this._edProps;c.editedItem=a;c.eventSource=b;c.secItem=this._secondarySheet?this._findRenderItem(a.id,
this._secondarySheet.renderData.items):null;c.ownerItem=this.owner?this._findRenderItem(a.id,this.items):null;if(!c.liveLayout){c.editSaveStartTime=a.startTime;c.editSaveEndTime=a.endTime;c.editItemToRenderer=this.itemToRenderer;c.editItems=this.renderData.items;c.editRendererList=this.rendererList;this.renderData.items=[c.editedItem];var d=c.editedItem.id;this.itemToRenderer={};this.rendererList=[];var f=c.editItemToRenderer[d];c.editRendererIndices=[];k.forEach(f,m.hitch(this,function(a){null==
this.itemToRenderer[d]?this.itemToRenderer[d]=[a]:this.itemToRenderer[d].push(a);this.rendererList.push(a)}));c.editRendererList=k.filter(c.editRendererList,function(a){return null!=a&&a.renderer.item.id!=d});delete c.editItemToRenderer[d]}this._layoutRenderers(this.renderData);this._onItemEditBegin({item:a,eventSource:b})},_onItemEditBegin:function(a){this._editStartTimeSave=this.newDate(a.item.startTime);this._editEndTimeSave=this.newDate(a.item.endTime);this._dispatchCalendarEvt(a,"onItemEditBegin")},
onItemEditBegin:function(){},_endItemEditing:function(a,b){this._isEditing=!1;var c=this._edProps;k.forEach(c.handles,function(a){a.remove()});if(!c.liveLayout)this.renderData.items=c.editItems,this.rendererList=c.editRendererList.concat(this.rendererList),m.mixin(this.itemToRenderer,c.editItemToRenderer);var d=this.get("store");this._onItemEditEnd(m.mixin(this._createItemEditEvent(),{item:this.renderItemToItem(c.editedItem,d),renderItem:c.editedItem,eventSource:a,completed:!b}));this._layoutRenderers(this.renderData);
this._edProps=null},_onItemEditEnd:function(a){this._dispatchCalendarEvt(a,"onItemEditEnd");if(!a.isDefaultPrevented())a.completed?this.get("store").put(a.item):(a.renderItem.startTime=this._editStartTimeSave,a.renderItem.endTime=this._editEndTimeSave)},onItemEditEnd:function(){},_createItemEditEvent:function(){return{cancelable:!0,bubbles:!1,__defaultPrevent:!1,preventDefault:function(){this.__defaultPrevented=!0},isDefaultPrevented:function(){return this.__defaultPrevented}}},_startItemEditingGesture:function(a,
b,c,d){var f=this._edProps;if(f&&null!=f.editedItem){this._editingGesture=!0;var e=f.editedItem;f.editKind=b;this._onItemEditBeginGesture(this.__fixEvt(m.mixin(this._createItemEditEvent(),{item:e,startTime:e.startTime,endTime:e.endTime,editKind:b,rendererKind:f.rendererKind,triggerEvent:d,dates:a,eventSource:c})));f.itemBeginDispatched=!0}},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,d=a.dates;b.editingTimeFrom=[];b.editingTimeFrom[0]=d[0];b.editingItemRefTime=[];b.editingItemRefTime[0]=
this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);"resizeBoth"==b.editKind&&(b.editingTimeFrom[1]=d[1],b.editingItemRefTime[1]=this.newDate(c.endTime));d=this.renderData.dateModule;b.inViewOnce=this._isItemInView(c);if("label"==b.rendererKind||this.roundToDay)b._itemEditBeginSave=this.newDate(c.startTime),b._itemEditEndSave=this.newDate(c.endTime);b._initDuration=d.difference(c.startTime,c.endTime,c.allDay?"day":"millisecond");this._dispatchCalendarEvt(a,"onItemEditBeginGesture");if(!a.isDefaultPrevented()&&
"mouse"==a.eventSource)b.editLayer=f.create("div",{style:"position: absolute; left:0; right:0; bottom:0; top:0; z-index:30; tabIndex:-1; background-image:url('"+this._blankGif+"'); cursor: "+("move"==a.editKind?"move":this.resizeCursor),onresizestart:function(){return!1},onselectstart:function(){return!1}},this.domNode),b.editLayer.focus()},onItemEditBeginGesture:function(){},_waDojoxAddIssue:function(a,b,c){var d=this.renderData.dateModule;return"gregorian"!=this._calendar&&0>c?(a=a.toGregorian(),
a=t.add(a,b,c),new this.renderData.dateClassObj(a)):d.add(a,b,c)},_computeItemEditingTimes:function(a,b,c,d){var a=this.renderData.dateModule,c=this._edProps,f=a.difference(c.editingTimeFrom[0],d[0],"millisecond");d[0]=this._waDojoxAddIssue(c.editingItemRefTime[0],"millisecond",f);"resizeBoth"==b&&(f=a.difference(c.editingTimeFrom[1],d[1],"millisecond"),d[1]=this._waDojoxAddIssue(c.editingItemRefTime[1],"millisecond",f));return d},_moveOrResizeItemGesture:function(a,b,c){if(this._isEditing&&null!=
a[0]){var d=this._edProps,f=d.editedItem,e=this.renderData.dateModule,h=d.editKind,o=[a[0]];"resizeBoth"==h&&(o[1]=a[1]);var o=this._computeItemEditingTimes(f,d.editKind,d.rendererKind,o,b),n=o[0],j=!1,a=m.clone(f.startTime),s=m.clone(f.endTime),r="keyboard"==d.eventSource?!1:this.allowStartEndSwap;if("move"==h){if(0!=e.compare(f.startTime,n))j=e.difference(f.startTime,f.endTime,"millisecond"),f.startTime=this.newDate(n),f.endTime=e.add(f.startTime,"millisecond",j),j=!0}else if("resizeStart"==h){if(0!=
e.compare(f.startTime,n)){if(-1!=e.compare(f.endTime,n))f.startTime=this.newDate(n);else if(r){if(f.startTime=this.newDate(f.endTime),f.endTime=this.newDate(n),d.editKind=h="resizeEnd","touch"==b)d.resizeEndTouchIndex=d.resizeStartTouchIndex,d.resizeStartTouchIndex=-1}else f.startTime=this.newDate(f.endTime),f.startTime.setHours(n.getHours()),f.startTime.setMinutes(n.getMinutes()),f.startTime.setSeconds(n.getSeconds());j=!0}}else if("resizeEnd"==h){if(0!=e.compare(f.endTime,n)){if(1!=e.compare(f.startTime,
n))f.endTime=this.newDate(n);else if(r){if(f.endTime=this.newDate(f.startTime),f.startTime=this.newDate(n),d.editKind=h="resizeStart","touch"==b)d.resizeStartTouchIndex=d.resizeEndTouchIndex,d.resizeEndTouchIndex=-1}else f.endTime=this.newDate(f.startTime),f.endTime.setHours(n.getHours()),f.endTime.setMinutes(n.getMinutes()),f.endTime.setSeconds(n.getSeconds());j=!0}}else if("resizeBoth"==h){if(j=!0,n=this.newDate(n),o=this.newDate(o[1]),-1!=e.compare(n,o)&&(r?(r=n,n=o,o=r):j=!1),j)f.startTime=n,
f.endTime=o}else return!1;if(!j)return!1;b=m.mixin(this._createItemEditEvent(),{item:f,startTime:f.startTime,endTime:f.endTime,editKind:h,rendererKind:d.rendererKind,triggerEvent:c,eventSource:b});"move"==h?this._onItemEditMoveGesture(b):this._onItemEditResizeGesture(b);if(1==e.compare(f.startTime,f.endTime))h=f.startTime,f.startTime=f.startTime,f.endTime=h;j=0!=e.compare(a,f.startTime)||0!=e.compare(s,f.endTime);if(!j)return!1;this._layoutRenderers(this.renderData);if(d.liveLayout&&null!=d.secItem)d.secItem.startTime=
f.startTime,d.secItem.endTime=f.endTime,this._secondarySheet._layoutRenderers(this._secondarySheet.renderData);else if(null!=d.ownerItem&&this.owner.liveLayout)d.ownerItem.startTime=f.startTime,d.ownerItem.endTime=f.endTime,this.owner._layoutRenderers(this.owner.renderData);return!0}},_findRenderItem:function(a,b){for(var b=b||this.renderData.items,c=0;c<b.length;c++)if(b[c].id==a)return b[c];return null},_onItemEditMoveGesture:function(a){this._dispatchCalendarEvt(a,"onItemEditMoveGesture");if(!a.isDefaultPrevented()){var b=
a.source._edProps,c=this.renderData,d=c.dateModule;"label"==b.rendererKind||this.roundToDay&&!a.item.allDay?(c=this.floorToDay(a.item.startTime,!1,c),c.setHours(b._itemEditBeginSave.getHours()),c.setMinutes(b._itemEditBeginSave.getMinutes()),d=d.add(c,"millisecond",b._initDuration)):a.item.allDay?(c=this.floorToDay(a.item.startTime,!0),d=d.add(c,"day",b._initDuration)):(c=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),d=d.add(c,"millisecond",b._initDuration));a.item.startTime=c;a.item.endTime=
d;if(!b.inViewOnce)b.inViewOnce=this._isItemInView(a.item);b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},_DAY_IN_MILLISECONDS:864E5,onItemEditMoveGesture:function(){},_onItemEditResizeGesture:function(a){this._dispatchCalendarEvt(a,"onItemEditResizeGesture");if(!a.isDefaultPrevented()){var b=a.source._edProps,c=this.renderData,d=c.dateModule,f=a.item.startTime,e=a.item.endTime;"resizeStart"==a.editKind?a.item.allDay?f=this.floorToDay(a.item.startTime,!1,this.renderData):this.roundToDay?
(f=this.floorToDay(a.item.startTime,!1,c),f.setHours(b._itemEditBeginSave.getHours()),f.setMinutes(b._itemEditBeginSave.getMinutes())):f=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps):"resizeEnd"==a.editKind?a.item.allDay?this.isStartOfDay(a.item.endTime)||(e=this.floorToDay(a.item.endTime,!1,this.renderData),e=d.add(e,"day",1)):this.roundToDay?(e=this.floorToDay(a.item.endTime,!1,c),e.setHours(b._itemEditEndSave.getHours()),e.setMinutes(b._itemEditEndSave.getMinutes())):(e=this.floorDate(a.item.endTime,
this.snapUnit,this.snapSteps),"mouse"==a.eventSource&&(e=d.add(e,this.snapUnit,this.snapSteps))):(f=this.floorDate(a.item.startTime,this.snapUnit,this.snapSteps),e=this.floorDate(a.item.endTime,this.snapUnit,this.snapSteps),e=d.add(e,this.snapUnit,this.snapSteps));a.item.startTime=f;a.item.endTime=e;c=a.item.allDay||b._initDuration>=this._DAY_IN_MILLISECONDS&&!this.allowResizeLessThan24H;this.ensureMinimalDuration(this.renderData,a.item,c?"day":this.minDurationUnit,c?1:this.minDurationSteps,a.editKind);
if(!b.inViewOnce)b.inViewOnce=this._isItemInView(a.item);b.inViewOnce&&this.stayInView&&this._ensureItemInView(a.item)}},onItemEditResizeGesture:function(){},_endItemEditingGesture:function(a,b){if(this._isEditing){this._editingGesture=!1;var c=this._edProps,d=c.editedItem;c.itemBeginDispatched=!1;this._onItemEditEndGesture(m.mixin(this._createItemEditEvent(),{item:d,startTime:d.startTime,endTime:d.endTime,editKind:c.editKind,rendererKind:c.rendererKind,triggerEvent:b,eventSource:a}))}},_onItemEditEndGesture:function(a){var b=
this._edProps;delete b._itemEditBeginSave;delete b._itemEditEndSave;this._dispatchCalendarEvt(a,"onItemEditEndGesture");if(!a.isDefaultPrevented()&&b.editLayer){if(d("ie"))b.editLayer.style.cursor="default";setTimeout(m.hitch(this,function(){if(this.domNode)this.domNode.focus(),b.editLayer.parentNode.removeChild(b.editLayer),b.editLayer=null}),10)}},onItemEditEndGesture:function(){},ensureMinimalDuration:function(a,b,c,d,f){a=a.dateModule;if("resizeStart"==f){if(c=a.add(b.endTime,c,-d),1==a.compare(b.startTime,
c))b.startTime=c}else if(c=a.add(b.startTime,c,d),-1==a.compare(b.endTime,c))b.endTime=c},doubleTapDelay:300,snapUnit:"minute",snapSteps:15,minDurationUnit:"hour",minDurationSteps:1,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!1})})},"dojox/calendar/_VerticalScrollBarBase":function(){define("dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/on,dojo/dom-style,dijit/_WidgetBase".split(","),function(l,m,k,j,e,h){return l("dojox.calendar._VerticalScrollBarBase",h,{value:0,
minimum:0,maximum:100,_scrollHandle:null,buildRendering:function(){this.inherited(arguments);this._scrollHandle=j(this.domNode,"scroll",k.hitch(this,function(){this.value=this._getDomScrollerValue();this.onChange(this.value);this.onScroll(this.value)}))},destroy:function(d){this._scrollHandle.remove();this.inherited(arguments)},_getDomScrollerValue:function(){return this.domNode.scrollTop},_setDomScrollerValue:function(d){this.domNode.scrollTop=d},_setValueAttr:function(d){d=Math.min(this.maximum,
d);d=Math.max(this.minimum,d);if(this.value!=d)this.value=d,this.onChange(d),this._setDomScrollerValue(d)},onChange:function(){},onScroll:function(){},_setMinimumAttr:function(d){this.minimum=d=Math.min(d,this.maximum)},_setMaximumAttr:function(d){this.maximum=d=Math.max(d,this.minimum);e.set(this.content,"height",d+"px")}})})},"url:dojox/calendar/templates/SimpleColumnView.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\t\n\t<div data-dojo-attach-point="header" class="dojoxCalendarHeader">\n\t\t<div class="dojoxCalendarYearColumnHeader" data-dojo-attach-point="yearColumnHeader">\n\t\t\t<table><tr><td><span data-dojo-attach-point="yearColumnHeaderContent"></span></td></tr></table>\t\t\n\t\t</div>\n\t\t<div data-dojo-attach-point="columnHeader" class="dojoxCalendarColumnHeader">\n\t\t\t<table data-dojo-attach-point="columnHeaderTable" class="dojoxCalendarColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t\t</div>\n\t</div>\t\n\t<div data-dojo-attach-point="vScrollBar" class="dojoxCalendarVScrollBar">\n\t\t<div data-dojo-attach-point="vScrollBarContent" style="visibility:hidden;position:relative; width:1px; height:1px;" ></div>\n\t</div>\t\n\t<div data-dojo-attach-point="scrollContainer" class="dojoxCalendarScrollContainer">\n\t\t<div data-dojo-attach-point="sheetContainer" style="position:relative;left:0;right:0;margin:0;padding:0">\n\t\t\t<div data-dojo-attach-point="rowHeader" class="dojoxCalendarRowHeader">\n\t\t\t\t<table data-dojo-attach-point="rowHeaderTable" class="dojoxCalendarRowHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="grid" class="dojoxCalendarGrid">\n\t\t\t\t<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n\t\t\t\t<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t</div> \n\t</div>\n</div>\n\n',
"url:dojox/calendar/templates/ColumnView.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\n\t\n\t<div data-dojo-attach-point="header" class="dojoxCalendarHeader">\n\t\t<div class="dojoxCalendarYearColumnHeader" data-dojo-attach-point="yearColumnHeader">\n\t\t\t<table cellspacing="0" cellpadding="0"><tr><td><span data-dojo-attach-point="yearColumnHeaderContent"></span></td></tr></table>\t\t\n\t\t</div>\n\t\t<div data-dojo-attach-point="columnHeader" class="dojoxCalendarColumnHeader">\n\t\t\t<table data-dojo-attach-point="columnHeaderTable" class="dojoxCalendarColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t\t</div>\n\t</div>\n\t\n\t<div data-dojo-attach-point="secondarySheetNode"></div>\n\t\n\t<div data-dojo-attach-point="scrollContainer" class="dojoxCalendarScrollContainer">\n\t\t<div data-dojo-attach-point="sheetContainer" style="position:relative;left:0;right:0;margin:0;padding:0">\n\t\t\t<div data-dojo-attach-point="rowHeader" class="dojoxCalendarRowHeader">\n\t\t\t\t<table data-dojo-attach-point="rowHeaderTable" class="dojoxCalendarRowHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="grid" class="dojoxCalendarGrid">\n\t\t\t\t<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t\t<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n\t\t\t\t<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t\t\t</div>\n\t\t</div> \n\t</div>\n\t\n\t<div data-dojo-attach-point="vScrollBar" class="dojoxCalendarVScrollBar">\n\t\t<div data-dojo-attach-point="vScrollBarContent" style="visibility:hidden;position:relative;width:1px;height:1px;" ></div>\n\t</div>\n\t\n</div>\n',
"dojox/calendar/ColumnViewSecondarySheet":function(){define("./MatrixView,dojo/text!./templates/ColumnViewSecondarySheet.html,dojo/_base/html,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/sniff,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/date,dojo/date/locale,dojo/query,dojox/html/metrics,dojo/_base/fx,dojo/on,dojo/i18n,dojo/window".split(","),function(l,m,k,j,e,h,d,c,b,a){return j("dojox.calendar.ColumnViewSecondarySheet",l,{templateString:m,rowCount:1,cellPaddingTop:4,
roundToDay:!1,_defaultHeight:-1,layoutDuringResize:!0,_defaultItemToRendererKindFunc:function(a){return a.allDay?"horizontal":null},_formatGridCellLabel:function(){return null},_formatRowHeaderLabel:function(){return null},__fixEvt:function(a){a.sheet="secondary";a.source=this;return a},_dispatchCalendarEvt:function(a,b){a=this.inherited(arguments);if(this.owner.owner)this.owner.owner[b](a)},_layoutExpandRenderers:function(b,c,d){if(this.expandRenderer){var e=a.getMarginBox(this.domNode).h;if(-1==
this._defaultHeight)this._defaultHeight=e;-1!=this._defaultHeight&&this._defaultHeight!=e&&e>=this._getExpandedHeight()?this._layoutExpandRendererImpl(0,this._expandedRowCol,null,!0):this.inherited(arguments)}},expandRendererClickHandler:function(b,c){e.stop(b);var d=a.getMarginBox(this.domNode).h;this._defaultHeight==d||d<this._getExpandedHeight()?(this._expandedRowCol=c.columnIndex,this.owner.resizeSecondarySheet(this._getExpandedHeight())):this.owner.resizeSecondarySheet(this._defaultHeight)},
_getExpandedHeight:function(){return this.naturalRowsHeight[0]+this.expandRendererHeight+this.verticalGap+this.verticalGap},_layoutRenderers:function(a){this._domReady&&this.inherited(arguments)}})})},"dojox/calendar/MatrixView":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/event,dojo/_base/lang,dojo/_base/sniff,dojo/_base/fx,dojo/_base/html,dojo/on,dojo/dom,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/query,dojox/html/metrics,dojo/i18n,./ViewBase,dojo/text!./templates/MatrixView.html,dijit/_TemplatedMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return l("dojox.calendar.MatrixView",[s,w],{templateString:u,baseClass:"dojoxCalendarMatrixView",_setTabIndexAttr:"domNode",viewKind:"matrix",renderData:null,startDate:null,refStartTime:null,refEndTime:null,columnCount:7,rowCount:5,horizontalRenderer:null,labelRenderer:null,expandRenderer:null,percentOverlap:0,verticalGap:2,horizontalRendererHeight:17,labelRendererHeight:14,expandRendererHeight:15,cellPaddingTop:16,expandDuration:300,expandEasing:null,
layoutDuringResize:!1,roundToDay:!0,showCellLabel:!0,scrollable:!1,resizeCursor:"e-resize",constructor:function(){this.invalidatingProperties="columnCount,rowCount,startDate,horizontalRenderer,labelRenderer,expandRenderer,rowHeaderDatePattern,columnHeaderLabelLength,cellHeaderShortPattern,cellHeaderLongPattern,percentOverlap,verticalGap,horizontalRendererHeight,labelRendererHeight,expandRendererHeight,cellPaddingTop,roundToDay,itemToRendererKindFunc,layoutPriorityFunction,formatItemTimeFunc,textDir,items".split(",");
this._ddRendererList=[];this._ddRendererPool=[];this._rowHeaderHandles=[];this._viewHandles.push(c(window,"resize",j.hitch(this,this._resizeHandler)))},destroy:function(a){this._cleanupRowHeader();this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._initialized=!0;this.invalidRendering||this.refreshRendering()},_createRenderData:function(){var a={};a.dateLocaleModule=this.dateLocaleModule;a.dateClassObj=this.dateClassObj;a.dateModule=this.dateModule;a.dates=[];a.columnCount=
this.get("columnCount");a.rowCount=this.get("rowCount");a.sheetHeight=this.itemContainer.offsetHeight;this._computeRowsHeight(a);var b=this.get("startDate");null==b&&(b=new a.dateClassObj);this.startDate=b=this.floorToDay(b,!1,a);for(var c=0;c<a.rowCount;c++){a.dates.push([]);for(var d=0;d<a.columnCount;d++)a.dates[c].push(b),b=a.dateModule.add(b,"day",1),b=this.floorToDay(b,!1,a)}a.startTime=this.newDate(a.dates[0][0],a);a.endTime=this.newDate(a.dates[a.rowCount-1][a.columnCount-1],a);a.endTime=
a.dateModule.add(a.endTime,"day",1);a.endTime=this.floorToDay(a.endTime,!0);if(this.displayedItemsInvalidated)this.displayedItemsInvalidated=!1,this._computeVisibleItems(a),this._isEditing&&this._endItemEditing(null,!1);else if(this.renderData)a.items=this.renderData.items;a.rtl=!this.isLeftToRight();return a},_validateProperties:function(){this.inherited(arguments);if(1>this.columnCount||isNaN(this.columnCount))this.columnCount=1;if(1>this.rowCount||isNaN(this.rowCount))this.rowCount=1;if(isNaN(this.percentOverlap)||
0>this.percentOverlap||100<this.percentOverlap)this.percentOverlap=0;if(isNaN(this.verticalGap)||0>this.verticalGap)this.verticalGap=2;if(isNaN(this.horizontalRendererHeight)||1>this.horizontalRendererHeight)this.horizontalRendererHeight=17;if(isNaN(this.labelRendererHeight)||1>this.labelRendererHeight)this.labelRendererHeight=14;if(isNaN(this.expandRendererHeight)||1>this.expandRendererHeight)this.expandRendererHeight=15},_setStartDateAttr:function(a){this.displayedItemsInvalidated=!0;this._set("startDate",
a)},_setColumnCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("columnCount",a)},_setRowCountAttr:function(a){this.displayedItemsInvalidated=!0;this._set("rowCount",a)},__fixEvt:function(a){a.sheet="primary";a.source=this;return a},_formatRowHeaderLabel:function(a){return this.rowHeaderDatePattern?this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:this.rowHeaderDatePattern}):this.getWeekNumberLabel(a)},_formatColumnHeaderLabel:function(a){return this.renderData.dateLocaleModule.getNames("days",
this.columnHeaderLabelLength?this.columnHeaderLabelLength:"wide","standAlone")[a.getDay()]},_formatGridCellLabel:function(a,b,c){0==b&&0==c||1==a.getDate()?this.cellHeaderLongPattern?b=this.cellHeaderLongPattern:(b=o.getLocalization("dojo.cldr",this._calendar),b=b["dateFormatItem-MMMd"]):this.cellHeaderShortPattern?b=this.cellHeaderShortPattern:(b=o.getLocalization("dojo.cldr",this._calendar),b=b["dateFormatItem-d"]);return this.renderData.dateLocaleModule.format(a,{selector:"date",datePattern:b})},
refreshRendering:function(){this.inherited(arguments);if(this.domNode){this._validateProperties();var a=this.renderData;this.renderData=this._createRenderData();this._createRendering(this.renderData,a);this._layoutRenderers(this.renderData)}},_createRendering:function(a,b){0>=a.rowHeight?(a.columnCount=0,a.rowCount=0):(this._buildColumnHeader(a,b),this._buildRowHeader(a,b),this._buildGrid(a,b),this._buildItemContainer(a,b),this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&f.set(this.buttonContainer,
{right:0,left:0}))},_buildColumnHeader:function(b,c){var f=this.columnHeaderTable;if(f){var h=b.columnCount-(c?c.columnCount:0);if(8==e("ie"))if(null==this._colTableSave)this._colTableSave=j.clone(f);else if(0>h)this.columnHeader.removeChild(f),r.destroy(f),this.columnHeaderTable=f=j.clone(this._colTableSave),this.columnHeader.appendChild(f),h=b.columnCount;var o=t("tbody",f),n=t("tr",f),o=1==o.length?o[0]:d.create("tbody",null,f),n=1==n.length?n[0]:r.create("tr",null,o);if(0<h)for(o=0;o<h;o++)r.create("td",
null,n);else{h=-h;for(o=0;o<h;o++)n.removeChild(n.lastChild)}t("td",f).forEach(function(c,d){c.className="";var f=b.dates[0][d];this._setText(c,this._formatColumnHeaderLabel(f));0==d?a.add(c,"first-child"):d==this.renderData.columnCount-1&&a.add(c,"last-child");this.styleColumnHeaderCell(c,f,b)},this);this.yearColumnHeaderContent&&this._setText(this.yearColumnHeaderContent,b.dateLocaleModule.format(b.dates[0][0],{selector:"date",datePattern:"yyyy"}))}},styleColumnHeaderCell:function(b,c){if(this.isWeekEnd(c))return a.add(b,
"dojoxCalendarWeekend")},_rowHeaderHandles:null,_cleanupRowHeader:function(){for(;0<this._rowHeaderHandles.length;)for(var a=this._rowHeaderHandles.pop();0<a.length;)a.pop().remove()},_rowHeaderClick:function(a){var b=t("td",this.rowHeaderTable).indexOf(a.currentTarget);this._onRowHeaderClick({index:b,date:this.renderData.dates[b][0],triggerEvent:a})},_buildRowHeader:function(b,d){var h=this.rowHeaderTable;if(h){var o=t("tbody",h),n,o=1==o.length?o[0]:r.create("tbody",null,h),s=b.rowCount-(d?d.rowCount:
0);if(0<s)for(var q=0;q<s;q++){n=r.create("tr",null,o);n=r.create("td",null,n);var k=[];k.push(c(n,"click",j.hitch(this,this._rowHeaderClick)));e("touch")||(k.push(c(n,"mousedown",function(b){a.add(b.currentTarget,"Active")})),k.push(c(n,"mouseup",function(b){a.remove(b.currentTarget,"Active")})),k.push(c(n,"mouseover",function(b){a.add(b.currentTarget,"Hover")})),k.push(c(n,"mouseout",function(b){a.remove(b.currentTarget,"Hover")})));this._rowHeaderHandles.push(k)}else{s=-s;for(q=0;q<s;q++){o.removeChild(o.lastChild);
for(n=this._rowHeaderHandles.pop();0<n.length;)n.pop().remove()}}t("tr",h).forEach(function(c,d){f.set(c,"height",this._getRowHeight(d)+"px");var e=b.dates[d][0],h=t("td",c)[0];h.className="";0==d&&a.add(h,"first-child");d==this.renderData.rowCount-1&&a.add(h,"last-child");this.styleRowHeaderCell(h,e,b);this._setText(h,this._formatRowHeaderLabel(e))},this)}},styleRowHeaderCell:function(){},_buildGrid:function(b,c){var d=this.gridTable;if(d){var h=b.rowCount-(c?c.rowCount:0),o=0<h,n=b.columnCount-
(c?c.columnCount:0);if(8==e("ie"))if(null==this._gridTableSave)this._gridTableSave=j.clone(d);else if(0>n)this.grid.removeChild(d),r.destroy(d),this.gridTable=d=j.clone(this._gridTableSave),this.grid.appendChild(d),n=b.columnCount,h=b.rowCount,o=!0;var s=t("tbody",d),s=1==s.length?s[0]:r.create("tbody",null,d);if(o)for(var q=0;q<h;q++)r.create("tr",null,s);else{h=-h;for(q=0;q<h;q++)s.removeChild(s.lastChild)}var k=b.rowCount-h,l=o||0<n,n=l?n:-n;t("tr",d).forEach(function(a,c){if(l)for(var d=c>=k?
b.columnCount:n,c=0;c<d;c++){var f=r.create("td",null,a);r.create("span",null,f)}else for(c=0;c<n;c++)a.removeChild(a.lastChild)});t("tr",d).forEach(function(c,d){f.set(c,"height",this._getRowHeight(d)+"px");c.className="";0==d&&a.add(c,"first-child");d==b.rowCount-1&&a.add(c,"last-child");t("td",c).forEach(function(c,f){c.className="";0==f&&a.add(c,"first-child");f==b.columnCount-1&&a.add(c,"last-child");var e=b.dates[d][f];this._setText(t("span",c)[0],this.showCellLabel?this._formatGridCellLabel(e,
d,f):null);this.styleGridCell(c,e,b)},this)},this)}},styleGridCell:function(b,c,d){d=d.dateModule;this.isToday(c)?a.add(b,"dojoxCalendarToday"):null!=this.refStartTime&&null!=this.refEndTime&&(0<=d.compare(c,this.refEndTime)||0>=d.compare(d.add(c,"day",1),this.refStartTime))?a.add(b,"dojoxCalendarDayDisabled"):this.isWeekEnd(c)&&a.add(b,"dojoxCalendarWeekend")},_buildItemContainer:function(b,c){var d=this.itemContainerTable;if(d){var h=[],o=b.rowCount-(c?c.rowCount:0);if(8==e("ie"))if(null==this._itemTableSave)this._itemTableSave=
j.clone(d);else if(0>o)this.itemContainer.removeChild(d),this._recycleItemRenderers(!0),this._recycleExpandRenderers(!0),r.destroy(d),this.itemContainerTable=d=j.clone(this._itemTableSave),this.itemContainer.appendChild(d),o=b.columnCount;var n=t("tbody",d),s,n=1==n.length?n[0]:r.create("tbody",null,d);if(0<o)for(var q=0;q<o;q++)s=r.create("tr",null,n),a.add(s,"dojoxCalendarItemContainerRow"),s=r.create("td",null,s),s=r.create("div",null,s),a.add(s,"dojoxCalendarContainerRow");else{o=-o;for(q=0;q<
o;q++)n.removeChild(n.lastChild)}t(".dojoxCalendarItemContainerRow",d).forEach(function(a,b){f.set(a,"height",this._getRowHeight(b)+"px");h.push(a.childNodes[0].childNodes[0])},this);b.cells=h}},_resizeHandler:function(a,b){var c=this.renderData;if(null==c)this.refreshRendering();else{if(c.sheetHeight!=this.itemContainer.offsetHeight)c.sheetHeight=this.itemContainer.offsetHeight,-1==this.getExpandedRowIndex()?(this._computeRowsHeight(),this._resizeRows()):this.expandRow(c.expandedRow,c.expandedRowCol,
0,null,!0);this.layoutDuringResize||b?setTimeout(j.hitch(this,function(){this._layoutRenderers(this.renderData)}),20):(f.set(this.itemContainer,"opacity",0),this._recycleItemRenderers(),this._recycleExpandRenderers(),void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(j.hitch(this,function(){delete this._resizeTimer;this._resizeRowsImpl(this.itemContainer,"tr");this._layoutRenderers(this.renderData);0==this.resizeAnimationDuration?f.set(this.itemContainer,"opacity",
1):h.fadeIn({node:this.itemContainer,curve:[0,1]}).play(this.resizeAnimationDuration)}),200))}},resizeAnimationDuration:0,getExpandedRowIndex:function(){return null==this.renderData.expandedRow?-1:this.renderData.expandedRow},collapseRow:function(a,b,c){var d=this.renderData;void 0==c&&(c=!0);if(void 0==a)a=this.expandDuration;if(d&&null!=d.expandedRow&&-1!=d.expandedRow)if(c&&a){var c=d.expandedRow,e=d.expandedRowHeight;delete d.expandedRow;this._computeRowsHeight(d);var o=this._getRowHeight(c);
d.expandedRow=c;this._recycleExpandRenderers();this._recycleItemRenderers();f.set(this.itemContainer,"display","none");this._expandAnimation=new h.Animation({curve:[e,o],duration:a,easing:b,onAnimate:j.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),onEnd:j.hitch(this,function(){this._expandAnimation=null;this._collapseRowImpl(!1);this._resizeRows();f.set(this.itemContainer,"display","block");setTimeout(j.hitch(this,function(){this._layoutRenderers(d)}),100);this.onExpandAnimationEnd(!1)})});
this._expandAnimation.play()}else this._collapseRowImpl(c)},_collapseRowImpl:function(a){var b=this.renderData;delete b.expandedRow;delete b.expandedRowHeight;this._computeRowsHeight(b);if(void 0==a||a)this._resizeRows(),this._layoutRenderers(b)},expandRow:function(a,b,c,d,e){var o=this.renderData;if(!o||0>a||a>=o.rowCount)return-1;if(void 0==b||0>b||b>=o.columnCount)b=-1;void 0==e&&(e=!0);if(void 0==c)c=this.expandDuration;if(void 0==d)d=this.expandEasing;var n=this._getRowHeight(a),s=o.sheetHeight-
Math.ceil(this.cellPaddingTop*(o.rowCount-1));o.expandedRow=a;o.expandedRowCol=b;o.expandedRowHeight=s;if(e)c?(this._recycleExpandRenderers(),this._recycleItemRenderers(),f.set(this.itemContainer,"display","none"),this._expandAnimation=new h.Animation({curve:[n,s],duration:c,delay:50,easing:d,onAnimate:j.hitch(this,function(a){this._expandRowImpl(Math.floor(a))}),onEnd:j.hitch(this,function(){this._expandAnimation=null;f.set(this.itemContainer,"display","block");setTimeout(j.hitch(this,function(){this._expandRowImpl(s,
!0)}),100);this.onExpandAnimationEnd(!0)})}),this._expandAnimation.play()):this._expandRowImpl(s)},_expandRowImpl:function(a,b){var c=this.renderData;c.expandedRowHeight=a;this._computeRowsHeight(c,c.sheetHeight-a);this._resizeRows();b&&this._layoutRenderers(c)},onExpandAnimationEnd:function(){},_resizeRows:function(){0>=this._getRowHeight(0)||(this.rowHeaderTable&&this._resizeRowsImpl(this.rowHeaderTable,"tr"),this.gridTable&&this._resizeRowsImpl(this.gridTable,"tr"),this.itemContainerTable&&this._resizeRowsImpl(this.itemContainerTable,
"tr"))},_computeRowsHeight:function(a,b){var c=null==a?this.renderData:a,b=b||c.sheetHeight;b--;7==e("ie")&&(b-=c.rowCount);if(1==c.rowCount)c.rowHeight=b,c.rowHeightFirst=b,c.rowHeightLast=b;else{var d=null==c.expandedRow?c.rowCount:c.rowCount-1,f=b/d,h;h=b-Math.floor(f)*d;var o=Math.abs(b-Math.ceil(f)*d),d=1;h<o?(f=Math.floor(f),o=h):(d=-1,f=Math.ceil(f));h=f+d*Math.floor(o/2);c.rowHeight=f;c.rowHeightFirst=h;c.rowHeightLast=h+d*(o%2)}},_getRowHeight:function(a){var b=this.renderData;return a==
b.expandedRow?b.expandedRowHeight:0==b.expandedRow&&1==a||0==a?b.rowHeightFirst:b.expandedRow==this.renderData.rowCount-1&&a==this.renderData.rowCount-2||a==this.renderData.rowCount-1?b.rowHeightLast:b.rowHeight},_resizeRowsImpl:function(a,b){dojo.query(b,a).forEach(function(a,b){f.set(a,"height",this._getRowHeight(b)+"px")},this)},_setHorizontalRendererAttr:function(a){this._destroyRenderersByKind("horizontal");this._set("horizontalRenderer",a)},_setLabelRendererAttr:function(a){this._destroyRenderersByKind("label");
this._set("labelRenderer",a)},_destroyExpandRenderer:function(a){m.forEach(a.__handles,function(a){a.remove()});a.destroy&&a.destroy();d.destroy(a.domNode)},_setExpandRendererAttr:function(a){for(;0<this._ddRendererList.length;)this._destroyExpandRenderer(this._ddRendererList.pop());var b=this._ddRendererPool;if(b)for(;0<b.length;)this._destroyExpandRenderer(b.pop());this._set("expandRenderer",a)},_ddRendererList:null,_ddRendererPool:null,_getExpandRenderer:function(a,b,c,d,f){if(null==this.expandRenderer)return null;
var e=this._ddRendererPool.pop();null==e&&(e=new this.expandRenderer);this._ddRendererList.push(e);e.set("owner",this);e.set("date",a);e.set("items",b);e.set("rowIndex",c);e.set("columnIndex",d);e.set("expanded",f);return e},_recycleExpandRenderers:function(a){for(var b=0;b<this._ddRendererList.length;b++){var c=this._ddRendererList[b];c.set("Up",!1);c.set("Down",!1);a&&c.domNode.parentNode.removeChild(c.domNode);f.set(c.domNode,"display","none")}this._ddRendererPool=this._ddRendererPool.concat(this._ddRendererList);
this._ddRendererList=[]},_defaultItemToRendererKindFunc:function(a){return 1440<=Math.abs(this.renderData.dateModule.difference(a.startTime,a.endTime,"minute"))?"horizontal":"label"},naturalRowsHeight:null,_roundItemToDay:function(a){var b=a.startTime,a=a.endTime;this.isStartOfDay(b)||(b=this.floorToDay(b,!1,this.renderData));this.isStartOfDay(a)||(a=this.renderData.dateModule.add(a,"day",1),a=this.floorToDay(a,!0));return{startTime:b,endTime:a}},_sortItemsFunction:function(a,b){this.roundToDay&&
(a=this._roundItemToDay(a),b=this._roundItemToDay(b));var c=this.dateModule.compare(a.startTime,b.startTime);0==c&&(c=-1*this.dateModule.compare(a.endTime,b.endTime));return c},_overlapLayoutPass3:function(a){for(var b=0,c=0,d=[],f=n.position(this.gridTable).x,e=0;e<this.renderData.columnCount;e++){for(var h=!1,c=n.position(this._getCellAt(0,e)),b=c.x-f,c=b+c.w,o=a.length-1;0<=o&&!h;o--)for(var j=0;j<a[o].length;j++)if(h=a[o][j],h=h.start<c&&b<h.end){d[e]=o+1;break}h||(d[e]=0)}return d},applyRendererZIndex:function(a,
b,c,d,e){f.set(b.container,{zIndex:e||d?b.renderer.mobile?100:0:void 0==a.lane?1:a.lane+1})},_layoutRenderers:function(a){if(!(null==a||null==a.items||0>=a.rowHeight))!this.gridTable||null!=this._expandAnimation||null==this.horizontalRenderer&&null==this.labelRenderer?this._recycleItemRenderers():(this.renderData.gridTablePosX=n.position(this.gridTable).x,this._layoutStep=a.columnCount,this._recycleExpandRenderers(),this._hiddenItems=[],this._offsets=[],this.naturalRowsHeight=[],this.inherited(arguments))},
_offsets:null,_layoutInterval:function(a,b,c,d,f){if(null!=this.renderData.cells){for(var e=[],a=[],h=0;h<f.length;h++){var o=f[h],n=this._itemToRendererKind(o);"horizontal"==n?e.push(o):"label"==n&&a.push(o)}f=this.getExpandedRowIndex();if(!(-1!=f&&f!=b)){var f=[],j,h=[];if(0<e.length&&this.horizontalRenderer){j=this._createHorizontalLayoutItems(b,c,d,e);var s=this._computeHorizontalOverlapLayout(j,h)}var r,e=[];0<a.length&&this.labelRenderer&&(r=this._createLabelLayoutItems(b,c,d,a),this._computeLabelOffsets(r,
e));c=this._computeColHasHiddenItems(b,h,e);null!=j&&this._layoutHorizontalItemsImpl(b,j,s,c,f);null!=r&&this._layoutLabelItemsImpl(b,r,c,f,h);this._layoutExpandRenderers(b,c,f);this._hiddenItems[b]=f}}},_createHorizontalLayoutItems:function(a,b,c,d){if(null!=this.horizontalRenderer){var f=this.renderData,e=f.dateModule;n.getMarginBox(this.itemContainer);for(var h=f.rtl?-1:1,o=[],s=0;s<d.length;s++){var r=d[s],q=this.computeRangeOverlap(f,r.startTime,r.endTime,b,c),t=e.difference(b,this.floorToDay(q[0],
!1,f),"day"),k=f.dates[a][t],l=n.position(this._getCellAt(a,t,!1)),u=l.x-f.gridTablePosX;f.rtl&&(u+=l.w);!this.roundToDay&&!r.allDay&&(u+=h*this.computeProjectionOnDate(f,k,q[0],l.w));var u=Math.ceil(u),m=e.difference(b,this.floorToDay(q[1],!1,f),"day"),w;m>f.columnCount-1?(l=n.position(this._getCellAt(a,f.columnCount-1,!1)),w=f.rtl?l.x-f.gridTablePosX:l.x-f.gridTablePosX+l.w):(k=f.dates[a][m],l=n.position(this._getCellAt(a,m,!1)),w=l.x-f.gridTablePosX,f.rtl&&(w+=l.w),this.roundToDay?this.isStartOfDay(q[1])||
(w+=h*l.w):w+=h*this.computeProjectionOnDate(f,k,q[1],l.w));w=Math.floor(w);f.rtl&&(k=w,w=u,u=k);w>u&&(r=j.mixin({start:u,end:w,range:q,item:r,startOffset:t,endOffset:m},r),o.push(r))}return o}},_computeHorizontalOverlapLayout:function(a,b){var c=this.renderData,d=this.horizontalRendererHeight,f=this.computeOverlapping(a,this._overlapLayoutPass3),e=this.percentOverlap/100;for(i=0;i<c.columnCount;i++){var h=f.addedPassRes[i],o=c.rtl?c.columnCount-i-1:i;b[o]=0==e?0==h?0:1==h?d:d+(h-1)*(d+this.verticalGap):
0==h?0:h*d-(h-1)*e*d+this.verticalGap;b[o]+=this.cellPaddingTop}return f},_createLabelLayoutItems:function(a,b,c,d){if(null!=this.labelRenderer){for(var f=this.renderData,e=f.dateModule,h=[],o=0;o<d.length;o++)for(var n=d[o],a=this.floorToDay(n.startTime,!1,f),s=this.dateModule.compare;-1==s(a,n.endTime)&&-1==s(a,c);){var r=e.add(a,"day",1),r=this.floorToDay(r,!0),r=this.computeRangeOverlap(f,n.startTime,n.endTime,a,r),q=e.difference(b,this.floorToDay(r[0],!1,f),"day");if(q>=this.columnCount)break;
if(0<=q){var t=h[q];null==t&&(t=[],h[q]=t);t.push(j.mixin({startOffset:q,range:r,item:n},n))}a=e.add(a,"day",1);this.floorToDay(a,!0)}return h}},_computeLabelOffsets:function(a,b){for(var c=0;c<this.renderData.columnCount;c++)b[c]=null==a[c]?0:a[c].length*(this.labelRendererHeight+this.verticalGap)},_computeColHasHiddenItems:function(a,b,c){for(var d=[],f=this._getRowHeight(a),e,h=0,o=0;o<this.renderData.columnCount;o++)e=null==b||null==b[o]?this.cellPaddingTop:b[o],e+=null==c||null==c[o]?0:c[o],
e>h&&(h=e),d[o]=e>f;this.naturalRowsHeight[a]=h;return d},_layoutHorizontalItemsImpl:function(a,b,c,d,h){for(var c=this.renderData.cells[a],a=this._getRowHeight(a),o=this.horizontalRendererHeight,n=this.percentOverlap/100,j=0;j<b.length;j++){var s=b[j],r=s.lane,q=this.cellPaddingTop,q=0==n?q+r*(o+this.verticalGap):q+r*(o-n*o),r=!1,t=a;if(this.expandRenderer){for(t=s.startOffset;t<=s.endOffset;t++)if(d[t]){r=!0;break}t=r?a-this.expandRendererHeight:a}if(q+o<=t){var r=this._createRenderer(s,"horizontal",
this.horizontalRenderer,"dojoxCalendarHorizontal"),k=(t=this.isItemBeingEdited(s)&&!this.liveLayout&&this._isEditing)?a-this.cellPaddingTop:o,l=s.end-s.start;9<=e("ie")&&s.start+l<this.itemContainer.offsetWidth&&l++;f.set(r.container,{top:(t?this.cellPaddingTop:q)+"px",left:s.start+"px",width:l+"px",height:k+"px"});this._applyRendererLayout(s,r,c,l,k,"horizontal")}else for(q=s.startOffset;q<s.endOffset;q++)null==h[q]?h[q]=[s.item]:h[q].push(s.item)}},_layoutLabelItemsImpl:function(a,b,c,d,e){for(var h,
o,s=this.renderData,r=s.cells[a],q=this._getRowHeight(a),t=this.labelRendererHeight,k=n.getMarginBox(this.itemContainer).w,l=0;l<b.length;l++)if(h=b[l],null!=h){var u=this.expandRenderer?c[l]?q-this.expandRendererHeight:q:q;o=null==e||null==e[l]?this.cellPaddingTop:e[l]+this.verticalGap;for(var m=n.position(this._getCellAt(a,l)),w=m.x-s.gridTablePosX,R=0;R<h.length;R++){if(o+t+this.verticalGap<=u){var T=h[R];j.mixin(T,{start:w,end:w+m.w});var W=this._createRenderer(T,"label",this.labelRenderer,"dojoxCalendarLabel"),
Y=this.isItemBeingEdited(T)&&!this.liveLayout&&this._isEditing,Q=Y?this._getRowHeight(a)-this.cellPaddingTop:t;if(s.rtl)T.start=k-T.end,T.end=T.start+m.w;f.set(W.container,{top:(Y?this.cellPaddingTop:o)+"px",left:T.start+"px",width:m.w+"px",height:Q+"px"});this._applyRendererLayout(T,W,r,m.w,Q,"label")}else break;o+=t+this.verticalGap}for(;R<h.length;R++)null==d[l]?d[l]=[h[R]]:d[l].push(h[R])}},_applyRendererLayout:function(a,b,c,d,e,h){var o=this.isItemBeingEdited(a),n=this.isItemSelected(a),j=this.isItemHovered(a),
s=this.isItemFocused(a),q=b.renderer;q.set("hovered",j);q.set("selected",n);q.set("edited",o);q.set("focused",this.showFocus?s:!1);q.set("moveEnabled",this.isItemMoveEnabled(a,h));"label"!=h&&q.set("resizeEnabled",this.isItemResizeEnabled(a,h));this.applyRendererZIndex(a,b,j,n,o,s);q.updateRendering&&q.updateRendering(d,e);r.place(b.container,c);f.set(b.container,"display","block")},_getCellAt:function(a,b,c){if((void 0==c||!0==c)&&!this.isLeftToRight())b=this.renderData.columnCount-1-b;return this.gridTable.childNodes[0].childNodes[a].childNodes[b]},
_layoutExpandRenderers:function(a,b,c){if(this.expandRenderer){var d=this.renderData;if(d.expandedRow==a)null!=d.expandedRowCol&&-1!=d.expandedRowCol&&this._layoutExpandRendererImpl(d.expandedRow,d.expandedRowCol,null,!0);else if(null==d.expandedRow)for(var f=0;f<d.columnCount;f++)b[f]&&this._layoutExpandRendererImpl(a,d.rtl?d.columnCount-1-f:f,c[f],!1)}},_layoutExpandRendererImpl:function(a,b,c,d){var e=this.renderData,h=e.cells[a],d=this._getExpandRenderer(j.clone(e.dates[a][b]),c,a,b,d),a=n.position(this._getCellAt(a,
b));a.x-=e.gridTablePosX;this.layoutExpandRenderer(d,void 0,c,a,this.expandRendererHeight);r.place(d.domNode,h);f.set(d.domNode,"display","block")},layoutExpandRenderer:function(a,b,c,d,e){f.set(a.domNode,{left:d.x+"px",width:d.w+"px",height:e+"px",top:d.h-e-1+"px"})},_onItemEditBeginGesture:function(a){var b=this._edProps,c=b.editedItem,d=a.dates,f=this.newDate("resizeEnd"==b.editKind?c.endTime:c.startTime);if("label"!=b.rendererKind&&"move"==a.editKind&&(c.allDay||this.roundToDay))b.dayOffset=this.renderData.dateModule.difference(this.floorToDay(d[0],
!1,this.renderData),f,"day");this.inherited(arguments)},_computeItemEditingTimes:function(a,b,c,d,f){var e=this.renderData.dateModule,h=this._edProps;if("label"!=c)if(a.allDay||this.roundToDay){var o=this.isStartOfDay(d[0]);switch(b){case "resizeEnd":!o&&a.allDay&&(d[0]=e.add(d[0],"day",1));case "resizeStart":o||(d[0]=this.floorToDay(d[0],!0));break;case "move":d[0]=e.add(d[0],"day",h.dayOffset);break;case "resizeBoth":o||(d[0]=this.floorToDay(d[0],!0)),this.isStartOfDay(d[1])||(d[1]=this.floorToDay(e.add(d[1],
"day",1),!0))}}else d=this.inherited(arguments);return d},getTime:function(a,b,c,d){var f=this.renderData;null!=a&&(c=n.position(this.itemContainer,!0),a.touches?(d=void 0==d?0:d,b=a.touches[d].pageX-c.x,c=a.touches[d].pageY-c.y):(b=a.pageX-c.x,c=a.pageY-c.y));d=n.getContentBox(this.itemContainer);0>b?b=0:b>d.w&&(b=d.w-1);0>c?c=0:c>d.h&&(c=d.h-1);a=n.getMarginBox(this.itemContainer).w/f.columnCount;c=null==f.expandedRow?Math.floor(c/(n.getMarginBox(this.itemContainer).h/f.rowCount)):f.expandedRow;
d=n.getContentBox(this.itemContainer);f.rtl&&(b=d.w-b);d=Math.floor(b/a);b=Math.floor(1440*(b-d*a)/a);a=null;c<f.dates.length&&d<this.renderData.dates[c].length&&(a=this.newDate(this.renderData.dates[c][d]),a=this.renderData.dateModule.add(a,"minute",b));return a},_onGridMouseUp:function(a){this.inherited(arguments);if(this._gridMouseDown)this._gridMouseDown=!1,this._onGridClick({date:this.getTime(a),triggerEvent:a})},_onGridTouchEnd:function(a){this.inherited(arguments);var b=this._gridProps;if(b){if(!this._isEditing&&
(!b.fromItem&&!b.editingOnStart&&this.selectFromEvent(a,null,null,!0),!b.fromItem))this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(j.hitch(this,function(){delete this._pendingDoubleTap}),
this.doubleTapDelay)});this._gridProps=null}},_onRowHeaderClick:function(a){this._dispatchCalendarEvt(a,"onRowHeaderClick")},onRowHeaderClick:function(){},expandRendererClickHandler:function(a,b){k.stop(a);var c=b.get("rowIndex"),d=b.get("columnIndex");this._onExpandRendererClick(j.mixin(this._createItemEditEvent(),{rowIndex:c,columnIndex:d,renderer:b,triggerEvent:a,date:this.renderData.dates[c][d]}))},onExpandRendererClick:function(){},_onExpandRendererClick:function(a){this._dispatchCalendarEvt(a,
"onExpandRendererClick");a.isDefaultPrevented()||(-1!=this.getExpandedRowIndex()?this.collapseRow():this.expandRow(a.rowIndex,a.columnIndex))},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,triggerExtent:3,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!1})})},"url:dojox/calendar/templates/MatrixView.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\n\t<div  class="dojoxCalendarYearColumnHeader" data-dojo-attach-point="yearColumnHeader">\n\t\t<table><tr><td><span data-dojo-attach-point="yearColumnHeaderContent"></span></td></tr></table>\t\t\n\t</div>\t\n\t<div data-dojo-attach-point="columnHeader" class="dojoxCalendarColumnHeader">\n\t\t<table data-dojo-attach-point="columnHeaderTable" class="dojoxCalendarColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\t\t\n\t<div dojoAttachPoint="rowHeader" class="dojoxCalendarRowHeader">\n\t\t<table data-dojo-attach-point="rowHeaderTable" class="dojoxCalendarRowHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\t\n\t<div dojoAttachPoint="grid" class="dojoxCalendarGrid">\n\t\t<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\t\n\t<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n\t\t<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t</div>\t\n</div>\n',
"url:dojox/calendar/templates/ColumnViewSecondarySheet.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\n\t<div  data-dojo-attach-point="rowHeader" class="dojoxCalendarRowHeader">\n\t\t<table data-dojo-attach-point="rowHeaderTable" class="dojoxCalendarRowHeaderTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\t\n\t<div data-dojo-attach-point="grid" class="dojoxCalendarGrid">\n\t\t<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0"></table>\n\t</div>\n\t<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n\t\t<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n\t</div>\n</div>\n',
"dojox/calendar/VerticalRenderer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/calendar/_RendererMixin","dojo/text!./templates/VerticalRenderer.html"],function(l,m,k,j,e){return l("dojox.calendar.VerticalRenderer",[m,k,j],{templateString:e,postCreate:function(){this.inherited(arguments);this._applyAttributes()},_isElementVisible:function(e,d,c,b){var a;switch(e){case "startTimeLabel":a=this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(a))return!1;
break;case "endTimeLabel":if(a=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(a))return!1}return this.inherited(arguments)}})})},"dojox/calendar/_RendererMixin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","dojo/dom-class","dojo/Stateful"],function(l,m,k,j,e){return l("dojox.calendar._RendererMixin",e,{item:null,owner:null,edited:!1,focused:!1,hovered:!1,selected:!1,moveEnabled:!0,resizeEnabled:!0,_orientation:"vertical",_displayValue:"block",_displayValueMap:{},
visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:50},_setSelectedAttr:function(e){this._setState("selected",e,"Selected")},_setFocusedAttr:function(e){this._setState("focused",e,"Focused")},_setEditedAttr:function(e){this._setState("edited",e,"Edited")},_setHoveredAttr:function(e){this._setState("hovered",e,"Hovered")},_setState:function(e,d,c){this[e]!=d&&(j[d?"add":"remove"](this.stateNode||this.domNode,c),this._set(e,d))},_setItemAttr:function(e){null==
e?(this.item&&this.item.cssClass&&j.remove(this.domNode,this.item.cssClass),this.item=null):(null!=this.item?(this.item.cssClass!=e.cssClass&&this.item.cssClass&&j.remove(this.domNode,this.item.cssClass),this.item=m.mixin(this.item,e)):this.item=e,e.cssClass&&j.add(this.domNode,e.cssClass))},_setText:function(e,d,c){this.owner&&this.owner._setText(e,d,c)},_isElementVisible:function(e,d,c,b){var a=!0,f=this.visibilityLimits[e];switch(e){case "moveHandle":a=this.moveEnabled;break;case "resizeStartHandle":a=
this.mobile?this.resizeEnabled&&!d&&this.edited&&(-1==f||b>f):this.resizeEnabled&&!d&&(-1==f||b>f);break;case "resizeEndHandle":a=this.mobile?this.resizeEnabled&&!c&&this.edited&&(-1==f||b>f):this.resizeEnabled&&!c&&(-1==f||b>f);break;case "startTimeLabel":a=this.mobile?!d&&(!this.edited||this.edited&&(-1==f||b>f)):!d&&(-1==f||b>f);break;case "endTimeLabel":a=this.edited&&!c&&(-1==f||b>f);break;case "summaryLabel":a=this.mobile?!this.edited||this.edited&&(-1==f||b>f):-1==f||b>f}return a},_formatTime:function(e,
d){return this.owner&&null!=this.owner.get("formatItemTimeFunc")?this.owner.formatItemTimeFunc(d,e):e.dateLocaleModule.format(d,{selector:"time"})},getDisplayValue:function(){return this._displayValue},updateRendering:function(e,d){d=d||this.item.h;e=e||this.item.w;if(d||e){this.item.h=d;this.item.w=e;var c="vertical"==this._orientation?d:e,b=this.owner.renderData,a=0!=b.dateModule.compare(this.item.range[0],this.item.startTime),f=0!=b.dateModule.compare(this.item.range[1],this.item.endTime),n;null!=
this.beforeIcon&&(n="horizontal"!=this._orientation||this.isLeftToRight()?a:f,k.set(this.beforeIcon,"display",n?this.getDisplayValue("beforeIcon"):"none"));null!=this.afterIcon&&(n="horizontal"!=this._orientation||this.isLeftToRight()?f:a,k.set(this.afterIcon,"display",n?this.getDisplayValue("afterIcon"):"none"));this.moveHandle&&(n=this._isElementVisible("moveHandle",a,f,c),k.set(this.moveHandle,"display",n?this.getDisplayValue("moveHandle"):"none"));this.resizeStartHandle&&(n=this._isElementVisible("resizeStartHandle",
a,f,c),k.set(this.resizeStartHandle,"display",n?this.getDisplayValue("resizeStartHandle"):"none"));this.resizeEndHandle&&(n=this._isElementVisible("resizeEndHandle",a,f,c),k.set(this.resizeEndHandle,"display",n?this.getDisplayValue("resizeEndHandle"):"none"));this.startTimeLabel&&(n=this._isElementVisible("startTimeLabel",a,f,c),k.set(this.startTimeLabel,"display",n?this.getDisplayValue("startTimeLabel"):"none"),n&&this._setText(this.startTimeLabel,this._formatTime(b,this.item.startTime)));this.endTimeLabel&&
(n=this._isElementVisible("endTimeLabel",a,f,c),k.set(this.endTimeLabel,"display",n?this.getDisplayValue("endTimeLabel"):"none"),n&&this._setText(this.endTimeLabel,this._formatTime(b,this.item.endTime)));this.summaryLabel&&(n=this._isElementVisible("summaryLabel",a,f,c),k.set(this.summaryLabel,"display",n?this.getDisplayValue("summaryLabel"):"none"),n&&this._setText(this.summaryLabel,this.item.summary,!0))}}})})},"url:dojox/calendar/templates/VerticalRenderer.html":'<div class="dojoxCalendarEvent dojoxCalendarVertical" onselectstart="return false;">\n\t<div class="bg"></div>\n\t<dl style="width:100%;">\n\t\t<dd data-dojo-attach-point="beforeIcon" class="beforeIcon">\u25b2</dd>\n\t\t<dd data-dojo-attach-point="startTimeLabel" class="startTime"></dd>\n\t\t<dd data-dojo-attach-point="summaryLabel" class="summary"></dd>\n\t</dl>\t\n\t<span data-dojo-attach-point="afterIcon" class="afterIcon">\u25bc</span>\n\t<div data-dojo-attach-point="moveHandle" class="handle moveHandle" ></div>\n\t<div data-dojo-attach-point="resizeStartHandle" class="handle resizeStartHandle"></div>\n\t<div data-dojo-attach-point="resizeEndHandle" class="handle resizeEndHandle" ></div>\n\t<div data-dojo-attach-point="endTimeLabel" class="endTime"></div>\n</div>\n',
"dojox/calendar/HorizontalRenderer":function(){define("dojo/_base/declare,dojo/dom-style,dijit/_WidgetBase,dijit/_TemplatedMixin,dojox/calendar/_RendererMixin,dojo/text!./templates/HorizontalRenderer.html".split(","),function(l,m,k,j,e,h){return l("dojox.calendar.HorizontalRenderer",[k,j,e],{templateString:h,_orientation:"horizontal",visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:32,endTimeLabel:30},_displayValueMap:{beforeIcon:"inline",afterIcon:"inline"},
_displayValue:"inline",arrowPadding:12,_isElementVisible:function(d,c,b,a){var f;f=this.isLeftToRight();"startTimeLabel"==d&&(this.labelContainer&&(f&&b||!f&&c)?m.set(this.labelContainer,"marginRight",this.arrowPadding+"px"):m.set(this.labelContainer,"marginRight",0),this.labelContainer&&(!f&&b||f&&c)?m.set(this.labelContainer,"marginLeft",this.arrowPadding+"px"):m.set(this.labelContainer,"marginLeft",0));switch(d){case "startTimeLabel":f=this.item.startTime;if(this.item.allDay||this.owner.isStartOfDay(f))return!1;
break;case "endTimeLabel":if(f=this.item.endTime,this.item.allDay||this.owner.isStartOfDay(f))return!1}return this.inherited(arguments)},getDisplayValue:function(d){return(d=this._displayValueMap[d])?d:this._displayValue},postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"url:dojox/calendar/templates/HorizontalRenderer.html":'<div class="dojoxCalendarEvent dojoxCalendarHorizontal" onselectstart="return false;">\n\t<div class="bg" ></div>\n\t<div style="position:absolute;left:2px;bottom:2px" data-dojo-attach-point="beforeIcon" class="beforeIcon">\u25c4</div>\t\n\t<div data-dojo-attach-point="labelContainer" class="labels">\t\t\n\t\t<span data-dojo-attach-point="startTimeLabel" class="startTime"></span>\n\t\t<span data-dojo-attach-point="summaryLabel" class="summary"></span>\n\t\t<span  data-dojo-attach-point="endTimeLabel" class="endTime"></span>\n\t</div>\n\t<div style="position:absolute;right:2px;bottom:2px" data-dojo-attach-point="afterIcon" class="afterIcon">\u25ba</div>\n\t<div data-dojo-attach-point="moveHandle" class="handle moveHandle" ></div>\n\t<div data-dojo-attach-point="resizeStartHandle" class="handle resizeStartHandle"></div>\n\t<div data-dojo-attach-point="resizeEndHandle" class="handle resizeEndHandle" ></div>\t\n</div>\n',
"dojox/calendar/LabelRenderer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dojox/calendar/_RendererMixin","dojo/text!./templates/LabelRenderer.html"],function(l,m,k,j,e){return l("dojox.calendar.LabelRenderer",[m,k,j],{templateString:e,_orientation:"horizontal",resizeEnabled:!1,visibilityLimits:{resizeStartHandle:50,resizeEndHandle:-1,summaryLabel:15,startTimeLabel:45,endTimeLabel:30},_isElementVisible:function(e,d,c,b){switch(e){case "startTimeLabel":var a=
this.item.startTime;if(this.item.isAllDay||0==a.getHours()&&0==a.getMinutes()&&0==a.getSeconds()&&0==a.getMilliseconds())return!1}return this.inherited(arguments)},_displayValue:"inline",postCreate:function(){this.inherited(arguments);this._applyAttributes()}})})},"url:dojox/calendar/templates/LabelRenderer.html":'<div class="dojoxCalendarEvent dojoxCalendarLabel" onselectstart="return false;">\t\n\t<div class="labels">\n\t\t<span data-dojo-attach-point="startTimeLabel" class="startTime"></span>\n\t\t<span data-dojo-attach-point="summaryLabel" class="summary"></span>\n\t\t<span data-dojo-attach-point="endTimeLabel" class="endTime"></span>\n\t</div>\t\n\t<div data-dojo-attach-point="moveHandle" class="handle moveHandle" ></div>\n</div>\n',
"dojox/calendar/ExpandRenderer":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/event,dojo/_base/window,dojo/on,dojo/dom-class,dojo/dom-style,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/text!./templates/ExpandRenderer.html".split(","),function(l,m,k,j,e,h,d,c,b,a){return l("dojox.calendar.ExpandRenderer",[c,b],{templateString:a,baseClass:"dojoxCalendarExpand",owner:null,focused:!1,up:!1,down:!1,date:null,items:null,rowIndex:-1,columnIndex:-1,_setExpandedAttr:function(a){d.set(this.expand,
"display",a?"none":"inline-block");d.set(this.collapse,"display",a?"inline-block":"none");this._set("expanded",a)},_setDownAttr:function(a){this._setState("down",a,"Down")},_setUpAttr:function(a){this._setState("up",a,"Up")},_setFocusedAttr:function(a){this._setState("focused",a,"Focused")},_setState:function(a,b,c){this[a]!=b&&(h[b?"add":"remove"](this.stateNode||this.domNode,c),this._set(a,b))},_onClick:function(a){this.owner&&this.owner.expandRendererClickHandler&&this.owner.expandRendererClickHandler(a,
this)},_onMouseDown:function(a){k.stop(a);this.set("down",!0)},_onMouseUp:function(){this.set("down",!1)},_onMouseOver:function(a){this.up||(a=1==a.button,this.set("up",!a),this.set("down",a))},_onMouseOut:function(a){for(var b=a.relatedTarget;b!=a.currentTarget&&b!=j.doc.body&&null!=b;)b=b.parentNode;b!=a.currentTarget&&(this.set("up",!1),this.set("down",!1))}})})},"url:dojox/calendar/templates/ExpandRenderer.html":'<div class="dojoxCalendarExpand" onselectstart="return false;" data-dojo-attach-event="click:_onClick,touchstart:_onMouseDown,touchend:_onClick,mousedown:_onMouseDown,mouseup:_onMouseUp,mouseover:_onMouseOver,mouseout:_onMouseOut">\n\t<div class="bg"><span data-dojo-attach-point="expand">\u25bc</span><span style="display:none" data-dojo-attach-point="collapse">\u25b2</span></div>\t\n</div>\n',
"dojox/calendar/Keyboard":function(){define("dojo/_base/array,dojo/_base/lang,dojo/_base/declare,dojo/on,dojo/_base/event,dojo/keys".split(","),function(l,m,k,j,e,h){return k("dojox.calendar.Keyboard",null,{keyboardUpDownUnit:"minute",keyboardUpDownSteps:15,keyboardLeftRightUnit:"day",keyboardLeftRightSteps:1,allDayKeyboardUpDownUnit:"day",allDayKeyboardUpDownSteps:7,allDayKeyboardLeftRightUnit:"day",allDayKeyboardLeftRightSteps:1,postCreate:function(){this.inherited(arguments);this._viewHandles.push(j(this.domNode,
"keydown",m.hitch(this,this._onKeyDown)))},resizeModifier:"ctrl",maxScrollAnimationDuration:1E3,tabIndex:"0",focusedItem:null,_isItemFocused:function(d){return null!=this.focusedItem&&this.focusedItem.id==d.id},_setFocusedItemAttr:function(d){if(d!=this.focusedItem){var c=this.focusedItem;this._set("focusedItem",d);this.updateRenderers([c,this.focusedItem],!0);this.onFocusChange({oldValue:c,newValue:d})}null!=d&&(null!=this.owner&&null!=this.owner.get("focusedItem")&&this.owner.set("focusedItem",
null),null!=this._secondarySheet&&null!=this._secondarySheet.set("focusedItem")&&this._secondarySheet.set("focusedItem",null))},onFocusChange:function(){},showFocus:!1,_focusNextItem:function(d){if(!this.renderData||!this.renderData.items||0==this.renderData.items.length)return null;var c=-1,b=this.renderData.items,a=b.length-1,f=this.get("focusedItem");null==f?c=0<d?0:a:(l.some(b,m.hitch(this,function(a,b){var d=a.id==f.id;d&&(c=b);return d})),c=this._focusNextItemImpl(d,c,a));for(var e=!1,h=-1;h!=
c&&(!e||0!=c);){!e&&0==c&&(e=!0);h=b[c];if(null!=this.itemToRenderer[h.id]){this.set("focusedItem",h);break}h=c;c=this._focusNextItemImpl(d,c,a)}},_focusNextItemImpl:function(d,c,b){if(-1==c)c=0<d?0:b;else{if(0==c&&-1==d||c==b&&1==d)return c;c=0<d?++c:--c}return c},_handlePrevNextKeyCode:function(d,c){this.isLeftToRight()||(c=1==c?-1:1);this.showFocus=!0;this._focusNextItem(c);var b=this.get("focusedItem");!d.ctrlKey&&b&&this.set("selectedItem",b);b&&this.ensureVisibility(b.startTime,b.endTime,"both",
void 0,this.maxScrollAnimationDuration)},_keyboardItemEditing:function(d,c){e.stop(d);var b=this._edProps,a,f;b.editedItem.allDay||this.roundToDay||"label"==b.rendererKind?(a="up"==c||"down"==c?this.allDayKeyboardUpDownUnit:this.allDayKeyboardLeftRightUnit,f="up"==c||"down"==c?this.allDayKeyboardUpDownSteps:this.allDayKeyboardLeftRightSteps):(a="up"==c||"down"==c?this.keyboardUpDownUnit:this.keyboardLeftRightUnit,f="up"==c||"down"==c?this.keyboardUpDownSteps:this.keyboardLeftRightSteps);if("up"==
c||!this.isLeftToRight()&&"right"==c||this.isLeftToRight()&&"left"==c)f=-f;var h=d[this.resizeModifier+"Key"]?"resizeEnd":"move",j="resizeEnd"==h?b.editedItem.endTime:b.editedItem.startTime;a=this.renderData.dateModule.add(j,a,f);this._startItemEditingGesture([j],h,"keyboard",d);this._moveOrResizeItemGesture([a],"keyboard",d);this._endItemEditingGesture(h,"keyboard",d,!1);"move"==h?-1==this.renderData.dateModule.compare(a,j)?this.ensureVisibility(b.editedItem.startTime,b.editedItem.endTime,"start"):
this.ensureVisibility(b.editedItem.startTime,b.editedItem.endTime,"end"):this.ensureVisibility(b.editedItem.startTime,b.editedItem.endTime,"end")},_onKeyDown:function(d){var c=this.get("focusedItem");switch(d.keyCode){case h.ESCAPE:if(this._isEditing)this._editingGesture&&this._endItemEditingGesture("keyboard",d,!0),this._endItemEditing("keyboard",!0),this._edProps=null;break;case h.SPACE:e.stop(d);null!=c&&this.setItemSelected(c,d.ctrlKey?!this.isItemSelected(c):!0);break;case h.ENTER:e.stop(d);
if(null!=c)if(this._isEditing)this._endItemEditing("keyboard",!1);else if((d=this.itemToRenderer[c.id])&&0<d.length&&this.isItemEditable(c,d[0].kind))this._edProps={renderer:d[0],rendererKind:d[0].kind,tempEditedItem:c,liveLayout:this.liveLayout},this.set("selectedItem",c),this._startItemEditing(c,"keyboard");break;case h.LEFT_ARROW:e.stop(d);this._isEditing?this._keyboardItemEditing(d,"left"):this._handlePrevNextKeyCode(d,-1);break;case h.RIGHT_ARROW:e.stop(d);this._isEditing?this._keyboardItemEditing(d,
"right"):this._handlePrevNextKeyCode(d,1);break;case h.UP_ARROW:this._isEditing?this._keyboardItemEditing(d,"up"):this.scrollable&&this.scrollView(-1);break;case h.DOWN_ARROW:this._isEditing?this._keyboardItemEditing(d,"down"):this.scrollable&&this.scrollView(1)}}})})},"dojox/calendar/Mouse":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/_base/window,dojo/dom-geometry,dojo/mouse,dojo/on,dojo/keys".split(","),function(l,m,k,j,e,h,d,c){return m("dojox.calendar.Mouse",
null,{triggerExtent:3,postMixInProperties:function(){this.inherited(arguments);this.on("rendererCreated",j.hitch(this,function(b){var a=b.renderer,f;if(!a.__handles)a.__handles=[];f=c(a.domNode,"click",j.hitch(this,function(b){k.stop(b);this._onItemClick({triggerEvent:b,renderer:a,item:this.renderItemToItem(a.item,this.get("store"))})}));a.__handles.push(f);f=c(a.domNode,"dblclick",j.hitch(this,function(b){k.stop(b);this._onItemDoubleClick({triggerEvent:b,renderer:a,item:this.renderItemToItem(a.item,
this.get("store"))})}));a.__handles.push(f);f=c(a.domNode,"contextmenu",j.hitch(this,function(b){this._onItemContextMenu({triggerEvent:b,renderer:a,item:this.renderItemToItem(a.item,this.get("store"))})}));a.__handles.push(f);a.resizeStartHandle&&(f=c(a.resizeStartHandle,"mousedown",j.hitch(this,function(b){this._onRendererHandleMouseDown(b,a,"resizeStart")})),a.__handles.push(f));a.moveHandle&&(f=c(a.moveHandle,"mousedown",j.hitch(this,function(b){this._onRendererHandleMouseDown(b,a,"move")})),a.__handles.push(f));
a.resizeEndHandle&&(f=c(a.resizeEndHandle,"mousedown",j.hitch(this,function(b){this._onRendererHandleMouseDown(b,a,"resizeEnd")})),a.__handles.push(f));f=c(a.domNode,"mousedown",j.hitch(this,function(b){this._rendererMouseDownHandler(b,a)}));a.__handles.push(f);f=c(b.container,d.enter,j.hitch(this,function(c){a.item&&!this._editingGesture&&(this._setHoveredItem(a.item.item,b.renderer),this._onItemRollOver(this.__fixEvt({item:this.renderItemToItem(a.item,this.get("store")),renderer:a,triggerEvent:c})))}));
a.__handles.push(f);f=c(a.domNode,d.leave,j.hitch(this,function(b){a.item&&!this._editingGesture&&(this._setHoveredItem(null),this._onItemRollOut(this.__fixEvt({item:this.renderItemToItem(a.item,this.get("store")),renderer:a,triggerEvent:b})))}));a.__handles.push(f)}))},_onItemRollOver:function(b){this._dispatchCalendarEvt(b,"onItemRollOver")},onItemRollOver:function(){},_onItemRollOut:function(b){this._dispatchCalendarEvt(b,"onItemRollOut")},onItemRollOut:function(){},_rendererMouseDownHandler:function(b,
a){k.stop(b);var c=this.renderItemToItem(a.item,this.get("store"));this.selectFromEvent(b,c,a,!0);this._setTabIndexAttr&&this[this._setTabIndexAttr].focus()},_onRendererHandleMouseDown:function(b,a,d){k.stop(b);this.showFocus=!1;var h=a.item.item;if(!this.isItemBeingEdited(h))this._isEditing&&this._endItemEditing("mouse",!1),this.selectFromEvent(b,this.renderItemToItem(a.item,this.get("store")),a,!0),this._setTabIndexAttr&&this[this._setTabIndexAttr].focus(),this._edProps={editKind:d,editedItem:h,
rendererKind:a.rendererKind,tempEditedItem:h,liveLayout:this.liveLayout},this.set("focusedItem",this._edProps.editedItem);a=[];a.push(c(e.doc,"mouseup",j.hitch(this,this._editingMouseUpHandler)));a.push(c(e.doc,"mousemove",j.hitch(this,this._editingMouseMoveHandler)));h=this._edProps;h.handles=a;h.eventSource="mouse";h.editKind=d;this._startPoint={x:b.screenX,y:b.screenY}},_editingMouseMoveHandler:function(b){var a=this._edProps;if(this._editingGesture)this._autoScroll(b.pageX,b.pageY,!0)||this._moveOrResizeItemGesture([this.getTime(b)],
"mouse",b);else if(Math.abs(this._startPoint.x-b.screenX)>=this.triggerExtent||Math.abs(this._startPoint.y-b.screenY)>=this.triggerExtent)this._isEditing||this._startItemEditing(a.editedItem,"mouse"),a=this._edProps,this._startItemEditingGesture([this.getTime(b)],a.editKind,"mouse",b)},_editingMouseUpHandler:function(b){var a=this._edProps;this._stopAutoScroll();this._isEditing?(this._editingGesture&&this._endItemEditingGesture("mouse",b),this._endItemEditing("mouse",!1)):l.forEach(a.handles,function(a){a.remove()})},
_autoScroll:function(b,a,c){if(!this.scrollable||!this.autoScroll)return!1;var d=h.position(this.scrollContainer,!0),b=c?a-d.y:b-d.x,c=c?d.h:d.w;if(0>b||b>c)return step=Math.floor((0>b?b:b-c)/2)/3,this._startAutoScroll(step),!0;this._stopAutoScroll();return!1}})})},"url:dojox/calendar/templates/Calendar.html":'<div>\n\t<div data-dojo-attach-point="buttonContainer" class="buttonContainer">\n\t\t<div data-dojo-attach-point="toolbar" data-dojo-type="dijit.Toolbar" >\n\t\t\t<button data-dojo-attach-point="previousButton" data-dojo-type="dijit.form.Button" >\u25c4</button>\n\t\t\t<button data-dojo-attach-point="nextButton" data-dojo-type="dijit.form.Button" >\u25ba</button>\n\t\t\t<span data-dojo-type="dijit.ToolbarSeparator"></span>\n\t\t\t<button data-dojo-attach-point="todayButton" data-dojo-type="dijit.form.Button" />Today</button>\n\t\t\t<span data-dojo-type="dijit.ToolbarSeparator"></span>\n\t\t\t<button data-dojo-attach-point="dayButton" data-dojo-type="dijit.form.Button" >Day</button>\n\t\t\t<button data-dojo-attach-point="fourDaysButton" data-dojo-type="dijit.form.Button" >4 Days</button>\n\t\t\t<button data-dojo-attach-point="weekButton" data-dojo-type="dijit.form.Button" >Week</button>\t\t\t\n\t\t\t<button data-dojo-attach-point="monthButton" data-dojo-type="dijit.form.Button" >Month</button>\n\t\t</div>\n\t</div>\n\t<div data-dojo-attach-point="viewContainer" class="viewContainer"></div>\n</div>\n',
"dijit/Toolbar":function(){define("require,dojo/_base/declare,dojo/has,dojo/keys,dojo/ready,./_Widget,./_KeyNavContainer,./_TemplatedMixin".split(","),function(l,m,k,j,e,h,d,c){k("dijit-legacy-requires")&&e(0,function(){l(["dijit/ToolbarSeparator"])});return m("dijit.Toolbar",[h,c,d],{templateString:'<div class="dijit" role="toolbar" tabIndex="${tabIndex}" data-dojo-attach-point="containerNode"></div>',baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?
[j.LEFT_ARROW]:[j.RIGHT_ARROW],this.isLeftToRight()?[j.RIGHT_ARROW]:[j.LEFT_ARROW])}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(l,m,k,j){return l("dijit.ToolbarSeparator",[k,j],{templateString:'<div class="dijitToolbarSeparator dijitInline" role="presentation"></div>',buildRendering:function(){this.inherited(arguments);m.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dojo/store/Observable":function(){define(["../_base/kernel",
"../_base/lang","../_base/Deferred","../_base/array"],function(l,m,k,j){l=function(e){function h(b,c){var d=e[b];d&&(e[b]=function(b){if(a)return d.apply(this,arguments);a=!0;try{var f=d.apply(this,arguments);k.when(f,function(a){c("object"==typeof a&&a||b)});return f}finally{a=!1}})}var d=[],c=0,e=m.delegate(e);e.notify=function(a,b){c++;for(var e=d.slice(),h=0,j=e.length;h<j;h++)e[h](a,b)};var b=e.query;e.query=function(a,h){var h=h||{},r=b.apply(this,arguments);if(r&&r.forEach){var t=m.mixin({},
h);delete t.start;delete t.count;var q=e.queryEngine&&e.queryEngine(a,t),o=c,s=[],l;r.observe=function(a,b){1==s.push(a)&&d.push(l=function(a,d){k.when(r,function(f){var r=f.length!=h.count,t,k;if(++o!=c)throw Error("Query is out of date, you must observe() the query prior to any data modifications");var l,u=-1,m=-1;if(void 0!==d)for(t=0,k=f.length;t<k;t++){var w=f[t];if(e.getIdentity(w)==d){l=w;u=t;(q||!a)&&f.splice(t,1);break}}if(q){if(a&&(q.matches?q.matches(a):q([a]).length))t=-1<u?u:f.length,
f.splice(t,0,a),m=j.indexOf(q(f),a),f.splice(t,1),h.start&&0==m||!r&&m==f.length?m=-1:f.splice(m,0,a)}else a&&(void 0!==d?m=u:h.start||(m=e.defaultIndex||0,f.splice(m,0,a)));if((-1<u||-1<m)&&(b||!q||u!=m)){r=s.slice();for(t=0;f=r[t];t++)f(a||l,u,m)}})});var f={};f.remove=f.cancel=function(){var b=j.indexOf(s,a);-1<b&&(s.splice(b,1),s.length||d.splice(j.indexOf(d,l),1))};return f}}return r};var a;h("put",function(a){e.notify(a,e.getIdentity(a))});h("add",function(a){e.notify(a)});h("remove",function(a){e.notify(void 0,
a)});return e};m.setObject("dojo.store.Observable",l);return l})},"js/webext/widgets/select/WebextMultiSelect":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/aspect,dojo/dnd/Source,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/mouse,dojo/on,dojo/json,dojo/when,dijit/form/CheckBox,dijit/registry,js/webext/widgets/select/WebextSelect,js/webext/widgets/Util".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return m("js.webext.widgets.select.WebextMultiSelect",
[o],{templateString:'<div class="webext-multi-select combo-check-box-select filtering-scroll-select" data-dojo-attach-point="webextMultiSelect"><div class="combo-box-attach" data-dojo-attach-point="comboBoxAttachPoint"></div><div data-dojo-attach-point="clearSelectedItemsAttachPoint"></div><div class="selected-items-list" data-dojo-attach-point="selectedItemsAttachPoint"></div></div>',orderable:!1,showClear:!0,idAttribute:"id",postCreate:function(){var a=this;this._selectedItems={};this.allowNone=
!1;if(!this.readOnly){var b=d.create("div",{innerHTML:this.clearSelectedItemsLabel||i18n("Clear Selection"),className:"linkPointer clear-selected-items"});d.place(b,a.clearSelectedItemsAttachPoint);f(b,"click",function(){l.forEach(a.items.slice(),function(b){a.removeItem(b)})})}if(!0===a.orderable)h.add(a.webextMultiSelect,"orderable-multi-select"),a.dndSource=new e(a.selectedItemsAttachPoint,{copyOnly:!1,copyState:function(){return!1},horizontal:!1,onDndDrop:function(b,c,d,f){this!==b||this!==f||
(null!==f.current&&(c=a.itemIndex(c[0].id),b=a.items[c],a.items.splice(c,1),c=a.itemIndex(f.current[a.idAttribute]),f.before||c++,a.items.splice(c,0,b),a.onReorder(a.items),a.updateSelectedItemsDisplay()),this.onDndCancel())}});this.inherited(arguments)},addItem:function(a){a&&a[this.searchAttr]&&(this.items.push(a),this._createAndShowSelectedItem(a),h.add(this.domNode,"has-value"),this.onAdd(a))},removeItem:function(a){var b=this;if(a){var c;l.forEach(b.items,function(d){d[b.idAttribute]===a[b.idAttribute]&&
(c=d)});(new s).removeFromArray(b.items,c);d.destroy(b._selectedItems[a[b.idAttribute]]);b.placeHolder||b.dropDown.set("placeHolder",i18n("%s Selected",b.items.length));0===b.items.length&&h.remove(b.domNode,"has-value");b.onRemove(a)}},updateSelectedItemsDisplay:function(){var a=this;l.forEach(a.items,function(b){d.destroy(a._selectedItems[b[a.idAttribute]]);a._createAndShowSelectedItem(b)})},_setInitialValue:function(){var a=this;this.items=[];a.value&&l.forEach(a.value,function(b){a.addItem(b)})},
_attachDropDownEvents:function(){var a=this;j.before(a.dropDown,"_setBlurValue",function(){a.dropDown.set("value","",!1,"",{})})},addOrRemoveItem:function(a){this.itemSelected(a)?this.removeItem(a):this.addItem(a)},_setupStylingInterceptors:function(a){var b=this;j.around(a,"_createOption",function(c){return function(e,h){var o=c.apply(a,arguments);b.formatDropDownLabel(o,e);var n=new t({checked:b.itemSelected(e)});d.place(n.domNode,o,"first");o.checkBox=n;f(o,"mouseup",function(a){n.set("checked",
!n.get("checked"));b.addOrRemoveItem(e);k.stop(a)});f(n,"click",function(a){n.set("checked",!n.get("checked"));k.stop(a)});return o}})},_createSelectedItem:function(e,o){var n=this,j,s;n.orderable?(j=d.create("div",{id:e[n.idAttribute]}),s=d.create("div",{className:"selected-item-container",title:o},j),h.add(s,"dojoDndItem"),b.set(s,"cursor","move"),d.create("div",{className:"selected-item-orderable-handle",innerHTML:"::"},s)):j=s=d.create("div",{className:"selected-item-container",title:o});this.own(f(s,
a.enter,function(){n.onSelectedRollOver(e,s)}));this.own(f(s,a.leave,function(){n.onSelectedRollOut(e,s)}));var r=null;n.readOnly||(r=d.create("div",{className:"remove-selected-item",innerHTML:"x"},s),this.own(f(r,"click",function(){n.removeItem(e)})));var q=d.create("div",{className:"selected-item-label",innerHTML:o.escape()},s);if(this.dropDown){var t=c.position(this.dropDown.domNode).w;b.set(q,"max-width",t-22+"px")}this.formatSelectedItem(s,e,q,r);return n._selectedItems[e[n.idAttribute]]=j},
_createAndShowSelectedItem:function(a){a=this._createSelectedItem(a,a[this.searchAttr]);this.orderable?this.dndSource.insertNodes(!1,[a]):d.place(a,this.selectedItemsAttachPoint);this.placeHolder||this.dropDown.set("placeHolder",i18n("%s Selected",this.items.length))},itemSelected:function(a){var b=this,c=!1;l.forEach(this.items,function(d){d[b.idAttribute]===a[b.idAttribute]&&(c=!0)});return c},itemIndex:function(a){var b=this;return l.map(b.items,function(a){return a[b.idAttribute]}).indexOf(a)},
formatSelectedItem:function(){},onSelectedRollOver:function(){},onSelectedRollOut:function(){},onAdd:function(){},onRemove:function(){},onReorder:function(){},_getValueAttr:function(){var a=this,b=[];l.forEach(a.items,function(c){b.push(c[a.idAttribute])});return b},_setValueAttr:function(a){var b=this,c=a;"string"===typeof a&&""!==a?(c=n.parse(a,!0),l.forEach(c,function(a){r(b.store.get(a),function(c){var d={};d[b.idAttribute]=a;d[b.searchAttr]=c[b.searchAttr];b.addItem(d)})})):o.prototype._setValueAttr.call(b,
a)}})})},"js/webext/widgets/Util":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/Color,dojo/_base/kernel,dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/_base/xhr,dojo/request/xhr,dojo/Deferred,dojo/aspect,dojo/dom-attr,dojo/dom-construct,dojo/dom-class,js/webext/widgets/Config,js/webext/widgets/Dialog,dojox/html/entities,dojo/json,dojo/cookie,dojo/dom-geometry,dijit/_BidiSupport,js/webext/widgets/BidiDateUtil,js/webext/widgets/Alert".split(","),function(l,m,k,j,e,h,d,c,
b,a,f,n,r,t,q,o,s,u,w,v,x,y,C){function B(a){a||(a={});if(bootstrap){var b=bootstrap.apiTokenName||bootstrap.expectedSessionCookieName;if(b){var c=util.getCookie(b);c&&(a[b]=c)}}return a}var A=null,z=null;if(!j.global.config)j.global.config=new q;var E=function(){},D=l([],{_i18nLoaded:null,i18nLoaded:null,timeFormatPattern:void 0,dateFormatPattern:void 0,baseTextDir:void 0,calendar:void 0,constructor:function(){this._i18nLoaded=new a;this.i18nLoaded=this._i18nLoaded.promise;this.msPerSecond=1E3;this.msPerMinute=
60*this.msPerSecond;this.msPerHour=60*this.msPerMinute;this.msPerDay=24*this.msPerHour;this.msPerWeek=7*this.msPerDay;this.msTimezoneOffset=(new Date).getTimezoneOffset()*this.msPerMinute},isEmpty:function(a){var b=!0,c=null;for(c in a)if(b=!1,c)break;return b},noop:E,combineDateAndTime:function(a,b){var c=new Date(a),d=new Date(b),f=c.getFullYear(),e=c.getMonth(),c=c.getDate(),h=d.getHours(),d=d.getMinutes();return y.fromGregorian(new Date(f,e,c,h,d))},getStartOfWeek:function(a){for(var b=new Date(a);0<
b.getDay();)b=new Date(b.valueOf()-23*util.msPerHour);var a=b.getFullYear(),c=b.getMonth(),b=b.getDate();return y.fromGregorian(new Date(a,c,b))},getStartOfWorkWeek:function(a){for(var b=new Date(a);1!==b.getDay();)b=new Date(b.valueOf()-23*util.msPerHour);var a=b.getFullYear(),c=b.getMonth(),b=b.getDate();return y.fromGregorian(new Date(a,c,b))},getEndOfWeek:function(a){for(var b=new Date(a);6>b.getDay();)b=new Date(b.valueOf()+23*util.msPerHour);var a=b.getFullYear(),c=b.getMonth(),b=b.getDate();
return y.fromGregorian(new Date(a,c,b,23,59,59,999))},getEndOfWorkWeek:function(a){for(var b=new Date(a);0<b.getDay();)b=new Date(b.valueOf()+23*util.msPerHour);var a=b.getFullYear(),c=b.getMonth(),b=b.getDate();return y.fromGregorian(new Date(a,c,b))},getStartOfMonth:function(a){var b=new Date(a),a=b.getFullYear(),b=b.getMonth();return y.fromGregorian(new Date(a,b,1))},getEndOfMonth:function(a){var b=new Date(a),a=b.getFullYear(),b=b.getMonth(),c=32-(new Date(a,b,32)).getDate();return y.fromGregorian(new Date(a,
b,c))},shiftMonths:function(a,b){var c=new Date(a),d=c.getFullYear(),f=c.getMonth()+b,e=c.getDate(),h=c.getHours(),o=c.getMinutes(),n=c.getSeconds(),c=c.getMilliseconds();return y.fromGregorian(new Date(d,f,e,h,o,n,c))},shiftWeeks:function(a,b){var c=new Date(a),d=c.getFullYear(),f=c.getMonth(),e=c.getDate()+7*b,h=c.getHours(),o=c.getMinutes(),n=c.getSeconds(),c=c.getMilliseconds();return y.fromGregorian(new Date(d,f,e,h,o,n,c))},shiftDays:function(a,b){var c=new Date(a),d=c.getFullYear(),f=c.getMonth(),
e=c.getDate()+b,h=c.getHours(),o=c.getMinutes(),n=c.getSeconds(),c=c.getMilliseconds();return y.fromGregorian(new Date(d,f,e,h,o,n,c))},shiftHours:function(a,b){var c=new Date(a),d=c.getFullYear(),f=c.getMonth(),e=c.getDate(),h=c.getHours()+b,o=c.getMinutes(),n=c.getSeconds(),c=c.getMilliseconds();return y.fromGregorian(new Date(d,f,e,h,o,n,c))},shiftMinutes:function(a,b){var c=new Date(a),d=c.getFullYear(),f=c.getMonth(),e=c.getDate(),h=c.getHours(),o=c.getMinutes()+b,n=c.getSeconds(),c=c.getMilliseconds();
return y.fromGregorian(new Date(d,f,e,h,o,n,c))},formatDateTime:function(a){if(!a)return"";if("string"===typeof a)return a;"number"===typeof a&&(a=new Date(a));return this.dateOnlyFormat(a,this.dateFormatPattern+" "+this.timeFormatPattern)},dateFormatter:function(a){var b="";a&&(b=util.dateFormatShort(a));return b=util.wrapCell(b)},tableDateFormatter:function(a,b){var c="";b&&(c=util.dateFormatShort(b));return c},dateFormatShort:function(a){var b=null,a=new Date(a);null!==a&&!isNaN(a.valueOf())&&
(b=y.formatBidiDate(a,{formatLength:"short",fullYear:!0,datePattern:this.dateFormatPattern,timePattern:this.timeFormatPattern}));return b},dateFormatShortSeconds:function(a){var b=null,a=new Date(a);null!==a&&(b=y.formatBidiDate(a,{selector:"time",formatLength:"medium"}));return b},dayFormatShort:function(a){var b=null,a=new Date(a);null!==a&&(b=y.formatBidiDate(a,{selector:"date",formatLength:"short",fullYear:!0,datePattern:this.dateFormatPattern}));return b},dateOnlyFormat:function(a,b){var c=null,
d=new Date(a);null!==d&&(c=y.formatBidiDate(d,{selector:"date",datePattern:b}));return c},timeOnlyFormat:function(a,b){var c=null,d=new Date(a);null!==d&&(c=y.formatBidiDate(d,{selector:"time",timePattern:b}));return c},fileSizeFormat:function(a,b){"number"!==typeof b?b=1:0>b?b=0:20<b&&(b=20);var c=parseFloat(a),d=(c/1024).toFixed(b),f=(d/1024).toFixed(b),e=(f/1024).toFixed(b),h=(e/1024).toFixed(b),o="";return o=1>d?i18n("%s bytes",c):1>f?i18n("%s KB",d):1>e?i18n("%s MB",f):1>h?i18n("%s GB",e):i18n("%s TB",
h)},durationFormatter:function(a,b){var c="";b&&(c=util.formatDuration(b));return c},formatDuration:function(a,b){for(var c=0,d=0,f=0,e=b&&b.roundToNearestSecond;36E5<=a;)c++,a-=36E5;for(;6E4<=a;)d++,a-=6E4;for(;1E3<=a;)f++,a-=1E3;e&&500<=a&&f++;d=""+d;f=""+f;1===d.length&&(d="0"+d);1===f.length&&(f="0"+f);return""+c+":"+d+":"+f},workflowIdNameFormatter:function(a){var b=a.indexOf(":"),c=a.substring(0,b),a=a.substring(b+1,a.length);return c=util.wrapCell('<a href="#configuration/'+c+'">'+a+"</a>")},
projectIdNameFormatter:function(a){var b=a.indexOf(":"),c=a.substring(0,b),a=a.substring(b+1,a.length);return c=util.wrapCell('<a href="#project/'+c+'">'+a+"</a>")},buildLifeIdFormatter:function(a){return util.centerCell('<a href="#build/'+a+'">'+a+"</a>")},buildLifeOrRequestFormatter:function(a){var b=a.indexOf("d");"L"===a.substring(b+2,b+3)?(b=a.substring(b+7,a.length),a='<a href="#build/'+b+'">'+a+"</a>"):(b=a.substring(b+10,a.length),a='<a href="#buildRequest/'+b+'">'+a+"</a>");return util.centerCell(a)},
clearAppState:function(){appState={}},generateWorkflowDetails:function(){var a=[];void 0!==appState.workflow&&(appState.workflow.active||a.push({hideLabel:!0,value:"This configuration has been deactivated, and is read-only.",className:"redNotice"}),appState.workflow.deactivatedDependencies&&a.push({hideLabel:!0,value:"One or more of this configuration's dependencies have been deleted.<br/>View the dependency configuration page to view or remove these dependencies.",className:"redNotice"}),a.push({label:"Name:",
value:appState.workflow.name}),a.push({label:"Description:",value:appState.workflow.description}),a.push({label:"Template:",value:appState.workflow.templateName}),a.push({label:"ID:",value:appState.workflow.id}),a.push({label:"Source Config:",value:appState.workflow.sourceConfig}),a.push({label:"Last Modified By:",value:appState.workflow.userWhoLastModified}),a.push({label:"Created By:",value:appState.workflow.createdBy}));return a},setupTimeDateFormat:function(a,b){this.dateFormatPattern=b?b:void 0;
this.timeFormatPattern=a?a:void 0},loadI18n:function(a,b){var d=this,b=b||E,f=bootstrap.contentUrl+"conf/locale/"+a+".json",e=bootstrap.contentUrl+"conf/locale/default.json",h=!1;a&&c.get({url:f,handleAs:"json",method:"GET",load:function(a){A=a;d._i18nLoaded.resolve();b()},error:function(){null!==z&&(A=z,d._i18nLoaded.resolve(),b());h=!0}});c.get({url:e,handleAs:"json",method:"GET",load:function(c){if(!a||h)A=c,d._i18nLoaded.resolve(),b();z=c}});return this._i18nLoaded.promise},loadConfig:function(a,
b){var b=b||E,d=bootstrap.configUrl;a&&(d=bootstrap.contentUrl+"conf/roles/"+a+".json");var f=bootstrap.contentUrl+"conf/roles/default.json",e=!1,h=null;d&&c.get({url:d,handleAs:"json",method:"GET",sync:!0,load:function(a){config.setData(a);b()},error:function(){null!==h&&(config.setData(h),b());e=!0}});(!d||e)&&c.get({url:f,handleAs:"json",method:"GET",load:function(a){config.setData(a);b();h=a}})},removeFromArray:function(a,b,c,d){var f=!1,e=0,d=!0;c||(c=function(a,b){return a===b});for(e=0;e<a.length&&
(!c(a[e],b)||!(f=!0,a.splice(e,1),d));e++);return f},removeFirstMatchFromArray:function(a,b,c){this.removeFromArray(a,b,c,!0)},getNamedProperty:function(a,b){var c;m.forEach(a,function(a){a.name===b&&(c=a)});return c},getNamedPropertyValue:function(a,b){var c,d=this.getNamedProperty(a,b);if(void 0!==d)c=d.value;return c},populatePropValueAndLabel:function(a,b){var c=this.getNamedProperty(a,b.name);if(c&&(c.value||""===c.value))if(b.value=c.value,"HTTP_SELECT"===b.type||"HTTP_MULTI_SELECT"===b.type)b.defaultLabel=
c.label},updateWebextMultiSelectData:function(a,b,c,d,f){a.onAdd=function(a){var e=[],h=[];b[c]&&b[d]&&(e=b[c].split(","),h=b[d].split(","));-1===m.indexOf(e,a.value)&&(e.push(a.value),h.push(a.label),f?(b.set(c,e.join(",")),b.set(d,h.join(","))):(b[c]=e.join(","),b[d]=h.join(",")))};a.onRemove=function(a){var e=[],h=[];b[c]&&b[d]&&(e=b[c].split(","),h=b[d].split(","));a=m.indexOf(e,a.value);-1!==a&&(e.splice(a,1),h.splice(a,1),f?(b.set(c,e.join(",")),b.set(d,h.join(","))):(b[c]=e.join(","),b[d]=
h.join(",")))}},isDarkColor:function(a){a=(new k(a)).toRgb();return 0.5<1-(0.25*a[0]+0.6*a[1]+0.1*a[2])/255},getTint:function(a,b){return this._alterColor(a,b||0.6,!0)},getShade:function(a,b){return this._alterColor(a,b||0.6)},_alterColor:function(a,b,c){var a=(new k(a)).toRgb(),d=[];m.forEach(a,function(a){c?d.push(b*(255-a)+a):d.push(b*a)});return k.fromArray(d).toHex()},mouseCoords:function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+d.body().scrollLeft-d.body().clientLeft,y:a.clientY+
d.body().scrollTop-d.body().clientTop}},getPosition:function(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;b+=a.offsetLeft;c+=a.offsetTop;return{x:b,y:c}},getMouseOffset:function(a,b){var b=b||j.global.event,c=this.getPosition(a),d=this.mouseCoords(b);return{x:d.x-c.x,y:d.y-c.y}},getObjectBounds:function(a){var b=this.getPosition(a);return{x1:b.x,y1:b.y,x2:b.x+a.offsetWidth,y2:b.y+a.offsetHeight}},isChild:function(a,b){var c=a.parentNode;return c?b===c.id?!0:this.isChild(c,
b):!1},getGmtOffset:function(){return-6E4*(new Date).getTimezoneOffset()},getOnClickLink:function(a,b){var c=r.create("a");c.className="link";c.onclick=function(){navBar.setHash(a)};if(b)c.innerHTML=b.escape();return c},setCookie:function(a,b,c,d){var f=a;d?f+="_"+d:(this.clearCookie(a),d=0);if(b){var e={path:"/"};if(c)e.expires=c;if("https:"===document.location.protocol)e.secure=!0;for(var c=0,h=b.substr(0,3900);0<h.length;)w(f,h,e),d+=1,f=a+"_"+(""+d),c+=3900,h=b.substr(c,3900)}},getCookie:function(a,
b){var c=a;b?c+="_"+b:b=0;var d;for((c=w(c))&&(d="");c;)d+=c,b+=1,c=a+"_"+(""+b),c=w(c);return d},clearCookie:function(a,b){var c=a;void 0!==b&&(c=a+"_"+b);w(c)&&(w(c,"DELETED",{expires:(new Date(0)).toUTCString()}),this.clearCookie(a,(b||0)+1))},addClass:function(a,b){j.deprecated("js.webext.widgets.Util#addClass","Use dojo.addClass instead");t.add(a,b)},removeClass:function(a,b){j.deprecated("js.webext.widgets.Util#removeClass","Use dojo.removeClass instead");t.remove(a,b)},appendTextSpan:function(a,
b){var c=r.create("span");c.innerHTML=b;a.appendChild(c)},randomString:function(a){for(var b="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),c="",d=0,d=0;d<a;d++)c+=b[Math.floor(Math.random()*b.length)];return c},clone:function(a){return e.clone(a)},log:function(){if(h("ie")){var a=[];m.forEach(arguments,function(b){a.push(u.stringify(b))})}},cancelBubble:function(a){j.global.event?j.global.event.cancelBubble=!0:a.stopPropagation()},setBaseTextDir:function(a){D.baseTextDir=a},getBaseTextDir:function(){return D.baseTextDir},
getBTD:function(){return this.getBaseTextDir()},getResolvedBTD:function(a){return this.getResolvedBaseTextDir(a)},getResolvedBaseTextDir:function(a){return"auto"===D.baseTextDir?(-1<a.indexOf(">")&&(a=a.replace(/<\/?[^>]+(>|$)/g,"")),x.prototype._checkContextual(a)):D.baseTextDir},applyBTD:function(a){return!D.baseTextDir||!a||-1<a.indexOf("\u202a")||-1<a.indexOf("\u202b")?a:("rtl"===D.prototype.getResolvedBaseTextDir(a)?"\u202b":"\u202a")+a+"\u202c"},getUIDirAlign:function(){return v.isBodyLtr()?
"left":"right"},getUIDir:function(){return v.isBodyLtr()?"ltr":"rtl"},setCalendar:function(a){D.calendar=a},getCalendar:function(){return D.calendar},getIE:function(){var a=null,b=window.navigator.userAgent,c=b.indexOf("MSIE");if(0<c)a=parseInt(b.substring(c+5,b.indexOf(".",c)),10);else if(b.match(/Trident\/7\./)||b.match(/Trident\/4\./))a=11;return a},getNormalizedRegExp:function(a){var b;"^"!==a[0]&&(a="^"+a);"$"!==a[a.length-1]&&(a+="$");try{b=RegExp(a)}catch(c){b=/^a/}return b},downloadFile:function(a){11===
this.getIE()?window.open(a):window.location.href=a},createDownloadAnchor:function(a,b){if(11===this.getIE())a.target="_blank";return r.create("a",a,b)},i18n:function(a){var b=null,c="";if(!a)return a;A&&((b=A[a])||(b=A[a.replace(/(\s)+/g,"$1")]));z&&!b&&((b=z[a])||(b=z[a.replace(/(\s)+/g,"$1")]));b||(b=a);if(b)var d=arguments,f=0,c=b.replace(/%([0-9]+|s)/g,function(a,b){var c;c="s"===b?++f:parseInt(b,10);return c>d.length||1>c?a:d[c]});return c=c.replace(" :","\u00a0:")},escape:function(a){var b=
a;a&&(b=a.escape());return b},setTestId:function(a,b){n.set(a,"data-test-id",b)},encodeIgnoringSlash:function(a){return a?encodeURIComponent(a).replace(/%2F/g,"/"):a}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){return m.indexOf(this,a)};if(!Array.prototype.lastIndexOf)Array.prototype.lastIndexOf=function(a){j.deprecated("Array::lastIndexOf","see dojo/_base/array::lastIndexOf");return m.lastIndexOf(this,a)};String.prototype.cap=function(){return this.charAt(0).toUpperCase()+this.slice(1)};
String.prototype.escape=function(){return s.encode(this)};String.prototype.escapeHTML=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;")};var G=function(a){var b=a.error;a.error=b?function(a){if(401===a.status)navBar.onSessionExpired();else b.apply(this,arguments)}:function(a){if(401===a.status)navBar.onSessionExpired()};if(!a.headers)a.headers={};if(bootstrap){var c=bootstrap.apiTokenName||bootstrap.expectedSessionCookieName;if(c){var d=util.getCookie(c);d&&(a.headers[c]=d)}}};(function(){var a=
c.get;dojo.xhrGet=dojo.xhr.get=function(b){G(b);return a.apply(this,arguments)};var b=c.post;dojo.xhrPost=dojo.xhr.post=function(a){G(a);return b.apply(this,arguments)};var d=c.put;dojo.xhrPut=dojo.xhr.put=function(a){G(a);return d.apply(this,arguments)};var f=c.del;dojo.xhrDelete=dojo.xhr.del=function(a){G(a);return f.apply(this,arguments)}})();j.global.i18n=function(){return D.prototype.i18n.apply(null,arguments)};l=function(a){return function(b,c){c||(c={});c.headers=B(c.headers);var d=a(b,c);
d.then(E,function(a){console.error("Error processing result from load:",a,a.message);401===(a.response.status||a.status)&&(new C({title:i18n("Authentication Error"),message:i18n("401: User not authenticated.  Log in to continue.")})).startup()});return d}};f.around(b,"put",l);f.around(b,"post",l);f.around(b,"del",l);return D})},"js/webext/widgets/Config":function(){define(["dojo/_base/declare","dojo/_base/array"],function(l,m){return l([],{data:null,constructor:function(k){this.setData(k)},setData:function(k){(this.data=
k?k:this.defaultRoleConfig)&&this.data.tabSets&&m.forEach(this.data.tabSets,function(j){m.forEach(j.tabs,function(e){e.tabSet=j;e.hashPattern=j.id+"/"+e.id})})},getTabSet:function(k){if(!k)k=this.data.defaultTabSet;var j=null;m.forEach(this.data.tabSets,function(e){e.id===k&&(j=e)});return j},getTab:function(k,j){var e=null,h=this.getTabSet(k);if(null!==h){if(!j)j=h.defaultTab;m.forEach(h.tabs,function(d){d.id===j&&(e=d)})}return e},getBreadcrumb:function(k){var j=null;m.forEach(this.data.breadcrumbItems,
function(e){e.id===k&&(j=e)});return j},getProperty:function(k){return this.data[k]},getFunctionResult:function(k){var j=null,k=this.data[k];void 0!==k&&(j=k());return j}})})},"dojo/cookie":function(){define("dojo/cookie",["./_base/kernel","./regexp"],function(l,m){l.cookie=function(k,j,e){var h=document.cookie,d;if(1==arguments.length)d=(d=h.match(RegExp("(?:^|; )"+m.escapeString(k)+"=([^;]*)")))?decodeURIComponent(d[1]):void 0;else{e=e||{};h=e.expires;if("number"==typeof h){var c=new Date;c.setTime(c.getTime()+
864E5*h);h=e.expires=c}if(h&&h.toUTCString)e.expires=h.toUTCString();var j=encodeURIComponent(j),h=k+"="+j,b;for(b in e)h+="; "+b,c=e[b],!0!==c&&(h+="="+c);document.cookie=h}return d};l.cookie.isSupported=function(){if(!("cookieEnabled"in navigator))this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1});return navigator.cookieEnabled};return l.cookie})},"dijit/_BidiSupport":function(){define(["./_WidgetBase"],
function(l){var m,k,j;l.extend({getTextDir:function(e){return"auto"==this.textDir?this._checkContextual(e):this.textDir},_checkContextual:function(e){return(e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(e))?"z">=e[0]?"ltr":"rtl":this.dir?this.dir:this.isLeftToRight()?"ltr":"rtl"},applyTextDir:function(e,h){var d="auto"==this.textDir?this._checkContextual(h):this.textDir;if(e.dir!=d)e.dir=d},enforceTextDirWithUcc:function(e,h){return this.textDir?(e.originalText=
h,("ltr"==("auto"==this.textDir?this._checkContextual(h):this.textDir)?m:k)+h+j):h},restoreOriginalText:function(e){if(e.originalText)e.text=e.originalText,delete e.originalText;return e}});m="\u202a";j="\u202c";k="\u202b";return l})},"js/webext/widgets/BidiDateUtil":function(){define("dojo/date,dojo/date/locale,dojox/date/islamic,dojox/date/islamic/Date,dojox/date/islamic/locale,dojox/date/hebrew,dojox/date/hebrew/Date,dojox/date/hebrew/locale".split(","),function(l,m,k,j,e,h,d,c){return{getCalendar:function(){return util.getCalendar()},
getDatePackage:function(){var b="";this.isHijri()?b="dojox.date.islamic":this.isHebrew()&&(b="dojox.date.hebrew");return b},getDateClassObj:function(){var b=l.Date;this.isHijri()?b=j:this.isHebrew()&&(b=d);return b},isHijri:function(){return"Hijri"===this.getCalendar()?!0:!1},isHebrew:function(){return"Hebrew"===this.getCalendar()?!0:!1},isGregorian:function(){return!this.isHebrew()&&!this.isHijri()?!0:!1},fromGregorian:function(b){var a=new Date(b);this.isHijri()?a=(new j).fromGregorian(a):this.isHebrew()&&
(a=(new d).fromGregorian(b));return a},getLocale:function(){var b=m;this.isHijri()?b=e:this.isHebrew()&&(b=c);return b},getNewDate:function(b){return b=b?this.isHijri()?new j(b):this.isHebrew()?new d(b):new Date(b):this.isHijri()?new j:this.isHebrew()?new d:new Date},formatBidiDate:function(b,a){var f;f=new Date(b);this.isHijri()?(f=b instanceof j?b:this.fromGregorian(b),f=e.format(f,a)):this.isHebrew()?(f=b instanceof d?b:this.fromGregorian(b),f=c.format(f,a)):f=m.format(f,a);return f}}})},"dojox/date/islamic":function(){define(["..",
"dojo/_base/lang","dojo/date","./islamic/Date"],function(l,m,k,j){var e=m.getObject("date.islamic",!0,l);e.getDaysInMonth=function(e){return e.getDaysInIslamicMonth(e.getMonth(),e.getFullYear())};e.compare=function(e,d,c){e instanceof j&&(e=e.toGregorian());d instanceof j&&(d=d.toGregorian());return k.compare.apply(null,arguments)};e.add=function(e,d,c){var b=new j(e);switch(d){case "day":b.setDate(e.getDate()+c);break;case "weekday":var a=e.getDay();if(5>a+c&&0<a+c)b.setDate(e.getDate()+c);else{var f=
d=0;5==a?(a=4,f=0<c?-1:1):6==a&&(a=4,f=0<c?-2:2);var a=0<c?5-a-1:-a,n=c-a,r=parseInt(n/5);0!=n%5&&(d=0<c?2:-2);b.setDate(e.getDate()+(d+7*r+n%5+a)+f)}break;case "year":b.setFullYear(e.getFullYear()+c);break;case "week":b.setDate(e.getDate()+7*c);break;case "month":e=e.getMonth();b.setMonth(e+c);break;case "hour":b.setHours(e.getHours()+c);break;case "minute":b._addMinutes(c);break;case "second":b._addSeconds(c);break;case "millisecond":b._addMilliseconds(c)}return b};e.difference=function(h,d,c){var d=
d||new j,c=c||"day",b=d.getFullYear()-h.getFullYear(),a=1;switch(c){case "weekday":b=Math.round(e.difference(h,d,"day"));a=parseInt(e.difference(h,d,"week"));if(0==b%7)b=5*a;else{var c=0,f=h.getDay(),n=d.getDay(),a=parseInt(b/7),d=b%7,h=new j(h);h.setDate(h.getDate()+7*a);h=h.getDay();if(0<b)switch(!0){case 5==f:c=-1;break;case 6==f:c=0;break;case 5==n:c=-1;break;case 6==n:c=-2;break;case 5<h+d:c=-2}else if(0>b)switch(!0){case 5==f:c=0;break;case 6==f:c=1;break;case 5==n:c=2;break;case 6==n:c=1;break;
case 0>h+d:c=2}b=b+c-2*a}a=b;break;case "year":a=b;break;case "month":c=d.toGregorian()>h.toGregorian()?d:h;f=d.toGregorian()>h.toGregorian()?h:d;a=c.getMonth();n=f.getMonth();if(0==b)a=c.getMonth()-f.getMonth();else{a=12-n+a;b=f.getFullYear()+1;for(c=c.getFullYear();b<c;b++)a+=12}d.toGregorian()<h.toGregorian()&&(a=-a);break;case "week":a=parseInt(e.difference(h,d,"day")/7);break;case "day":a/=24;case "hour":a/=60;case "minute":a/=60;case "second":a/=1E3;case "millisecond":a*=d.toGregorian().getTime()-
h.toGregorian().getTime()}return Math.round(a)};return e})},"dojox/date/islamic/Date":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(l,m,k){var j=m("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var e=arguments.length;e?1==e?(e=arguments[0],"number"==typeof e&&(e=new Date(e)),e instanceof Date?this.fromGregorian(e):""==e?this._date=
new Date(""):(this._year=e._year,this._month=e._month,this._date=e._date,this._hours=e._hours,this._minutes=e._minutes,this._seconds=e._seconds,this._milliseconds=e._milliseconds)):3<=e&&(this._year+=arguments[0],this._month+=arguments[1],this._date+=arguments[2],this._hours+=arguments[3]||0,this._minutes+=arguments[4]||0,this._seconds+=arguments[5]||0,this._milliseconds+=arguments[6]||0):this.fromGregorian(new Date)},getDate:function(){return this._date},getMonth:function(){return this._month},getFullYear:function(){return this._year},
getDay:function(){return this.toGregorian().getDay()},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},setDate:function(e){e=parseInt(e);if(!(0<e&&e<=this.getDaysInIslamicMonth(this._month,this._year))){var h;if(0<e)for(h=this.getDaysInIslamicMonth(this._month,this._year);e>h;e-=h,h=this.getDaysInIslamicMonth(this._month,this._year))this._month++,12<=this._month&&(this._year++,
this._month-=12);else for(h=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:this._year-1);0>=e;h=this.getDaysInIslamicMonth(0<=this._month-1?this._month-1:11,0<=this._month-1?this._year:this._year-1))this._month--,0>this._month&&(this._year--,this._month+=12),e+=h}this._date=e;return this},setFullYear:function(e){this._year=+e},setMonth:function(e){this._year+=Math.floor(e/12);this._month=0<e?Math.floor(e%12):Math.floor((e%12+12)%12)},setHours:function(){var e=
arguments.length,h=0;1<=e&&(h=parseInt(arguments[0]));if(2<=e)this._minutes=parseInt(arguments[1]);if(3<=e)this._seconds=parseInt(arguments[2]);if(4==e)this._milliseconds=parseInt(arguments[3]);for(;24<=h;)this._date++,e=this.getDaysInIslamicMonth(this._month,this._year),this._date>e&&(this._month++,12<=this._month&&(this._year++,this._month-=12),this._date-=e),h-=24;this._hours=h},_addMinutes:function(e){e+=this._minutes;this.setMinutes(e);this.setHours(this._hours+parseInt(e/60));return this},_addSeconds:function(e){e+=
this._seconds;this.setSeconds(e);this._addMinutes(parseInt(e/60));return this},_addMilliseconds:function(e){e+=this._milliseconds;this.setMilliseconds(e);this._addSeconds(parseInt(e/1E3));return this},setMinutes:function(e){this._minutes=e%60;return this},setSeconds:function(e){this._seconds=e%60;return this},setMilliseconds:function(e){this._milliseconds=e%1E3;return this},toString:function(){if(isNaN(this._date))return"Invalidate Date";var e=new Date;e.setHours(this._hours);e.setMinutes(this._minutes);
e.setSeconds(this._seconds);e.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+e.toTimeString()},toGregorian:function(){var e=this._year,e=this._date+Math.ceil(29.5*this._month)+354*(e-1)+Math.floor((3+11*e)/30)+this._ISLAMIC_EPOCH-1,e=Math.floor(e-0.5)+0.5,h=e-this._GREGORIAN_EPOCH,d=Math.floor(h/146097),c=this._mod(h,146097),h=Math.floor(c/36524),b=this._mod(c,36524),c=Math.floor(b/1461),b=this._mod(b,1461),b=Math.floor(b/365),d=400*d+100*h+4*c+b;4==h||4==
b||d++;h=e-(this._GREGORIAN_EPOCH+365*(d-1)+Math.floor((d-1)/4)-Math.floor((d-1)/100)+Math.floor((d-1)/400));c=this._GREGORIAN_EPOCH-1+365*(d-1)+Math.floor((d-1)/4)-Math.floor((d-1)/100)+Math.floor((d-1)/400)+Math.floor(739/12+(k.isLeapYear(new Date(d,3,1))?-1:-2)+1);c=e<c?0:k.isLeapYear(new Date(d,3,1))?1:2;h=Math.floor((12*(h+c)+373)/367);c=this._GREGORIAN_EPOCH-1+365*(d-1)+Math.floor((d-1)/4)-Math.floor((d-1)/100)+Math.floor((d-1)/400)+Math.floor((367*h-362)/12+(2>=h?0:k.isLeapYear(new Date(d,
h,1))?-1:-2)+1);return new Date(d,h-1,e-c+1,this._hours,this._minutes,this._seconds,this._milliseconds)},fromGregorian:function(e){var e=new Date(e),h=e.getFullYear(),d=e.getMonth(),c=e.getDate(),h=this._GREGORIAN_EPOCH-1+365*(h-1)+Math.floor((h-1)/4)+-Math.floor((h-1)/100)+Math.floor((h-1)/400)+Math.floor((367*(d+1)-362)/12+(2>=d+1?0:k.isLeapYear(e)?-1:-2)+c),h=Math.floor(h)+0.5,h=h-this._ISLAMIC_EPOCH,d=Math.floor((30*h+10646)/10631),c=Math.ceil((h-29-this._yearStart(d))/29.5),c=Math.min(c,11);
this._date=Math.ceil(h-this._monthStart(d,c))+1;this._month=c;this._year=d;this._hours=e.getHours();this._minutes=e.getMinutes();this._seconds=e.getSeconds();this._milliseconds=e.getMilliseconds();this._day=e.getDay();return this},valueOf:function(){return this.toGregorian().valueOf()},_yearStart:function(e){return 354*(e-1)+Math.floor((3+11*e)/30)},_monthStart:function(e,h){return Math.ceil(29.5*h)+354*(e-1)+Math.floor((3+11*e)/30)},_civilLeapYear:function(e){return 11>(14+11*e)%30},getDaysInIslamicMonth:function(e,
h){var d=0,d=29+(e+1)%2;11==e&&this._civilLeapYear(h)&&d++;return d},_mod:function(e,h){return e-h*Math.floor(e/h)}});j.getDaysInIslamicMonth=function(e){return(new j).getDaysInIslamicMonth(e.getMonth(),e.getFullYear())};return j})},"dojox/date/islamic/locale":function(){define("../..,dojo/_base/lang,dojo/_base/array,dojo/date,dojo/i18n,dojo/regexp,dojo/string,./Date,dojo/i18n!dojo/cldr/nls/islamic".split(","),function(l,m,k,j,e,h,d,c){function b(a,b,c,f,e){return e.replace(/([a-z])\1*/ig,function(c){var f,
h,o=c.charAt(0),c=c.length,n=["abbr","wide","narrow"];switch(o){case "G":f=b.eraAbbr[0];break;case "y":f=""+a.getFullYear();break;case "M":f=a.getMonth();3>c?(f+=1,h=!0):(o=["months-format",n[c-3]].join("-"),f=b[o][f]);break;case "d":f=a.getDate(!0);h=!0;break;case "E":f=a.getDay();3>c?(f+=1,h=!0):(o=["days-format",n[c-3]].join("-"),f=b[o][f]);break;case "a":f=12>a.getHours()?"am":"pm";f=b["dayPeriods-format-wide-"+f];break;case "h":case "H":case "K":case "k":h=a.getHours();switch(o){case "h":f=h%
12||12;break;case "H":f=h;break;case "K":f=h%12;break;case "k":f=h||24}h=!0;break;case "m":f=a.getMinutes();h=!0;break;case "s":f=a.getSeconds();h=!0;break;case "S":f=Math.round(a.getMilliseconds()*Math.pow(10,c-3));h=!0;break;case "z":if(f=j.getTimezoneName(a.toGregorian()))break;c=4;case "Z":f=a.toGregorian().getTimezoneOffset();f=[0>=f?"+":"-",d.pad(Math.floor(Math.abs(f)/60),2),d.pad(Math.abs(f)%60,2)];4==c&&(f.splice(0,0,"GMT"),f.splice(3,0,":"));f=f.join("");break;default:throw Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+
e);}h&&(f=d.pad(f,c));return f})}function a(a,b,c,d){var f=function(a){return a},b=b||f,c=c||f,d=d||f,e=a.match(/(''|[^'])+/g),h="'"==a.charAt(0);k.forEach(e,function(a,d){a?(e[d]=(h?c:b)(a),h=!h):e[d]=""});return d(e.join(""))}function f(a,b,c,d){d=h.escapeString(d);e.normalizeLocale(c.locale);return d.replace(/([a-z])\1*/ig,function(d){var f;f=d.charAt(0);var e=d.length,h="";c.strict?1<e&&(h="0{"+(e-1)+"}"):h="0?";switch(f){case "y":f="\\d+";break;case "M":f=2<e?"\\S+ ?\\S+":h+"[1-9]|1[0-2]";break;
case "d":f="[12]\\d|"+h+"[1-9]|3[01]";break;case "E":f="\\S+";break;case "h":f=h+"[1-9]|1[0-2]";break;case "k":f=h+"\\d|1[01]";break;case "H":f=h+"\\d|1\\d|2[0-3]";break;case "K":f=h+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":f=h+"\\d|[0-5]\\d";break;case "S":f="\\d{"+e+"}";break;case "a":e=c.am||b["dayPeriods-format-wide-am"];h=c.pm||b["dayPeriods-format-wide-pm"];c.strict?f=e+"|"+h:(f=e+"|"+h,e!=e.toLowerCase()&&(f+="|"+e.toLowerCase()),h!=h.toLowerCase()&&(f+="|"+h.toLowerCase()));break;default:f=
".*"}a&&a.push(d);return"("+f+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var n=m.getObject("date.islamic.locale",!0,l);n.format=function(c,d){var d=d||{},f=e.normalizeLocale(d.locale),h=d.formatLength||"short",j=n._getIslamicBundle(f),r=[],f=m.hitch(this,b,c,j,f,d.fullYear);if("year"==d.selector)return c.getFullYear();if("time"!=d.selector){var k=d.datePattern||j["dateFormat-"+h];k&&r.push(a(k,f))}"date"!=d.selector&&(h=d.timePattern||j["timeFormat-"+h])&&r.push(a(h,f));return r.join(" ")};n.regexp=function(a){return n._parseInfo(a).regexp};
n._parseInfo=function(b){var b=b||{},c=e.normalizeLocale(b.locale),c=n._getIslamicBundle(c),d=b.formatLength||"short",h=b.datePattern||c["dateFormat-"+d],d=b.timePattern||c["timeFormat-"+d],j=[];return{regexp:a("date"==b.selector?h:"time"==b.selector?d:"undefined"==typeof d?h:h+" "+d,m.hitch(this,f,j,c,b)),tokens:j,bundle:c}};n.parse=function(a,b){a=a.replace(/[\u200E\u200F\u202A\u202E]/g,"");b||(b={});var d=n._parseInfo(b),f=d.tokens,h=d.bundle,d=d.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,""),
d=RegExp("^"+d+"$").exec(a);e.normalizeLocale(b.locale);if(!d)return null;var j=[1389,0,1,0,0,0,0],r="",l=["abbr","wide","narrow"];k.every(d,function(a,c){if(!c)return!0;var d=f[c-1],e=d.length;switch(d.charAt(0)){case "y":j[0]=Number(a);break;case "M":if(2<e){if(d=h["months-format-"+l[e-3]].concat(),b.strict||(a=a.replace(".","").toLowerCase(),d=k.map(d,function(a){return a?a.replace(".","").toLowerCase():a})),a=k.indexOf(d,a),-1==a)return!1}else a--;j[1]=Number(a);break;case "D":j[1]=0;case "d":j[2]=
Number(a);break;case "a":d=b.am||h["dayPeriods-format-wide-am"];e=b.pm||h["dayPeriods-format-wide-pm"];if(!b.strict)var o=/\./g,a=a.replace(o,"").toLowerCase(),d=d.replace(o,"").toLowerCase(),e=e.replace(o,"").toLowerCase();if(b.strict&&a!=d&&a!=e)return!1;r=a==e?"p":a==d?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":j[3]=Number(a);break;case "m":j[4]=Number(a);break;case "s":j[5]=Number(a);break;case "S":j[6]=Number(a)}return!0});d=+j[3];"p"===r&&12>d?j[3]=d+12:"a"===r&&12==d&&(j[3]=
0);return new c(j[0],j[1],j[2],j[3],j[4],j[5],j[6])};var r=[];n.addCustomFormats=function(a,b){r.push({pkg:a,name:b})};n._getIslamicBundle=function(a){var b={};k.forEach(r,function(c){c=e.getLocalization(c.pkg,c.name,a);b=m.mixin(b,c)},this);return b};n.addCustomFormats("dojo.cldr","islamic");n.getNames=function(a,b,c,d){var f,d=n._getIslamicBundle(d),a=[a,c,b];"standAlone"==c&&(c=a.join("-"),f=d[c],1==f[0]&&(f=void 0));a[1]="format";return(f||d[a.join("-")]).concat()};n.weekDays=n.getNames("days",
"wide","format");n.months=n.getNames("months","wide","format");return n})},"dojox/date/hebrew":function(){define(["..","dojo/_base/lang","dojo/date","./hebrew/Date"],function(l,m,k,j){var e=m.getObject("date.hebrew",!0,l);e.getDaysInMonth=function(e){return e.getDaysInHebrewMonth(e.getMonth(),e.getFullYear())};e.compare=function(e,d,c){e instanceof j&&(e=e.toGregorian());d instanceof j&&(d=d.toGregorian());return k.compare.apply(null,arguments)};e.add=function(e,d,c){var b=new j(e);switch(d){case "day":b.setDate(e.getDate()+
c);break;case "weekday":var d=e.getDay(),a=0;0>c&&6==d&&(d=5,a=-1);if(5>d+c&&0<=d+c)b.setDate(e.getDate()+c+a);else{var f=0<c?5:-1,n=0<c?2:-2;if(0<c&&(5==d||6==d))a=4-d,d=4;var c=d+c-f,r=parseInt(c/5);b.setDate(e.getDate()-d+n+7*r+a+c%5+f)}break;case "year":b.setFullYear(e.getFullYear()+c);break;case "week":b.setDate(e.getDate()+7*c);break;case "month":d=e.getMonth();c=d+c;e.isLeapYear(e.getFullYear())||(5>d&&5<=c?c++:5<d&&5>=c&&c--);b.setMonth(c);break;case "hour":b.setHours(e.getHours()+c);break;
case "minute":b._addMinutes(c);break;case "second":b._addSeconds(c);break;case "millisecond":b._addMilliseconds(c)}return b};e.difference=function(h,d,c){var d=d||new j,c=c||"day",b=d.getFullYear()-h.getFullYear(),a=1;switch(c){case "weekday":a=Math.round(e.difference(h,d,"day"));c=parseInt(e.difference(h,d,"week"));if(0==a%7)a=5*c;else{var b=0,f=h.getDay(),n=d.getDay(),c=parseInt(a/7),d=a%7,h=new j(h);h.setDate(h.getDate()+7*c);h=h.getDay();if(0<a)switch(!0){case 5==f:b=-1;break;case 6==f:b=0;break;
case 5==n:b=-1;break;case 6==n:b=-2;break;case 5<h+d:b=-2}else if(0>a)switch(!0){case 5==f:b=0;break;case 6==f:b=1;break;case 5==n:b=2;break;case 6==n:b=1;break;case 0>h+d:b=2}a=a+b-2*c}break;case "year":a=b;break;case "month":f=d.toGregorian()>h.toGregorian()?d:h;c=d.toGregorian()>h.toGregorian()?h:d;n=f.getMonth();a=c.getMonth();if(0==b)a=!d.isLeapYear(d.getFullYear())&&5<f.getMonth()&&5>=c.getMonth()?f.getMonth()-c.getMonth()-1:f.getMonth()-c.getMonth();else{a=!c.isLeapYear(c.getFullYear())&&6>
a?13-a-1:13-a;a+=!f.isLeapYear(f.getFullYear())&&5<n?n-1:n;b=c.getFullYear()+1;for(f=f.getFullYear();b<f;b++)a+=c.isLeapYear(b)?13:12}d.toGregorian()<h.toGregorian()&&(a=-a);break;case "week":a=parseInt(e.difference(h,d,"day")/7);break;case "day":a/=24;case "hour":a/=60;case "minute":a/=60;case "second":a/=1E3;case "millisecond":a*=d.toGregorian().getTime()-h.toGregorian().getTime()}return Math.round(a)};return e})},"dojox/date/hebrew/Date":function(){define(["dojo/_base/lang","dojo/_base/declare",
"./numerals"],function(l,m,k){l=m("dojox.date.hebrew.Date",null,{_MONTH_LENGTH:[[30,30,30],[29,29,30],[29,30,30],[29,29,29],[30,30,30],[30,30,30],[29,29,29],[30,30,30],[29,29,29],[30,30,30],[29,29,29],[30,30,30],[29,29,29]],_MONTH_START:[[0,0,0],[30,30,30],[59,59,60],[88,89,90],[117,118,119],[147,148,149],[147,148,149],[176,177,178],[206,207,208],[235,236,237],[265,266,267],[294,295,296],[324,325,326],[353,354,355]],_LEAP_MONTH_START:[[0,0,0],[30,30,30],[59,59,60],[88,89,90],[117,118,119],[147,148,
149],[177,178,179],[206,207,208],[236,237,238],[265,266,267],[295,296,297],[324,325,326],[354,355,356],[383,384,385]],_GREGORIAN_MONTH_COUNT:[[31,31,0,0],[28,29,31,31],[31,31,59,60],[30,30,90,91],[31,31,120,121],[30,30,151,152],[31,31,181,182],[31,31,212,213],[30,30,243,244],[31,31,273,274],[30,30,304,305],[31,31,334,335]],_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,constructor:function(){var j=arguments.length;if(j)if(1==j)j=arguments[0],"number"==typeof j&&(j=
new Date(j)),j instanceof Date?this.fromGregorian(j):""==j?this._year=this._month=this._date=this._hours=this._minutes=this._seconds=this._milliseconds=NaN:(this._year=j._year,this._month=j._month,this._date=j._date,this._hours=j._hours,this._minutes=j._minutes,this._seconds=j._seconds,this._milliseconds=j._milliseconds);else{if(3<=j){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];if(12<this._month)console.warn("the month is incorrect , set 0  "+this._month+"   "+this._year),
this._month=0;this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0}}else this.fromGregorian(new Date);this._setDay()},getDate:function(){return this._date},getDateLocalized:function(j){return(j||dojo.locale).match(/^he(?:-.+)?$/)?k.getDayHebrewLetters(this._date):this.getDate()},getMonth:function(){return this._month},getFullYear:function(){return this._year},getHours:function(){return this._hours},getMinutes:function(){return this._minutes},
getSeconds:function(){return this._seconds},getMilliseconds:function(){return this._milliseconds},setDate:function(j){var j=+j,e;if(0<j)for(;j>(e=this.getDaysInHebrewMonth(this._month,this._year));)j-=e,this._month++,13<=this._month&&(this._year++,this._month-=13);else for(;0>=j;)e=this.getDaysInHebrewMonth(0<=this._month-1?this._month-1:12,0<=this._month-1?this._year:this._year-1),this._month--,0>this._month&&(this._year--,this._month+=13),j+=e;this._date=j;this._setDay();return this},setFullYear:function(j,
e,h){this._year=j=+j;!this.isLeapYear(j)&&5==this._month&&this._month++;void 0!==e&&this.setMonth(e);void 0!==h&&this.setDate(h);j=this.getDaysInHebrewMonth(this._month,this._year);if(j<this._date)this._date=j;this._setDay();return this},setMonth:function(j){j=+j;!this.isLeapYear(this._year)&&5==j&&j++;if(0<=j)for(;12<j;)this._year++,j-=13,!this.isLeapYear(this._year)&&5<=j&&j++;else for(;0>j;)this._year--,j+=!this.isLeapYear(this._year)&&-7>j?12:13;this._month=j;j=this.getDaysInHebrewMonth(this._month,
this._year);if(j<this._date)this._date=j;this._setDay();return this},setHours:function(){var j=arguments.length,e=0;1<=j&&(e=+arguments[0]);if(2<=j)this._minutes=+arguments[1];if(3<=j)this._seconds=+arguments[2];if(4==j)this._milliseconds=+arguments[3];for(;24<=e;)this._date++,j=this.getDaysInHebrewMonth(this._month,this._year),this._date>j&&(this._month++,!this.isLeapYear(this._year)&&5==this._month&&this._month++,13<=this._month&&(this._year++,this._month-=13),this._date-=j),e-=24;this._hours=e;
this._setDay();return this},_addMinutes:function(j){j+=this._minutes;this.setMinutes(j);this.setHours(this._hours+parseInt(j/60));return this},_addSeconds:function(j){j+=this._seconds;this.setSeconds(j);this._addMinutes(parseInt(j/60));return this},_addMilliseconds:function(j){j+=this._milliseconds;this.setMilliseconds(j);this._addSeconds(parseInt(j/1E3));return this},setMinutes:function(j){this._minutes=j%60;return this},setSeconds:function(j){this._seconds=j%60;return this},setMilliseconds:function(j){this._milliseconds=
j%1E3;return this},_setDay:function(){var j=this._startOfYear(this._year);0!=this._month&&(j+=(this.isLeapYear(this._year)?this._LEAP_MONTH_START:this._MONTH_START)[this._month||0][this._yearType(this._year)]);j+=this._date-1;this._day=(j+1)%7},toString:function(){return isNaN(this._date)?"Invalid Date":this._date+", "+this._month+", "+this._year+"  "+this._hours+":"+this._minutes+":"+this._seconds},getDaysInHebrewMonth:function(j,e){var h=1==j||2==j?this._yearType(e):0;return!this.isLeapYear(this._year)&&
5==j?0:this._MONTH_LENGTH[j][h]},_yearType:function(j){var e=this._handleGetYearLength(Number(j));380<e&&(e-=30);var h=e-353;if(0>h||2<h)throw Error("Illegal year length "+e+" in year "+j);return h},_handleGetYearLength:function(j){return this._startOfYear(j+1)-this._startOfYear(j)},_startOfYear:function(j){var e=Math.floor((235*j-234)/19),h=13753*e+12084,e=29*e+Math.floor(h/25920),h=h%25920,d=e%7;if(2==d||4==d||6==d)e+=1,d=e%7;1==d&&16404<h&&!this.isLeapYear(j)?e+=2:0==d&&23269<h&&this.isLeapYear(j-
1)&&(e+=1);return e},isLeapYear:function(j){j=(12*j+17)%19;return j>=(0>j?-7:12)},fromGregorian:function(j){var e=!isNaN(j)?this._computeHebrewFields(j):NaN;this._year=!isNaN(j)?e[0]:NaN;this._month=!isNaN(j)?e[1]:NaN;this._date=!isNaN(j)?e[2]:NaN;this._hours=j.getHours();this._milliseconds=j.getMilliseconds();this._minutes=j.getMinutes();this._seconds=j.getSeconds();isNaN(j)||this._setDay();return this},_computeHebrewFields:function(j){for(var e=this._getJulianDayFromGregorianDate(j)-347997,j=Math.floor((19*
Math.floor(25920*e/765433)+234)/235)+1,h=this._startOfYear(j),h=e-h;1>h;)j--,h=this._startOfYear(j),h=e-h;for(var e=this._yearType(j),d=this.isLeapYear(j)?this._LEAP_MONTH_START:this._MONTH_START,c=0;h>d[c][e];)c++;c--;return[j,c,h-d[c][e]]},toGregorian:function(){var j=this._year||0,e=this._month||0,h=this._date||0,d=this._startOfYear(j);0!=e&&(d+=(this.isLeapYear(j)?this._LEAP_MONTH_START:this._MONTH_START)[e][this._yearType(j)]);var j=[],h=this._floorDivide(h+d+347997-1721426,146097,j),d=this._floorDivide(j[0],
36524,j),c=this._floorDivide(j[0],1461,j),e=this._floorDivide(j[0],365,j),h=400*h+100*d+4*c+e,j=j[0];4==d||4==e?j=365:++h;d=!(h%4)&&(h%100||!(h%400));e=0;j>=(d?60:59)&&(e=d?1:2);e=Math.floor((12*(j+e)+6)/367);return new Date(h,e,j-this._GREGORIAN_MONTH_COUNT[e][d?3:2]+1,this._hours,this._minutes,this._seconds,this._milliseconds)},_floorDivide:function(j,e,h){if(0<=j)return h[0]=j%e,Math.floor(j/e);var d=Math.floor(j/e);h[0]=j-d*e;return d},getDay:function(){var j=this._year,e=this._month,h=this._date,
d=this._startOfYear(j);0!=e&&(d+=(this.isLeapYear(j)?this._LEAP_MONTH_START:this._MONTH_START)[e][this._yearType(j)]);return(d+(h-1)+1)%7},_getJulianDayFromGregorianDate:function(j){var e=j.getFullYear(),h=j.getMonth(),j=j.getDate(),d=e-1,d=365*d+Math.floor(d/4)-Math.floor(d/100)+Math.floor(d/400)+1721426-1;0<h&&(d+=this._GREGORIAN_MONTH_COUNT[h][!(e%4)&&(e%100||!(e%400))?3:2]);return d+j}});l.prototype.valueOf=function(){return this.toGregorian().valueOf()};return l})},"dojox/date/hebrew/numerals":function(){define(["../..",
"dojo/_base/lang","dojo/_base/array"],function(l,m,k){var j=m.getObject("date.hebrew.numerals",!0,l),e=function(c,b){c=c.replace("\u05d9\u05d4","\u05d8\u05d5").replace("\u05d9\u05d5","\u05d8\u05d6");if(!b)var a=c.length,c=1<a?c.substr(0,a-1)+'"'+c.charAt(a-1):c+"\u05f3";return c},h=function(c){var b=0;k.forEach(c,function(a){var c;if(-1!=(c="\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8".indexOf(a)))b+=++c;else if(-1!=(c="\u05d9\u05db\u05dc\u05de\u05e0\u05e1\u05e2\u05e4\u05e6".indexOf(a)))b+=
10*++c;else if(-1!=(c="\u05e7\u05e8\u05e9\u05ea".indexOf(a)))b+=100*++c});return b},d=function(c){for(var b="",a=4,d=9;c;)c>=100*a?(b+="\u05e7\u05e8\u05e9\u05ea".charAt(a-1),c-=100*a):1<a?a--:c>=10*d?(b+="\u05d9\u05db\u05dc\u05de\u05e0\u05e1\u05e2\u05e4\u05e6".charAt(d-1),c-=10*d):1<d?d--:0<c&&(b+="\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8".charAt(c-1),c=0);return b};j.getYearHebrewLetters=function(c){return e(d(c%1E3))};j.parseYearHebrewLetters=function(c){return h(c)+5E3};j.getDayHebrewLetters=
function(c,b){return e(d(c),b)};j.parseDayHebrewLetters=function(c){return h(c)};j.getMonthHebrewLetters=function(c){return e(d(c+1))};j.parseMonthHebrewLetters=function(c){c=j.parseDayHebrewLetters(c)-1;if(-1==c||12<c)throw Error("The month name is incorrect , month = "+c);return c};return j})},"dojox/date/hebrew/locale":function(){define("../..,dojo/_base/lang,dojo/_base/array,dojo/date,dojo/i18n,dojo/regexp,dojo/string,./Date,./numerals,dojo/i18n!dojo/cldr/nls/hebrew".split(","),function(l,m,k,
j,e,h,d,c,b){function a(a,c,f,e,h){return h.replace(/([a-z])\1*/ig,function(e){var n,j,k=e.charAt(0),e=e.length,t=["abbr","wide","narrow"];switch(k){case "y":n=f.match(/^he(?:-.+)?$/)?b.getYearHebrewLetters(a.getFullYear()):""+a.getFullYear();break;case "M":n=a.getMonth();3>e?(!a.isLeapYear(a.getFullYear())&&5<n&&n--,f.match(/^he(?:-.+)?$/)?n=b.getMonthHebrewLetters(n):(n+=1,j=!0)):n=r.getNames("months",t[e-3],"format",f,a)[n];break;case "d":f.match(/^he(?:-.+)?$/)?n=a.getDateLocalized(f):(n=a.getDate(),
j=!0);break;case "E":n=a.getDay();3>e?(n+=1,j=!0):(k=["days-format",t[e-3]].join("-"),n=c[k][n]);break;case "a":n=12>a.getHours()?"am":"pm";n=c["dayPeriods-format-wide-"+n];break;case "h":case "H":case "K":case "k":j=a.getHours();switch(k){case "h":n=j%12||12;break;case "H":n=j;break;case "K":n=j%12;break;case "k":n=j||24}j=!0;break;case "m":n=a.getMinutes();j=!0;break;case "s":n=a.getSeconds();j=!0;break;case "S":n=Math.round(a.getMilliseconds()*Math.pow(10,e-3));j=!0;break;case "z":n="";break;default:throw Error("dojox.date.hebrew.locale.formatPattern: invalid pattern char: "+
h);}j&&(n=d.pad(n,e));return n})}function f(a,b,c,d){var f=function(a){return a},b=b||f,c=c||f,d=d||f,e=a.match(/(''|[^'])+/g),h="'"==a.charAt(0);k.forEach(e,function(a,d){a?(e[d]=(h?c:b)(a),h=!h):e[d]=""});return d(e.join(""))}function n(a,b,c,d){var d=h.escapeString(d),f=e.normalizeLocale(c.locale);return d.replace(/([a-z])\1*/ig,function(d){var e;e=d.charAt(0);var h=d.length,n="";c.strict?1<h&&(n="0{"+(h-1)+"}"):n="0?";switch(e){case "y":e="\\S+";break;case "M":e=f.match("^he(?:-.+)?$")?2<h?"\\S+ ?\\S+":
"\\S{1,4}":2<h?"\\S+ ?\\S+":n+"[1-9]|1[0-2]";break;case "d":e=f.match("^he(?:-.+)?$")?"\\S['\"'\u05f3]{1,2}\\S?":"[12]\\d|"+n+"[1-9]|30";break;case "E":e=f.match("^he(?:-.+)?$")?3<h?"\\S+ ?\\S+":"\\S":"\\S+";break;case "h":e=n+"[1-9]|1[0-2]";break;case "k":e=n+"\\d|1[01]";break;case "H":e=n+"\\d|1\\d|2[0-3]";break;case "K":e=n+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":e=n+"\\d|[0-5]\\d";break;case "S":e="\\d{"+h+"}";break;case "a":h=c.am||b["dayPeriods-format-wide-am"];n=c.pm||b["dayPeriods-format-wide-pm"];
c.strict?e=h+"|"+n:(e=h+"|"+n,h!=h.toLowerCase()&&(e+="|"+h.toLowerCase()),n!=n.toLowerCase()&&(e+="|"+n.toLowerCase()));break;default:e=".*"}a&&a.push(d);return"("+e+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var r=m.getObject("date.hebrew.locale",!0,l);e.getLocalization("dojo.cldr","hebrew");r.format=function(c,d){var d=d||{},h=e.normalizeLocale(d.locale),n=d.formatLength||"short",j=r._getHebrewBundle(h),k=[],t=m.hitch(this,a,c,j,h,d.fullYear);if("year"==d.selector)return k=c.getFullYear(),h.match(/^he(?:-.+)?$/)?
b.getYearHebrewLetters(k):k;"time"!=d.selector&&(h=d.datePattern||j["dateFormat-"+n])&&k.push(f(h,t));"date"!=d.selector&&(h=d.timePattern||j["timeFormat-"+n])&&k.push(f(h,t));return k.join(" ")};r.regexp=function(a){return r._parseInfo(a).regexp};r._parseInfo=function(a){var a=a||{},b=e.normalizeLocale(a.locale),b=r._getHebrewBundle(b),c=a.formatLength||"short",d=a.datePattern||b["dateFormat-"+c],c=a.timePattern||b["timeFormat-"+c],h=[];return{regexp:f("date"==a.selector?d:"time"==a.selector?c:void 0===
c?d:d+" "+c,m.hitch(this,n,h,b,a)),tokens:h,bundle:b}};r.parse=function(a,d){a=a.replace(/[\u200E\u200F\u202A-\u202E]/g,"");d||(d={});var f=r._parseInfo(d),h=f.tokens,n=f.bundle,f=RegExp("^"+f.regexp+"$").exec(a),j=e.normalizeLocale(d.locale);if(!f)return null;var t=[5730,3,23,0,0,0,0],l="",m=0,B=["abbr","wide","narrow"];k.every(f,function(a,f){if(!f)return!0;var e=h[f-1],s=e.length;switch(e.charAt(0)){case "y":t[0]=j.match(/^he(?:-.+)?$/)?b.parseYearHebrewLetters(a):Number(a);break;case "M":if(2<
s){var e=r.getNames("months",B[s-3],"format",j,new c(5769,1,1)),q=r.getNames("months",B[s-3],"format",j,new c(5768,1,1));d.strict||(a=a.replace(".","").toLowerCase(),e=k.map(e,function(a){return a?a.replace(".","").toLowerCase():a}),q=k.map(q,function(a){return a?a.replace(".","").toLowerCase():a}));var K=a,a=k.indexOf(e,K);if(-1==a&&(a=k.indexOf(q,K),-1==a))return!1;m=s}else j.match(/^he(?:-.+)?$/)?a=b.parseMonthHebrewLetters(a):a--;t[1]=Number(a);break;case "D":t[1]=0;case "d":t[2]=j.match(/^he(?:-.+)?$/)?
b.parseDayHebrewLetters(a):Number(a);break;case "a":s=d.am||n["dayPeriods-format-wide-am"];e=d.pm||n["dayPeriods-format-wide-pm"];d.strict||(q=/\./g,a=a.replace(q,"").toLowerCase(),s=s.replace(q,"").toLowerCase(),e=e.replace(q,"").toLowerCase());if(d.strict&&a!=s&&a!=e)return!1;l=a==e?"p":a==s?"a":"";break;case "K":24==a&&(a=0);case "h":case "H":case "k":t[3]=Number(a);break;case "m":t[4]=Number(a);break;case "s":t[5]=Number(a);break;case "S":t[6]=Number(a)}return!0});f=+t[3];"p"===l&&12>f?t[3]=f+
12:"a"===l&&12==f&&(t[3]=0);f=new c(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);3>m&&5<=t[1]&&!f.isLeapYear(f.getFullYear())&&f.setMonth(t[1]+1);return f};var t=[];r.addCustomFormats=function(a,b){t.push({pkg:a,name:b})};r._getHebrewBundle=function(a){var b={};k.forEach(t,function(c){c=e.getLocalization(c.pkg,c.name,a);b=m.mixin(b,c)},this);return b};r.addCustomFormats("dojo.cldr","hebrew");r.getNames=function(a,b,c,d,f){var e,d=r._getHebrewBundle(d),b=[a,c,b];"standAlone"==c&&(c=b.join("-"),e=d[c],1==e[0]&&
(e=void 0));b[1]="format";c=(e||d[b.join("-")]).concat();"months"==a&&(f.isLeapYear(f.getFullYear())?(b.push("leap"),c[6]=d[b.join("-")]):delete c[5]);return c};return r})},"deploy/widgets/calendar/EditBlackout":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.calendar.EditBlackout",[m,l],{templateString:'<div class="editBlackout"><div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);
var e=this,h,d,c,b,a;if(this.blackout){if("noId"!==this.blackout.id)this.calendarId=this.blackout.calendarId;h=this.blackout.name;c=new Date(this.blackout.startDate);d=c.getHours()*util.msPerHour;d+=c.getMinutes()*util.msPerMinute;d+=c.getSeconds()*util.msPerSecond;d+=c.getMilliseconds();b=(new Date(d)).getTimezoneOffset()*util.msPerMinute;d=new Date(d+b);b=c.getFullYear();a=c.getMonth();c=c.getDate();c=new Date(b,a,c);a=new Date(this.blackout.endDate);b=a.getHours()*util.msPerHour;b+=a.getMinutes()*
util.msPerMinute;b+=a.getSeconds()*util.msPerSecond;b+=a.getMilliseconds();var f=(new Date(b)).getTimezoneOffset()*util.msPerMinute;b=new Date(b+f);var f=a.getFullYear(),n=a.getMonth();a=a.getDate();a=new Date(f,n,a)}this.form=new j({submitUrl:bootstrap.restUrl+"deploy/schedule/blackout",addData:function(a){if(e.blackout&&e.blackout.id&&"noId"!==e.blackout.id)a.blackoutId=e.blackout.id;a.calendarId=e.calendarId;if(a.startDate&&a.startTime)a.startDate=util.combineDateAndTime(a.startDate,a.startTime).valueOf();
if(a.endDate&&a.endTime)a.endDate=util.combineDateAndTime(a.endDate,a.endTime).valueOf()},validateFields:function(a){var b=[];a.startDate>=a.endDate&&b.push(i18n("The end date must be greater than the start date."));return b},postSubmit:function(){void 0!==e.callback&&e.callback(!0)},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!1,value:h,type:"Text"});this.form.addField({name:"startDate",label:i18n("Start Date"),required:!0,
value:c,type:"Date"});this.form.addField({name:"startTime",label:i18n("Start Time"),required:!0,value:d,type:"Time"});this.form.addField({name:"endDate",label:i18n("End Date"),required:!0,value:a,type:"Date"});this.form.addField({name:"endTime",label:i18n("End Time"),required:!0,value:b,type:"Time"});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/calendar/EditRecurringEntry":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm","dojo/_base/array"],
function(l,m,k,j,e){return k("deploy.widgets.calendar.EditRecurringEntry",[m,l],{templateString:'<div class="editEntry"><div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=this,d={};if(this.entry){var d=this.entry,c=new Date(this.entry.scheduledDate),b=c.getHours()*util.msPerHour,b=b+c.getMinutes()*util.msPerMinute,b=b+c.getSeconds()*util.msPerSecond,b=b+c.getMilliseconds(),a=(new Date(b)).getTimezoneOffset()*util.msPerMinute;d.startTime=new Date(b+
a);b=c.getFullYear();a=c.getMonth();c=c.getDate();d.startDate=new Date(b,a,c)}this.form=new j({submitUrl:bootstrap.restUrl+"calendar/recurring",addData:function(a){a.existingId=d.id;a.date=util.combineDateAndTime(a.startDate,a.startTime).valueOf();if(h.entry.eventData.versions)a.versions=[],e.forEach(h.entry.eventData.versions,function(b){var c="ver_"+b.componentId,d=a[c];delete a[c];d&&a.versions.push({versionSelector:d,componentId:b.componentId})})},postSubmit:function(){void 0!==h.callback&&h.callback()},
onCancel:function(){void 0!==h.callback&&h.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!1,value:d.name,type:"Text"});this.form.addField({name:"dateLabel",label:"",value:i18n("Choose a new base date for this recurring event. This should be the next time the event should occur. The next scheduled occurrence of this event will not be affected."),type:"Label"});this.form.addField({name:"startDate",label:i18n("Base Date"),required:!0,value:d.startDate,type:"Date"});this.form.addField({name:"startTime",
label:i18n("Base Time"),required:!0,value:d.startTime,type:"Time"});this.form.addField({name:"recurrencePattern",label:i18n("Pattern"),type:"Select",allowedValues:[{value:"M",label:i18n("Monthly")},{value:"W",label:i18n("Weekly")},{value:"D",label:i18n("Daily")}],value:d.recurrencePattern,required:!0});e.forEach(d.eventData.versions,function(a){var b=document.createElement("span"),c=document.createElement("span");c.innerHTML=i18n("Version for %s",a.component.name.escape());b.appendChild(c);h.form.addField({label:b,
name:"ver_"+a.componentId,type:"VersionSelector",value:a.versionSelector,context:{component:a.component,environment:h.environment},required:!1},"_versionInsert")});this.form.placeAt(this.formAttach)}})})},"js/webext/widgets/color/Color":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/Color"],function(l,m,k){return{colors:{"#F04E37":{name:i18n("Vermillion"),simpleName:i18n("Light Red"),baseColor:i18n("Red"),value:"#F04E37",fallback:"#D9182D",full:!0},"#D9182D":{name:i18n("Crimson"),
simpleName:i18n("Red"),baseColor:i18n("Red"),value:"#D9182D",simple:!0,basic:!0,standard:!0,full:!0},"#A91024":{name:i18n("Firebrick"),simpleName:i18n("Dark Red"),baseColor:i18n("Red"),value:"#A91024",fallback:"#D9182D",basic:!0,standard:!0,full:!0},"#F19027":{name:i18n("Carrot Orange"),simpleName:i18n("Light Orange"),baseColor:i18n("Orange"),value:"#F19027",fallback:"#DD731C",full:!0},"#DD731C":{name:i18n("Cinnamon"),simpleName:i18n("Orange"),baseColor:i18n("Orange"),value:"#DD731C",simple:!0,basic:!0,
standard:!0,full:!0},"#B8461B":{name:i18n("Rust"),simpleName:i18n("Dark Orange"),baseColor:i18n("Orange"),value:"#B8461B",fallback:"#DD731C",basic:!0,standard:!0,full:!0},"#FFE14F":{name:i18n("Mustard"),simpleName:i18n("Light Yellow"),baseColor:i18n("Yellow"),value:"#FFE14F",fallback:"#FFCF01",light:!0,full:!0},"#FFCF01":{name:i18n("Tangerine Yellow"),simpleName:i18n("Yellow"),baseColor:i18n("Yellow"),value:"#FFCF01",light:!0,simple:!0,basic:!0,standard:!0,full:!0},"#FDB813":{name:i18n("Golden Poppy"),
simpleName:i18n("Dark Yellow"),baseColor:i18n("Yellow"),value:"#FDB813",fallback:"#FFCF01",light:!0,basic:!0,standard:!0,full:!0},"#8CC63F":{name:i18n("Yellow Green"),simpleName:i18n("Light Green"),baseColor:i18n("Green"),value:"#8CC63F",fallback:"#17AF4A",full:!0},"#17AF4A":{name:i18n("Mountain Meadow"),simpleName:i18n("Green"),baseColor:i18n("Green"),value:"#17AF4A",simple:!0,basic:!0,standard:!0,full:!0},"#008A52":{name:i18n("Sea Green"),simpleName:i18n("Dark Green"),baseColor:i18n("Green"),value:"#008A52",
fallback:"#17AF4A",basic:!0,standard:!0,full:!0},"#00A6A0":{name:i18n("Persian Green"),simpleName:i18n("Light Teal"),baseColor:i18n("Green"),value:"#00A6A0",fallback:"#007670",basicFallback:"#17AF4A",full:!0},"#007670":{name:i18n("Pine Green"),simpleName:i18n("Teal"),baseColor:i18n("Green"),value:"#007670",fallback:"#17AF4A",standard:!0,full:!0},"#006059":{name:i18n("Bottle Green"),simpleName:i18n("Dark Teal"),baseColor:i18n("Green"),value:"#006059",fallback:"#007670",basicFallback:"#17AF4A",standard:!0,
full:!0},"#82D1F5":{name:i18n("Baby Blue"),simpleName:i18n("Light Blue"),baseColor:i18n("Blue"),value:"#82D1F5",fallback:"#00B2EF",light:!0,full:!0},"#00B2EF":{name:i18n("Bright Cerulean"),simpleName:i18n("Blue"),baseColor:i18n("Blue"),value:"#00B2EF",simple:!0,basic:!0,standard:!0,full:!0},"#00648D":{name:i18n("Sea Blue"),simpleName:i18n("Dark Blue"),baseColor:i18n("Blue"),value:"#00648D",fallback:"#00B2EF",basic:!0,standard:!0,full:!0},"#00B0DA":{name:i18n("Iris Blue"),simpleName:i18n("Light Blue 2"),
baseColor:i18n("Blue"),value:"#00B0DA",fallback:"#00B2EF",basicFallback:"#00B2EF",full:!0},"#009AD6":{name:i18n("Bondi Blue"),simpleName:i18n("Blue 2"),baseColor:i18n("Blue"),value:"#009AD6",fallback:"#00B2EF",standard:!0,full:!0},"#003F69":{name:i18n("Prussian Blue"),simpleName:i18n("Dark Blue 2"),baseColor:i18n("Blue"),value:"#003F69",fallback:"#00648D",basicFallback:"#00648D",standard:!0,full:!0},"#AB1A86":{name:i18n("Red Violet"),simpleName:i18n("Light Purple"),baseColor:i18n("Purple"),value:"#AB1A86",
fallback:"#7F1C7D",basic:!0,standard:!0,full:!0},"#7F1C7D":{name:i18n("Mardi Gras"),simpleName:i18n("Purple"),baseColor:i18n("Purple"),value:"#7F1C7D",simple:!0,basic:!0,standard:!0,full:!0},"#3B0256":{name:i18n("Indigo"),simpleName:i18n("Dark Purple"),baseColor:i18n("Purple"),value:"#3B0256",fallback:"#7F1C7D",full:!0},"#F389AF":{name:i18n("Mauvelous"),simpleName:i18n("Light Pink"),baseColor:i18n("Pink"),value:"#F389AF",fallback:"#F051A1",basic:!0,standard:!0,full:!0},"#F051A1":{name:i18n("French Rose"),
simpleName:i18n("Pink"),baseColor:i18n("Pink"),value:"#F051A1",simple:!0,basic:!0,standard:!0,full:!0},"#BA006E":{name:i18n("Jazzberry Jam"),simpleName:i18n("Dark Pink"),baseColor:i18n("Pink"),value:"#BA006E",fallback:"#F051A1",full:!0},"#A5A215":{name:i18n("Brass"),simpleName:i18n("Light Taupe"),baseColor:i18n("Yellow"),value:"#A5A215",fallback:"#91922F",basicFallback:"#FFCF01",full:!0},"#91922F":{name:i18n("Olive"),simpleName:i18n("Taupe"),baseColor:i18n("Yellow"),value:"#91922F",fallback:"#FDB813",
basicFallback:"#FFCF01",standard:!0,full:!0},"#594F13":{name:i18n("Antique Bronze"),simpleName:i18n("Dark Taupe"),baseColor:i18n("Yellow"),value:"#594F13",fallback:"#91922F",basicFallback:"#FDB813",standard:!0,full:!0},"#929497":{name:i18n("Aluminum"),simpleName:i18n("Light Gray"),baseColor:i18n("Black"),value:"#929497",fallback:"#6D6E70",full:!0},"#6D6E70":{name:i18n("Dim Gray"),simpleName:i18n("Gray"),baseColor:i18n("Black"),value:"#6D6E70",simple:!0,basic:!0,standard:!0,full:!0},"#404041":{name:i18n("Jet"),
simpleName:i18n("Dark Gray"),baseColor:i18n("Black"),value:"#404041",fallback:"#6D6E70",basic:!0,standard:!0,full:!0},"#A8A7A5":{name:i18n("Silver Chalice"),simpleName:i18n("Light Gray 2"),baseColor:i18n("Black"),value:"#A8A7A5",fallback:"#8F8D8A",basicFallback:"#6D6E70",full:!0},"#8F8D8A":{name:i18n("Battleship Grey"),simpleName:i18n("Gray 2"),baseColor:i18n("Black"),value:"#8F8D8A",standard:!0,fallback:"#6D6E70",full:!0},"#605F5C":{name:i18n("Sonic Silver"),simpleName:i18n("Dark Gray 2"),baseColor:i18n("Black"),
value:"#605F5C",fallback:"##8F8D8A",basicFallback:"#404041",standard:!0,full:!0}},getColors:function(){var j=this,e=[];l.forEach("#F04E37,#D9182D,#A91024,#F19027,#DD731C,#B8461B,#FFE14F,#FFCF01,#FDB813,#8CC63F,#17AF4A,#008A52,#00A6A0,#007670,#006059,#82D1F5,#00B2EF,#00648D,#00B0DA,#009AD6,#003F69,#AB1A86,#7F1C7D,#3B0256,#F389AF,#F051A1,#BA006E,#A5A215,#91922F,#594F13,#929497,#6D6E70,#404041,#A8A7A5,#8F8D8A,#605F5C".split(","),function(h){e.push(m.clone(j.getColor(h)))});return e},getColor:function(j){return this.colors[j]||
this.getDojoColor(j)},getColorOrConvert:function(j){var e=null;j&&(e=this.colors[j.toUpperCase()],e||(e=this.getDojoColor(j.toUpperCase()))&&(e=this.getColor(e.fallback)));e||(e=this.colors["#00B2EF"]);return e},dojoColors:{"#FFFFFF":{name:i18n("White"),baseColor:i18n("Gray"),value:"#FFFFFF",fallback:"#A8A7A5"},"#D3D3D3":{name:i18n("Light Gray"),baseColor:i18n("Gray"),value:"#D3D3D3",fallback:"#A8A7A5"},"#C0C0C0":{name:i18n("Silver"),baseColor:i18n("Gray"),value:"#C0C0C0",fallback:"#A8A7A5"},"#808080":{name:i18n("Gray"),
baseColor:i18n("Gray"),value:"#808080",fallback:"#8F8D8A"},"#696969":{name:i18n("Dim Gray"),baseColor:i18n("Gray"),value:"#696969",fallback:"#6D6E70"},"#2F4F4F":{name:i18n("Dark Slate Gray"),baseColor:i18n("Gray"),value:"#2F4F4F",fallback:"#404041"},"#000000":{name:i18n("Black"),baseColor:i18n("Gray"),value:"#000000",fallback:"#404041"},"#FFF5EE":{name:i18n("Seashell"),baseColor:i18n("Orange"),value:"#FFF5EE",fallback:"#F19027"},"#FFC0CB":{name:i18n("Pink"),baseColor:i18n("Pink"),value:"#FFC0CB",
fallback:"#F389AF"},"#F08080":{name:i18n("Light Coral"),baseColor:i18n("Pink"),value:"#F08080",fallback:"#F389AF"},"#FF0000":{name:i18n("Red"),baseColor:i18n("Red"),value:"#FF0000",fallback:"#F04E37"},"#DC143C":{name:i18n("Crimson"),baseColor:i18n("Red"),value:"#DC143C",fallback:"#D9182D"},"#B22222":{name:i18n("Fire Brick"),baseColor:i18n("Red"),value:"#B22222",fallback:"#A91024"},"#8B0000":{name:i18n("Dark Red"),baseColor:i18n("Red"),value:"#8B0000",fallback:"#A91024"},"#FFF8DC":{name:i18n("Cornsilk"),
baseColor:i18n("Yellow"),value:"#FFF8DC",fallback:"#FFE14F"},"#FFE4C4":{name:i18n("Bisque"),baseColor:i18n("Orange"),value:"#FFE4C4",fallback:"#F19027"},"#F4A460":{name:i18n("Sandy Brown"),baseColor:i18n("Orange"),value:"#F4A460",fallback:"#F19027"},"#FF4500":{name:i18n("Orange Red"),baseColor:i18n("Red"),value:"#F04E37",fallback:"#F19027"},"#D2691E":{name:i18n("Chocolate"),baseColor:i18n("Orange"),value:"#D2691E",fallback:"#DD731C"},"#8B4513":{name:i18n("Saddle Brown"),baseColor:i18n("Orange"),value:"#8B4513",
fallback:"#B8461B"},"#800000":{name:i18n("Maroon"),baseColor:i18n("Red"),value:"#800000",fallback:"#A91024"},"#FFFACD":{name:i18n("Lemon Chiffon"),baseColor:i18n("Yellow"),value:"#FFFACD",fallback:"#FFE14F"},"#FFE4B5":{name:i18n("Moccasin"),baseColor:i18n("Orange"),value:"#FFE4B5",fallback:"#F19027"},"#FFA500":{name:i18n("Orange"),baseColor:i18n("Orange"),value:"#FFA500",fallback:"#F19027"},"#FF8C00":{name:i18n("Dark Orange"),baseColor:i18n("Orange"),value:"#FF8C00",fallback:"#F19027"},"#FF7F50":{name:i18n("Coral"),
baseColor:i18n("Orange"),value:"#FF7F50",fallback:"#F19027"},"#A0522D":{name:i18n("Sienna"),baseColor:i18n("Orange"),value:"#A0522D",fallback:"#B8461B"},"#A52A2A":{name:i18n("Brown"),baseColor:i18n("Red"),value:"#A52A2A",fallback:"#A91024"},"#FFFFE0":{name:i18n("Light Yellow"),baseColor:i18n("Yellow"),value:"#FFFFE0",fallback:"#FFE14F"},"#F0E68C":{name:i18n("Khaki"),baseColor:i18n("Yellow"),value:"#F0E68C",fallback:"#FFE14F"},"#EEE8AA":{name:i18n("Pale Goldenrod"),baseColor:i18n("Yellow"),value:"#EEE8AA",
fallback:"#FFE14F"},"#FFFF00":{name:i18n("Yellow"),baseColor:i18n("Yellow"),value:"#FFFF00",fallback:"#FFCF01"},"#FFD700":{name:i18n("Gold"),baseColor:i18n("Yellow"),value:"#FFD700",fallback:"#FFCF01"},"#808000":{name:i18n("Olive"),baseColor:i18n("Taupe"),value:"#808000",fallback:"#838329"},"#556B2F":{name:i18n("Dark Olive Green"),baseColor:i18n("Green"),value:"#556B2F",fallback:"#008A52"},"#98FB98":{name:i18n("Pale Green"),baseColor:i18n("Green"),value:"#98FB98",fallback:"#8CC63F"},"#90EE90":{name:i18n("Light Green"),
baseColor:i18n("Green"),value:"#90EE90",fallback:"#8CC63F"},"#7FFF00":{name:i18n("Chartreuse"),baseColor:i18n("Green"),value:"#7FFF00",fallback:"#8CC63F"},"#32CD32":{name:i18n("Lime Green"),baseColor:i18n("Green"),value:"#32CD32",fallback:"#17AF4A"},"#228B22":{name:i18n("Forest Green"),baseColor:i18n("Green"),value:"#228B22",fallback:"#008A52"},"#008000":{name:i18n("Green"),baseColor:i18n("Green"),value:"#008000",fallback:"#008A52"},"#006400":{name:i18n("Dark Green"),baseColor:i18n("Green"),value:"#006400",
fallback:"#008A52"},"#AFEEEE":{name:i18n("Pale Turquoise"),baseColor:i18n("Blue"),value:"#AFEEEE",fallback:"#82D1F5"},"#20B2AA":{name:i18n("Light Sea Green"),baseColor:i18n("Teal"),value:"#20B2AA",fallback:"#00A6A0"},"#48D1CC":{name:i18n("Medium Turquoise"),baseColor:i18n("Teal"),value:"#48D1CC",fallback:"#00A6A0"},"#8FBC8F":{name:i18n("Sea Green"),baseColor:i18n("Green"),value:"#8FBC8F",fallback:"#8CC63F"},"#2E8B57":{name:i18n("Dark Sea Green"),baseColor:i18n("Green"),value:"#2E8B57",fallback:"#008A52"},
"#008B8B":{name:i18n("Dark Cyan"),baseColor:i18n("Teal"),value:"#008B8B",fallback:"#007670"},"#191970":{name:i18n("Midnight Blue"),baseColor:i18n("Blue"),value:"#191970",fallback:"#3B0256"},"#E0FFFF":{name:i18n("Light Cyan"),baseColor:i18n("Blue"),value:"#E0FFFF",fallback:"#82D1F5"},"#87CEFA":{name:i18n("Light Sky Blue"),baseColor:i18n("Blue"),value:"#87CEFA",fallback:"#82D1F5"},"#87CEEB":{name:i18n("Sky Blue"),baseColor:i18n("Blue"),value:"#87CEEB",fallback:"#82D1F5"},"#4169E1":{name:i18n("Royal Blue"),
baseColor:i18n("Blue"),value:"#4169E1",fallback:"#00648D"},"#0000FF":{name:i18n("Blue"),baseColor:i18n("Blue"),value:"#0000FF",fallback:"#00B2EF"},"#0000CD":{name:i18n("Medium Blue"),baseColor:i18n("Blue"),value:"#0000CD",fallback:"#00648D"},"#000080":{name:i18n("Navy"),baseColor:i18n("Blue"),value:"#000080",fallback:"#003F69"},"#E6E6FA":{name:i18n("Lavender"),baseColor:i18n("Purple"),value:"#E6E6FA",fallback:"#AB1A86"},"#6495ED":{name:i18n("Cornflower Blue"),baseColor:i18n("Blue"),value:"#6495ED",
fallback:"#008ABF"},"#7B68EE":{name:i18n("Medium Slate Blue"),baseColor:i18n("Blue"),value:"#7B68EE",fallback:"#008ABF"},"#6A5ACD":{name:i18n("Slate Blue"),baseColor:i18n("Blue"),value:"#6A5ACD",fallback:"#00648D"},"#8A2BE2":{name:i18n("Blue Violet"),baseColor:i18n("Purple"),value:"#8A2BE2",fallback:"#AB1A86"},"#483D8B":{name:i18n("Dark Slate Blue"),baseColor:i18n("Purple"),value:"#483D8B",fallback:"#3B0256"},"#4B0082":{name:i18n("Indigo"),baseColor:i18n("Purple"),value:"#4B0082",fallback:"#3B0256"},
"#DDA0DD":{name:i18n("Plum"),baseColor:i18n("Purple"),value:"#DDA0DD",fallback:"#F389AF"},"#EE82EE":{name:i18n("Violet"),baseColor:i18n("Purple"),value:"#EE82EE",fallback:"#F389AF"},"#DA70D6":{name:i18n("Orchid"),baseColor:i18n("Purple"),value:"#DA70D6",fallback:"#AB1A86"},"#BA55D3":{name:i18n("Medium Orchid"),baseColor:i18n("Purple"),value:"#BA55D3",fallback:"#AB1A86"},"#9932CC":{name:i18n("Dark Orchid"),baseColor:i18n("Purple"),value:"#9932CC",fallback:"#AB1A86"},"#8B008B":{name:i18n("Dark Magenta"),
baseColor:i18n("Purple"),value:"#8B008B",fallback:"#7F1C7D"},"#800080":{name:i18n("Purple"),baseColor:i18n("Purple"),value:"#800080",fallback:"#7F1C7D"},"#B3D66D":{name:i18n("Yellow Green"),baseColor:i18n("Green"),value:"#B3D66D",fallback:"#8CC63F"},"default":{name:i18n("Cerulean"),baseColor:i18n("Blue"),fallback:"#00B2EF"}},getDojoColor:function(j){return this.dojoColors[j.toUpperCase()]||this.dojoColors["default"]},dojoToIBM:function(j){(j=this.dojoColors[j.toUpperCase()])||(j=this.dojoColors["default"]);
return j=j.fallback},getBasicColorName:function(j){return this.getColor(j).baseColor.toLowerCase()},isDark:function(j){j=(new k(j)).toRgb();return 0.5<1-(0.25*j[0]+0.6*j[1]+0.1*j[2])/255}}})},"deploy/widgets/calendar/EditEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,js/webext/widgets/Alert,js/webext/widgets/ColumnForm".split(","),function(l,m,k,j,e,h){return j("deploy.widgets.calendar.EditEntry",[m,l],{templateString:'<div class="editEntry"><div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var d=this,c,b;if(this.entry){this.entryId=this.entry.id;b=new Date(this.entry.startDate);c=b.getHours()*util.msPerHour;c+=b.getMinutes()*util.msPerMinute;c+=b.getSeconds()*util.msPerSecond;c+=b.getMilliseconds();var a=(new Date(c)).getTimezoneOffset()*util.msPerMinute;c=new Date(c+a);var a=b.getFullYear(),f=b.getMonth();b=b.getDate();b=new Date(a,f,b)}this.form=new h({submitUrl:bootstrap.restUrl+"calendar/entry",addData:function(a){a.existingId=d.entryId;
a.date=util.combineDateAndTime(a.startDate,a.startTime).valueOf();if(d.entry.versions)a.versions=[],k.forEach(d.entry.versions,function(b){var c="ver_"+b.componentId,d=a[c];delete a[c];d&&a.versions.push({versionSelector:d,componentId:b.componentId})})},postSubmit:function(a){if(void 0!==a.blackouts){var b=i18n("The event cannot be moved to that time because it conflicts with a blackout")+":<br/>";1<a.blackouts.length&&(b=i18n("The event cannot be moved to that time because it conflicts with blackouts")+
":<br/>");k.forEach(a.blackouts,function(a){b+="<br/><b>"+util.escape(a.name)+"</b><br/>";void 0!==a.environment&&(b+="&nbsp; &nbsp; <b>"+i18n("Application Environment")+"</b>: "+util.escape(a.environment.name)+"<br/>");b+="&nbsp; &nbsp; "+util.dateFormatShort(a.startDate)+" - "+util.dateFormatShort(a.endDate)+"<br/>"});new e({title:i18n("Schedule Error"),forceRawMessages:!0,message:b})}else void 0!==d.callback&&d.callback()},onCancel:function(){void 0!==d.callback&&d.callback()}});this.form.addField({name:"dateLabel",
label:"",value:i18n("Choose a date for this event."),type:"Label"});this.form.addField({name:"startDate",label:i18n("Date"),required:!0,value:b,type:"Date"});this.form.addField({name:"startTime",label:i18n("Time"),required:!0,value:c,type:"Time"});k.forEach(d.entry.versions,function(a){var b=document.createElement("span"),c=document.createElement("span");c.innerHTML=i18n("Version for %s",a.component.name.escape());b.appendChild(c);d.form.addField({label:b,name:"ver_"+a.componentId,type:"VersionSelector",
value:a.versionSelector,context:{component:a.component,environment:d.environment},required:!1},"_versionInsert")});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/workflow/GraphPaletteWidget":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/focus,dojo/_base/array,dojo/_base/lang,dojo/_base/event,dojo/_base/declare,dojo/_base/xhr,dojo/request/xhr,dijit/Tree,dijit/layout/ContentPane,dojo/dom-construct,dojo/dom-attr,dojo/dom-style,dojo/dom-class,dojo/dom-geometry,dojo/on,dojo/mouse,dojo/query,dojo/_base/Deferred,dijit/form/TextBox,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,js/webext/widgets/RadioButtonGroup,js/webext/widgets/GenericConfirm,deploy/widgets/process/ProcessIconsFormatter,dijit/tree/ObjectStoreModel,dojo/store/Memory,dojo/store/Observable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K){return d("deploy.widgets.workflow.GraphPaletteWidget",[m,l],{templateString:'<div class="graphPalette"><div data-dojo-attach-point="searchAttach" class="smallerSearch"></div><div data-dojo-attach-point="collapseAllBtnAttach"></div><div data-dojo-attach-point="treeAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.initSearchTextBox();this.initCollapseAllButton();this.initTreeContainer();this.initStore();this.initModel();
this.initTree();this.tree.startup()},initSearchTextBox:function(){var a=this;this.filterTextBox=new x({name:"search",style:{position:"relative",width:void 0!==this.searchBoxWidth?this.searchBoxWidth:"360px",margin:"2px auto",display:"block"},placeHolder:i18n("Type to filter"),intermediateChanges:!0,onChange:_.debounce(function(){this._updatePlaceHolder();a.tree.initialized?(a.typingTimeout&&clearTimeout(a.typingTimeout),a.typingTimeout=setTimeout(function(){a.filterPalette()},0)):(a.tree.expandAllAndInitialize(),
setTimeout(function(){a.filterPalette()},0))},100,!1)});this.filterTextBox.placeAt(this.searchAttach);this.eraserBtn=n.create("div",{"class":"input-search",style:{position:"absolute",cursor:"pointer",right:"4px",top:"8px"}},this.filterTextBox.domNode);s(this.eraserBtn,"click",function(){a.filterTextBox.set("value","")})},initCollapseAllButton:function(){var a=this;t.set(this.searchAttach,{display:"inline-block",width:"calc(100% - 22px)"});t.set(this.collapseAllBtnAttach,{display:"inline-block",width:"22px",
position:"relative",height:"20px"});this.collapseAllBtn=n.create("div",{"class":"palette-minus",title:i18n("Collapse all"),style:{position:"absolute",cursor:"pointer",left:"50%",top:"25%",transform:"translate(-50%, -50%)"}},this.collapseAllBtnAttach);s(this.collapseAllBtn,"click",function(b){h.stop(b);a.expandCollapsePalette(!0)})},expandCollapsePalette:function(a){a?this.tree.collapseAll():this.tree.expandAll();var b=this.tree.getListFromQuery(this.store.query({parent:this.model.root.id})),c;for(c in b)b.hasOwnProperty(c)&&
this.tree.select(this.tree._itemNodesMap[b[c].id][0],!a)},initTreeContainer:function(){this.paletteContainer=n.create("div",{"class":"stepPaletteWidget",style:{border:void 0!==this.paletteBorder?this.paletteBorder:"1px solid #808080",width:"360px",height:"320px"}});n.place(this.paletteContainer,this.treeAttach);n.create("div",{"class":"paletteWaitingIcon"},this.paletteContainer)},initStore:function(){this.store=new K(new G({data:[{id:1}],getChildren:function(a){return this.query({parent:a.id})}}))},
initModel:function(){this.model=new D({store:this.store,query:{id:1}})},initTree:function(){var b=this;this.tree=new a({model:b.model,showRoot:!1,autoExpand:!1,_onExpandoClick:_.debounce(function(a){var c=a.node;if(c.item.id!==this.model.root.id)this.focusNode(c),c.item.selected=!c.item.selected,c.isExpanded?this._collapseNode(c):(this._expandNode(c),setTimeout(function(){if(b.tree.domNode.scrollTop+b.tree.domNode.clientHeight<c.containerNode.offsetTop+c.containerNode.offsetHeight)b.tree.domNode.scrollTop=
c.containerNode.offsetTop-100},200)),this.select(c,c.item.selected)},200,!0),onClick:function(a,b){this._onExpandoClick({node:b})},onOpen:function(a){var b=this.model.root.id;a.id!==b&&(a.parent===b?(this.widget.populateDrawer(a,this.paletteMap),this.expandAllSubdrawers(this.getListFromQuery(this.model.store.query({parent:a.id})))):"container"!==a.type&&(b=this.getListFromQuery(this.model.store.query({id:a.parent}))[0],this.widget.populateSubdrawer(a,b,this.paletteMap)))},select:function(a,b){a.item.parent===
this.model.root.id?q.toggle(a.rowNode,"dijitTreeRowSelectedWithClick",b):a.setSelected(!1)},expandAllAndInitialize:function(){this.expandAll();this.initialized=!0},getListFromQuery:function(a){var b=[],c;for(c=0;c<a.total;c++)b.push(a[c]);return b},expandAllSubdrawers:function(a){for(var b in a)if(a.hasOwnProperty(b)){var c=a[b],d=this._itemNodesMap[c.id][0];"container"!==c.type&&(!0===c.selected?this._expandNode(d):this._collapseNode(d))}},resetToSelectedDrawers:_.debounce(function(){var a=this.tree._itemNodesMap,
b=this.model.root.id,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c][0];d.item.id!==b&&"container"!==d.item.type&&(!0===d.item.selected?this._expandNode(d):this._collapseNode(d))}},0,!0)});this.tree.widget=this;this.tree.initialized=!1;q.add(this.tree.domNode,"dijitTreePalette");this.tree.placeAt(this.paletteContainer);this.paletteContainer.tree=this.tree},filterPalette:function(){var a=this.filterTextBox.get("value");if(a&&0<a.length){a=a.toLowerCase();if(!this.filtering)this.filtering=!0,this.tree.expandAll(),
q.add(this.eraserBtn,"input-eraser"),q.remove(this.eraserBtn,"input-search"),q.add(this.collapseAllBtnAttach,"hidden");this.searchAndHideDrawers(a)}else if(this.filtering)this.filtering=!1,this.removeHiddenFromAllNodes(),this.tree.resetToSelectedDrawers(),q.remove(this.eraserBtn,"input-eraser"),q.add(this.eraserBtn,"input-search"),q.remove(this.collapseAllBtnAttach,"hidden");this.tree.resize()},searchAndHideDrawers:function(a){var b=this.tree.getListFromQuery(this.store.query({parent:this.model.root.id})),
c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c],f,e=d.drawerSearchName&&-1!==d.drawerSearchName.indexOf(a);f=this.tree.getListFromQuery(this.store.query({parent:d.id}));f=1===f.length&&"container"===f[0].type?this.searchAndHideItems(f[0],e,a):this.searchAndHideSubdrawers(f,e,a);this.setVisibilityOfNode(this.tree._itemNodesMap[d.id][0],f||e)}},searchAndHideSubdrawers:function(a,b,c){var d=!1,f=!1,e;for(e in a)if(a.hasOwnProperty(e)){var h=a[e],o=b||h.drawerSearchName&&-1!==h.drawerSearchName.indexOf(c);
(f=this.getDrawer(h.id))?(f=this.searchAndHideItems(f,o,c),d||(d=o||f),this.setVisibilityOfNode(this.tree._itemNodesMap[h.id][0],f)):(f=this.searchAndHideItems(h,o,c),d||(d=o||f))}return d},searchAndHideItems:function(a,b,c){var d=!1;if(a&&a.itemsDiv){var f;for(f=0;f<a.itemsDiv.length;f++){var e=a.itemsDiv[f];b||-1!==e.stepSearchName.indexOf(c)?(q.remove(e,"hidden"),d=!0):q.add(e,"hidden")}}return d},setVisibilityOfNode:function(a,b){a.domNode.children[0].style.display=b?"":"none"},removeHiddenFromAllNodes:function(){var a=
this.tree._itemNodesMap,b=this.model.root.id,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c][0];if(d.item.id!==b)if("container"!==d.item.type)d.domNode.children[0].style.display="";else{var d=d.item,f;for(f=0;f<d.itemsDiv.length;f++)q.remove(d.itemsDiv[f],"hidden")}}},resetSearch:function(){if(this.filterTextBox)this.filterTextBox.reset(),this.filterPalette(),this.filterTextBox.focus(),this.paletteContainer.scrollTop=0,this.filtering=!1},generateOrClearDrawer:function(a,b,c,d,f,e){(f=f?f:this.getDrawer(c,
a))?((a=this.getDrawer(f.id))&&this.store.remove(a.id),a=f.id,f.initialized=!1):(f=i18n(a),e&&(f=e),a=this.store.put({name:f,paletteName:a,parent:c,type:"drawer",selected:b,initialized:!1,paletteMapIndex:d,drawerSearchName:""===a?void 0:f.toLowerCase()}),this.setNodeStyle(this.tree._itemNodesMap[a][0]));return a},setNodeStyle:function(a){a&&(this.removeNode(a.iconNode),this.removeNode(a.expandoNode),this.removeNode(a.expandoNodeText),a.item.parent===this.model.root.id?q.add(a.domNode,"dijitTreeDrawer"):
q.add(a.domNode,"dijitTreeSubdrawer"))},removeNode:function(a){n.destroy(a)},getDrawer:function(a,b){var c,d=this.tree.getListFromQuery(this.store.query({parent:a}));if(!b&&1===d.length)c=d[0];else{var f=-1;if(b)for(var e in d)if(d.hasOwnProperty(e)&&d[e].name===b){f=e;break}-1!==f&&(c=d[f])}return c},addSteps:function(a,b,c){var d=this.store.put({name:"",parent:b.id,drawerSearchName:b.drawerSearchName,type:"container",itemsDiv:[]}),f=this.store.query({id:d})[0],e=this.tree._itemNodesMap[d][0].domNode,
d=n.create("div",{},e);e.children[0].style.display="none";for(e=e=0;e<a.children.length;e++){var h=a.children[e];h.displayName=i18n(h.name);if(h.prepend&&0<h.prepend.length)for(var o=0,o=0;o<h.prepend.length;o++)h.displayName=i18n(h.prepend[o])+" / "+h.displayName;h.drawerTip=c;h=this.populatePaletteStep(d,h);this.postStepCreate&&this.postStepCreate(h);f.itemsDiv.push(h)}b.initialized=!0},populateDrawer:function(a,b){if(!a.initialized){var c=a.name,d;for(d in b[a.paletteName])if(b[a.paletteName].hasOwnProperty(d)){var f=
b[a.paletteName][d];if(f.hasOwnProperty("subdrawerName")){var e=this.getDrawer(a.id,f.subdrawerName);this.generateOrClearDrawer(f.subdrawerName,!0,a.id,d,e,f.subdrawerDisplayName);if(e)c+=" / "+e.name,this.addSteps(f,e,c),e.initialized=!0}else this.addSteps(f,a,c);a.initialized=!0}}},populateSubdrawer:function(a,b,c){a.initialized||(c=c[b.paletteName][a.paletteMapIndex],b=i18n(b.paletteName+" / "+a.name),this.addSteps(c,a,b))},populateTopLevelDrawers:function(a,b,c,d){this.tree.paletteMap=a;var f=
this.model.root.id,e,h;if(d)b=i18n("Clipboard");else if(this.drawerMap)for(e in this.drawerMap)if(this.drawerMap.hasOwnProperty(e)&&this.drawerMap[e].selected){b=e;break}this.lazyChildrenDrawer=c;for(e in a)if(a.hasOwnProperty(e)&&(1<a[e].length||0<a[e][0].children.length||e===i18n("Clipboard")))c=this.generateOrClearDrawer(e,e===b,f,null),e===b&&(h=c);this.tree.resetToSelectedDrawers();this.tree.select(this.tree._itemNodesMap[h][0],!0)},populatePaletteStep:function(a,d){var f=this,o=n.create("div",
{"class":"paletteItemContainer"});a.appendChild(o);d.copy&&n.create("div",{className:"closeStepIcon inline-block",title:i18n("Delete"),onmousedown:function(a){h.stop(a)},onclick:function(a){var b=a.currentTarget.parentNode;new z({message:i18n("Are you sure you want to remove the step '%s' from your Clipboard?",d.label),action:function(){c.del({url:bootstrap.restUrl+"copiedStep/"+d.id,handleAs:"json",load:function(){var a=f.tree.model.store.query({name:"Clipboard"})[0].id,a=f.tree.model.store.query({parent:a})[0],
c=a.itemsDiv.indexOf(b);-1!==c?(a.itemsDiv.splice(c,1),n.destroy(b)):this.error({message:i18n("No such step in tree directory.")})},error:function(a){(new y({message:i18n("Error deleting copied step.")+(a&&a.message?" "+a.message:"")})).startup()}})}})}},o);var s=n.create("div",{className:"iconContainer inline-block"},o),k=this.editor.tooltips.get(d);k&&r.set(o,"title",i18n(k));k=E.getIconForTree(d);n.place(k,s);s="";d.copy&&d.label?(s=d.label,-1!==d.label.indexOf("\n")&&q.add(o,"copy")):s=i18n(d.displayName||
d.name);var l=n.create("div",{className:"processActivityName draggableProcessStepName "+(d.copy?"copy":"")},o);n.create("div",{className:"process-name-wrapper process-name-wrapper-draggable",innerHTML:s.escape()},l);o.stepSearchName=s.toLowerCase();s=function(a,c,h,o,s,r){var k=new v,l=d;if(l.hasChildren&&f.lazyChildrenDrawer){var m=new C({title:i18n("Component Process for '%s'",util.escape(l.name)),closable:!0,draggable:!0}),u=n.create("div",{innerHTML:i18n("No process steps found"),style:{display:"none",
paddingBottom:"12px"}},m.containerNode),w=n.create("div",{"class":"loading-spinner"},m.containerNode);m.show();if("firstDayWizard"===f.editor.mode)if(q.add(w,"hidden"),a=f.editor.firstDayWizardModel.getComponentProcessesForDesigner(d),0<a.length){var y=[];j.forEach(a,function(a){y.push({label:a.name,value:a})});(new A({name:"pickProcess",options:y,hideLabel:!0,doubleWidth:!0,disabled:!1,enabled:!0,onChange:function(a){l=a;m.hide();m.destroy();k.resolve()}})).placeAt(m.containerNode)}else t.set(u,
"display","inline");else b(f.lazyChildrenDrawer.getUrl(d),{handleAs:"json"}).then(function(a){q.add(w,"hidden");if(0<a.length){var b=[];j.forEach(a,function(a){b.push({label:a.name,value:a})});(new A({name:"pickProcess",options:b,hideLabel:!0,doubleWidth:!0,disabled:!1,enabled:!0,onChange:function(a){l=a;m.hide();m.destroy();k.resolve()}})).placeAt(m.containerNode)}else t.set(u,"display","inline")})}else k.resolve();k.then(function(){if(l){var a=f.editor.graph.getModel();l.process=f.process;a.beginUpdate();
o-=80;s-=20;var b=h;h&&h.edge&&(b="note"===l.type?null:(b.source||b.target||{parent:b}).parent);b&&b.activity&&b.activity.isContainer&&(b=b.getGeometry(),o-=b.x,s-=b.y);f.editor.disableSplitting=r;l.copy&&l.activity?f.editor.activityCreator.addSavedActivity(e.clone(l.activity),o,s,h):f.editor.activityCreator.addNewActivity(l,o,s,h);f.editor.disableSplitting=!1;a.endUpdate()}})};o.releaseFunction=s;if(!this.nodrag)o.ds=mxUtils.makeDraggable(o,f.editor.graph,s,k,null,null,null,null,!0,f.editor.getCellDropTarget);
return o},createPaletteMap:function(a,b,c){var d={};d[a]=[];d[i18n("Clipboard")]=[];var f=null;if(b)f=b.label,d[f]=[];b=[0];this.flatten(c,d,a,f,[],b,0);this.drawerCnt=b[0];b=14<this.drawerCnt;f&&d[f].sort(function(a,b){return a.name.localeCompare(b.name)});var e=0,h=null,o=null,a={},c=[],n=[],j={};for(o in d)if(d.hasOwnProperty(o)){n=[];j={};if(b&&o!==i18n("Clipboard")&&o!==f&&4>d[o].length){for(e=0;e<d[o].length;e++)h=d[o][e],h.prepend.unshift(o),c.push(h);delete d[o];this.drawerCnt--}else for(e=
0;e<d[o].length;e++)if(h=d[o][e],h.prepend&&0<h.prepend.length){var s=j[h.prepend[0]];s||(s=j[h.prepend[0]]=[]);h.prepend.shift();s.push(h)}else n.push(h);e=a[o]=[];e.push({children:n});n=null;for(n in j)if(j.hasOwnProperty(n)){var h=j[n],s=n,r=i18n(s);if(0<h[0].prepend.length){for(var q=0,k=h[0].prepend[0],t=!0,q=0;q<h.length;q++)if(h[q].prepend[0]!==k){t=!1;break}if(t){s+=" / "+k;r+=" / "+i18n(k);for(q=0;q<h.length;q++)h[q].prepend.shift()}}e.push({subdrawerName:s,subdrawerDisplayName:r,children:h})}}if(0<
c.length)(d=a[i18n("Miscellaneous")])||(d=a[i18n("Miscellaneous")]=[{children:[]}]),d[0].children=d[0].children.concat(c);return a},flatten:function(a,b,c,d,f,e,h){var o=this;j.forEach(a,function(a){if("folder"===a.type)if(0===h)a.hasChildren&&d?b[d].push(a):(b[a.name]||(b[a.name]=[]),o.flatten(a.children,b,a.name,d,[],h+1)),e[0]++;else{var n=f.slice();n.push(a.name);o.flatten(a.children,b,c,d,n,h+1)}else a.prepend=f.slice(),b[c].push(a)})}})})},"dijit/Tree":function(){define("dojo/_base/array,dojo/_base/connect,dojo/cookie,dojo/_base/declare,dojo/Deferred,dojo/DeferredList,dojo/dom,dojo/dom-class,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/errors/create,dojo/fx,dojo/_base/kernel,dojo/keys,dojo/_base/lang,dojo/on,dojo/topic,dojo/touch,dojo/when,./focus,./registry,./_base/manager,./_Widget,./_TemplatedMixin,./_Container,./_Contained,./_CssStateMixin,dojo/text!./templates/TreeNode.html,dojo/text!./templates/Tree.html,./tree/TreeStoreModel,./tree/ForestStoreModel,./tree/_dndSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L,I){var e=j(e,{addCallback:function(a){this.then(a)},addErrback:function(a){this.then(null,a)}}),J=j("dijit._TreeNode",[B,A,z,E,D],{item:null,isTreeNode:!0,label:"",_setLabelAttr:{node:"labelNode",type:"innerText"},isExpandable:null,isExpanded:!1,state:"UNCHECKED",templateString:G,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);
this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(b){var c=Math.max(b,0)*this.tree._nodePixelIndent+"px";a.set(this.domNode,"backgroundPosition",c+" 0px");a.set(this.indentNode,this.isLeftToRight()?"paddingLeft":"paddingRight",c);l.forEach(this.getChildren(),function(a){a.set("indent",b+1)});this._set("indent",b)},markProcessing:function(){this.state="LOADING";this._setExpando(!0)},
unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var b=this.tree,c=b.model;b._v10Compat&&a===c.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(b,d,f){var e="_"+d+"Class",d=d+"Node",h=this[e];this[e]=this.tree["get"+f+"Class"](b,this.isExpanded);c.replace(this[d],this[e]||"",h||"");a.set(this[d],this.tree["get"+f+"Style"](b,
this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();!a||!a.rowNode||"none"==a.rowNode.style.display?c.add(this.domNode,"dijitTreeIsRoot"):c.toggle(this.domNode,"dijitTreeIsLast",!this.getNextSibling())},_setExpando:function(a){var b=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],a=a?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,b[a],b);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return this._expandDeferred;
this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a,b=r.wipeIn({node:this.containerNode,
duration:C.defaultDuration,onEnd:function(){a.resolve(!0)}});a=this._expandDeferred=new e(function(){b.stop()});b.play();return a},collapse:function(){if(this._collapseDeferred)return this._collapseDeferred;this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");
this._setExpando();this._updateItemClasses(this.item);var a,b=r.wipeOut({node:this.containerNode,duration:C.defaultDuration,onEnd:function(){a.resolve(!0)}});a=this._collapseDeferred=new e(function(){b.stop()});b.play();return a},indent:0,setChildItems:function(a){var b=this.tree,c=b.model,d=[],f=this.getChildren();l.forEach(f,function(a){z.prototype.removeChild.call(this,a)},this);this.defer(function(){l.forEach(f,function(a){if(!a._destroyed&&!a.getParent()){b.dndController.removeTreeNode(a);var d=
c.getIdentity(a.item),f=b._itemNodesMap[d];1==f.length?delete b._itemNodesMap[d]:(d=l.indexOf(f,a),-1!=d&&f.splice(d,1));a.destroyRecursive()}})});this.state="LOADED";a&&0<a.length?(this.isExpandable=!0,l.forEach(a,function(a){var f=c.getIdentity(a),e=b._itemNodesMap[f],h;if(e)for(var o=0;o<e.length;o++)if(e[o]&&!e[o].getParent()){h=e[o];h.set("indent",this.indent+1);break}h||(h=this.tree._createTreeNode({item:a,tree:b,isExpandable:c.mayHaveChildren(a),label:b.getLabel(a),tooltip:b.getTooltip(a),
ownerDocument:b.ownerDocument,dir:b.dir,lang:b.lang,textDir:b.textDir,indent:this.indent+1}),e?e.push(h):b._itemNodesMap[f]=[h]);this.addChild(h);(this.tree.autoExpand||this.tree._state(h))&&d.push(b._expandNode(h))},this),l.forEach(this.getChildren(),function(a){a._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);if(this==b.rootNode)(a=this.tree.showRoot?this:this.getChildren()[0])?(a.setFocusable(!0),b.lastFocused=a):b.domNode.setAttribute("tabIndex",
"0");a=new h(d);this.tree._startPaint(a);return a},getTreePath:function(){for(var a=this,b=[];a&&a!==this.tree.rootNode;)b.unshift(a.item),a=a.getParent();b.unshift(this.tree.rootNode.item);return b},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var b=this.getChildren();if(0==b.length)this.isExpandable=!1,this.collapse();l.forEach(b,function(a){a._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},
setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",a)},setFocusable:function(a){this.labelNode.setAttribute("tabIndex",a?"0":"-1")},_setTextDirAttr:function(a){if(a&&(this.textDir!=a||!this._created))this._set("textDir",a),this.applyTextDir(this.labelNode,this.labelNode.innerText||this.labelNode.textContent||""),l.forEach(this.getChildren(),function(b){b.set("textDir",a)},this)}}),U=j("dijit.Tree",[B,A],{store:null,model:null,
query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:K,persist:!0,autoExpand:!1,dndController:I,dndParams:"onDndDrop,itemCreator,onDndCancel,checkAcceptance,checkItemAcceptance,dragThreshold,betweenThreshold".split(","),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,b){u.publish(this.id,
o.mixin({tree:this,event:a},b||{}))},postMixInProperties:function(){this.tree=this;if(this.autoExpand)this.persist=!1;this._itemNodesMap={};if(!this.cookieName&&this.id)this.cookieName=this.id+"SaveStateCookie";this.pendingCommandsDeferred=this.expandChildrenDeferred=new e;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(s(this.domNode,s.selector(".dijitTreeNode",w.enter),function(b){a._onNodeMouseEnter(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode",
w.leave),function(b){a._onNodeMouseLeave(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","click"),function(b){a._onClick(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","dblclick"),function(b){a._onDblClick(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","keypress"),function(b){a._onKeyPress(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeNode","keydown"),function(b){a._onKeyDown(y.byNode(this),b)}),s(this.domNode,s.selector(".dijitTreeRow","focusin"),
function(b){a._onNodeFocus(y.getEnclosingWidget(this),b)}));this.model||this._store2model();this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this.inherited(arguments);if(this.dndController){if(o.isString(this.dndController))this.dndController=o.getObject(this.dndController);for(var b={},c=0;c<this.dndParams.length;c++)this[this.dndParams[c]]&&(b[this.dndParams[c]]=this[this.dndParams[c]]);
this.dndController=new this.dndController(this,b)}this._load();!this.params.path&&!this.params.paths&&this.persist&&this.set("paths",this.dndController._getSavedPaths());this.onLoadDeferred=this.pendingCommandsDeferred;this.onLoadDeferred.then(o.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;t.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};
if(this.params.mayHaveChildren)a.mayHaveChildren=o.hitch(this,"mayHaveChildren");if(this.params.getItemChildren)a.getChildren=o.hitch(this,function(a,b,c){this.getItemChildren(this._v10Compat&&a===this.model.root?null:a,b,c)});this.model=new L(a);this.showRoot=Boolean(this.label)},onLoad:function(){},_load:function(){this.model.getRoot(o.hitch(this,function(a){var b=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular):(b.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(b.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(b.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),
this.domNode.removeAttribute("aria-labelledby")),b.labelNode.setAttribute("role","presentation"),b.containerNode.setAttribute("role","tree"),b.containerNode.setAttribute("aria-expanded","true"),b.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.domNode.appendChild(b.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(b):this._itemNodesMap[a]=[b];b._updateLayout();this._expandNode(b).then(o.hitch(this,function(){this.expandChildrenDeferred.resolve(!0)}))}),
o.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){return!a?[]:[].concat(this._itemNodesMap[o.isString(a)?a:this.model.getIdentity(a)])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var b=this;return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(o.hitch(this,function(){var c=l.map(a,function(a){return!a||o.isString(a)?a:b.model.getIdentity(a)}),d=[];l.forEach(c,function(a){d=d.concat(b._itemNodesMap[a]||
[])});this.set("selectedNodes",d)}))},_setPathAttr:function(a){return a.length?this.set("paths",[a]):this.set("paths",[])},_setPathsAttr:function(a){function b(a,d,f){var e=a.shift(),h=l.filter(d,function(a){return a.getIdentity()==e})[0];h?a.length?c._expandNode(h).then(function(){b(a,h.getChildren(),f)}):f.resolve(h):f.reject(new U.PathError("Could not expand path at "+e))}var c=this;return this.pendingCommandsDeferred=this.pendingCommandsDeferred.then(function(){return new h(l.map(a,function(a){var d=
new e,a=l.map(a,function(a){return o.isString(a)?a:c.model.getIdentity(a)});a.length?b(a,[c.rootNode],d):d.reject(new U.PathError("Empty path"));return d}))}).then(function(a){c.set("selectedNodes",l.map(l.filter(a,function(a){return a[0]}),function(a){return a[1]}))})},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},expandAll:function(){function a(c){var d=new dojo.Deferred;b._expandNode(c).then(function(){var b=
l.filter(c.getChildren()||[],function(a){return a.isExpandable}),b=l.map(b,a);(new dojo.DeferredList(b)).then(function(){d.resolve(!0)})});return d}var b=this;return a(this.rootNode)},collapseAll:function(){function a(c){var d=new dojo.Deferred;d.label="collapseAllDeferred";var f=l.filter(c.getChildren()||[],function(a){return a.isExpandable}),f=l.map(f,a);(new dojo.DeferredList(f)).then(function(){!c.isExpanded||c==b.rootNode&&!b.showRoot?d.resolve(!0):b._collapseNode(c).then(function(){d.resolve(!0)})});
return d}var b=this;return a(this.rootNode)},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,b){return!a||this.model.mayHaveChildren(a)?b?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onKeyPress:function(a,b){if(!(32>=b.charCode)&&!b.altKey&&!b.ctrlKey&&
!b.shiftKey&&!b.metaKey){var c=String.fromCharCode(b.charCode);this._onLetterKeyNav({node:a,key:c.toLowerCase()});f.stop(b)}},_onKeyDown:function(a,b){var c=b.keyCode,d=this._keyHandlerMap;if(!d)d={},d[q.ENTER]=d[q.SPACE]=d[" "]="_onEnterKey",d[this.isLeftToRight()?q.LEFT_ARROW:q.RIGHT_ARROW]="_onLeftArrow",d[this.isLeftToRight()?q.RIGHT_ARROW:q.LEFT_ARROW]="_onRightArrow",d[q.UP_ARROW]="_onUpArrow",d[q.DOWN_ARROW]="_onDownArrow",d[q.HOME]="_onHomeKey",d[q.END]="_onEndKey",this._keyHandlerMap=d;this._keyHandlerMap[c]&&
(this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch),this[this._keyHandlerMap[c]]({node:a,item:a.item,evt:b}),f.stop(b))},_onEnterKey:function(a){this._publish("execute",{item:a.item,node:a.node});this.dndController.userSelect(a.node,m.isCopyKey(a.evt),a.evt.shiftKey);this.onClick(a.item,a.node,a.evt)},_onDownArrow:function(a){(a=this._getNextNode(a.node))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a){var a=a.node,b=a.getPreviousSibling();if(b)for(a=b;a.isExpandable&&
a.isExpanded&&a.hasChildren();)a=a.getChildren(),a=a[a.length-1];else if(b=a.getParent(),this.showRoot||b!==this.rootNode)a=b;a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(a){a=a.node;a.isExpandable&&!a.isExpanded?this._expandNode(a):a.hasChildren()&&(a=a.getChildren()[0])&&a.isTreeNode&&this.focusNode(a)},_onLeftArrow:function(a){a=a.node;a.isExpandable&&a.isExpanded?this._collapseNode(a):(a=a.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},_onHomeKey:function(){var a=
this._getRootOrFirstNode();a&&this.focusNode(a)},_onEndKey:function(){for(var a=this.rootNode;a.isExpanded;)a=a.getChildren(),a=a[a.length-1];a&&a.isTreeNode&&this.focusNode(a)},multiCharSearchDuration:250,_onLetterKeyNav:function(a){var b=this._curSearch;b?(b.pattern+=a.key,b.timer.remove()):b=this._curSearch={pattern:a.key,startNode:a.node};b.timer=this.defer(function(){delete this._curSearch},this.multiCharSearchDuration);a=b.startNode;do(a=this._getNextNode(a))||(a=this._getRootOrFirstNode());
while(a!==b.startNode&&a.label.toLowerCase().substr(0,b.pattern.length)!=b.pattern);a&&a.isTreeNode&&a!==b.startNode&&this.focusNode(a)},isExpandoNode:function(a,b){return d.isDescendant(a,b.expandoNode)||d.isDescendant(a,b.expandoNodeText)},_onClick:function(a,b){var c=this.isExpandoNode(b.target,a);this.openOnClick&&a.isExpandable||c?a.isExpandable&&this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this.onClick(a.item,a,b),this.focusNode(a));f.stop(b)},_onDblClick:function(a,
b){var c=b.target,c=c==a.expandoNode||c==a.expandoNodeText;this.openOnDblClick&&a.isExpandable||c?a.isExpandable&&this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:b}),this.onDblClick(a.item,a,b),this.focusNode(a));f.stop(b)},_onExpandoClick:function(a){a=a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){if(a.isExpandable&&a.isExpanded&&
a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var b=a.getNextSibling();if(b)return b;a=a.getParent()}return null},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_collapseNode:function(a){a._expandNodeDeferred&&delete a._expandNodeDeferred;if("LOADING"!=a.state&&a.isExpanded){var b=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(b);return b}},_expandNode:function(a){var b=new e;if(a._expandNodeDeferred)return a._expandNodeDeferred;
var c=this.model,d=a.item,f=this;if(!a._loadDeferred)a.markProcessing(),a._loadDeferred=new e,c.getChildren(d,function(b){a.unmarkProcessing();a.setChildItems(b).then(function(){a._loadDeferred.resolve(b)})},function(b){console.error(f,": error loading "+a.label+" children: ",b);a._loadDeferred.reject(b)});a._loadDeferred.then(o.hitch(this,function(){a.expand().then(function(){b.resolve(!0)});this.onOpen(a.item,a);this._state(a,!0)}));this._startPaint(b);return b},focusNode:function(a){x.focus(a.labelNode)},
_onNodeFocus:function(a){if(a&&a!=this.lastFocused)this.lastFocused&&!this.lastFocused._destroyed&&this.lastFocused.setFocusable(!1),a.setFocusable(!0),this.lastFocused=a},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var b=this._itemNodesMap[this.model.getIdentity(a)];if(b){var c=this.getLabel(a),d=this.getTooltip(a);l.forEach(b,function(b){b.set({item:a,label:c,tooltip:d});b._updateItemClasses(a)})}},_onItemChildrenChange:function(a,b){var c=this._itemNodesMap[this.model.getIdentity(a)];
c&&l.forEach(c,function(a){a.setChildItems(b)})},_onItemDelete:function(a){var a=this.model.getIdentity(a),b=this._itemNodesMap[a];b&&(l.forEach(b,function(a){this.dndController.removeTreeNode(a);var b=a.getParent();b&&b.removeChild(a);a.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=k(this.cookieName);a&&l.forEach(a.split(","),function(a){this._openedNodes[a]=!0},this)}},_state:function(a,b){if(!this.persist)return!1;
var c=l.map(a.getTreePath(),function(a){return this.model.getIdentity(a)},this).join("/");if(1===arguments.length)return this._openedNodes[c];b?this._openedNodes[c]=!0:delete this._openedNodes[c];if(this.persist&&this.cookieName){var c=[],d;for(d in this._openedNodes)c.push(d);k(this.cookieName,c.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!o.isString(this.dndController)&&
this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&b.setMarginBox(this.domNode,a);this._nodePixelIndent=b.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(o.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),
delete this._adjustWidthsTimer);var b=o.hitch(this,function(){this._outstandingPaintOperations--;if(0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started)this._adjustWidthsTimer=this.defer("_adjustWidths")});v(a,b,b)},_adjustWidths:function(){function a(b){var f=b.rowNode;f.style.width="auto";c=Math.max(c,f.clientWidth);d.push(f);b.isExpanded&&l.forEach(b.getChildren(),a)}this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var c=0,d=[];
a(this.rootNode);c=Math.max(c,b.getContentBox(this.domNode).w);l.forEach(d,function(a){a.style.width=c+"px"})},_createTreeNode:function(a){return new J(a)},_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});U.PathError=n("TreePathError");U._TreeNode=J;return U})},"dojo/DeferredList":function(){define("dojo/DeferredList",["./_base/kernel","./_base/Deferred","./_base/array"],function(l,m,k){l.DeferredList=function(j,e,h,d){var c=[];m.call(this);
var b=this;0===j.length&&!e&&this.resolve([0,[]]);var a=0;k.forEach(j,function(f,n){function r(d,f){c[n]=[d,f];a++;a===j.length&&b.resolve(c)}f.then(function(a){e?b.resolve([n,a]):r(!0,a)},function(a){h?b.reject(a):r(!1,a);if(d)return null;throw a;})})};l.DeferredList.prototype=new m;l.DeferredList.prototype.gatherResults=function(j){j=new l.DeferredList(j,!1,!0,!1);j.addCallback(function(e){var h=[];k.forEach(e,function(d){h.push(d[1])});return h});return j};return l.DeferredList})},"url:dijit/templates/TreeNode.html":'<div class="dijitTreeNode" role="presentation"\n\t><div data-dojo-attach-point="rowNode" class="dijitTreeRow dijitInline" role="presentation"\n\t\t><div data-dojo-attach-point="indentNode" class="dijitInline"></div\n\t\t><img src="${_blankGif}" alt="" data-dojo-attach-point="expandoNode" class="dijitTreeExpando" role="presentation"\n\t\t/><span data-dojo-attach-point="expandoNodeText" class="dijitExpandoText" role="presentation"\n\t\t></span\n\t\t><span data-dojo-attach-point="contentNode"\n\t\t\tclass="dijitTreeContent" role="presentation">\n\t\t\t<img src="${_blankGif}" alt="" data-dojo-attach-point="iconNode" class="dijitIcon dijitTreeIcon" role="presentation"\n\t\t\t/><span data-dojo-attach-point="labelNode" class="dijitTreeLabel" role="treeitem" tabindex="-1" aria-selected="false"></span>\n\t\t</span\n\t></div>\n\t<div data-dojo-attach-point="containerNode" class="dijitTreeContainer" role="presentation" style="display: none;"></div>\n</div>\n',
"url:dijit/templates/Tree.html":'<div class="dijitTree dijitTreeContainer" role="tree">\n\t<div class="dijitInline dijitTreeIndent" style="position: absolute; top: -9999px" data-dojo-attach-point="indentDetector"></div>\n</div>\n',"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(l,m,k,j){return k("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,
deferItemLoadingUntilExpand:!1,constructor:function(e){j.mixin(this,e);this.connects=[];e=this.store;if(!e.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");if(e.getFeatures()["dojo.data.api.Notification"])this.connects=this.connects.concat([m.after(e,"onNew",j.hitch(this,"onNewItem"),!0),m.after(e,"onDelete",j.hitch(this,"onDeleteItem"),!0),m.after(e,"onSet",j.hitch(this,"onSetItem"),!0)])},destroy:function(){for(var e;e=this.connects.pop();)e.remove()},
getRoot:function(e,h){this.root?e(this.root):this.store.fetch({query:this.query,onComplete:j.hitch(this,function(d){if(1!=d.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+d.length+" items, but must return exactly one");this.root=d[0];e(this.root)}),onError:h})},mayHaveChildren:function(e){return l.some(this.childrenAttrs,function(h){return this.store.hasAttribute(e,h)},this)},getChildren:function(e,h,d){var c=this.store;if(c.isItemLoaded(e)){for(var b=[],a=0;a<this.childrenAttrs.length;a++)var f=
c.getValues(e,this.childrenAttrs[a]),b=b.concat(f);var n=0;this.deferItemLoadingUntilExpand||l.forEach(b,function(a){c.isItemLoaded(a)||n++});0==n?h(b):l.forEach(b,function(a,f){c.isItemLoaded(a)||c.loadItem({item:a,onItem:function(a){b[f]=a;0==--n&&h(b)},onError:d})})}else{var r=j.hitch(this,arguments.callee);c.loadItem({item:e,onItem:function(a){r(a,h,d)},onError:d})}},isItem:function(e){return this.store.isItem(e)},fetchItemByIdentity:function(e){this.store.fetchItemByIdentity(e)},getIdentity:function(e){return this.store.getIdentity(e)},
getLabel:function(e){return this.labelAttr?this.store.getValue(e,this.labelAttr):this.store.getLabel(e)},newItem:function(e,h,d){var c={parent:h,attribute:this.childrenAttrs[0]},b;this.newItemIdAttr&&e[this.newItemIdAttr]?this.fetchItemByIdentity({identity:e[this.newItemIdAttr],scope:this,onItem:function(a){a?this.pasteItem(a,null,h,!0,d):(b=this.store.newItem(e,c))&&void 0!=d&&this.pasteItem(b,h,h,!1,d)}}):(b=this.store.newItem(e,c))&&void 0!=d&&this.pasteItem(b,h,h,!1,d)},pasteItem:function(e,h,
d,c,b){var a=this.store,f=this.childrenAttrs[0];h&&l.forEach(this.childrenAttrs,function(b){if(a.containsValue(h,b,e)){if(!c){var d=l.filter(a.getValues(h,b),function(a){return a!=e});a.setValues(h,b,d)}f=b}});if(d)if("number"==typeof b){var n=a.getValues(d,f).slice();n.splice(b,0,e);a.setValues(d,f,n)}else a.setValues(d,f,a.getValues(d,f).concat(e))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(e,h){h&&this.getChildren(h.item,j.hitch(this,function(d){this.onChildrenChange(h.item,
d)}))},onDeleteItem:function(e){this.onDelete(e)},onSetItem:function(e,h){if(-1!=l.indexOf(this.childrenAttrs,h))this.getChildren(e,j.hitch(this,function(d){this.onChildrenChange(e,d)}));else this.onChange(e)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(l,m,k,j,e){return m("dijit.tree.ForestStoreModel",e,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(e){this.root=
{store:this,root:!0,id:e.rootId,label:e.rootLabel,children:e.rootChildren}},mayHaveChildren:function(e){return e===this.root||this.inherited(arguments)},getChildren:function(e,d,c){e===this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:j.hitch(this,function(b){this.root.children=b;d(b)}),onError:c}):this.inherited(arguments)},isItem:function(e){return e===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(e){if(e.identity==this.root.id){var d=
e.scope||k.global;e.onItem&&e.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(e){return e===this.root?this.root.id:this.inherited(arguments)},getLabel:function(e){return e===this.root?this.root.label:this.inherited(arguments)},newItem:function(e,d,c){return d===this.root?(this.onNewRootItem(e),this.store.newItem(e)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(e,d,c,b,a){if(d===this.root&&!b)this.onLeaveRoot(e);this.inherited(arguments,[e,
d===this.root?null:d,c===this.root?null:c,b,a]);if(c===this.root)this.onAddToRoot(e)},onAddToRoot:function(){},onLeaveRoot:function(){},_requeryTop:function(){var e=this.root.children||[];this.store.fetch({query:this.query,onComplete:j.hitch(this,function(d){this.root.children=d;if(e.length!=d.length||l.some(e,function(c,b){return d[b]!=c}))this.onChildrenChange(this.root,d)})})},onNewItem:function(e,d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(e){-1!=l.indexOf(this.root.children,
e)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(e,d,c,b){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/Deferred,dojo/_base/kernel,dojo/_base/lang,dojo/cookie,dojo/mouse,dojo/on,dojo/touch,./_dndContainer".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return k("dijit.tree._dndSelector",f,{constructor:function(){this.selection={};this.anchor=null;if(!this.cookieName&&
this.tree.id)this.cookieName=this.tree.id+"SaveSelectedCookie";this.events.push(b(this.tree.domNode,a.press,h.hitch(this,"onMouseDown")),b(this.tree.domNode,a.release,h.hitch(this,"onMouseUp")),b(this.tree.domNode,a.move,h.hitch(this,"onMouseMove")))},singular:!1,getSelectedTreeNodes:function(){var a=[],b=this.selection,c;for(c in b)a.push(b[c]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,
b){this.setSelection(this.getSelectedTreeNodes().concat([a]));if(b)this.anchor=a;return a},removeTreeNode:function(a){this.setSelection(this._setDifference(this.getSelectedTreeNodes(),[a]));return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},setSelection:function(a){var b=this.getSelectedTreeNodes();l.forEach(this._setDifference(b,a),h.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));l.forEach(this._setDifference(a,
b),h.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,b){l.forEach(b,function(a){a.__exclude__=!0});var c=l.filter(a,function(a){return!a.__exclude__});l.forEach(b,function(a){delete a.__exclude__});return c},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),b=[],c=[],f=[];l.forEach(a,function(a){var d=a.getTreePath(),e=this.tree.model;c.push(a);b.push(d);d=l.map(d,function(a){return e.getIdentity(a)},
this);f.push(d.join("/"))},this);a=l.map(c,function(a){return a.item});this.tree._set("paths",b);this.tree._set("path",b[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null);this.tree.persist&&0<f.length&&d(this.cookieName,f.join(","),{expires:365})},_getSavedPaths:function(){var a=this.tree;if(a.persist&&a.dndController.cookieName){var b=[];(a=d(a.dndController.cookieName))&&(b=l.map(a.split(","),
function(a){return a.split("/")}));return b}},onMouseDown:function(a){if(this.current&&!this.tree.isExpandoNode(a.target,this.current)){if(c.isLeft(a))a.preventDefault();else if("touchstart"!=a.type)return;var b=this.current,d=m.isCopyKey(a),f=b.id;!this.singular&&!a.shiftKey&&this.selection[f]?this._doDeselect=!0:(this._doDeselect=!1,this.userSelect(b,d,a.shiftKey))}},onMouseUp:function(a){if(this._doDeselect)this._doDeselect=!1,this.userSelect(this.current,m.isCopyKey(a),a.shiftKey)},onMouseMove:function(){this._doDeselect=
!1},_compareNodes:function(a,b){if(a===b)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-b.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(b)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(a);var d=doc.createRange();d.setStartBefore(b);return c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(a,
b,c){if(this.singular)this.anchor==a&&b?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(c&&this.anchor){c=this.anchor;0>this._compareNodes(this.anchor.rowNode,a.rowNode)?b=c:(b=a,a=c);for(c=[];b!=a;)c.push(b),b=this.tree._getNextNode(b);c.push(a);this.setSelection(c)}else this.selection[a.id]&&b?this.removeTreeNode(a):b?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
b){var b=b||e.global,c;for(c in this.selection)a.call(b,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect,dojo/_base/declare,dojo/dom-class,dojo/_base/event,dojo/_base/lang,dojo/on,dojo/touch".split(","),function(l,m,k,j,e,h,d){return m("dijit.tree._dndContainer",null,{constructor:function(c,b){this.tree=c;this.node=c.domNode;e.mixin(this,b);this.current=null;this.containerState="";k.add(this.node,"dojoDndContainer");this.events=[h(this.node,d.enter,e.hitch(this,
"onOverEvent")),h(this.node,d.leave,e.hitch(this,"onOutEvent")),l.after(this.tree,"_onNodeMouseEnter",e.hitch(this,"onMouseOver"),!0),l.after(this.tree,"_onNodeMouseLeave",e.hitch(this,"onMouseOut"),!0),h(this.node,"dragstart",e.hitch(j,"stop")),h(this.node,"selectstart",e.hitch(j,"stop"))]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,b){var a="dojoDnd"+
c,d=c.toLowerCase()+"State";k.replace(this.node,a+b,a+this[d]);this[d]=b},_addItemClass:function(c,b){k.add(c,"dojoDndItem"+b)},_removeItemClass:function(c,b){k.remove(c,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"js/webext/widgets/RadioButtonGroup":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/on,dijit/_TemplatedMixin,dijit/_WidgetBase,dojox/html/entities,dijit/form/RadioButton".split(","),
function(l,m,k,j,e,h,d,c,b){return l([d,h],{templateString:'<span class="radioButtonGroup">    <div data-dojo-attach-point="radioButtonGroup"></div></span>',postCreate:function(){var a=this,c=[];m.forEach(a.options,function(d){var e=j.create("div"),h=new b({name:a.name,value:d.value,disabled:a.disabled,checked:a.value===d.value,onChange:function(b){if(b&&a.onChange)a.onChange(a.get("value"))}}),q=j.create("label",{"class":"inlineBlock"});h.placeAt(q);var o=j.create("div",{"class":"inlineBlock radioButtonLabel"});
d.content?o.appendChild(d.content):(d=document.createTextNode(d.label),o.appendChild(d));q.appendChild(o);e.appendChild(q);a.radioButtonGroup.appendChild(e);c.push(h)});a._radioButtons=c},_radioButtons:null,_initialValue:void 0,_getValueAttr:function(){var a,b,c,d=this._radioButtons;if(d){a=void 0;for(b=0;b<d.length;b++)if(c=d[b],c.get("checked")){a=c.get("value");break}}else a=this._initialValue;return a},_setValueAttr:function(a){var b,c,d=this._radioButtons;if(d)for(b=0;b<d.length;b++){if(c=d[b],
c.get("value")===a){c.set("checked",!0);break}}else this._initialValue=a}})})},"deploy/widgets/process/ProcessIconsFormatter":function(){define("dojo/_base/array,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/mouse,dojo/on,dijit/form/Button,dijit/TooltipDialog,dijit/popup,deploy/widgets/tag/TagDisplay,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),function(l,m){return{getIconForTree:function(k){var j="process-icon ",j=k.type?"folder"===k.type?j+"process-folder-icon":
j+(k.type+"-step-icon"):j+(this.getIconForStep(k)+"-step-icon");return m.create("div",{className:"inline-block "+j})},getIconForStep:function(k,j){var e="process",h=k.id,d=!1;if(j)h=k.name;if(k.activity&&k.activity.type)h=k.activity.type,d=!0;if(k.plugin)h=k.name;if(k.data&&(h=k.data.commandName,!h))(h=k.data.type)?-1!==h.indexOf("EnvironmentIterator")||"touchedResourceIterator"===h?h=k.id:d=-1!==h.indexOf("ManualTask")||-1!==h.indexOf("ResourceInventory")||-1!==h.indexOf("rollback")||-1!==h.indexOf("Approval")||
"componentProcess"===h||"resourceDiscovery"===h?!1:!0:(h=k.id,d=!1);h||(h=k.id||"",d=!1);if(d)e=h;else{k.command&&k.command.name?h=k.command.name:h.charAt(0)&&0<h.length&&(h=h.charAt(0).toUpperCase()+h.slice(1));switch(h){case "Run Groovy Script":e="runScript";break;case "Shell":e="shell";break;case "Shell (with xargs)":e="shellArgs";break;case "Unzip":e="unzip";break;case "Untar Tarball":e="unzip"}d=function(c,b){var a=h.toLowerCase(),c=c.toLowerCase(),d=0===a.indexOf(c);b&&(d=-1!==a.indexOf(c));
return d};"process"===e&&(d("DesiredInventoryActivity",1)||d("DesiredSnapshotInventoryActivity",1)?e="process":d("Add")?e="add":d("Allocate")?e="allocate":d("AppCmd")?e="shellArgs":d("Approval",1)||d("Submit")?e="setStatus":d("Assign")?e="set":d("Associate")||d("Link")?e="link":d("Check")||d("Verify")?e="check":d("Configure")?e="configure":d("Copy")?e="copy":d("Create")?e="create":d("Delete")?e="delete":d("Deregister")?e="cancel":d("Disable")?e="stop":d("Download")?e="download":d("Enable")||d("Execute")?
e="start":d("Export")?e="export":d("Flip")?e="flip":d("FTP")?e="ftp":d("Get")?e="read":d("Import")||d("Batch Import")?e="import":d("Install",1)?e="install":d("Launch")?e="deploy":d("Modify")||d("Change")||d("Define")?e="modify":d("Monitor")||d("View")?e="monitor":d("Move")?e="move":d("ManualTask",1)?e="manualTask":d("Publish")?e="publish":d("Read")?e="read":d("Recycle")?e="recycle":d("Register")?e="create":d("Remove")?e="remove":d("Replace")?e="replace":d("Receive")||d("Retrieve")?e="receive":d("Restart")||
d("Reboot")?e="restart":d("Revert")||d("Rollback",1)?e="revert":d("Set")?e="set":d("Run",1)||d("Each",1)||d("Process",1)?e="runProcess":d("Script",1)?e="runScript":d("Send")?e="send":d("Start")||d("Activate")?e="start":d("Stop")||d("Terminate")||d("Cancel")?e="stop":d("Sync")?e="sync":d("Undeploy")?e="undeploy":d("Uninstall",1)?e="uninstall":d("Untar",1)?e="unzip":d("Update")?e="sync":d("Upgrade")?e="upgrade":d("Upload")?e="upload":d("Validate")?e="setStatus":d("Wait")?e="wait":d("WebSphere",1)?e=
"websphere":d("Deploy")||d("Launch")?e="deploy":d("Iterator",1)&&(e="componentApprovalIterator"))}return e}}})},"dijit/tree/ObjectStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/when"],function(l,m,k,j,e){return k("dijit.tree.ObjectStoreModel",null,{store:null,labelAttr:"name",root:null,query:null,constructor:function(e){j.mixin(this,e);this.childrenCache={}},destroy:function(){for(var e in this.childrenCache)this.childrenCache[e].close&&
this.childrenCache[e].close()},getRoot:function(h,d){if(this.root)h(this.root);else{var c;e(c=this.store.query(this.query),j.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+b.length+" items, but must return exactly one");this.root=b[0];h(this.root);c.observe&&c.observe(j.hitch(this,function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(h,d,c){var b=this.store.getIdentity(h);if(this.childrenCache[b])e(this.childrenCache[b],
d,c);else{var a=this.childrenCache[b]=this.store.getChildren(h);e(a,d,c);a.observe&&a.observe(j.hitch(this,function(b,c,d){this.onChange(b);c!=d&&e(a,j.hitch(this,"onChildrenChange",h))}),!0)}},isItem:function(){return!0},fetchItemByIdentity:function(e){this.store.get(e.identity).then(j.hitch(e.scope,e.onItem),j.hitch(e.scope,e.onError))},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return e[this.labelAttr]},newItem:function(e,d,c,b){return this.store.put(e,{parent:d,
before:b})},pasteItem:function(e,d,c,b,a,f){b||(b=[].concat(this.childrenCache[this.getIdentity(d)]),a=l.indexOf(b,e),b.splice(a,1),this.onChildrenChange(d,b));return this.store.put(e,{overwrite:!0,parent:c,before:f})},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"deploy/widgets/workflow/activity/ApplicationApprovalTaskActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h){return m([j],{postCreate:function(){this.inherited(arguments);if(appState.environment)this.approvalParent=appState.environment;if(appState.environmentTemplate)this.approvalParent=appState.environmentTemplate;this.baseResolveHttpValuesUrl="rest/approval/approvalProcess/"+this.approvalParent.id+"/"+this.data.name+"/propDefs/resolveHttpValues/";if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var d=i18n("Application Approval");
this.initialized&&(d=this.data.role?d+("\n"+this.data.role.name):d+i18n("\nDeleted Role"));return d},editProperties:function(d){var c=this,b=this.data.role,a=c.createPropertyDialog(),f=c.createPropertyForm({dialog:a,onSubmit:function(e){c.initialized=!0;d&&d();c.data.commentRequired=e.commentRequired;c.data.commentPrompt=void 0!==e.commentPrompt?e.commentPrompt:"";c.data.roleRestrictionData={};c.data.roleRestrictionData.contextType="APPLICATION";c.data.roleRestrictionData.roleRestrictions=[{roleId:e.role}];
c.data.role=b;c.data.templateName=e.templateName;c.data.propDefs=e.propDefs;l.forEach(c.data.propDefs,function(a){a.resolveHttpValuesUrl=c.baseResolveHttpValuesUrl+a.name});a.hide();f.destroy();a.destroy();c.updateLabel()},readOnly:c.readOnly}),j=new h({restUrl:bootstrap.baseUrl+"security/role",value:this.data.role?this.data.role.id:void 0,onChange:function(a,c){b=c},allowNone:!1});f.addField({name:"role",label:i18n("Role"),required:!0,description:i18n("The role the approving user must have."),widget:j});
j=new h({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return a},getValue:function(a){return a},allowNone:!1,value:c.data.templateName||"ApprovalCreated",disabled:c.readOnly});f.addField({name:"templateName",label:i18n("Notification Template"),required:!0,widget:j});j=new e({propDefs:c.data.propDefs||[],propSheetDef:{resolveHttpValuesUrl:c.baseResolveHttpValuesUrl}});f.addField({widget:j,label:"Properties",name:"propDefs"});f.addField({name:"commentRequired",
label:i18n("Require Comment"),type:"Checkbox",required:!1,description:i18n("Is a comment required for this approval request ?"),value:c.data.commentRequired});f.addField({name:"commentPrompt",label:i18n("Comment Prompt"),type:"Text Area",require:!1,description:i18n("The comment that will be shown in the approval request."),value:c.data.commentPrompt});f.placeAt(a.containerNode);a.show()}})})},"deploy/widgets/workflow/activity/BaseActivity":function(){define("dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/_base/event,dojo/dom-class,dojo/dom-construct,dojo/aspect,dojo/on,js/webext/widgets/DomNode,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,deploy/widgets/workflow/GraphLayout,deploy/widgets/property/PropertyBox,deploy/widgets/scripts/ScriptEditorDialog,deploy/widgets/process/ProcessIconsFormatter".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return k("deploy.widgets.workflow.activity.BaseActivity",[l],{graphEditor:null,graph:null,cell:null,readOnly:!1,isContainer:!1,parent:null,data:{},uiData:{},initialized:!1,disableEditing:!0,postCreate:function(){this.inherited(arguments);if(!this.process)if(this.graphEditor&&this.graphEditor.applicationProcess)this.process=this.graphEditor.applicationProcess;else if(this.graphEditor&&this.graphEditor.componentProcess)this.process=this.graphEditor.componentProcess;
if(!this.graphEditor)throw"Unable to create an activity without a graphEditor specified.";this.graph=this.graphEditor.graph;this.initialized||b.around(this,"editProperties",function(a){return function(){this.disableEditing||a.apply(this,arguments)}})},getLabel:function(){},getName:function(){return this.data.name},getFillColor:function(){return"#7F1C7D"},getStyle:function(){var a=w.getIconForStep(this),a=bootstrap.imageUrl+"icons/process/"+a+".png";return'shape=label;spacingLeft=45;spacingRight=-20;spacingTop=-10;spacingBottom=-10;fontFamily=helvetica,arial,tahoma,verdana,sans-serif,"lucida grande";fontSize=12;fontColor=#FFF;verticalAlign=middle;align=left;strokeColor=#FFF;strokeWidth=2;fillColor='+
this.getFillColor()+";vertexHighlightColor=#AAA;edgeHighlightColor=#AAA;highlightColor=#AAA;image="+a+";imageWidth=32;imageHeight=32;autosize;"},getIcon:function(){var a=" job-icon";this.type?a+=this.type:this.icon?a+=this.icon:this.plugin&&this.name&&(a+=this.name.replace(/\W+/g,""));return'<div class="process-icon'+a+'"></div>'},editProperties:function(){},copyActivity:function(){var a=this,b,c,d;if(this.graphEditor.applicationProcessId)d="APPLICATION",b=this.graphEditor.applicationProcessId,c=
this.graphEditor.applicationProcessVersion;else if(this.graphEditor.componentProcessId)d=this.graphEditor.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled?"COMPONENTDRAFT":"COMPONENT",b=this.graphEditor.componentProcessId,c=this.graphEditor.componentProcessVersion;else if(this.graphEditor.approvalProcess)d="APPROVAL",b=this.graphEditor.approvalProcess.environmentId,c=this.graphEditor.approvalProcess.version;else if(this.graphEditor.processId)d="GENERIC",b=this.graphEditor.processId,
c=this.graphEditor.processVersion;b={name:this.getName(),label:this.getLabel(),activityId:this.data.id,ownerId:b,ownerVersion:c,processType:d};e.put({url:bootstrap.restUrl+"copiedStep/",putData:JSON.stringify(b),load:function(){a.graphEditor.refreshStepPalette(null,!0);a.graphEditor.showSavePopup(i18n("'%s' copied successfully.",a.getLabel()))},error:function(b){new n({message:i18n("An error occurred while trying to copy the activity %s: %s",util.escape(a.getName()),util.escape(b.responseText))})}})},
canEdit:function(){return!0},canDelete:function(){return!this.readOnly},canCopy:function(){return!0},isUtilityCell:function(){return!1},setGraphHasChanges:function(){this.graphHasChanges?this.graphHasChanges():document.hasChanges=!0},createCell:function(a,b,c,d){var f=this;this.disableEditing=!1;if(this.cell)throw"Cell already generated.";var e=this.getLabel(),h=this.getStyle(),j=this.parent;if(j&&j.edge)j=(j.source||j.target||{parent:j}).parent;this.cell=this.graph.insertVertex(j,"",e,a,b,null,null,
h);this.cell.activity=this;this.sizeCell(c,d);if((a=this.graph.lastDropTarget)&&a.edge&&a.parent.id===j.id)this.edgePlaceholder={from:a.source,to:a.target,type:a.data?a.data.type:null,value:a.data?a.data.value:null},this.graph.splitEdge(a,[this.cell],0,0);this.addOverlays();j&&j.activity&&j.activity.isContainer&&o.resizeParent(j,this.graph);if(this.graphEditor.initialized)if(this.parent&&this.parent.edge)this.graphEditor.pauseLayout=!0,setTimeout(function(){delete f.graphEditor.pauseLayout;o.layout(f.graphEditor,
{animate:!0,select:f.cell})});else if(this.graph.setSelectionCell(this.cell),"noteStyle"!==this.cell.style&&0===o.getVisibleEdges(this.graphEditor).length&&(a=this.graphEditor.getFinishCells())&&1===a.length)j||(j=this.graph.getDefaultParent()),this.graphEditor.pauseLayout=!0,this.graph.insertEdge(j,null,"",this.graphEditor.getStartCell(j),this.cell),this.graph.insertEdge(j,null,"",this.cell,a[0]),delete this.graphEditor.pauseLayout,this.graph.fit(o.MIN_SCALE)},addOverlays:function(){var a=-10;this.overlays=
[];this.canDelete()&&(this.addDeleteOverlay(a),a-=22);this.canEdit()&&(this.addEditOverlay(a),a-=22);this.canCopy()&&this.initialized&&this.addCopyOverlay(a);if(this.canEdit()&&!this.initialized)this.infoIcon=!0,this.addEditOverlay(a,!0)},refreshOverlays:function(a){var b=!1;if(a){if(!this.initialized&&0<this.overlays.length)this.overlays[this.overlays.length-1].image=new mxImage(bootstrap.imageUrl+"icons/process/step_error.png",28,28),b=!0}else this.initialized&&this.infoIcon&&(delete this.infoIcon,
this.graph.removeCellOverlay(this.cell,this.overlays.pop()),this.canCopy()&&this.addCopyOverlay(-56));return b},addDeleteOverlay:function(a){var b=this,c=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/close_step.png",24,24));c.cursor="pointer";c.offset=new mxPoint(a,2);c.align=mxConstants.ALIGN_RIGHT;c.verticalAlign=mxConstants.ALIGN_TOP;c.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){new r({message:i18n("Are you sure you want to remove this step?"),action:function(){b.destroy();
b.setGraphHasChanges()}})}));this.overlays.push(c);this.graph.addCellOverlay(this.cell,c)},addEditOverlay:function(a,b){var c=this,d="step_edit.png",f=18,e=2;b&&(d="step_info.png",f=28,a=-20,e=this.graph.getPreferredSizeForCell(this.cell).height/2);d=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/"+d,f,f));d.cursor="pointer";d.offset=new mxPoint(a,e);d.align=mxConstants.ALIGN_RIGHT;d.verticalAlign=mxConstants.ALIGN_TOP;d.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){c.graphEditor.graph.tooltipHandler.hide();
c.graph.setSelectionCell(c.cell);c.editProperties(function(){c.readOnly||(c.setGraphHasChanges(),c.graphEditor.registerChangedActivity(c))})}));this.overlays.push(d);this.graph.addCellOverlay(this.cell,d)},addCopyOverlay:function(a){var b=this,c=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"/icons/process/step_copy.png",18,18));c.cursor="pointer";c.offset=new mxPoint(a,2);c.align=mxConstants.ALIGN_RIGHT;c.verticalAlign=mxConstants.ALIGN_TOP;c.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){b.data.id&&
!b.graphEditor.isActivityChanged(b)?(b.copyActivity(),b.graph.setSelectionCell(b.cell)):new n({message:i18n("This step has been edited. Please save the process before copying this step.")})}));this.overlays.push(c);this.graph.addCellOverlay(this.cell,c)},destroy:function(){this.inherited(arguments);var a=this.graph.getModel();a.beginUpdate();this.graph.removeCells([this.cell],!0);a.endUpdate();if(this.edgePlaceholder){var a=this.edgePlaceholder,b=a.to;a.from.parent&&b.parent&&this.graphEditor.restoreEdge(a)}this.edgePlaceholder=
null;this.readOnly||this.setGraphHasChanges()},sizeCell:function(a,b){var c=this.graph.getModel().getGeometry(this.cell);if(a&&b)c.height=a,c.width=b;else{var d=this.graph.getPreferredSizeForCell(this.cell);c.height=d.height;c.width=d.width}},updateLabel:function(){var a=this.graph.getModel();a.beginUpdate();this.graph.labelChanged(this.cell,this.getLabel());this.graph.refresh();a.endUpdate()},removePropertyField:function(a,b){var c="runtime_switch_"+b,d="config_switch_"+b;a.hasField(c)&&a.removeField(c);
a.hasField(d)&&a.removeField(d);a.hasField(b)&&a.removeField(b)},createPropertyDialog:function(b){var c=this;void 0===b&&(b={});if(void 0===b.title){var d=this.graph.getStepName(this.cell);b.title=d?i18n("Edit Properties for %s",i18n(d)):i18n("Edit Properties")}if(void 0===b.closable)b.closable=!0;if(void 0===b.draggable)b.draggable=!0;var f=new q(b);f.on("show",function(){c.graph.tooltipHandler.hide();dojo.forEach(c.propertyForm.fieldsArray,function(b){if("CodeEditor"===b.type){b.widget.startup();
var d=b.widget.editor;d.renderer.$cursorLayer.element.style.display="none";d.setReadOnly(!0);d.setOption("highlightActiveLine",!1);d.on("changeSelection",function(){d.selection.setSelectionRange({start:{row:0,column:0},end:{row:0,column:0}})});d.container.widget=b.widget;a(d.container,"mousedown",function(a){h.stop(a);c.openCodeEditor(a.currentTarget.widget)})}})});f.on("hide",function(){c.refreshOverlays();c.propertyForm.destroy();f.destroy()});return f},createPropertyForm:function(a){var c=this;
void 0===a&&(a={});if(void 0===a.saveLabel)a.saveLabel=i18n("OK");var f=a.dialog;if(!f)throw"Internal Error: Plugin must specify a dialog to attach it's property form to.";a.shrinkFormToFit=!0;this.propertyForm=new t(a);b.around(this.propertyForm,"addField",function(a){return function(b,f){var e=null;if("PropertyArea"===b.type||"preconditionScript"===b.name){var h=j.clone(b);h.type="CodeEditor";h.textDir="ltr";switch(b.name){case "p_scriptBody":h.language="Groovy"===c.data.pluginName?"groovy":"powershell";
break;case "preconditionScript":h.language="javascript";break;default:h.language="text"}h.fontSize="6pt";var e=a.call(this,h,f),o=e.widget;o.type="CodeEditor";o.value=h.value||"";d.add(o.domNode,"labelsAndValues-editorCell");100>o.value.length&&d.add(o.domNode,"empty")}else e=a.apply(this,arguments);return e}});this.propertyForm.on("cancel",function(){f.hide();c.propertyForm.destroy();f.destroy()});return this.propertyForm},addPropertyField:function(b,d,e,h){var o="runtime_switch_"+d.name,j=new f,
n=c.create("a",{"class":"linkPointer",innerHTML:i18n("Prompt for a value on use"),style:{marginBottom:"5px"}},j.domAttach),s={name:o,widget:j,label:""},r="config_switch_"+d.name,j=new f,q=c.create("a",{"class":"linkPointer",innerHTML:i18n("Set a value here"),style:{marginBottom:"5px"}},j.domAttach),k={name:r,widget:j,label:d.label?d.label.escape():d.label};a(n,"click",function(){b.addField(k,d.name);b.removeField(o);b.removeField(d.name)});a(q,"click",function(){b.addField(d,r);config.data.systemConfiguration.enablePromptOnUse&&
b.addField(s,r);b.removeField(r)});e?(b.addField(d,h),!this.readOnly&&config.data.systemConfiguration.enablePromptOnUse&&b.addField(s,h)):!this.readOnly&&config.data.systemConfiguration.enablePromptOnUse?b.addField(k,h):b.addField(d,h)},openCodeEditor:function(a){"CodeEditor"===a.type&&(new u({readOnly:this.readOnly,activity:this,widget:a})).show()},getDisplayName:function(a,b,c,d){if(b){var f=this.getDefaultName(b);d&&-1!==a.indexOf(d)&&(a=f);if(-1===a.indexOf(c)||-1===a.indexOf(b))a+="\n"+f}else-1===
a.indexOf(c)&&(a+="\n"+this.getDefaultName(""));return a},getDefaultName:function(){},setDefaultNameValue:function(a,b){var c=a.getValue("name");if(!c||c===this.lastDefaultName)c=this.getUniqueName(this.getDefaultName(b)),a.setValue("name",c),this.lastDefaultName=c},getUniqueName:function(a){for(var b=1,c=a;!this.isUnique(a);)a=c+" ("+b+")",b++;return a},isUnique:function(a){a=this.graphEditor.getChildrenByName(a,!0);return 0===a.length||a[0].cell===this.cell},validateName:function(a){var b=this,
c=[];0<=a.indexOf("/")&&c.push(i18n("The name may not contain the following characters: /"));m.forEach(b.graphEditor.getChildrenByName(a,!0),function(a){a.cell!==b.cell&&c.push(i18n("That name is in use by another activity in this process. Please choose a unique name. Name uniqueness is case insensitive."))});return c},getChildData:function(){var a={};this.data.children&&1===this.data.children.length&&(a=this.data.children[0]);return a},getChildChildData:function(){var a=this.getChildData(),b={};
a.children&&1===a.children.length&&(b=a.children[0]);return b}})})},"deploy/widgets/workflow/GraphLayout":function(){define(["dojo/_base/declare"],function(l){var m=l("deploy.widgets.workflow.GraphLayout",[],{});m.animation_timer=null;m.CONTAINER_PADDING=30;m.NOTE_PADDING=60;m.NOTE_PAIRING=150;m.ANIMATION_CELL_THRESHOLD=100;m.MAX_SCALE=2;m.MIN_SCALE=0.2;m.ZOOM_FACTOR=1.1;m.ZOOM_DELTA_LIMIT=200;m.ZOOM_DELTA_SCALE=0.25;m.layout=function(k,j){var j=j||{},e=m.getVisibleEdges(k).length;if(!m.animation_timer){var h=
k.graph,d=h.model,c=h.getView(),b=h.getDefaultParent(),c=c.scale,a=j.animate;k.graph.model.cells.hasOwnProperty(m.ANIMATION_CELL_THRESHOLD)&&(a=!1);if(m.animation_timer)window.clearTimeout(m.animation_timer),m.animation_timer=null;d.beginUpdate();try{var f={},n=[],r=m.layoutHelper(h,d,b,k.autolayout,f,n),t,q;for(t=0;t<n.length;t++)q=new mxGeometry,q.relative=!0,n[t].setGeometry(q);t=null;r=-r;for(t in f)if(f.hasOwnProperty(t)){var o=f[t];q=o.geo.clone();q.x+=r;d.setGeometry(d.getCell(o.cellID),q)}k.autolayout?
(r={},m.determineNotePlacement(d,b,r),m.autoLayout(h,d,b,c,n,e,r,j),a?m.animate(h,d,c,f,j):j.select&&h.setSelectionCell(j.select)):j.select&&h.setSelectionCell(j.select)}finally{d.endUpdate()}}};m.autoLayout=function(k,j,e,h,d,c,b){var a=new mxHierarchicalLayout(k);a.useBoundingBox=!1;a.resizeParent=!1;a.moveParent=!1;a.interRankCellSpacing=4<c?50:3<c?75:2<c?100:150;a.interHierarchySpacing=10;a.parentBorder=m.CONTAINER_PADDING;var f={},n={};a.placementStage=function(b,c){var d={};m.analyzeGraph(this,
j,d);var e=b;if(d.insideContainer&&d.parent.id!==c.id){var e=m.calculateContainerXValueForChildCellsPlacement(d,n,a.parentBorder,a.interHierarchySpacing),s=d.parent.geometry.y;d.parent.geometry.y=-m.getLabelMetrics(k,d.parent,!0,null,h).size.height-a.parentBorder;a.placementStage(e,d.parent);d.parent.geometry.y=s;e=b;m.resizeParent(d.parent,k)}else d.isUnconnected?((s=f[d.parent.id])||(s=[]),-1===s.indexOf(d.subGraph[0])&&s.push(d.subGraph[0]),f[d.parent.id]=s):((e=n[d.parent.id])||(e=[]),-1===e.indexOf(d.subGraph)&&
e.push(d.subGraph),n[d.parent.id]=e,e=mxHierarchicalLayout.prototype.placementStage.apply(this,arguments));return e};a.execute(e);m.placeUnconnectedSteps(k,j,n,f,b,a.interHierarchySpacing,a.parentBorder,h)};m.calculateContainerXValueForChildCellsPlacement=function(k,j,e,h){var d=k.parent.geometry.x;(j=j[k.parent.id])?d+=m.calculateBoundsOfPlacedStepsForAllSubGraphs(j).maxX+h:(d+=e,k=m.calculateBoundsOfPlacedSteps(k.subGraph),0>k.minX&&(d-=k.minX));return d};m.layoutLabel=function(k,j,e,h){if("noteStyle"===
j.style){var d=h.split("\n"),c=64;e||(c=Math.round(j.geometry.width/m.getLabelMetrics(k,j,e,h).avgCharWidth)-10);for(k=d.length-1;0<=k;k--)m.wrapLine(d,k,c);h=d.join("\n")}return h};m.wrapLine=function(k,j,e){for(var e=Math.max(e,4),h=!1,d=k[j];d.length>e;){var c=d.substr(e-3,6).indexOf(" "),b=-1===c,c=b?e:c+(e-3),b=d.substring(0,c)+(b?"-":"");k.splice(j,h?0:1,b);d=d.substring(c);h=!0;j++}h&&k.splice(j,0,d)};m.getLabelMetrics=function(k,j,e,h,d,c,b){c=c?c:k.view.getState(j);b=b?b:c?c.style:k.getCellStyle(j);
d=d||k.getView().scale;h=h||k.getLabel(j);k=document.createElement("div");k.innerHTML=util.escape(h);h=k.childNodes[0].nodeValue.split("\n");h.sort(function(a,b){return b.length-a.length});j=m.getFontSize(d,e,j.style);j=mxUtils.getSizeForString(util.escape(h[0]),j,b[mxConstants.STYLE_FONTFAMILY]);j.height*=h.length;return{size:j,avgCharWidth:j.width/h[0].length}};m.getFontSize=function(k,j,e){return(!j||"noteStyle"===e)&&0.8>k?"18":0.2>k?"42":0.3>k?"36":0.4>k?"32":0.5>k?"30":0.6>k?"26":0.7>k?"22":
0.8>k?"18":"14"};m.placeUnconnectedSteps=function(k,j,e,h,d,c,b,a){var f=null;for(f in h)if(h.hasOwnProperty(f)){var n=j.getCell(f);n.activity&&n.activity.isContainer?m.placeUnconnectedStepsInsideParent(k,j,e,h,d,n,c,b,a):m.placeUnconnectedStepsInsideParent(k,j,e,h,d,n,c,0,a)}};m.placeUnconnectedStepsInsideParent=function(k,j,e,h,d,c,b,a,f){var e=0,n;for(n=0;n<c.children.length;n++){var r=c.children[n];!r.edge&&r.edges&&0!==r.edges.length&&(e=Math.max(r.geometry.y+r.geometry.height,e))}r=0;c.activity&&
c.activity.isContainer&&0===e&&(e+=m.getLabelMetrics(k,c,!0,null,f).size.height);e+=b;for(n=0;n<h[c.id].length;n++)if(f=h[c.id][n],"noteStyle"!==f.style)f.geometry.x=a,f.geometry.y=e+r,c.activity&&c.activity.isContainer&&m.resizeParent(c,k),r+=f.geometry.height+b;m.placeNotesInsideParent(k,j,h,d,c)};m.placeNotesInsideParent=function(k,j,e,h,d){for(var c,b,a,f=[],n=h[d.id].placements,r=m.getBounds(j,d),h=0;h<e[d.id].length;h++){var t=e[d.id][h];if("noteStyle"===t.style)if(c=n[t.id],c.step)b=j.getCell(c.step.id),
t.geometry.y=b.geometry.y+Math.min(200,b.geometry.height/2)-t.geometry.height/2,b=r.x-t.geometry.width-m.NOTE_PADDING,a=r.x+r.width+m.NOTE_PADDING,c.note.geo.x<c.step.geo.x?(t.geometry.x=b,c=a):(t.geometry.x=a,c=b),f.push({noteCell:t,flipPosition:c});else if(c.diagram)b=r.x-t.geometry.width-2*m.NOTE_PAIRING,a=r.x+r.width+2*m.NOTE_PAIRING,c.diagram.toLeft?(t.geometry.x=b,c=a):(t.geometry.x=a,c=b),f.push({noteCell:t,flipPosition:c})}m.fixOverlaps(j,d,f);d.activity&&d.activity.isContainer&&m.resizeParent(d,
k)};m.fixOverlaps=function(k,j,e){var h;for(h=0;h<e.length;h++){var d=e[h],c=d.noteCell;if(m.anyOverlaps(k,j,c.id,c.geometry))c.geometry.x=d.flipPosition;0>c.geometry.x&&m.moveCells(k,j,-c.geometry.x,0)}};m.moveCells=function(k,j,e,h){var d,c=k.getChildCount(j);for(d=0;d<c;d++)k.getChildAt(j,d).geometry.translate(e,h)};m.calculateBoundsOfPlacedStepsForAllSubGraphs=function(k){var j={maxX:Number.MIN_VALUE,minX:Number.MAX_VALUE};if(!k)return j.maxX=0,j.minX=0,j;var e;for(e=0;e<k.length;e++){var h=m.calculateBoundsOfPlacedSteps(k[e]);
j.maxX=Math.max(h.maxX,j.maxX);j.minX=Math.min(h.minX,j.minX)}return j};m.calculateBoundsOfPlacedSteps=function(k){var j={maxX:Number.MIN_VALUE,minX:Number.MAX_VALUE};if(!k)return j.maxX=0,j.minX=0,j;var e;for(e=0;e<k.length;e++)if(!k[e].edge){var h=k[e].geometry;j.maxX=Math.max(h.x+h.width,j.maxX);j.minX=Math.min(h.x,j.minX)}return j};m.resizeParent=function(k,j){var e=k.geometry,h=j.getPreferredSizeForCell(k);e.width=h.width;e.height=h.height};m.analyzeGraph=function(k,j,e){e.parent=null;e.insideContainer=
!1;e.useDefaultLayout=!0;e.subGraph=[];j=null;for(j in k.model.vertexMapper)if(k.model.vertexMapper.hasOwnProperty(j)){var h=k.model.vertexMapper[j].cell;if(h.parent&&(e.parent=h.parent,h.parent.activity&&h.parent.activity.isContainer))e.insideContainer=!0;e.subGraph.push(h)}e.isUnconnected=1===e.subGraph.length};m.layoutHelper=function(k,j,e,h,d,c){var b=0,a=j.getChildCount(e),f;for(f=0;f<a;f++){var n=j.getChildAt(e,f);if(n.edge)c.push(n);else{n.activity&&n.activity.isContainer&&m.layoutHelper(k,
j,n,h,d,c);var r=j.getGeometry(n);if(h||"noteStyle"!==n.style){var t=k.getPreferredSizeForCell(n);r.height=t.height;r.width=t.width}d[n.id]={cellID:n.id,geo:r.clone()};if(r.x<b)b=r.x}}return b};m.determineNotePlacement=function(k,j,e){var h,d,c=m.getBounds(k,j),b=k.getChildCount(j),a=e[j.id]={notes:{},steps:{},placements:{}};for(h=0;h<b;h++){var f=k.getChildAt(j,h);f.edge||(d=k.getGeometry(f).clone(),f.activity&&f.activity.isContainer&&(a.steps[f.id]=d,m.determineNotePlacement(k,f,e)),"noteStyle"===
f.style?a.notes[f.id]=d:a.steps[f.id]=d)}m.determineNotePlacementHelper(a,{w:1600,h:2},c,e)};m.determineNotePlacementHelper=function(k,j,e,h){var d,c;for(d in k.notes)if(k.notes.hasOwnProperty(d)){var b,a=Number.MAX_SAFE_INTEGER,f=k.notes[d],n=f.clone();n.x-=j.w/2;n.width+=j.w;n.y+=f.height/2-j.h/2;n.height=j.h;for(c in k.steps)if(k.steps.hasOwnProperty(c)){var r=k.steps[c];0<m.getOverlap(n,r)&&(r=f.x<r.x?r.x-(f.x+f.width):f.x-(r.x+r.width),r<a&&(b=c,a=r))}k.placements[d]={note:{id:d,geo:k.notes[d]}};
a!==Number.MAX_SAFE_INTEGER?k.placements[d].step={id:b,geo:k.steps[b]}:k.placements[d].diagram=f.getCenterX()<e.getCenterX()?{toLeft:e.x-f.x-f.width}:{toRight:f.x-e.x-e.width}}return h};m.anyOverlaps=function(k,j,e,h){var d,c=k.getChildCount(j);for(d=0;d<c;d++){var b=k.getChildAt(j,d);if(!b.edge&&b.id!==e&&(b=k.getGeometry(b),0<m.getOverlap(b,h)))return!0}return!1};m.getOverlap=function(k,j){var e=Math.max(0,Math.min(k.x+k.width,j.x+j.width)-Math.max(k.x,j.x)),h=Math.max(0,Math.min(k.y+k.height,j.y+
j.height)-Math.max(k.y,j.y));return e*h};m.getBounds=function(k,j){var e,h,d=k.getChildCount(j);for(e=0;e<d;e++){var c=k.getChildAt(j,e);!c.edge&&"noteStyle"!==c.style&&(h?h.add(k.getGeometry(c)):h=k.getGeometry(c).clone())}return h||new mxRectangle};m.getVisibleEdges=function(k){var j=[],e=k.graph,k=e.model,e=e.getDefaultParent();m.getVisibleEdgeCountHelper(k,e,j);return j};m.getVisibleEdgeCountHelper=function(k,j,e){for(var h=0,d=k.getChildCount(j),h=0;h<d;h++){var c=k.getChildAt(j,h);c.edge?c.visible&&
e.push(c):c.activity&&c.activity.isContainer&&m.getVisibleEdgeCountHelper(k,c,e)}};m.animate=function(k,j,e,h,d){var c;if(d.cellsNotToAnimate)for(c=0;c<d.cellsNotToAnimate.length;c++)delete h[d.cellsNotToAnimate[c]];var b=null,a=0,f={},n=k.getView(),r={};for(b in h)if(h.hasOwnProperty(b)){c=h[b];var t=j.getCell(c.cellID),q=j.getGeometry(t);if(q.x!==c.geo.x||q.y!==c.geo.y)if(j.setGeometry(t,c.geo),f[b]={geometry:q,previous:c.geo,state:n.getState(t,!1)},a++,t.edges&&(40<Math.abs(q.x-c.geo.x)||Math.abs(q.y-
c.geo.y)))for(c=0;c<t.edges.length;c++)if(q=t.edges[c],!r[q.id]){r[q.id]=q;var o=new mxGeometry;o.relative=!0;q.setGeometry(o)}}var s=5>a?10:10>a?5:20>a?4:30>a?2:1,l=0,w=null,w=function(){var a=null;for(a in f)if(f.hasOwnProperty(a)){var b=f[a],c=b.state;if(c&&0<l){var h=(b.geometry.y-b.previous.y)*e,o=(b.geometry.width-b.previous.width)*e,j=(b.geometry.height-b.previous.height)*e;c.x+=(b.geometry.x-b.previous.x)*e/s;c.y+=h/s;c.width+=o/s;c.height+=j/s;k.cellRenderer.redraw(c)}}l<s?(l++,m.animation_timer=
window.setTimeout(w,30)):(m.animation_timer=null,d.select&&k.setSelectionCell(d.select),k.fit(m.MIN_SCALE))};w()};return m});MedianCellSorter.prototype.compare=function(l,m){var k=0;null!==l&&null!==m&&(m.medianValue>l.medianValue?k=-1:m.medianValue<l.medianValue?k=1:l.cell.cell&&m.cell.cell&&(k=l.cell.cell.value.localeCompare(m.cell.cell.value)));return k}},"deploy/widgets/property/PropertyBox":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/Deferred,dojo/store/util/QueryResults,dojo/store/Memory,deploy/widgets/property/PropertyComboBox".split(","),
function(l,m,k,j,e,h,d,c){var b=k("deploy.widgets.property.PropertyBox",[m,l],{templateString:'<div class="propBox" data-dojo-attach-point="propBoxAttach"></div>',postCreate:function(){var a=new d({data:[],idProperty:"name"});this.propTextBox=new c({store:a,searchAttr:"name",selectOnClick:!0,autoComplete:!1,pageSize:this.pageSize||Infinity,value:this.value||"","class":"propertyBox",cache:this.cache});this.propTextBox.placeAt(this.propBoxAttach)},_getValueAttr:function(){return this.propTextBox.get("value")}});
config.data.extraFormDelegates.push({name:"PropertyBox",delegateFunction:function(a){return new b({pageSize:a.pageSize||Infinity,value:a.value,label:a.label,noneLabel:a.noneLabel,name:a.name,cache:a.cache})}});return b})},"deploy/widgets/property/PropertyComboBox":function(){define("dojo/_base/declare,dijit/form/ComboBox,dojo/_base/lang,dojo/dom-attr,dojo/dom-style,dojo/aspect,dojo/_base/array,dojo/_base/xhr,dojo/store/Memory".split(","),function(l,m,k,j,e,h,d,c,b){return l("deploy.widgets.property.PropertyComboBox",
[m],{propertyBeginOptions:["${p:","${p?:"],propertyBegin:"${p:",propertyEnd:"}",autoComplete:!1,isTopLevel:!0,postCreate:function(){this.inherited(arguments);this.setMemoryStore(this.cache[0]);e.set(this._buttonNode,"display","none")},_startSearch:function(a){this._getCaretPos(this.focusNode);var b=this._getCurrentProperty();b.inTag?(b=k.trim(b.current),this.checkContext(b),this.inherited(arguments,[b])):this.closeDropDown()},checkContext:function(a){var b=a.split(/\.|\//g);1<b.length&&(a=b[0]);var c=
RegExp(a),b=d.filter(this.cache[0],function(a){return a.name.match(c)});if(2>=b.length&&this.isTopLevel)this.isTopLevel=!1,this.setMemoryStore(this.cache[1]);else if(!this.isTopLevel&&2<b.length)this.isTopLevel=!0,this.setMemoryStore(this.cache[0])},_selectOption:function(a){this.closeDropDown();a&&this._announceOption(a);this._handleOnChange(this.value,!0);this.isTopLevel&&this.loadDropDown()},_announceOption:function(a){if(a){var b=this._getCaretPos(this.focusNode),c=this.focusNode.scrollTop,d=
this.focusNode.scrollLeft,e;if(a===this.dropDown.nextButton||a===this.dropDown.previousButton)e=a.innerHTML,this.item=void 0,this.value="";else{b=this.dropDown.items[a.getAttribute("item")];e=(this.store._oldAPI?this.store.getValue(b,this.searchAttr):b[this.searchAttr]).toString();var h=e.length,o=this._getCurrentProperty();if(!this.isTopLevel&&-1===o.after.lastIndexOf(this.propertyEnd,0)&&-1===e.lastIndexOf(this.propertyEnd))o.after=this.propertyEnd+o.after;e=o.before+e+o.after;this.set("item",b,
!1,e);b=o.before.length+h}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",j.get(a,"id"));this._autoCompleteText(e);this._setCaretPos(this.focusNode,b);this.focusNode.scrollTop=c;this.focusNode.scrollLeft=d}},_getCurrentProperty:function(){var a=this._getCaretPos(this.focusNode),b=this.focusNode.value,c=-1,d;for(d=0;d<this.propertyBeginOptions.length;d++){var e=b.indexOf(this.propertyBeginOptions[d]);if(-1!==e&&(-1===
c||e<c))c=e,this.propertyBegin=this.propertyBeginOptions[d]}var e=-1,h={before:b,after:"",current:"",inTag:!1};if(-1===c)h.before=b,h.current="",h.after="";for(;-1!==c;)if(c<a)if(e=b.indexOf(this.propertyEnd,c),-1===e){h.before=b.substr(0,c+this.propertyBegin.length);h.current=b.substr(c+this.propertyBegin.length);h.after="";h.inTag=!0;break}else if(e>=a){a=c+this.propertyBegin.length;h.before=b.substr(0,a);h.current=b.substr(a,e-a);h.after=b.substr(e);h.inTag=!0;break}else{c=-1;for(d=0;d<this.propertyBeginOptions.length;d++){var o=
b.indexOf(this.propertyBeginOptions[d],e);if(-1!==o&&(-1===c||o<c))c=o,this.propertyBegin=this.propertyBeginOptions[d]}h.inTag=!1}else{h.before=b;h.current="";h.after="";h.inTag=!1;break}return h},setMemoryStore:function(a){a&&!this.store?this.store=new b({data:a,idProperty:"name"}):a?this.store.setData(a):this.store.setData([])}})})},"deploy/widgets/scripts/ScriptEditorDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/dom-class,dojo/dom-geometry,dojo/date/locale,dojo/aspect,dojo/on,dojo/has,dojo/query,dojo/_base/event,dojo/_base/lang,dojo/_base/xhr,dojo/window,dijit/form/Button,dijit/form/TextBox,dijit/form/NumberTextBox,idx/widget/ResizeHandle,deploy/widgets/scripts/Editor,js/webext/widgets/Alert,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){return l("deploy.widgets.scripts.ScriptEditorDialog",[x],{postCreate:function(){this.inherited(arguments);var b=this;k.set(this.containerContainer,{maxHeight:"1000px"});j.add(this.containerContainer,"no-double-click-select");if(this.script||this.source){if(this.script)this.existingValues=this.script;else if(this.source)this.existingValues=this.source,this.existingValues.name=void 0,this.existingValues.id=void 0;this.value=this.existingValues.body}else this.value=
this.widget.getValue();this.language=this.language||this.widget.lang;k.set(this.titleBar,{padding:"15px 0"});m.create("div",{innerHTML:"text"===this.language?i18n("Edit Text"):"javascript"===this.language?i18n("Edit JavaScript"):"groovy"===this.language?i18n("Edit Groovy"):i18n("Edit Script"),style:{display:"inline-block"}},this.titleNode);(this.script||this.source)&&this.addEditFields();this.addToolbarWidget();this.addEditorWidget();this.manualSized=!1;this.editorDiv=a(".ace_editor",this.editorAttach)[0];
k.set(this.editorDiv,"width","100%");this.resizeWidget=(new u({activeResize:!1,animateSizing:!1,minHeight:200,minWidth:200,targetContainer:this.containerNode,onResize:function(){b.manualSized=!0;var a=e.position(b.containerNode);util.setCookie("savedScriptWidth",a.w.toString());util.setCookie("savedScriptHeight",a.h.toString());a=a.h-(b.script?70:35)-35;k.set(b.editorAttach,"height",a+"px");k.set(b.editorDiv,"height",a+"px");b.editor.editor.resize();b._position()}})).placeAt(this.containerContainer);
this._size=function(){if(!b.manualSized){var a=t.getBox(),c=Math.min(util.getCookie("savedScriptHeight")||550,a.h-(b.script?200:150)),a=Math.min(util.getCookie("savedScriptWidth")||1200,a.w-150);k.set(b.editorAttach,"height",c+"px");k.set(b.editorDiv,"height",c+"px");k.set(b.containerNode,{width:a+"px",height:c+(b.script?70:35)+"px",overflow:"hidden",position:"inherit"});b._position()}};setTimeout(function(){b.focusWidget.focus()},250);d.around(this,"hide",function(a){return function(){var b=this;
if(this.isDirty){var c=new x;c.containerContainer.style.maxHeight="1000px";m.create("div",{innerHTML:i18n("Save changes")},c.titleNode);var d=m.create("div",{className:"underField"},c.containerNode);(new q({label:i18n("Yes"),"class":"idxButtonSpecial",onClick:function(){c.destroy();b.saveScript()&&a.apply(b,arguments)}})).placeAt(d);(new q({label:i18n("No"),onClick:function(){c.destroy();a.apply(b,arguments)}})).placeAt(d);c.show()}else a.apply(this,arguments)}})},addEditFields:function(){var a="",
b="";if(this.existingValues)a=this.existingValues.name,b=this.existingValues.description;var c=this,d=m.create("div",{style:{minWidth:"1400px",overflow:"hidden",border:0,margin:"0 0 8px"}},this.containerNode);m.create("div",{innerHTML:i18n("Name"),style:{display:"inline",fontWeight:"bold"}},d);this.nameTextBox=new o({name:"name",value:a,disabled:!!this.readOnly,style:{marginLeft:"6px",width:"300px",display:"inline-block"},intermediateChanges:!0,onChange:function(){c.refreshSaveButton()}});this.nameTextBox.placeAt(d);
if(!a)this.focusWidget=this.nameTextBox.domNode;m.create("div",{innerHTML:i18n("Description"),style:{marginLeft:"34px",display:"inline",fontWeight:"bold"}},d);this.descTextBox=new o({name:"name",value:b,disabled:!!this.readOnly,style:{marginLeft:"6px",width:"560px",display:"inline-block"},intermediateChanges:!0,onChange:function(){c.refreshSaveButton()}});this.descTextBox.placeAt(d)},addToolbarWidget:function(){var a=this,b=m.create("div",{className:"toolbar-container",style:{minWidth:"900px",overflow:"hidden",
border:"1px solid lightGray",marginBottom:"2px"}},this.containerNode),c=document.createElement("div");c.setAttribute("class","toolbarSeparator graphToolbarIcon");b=new mxToolbar(b);this.saveButton=b.addItem(i18n("Save"),null,function(){a.saveScript()&&a.hide()},null,"mxToolbarItem graphToolbarButton");b.container.appendChild(c.cloneNode(!0));b.addItem(i18n("Undo"),bootstrap.imageUrl+"icons/blank18x18.png",function(){a.editor.editor.undo()},null,"mxToolbarItem general-icon undo-icon graphToolbarIcon");
b.addItem(i18n("Redo"),bootstrap.imageUrl+"icons/blank18x18.png",function(){a.editor.editor.redo()},null,"mxToolbarItem general-icon redo-icon graphToolbarIcon");var d=!window.parent.document.getElementById("explore_iframe_id")?document:window.parent.document;b.container.appendChild(c.cloneNode(!0));b.addItem(i18n("Cut"),bootstrap.imageUrl+"icons/blank18x18.png",function(){d.innerClipboard=a.editor.editor.getCopyText();a.editor.editor.insert("")},null,"mxToolbarItem general-icon copy-icon graphToolbarIcon");
b.addItem(i18n("Copy"),bootstrap.imageUrl+"icons/blank18x18.png",function(){d.innerClipboard=a.editor.editor.getCopyText()},null,"mxToolbarItem general-icon cut-icon graphToolbarIcon");b.addItem(i18n("Paste"),bootstrap.imageUrl+"icons/blank18x18.png",function(){a.editor.editor.insert(d.innerClipboard)},null,"mxToolbarItem general-icon paste-icon graphToolbarIcon");b.container.appendChild(c.cloneNode(!0));var f=m.create("div",{"class":"toolbar-button",style:{color:"#2e2d2d",display:"inline",lineHeight:"30px"}}),
e=new s({name:"goto",intermediateChanges:!0,style:{width:"50px",marginTop:"2px"},onChange:function(b){a.typingTimeout&&clearTimeout(a.typingTimeout);a.typingTimeout=setTimeout(function(){isNaN(b)||a.editor.editor.gotoLine(b,0,!0)},250)}}),h=m.create("label",{"for":e.id,innerHTML:i18n("Go to line"),style:{marginRight:"6px",verticalAlign:"middle",font:"12px arial"}});m.place(h,f);e.placeAt(f);b.container.appendChild(f);b.container.appendChild(c.cloneNode(!0));b.addItem(i18n("Find"),bootstrap.imageUrl+
"icons/blank18x18.png",function(){a.editor.editor.execCommand("find")},null,"mxToolbarItem general-icon find-icon graphToolbarIcon");b.addItem(i18n("Replace"),bootstrap.imageUrl+"icons/blank18x18.png",function(){a.editor.editor.execCommand("replace")},null,"mxToolbarItem general-icon replace-icon graphToolbarIcon");"text"!==this.language&&(b.container.appendChild(c.cloneNode(!0)),b.addItem("javascript"===this.language||"groovy"===this.language?"//":"#",null,function(){a.editor.editor.execCommand("togglecomment")},
null,"mxToolbarItem graphToolbarButton reversed").setAttribute("title",i18n("Toggle Comment")),b.container.appendChild(c.cloneNode(!0)))},saveScript:function(){var a=this,b=!0,c=this.editor.getValue();this.isDirty=!1;if(this.script)if(this.nameTextBox.get("value")){c={name:this.nameTextBox.get("value"),description:this.descTextBox.get("value"),body:c};if(this.script&&this.script.id)c.id=this.script.id;var c=JSON.stringify(c),d=window.location.href.split("/");r.put({url:d[0]+"//"+d[2]+bootstrap.restUrl+
"script/postprocessing",handleAs:"json",putData:c,headers:{"Content-Type":"application/json"},load:function(b){a.callback&&a.callback(b);a.hide()},error:function(a){alert(a.responseText)}})}else this.showValidationError(),this.isDirty=!0,b=!1;else this.widget.setValue(c),100>c.length?j.add(this.widget.domNode,"empty"):j.remove(this.widget.domNode,"empty");return b},addEditorWidget:function(){var a=this;this.editorAttach=m.create("div",{style:{width:"100%",border:"1pt solid lightGray"}},this.containerNode);
this.editor=new w;this.editor.placeAt(this.editorAttach);this.editor.startup();this.editor.setLanguage(this.language);this.editor.setValue(this.value);this.editor.editor.setReadOnly(!!this.readOnly);this.session=this.editor.editor.getSession();this.session.setUseWrapMode(!0);setTimeout(function(){a.session.getUndoManager().reset()});this.session.on("change",function(){setTimeout(function(){a.refreshSaveButton()})});if(!this.focusWidget)this.focusWidget=this.editor.editor},showValidationError:function(){(new v({messages:[i18n("Name is required")]})).startup()},
refreshSaveButton:function(){this.isDirty=!1;this.session.getUndoManager().hasUndo()||this.nameTextBox&&this.nameTextBox.get("value")!==(this.script.name||"")||this.descTextBox&&this.descTextBox.get("value")!==(this.script.description||"")?(j.add(this.saveButton,"enabled"),this.isDirty=!0):j.remove(this.saveButton,"enabled")}})})},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(l,m,k,j){var e=l("dijit.form.NumberTextBoxMixin",
null,{pattern:k.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:k.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text")},_setConstraintsAttr:function(e){var d="number"==typeof e.places?e.places:0;d&&d++;if("number"!=typeof e.max)e.max=9*Math.pow(10,15-d);if("number"!=typeof e.min)e.min=-9*Math.pow(10,15-d);this.inherited(arguments,[e]);this.focusNode&&this.focusNode.value&&!isNaN(this.value)&&this.set("value",this.value)},_onFocus:function(){if(!this.disabled){var e=
this.get("value");if("number"==typeof e&&!isNaN(e)&&(e=this.format(e,this.constraints),void 0!==e))this.textbox.value=e;this.inherited(arguments)}},format:function(e,d){var c=""+e;if("number"!=typeof e)return c;if(isNaN(e))return"";if(!("rangeCheck"in this&&this.rangeCheck(e,d))&&!1!==d.exponent&&/\de[-+]?\d/i.test(c))return c;this.editOptions&&this.focused&&(d=m.mixin({},d,this.editOptions));return this._formatter(e,d)},_parser:k.parse,parse:function(e,d){var c=this._parser(e,m.mixin({},d,this.editOptions&&
this.focused?this.editOptions:{}));this.editOptions&&this.focused&&isNaN(c)&&(c=this._parser(e,d));return c},_getDisplayedValueAttr:function(){var e=this.inherited(arguments);return isNaN(e)?this.textbox.value:e},filter:function(e){return null==e||""===e?NaN:this.inherited(arguments)},serialize:function(e,d){return"number"!=typeof e||isNaN(e)?"":this.inherited(arguments)},_setBlurValue:function(){this._setValueAttr(m.hitch(m.mixin({},this,{focused:!0}),"get")("value"),!0)},_setValueAttr:function(e,
d,c){if(void 0!==e&&void 0===c)if(c=""+e,"number"==typeof e)if(isNaN(e))c="";else{if("rangeCheck"in this&&this.rangeCheck(e,this.constraints)||!1===this.constraints.exponent||!/\de[-+]?\d/i.test(c))c=void 0}else e?e=void 0:(c="",e=NaN);this.inherited(arguments,[e,d,c])},_getValueAttr:function(){var e=this.inherited(arguments);if(isNaN(e)&&""!==this.textbox.value){if(!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)&&RegExp("^"+k._realNumberRegexp(m.mixin({},this.constraints))+
"$").test(this.textbox.value))return e=Number(this.textbox.value),isNaN(e)?void 0:e}else return e},isValid:function(e){if(!this.focused||this._isEmpty(this.textbox.value))return this.inherited(arguments);var d=this.get("value");return!isNaN(d)&&this.rangeCheck(d,this.constraints)?!1!==this.constraints.exponent&&/\de[-+]?\d/i.test(this.textbox.value)?!0:this.inherited(arguments):!1}}),l=l("dijit.form.NumberTextBox",[j,e],{baseClass:"dijitTextBox dijitNumberTextBox"});l.Mixin=e;return l})},"dojo/number":function(){define(["./_base/lang",
"./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(l,m,k,j,e){var h={};l.setObject("dojo.number",h);h.format=function(c,b){var b=l.mixin({},b||{}),a=m.normalizeLocale(b.locale),a=m.getLocalization("dojo.cldr","number",a);b.customs=a;a=b.pattern||a[(b.type||"decimal")+"Format"];return isNaN(c)||Infinity==Math.abs(c)?null:h._applyPattern(c,a,b)};h._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;h._applyPattern=function(c,b,a){var a=a||{},d=a.customs.group,e=a.customs.decimal,b=b.split(";"),
j=b[0],b=b[0>c?1:0]||"-"+j;if(-1!=b.indexOf("%"))c*=100;else if(-1!=b.indexOf("\u2030"))c*=1E3;else if(-1!=b.indexOf("\u00a4"))d=a.customs.currencyGroup||d,e=a.customs.currencyDecimal||e,b=b.replace(/\u00a4{1,3}/,function(b){return a[["symbol","currency","displayName"][b.length-1]]||a.currency||""});else if(-1!=b.indexOf("E"))throw Error("exponential notation not supported");var k=h._numberPatternRE,j=j.match(k);if(!j)throw Error("unable to find a number expression in pattern: "+b);if(!1===a.fractional)a.places=
0;return b.replace(k,h._formatAbsolute(c,j[0],{decimal:e,group:d,places:a.places,round:a.round}))};h.round=function(c,b,a){a=10/(a||10);return(a*+c).toFixed(b)/a};if(0==(0.9).toFixed()){var d=h.round;h.round=function(c,b,a){var f=Math.pow(10,-b||0),e=Math.abs(c);if(!c||e>=f)f=0;else if(e/=f,0.5>e||0.95<=e)f=0;return d(c,b,a)+(0<c?f:-f)}}h._formatAbsolute=function(c,b,a){a=a||{};if(!0===a.places)a.places=0;if(Infinity===a.places)a.places=6;var b=b.split("."),d="string"==typeof a.places&&a.places.indexOf(","),
e=a.places;if(d)e=a.places.substring(d+1);else if(!(0<=e))e=(b[1]||[]).length;0>a.round||(c=h.round(c,e,a.round));var c=(""+Math.abs(c)).split("."),r=c[1]||"";if(b[1]||a.places){if(d)a.places=a.places.substring(0,d);d=void 0!==a.places?a.places:b[1]&&b[1].lastIndexOf("0")+1;d>r.length&&(c[1]=j.pad(r,d,"0",!0));e<r.length&&(c[1]=r.substr(0,e))}else c[1]&&c.pop();e=b[0].replace(",","");d=e.indexOf("0");-1!=d&&(d=e.length-d,d>c[0].length&&(c[0]=j.pad(c[0],d)),-1==e.indexOf("#")&&(c[0]=c[0].substr(c[0].length-
d)));var e=b[0].lastIndexOf(","),k,q;-1!=e&&(k=b[0].length-e-1,b=b[0].substr(0,e),e=b.lastIndexOf(","),-1!=e&&(q=b.length-e-1));b=[];for(e=c[0];e;)d=e.length-k,b.push(0<d?e.substr(d):e),e=0<d?e.slice(0,d):"",q&&(k=q,delete q);c[0]=b.reverse().join(a.group||",");return c.join(a.decimal||".")};h.regexp=function(c){return h._parseInfo(c).regexp};h._parseInfo=function(c){var c=c||{},b=m.normalizeLocale(c.locale),b=m.getLocalization("dojo.cldr","number",b),a=c.pattern||b[(c.type||"decimal")+"Format"],
d=b.group,j=b.decimal,r=1;if(-1!=a.indexOf("%"))r/=100;else if(-1!=a.indexOf("\u2030"))r/=1E3;else{var k=-1!=a.indexOf("\u00a4");k&&(d=b.currencyGroup||d,j=b.currencyDecimal||j)}b=a.split(";");1==b.length&&b.push("-"+b[0]);b=e.buildGroupRE(b,function(a){a="(?:"+e.escapeString(a,".")+")";return a.replace(h._numberPatternRE,function(a){var b={signed:!1,separator:c.strict?d:[d,""],fractional:c.fractional,decimal:j,exponent:!1},a=a.split("."),e=c.places;1==a.length&&1!=r&&(a[1]="###");if(1==a.length||
0===e)b.fractional=!1;else{void 0===e&&(e=c.pattern?a[1].lastIndexOf("0")+1:Infinity);if(e&&void 0==c.fractional)b.fractional=!0;!c.places&&e<a[1].length&&(e+=","+a[1].length);b.places=e}a=a[0].split(",");if(1<a.length&&(b.groupSize=a.pop().length,1<a.length))b.groupSize2=a.pop().length;return"("+h._realNumberRegexp(b)+")"})},!0);k&&(b=b.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(a,b,d,f){a=e.escapeString(c[["symbol","currency","displayName"][d.length-1]]||c.currency||"");b=b?"[\\s\\xa0]":
"";f=f?"[\\s\\xa0]":"";return!c.strict?(b&&(b+="*"),f&&(f+="*"),"(?:"+b+a+f+")?"):b+a+f}));return{regexp:b.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:d,decimal:j,factor:r}};h.parse=function(c,b){var a=h._parseInfo(b),d=RegExp("^"+a.regexp+"$").exec(c);if(!d)return NaN;var e=d[1];if(!d[1]){if(!d[2])return NaN;e=d[2];a.factor*=-1}e=e.replace(RegExp("["+a.group+"\\s\\xa0]","g"),"").replace(a.decimal,".");return e*a.factor};h._realNumberRegexp=function(c){c=c||{};if(!("places"in c))c.places=Infinity;if("string"!=
typeof c.decimal)c.decimal=".";if(!("fractional"in c)||/^0/.test(c.places))c.fractional=[!0,!1];if(!("exponent"in c))c.exponent=[!0,!1];if(!("eSigned"in c))c.eSigned=[!0,!1];var b=h._integerRegexp(c),a=e.buildGroupRE(c.fractional,function(a){var b="";a&&0!==c.places&&(b="\\"+c.decimal,b=Infinity==c.places?"(?:"+b+"\\d+)?":b+("\\d{"+c.places+"}"));return b},!0),d=e.buildGroupRE(c.exponent,function(a){return a?"([eE]"+h._integerRegexp({signed:c.eSigned})+")":""}),b=b+a;a&&(b="(?:(?:"+b+")|(?:"+a+"))");
return b+d};h._integerRegexp=function(c){c=c||{};if(!("signed"in c))c.signed=[!0,!1];if("separator"in c){if(!("groupSize"in c))c.groupSize=3}else c.separator="";var b=e.buildGroupRE(c.signed,function(a){return a?"[-+]":""},!0),a=e.buildGroupRE(c.separator,function(a){if(!a)return"(?:\\d+)";a=e.escapeString(a);" "==a?a="\\s":"\u00a0"==a&&(a="\\s\\xa0");var b=c.groupSize,d=c.groupSize2;return d?(a="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+a+"]\\d{"+d+"})*["+a+"]\\d{"+b+"})",0<b-d?"(?:"+a+"|(?:0|[1-9]\\d{0,"+
(b-1)+"}))":a):"(?:0|[1-9]\\d{0,"+(b-1)+"}(?:["+a+"]\\d{"+b+"})*)"},!0);return b+a};return h})},"idx/widget/ResizeHandle":function(){define("idx/widget/ResizeHandle","dojo/_base/declare,dojo/_base/html,dojo/_base/event,dojo/keys,dojox/layout/ResizeHandle,idx/resources".split(","),function(l,m,k,j,e,h){return l("idx.widget.ResizeHandle",e,{postCreate:function(){this.inherited(arguments);var d=h.getResources("idx/widget/ResizeHandle",this.lang).idxResizeHandle_resize;m.attr(this.resizeHandle.firstChild||
this.resizeHandle,"innerHTML","<span class='idxResizeHandleText' title='"+d+"'>/</span>");m.attr(this.resizeHandle,"tabindex",0);this.connect(this.resizeHandle,"keypress",this._onKeyPress)},_onKeyPress:function(d){if(d&&d.shiftKey){var c=d.keyCode;if(this._resizeX&&(c==j.LEFT_ARROW||c==j.RIGHT_ARROW)||this._resizeY&&(c==j.UP_ARROW||c==j.DOWN_ARROW))if(this.targetWidget=dijit.byId(this.targetId),this.targetDomNode=this.targetContainer||(this.targetWidget?this.targetWidget.domNode:m.byId(this.targetId))){c=
this.targetWidget?m.marginBox(this.targetDomNode):m.contentBox(this.targetDomNode);this.startSize={w:c.w,h:c.h};this._changeSizing(d);if(!this.intermediateChanges)this.onResize(d);k.stop(d)}}},_getNewCoords:function(d){if(d&&d.keyCode){var c=d.keyCode,b=this.startSize.w,a=this.startSize.h;c==j.UP_ARROW?a-=10:c==j.DOWN_ARROW?a+=10:c==j.LEFT_ARROW?b=this.isLeftToRight()?b-10:b+10:c==j.RIGHT_ARROW&&(b=this.isLeftToRight()?b+10:b-10);return this._checkConstraints(b,a)}return this.inherited(arguments)},
_setResizeAxisAttr:function(d){m.removeClass(this.resizeHandle,this._getResizeClass());this._resizeAxis=d;this._resizeX=-1<d.indexOf("x");this._resizeY=-1<d.indexOf("y");dojo.addClass(this.resizeHandle,this._getResizeClass())},_getResizeClass:function(){var d=this._resizeAxis;return"xy"==d?"dojoxResizeNW":"x"==d?"dojoxResizeW":"y"==d?"dojoxResizeN":""}})})},"deploy/widgets/scripts/Editor":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","dojo/dom-construct","dojo/on"],
function(l,m,k,j){return k("deploy.widgets.scripts.Editor",[m,l],{templateString:'<div class="codeEditor"><div data-dojo-attach-point="toolbarAttach"></div><div data-dojo-attach-point="editorAttach"></div></div>',editorId:null,language:null,syntaxCheck:!1,_notInitializedMessage:"Editor not initialized! Did you call startup() ?",postCreate:function(){this.inherited(arguments);this.editorId=Math.random().toString(36).slice(2);this.editorDiv=j.create("div",{id:this.editorId,"class":"editor"},this.editorAttach)},
startup:function(){this.inherited(arguments);this.editor=ace.edit(this.editorId);this.setLanguage(this.language);this.existingValue&&this.setValue(this.existingValue);this.setSyntaxChecker(this.syntaxCheck||!1);this.colorTheme&&this.setColorTheme(this.colorTheme);this.fontSize&&this.setFontSize(this.fontSize);if(this.hasToolbar)throw"TODO";},destroy:function(){this.editor.destroy()},setColorTheme:function(e){if(!this.editor)throw this._notInitializedMessage;this.editor.setTheme("ace/theme/"+e)},isSyntaxCheckerOn:function(){if(!this.editor)throw this._notInitializedMessage;
return this.editor.getSession().getUseWorker()},setSyntaxChecker:function(e){if(!this.editor)throw this._notInitializedMessage;return this.editor.getSession().setUseWorker(e)},setFontSize:function(e){if(!this.editor)throw this._notInitializedMessage;this.editor.setFontSize(e)},getLanguage:function(){if(!this.editor)throw this._notInitializedMessage;return this.lang||"javascript"},setLanguage:function(e){if(!this.editor)throw this._notInitializedMessage;this.lang=e;this.editor.getSession().setMode("ace/mode/"+
e)},setValue:function(e){if(!this.editor)throw this._notInitializedMessage;this.editor.setValue(e,-1)},getValue:function(){if(!this.editor){if(void 0!==this.value)return this.value;throw this._notInitializedMessage;}return this.editor.getValue()},get:function(e){return"value"===e?this.getValue():this.inherited(arguments)}})})},"deploy/widgets/property/PropDefs":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/property/EditPropDef,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,deploy/widgets/Formatters".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j([m,l],{templateString:'<div class="propDefs"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div class="versionLinks" data-dojo-attach-point="versionAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',deleteHeaders:{},readOnly:!1,onlyValueChange:!1,SECUREMASK:"****",postCreate:function(){this.inherited(arguments);var a=this;if(this.propSheetDef){if(this.propSheetDefId=this.propSheetDef.id,this.propSheetDef.versioned)this.propSheetDefPath=
this.propSheetDef.path,this.propSheetDefVersionCount=this.propSheetDef.versionCount,this.propSheetDefVersion=this.propSheetDef.version}else if(this.propSheetDefPath)this.propSheetDefVersion=-1;var b=[{name:i18n("Name"),field:"name"},{name:i18n("Label"),field:"label"},{name:i18n("Pattern"),field:"pattern"},{name:i18n("Required"),field:"required",formatter:function(a){return t.booleanTranslator(a.required)}},{name:i18n("Default Value"),field:"value",formatter:function(b){var c=b.value;"SECURE"===b.type?
c=a.SECUREMASK:"DATETIME"===b.type&&(b.value&&b.value.trim()?(b=Number(b.value),c=isNaN(b)?"":c+" ("+(new Date(b)).toLocaleString()+")"):c="");return c}},{name:i18n("Description"),field:"description"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}],c;c=this.propSheetDefPath?bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(this.propSheetDefPath)+"."+this.propSheetDefVersion+"/propDefs":this.getUrl?this.getUrl:bootstrap.baseUrl+"property/propSheetDef/"+
this.propSheetDefId+"/propDefs";this.grid=new r({url:c,data:this.propDefs||void 0,hidePagination:!1,serverSideProcessing:!1,hideExpandCollapse:!0,columns:b,tableConfigKey:"propDefList",noDataMessage:i18n("No properties have been defined.")});this.grid.placeAt(this.gridAttach);!a.readOnly&&!a.onlyValueChange&&(b={label:i18n("Add Property"),showTitle:!1,onClick:function(){a.showPropertyDialog()}},b=new k(b),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach));this.propSheetDefVersion&&
this.propSheetDefVersionCount&&this.showVersionLinks()},destroy:function(){this.inherited(arguments);this.grid.destroy()},showVersionLinks:function(){var b=this;d.empty(this.versionAttach);d.create("div",{innerHTML:i18n("Version %s of %s",this.propSheetDefVersion,this.propSheetDefVersionCount)},this.versionAttach);var f=d.create("div",{},this.versionAttach);if(1===this.propSheetDefVersion)d.create("div",{className:"arrow_backwards_grey inlineBlock"},f);else{var h=d.create("div",{className:"arrow_backwards inlineBlock"},
f);c(h,"click",function(){b.propSheetDefVersion--;b.refreshGrid()})}d.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},f);this.propSheetDefVersion===this.propSheetDefVersionCount?(d.create("div",{className:"arrow_forward_grey inlineBlock"},f),d.create("span",{innerHTML:"&nbsp;&nbsp;"},f),d.create("div",{className:"arrow_fastForward_grey inlineBlock"},f)):(h=d.create("div",{className:"arrow_forward inlineBlock"},f),c(h,"click",function(){b.propSheetDefVersion++;b.refreshGrid()}),d.create("span",{innerHTML:"&nbsp;&nbsp;"},
f),h=d.create("div",{className:"arrow_fastForward inlineBlock"},f),c(h,"click",function(){b.propSheetDefVersion=b.propSheetDefVersionCount;b.refreshGrid()}),this.readOnly||(d.create("span",{innerHTML:"&nbsp;&nbsp;"},f),f=d.create("a",{innerHTML:i18n("Reset Latest to This Version")},f),c(f,"click",function(){new n({message:i18n("Are you sure you want to reset to version %s?",b.propSheetDefVersion),action:function(){e.put({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(b.propSheetDefPath)+
"."+b.propSheetDefVersion+"/setAsLatest",load:function(){b.propSheetDefVersionCount++;b.propSheetDefVersion=b.propSheetDefVersionCount;b.refreshGrid()},error:function(b){new a({message:i18n("Error: %s",util.escape(b.responseText))})}})}})})))},refreshGrid:function(a){if(!this.propDefs)this.grid.url=null!==a&&void 0!==a?bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(this.propSheetDefPath)+"."+a+"/propDefs":this.propSheetDefPath?bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(this.propSheetDefPath)+
"."+this.propSheetDefVersion+"/propDefs":this.getUrl?this.getUrl:bootstrap.baseUrl+"property/propSheetDef/"+this.propSheetDefId+"/propDefs",this.grid.refresh(),this.propSheetDefPath&&this.showVersionLinks()},actionsFormatter:function(b){var c=this.parentWidget,d=document.createElement("div");if(!c.readOnly&&!b.inherited){var f=document.createElement("a");f.className="actionsLink linkPointer";f.innerHTML=i18n("Edit");f.onclick=function(){c.showPropertyDialog(b)};d.appendChild(f);if(!c.onlyValueChange)f=
document.createElement("a"),f.className="actionsLink linkPointer",f.innerHTML=i18n("Delete"),f.onclick=function(){new n({message:i18n('Are you sure you want to delete property "%s"?',b.name.escape()),action:function(){var d;c.propDefs?((d=util.getNamedProperty(c.propDefs,b.name))&&util.removeFromArray(c.propDefs,d),c.grid.data=c.propDefs,c.grid.refresh()):(d=c.propSheetDefPath?bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(c.propSheetDefPath)+".-1/propDefs/"+encodeURIComponent(b.name):
c.deleteUrl?c.deleteUrl.replace("{propertyName}",encodeURIComponent(b.name)):bootstrap.baseUrl+"property/propSheetDef/"+c.propSheetDefId+"/propDefs/"+encodeURIComponent(b.name),e.del({url:d,headers:c.deleteHeaders,load:function(){c.refreshHash?navBar.setHash(c.refreshHash,!1,!0):(c.propSheetDefVersionCount&&(c.propSheetDefVersion++,c.propSheetDefVersionCount++),c.refreshGrid())},error:function(b){if(b.responseText){if(new a({message:util.escape(b.responseText)}),c.refreshHash&&navBar.setHash(c.refreshHash,
!0,!1),c.grid)c.grid.refresh=function(){navBar.setHash(c.refreshHash,!1,!0)}}else this.inherited(arguments)}}))}})},d.appendChild(f)}if(b.inherited)d.innerHTML=i18n("(Inherited)");return d},showPropertyDialog:function(c){var d=this,e=new f({title:i18n("Edit Property"),closable:!0,draggable:!0}),h;d.propDefs&&(h=function(a){var b;c&&(b=util.getNamedProperty(d.propDefs,c.name));if(b)for(var f in a)a.hasOwnProperty(f)&&(b[f]=a[f]);else d.propDefs.push(a);d.grid.data=d.propDefs;d.grid.refresh()});(new b({saveUrl:this.saveUrl,
propDef:c,propSheetDefId:this.propSheetDefId,propSheetDefPath:this.propSheetDefPath,addData:this.addData,onSubmit:h,onlyValueChange:this.onlyValueChange,resolveHttpValuesUrl:this.propSheetDef?this.propSheetDef.resolveHttpValuesUrl:null,callback:function(b){if(b&&399<b.status){if(new a({message:util.escape(b.responseText)}),d.refreshHash&&navBar.setHash(d.refreshHash,!0,!1),d.grid&&d.refreshHash)d.grid.refresh=function(){navBar.setHash(d.refreshHash,!1,!0)}}else e.hide(),e.destroy(),d.refreshHash?
navBar.setHash(d.refreshHash,!1,!0):d.propSheetDef?(d.propSheetDefVersion++,d.propSheetDefVersionCount++,d.propSheetDef.version=d.propSheetDefVersion,d.propSheetDef.versionCount=d.propSheetDefVersionCount,d.refreshGrid(d.propSheetDefPath?"-1":null)):d.propSheetDefId&&d.refreshGrid()}})).placeAt(e.containerNode);e.show()},addData:function(){},_getValueAttr:function(){return this.propDefs}})})},"deploy/widgets/property/EditPropDef":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/aspect,js/webext/widgets/ColumnForm,js/webext/widgets/DateTime,js/webext/widgets/BidiDateUtil,dijit/form/DateTextBox".split(","),
function(l,m,k,j,e,h,d,c,b){return j("deploy.widgets.property.EditPropDef",[m,l],{templateString:'<div class="editPropDef">  <div data-dojo-attach-point="formAttach"></div></div>',httpFieldNames:"httpUrl,httpUsername,httpPassword,httpFormat,httpBasePath,httpValuePath,httpLabelPath".split(","),postCreate:function(){this.inherited(arguments);var a=this;this.existingValues={};if(this.propDef)this.existingValues.name=this.propDef.name,this.existingValues.description=this.propDef.description,this.existingValues.label=
this.propDef.label,this.existingValues.pattern=this.propDef.pattern,this.existingValues.required=this.propDef.required,this.existingValues.value=this.propDef.value,this.existingValues.defaultLabel=this.propDef.defaultLabel,this.existingValues.type=this.propDef.type,this.existingValues.allowedValues=this.propDef.allowedValues,this.existingValues.httpUrl=this.propDef.httpUrl,this.existingValues.httpUsername=this.propDef.httpUsername,this.existingValues.httpPassword=this.propDef.httpPassword,this.existingValues.httpFormat=
this.propDef.httpFormat,this.existingValues.httpBasePath=this.propDef.httpBasePath,this.existingValues.httpValuePath=this.propDef.httpValuePath,this.existingValues.httpLabelPath=this.propDef.httpLabelPath;var b;this.propSheetDefPath?(b=bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(this.propSheetDefPath)+".-1/propDefs",this.propDef&&(b+="/"+encodeURIComponent(this.propDef.name))):this.saveUrl?b=this.saveUrl:(b=bootstrap.baseUrl+"property/propSheetDef/"+this.propSheetDefId+
"/propDefs",this.propDef&&(b+="/"+encodeURIComponent(this.propDef.name)));this.form=new d({submitUrl:b,addData:function(b){b.definitionGroupId=a.propSheetDefId;if(a.propDef)b.existingId=a.propDef.id;if("SELECT"===b.type||"MULTI_SELECT"===b.type){b.allowedValues=[];if(" "===b.value)b.value="";var c;a.form.getValue("pattern")&&(c=util.getNormalizedRegExp(a.form.getValue("pattern")));var d=a.form.getValue("allowedValues").split("\n");k.forEach(d,function(a){0<a.length&&(!c||c.test(a))&&b.allowedValues.push({label:a,
value:a})})}if("HTTP_SELECT"===b.type||"HTTP_MULTI_SELECT"===b.type)b.resolveHttpValuesUrl=a.resolveHttpValuesUrl+"/"+b.name;if("DATETIME"===b.type)b.value=(new Date(b.value)).getTime();a.addData(b)},onSubmit:a.onSubmit,onError:function(b){void 0!==a.callback&&a.callback(b)},validateFields:function(b){var c=[],d=!0;if(b.pattern){var f=a.validatePattern(b.pattern);f&&(c.push(f),d=!1);b.value&&d&&(a.validateValue(b.value,b.pattern)||c.push(i18n("Default value for property %s does not follow the required pattern",
b.name)))}return c},postSubmit:function(){void 0!==a.callback&&a.callback()},onCancel:function(){void 0!==a.callback&&a.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,readOnly:void 0!==this.propDef,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",readOnly:this.onlyValueChange,value:this.existingValues.description});this.form.addField({name:"label",label:i18n("Label"),type:"Text",readOnly:this.onlyValueChange,
value:this.existingValues.label});this.form.addField({name:"pattern",label:i18n("Pattern"),type:"Text",value:this.existingValues.pattern,readOnly:this.onlyValueChange,description:i18n("Enter a regular expression to enforce that values for this property match a certain pattern. Leave blank to allow any values."),onChange:function(){var b=a.form.getValue("type");("SELECT"===b||"HTTP_SELECT"===b||"DATETIME"===b||"MULTI_SELECT"===b||"HTTP_MULTI_SELECT"===b)&&a.updateDefaultValueField()},intermediateChanges:!0});
this.form.addField({name:"required",label:i18n("Required"),type:"Checkbox",readOnly:this.onlyValueChange,value:this.existingValues.required});this.form.addField({name:"type",label:i18n("Type"),required:!0,type:"Select",readOnly:this.onlyValueChange,value:this.existingValues.type,allowedValues:[{label:i18n("Text"),value:"TEXT"},{label:i18n("Text Area"),value:"TEXTAREA"},{label:i18n("Checkbox"),value:"CHECKBOX"},{label:i18n("Select"),value:"SELECT"},{label:i18n("Multi Select"),value:"MULTI_SELECT"},
{label:i18n("HTTP Select"),value:"HTTP_SELECT"},{label:i18n("HTTP Multi Select"),value:"HTTP_MULTI_SELECT"},{label:i18n("Secure"),value:"SECURE"},{label:i18n("DateTime"),value:"DATETIME"}],onChange:function(b){a.updateAllowedValues();a.updateHttpValues();a.updateDefaultValueField();this.previousType=b}});if(this.propDef){var c;if("SELECT"===this.existingValues.type||"MULTI_SELECT"===this.existingValues.type)c=[],"SELECT"===this.existingValues.type&&c.push({label:i18n("-- Make Selection --"),value:" "}),
k.forEach(this.existingValues.allowedValues,function(a){c.push({label:a.label,value:a.value})})}this.updateAllowedValues();this.updateHttpValues();this.updateDefaultValueField();this.form.placeAt(this.formAttach)},updateAllowedValues:function(){var a=this,b=this.form.getValue("type"),c;this.form.hasField("allowedValues")?(c=this.form.getValue("allowedValues"),this.form.removeField("allowedValues")):this.existingValues.allowedValues&&(c="",k.forEach(this.existingValues.allowedValues,function(a){c+=
a.value+"\n"}));("SELECT"===b||"MULTI_SELECT"===b)&&this.form.addField({name:"allowedValues",label:i18n("Allowed Values"),type:"TEXTAREA",value:c,readOnly:this.onlyValueChange,onChange:function(){a.updateDefaultValueField()}},"value")},updateHttpValues:function(){var a=this,b=this.form.getValue("type"),c={};k.forEach(a.httpFieldNames,function(b){a.form.hasField(b)?(c[b]=a.form.getValue(b),a.form.removeField(b)):a.existingValues[b]&&(c[b]=a.existingValues[b])});if("HTTP_SELECT"===b||"HTTP_MULTI_SELECT"===
b)this.form.addField({name:"httpUrl",label:i18n("URL"),type:"TEXT",value:c.httpUrl,readOnly:this.onlyValueChange,required:!0,description:i18n("URL to retrieve the XML or JSON data from."),onChange:function(){a.updateDefaultValueField()},intermediateChanges:!0}),this.form.addField({name:"httpUsername",label:i18n("Username"),type:"TEXT",value:c.httpUsername,readOnly:this.onlyValueChange,description:i18n("Username required to authenticate on the given URL."),onChange:function(){a.updateDefaultValueField()},
intermediateChanges:!0}),this.form.addField({name:"httpPassword",label:i18n("Password"),type:"SECURE",value:c.httpPassword,readOnly:this.onlyValueChange,description:i18n("Password required to authenticate on the given URL."),onChange:function(){a.updateDefaultValueField()},intermediateChanges:!0}),this.form.addField({name:"httpFormat",label:i18n("Data Format"),type:"SELECT",allowedValues:["JSON","XML"],value:c.httpFormat,readOnly:this.onlyValueChange,required:!0,description:i18n("The format which the retrieved data will have."),
onChange:function(){a.updateDefaultValueField()}}),this.form.addField({name:"httpBasePath",label:i18n("Base Path"),type:"TEXT",value:c.httpBasePath,readOnly:this.onlyValueChange,description:i18n("If Data Format is set to XML, this is an XPath statement that will retrieve the list of XML nodes, each of which contains a property. If Data Format is set to JSON, this is a dot-separated path which leads to the JSON Array containing each property. See documention for more details and examples."),onChange:function(){a.updateDefaultValueField()},
intermediateChanges:!0}),this.form.addField({name:"httpValuePath",label:i18n("Value Path"),type:"TEXT",value:c.httpValuePath,readOnly:this.onlyValueChange,description:i18n("This is a path which describes how to obtain the value representing a property from each object within the list found via the Base Path. For XML, this is an XPath statement. JSON requires a dot-seperated path. See documention for more details and examples."),onChange:function(){a.updateDefaultValueField()},intermediateChanges:!0}),
this.form.addField({name:"httpLabelPath",label:i18n("Label Path"),type:"TEXT",value:c.httpLabelPath,readOnly:this.onlyValueChange,description:i18n("This is a path which describes how to obtain the displayable name for a property from each object within the list found via the Base Path. For XML, this is an XPath statement. JSON requires a dot-seperated path. If no label is specified, the value retrieved via the Name Path will be used. See documention for more details and examples."),onChange:function(){a.updateDefaultValueField()},
intermediateChanges:!0})},updateDefaultValueField:function(){var a=this.form.getValue("type"),c,d,e;if(this.form.hasField("value")){if(this.previousType&&("MULTI_SELECT"!==this.previousType||"HTTP_MULTI_SELECT"!==this.previousType)&&("MULTI_SELECT"!==a||"HTTP_MULTI_SELECT"!==a))c=this.form.getValue("value");this.form.removeField("value")}else if(this.existingValues.value)c=this.existingValues.value;if(this.form.hasField("defaultLabel"))d=this.form.getValue("defaultLabel"),this.form.removeField("defaultLabel");
else if(this.existingValues.defaultLabel)d=this.existingValues.defaultLabel;if("SELECT"===a||"MULTI_SELECT"===a){e=[];"SELECT"===a&&e.push({label:i18n("-- Make Selection --"),value:" "});var h;this.form.getValue("pattern")&&(h=util.getNormalizedRegExp(this.form.getValue("pattern")));d=this.form.getValue("allowedValues").split("\n");k.forEach(d,function(a){0<a.length&&(!h||h.test(a))&&e.push({label:a,value:a})});this.form.addField({name:"value",label:i18n("Default Value"),type:a,value:c,allowedValues:e})}else"HTTP_SELECT"===
a||"HTTP_MULTI_SELECT"===a?this.updateHttpDefaultValue(c,d):"DATETIME"===a?(c=c?new Date(Number(c)):new Date,this.form.addField({name:"value",label:i18n("Default Value"),type:"DateTime",datePackage:b.getDatePackage(),value:c,readOnly:this.onlyValueChange})):this.form.addField({name:"value",label:i18n("Default Value"),type:a,value:c,readOnly:this.onlyValueChange})},updateHttpDefaultValue:function(a,b){var c=this,d=this.form.getValue("type");if("HTTP_SELECT"===d||"HTTP_MULTI_SELECT"===d){var e={};k.forEach(c.httpFieldNames,
function(a){e[a]=c.form.getValue(a)});if(this.propDef)e.propDefName=this.propDef.name;var j;if(this.resolveHttpValuesUrl)j=bootstrap.baseUrl+this.resolveHttpValuesUrl;else{var o="property/propSheetDef/"+(this.propSheetDefPath?util.vc.encodeVersionedPath(this.propSheetDefPath)+".-1":this.propSheetDefId)+"/resolveHttpValues";j=bootstrap.baseUrl+o;if(!this.resolveHttpValuesUrl)this.resolveHttpValuesUrl=o}var s=function(a){c.form.hasField("value")&&c.form.removeField("value");c.form.addField({name:"value",
label:i18n("Default Value"),type:d,allowedValues:[],readOnly:!0});a&&c.form.fields.value.widget.dropDown.set("placeholder",a)},o=function(){c.form.hasField("defaultLabel")&&c.form.removeField("defaultLabel");c.form.addField({name:"defaultLabel",type:"hidden",value:b});"HTTP_MULTI_SELECT"===d&&h.after(c.form.fields.defaultLabel.widget,"get",function(a){if("value"===a&&c.form.fields.value){var b=[];k.forEach(c.form.fields.value.widget.items,function(a){b.push(a.label)});return b.join(",")}},!0);c.form.addField({name:"value",
label:i18n("Default Value"),pattern:c.form.getValue("pattern"),url:j,defaultQuery:e,type:d,value:a,defaultLabel:b,allowNone:!0,readOnly:c.onlyValueChange,onSetItem:function(a,b){a&&c.form.setValue("defaultLabel",b.label)},onQueryError:function(){s(i18n("An error occurred."))}})};c.form.getValue("httpUrl")?o():s()}},validateValue:function(a,b){var c=!0;try{var d=a.match(RegExp(b)),c=null!==d&&a===d[0]}catch(e){c=!1}return c},validatePattern:function(a){var b;try{RegExp(a).exec("")}catch(c){b=c.message||
i18n("Invalid regular expression pattern for property")}return b}})})},"js/webext/widgets/DateTime":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/form/TimeTextBox","dijit/form/DateTextBox"],function(l,m,k,j,e){return l([m,k],{templateString:'<div class="dateTimePicker">    <div dojoAttachPoint="dateAttach"></div>    <div dojoAttachPoint="timeAttach"></div></div>',disabled:!1,postCreate:function(){this.inherited(arguments);this.showWidget()},numberToDate:function(e){var e=
Number(e),d;isNaN(e)||(d=new Date(e));return d},coerceToDate:function(e){var d;"number"===typeof e?d=this.numberToDate(e):"string"===typeof e&&e&&e.trim()&&((d=this.numberToDate(e.trim()))||(d=new Date(e.trim())));if(!(d instanceof Date)||!isFinite(d))d=new Date;return d},showWidget:function(){var h=this;this.date=new e({value:this.coerceToDate(this.value),disabled:this.disabled,datePackage:this.datePackage,onChange:function(){h.onChange(h.get("value"))}},this.dateAttach);this.date.domNode.style.width=
"110px";this.date.domNode.className+=" date-box-picker";this.time=new j({value:this.coerceToDate(this.value),disabled:this.disabled,onChange:function(){h.onChange(h.get("value"))}},this.timeAttach);this.time.domNode.className+=" time-box-picker"},onChange:function(){},_getValueAttr:function(){var e=this.date.get("value"),d=this.time.get("value"),c=null;e&&d?c=util.combineDateAndTime(e,d).valueOf():e?c=e.valueOf():d&&(e=new Date,e=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),c=util.combineDateAndTime(e,
d).valueOf());return c},_setValueAttr:function(e){this.value=e;this.date&&this.date.set("value",new Date(e));this.time&&this.time.set("value",new Date(e))},destroy:function(){this.date.destroy();this.time.destroy();this.inherited(arguments)}})})},"deploy/widgets/workflow/activity/SetStatusActivity":function(){define(["dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l("deploy.widgets.workflow.activity.SetStatusActivity",[k],{postCreate:function(){this.inherited(arguments);
if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var j="",e="...";"FAILURE"===this.data.status?e=i18n("Failure"):"SUCCESS"===this.data.status&&(e=i18n("Success"));return j+=i18n("Set Status: %s",e)},editProperties:function(j){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,onSubmit:function(c){j&&j();e.initialized=!0;e.data.status=c.status;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly});d.addField({name:"status",
label:i18n("Status"),required:!0,type:"Select",allowedValues:[{label:i18n("Success"),value:"SUCCESS"},{label:i18n("Failure"),value:"FAILURE"}],value:e.data.status});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/workflow/activity/UninstallMultipleComponentsActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/MultipleComponentsActivity"],function(l,m){return l("deploy.widgets.workflow.activity.UninstallMultipleComponentsActivity",[m],{statusLabel:i18n("Remove Versions With Status"),
getLabel:function(){var k="";if(this.initialized){var j=this.getChildChildData(),e;j&&j.children&&(e=j.children[0]);k+=this.getDisplayName(e.name,"",i18n("Uninstall"));e.componentProcessName&&(k+="\n"+i18n("Process: %s",e.componentProcessName))}else k+=i18n("Uninstall Multiple Components");return k},getSelfChildData:function(k,j){return[{name:util.randomString(30),type:"componentEnvironmentIterator",tagId:k.tagId,runOnlyOnFirst:k.runOnlyOnFirst,children:[{name:util.randomString(30),type:"uninstallAllVersionsIterator",
selectionType:k.selectionType,status:k.status,children:[{name:k.name,type:"componentProcess",componentProcessName:k.componentProcessName,allowFailure:k.allowFailure,properties:j}]}]}]},addExtraFields:function(k,j,e){k.addField({name:"selectionType",label:i18n("Uninstall Type"),type:"Select",required:!0,value:e.selectionType,allowedValues:[{label:i18n("All Existing"),value:"ALL_EXISTING"},{label:i18n("All Selected For Process"),value:"SELECTED"}]},j)},getDefaultName:function(k){return i18n('Uninstall Tagged: "%s"',
k)}})})},"deploy/widgets/workflow/activity/MultipleComponentsActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/store/Memory,dojo/on,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),function(l,m,k,j,e,h,d){return m("deploy.widgets.workflow.activity.MultipleComponentsActivity",[h],{disableStatusSelect:!1,postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=
util.randomString(30),this.editProperties()},editProperties:function(c){var b=this,a=this.getChildData(),f=this.getChildChildData(),e;f&&f.children&&(e=f.children[0]);var h=b.createPropertyDialog(),j=b.createPropertyForm({dialog:h,validateFields:function(a){return b.validateName(a.name)},onSubmit:function(a){c&&c();b.initialized=!0;b.data=b.getSelfData();b.data.componentTagId=a.componentTagId;if(a.resourceTagId&&""!==a.resourceTagId)b.data.resourceTagId=a.resourceTagId;else if(b.data.resourceTagId)b.data.resourceTagId=
void 0;if(a.runOnlyOnFirst)b.data.runOnlyOnFirst=a.runOnlyOnFirst;b.data.maxIteration=a.maxIteration;b.data.maxCompIteration=a.maxCompIteration;b.data.failFast=a.failFast;b.data.preconditionScript=a.preconditionScript;var d={};l.forEach(b.extraPropertyNames,function(b){var c=b.substring(2);d[c]=a[b]});b.data.componentProcessName=a.componentProcessName;b.data.children=b.getSelfChildData(a,d);b.updateLabel();h.hide();j.destroy();h.destroy()},readOnly:b.readOnly});j.addField({name:"name",label:i18n("Name"),
type:"Text",required:!0,value:e?e.name:""});e=b.data.componentTagId;if(b.data.componentTag)e=b.data.componentTag.id;j.addField({name:"componentTagId",label:i18n("Component Tag"),type:"TagDropDown",objectType:"Component",value:e,readOnly:b.readOnly,noneLabel:i18n("All Components"),onChange:function(a,c){b.showFieldsForComponent(j,this.get("value"));b.getDefaultName&&b.setDefaultNameValue(j,c.name)}});j.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",
value:a.tagId,readOnly:b.readOnly});b.disableStatusSelect||(a=new d({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getLabel:function(a){return a.name.escape()},getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:f.status,allowNone:!1}),j.addField({name:"status",label:b.statusLabel,required:!0,widget:a}));j.addField({name:"maxCompIteration",label:i18n("Maximum number of concurrent components"),type:"Text",textDir:"ltr",required:!0,value:b.data.maxCompIteration||
100,description:i18n("The maximum number of components to deploy at one time. For example, if you specify 5, this step deploys five components at a time to all agents to which the components are mapped.")});j.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:b.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component.This setting limits the number of processes that run simultaneously to deploy each component.For example, if you set the maximum number of concurrent processes to 2,only two instances of a component are installed at a time,even if many instances of the component are mapped to agents.Use -1 for unlimited.")});
j.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:b.data.failFast});j.addField({name:"preconditionScript",label:i18n("Precondition"),type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:b.data.preconditionScript,cache:b.graphEditor.cache});j.addField({name:"_typeSelectionInsert",
type:"hidden"});b.addExtraFields(j,"_typeSelectionInsert",f);b.showFieldsForComponent(j,e);j.placeAt(h.containerNode);h.show()},showFieldsForComponent:function(c){var b=this;this.getChildData();var a=this.getChildChildData();l.forEach(this.extraPropertyNames,function(a){b.removePropertyField(c,a)});this.extraPropertyNames=[];var d;if(b.data.children)d=b.data.children[0].children[0].children[0].componentProcessName;c.hasField("componentProcessName")||(c.addField({name:"componentProcessName",label:i18n("Component Process"),
type:"Text",value:d,required:!0,description:i18n("The precise name of the process to run.")},"tagId"),(config.data.systemConfiguration.enableAllowFailure||a.allowFailure)&&c.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:a.allowFailure},"resourceTagId"))},getSelfData:function(){return{name:this.data.name,type:"multiComponentEnvironmentIterator"}},addExtraFields:function(){}})})},"deploy/widgets/property/PropertyTextareaBox":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/Deferred,dojo/store/util/QueryResults,dojo/store/Memory,deploy/widgets/property/PropertyTextarea".split(","),
function(l,m,k,j,e,h,d,c){var b=k("deploy.widgets.property.PropertyTextareaBox",[m,l],{templateString:'<div class="propBox" data-dojo-attach-point="propBoxAttach"></div>',postCreate:function(){var a=new d({data:[],idProperty:"name"});this.propTextArea=new c({store:a,searchAttr:"name",autoComplete:!1,pageSize:this.pageSize||Infinity,value:this.value||"",cache:this.cache});this.propTextArea.placeAt(this.propBoxAttach)},_getValueAttr:function(){return this.propTextArea.get("value")}});config.data.extraFormDelegates.push({name:"PropertyArea",
delegateFunction:function(a){return new b({pageSize:a.pageSize||Infinity,value:a.value,label:a.label,noneLabel:a.noneLabel,name:a.name,cache:a.cache})}});return b})},"deploy/widgets/property/PropertyTextarea":function(){define("dojo/_base/declare,dojo/keys,dojo/_base/event,dojo/dom-style,dojo/dom-attr,dojo/dom-class,dojo/window,dojo/on,dojo/dom-geometry,dojo/_base/lang,dijit/popup,deploy/widgets/property/PropertyComboBox".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return l("dijit.form.PropertyTextarea",
[n],{templateString:'<div class="dijit dijitReset dijitInline dijitLeft propertyTextarea" id="widget_${id}" role="combobox" aria-haspopup="true" data-dojo-attach-point="_popupStateNode"><div class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer" data-dojo-attach-point="_buttonNode" role="presentation"><input class="dijitReset dijitInputField dijitArrowButtonInner" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="button presentation" aria-hidden="true" ${_buttonInputDisabled}/></div><div class="dijitReset dijitValidationContainer"><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"/></div><div class="dijitReset dijitInputContainer"><div class="dijitReset dijitInputInner" data-dojo-attach-point="positionAttach" style="visibility:hidden;overflow-wrap:break-word;word-wrap:break-word;position:absolute;"></div><textarea class="dijitReset" data-dojo-type="dijit/form/Textarea" ${!nameAttrSetting} style="width:300px;" rows="5" data-dojo-attach-point="textbox,focusNode"></textarea></div></div>',
_onKey:function(a){var b=this.focusNode.value,c=this._getCaretPos(this.focusNode),b=b.substring(0,c),b=b.replace(/\n/g,"</br>");this.positionAttach.innerHTML=b;if(!(32<=a.charCode)&&(b=a.charCode||a.keyCode,!(b===m.ALT||b===m.CTRL||b===m.META||b===m.SHIFT))){var c=this.dropDown,d=null;this._abortQuery();if(!this.disabled&&!this.readOnly){var f=this.dropDown;if(f&&this._opened&&f.handleKey&&!1===f.handleKey(a))k.stop(a);else if(f&&this._opened&&a.keyCode===m.ESCAPE&&(this.closeDropDown(),k.stop(a)),
!a.altKey&&!a.ctrlKey&&!a.metaKey)switch(this._opened&&(d=c.getHighlightedOption()),b){case m.PAGE_DOWN:case m.DOWN_ARROW:case m.PAGE_UP:case m.UP_ARROW:this._opened&&(this._announceOption(d),k.stop(a));break;case m.ENTER:if(d){if(d===c.nextButton){this._nextSearch(1);k.stop(a);break}else if(d===c.previousButton){this._nextSearch(-1);k.stop(a);break}k.stop(a)}else this._setBlurValue();this.handleKeyTab(c,d)&&this.handleKeyEscape();break;case m.TAB:this.handleKeyTab(c,d)&&this.handleKeyEscape();break;
case m.ESCAPE:this.handleKeyEscape()}}}},handleKeyTab:function(a,b){var c=this.get("displayedValue");if(a&&(c===a._messages.previousMessage||c===a._messages.nextMessage))return!1;b&&this._selectOption(b);return!0},handleKeyEscape:function(){if(this._opened)this._lastQuery=null,this.closeDropDown()},openDropDown:function(){var c=this.dropDown,n=c.domNode,q=this._aroundNode||this.domNode,o=this;if(!this._preparedNode){this._preparedNode=!0;if(n.style.width)this._explicitDDWidth=!0;if(n.style.height)this._explicitDDHeight=
!0}if(this.maxHeight||this.forceWidth||this.autoWidth){var s={display:"",visibility:"hidden"};if(!this._explicitDDWidth)s.width="";if(!this._explicitDDHeight)s.height="";j.set(n,s);s=this.maxHeight;if(-1===s)var s=d.getBox(this.ownerDocument),k=b.position(q,!1),s=Math.floor(Math.max(k.y,s.h-(k.y+k.h)));f.moveOffScreen(c);c.startup&&!c._started&&c.startup();var k=b.getMarginSize(n),l=s&&k.h>s;j.set(n,{overflowX:"visible",overflowY:l?"auto":"visible"});l?(k.h=s,k.hasOwnProperty("w")&&(k.w+=16)):delete k.h;
this.forceWidth?k.w=q.offsetWidth:this.autoWidth?k.w=Math.max(k.w,q.offsetWidth):delete k.w;a.isFunction(c.resize)?c.resize(k):b.setMarginBox(n,k)}q=f.open({parent:this,popup:c,x:o.getTextareaXPos(),y:o.getTextareaYPos(),onExecute:function(){o.closeDropDown(!0)},onCancel:function(){o.closeDropDown(!0)},onClose:function(){e.set(o._popupStateNode,"popupActive",!1);h.remove(o._popupStateNode,"dijitHasDropDownOpen");o._set("_opened",!1)}});e.set(this._popupStateNode,"popupActive","true");h.add(this._popupStateNode,
"dijitHasDropDownOpen");this._set("_opened",!0);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",c.id);"presentation"!==n.getAttribute("role")&&!n.getAttribute("aria-labelledby")&&n.setAttribute("aria-labelledby",this.id);return q},validate:function(){},getTextareaXPos:function(){var a=this.focusNode,b=a.offsetLeft||0;if(a.offsetParent){do a=a.offsetParent,b+=a.offsetLeft;while(a.offsetParent)}return b},getTextareaYPos:function(){var a=this.positionAttach,
b=a.offsetTop||0;if(a.offsetParent){do a=a.offsetParent,b+=a.offsetTop;while(a.offsetParent)}return b=b+this.positionAttach.offsetHeight+10-this.focusNode.scrollTop}})})},"deploy/widgets/workflow/activity/PatternDeploymentActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/BaseActivity"],function(l,m){return l("deploy.widgets.workflow.activity.PatternDeploymentActivity",[m],{postCreate:function(){this.inherited(arguments)},getLabel:function(){return this.data.name},
canEdit:function(){return!1}})})},"deploy/widgets/workflow/activity/FinishActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/BaseActivity"],function(l,m){return l("deploy.widgets.workflow.activity.FinishActivity",[m],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.initialized=!0},getLabel:function(){return i18n("Finish")},getStyle:function(){return"utilityStyle"},canEdit:function(){return!1},canDelete:function(){return!0},
canCopy:function(){return!1}})})},"deploy/widgets/workflow/activity/EnvironmentApprovalTaskActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h){return m("deploy.widgets.workflow.activity.EnvironmentApprovalTaskActivity",[j],{postCreate:function(){this.inherited(arguments);if(appState.environment)this.approvalParent=appState.environment;if(appState.environmentTemplate)this.approvalParent=
appState.environmentTemplate;this.baseResolveHttpValuesUrl="rest/approval/approvalProcess/"+this.approvalParent.id+"/"+this.data.name+"/propDefs/resolveHttpValues/";if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var d=i18n("Environment Approval");this.initialized&&(d=this.data.role?d+("\n"+this.data.role.name):d+("\n"+i18n("Deleted Role")));return d},editProperties:function(d){var c=this,b=this.data.role,a=c.createPropertyDialog(),f=c.createPropertyForm({dialog:a,
onSubmit:function(e){c.initialized=!0;d&&d();c.data.commentRequired=e.commentRequired;c.data.commentPrompt=void 0!==e.commentPrompt?e.commentPrompt:"";c.data.roleRestrictionData={};c.data.roleRestrictionData.contextType="ENVIRONMENT";c.data.roleRestrictionData.roleRestrictions=[{roleId:e.role}];c.data.role=b;c.data.templateName=e.templateName;c.data.propDefs=e.propDefs;l.forEach(c.data.propDefs,function(a){a.resolveHttpValuesUrl=c.baseResolveHttpValuesUrl+a.name});a.hide();f.destroy();a.destroy();
c.updateLabel()},readOnly:c.readOnly}),j=new h({restUrl:bootstrap.baseUrl+"security/role",value:this.data.role?this.data.role.id:void 0,onChange:function(a,c){b=c},allowNone:!1});f.addField({name:"role",label:i18n("Role"),required:!0,description:i18n("The role the approving user must have."),widget:j});j=new h({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return a},getValue:function(a){return a},allowNone:!1,value:c.data.templateName||"ApprovalCreated",
disabled:c.readOnly});f.addField({name:"templateName",label:i18n("Notification Template"),required:!0,widget:j});j=new e({propDefs:c.data.propDefs||[],propSheetDef:{resolveHttpValuesUrl:c.baseResolveHttpValuesUrl}});f.addField({widget:j,label:"Properties",name:"propDefs"});f.addField({name:"commentRequired",label:i18n("Require Comment"),type:"Checkbox",required:!1,description:i18n("Is a comment required for this approval request ?"),value:c.data.commentRequired});f.addField({name:"commentPrompt",
label:i18n("Comment Prompt"),type:"Text Area",require:!1,description:i18n("The comment that will be shown in the approval request."),value:c.data.commentPrompt});f.placeAt(a.containerNode);a.show()}})})},"deploy/widgets/workflow/activity/InstallComponentActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),
function(l,m,k,j,e,h,d,c){return m("deploy.widgets.workflow.activity.InstallComponentActivity",[d],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var b="";if(this.initialized){var a=this.getChildChildData();a.component&&a.component.deleted?b+=a.name+"\n"+i18n("(Deleted Component)"):(b+=this.getDisplayName(a.name,a.componentName,i18n("Install"),i18n("Install %s",a.componentName)),b=a.componentProcessName?
b+("\n"+i18n("Process: %s",a.componentProcessName)):b+("\n"+i18n("Process Deleted")))}else b+=i18n("Install Component");return b},editProperties:function(b){var a=this;this.getChildData();var c=this.getChildChildData(),d,e=a.createPropertyDialog(),j=a.createPropertyForm({dialog:e,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(c){b&&b();a.initialized=!0;var f,h,k=a.data.id;if(k)f=a.data.children[0].id,h=a.data.children[0].children[0].id;a.data={id:k,name:a.data.name,type:"componentEnvironmentIterator"};
a.data.component=d.get("item");a.data.componentName=a.data.component.name;if(c.tagId&&""!==c.tagId)a.data.tagId=c.tagId;else if(a.data.tagId)a.data.tag=void 0,a.data.tagId=void 0;a.data.maxIteration=c.maxIteration;a.data.failFast=c.failFast;a.data.preconditionScript=c.preconditionScript;var m={};l.forEach(a.extraPropertyNames,function(a){var b=a.substring(2);m[b]=c[a]});a.data.children=[{id:f,name:util.randomString(30),type:"inventoryVersionDiff",componentName:a.data.component.name,status:c.status,
children:[{id:h,name:c.name,type:"componentProcess",componentName:a.data.component.name,componentProcessName:c.componentProcessName,allowFailure:c.allowFailure,properties:m}]}];a.updateLabel();e.hide();j.destroy();e.destroy()},readOnly:a.readOnly});j.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:c.name});"firstDayWizard"===a.graphEditor.mode?(c=new h({store:a.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!a.data.component?void 0:a.data.component.id,noDataMessage:i18n("No components found."),
autoComplete:!1,selectOnClick:!0,onSetItem:function(b,c){a.fdwShowFieldsForComponent(j,c)}}),d=j.addField({name:"component",label:i18n("Component"),required:!0,widget:c}).widget):d=j.addField({name:"component",label:i18n("Component"),required:!0,autoSelectFirst:!0,type:"ApplicationComponentSelect",applicationId:a.graphEditor.application.id,value:!a.data.component?void 0:a.data.component.id,disabled:a.readOnly,onSetItem:function(b,c){a.showFieldsForComponent(j,c)}}).widget;j.addField({name:"tagId",
label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:a.data.tagId,readOnly:a.readOnly});j.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:a.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component. This setting limits the number of processes that run simultaneously to deploy each component. For example, if you set the maximum number of concurrent processes to 2, only two instances of a component are installed at a time, even if many instances of the component are mapped to agents. Use -1 for unlimited.")});
j.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:a.data.failFast});j.addField({name:"preconditionScript",label:i18n("Precondition"),type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:a.data.preconditionScript,cache:a.graphEditor.cache});j.placeAt(e.containerNode);e.show()},
showFieldsForComponent:function(b,a){var d=this;b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");if(a){var e=this.getChildData(),h=this.getChildChildData();this.setDefaultNameValue(b,a.name);e=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:e.status,allowNone:!1});b.addField({name:"status",label:i18n("Use Versions Without Status"),required:!0,
widget:e},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var j;if(d.data.component&&d.data.component.id===a.id)j=h.componentProcessName;j=new c({restUrl:bootstrap.restUrl+"deploy/component/"+a.id+"/fullProcesses/false",getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},getValue:function(a){return a.name},onChange:function(a,c){l.forEach(d.extraPropertyNames,function(a){d.removePropertyField(b,a)});
d.extraPropertyNames=[];c&&l.forEach(c.unfilledProperties,function(a){var c="p_"+a.name,e=a.value,j=!1;h.properties&&h.properties[a.name]&&(e=h.properties[a.name],j=!0);var o=k.clone(a);o.name=c;o.value=e;if(a.description)o.description=a.description.escape();d.extraPropertyNames.push(c);d.addPropertyField(b,o,j,"allowFailure")})},allowNone:!1,value:j,disabled:d.readOnly});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:j},
"tagId");(config.data.systemConfiguration.enableAllowFailure||h.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:h.allowFailure},"tagId")}},fdwShowFieldsForComponent:function(b,a){var d=this;if(a){b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");var j=this.getChildData(),r=this.getChildChildData();this.setDefaultNameValue(b,a.name);
j=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:j.status,allowNone:!1});b.addField({name:"status",label:i18n("Use Versions Without Status"),required:!0,widget:j},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var k;if(d.data.component&&d.data.component.id===a.id)k=r.componentProcessName;k=new h({store:new e({data:d.graphEditor.firstDayWizardModel.getComponentProcesses(a),
idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,value:k});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:k},"tagId");(config.data.systemConfiguration.enableAllowFailure||r.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:r.allowFailure},"tagId")}},getDefaultName:function(b){return i18n('Install: "%s"',
b)}})})},"deploy/widgets/workflow/activity/StartActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/BaseActivity"],function(l,m){return l("deploy.widgets.workflow.activity.StartActivity",[m],{getLabel:function(){return i18n("Start")},getName:function(){return null},getStyle:function(){return"utilityStyle"},canEdit:function(){return!1},canDelete:function(){return!1},canCopy:function(){return!1},isUtilityCell:function(){return!0}})})},"deploy/widgets/workflow/activity/SwitchActivity":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity","deploy/widgets/property/PropertyTextareaBox"],function(l,m,k,j){return m("deploy.widgets.workflow.activity.SwitchActivity",[j],{postCreate:function(){this.inherited(arguments);this.initialized||this.editProperties()},getLabel:function(){var e="";return e=this.initialized?e+(this.data.name+"\n"+i18n("Switch (%s)",this.data.propertyName)):e+i18n("Switch")},getFillColor:function(){return"#00649D"},editProperties:function(e){var h=
this,d=h.createPropertyDialog(),c=h.createPropertyForm({dialog:d,validateFields:function(b){return h.validateName(b.name)},onSubmit:function(b){e&&e();h.initialized=!0;h.data.name=b.name;h.data.propertyName=b.propertyName;h.updateLabel();d.hide();c.destroy();d.destroy()},readOnly:h.readOnly});c.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:h.data.name});c.addField({name:"propertyName",label:i18n("Property Name"),type:"PropertyBox",required:!0,value:h.data.propertyName,cache:h.graphEditor.cache});
c.placeAt(d.containerNode);d.show()}})})},"deploy/widgets/workflow/activity/NoteActivity":function(){define(["dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l("deploy.widgets.workflow.activity.NoteActivity",[k],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.initialized=!0,this.editProperties()},getLabel:function(){return this.data.text||i18n("Edit to place notes.")},getStyle:function(){return"noteStyle"},
canEdit:function(){return!0},canDelete:function(){return!0},editProperties:function(j){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,onSubmit:function(b){j&&j();e.initialized=!0;e.data.text=b.text;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly}),c="";if(e.data.text)c=e.data.text;d.addField({name:"text",label:i18n("Text"),type:"Text Area",required:!1,value:c});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/workflow/activity/ReleaseLockActivity":function(){define(["dojo/_base/declare",
"dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l("deploy.widgets.workflow.activity.ReleaseLockActivity",[k],{postCreate:function(){this.inherited(arguments);if(!this.initialized){this.data.name=util.randomString(30);if(!this.data.lockName)this.data.lockName=appState.applicationProcess?"${p:application.name}-${p:applicationProcess.name}-${p:environment.name}":"${p:component.name}-${p:componentProcess.name}-${p:resource.name}";this.editProperties()}},getLabel:function(){var j=
"",j=i18n("Release Lock");if(this.data.lockName){var e=this.data.lockName;22<e.length&&(e=e.substring(0,20)+"...");j+="\n"+e}return j},editProperties:function(j){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,onSubmit:function(b){j&&j();e.initialized=!0;e.data.lockName=b.lockName;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly}),c="";if(this.data.lockName)c=this.data.lockName;d.addField({name:"lockName",label:i18n("Lock Name"),type:"PropertyBox",required:!0,
value:c,cache:e.graphEditor.cache});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/workflow/activity/RollbackComponentActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),function(l,m,k,j,e,h,d,c){return m("deploy.widgets.workflow.activity.RollbackComponentActivity",
[d],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var b="";if(this.initialized){var a=this.getChildChildData();a.component&&a.component.deleted?b+=a.name+"\n"+i18n("(Deleted Component)"):(b+=this.getDisplayName(a.name,a.componentName,i18n("Rollback"),i18n("Rollback %s",a.componentName)),b=a.componentProcessName?b+("\n"+i18n("Process: %s",a.componentProcessName)):b+("\n"+i18n("Process Deleted")))}else b+=
i18n("Rollback Component");return b},editProperties:function(b){var a=this,c=this.getChildData(),d=this.getChildChildData(),e,j=a.createPropertyDialog(),q=a.createPropertyForm({dialog:j,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(c){b&&b();a.initialized=!0;a.data={name:a.data.name,type:"componentEnvironmentIterator"};a.data.component=e.get("item");a.data.componentName=a.data.component.name;if(c.tagId&&""!==c.tagId)a.data.tagId=c.tagId;else if(a.data.tagId)a.data.tag=
void 0,a.data.tagId=void 0;a.data.maxIteration=c.maxIteration;a.data.failFast=c.failFast;a.data.preconditionScript=c.preconditionScript;var d={};l.forEach(a.extraPropertyNames,function(a){var b=a.substring(2);d[b]=c[a]});a.data.children=[{name:util.randomString(30),type:"uninstallVersionDiff",componentName:a.data.component.name,selectionType:c.selectionType,status:c.status,children:[{name:c.name,type:"componentProcess",componentName:a.data.component.name,componentProcessName:c.componentProcessName,
allowFailure:c.allowFailure,properties:d}]}];a.updateLabel();j.hide();q.destroy();j.destroy()},readOnly:a.readOnly});q.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:d.name});"firstDayWizard"===a.graphEditor.mode?(d=new h({store:a.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!a.data.component?void 0:a.data.component.id,noDataMessage:i18n("No components found."),autoComplete:!1,selectOnClick:!0,onSetItem:function(b,c){a.fdwShowFieldsForComponent(q,c)}}),
e=q.addField({name:"component",label:i18n("Component"),required:!0,widget:d}).widget):e=q.addField({name:"component",label:i18n("Component"),required:!0,autoSelectFirst:!0,type:"ApplicationComponentSelect",applicationId:a.graphEditor.application.id,value:!a.data.component?void 0:a.data.component.id,disabled:a.readOnly,onSetItem:function(b,c){a.showFieldsForComponent(q,c)}}).widget;q.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:a.data.tagId,
readOnly:a.readOnly});q.addField({name:"selectionType",label:i18n("Rollback Type"),type:"Select",required:!0,value:c.selectionType,allowedValues:[{label:i18n("Remove Undesired Incremental Versions"),value:"UNDESIRED"},{label:i18n("Replace with Last Deployed"),value:"LAST_DEPLOYED"}]});q.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:a.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component. This setting limits the number of processes that run simultaneously to roll back each component. For example, if you set the maximum number of concurrent processes to 2, only two instances of a component are rolled back at a time, even if there are many instances of the component. Use -1 for unlimited.")});
q.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:a.data.failFast});q.addField({name:"preconditionScript",label:i18n("Precondition"),type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:a.data.preconditionScript,cache:a.graphEditor.cache});q.placeAt(j.containerNode);j.show()},
showFieldsForComponent:function(b,a){var d=this;b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");if(a){var e=this.getChildData(),h=this.getChildChildData();this.setDefaultNameValue(b,a.name);e=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:e.status,allowNone:!1});b.addField({name:"status",label:i18n("Remove Versions With Status"),required:!0,
widget:e},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var j;if(d.data.component&&d.data.component.id===a.id)j=h.componentProcessName;j=new c({restUrl:bootstrap.restUrl+"deploy/component/"+a.id+"/fullProcesses/false",getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},getValue:function(a){return a.name},onChange:function(a,c){l.forEach(d.extraPropertyNames,function(a){d.removePropertyField(b,a)});
d.extraPropertyNames=[];c&&l.forEach(c.unfilledProperties,function(a){var c="p_"+a.name,e=a.value,j=!1;h.properties&&h.properties[a.name]&&(e=h.properties[a.name],j=!0);var o=k.clone(a);o.name=c;o.value=e;if(a.description)o.description=a.description.escape();d.extraPropertyNames.push(c);d.addPropertyField(b,o,j,"allowFailure")})},allowNone:!1,value:j,disabled:d.readOnly});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:j},
"tagId");(config.data.systemConfiguration.enableAllowFailure||h.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:h.allowFailure},"tagId")}},fdwShowFieldsForComponent:function(b,a){var d=this;if(a){b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");var j=this.getChildData(),r=this.getChildChildData();this.setDefaultNameValue(b,a.name);
j=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:j.status,allowNone:!1});b.addField({name:"status",label:i18n("Remove Versions With Status"),required:!0,widget:j},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var k;if(d.data.component&&d.data.component.id===a.id)k=r.componentProcessName;k=new h({store:new e({data:d.graphEditor.firstDayWizardModel.getComponentProcesses(a),
idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,value:k});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:k},"tagId");(config.data.systemConfiguration.enableAllowFailure||r.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:r.allowFailure},"tagId")}},getDefaultName:function(b){return i18n('Rollback: "%s"',
b)}})})},"deploy/widgets/workflow/activity/UninstallComponentActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),function(l,m,k,j,e,h,d,c){return m("deploy.widgets.workflow.activity.UninstallComponentActivity",[d],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=
util.randomString(30),this.editProperties()},getLabel:function(){var b="";if(this.initialized){var a=this.getChildChildData();a.component&&a.component.deleted?b+=a.name+"\n"+i18n("(Deleted Component)"):(b+=this.getDisplayName(a.name,a.componentName,i18n("Uninstall"),i18n("Uninstall %s",a.componentName)),b=a.componentProcessName?b+("\n"+i18n("Process: %s",a.componentProcessName)):b+("\n"+i18n("Process Deleted")))}else b+=i18n("Uninstall Component");return b},editProperties:function(b){var a=this,c=
this.getChildData(),d=this.getChildChildData(),e,j=a.createPropertyDialog(),k=a.createPropertyForm({dialog:j,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(c){b&&b();a.initialized=!0;a.data={name:a.data.name,type:"componentEnvironmentIterator"};a.data.component=e.get("item");a.data.componentName=a.data.component.name;if(c.tagId&&""!==c.tagId)a.data.tagId=c.tagId;else if(a.data.tagId)a.data.tag=void 0,a.data.tagId=void 0;a.data.maxIteration=c.maxIteration;a.data.failFast=
c.failFast;a.data.preconditionScript=c.preconditionScript;var d={};l.forEach(a.extraPropertyNames,function(a){var b=a.substring(2);d[b]=c[a]});a.data.children=[{name:util.randomString(30),type:"uninstallAllVersionsIterator",componentName:a.data.component.name,selectionType:c.selectionType,status:c.status,children:[{name:c.name,type:"componentProcess",componentName:a.data.component.name,componentProcessName:c.componentProcessName,allowFailure:c.allowFailure,properties:d}]}];a.updateLabel();j.hide();
k.destroy();j.destroy()},readOnly:a.readOnly});k.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:d.name});"firstDayWizard"===a.graphEditor.mode?(d=new h({store:a.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!a.data.component?void 0:a.data.component.id,noDataMessage:i18n("No components found."),autoComplete:!1,selectOnClick:!0,onSetItem:function(b,c){a.fdwShowFieldsForComponent(k,c)}}),e=k.addField({name:"component",label:i18n("Component"),required:!0,widget:d}).widget):
e=k.addField({name:"component",label:i18n("Component"),required:!0,autoSelectFirst:!0,type:"ApplicationComponentSelect",applicationId:a.graphEditor.application.id,value:!a.data.component?void 0:a.data.component.id,disabled:a.readOnly,onSetItem:function(b,c){a.showFieldsForComponent(k,c)}}).widget;k.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:a.data.tagId,readOnly:a.readOnly});k.addField({name:"selectionType",label:i18n("Uninstall Type"),
type:"Select",required:!0,value:c.selectionType,allowedValues:[{label:i18n("All Existing"),value:"ALL_EXISTING"},{label:i18n("All Selected For Process"),value:"SELECTED"}]});k.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:a.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component. This setting limits the number of processes that run simultaneously to uninstall each component. For example, if you set the maximum number of concurrent processes to 2, only two instances of a component are uninstalled at a time, even if many instances of the component are currently installed. Use -1 for unlimited.")});
k.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:a.data.failFast});k.addField({name:"preconditionScript",label:i18n("Precondition"),type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:a.data.preconditionScript,cache:a.graphEditor.cache});k.placeAt(j.containerNode);j.show()},
showFieldsForComponent:function(b,a){var d=this;b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");if(a){var e=this.getChildData(),h=this.getChildChildData();this.setDefaultNameValue(b,a.name);e=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:e.status,allowNone:!1});b.addField({name:"status",label:i18n("Remove Versions With Status"),required:!0,
widget:e},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var j;if(d.data.component&&d.data.component.id===a.id)j=h.componentProcessName;j=new c({restUrl:bootstrap.restUrl+"deploy/component/"+a.id+"/fullProcesses/false",getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},getValue:function(a){return a.name},onChange:function(a,c){l.forEach(d.extraPropertyNames,function(a){d.removePropertyField(b,a)});
d.extraPropertyNames=[];c&&l.forEach(c.unfilledProperties,function(a){var c="p_"+a.name,e=a.value,j=!1;h.properties&&h.properties[a.name]&&(e=h.properties[a.name],j=!0);var o=k.clone(a);o.name=c;o.value=e;if(a.description)o.description=a.description.escape();d.extraPropertyNames.push(c);d.addPropertyField(b,o,j,"allowFailure")})},allowNone:!1,value:j,disabled:d.readOnly});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:j},
"tagId");(config.data.systemConfiguration.enableAllowFailure||h.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:h.allowFailure},"tagId")}},fdwShowFieldsForComponent:function(b,a){var d=this;if(a){b.removeField("status");b.removeField("componentProcessName");b.removeField("allowFailure");var j=this.getChildData(),k=this.getChildChildData();this.setDefaultNameValue(b,a.name);
j=new c({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:j.status,allowNone:!1});b.addField({name:"status",label:i18n("Remove Versions With Status"),required:!0,widget:j},"tagId");l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,a)});this.extraPropertyNames=[];var t;if(d.data.component&&d.data.component.id===a.id)t=k.componentProcessName;t=new h({store:new e({data:d.graphEditor.firstDayWizardModel.getComponentProcesses(a),
idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,noDataMessage:i18n("No component processes found."),value:t});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:t},"tagId");(config.data.systemConfiguration.enableAllowFailure||k.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),
type:"Checkbox",value:k.allowFailure},"tagId")}},getDefaultName:function(b){return i18n('Uninstall: "%s"',b)}})})},"deploy/widgets/workflow/activity/TaskApprovalSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h,d,c){return e("js.deploy.widgets.task.TaskApprovalSelector",[m,l],{templateString:'<div class="roleSelector">  <div data-dojo-attach-point="roleAttach" class="teamSelectorComponent"></div>  <span data-dojo-attach-point="innerAttach"></span>  <div data-dojo-attach-point="resourceAttach" class="teamSelectorComponent"></div>  <div data-dojo-attach-point="removeAttach" style="display: inline-block; vertical-align: top"></div></div>',
postCreate:function(){var b=this;(new j({label:i18n("Remove"),onClick:function(){b.form.selectors[b.number]={};b.form.removeField(b)}})).placeAt(b.removeAttach);this.removeAttach.style.visibility="hidden";if(!b.form.initialized)b.form.selectors=[],b.form.initialized=!0;b.addField()},addField:function(){var b=this;b.resourceSelect=null;var a;b.preloading?(a=b.selector.roleId,b.roleSelect=new c({restUrl:"/security/role",onChange:function(a){""!==a&&b.changeRole(a)},allowNone:!1,value:a}),b.resourceSelect=
new c({restUrl:b.restUrl,onChange:function(a){b.changeResource(a)},noneLabel:i18n("Standard %s",b.approvalType),value:b.selector.resourceRoleId}),b.resourceSelect.number=b.number,b.resourceSelect.placeAt(b.resourceAttach),b.showRemove()):b.roleSelect=new c({restUrl:"/security/role",onChange:function(a){""!==a&&b.changeRole(a)},noneLabel:i18n("Add Role..."),value:a});b.roleSelect.number=b.number;b.roleSelect.placeAt(this.roleAttach)},showRemove:function(){this.removeAttach.style.visibility="visible";
this.innerAttach.innerHTML=i18n("for")},makeSelector:function(b,a){return{roleId:b,resourceRoleId:a}},changeRole:function(b){var a=this;if(a.number===a.form.selectors.length)a.resourceSelect=new c({restUrl:a.restUrl,onChange:function(b){a.changeResource(b)},noneLabel:i18n("Standard %s",a.approvalType)}),a.resourceSelect.number=a.number,a.resourceSelect.placeAt(a.resourceAttach),a.addRow(a.form,a.number+1,null,a.restUrl,a.approvalType),a.form.selectors.push(a.makeSelector(b,a.resourceSelect.value)),
a.roleSelect.selectWidget.removeOption(0),a.showRemove();else{var d=a.form.selectors[a.number],e=null;if(d)e=d.resourceRoleId;a.form.selectors[a.number]=a.makeSelector(b,e)}},changeResource:function(b){this.form.selectors[this.number]=this.makeSelector(this.form.selectors[this.number].roleId,b)}})})},"deploy/widgets/workflow/activity/ApplicationRunComponentProcessActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/select/WebextMultiSelect,js/webext/widgets/DialogMultiSelect,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h){return m("deploy.widgets.workflow.activity.ApplicationRunComponentProcessActivity",[e],{postCreate:function(){this.inherited(arguments);if(this.data&&this.data.componentIds)this.data.componentIds=this.data.componentIds.split(",");if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var d=this.getChildData(),c="";this.initialized&&(c+=d.name+"\n");this.data.component?(c=this.data.component.deleted?c+i18n("Component: %s [Deleted]",
d.componentName):c+i18n('Component: "%s"',d.componentName),c=this.uiData.componentProcess.deleted?c+("\n"+i18n("Process: %s [Deleted]",d.componentProcessName)):c+("\n"+i18n("Process: %s",d.componentProcessName))):c+=i18n('Component: "%s"',d.componentName)+"\n"+i18n("Process: %s",d.componentProcessName);return c},editProperties:function(d){var c=this,b=this.getChildData(),a=c.createPropertyDialog(),e=c.createPropertyForm({dialog:a,validateFields:function(a){return c.validateName(a.name)},onSubmit:function(h){d&&
d();c.initialized=!0;"true"===h.ifComponentChanges?(c.data.type="changedResourceIterator",c.data.componentIds=h.componentIds,c.data.resourceSelectionMode=h.resourceSelectionMode):c.data.type="componentEnvironmentIterator";if(h.tagId&&""!==h.tagId)c.data.tagId=h.tagId;else if(c.data.tagId)c.data.tag=void 0,c.data.tagId=void 0;c.data.runOnlyOnFirst=h.runOnlyOnFirst;c.data.maxIteration=h.maxIteration;c.data.failFast=h.failFast;c.data.preconditionScript=h.preconditionScript;var j={};l.forEach(c.extraPropertyNames,
function(a){var b=a.substring(2);j[b]=h[a]});c.data.children=[{id:b.id,name:h.name,type:"componentProcess",componentName:b.componentName,componentProcessName:b.componentProcessName,allowFailure:h.allowFailure,properties:j}];c.updateLabel();a.hide();e.destroy();a.destroy()},readOnly:c.readOnly});e.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:b.name});this.extraPropertyNames=[];l.forEach(c.extraPropertyNames,function(a){c.removePropertyField(e,a)});c.extraPropertyNames=[];
this.uiData.componentProcess&&l.forEach(this.uiData.componentProcess.unfilledProperties,function(a){var d="p_"+a.name,h=a.value,j=!1;b.properties&&b.properties[a.name]&&(h=b.properties[a.name],j=!0);var o=k.clone(a);o.name=d;o.value=h;o.description=a.description?a.description.escape():a.description;c.extraPropertyNames.push(d);c.addPropertyField(e,o,j,"allowFailure")});(config.data.systemConfiguration.enableAllowFailure||b.allowFailure)&&e.addField({name:"allowFailure",label:i18n("Ignore Failure"),
description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:b.allowFailure},"tagId");e.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:c.data.tagId,readOnly:c.readOnly});e.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:c.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component. This setting limits the number of processes that run simultaneously. For example, if you set the maximum number of concurrent processes to 2, the component process runs on only two instances of the component at a time, even if many instances of the component are installed. Use -1 for unlimited.")});
e.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:c.data.failFast});e.addField({name:"runOnlyOnFirst",label:i18n("Run on First Online Resource Only"),type:"Checkbox",description:i18n("When this is checked, this step will only use one resource. It will not run on all resources."),value:c.data.runOnlyOnFirst});e.addField({name:"preconditionScript",label:i18n("Precondition"),
type:"Text Area",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:c.data.preconditionScript});e.addField({name:"ifComponentChanges",label:i18n("Run if Components Change"),type:"Checkbox",description:i18n("When this is checked, this step will only run if certain components will cause inventory changes on a given resource."),value:"changedResourceIterator"===c.data.type,onChange:function(a){c.showComponentSelection(a,e)}});
c.showComponentSelection("changedResourceIterator"===c.data.type,e);e.placeAt(a.containerNode);a.show()},showComponentSelection:function(d,c){var b=this;c.hasField("componentIds")&&(c.removeField("componentIds"),c.removeField("resourceSelectionMode"));if(d){var a;b.data.componentIds&&(a=[],l.forEach(b.data.componentIds,function(c){a.push({id:c,name:(b.data.componentNames?b.data.componentNames[c]:c)||c})}));if("firstDayWizard"===b.graphEditor.mode){var e=new h({store:b.graphEditor.firstDayWizardModel.components,
searchAttr:"name",value:a,noDataMessage:i18n("No components found."),onAdd:function(a){if(!b.data.componentNames)b.data.componentNames={};b.data.componentNames[a.id]=a.name}});c.addField({name:"componentIds",label:i18n("Components"),widget:e})}else c.addField({name:"componentIds",label:i18n("Components"),multi:!0,type:"ApplicationComponentSelect",applicationId:b.graphEditor.application.id,value:a,idAttribute:"id",onAdd:function(a){if(!b.data.componentNames)b.data.componentNames={};b.data.componentNames[a.id]=
a.name}});c.addField({name:"resourceSelectionMode",label:i18n("Resource Selection Mode"),type:"Radio",allowedValues:[{label:i18n("Only resources where selected components are changed"),value:"ONLY_WHERE_COMPONENTS_CHANGED"},{label:i18n("All resources mapped to this process's component"),value:"ALL_MAPPED_RESOURCES"}],description:i18n("This option determines which resources the process will execute on if one of the selected components has a change detected. If the first option is selected, the operational process will only run on resources where both the operational process's component is mapped and one of the watched components is changed. If the second option is selected, the operational process will run everywhere its component is mapped if any of the watched components is changed anywhere."),
value:this.data.resourceSelectionMode||"ONLY_WHERE_COMPONENTS_CHANGED"})}}})})},"js/webext/widgets/DialogMultiSelect":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/form/Button,dijit/form/CheckBox,dijit/form/TextBox,js/util/blocker/_BlockerMixin,js/webext/widgets/Dialog,dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/_base/lang,dojo/_base/xhr".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return l([m,k,d],{templateString:'<span class="dialogMultiSelect"><div data-dojo-attach-point="fieldAttach"></div></span>',
noSelectionsLabel:null,disabled:!1,editButtonsDisplay:"",closeButtonDisplay:"",postCreate:function(){this.inherited(arguments);var a=this;this.selectedValues=[];this.set("value",this.value);this.fieldAttach.onclick=function(){a.showSelectDialog(a.selectedValues)};this.fieldAttach.className="dijitButtonNode";this.disabled?this.editButtonsDisplay="none":this.closeButtonDisplay="none"},_getItemsAttr:function(){var a=this,c=[];b.forEach(this.selectedValues,function(d){b.forEach(a.restData,function(b){a.getValue(b)===
d&&c.push(b)})});return c},_getValueAttr:function(){return this.selectedValues.join(",")},_setValueAttr:function(a){this.selectedValues=[];if(void 0!==a&&0<a.length)this.selectedValues=a.split(",");this.fieldAttach.innerHTML=0===this.selectedValues.length?this.noSelectionsLabel||i18n("Any (None Selected)"):i18n("%s selected",this.selectedValues.length)},updateCheckboxDisplay:function(c,d){var e=[];b.forEach(c,function(a){a.checkbox.get("value")&&e.push(a)});a.remove(d.domNode,"partialSelect");c.length&&
(c.length===e.length&&(d.set("label",i18n("Select None")),d.set("action","none")),0===e.length?(d.set("label",i18n("Select All")),d.set("action","all")):c.length>e.length&&(d.set("label",i18n("Select the rest")),d.set("action","all"),a.add(d.domNode,"partialSelect")),d.set("value","none"===d.get("action")))},showSelectDialog:function(d){var o=this,s=[],k=[],l=r.clone(d),m=new c({title:"",closable:!0,draggable:!1,width:300}),x=document.createElement("div");a.add(x,"dialogMultiSelectDialog");var y=
document.createElement("div");x.appendChild(y);var C=f.isBodyLtr()?{marginRight:"10px"}:{marginLeft:"10px"},C=n.create("div",{style:C},y);a.add(C,"inlineBlock");var B=new e({label:"Select All",action:"all",onClick:function(){"all"===this.action?(B.set("label",i18n("Select None")),b.forEach(k,function(a){a.checkbox.set("value",!0)})):"none"===this.action&&(B.set("label",i18n("Select All")),b.forEach(k,function(a){a.checkbox.set("value",!1)}));o.updateCheckboxDisplay(k,B)},disabled:o.disabled});o.disabled||
B.placeAt(C);var A=i18n("Enter text to filter..."),z=new h({placeholder:A,onKeyPress:function(c){if(13===c.charOrCode){var d=z.get("value").toLowerCase();0<d.length&&(k=[],b.forEach(s,function(b){-1<b.label.toLowerCase().indexOf(d)?(a.remove(b.domNode,"hidden"),k.push(b)):(a.add(b.domNode,"hidden"),util.removeFromArray(k,b))}),o.updateCheckboxDisplay(k,B))}},onFocus:function(){z.get("value")===A&&z.set("value","");z.textbox.select()}});if(o.disabled)z.domNode.style.marginLeft="20px";z.placeAt(y);
C=new j({label:i18n("Clear Filter"),onClick:function(){z.set("value","");o.filterTextSet=!0;b.forEach(s,function(b){a.remove(b.domNode,"hidden")});k=s;o.updateCheckboxDisplay(k,B)}});C.domNode.style.display=o.editButtonsDisplay;C.placeAt(y);var E=document.createElement("div");E.style.overflowY="auto";E.style.maxHeight="200px";f.isBodyLtr()?E.style.paddingRight="30px":E.style.paddingLeft="30px";x.appendChild(E);y=document.createElement("div");y.style.position="relative";x.appendChild(y);var D=document.createElement("div");
D.style.margin="5px";f.isBodyLtr()?D.style.marginLeft="26px":D.style.marginRight="26px";D.style.fontWeight="bold";D.innerHTML=i18n("%s selected",d.length);y.appendChild(D);d=new j({label:i18n("Clear Selection"),onClick:function(){b.forEach(s,function(a){a.checkbox.set("value",!1)});o.updateCheckboxDisplay(k,B)}});d.domNode.style.display=o.editButtonsDisplay;d.placeAt(y);d=new j({label:i18n("OK"),onClick:function(){o.set("value",l.join(","));o.onClose();m.hide();m.destroy()}});d.domNode.style.display=
o.editButtonsDisplay;d.placeAt(y);d=new j({label:i18n("Reset"),onClick:function(){m.hide();m.destroy();o.showSelectDialog([])}});d.domNode.style.display=o.editButtonsDisplay;d.placeAt(y);d=new j({label:i18n("Close"),onClick:function(){m.hide();m.destroy()}});d.domNode.style.display=o.closeButtonDisplay;d.placeAt(y);t.get({url:this.url,handleAs:"json",load:function(a){a=o.processData(a);o.restData=a;o.checkBoxes=[];b.forEach(a,function(a){var c=util.escape(o.getValue(a)),a=util.escape(o.getLabel(a)),
d=!1;-1<b.indexOf(l,c)&&(d=!0);var d=new e({onChange:function(a){a?l.push(c):util.removeFromArray(l,c);D.innerHTML=i18n("%s selected",l.length)},onClick:function(){o.updateCheckboxDisplay(k,B)},disabled:o.disabled,checked:d}),h=document.createElement("label");d.placeAt(h);var j=document.createElement("div");j.className="inlineBlock";j.style.verticalAlign="middle";f.isBodyLtr()?j.style.paddingLeft="5px":j.style.paddingRight="5px";j.innerHTML=a;h.appendChild(j);E.appendChild(h);a={label:a,domNode:h,
checkbox:d};s.push(a);k.push(a)});o.updateCheckboxDisplay(k,B)}});m.containerNode.appendChild(x);m.show()},getLabel:function(){return"getLabel() not specified"},getValue:function(){return"getValue() not specified"},onClose:function(){},processData:function(a){return a}})})},"deploy/widgets/workflow/activity/ManualTaskActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/DialogMultiSelect,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d){return m("deploy.widgets.workflow.activity.ManualTaskActivity",[j],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.templateName="TaskCreated",this.editProperties()},getLabel:function(){var c=i18n("Manual Task");this.initialized&&(c+="\n"+this.data.name);return c},editProperties:function(c){var b=this,a=b.createPropertyDialog(),f=b.createPropertyForm({dialog:a,validateFields:function(a){return b.validateName(a.name)},onSubmit:function(d){c&&c();
b.initialized=!0;b.data.name=d.name;b.updateLabel();b.data.commentRequired=d.commentRequired;b.data.commentPrompt=void 0!==d.commentPrompt?d.commentPrompt:"";b.data.templateName=d.templateName;b.data.userNames=d.userNames;b.data.groupNames=d.groupNames;b.data.propDefs=d.propDefs;l.forEach(b.data.propDefs,function(a){a.resolveHttpValuesUrl="rest/process/"+appState.process.id+"/"+d.name+"/propDefs/resolveHttpValues/"+a.name});a.hide();f.destroy();a.destroy()},readOnly:b.readOnly});f.addField({name:"name",
label:i18n("Name"),type:"Text",required:!0,value:b.data.name});f.addField({name:"deployingUserOnly",label:i18n("Only Allow Deploying User To Complete"),description:i18n("Only the user that starts the deployment can approve or reject this task."),type:"Checkbox",required:!1,value:b.data.deployingUserOnly,onChange:function(a){(b.data.deployingUserOnly=a)?b.removeApprovalType():b.addApprovalType()}});b.data.deployingUserOnly||(f.addField(b.generateGroupSelectField()),f.addField(b.generateUserSelectField()));
var h=new d({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return i18n(a)},getValue:function(a){return a},allowNone:!0,value:b.getTemplateName()});f.addField({name:"templateName",label:i18n("Template Name"),description:i18n("Template to use for this task."),required:!1,widget:h});h=new e({propDefs:b.data.propDefs||[],propSheetDef:{resolveHttpValuesUrl:"rest/process/"+appState.process.id+"/"+b.data.name+"/propDefs/resolveHttpValues"}});f.addField({widget:h,
label:i18n("Properties"),name:"propDefs"});f.addField({name:"commentRequired",label:i18n("Require Comment"),type:"Checkbox",required:!1,description:i18n("Whether the approving/rejecting user must enter a remark."),value:b.data.commentRequired});f.addField({name:"commentPrompt",label:i18n("Comment Prompt"),type:"Text Area",require:!1,description:i18n("The prompt to show a user before they approve/reject this task."),value:b.data.commentPrompt});b.form=f;f.placeAt(a.containerNode);a.show()},getTemplateName:function(){return void 0!==
this.data.templateName?this.data.templateName:"TaskCreated"},removeApprovalType:function(){this.form.removeField("userNames");this.form.removeField("groupNames")},addApprovalType:function(){this.form.addField(this.generateGroupSelectField(),"templateName");this.form.addField(this.generateUserSelectField(),"templateName")},generateUserSelectField:function(){var c=new h({url:bootstrap.baseUrl+"security/user",getLabel:function(b){return b.name.escape()},getValue:function(b){return b.name},value:this.data.userNames,
noSelectionsLabel:i18n("No Users Selected")});return{name:"userNames",label:i18n("Users"),description:i18n("Users who can approve or reject this task."),widget:c}},generateGroupSelectField:function(){var c=new h({url:bootstrap.baseUrl+"security/group",getLabel:function(b){return b.name.escape()},getValue:function(b){return b.name},value:this.data.groupNames,noSelectionsLabel:i18n("No Groups Selected")});return{name:"groupNames",label:i18n("Groups"),description:i18n("Groups who can approve or reject this task."),
widget:c}}})})},"deploy/widgets/workflow/activity/ResourceInventoryActivity":function(){define(["dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity","js/webext/widgets/RestSelect"],function(l,m,k,j){return l("deploy.widgets.workflow.activity.ResourceInventoryActivity",[k],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var e="";"addResourceInventory"===this.data.type?e=i18n("Add Inventory"):
"removeResourceInventory"===this.data.type&&(e=i18n("Remove Inventory"));this.data.status&&(e+="\n"+this.data.status);return e},editProperties:function(e){var h=this,d=h.createPropertyDialog(),c=h.createPropertyForm({dialog:d,onSubmit:function(a){e&&e();h.initialized=!0;h.data.status=a.status;h.updateLabel();d.hide();c.destroy();d.destroy()},readOnly:h.readOnly}),b="";h.graphEditor.component?b=bootstrap.restUrl+"deploy/status/inventoryStatuses":h.graphEditor.componentTemplate&&(b=bootstrap.restUrl+
"deploy/status/inventoryStatuses");b=new j({restUrl:b,getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},allowNone:!1,value:h.data.status,disabled:h.readOnly});c.addField({name:"status",label:i18n("Status"),required:!0,widget:b});c.placeAt(d.containerNode);d.show()}})})},"deploy/widgets/workflow/activity/PluginActivity":function(){define("dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/scripts/PostScriptEditorDialog,deploy/widgets/security/token/EditAuthTokenRestriction,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/Dialog,js/webext/widgets/DomNode,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return k("deploy.widgets.workflow.activity.PluginActivity",[b],{postCreate:function(){this.inherited(arguments);this.initialized||this.editProperties()},getLabel:function(){var a=util.applyBTD(this.data.name)+"\n"+i18n("%s (v. %s)",i18n(this.data.commandName),this.data.pluginVersion);null!==this.data.command&&void 0!==this.data.command&&0!==this.data.command.plugin.ghostedDate&&(a+="\n"+i18n("PLUGIN DELETED"));return a},editProperties:function(a){var b=this;this.data.command?
this.showPropertyForm(this.data.command,a):j.get({url:bootstrap.restUrl+"plugin/command/commandByName/"+this.data.pluginName+"/"+this.data.pluginVersion+"/"+this.data.commandName,handleAs:"json",load:function(a){b.data.command=a;b.showPropertyForm(a)}})},showPropertyForm:function(a,b){var c=this,d=c.createPropertyDialog(),e=c.createPropertyForm({dialog:d,validateFields:function(a){return c.validateName(a.name)},onSubmit:function(f){b&&b();c.initialized=!0;c.data.properties={};m.forEach(a.properties,
function(a){var b=f["p_"+a.name];void 0!==b&&(c.data.properties[a.name]=b)});if("true"===f.showHidden)c.data.showHidden=!0;c.data.name=f.name;c.updateLabel();c.data.allowFailure=f.allowFailure;c.data.useImpersonation="true"===f.useImpersonation?!0:!1;c.data.impersonationUsername=f.impersonationUsername;c.data.impersonationGroup=void 0!==f.impersonationGroup?f.impersonationGroup:"";c.data.impersonationPassword=void 0!==f.impersonationPassword?f.impersonationPassword:"";c.data.impersonationUseSudo=
"true"===f.impersonationUseSudo?!0:!1;c.data.workingDir=f.workingDir;c.data.preconditionScript=void 0!==f.preconditionScript?f.preconditionScript:"";c.data.postProcessingScript=void 0!==c.postProcSelect?c.postProcSelect.get("value"):"";if(null===c.data.postProcessingScript||void 0===c.data.postProcessingScript)c.data.postProcessingScript="";c.data.authTokenRestriction=c.authTokenRestrictionSelect.get("value");c.data.showHidden="true"===f.showHidden?!0:!1;d.hide();e.destroy();d.destroy()},readOnly:c.readOnly});
c.propertyForm=e;e.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:c.data.name});m.forEach(a.properties,function(a){var b=a.value;m.forEach(a.allowedValues,function(a){a.label=i18n(a.label)});void 0===b&&(b="");var d=!0;if(void 0!==c.data.properties){var f=c.data.properties[a.name];void 0!==f?b=f:d=!1}if(!a.hidden){if(a.type&&c.process&&"text"===a.type.toLowerCase())a.type="PropertyBox";else if(a.type&&c.process&&"textarea"===a.type.toLowerCase())a.type="PropertyArea";a={name:"p_"+
a.name,label:i18n(a.label),type:a.type,required:a.required,allowedValues:a.allowedValues,description:a.description?i18n(a.description).escape():a.description,value:b,cache:c.graphEditor.cache};c.addPropertyField(e,a,d)}});(config.data.systemConfiguration.enableAllowFailure||c.data.allowFailure)&&e.addField({name:"allowFailure",label:i18n("Allow Failure"),type:"Checkbox",required:!1,description:i18n("Allow failures to let the process run normally even if this activity fails."),value:c.data.allowFailure});
e.addField({name:"workingDir",label:i18n("Working Directory"),type:"PropertyBox",require:!1,description:i18n("An alternative absolute path to the working directory for the step. If left blank, it will use the default process-specific working directory."),value:c.data.workingDir,cache:c.graphEditor.cache});i18n("Any Prior Failure");i18n("No Prior Failures");c.createPostProcSelect(c.data.postProcessingScript);e.addField({name:"postProcessingScript",label:i18n("Post Processing Script"),description:i18n("The post processing script to use to determine pass/fail and lines of interest."),
required:!1,widget:c.postProcDomNode});var f="Text Area";c.process&&(f="PropertyArea");e.addField({name:"preconditionScript",label:i18n("Precondition"),type:f,description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:c.data.preconditionScript,cache:c.graphEditor.cache});e.addField({name:"useImpersonation",label:i18n("Use Impersonation"),type:"Checkbox",required:!1,description:i18n("Run this task as a different user."),value:c.data.useImpersonation,
onChange:function(a){a?(c.showImpersonationFields(e),e.showingImpersonation=!0):(e.showingImpersonation&&(e.removeField("impersonationUsername"),e.removeField("impersonationGroup"),e.removeField("impersonationPassword"),e.removeField("impersonationUseSudo")),e.showingImpersonation=!1)}});f=config.data.systemConfiguration.defaultAuthTokenRestriction;if(c.data.authTokenRestriction)f=c.data.authTokenRestriction;void 0===f&&(f="");c.createAuthTokenRestrictionSelect(f);e.addField({name:"authTokenRestriction",
label:i18n("Auth Token Restriction"),type:"TableFilterSelect",description:i18n("A whitelist of urls the token of this step is allowed to access."),widget:c.authTokenRestrictionNode,allowNone:!1,required:!1,formatDropDownLabel:function(a,b){a.textContent=i18n(b.name)}});c.hasHidden(e,a.properties)&&e.addField({name:"showHidden",label:i18n("Show Hidden Properties"),type:"Checkbox",required:!1,description:i18n("Modify this plugin step's hidden properties"),value:c.data.showHidden,onChange:function(b){b?
c.showHidden(e,a.properties):c.hideHidden(e,a.properties)}});if(c.data.useImpersonation)c.showImpersonationFields(e),e.showingImpersonation=!0;c.data.showHidden?c.showHidden(e,a.properties):c.hideHidden(e,a.properties);e.placeAt(d.containerNode);d.show()},hasHidden:function(a,b){var c;for(c=0;c<b.length;c++)if(b[c].hidden)return!0;return!1},hideHidden:function(a,b){var c=a.getData(),d=this.data.properties;m.forEach(b,function(b){if(b.hidden){var e=b.value;d&&void 0!==d[b.name]&&(e=d[b.name]);void 0!==
c["p_"+b.name]&&(e=c["p_"+b.name]);a.removeField("p_"+b.name);a.addField({name:"p_"+b.name,type:"Invisible",value:e})}})},showHidden:function(a,b){var c=a.getData(),d=this.data.properties;m.forEach(b,function(b){if(b.hidden){var e=b.value;d&&void 0!==d[b.name]&&(e=d[b.name]);void 0!==c["p_"+b.name]&&(e=c["p_"+b.name]);a.removeField("p_"+b.name);a.addField({name:"p_"+b.name,label:i18n(b.label),type:b.type,required:b.required,allowedValues:b.allowedValues,description:b.description?i18n(b.description).escape():
b.description,value:e})}})},showImpersonationFields:function(a){a.addField({name:"impersonationUsername",label:i18n("User"),type:"Text",required:!0,description:i18n("The username to authenticate as during impersonation."),value:this.data.impersonationUsername});a.addField({name:"impersonationPassword",label:i18n("Password"),type:"Secure",required:!1,description:i18n("The password to use during impersonation. For UNIX or Linux agents, the password option is ignored. The agent user must be able to impersonate without a password."),
value:this.data.impersonationPassword});a.addField({name:"impersonationGroup",label:i18n("Group"),type:"Text",required:!1,description:i18n("The group to authenticate as during impersonation."),value:this.data.impersonationGroup});a.addField({name:"impersonationUseSudo",label:i18n("Use Sudo"),type:"Checkbox",required:!1,description:i18n("If checked, sudo will be used around the su call to perform impersonation."),value:this.data.impersonationUseSudo})},createPostProcSelect:function(a){var b=this;this.postProcDomNode&&
this.postProcDomNode.domAttach?e.empty(this.postProcDomNode.domAttach):this.postProcDomNode=new f({});var c=e.create("div");this.postProcSelect=new n({restUrl:bootstrap.restUrl+"script/postprocessing",required:!1,noneLabel:i18n("Step Default"),onChange:function(){b.addEditButton(c)},value:a,style:{verticalAlign:"bottom"}});b.hasManageScriptPermission()&&(a={label:i18n("New"),title:i18n("Create a new post processing script"),onClick:function(){b.showEditScriptDialog()}},(new l(a)).placeAt(c));this.postProcSelect.placeAt(this.postProcDomNode.domAttach);
e.place(c,this.postProcDomNode.domAttach);b.addEditButton(c)},createAuthTokenRestrictionSelect:function(a){var b=this,c=config&&config.data&&config.data.permissions&&config.data.permissions[security.system.manageAuthTokenRestrictions];this.authTokenRestrictionNode&&this.authTokenRestrictionNode.domAttach?e.empty(this.authTokenRestrictionNode.domAttach):this.authTokenRestrictionNode=new f({});var d=e.create("div");this.authTokenRestrictionSelect=new n({restUrl:bootstrap.baseUrl+"security/authTokenRestriction",
required:!1,allowNone:!1,onChange:function(a){b.addEditRestrictionButton(d,c);b.propertyForm.setValue("authTokenRestriction",a)},value:a,style:{verticalAlign:"bottom"},getLabel:function(a){return"System Default"===a.name?i18n("System Default"):a.name}});a={label:i18n("New"),title:i18n("Create a new auth token restriction"),onClick:function(){b.showEditAuthTokenRestrictionDialog(null,c)}};a=new l(a);this.authTokenRestrictionSelect.placeAt(this.authTokenRestrictionNode.domAttach);e.place(d,this.authTokenRestrictionNode.domAttach);
b.addEditRestrictionButton(d,c);c&&a.placeAt(d)},addEditButton:function(a){var b=this;this.editButton&&this.editButton.destroy();if(this.postProcSelect&&this.postProcSelect.get("value")){var c={label:b.hasManageScriptPermission()?i18n("Edit"):i18n("View"),title:i18n("Edit the selected post processing script"),onClick:function(){b.showEditScriptDialog(b.postProcSelect._getItemAttr())}};this.editButton=new l(c);this.editButton.placeAt(a)}},addEditRestrictionButton:function(a,b){var c=this;this.editRestrictionButton&&
this.editRestrictionButton.destroy();if(this.authTokenRestrictionSelect&&this.authTokenRestrictionSelect.get("value"))this.editRestrictionButton=new l({label:b?i18n("Edit"):i18n("View"),title:i18n("Edit the selected auth token restriction"),onClick:function(){c.showEditAuthTokenRestrictionDialog(c.authTokenRestrictionSelect._getItemAttr(),b)}}),this.editRestrictionButton.placeAt(a)},showEditScriptDialog:function(a){var b=this;d({readOnly:!b.hasManageScriptPermission(),script:a,callback:function(c){b.createPostProcSelect(c?
c.id:a?a.id:void 0)}}).show()},showEditAuthTokenRestrictionDialog:function(b,d){var e=this,f=new a({title:i18n("Create Auth Token Restriction"),closable:!0,draggable:!0});(new c({authTokenRestriction:b,readOnly:!d,callback:function(a){f.hide();f.destroy();var c=null;if(a)c=a.id;if(!c&&b)c=b.id;if(!c)c=e.data.authTokenRestriction;e.createAuthTokenRestrictionSelect(c)}})).placeAt(f);f.show()},hasManageScriptPermission:function(){var a=!1;config&&config.data&&config.data.permissions&&config.data.permissions[security.system.managePostProcessingScripts]&&
(a=!0);return a}})})},"deploy/widgets/scripts/PostScriptEditorDialog":function(){define(["dojo/_base/declare","deploy/widgets/scripts/ScriptEditorDialog"],function(l,m){return l("deploy.widgets.scripts.PostScriptEditorDialog",[m],{postCreate:function(){if(!this.script&&this.source)this.script={body:this.source.body};this.script=this.script||{body:"var exit = properties.get('exitCode');\n\nscanner.register(\"regex\", function(lineNumber, line) {\n     var thing = 'do stuff';\n});\n\nif (exit == 0) {\n    properties.put('Status', 'Success');\n}\nelse {\n     properties.put('Status', 'Failure');\n}\n"};
this.description=i18n("Specify the post processing script to be run here(JavaScript).<br/> You will have access to the output properties from the step in a java.util.Properties variable name <b>properties</b>. <br>The properties will have a special property for the exit code of the process called <b>exitCode</b>.<br/>It will also have a special property for the final status called <b>Status</b>. A status of <b>Success</b> is the only status that wont result in the step failing. <br/>There will also be a variable called <b>scanner</b> which can be used to scan the output log of the step. It has these public methods:  <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register(String regex, function call) -> this will register a new function to be called whenever the regex is matched. <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addLOI(Integer lineNumber) -> this will add a specific line to the lines  of interest list. These will be highlighted in the LogViewer after the  process has finished. This is implicitly called anytime the scanner  matches a line. <br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getLinesOfInterest() -> this will return a java.util.List<Integer> that is the list of lines of interest. This can be used for removing lines when necessary.<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scan() -> this tells the scanner to go ahead and scan the log. Should be invoked after all regexs are registered.");
this.language="javascript";this.inherited(arguments)}})})},"deploy/widgets/security/token/EditAuthTokenRestriction":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/token/AuthTokenRestriction,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/DomNode,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return e("deploy.widgets.security.token.EditAuthTokenRestriction",
[m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=new n({submitUrl:bootstrap.baseUrl+"security/authTokenRestriction",readOnly:!!a.readOnly,submitMethod:"PUT",cancelLabel:i18n("Cancel"),postSubmit:function(b){void 0!==a.callback&&a.callback(b)},onCancel:function(){void 0!==a.callback&&a.callback()},addData:function(b){b.restrictions=[];b.existingId=a.authTokenRestriction?a.authTokenRestriction.id:
null;j.forEach(a.restrictions,function(a){b.restrictions.push(a.getValue())})},validateFields:function(){var b=[];j.forEach(a.restrictions,function(a){a=a.validateURI();null!==a&&0===b.length&&b.push(a)});return b}});b.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.authTokenRestriction?i18n(this.authTokenRestriction.name):null});b.addField({name:"description",label:i18n("Description"),type:"Text",value:this.authTokenRestriction?i18n(this.authTokenRestriction.description):
null});this.addLabelWidgetToForm(b);b.addField({name:"_restrictionInsert",type:"Invisible"});b.addField({name:"_buttonInsert",type:"Invisible"});this.addNewRestrictionButtonToForm(b);this.restrictions=[];if(this.authTokenRestriction){this.populateRestrictions();var c=!0;j.forEach(this.authTokenRestriction.restrictions,function(d){a.addNewRestriction(b,c,d);c=a.readOnly||!1})}else this.addNewRestriction(b,!0);b.placeAt(a.formAttach)},addLabelWidgetToForm:function(a){var b=new r({name:"",label:""}),
e=c.create("div");e.innerHTML=i18n("Method");d.add(e,"sectionLabel authTokenRestriction-mode");b.domAttach.appendChild(e);e=c.create("div");e.innerHTML=i18n("URI");d.add(e,"sectionLabel authTokenRestriction-url");b.domAttach.appendChild(e);a.addField({name:"",widget:b,description:i18n("Define a list of valid requests. Each request combines a method with a URI. A URI starts with '/' and can contain the wildcard character '*' as the last character. For example, /rest/deploy/component/my*."),tooltipIcon:"true"})},
addNewRestrictionButtonToForm:function(a){var e=this,f=new r({name:"",label:""});if(!this.readOnly){var h=c.create("div");d.add(h,"authTokenRestriction-plusIcon");f.domAttach.appendChild(h);a.addField({name:"",widget:f},"buttonInsert");b(h,"click",function(){e.addNewRestriction(a,!1)})}return f},addNewRestriction:function(b,c,d){var e=this,f=new a({restriction:d,readOnly:e.readOnly,firstInList:c,onDestroy:function(){b.removeField(this);var a=e.restrictions.indexOf(f);e.restrictions.splice(a,1)}});
this.restrictions.push(f);b.addField({widget:f},"_restrictionInsert")},populateRestrictions:function(){var a=this;h.get({url:bootstrap.baseUrl+"security/authTokenRestriction/"+this.authTokenRestriction.id,handleAs:"json",load:function(b){a.authTokenRestriction=b;if(a.isCopy)a.authTokenRestriction.id=void 0},sync:!0})}})})},"deploy/widgets/security/token/AuthTokenRestriction":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-style,dojo/on,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/FormDelegates,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return j("deploy.widgets.security.token.AuthTokenRestriction",[m,l],{templateString:'<div class="authTokenRestriction">  <div class="authTokenRestriction-mode" data-dojo-attach-point="modeAttach"></div>  <div class="authTokenRestriction-url" data-dojo-attach-point="textAttach"></div>  <div class="removeIcon" data-dojo-attach-point="closeAttach"></div></div>',postCreate:function(){var a=this,b=new f;this.select=b.getDelegate("SELECT")({allowedValues:[{value:"ALL",label:i18n("ALL")},
{value:"DELETE",label:"DELETE"},{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"}],readOnly:a.readOnly});this.select.placeAt(this.modeAttach);this.textbox=b.getDelegate("TEXT")({placeHolder:i18n("/rest/deploy/components"),readOnly:a.readOnly});this.textbox.placeAt(this.textAttach);this.restriction&&(this.select.set("value",this.restriction.verb),this.textbox.set("value",this.restriction.url));this.firstInList?h.destroy(this.closeAttach):c(this.closeAttach,"click",function(){a.onDestroy()})},
getMode:function(){return this.select.get("value")},getURI:function(){return this.textbox.get("value")},getValue:function(){return{verb:this.getMode(),url:this.getURI()}},validateURI:function(){var a=this.textbox.get("value"),b=a.indexOf("*");return-1!==b&&b<a.length-1?i18n("Error: URIs cannot use the wildcard character '*' except as the final character"):"/"!==a.substring(0,1)?i18n("Error: URIs must start with a '/'"):null}})})},"deploy/widgets/workflow/activity/ResourceDiscoveryActivity":function(){define(["dojo/_base/declare",
"deploy/widgets/resource/ResourceSelector","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l([k],{postCreate:function(){this.inherited(arguments);this.initialized||this.editProperties()},getLabel:function(){var j=this.data.name;this.initialized&&(j+="\n"+i18n("using %s",this.data.commandName));return j},editProperties:function(j){var e=this,h=e.createPropertyDialog();e.propertyForm=e.createPropertyForm({dialog:h,validateFields:function(d){return e.validateName(d.name)},addData:function(d){d.commandType=
e.data.commandType;d.actionType=e.data.actionType},onSubmit:function(d){j&&j();e.initialized=!0;e.data.name=d.name;e.data.propertyName=d.propertyName;e.data.command=d.command;e.data.resource=d.resource;e.updateLabel();h.hide();e.propertyForm.destroy();h.destroy()},readOnly:e.readOnly});e.propertyForm.addField({name:"name",label:i18n("Name"),type:"Text",required:"True",value:e.data.name});e.propertyForm.addField({name:"resource",label:i18n("Resource"),type:"Text",value:e.data.resource||"${p:resource.parent.path}",
required:!0,description:i18n("The path or ID of the resource to run the step on.")});e.propertyForm.addField({name:"command",label:i18n("Plugin Step"),type:"TableFilterSelect",required:!0,value:e.data.command,url:bootstrap.restUrl+"plugin/command",description:i18n("The plugin step to run."),defaultQuery:{filterFields:["type"],filterType_type:"eq",filterValue_type:e.data.commandType},onChange:function(d,c){e.data.commandName=c.name}});e.propertyForm.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/resource/ResourceSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/Button,dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,deploy/widgets/resource/ResourceSelectList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return e([m,l],{templateString:'<div class="resourceSelector">  <div class="inlineBlock resourceSelectorValue" data-dojo-attach-point="resourcePathAttach"></div>  <div class="inlineBlock" data-dojo-attach-point="buttonAttach"></div></div>',returnEntireObject:!1,resourceSelectTitle:i18n("Select Resource"),radioSelect:!0,postCreate:function(){var a=this;(new j({label:i18n("Set"),onClick:function(){a.showResourceSelectorDialog()}})).placeAt(a.buttonAttach);this.selectResource(this.selectedResource)},
showResourceSelectorDialog:function(){var b=this,c=new a({title:util.escape(b.resourceSelectTitle),closable:!0,draggable:!0,width:-100}),d=new f({gridRestUrl:this.url,childUrlBase:this.childUrlBase,tableConfigKey:this.tableConfigKey,radioSelect:this.radioSelect,onCancel:function(){c.hide();c.destroy()},isSelectable:function(a){return b.isSelectable(a)},onSave:function(a){var d;h.forEach(a,function(a){d=a});b.selectResource(d);if(void 0!==b.onChange)b.onChange(b._getValueAttr());c.hide();c.destroy()}});
dojo.addClass(d.domNode,"radioButtonGroup");d.placeAt(c.containerNode);c.show()},isSelectable:function(){return!0},selectResource:function(a){this.resourcePathAttach.innerHTML=a?a.path.escape():i18n("None Selected");this.selectedResource=a},_getValueAttr:function(){var a;this.selectedResource&&(a=this.returnEntireObject?this.selectedResource:this.selectedResource.id);return a},_setValueAttr:function(a){var b=this;a?d.get({url:bootstrap.restUrl+"resource/resource/"+a,handleAs:"json",load:function(a){b.selectResource(a)}}):
b.selectResource(void 0)}})})},"deploy/widgets/resource/ResourceSelectList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/form/TextBox,dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,
c,b,a,f,n,r,t,q,o,s){return d([m,l],{templateString:'<div class="resourceList"><div data-dojo-attach-point="resourcesGrid"></div><div data-dojo-attach-point="buttonBottomAttach" class="bottom-buttons"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;if(!this.gridRestUrl)this.gridRestUrl=bootstrap.restUrl+"resource/resource/tree";var d=[{name:i18n("Name"),formatter:function(a){var d=b.create("div",{"class":"inlineBlock"}),e=f.resourceNonLinkFormatter(a);c.add(e,"inlineBlock");
b.place(e,d);(new n({objectType:"Resource",item:a,allowTagAdd:!1})).placeAt(d);return d},orderField:"name",filterField:"name",filterType:"custom",getFilterFields:function(){var a=new e({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Name"),type:"like"}),b=new r({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"like"});return[a,b]},getRawValue:function(a){return a.path}},{name:i18n("Inventory"),formatter:function(a,b,c){return f.resourceInventoryFormatter(a,
c,!1)},orderField:"version",filterField:"version",filterType:"text",getRawValue:function(a){var b="None";if(a.version)b=a.version.name;return b}},{name:i18n("Description"),formatter:function(a){return b.create("div",{innerHTML:a.description?a.description.escape():"",style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"250px"}})},width:"250px",orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}}];this.grid=new s({url:this.gridRestUrl,
serverSideProcessing:!0,allowHeaderLocking:!1,xhrMethod:"POST",orderField:"name",noDataMessage:i18n("No resources have been added yet."),tableConfigKey:void 0===this.tableConfigKey?"resourceList":this.tableConfigKey,hidePagination:!0,hideExpandCollapse:!1,columns:d,selectable:!0,isSelectable:function(b){return a.isSelectable(b)},radioSelect:this.radioSelect,getChildUrl:function(b){return a.childUrlBase?a.childUrlBase+b.id:bootstrap.restUrl+"resource/resource/"+b.id+"/resources"},hasChildren:function(a){return a.hasChildren}});
this.grid.placeAt(this.resourcesGrid);d=new k({label:i18n("OK"),showTitle:!1,onClick:function(){a.onSave(a.grid.getSelectedItems())}});c.add(d.domNode,"idxButtonSpecial");d.placeAt(this.buttonBottomAttach);(new k({label:i18n("Cancel"),showTitle:!1,onClick:function(){a.onCancel()}})).placeAt(this.buttonBottomAttach)},onSave:function(){},onCancel:function(){},isSelectable:function(){return!0}})})},"deploy/widgets/tag/Tagger":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/on,dojo/mouse,dojo/aspect,dijit/form/FilteringSelect,deploy/widgets/Formatters,deploy/widgets/tag/TagSelector,deploy/widgets/tag/TagRemover,deploy/widgets/tag/TagDisplay,deploy/widgets/tag/TagSelect,js/webext/widgets/Alert,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return k([m,l],{templateString:'<div class="inlineBlock"><div data-dojo-attach-point="tagAttach" class="inlineBlock" ></div><div class="inlineBlock"><div data-dojo-attach-point="iconAttach" class="inlineBlock" ></div></div></div>',allowTagAdd:!0,postCreate:function(){this.inherited(arguments);if(!this.icon)this.icon=r.createIcon("tagIcon",i18n("Add Tag"),"glyph");this._displayTags(this.item.tags);this.allowTagAdd&&this.item.security["Edit Basic Settings"]&&
this._displayTagIcon()},showAddTagDialog:function(a){var b=this,c=new w({title:i18n("Add New Tag"),closable:!0,draggable:!0});(new t({item:a,objectType:b.objectType,callback:function(){c.hide();c.destroy();b.callback&&b.callback()}})).placeAt(c.containerNode);c.show()},showRemoveTagDialog:function(a){var b=this,c=new w({title:i18n("Remove Tag"),closable:!0,draggable:!0});(new q({ids:a,objectType:b.objectType,callback:function(){c.hide();c.destroy();b.callback&&b.callback()}})).placeAt(c.containerNode);
c.show()},resolve:function(a){return"ComponentTemplate"===a?"Component":a},showAddExistingTagSelect:function(c){var e=this;if(!c.length&&c.id){var h=c.id,c=[];c.push(h)}this.tagSelect&&this.tagSelect.destroy();this.tagSelect=new s({items:c,objectType:e.resolve(e.objectType)});this.tagSelect.placeAt(this.tagLink,"before");b(this.tagSelect.tagSelector,"change",function(a){a&&(e.tagSelect.tagSelector.get("item"),e.addTag(a,c),e.tagSelect.destroy())});b(this.tagSelect.newTag,"click",function(){e.tagSelect&&
e.tagSelect.destroy();e.showAddTagDialog(c)});b(this.tagSelect,"click",function(){e.tagSelect&&!e.tagSelect.tagSelector.focused&&e.tagSelect.destroy()});b(this.tagSelect.tagAttach,a.leave,function(){e.tagSelect&&!e.tagSelect.tagSelector.focused&&e.tagSelect.destroy()});b(this.tagSelect,"blur",function(){e.tagSelect&&e.tagSelect.destroy()});f.after(this.tagSelect,"destroy",function(){d.add(e.tagLink,"tagSelector tagIconSizer")})},addTag:function(a,b){var c=this,d={ids:b};d.name=a;j.put({url:bootstrap.restUrl+
"tag/"+c.objectType,sync:!0,putData:JSON.stringify(d),handleAs:"json",headers:{"Content-Type":"application/json"},load:function(){c.tagSelect.destroy();void 0!==c.callback&&c.callback()},error:function(a){new u({message:util.escape(a.responseText)})}})},_displayTags:function(){var a=this;(new o({readOnly:!a.allowTagAdd||!a.item.security["Edit Basic Settings"],itemId:a.item.id,objectType:a.objectType,tags:a.item.tags,disabledTags:a.item.disabledTags,callback:function(){a.callback&&a.callback()}})).placeAt(a.tagAttach)},
_displayTagIcon:function(){var a=this;this.tagLink=a.icon;d.add(a.tagLink,"tagSelector tagIconSizer");d.remove(a.tagLink,"inlineBlock");h.place(a.tagLink,this.iconAttach);b(this.tagLink,"click",function(){d.remove(a.tagLink,"tagSelector tagIconSizer");a.showAddExistingTagSelect(a.item)})}})})},"deploy/widgets/tag/TagSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/json,dojo/store/Memory,dojo/_base/xhr,dojo/dom-style,dijit/form/ComboBox,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,dojo/cookie".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return k([m,l],{templateString:'<div class="tagSelector"><div data-dojo-attach-point="formAttach" ></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.existingValues={color:"#ffffff"};if(!a.item.length&&a.item.id){var d=a.item.id;a.item=[];a.item.push(d)}var k=[];h.get({url:bootstrap.restUrl+"tag/type/"+a.objectType,sync:!0,handleAs:"json",load:function(a){k=a}});var q=new e({data:k});a.form=new f({postSubmit:function(){void 0!==a.callback&&
a.callback()},addData:function(b){b.url=bootstrap.restUrl+"tag/"+a.objectType;b.objectType=a.item.objectType;b.ids=a.item;return b},onCancel:function(){void 0!==a.callback&&a.callback()},onSubmit:function(a){h.put({url:a.url,sync:!0,putData:j.stringify(a),handleAs:"json",headers:{"Content-Type":"application/json"},error:function(a){new b({message:util.escape(a.responseText)})}})},validateFields:function(a){if(1>q.query({name:a.name}).length&&!a.color)return[i18n("You must select a color.")]}});d=
new c({store:q,searchAttr:"name",noDataMessage:i18n("No tags found."),autoComplete:!1,selectOnClick:!0,pageSize:"30",onChange:function(b){0<q.query({name:b}).length?a._removeOptionalForms():a._createOptionalForms()}});a.form.addField({name:"name",label:i18n("Name"),required:!0,widget:d});this._createOptionalForms();a.form.placeAt(a.formAttach)},_createOptionalForms:function(){if(!this.fDescription)this.fDescription=this.form.addField({name:"description",label:i18n("Description"),type:"Text"});if(!this.fColor)this.fColor=
this.form.addField({name:"color",label:i18n("Color"),type:"ColorPicker",value:this.existingValues.color})},_removeOptionalForms:function(){if(this.fDescription)this.form.removeField("description"),this.fDescription.widget.destroy(),this.fDescription=null}})})},"deploy/widgets/tag/TagRemover":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/store/Memory,dojo/json,dijit/form/FilteringSelect,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),
function(l,m,k,j,e,h,d,c,b){return k([m,l],{templateString:'<div class="tagDisplay"><div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,f=bootstrap.restUrl+"tag/"+a.objectType+"/",n=[];j.post({url:bootstrap.restUrl+"tag/"+a.objectType+"/unique",putData:h.stringify({ids:a.ids}),sync:!0,headers:{"Content-Type":"application/json"},handleAs:"json",load:function(a){n=a},error:function(a){new b({message:util.escape(a.responseText)})}});var k=
new e({data:n});a.form=new c({postSubmit:function(){void 0!==a.callback&&a.callback()},addData:function(b){b.ids=a.ids;b.objectType=a.objectType},onCancel:function(){void 0!==a.callback&&a.callback()},onSubmit:function(a){j.del({url:f+a.name,sync:!0,putData:h.stringify(a),headers:{"Content-Type":"application/json"},load:function(){},error:function(a){new b({message:util.escape(a.responseText)})}})}});k=new d({store:k,searchAttr:"name",noDataMessage:i18n("No tags found."),selectOnClick:!0});a.form.addField({name:"name",
label:i18n("Name"),required:!0,widget:k});a.form.placeAt(a.formAttach)}})})},"deploy/widgets/tag/TagSelect":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/dom-construct,dojo/dom-style,dojo/_base/declare,js/webext/widgets/FormDelegates".split(","),function(l,m,k,j,e,h){return e("deploy.widgets.tag.TagSelect",[m,l],{templateString:'<div class="tagSelect" data-dojo-attach-point="tagAttach"><div data-dojo-attach-point="tagSelectAttach" class="inlineBlock tag-select-drop-down"></div><div data-dojo-attach-point="newTagAttach" class="inlineBlock new-tag-link"></div></div>',
postCreate:function(){this.inherited(arguments);this.tagSelector=(new h).getDelegate("TagDropDown")({idProperty:"name",searchAttr:"name",selectOnClick:!0,objectType:this.objectType});this.tagSelector.placeAt(this.tagSelectAttach);this.newTag=k.create("a",{innerHTML:i18n("Create Tag"),"class":"inlineBlock linkPointer"},this.newTagAttach)}})})},"deploy/widgets/filter/TagFilter":function(){define(["dijit/form/TextBox","dojo/_base/declare","dojo/_base/array"],function(l,m,k){return m([l],{postCreate:function(){this.inherited(arguments);
if(!this.type||"like"===this.type)this._filter=this._filterLike;else if("eq"===this.type)this._filter=this._filterExact;else throw"Unknown type for TagFilter: "+this.type;},getRawValue:function(j){return k.map(j.tags,function(e){return e.name.toLowerCase()})},filterPass:function(j,e){return this._filter(this.getRawValue(j),e)},_getValuesAttr:function(){var j=this.get("value").trim().toLowerCase(),e,h=[];j?(e=j.match(/"[^"]+"/g),k.forEach(e,function(d){j=j.replace(d,"");d=d.replace('"',"").replace('"',
"").trim();""!==d&&h.push(d)}),k.forEach(j.trim().split(" "),function(d){d=d.trim();""!==d&&h.push(d)})):h=null;return h},_filterLike:function(j,e){var h=!1;k.forEach(e,function(d){-1!==k.indexOf(j,d)&&(h=!0)});return h},_filterExact:function(j,e){var h=!0;k.forEach(e,function(d){-1===k.indexOf(j,d)&&(h=!1)});return h}})})},"deploy/widgets/workflow/activity/DesiredInventoryActivity":function(){define("dojo/_base/declare,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h){return l("deploy.widgets.workflow.activity.DesiredInventoryActivity",[e],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var d="";if(this.initialized){if(this.data.children&&1===this.data.children.length){var c=this.data.children[0];"addDesiredInventory"===c.type?d+=i18n("Inventory: Add Versions"):"removeDesiredInventory"===c.type&&("uninstallAllVersionsIterator"===this.data.type?
"ALL_EXISTING"===this.data.selectionType?d+=i18n("Inventory: Remove All Existing"):"SELECTED"===this.data.selectionType&&(d+=i18n("Inventory: Remove Selected")):"uninstallVersionDiff"===this.data.type&&(d+=i18n("Inventory: Remove Undesired")));d+="\n"+i18n("%s on %s",c.status,c.component.name)}}else d+=i18n("Component Inventory Update");return d},editProperties:function(d){var c=this,b,a=c.createPropertyDialog(),e=c.createPropertyForm({dialog:a,onSubmit:function(h){d&&d();c.initialized=!0;c.data=
{name:c.data.name};c.data.component=b.get("item");c.data.componentName=c.data.component.name;if(h.tagId&&""!==h.tagId)c.data.tagId=h.tagId;else if(c.data.tagId)c.data.tag=void 0,c.data.tagId=void 0;if("addDesiredInventory"===h.type)c.data.type="allVersionsIterator",c.data.children=[{type:"addDesiredInventory",name:util.randomString(30),status:h.status,componentName:c.data.component.name,component:b.get("item")}];else if("removeDesiredInventory"===h.type){c.data.status=h.status;if("uninstallAll"===
h.iteratorType)c.data.type="uninstallAllVersionsIterator",c.data.selectionType="ALL_EXISTING";else if("uninstallSelected"===h.iteratorType)c.data.type="uninstallAllVersionsIterator",c.data.selectionType="SELECTED";else if("rollback"===h.iteratorType)c.data.type="uninstallVersionDiff",c.data.selectionType="UNDESIRED";c.data.children=[{type:"removeDesiredInventory",name:util.randomString(30),status:h.status,componentName:c.data.component.name,component:b.get("item")}]}c.updateLabel();a.hide();e.destroy();
a.destroy()},readOnly:c.readOnly});c.selectedComponent=c.data.component;if("firstDayWizard"===c.graphEditor.mode){var h=new j({store:c.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!c.data.component?void 0:c.data.component.id,noDataMessage:i18n("No components found."),autoComplete:!1,selectOnClick:!0,onSetItem:function(a,b){c.selectedComponent=b}});b=e.addField({name:"component",label:i18n("Component"),required:!0,widget:h}).widget}else b=e.addField({name:"component",label:i18n("Component"),
required:!0,type:"ApplicationComponentSelect",applicationId:c.graphEditor.application.id,value:!c.data.component?void 0:c.data.component.id,disabled:c.readOnly,onSetItem:function(a,b){c.selectedComponent=b}}).widget;e.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:c.data.tagId,readOnly:c.readOnly});h={};c.data.children&&1===c.data.children.length&&(h=c.data.children[0]);e.addField({name:"type",label:i18n("Action"),type:"Select",required:!0,
value:h.type,allowedValues:[{label:i18n("Add Desired Inventory"),value:"addDesiredInventory"},{label:i18n("Remove Desired Inventory"),value:"removeDesiredInventory"}],onChange:function(a){c.showTypeFields(a,e)}});h.type&&c.showTypeFields(h.type,e);e.placeAt(a.containerNode);a.show()},showTypeFields:function(d,c){var b={};if(this.data.children&&1===this.data.children.length)b=this.data;c.removeField("iteratorType");c.removeField("status");if("removeDesiredInventory"===d){var a;"uninstallAllVersionsIterator"===
b.type&&"ALL_EXISTING"===b.selectionType?a="uninstallAll":"uninstallAllVersionsIterator"===b.type&&"SELECTED"===b.selectionType?a="uninstallSelected":"uninstallVersionDiff"===b.type&&"UNDESIRED"===b.selectionType&&(a="rollback");c.addField({name:"iteratorType",label:i18n("For Which Versions?"),type:"Select",required:!0,value:a,allowedValues:[{label:i18n("All Existing (Complete Uninstall)"),value:"uninstallAll"},{label:i18n("All Selected (Manual Uninstall)"),value:"uninstallSelected"},{label:i18n("All Not in Snapshot (Rollback)"),
value:"rollback"}]})}if("addDesiredInventory"===d||"removeDesiredInventory"===d)b=new h({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},getStyle:function(a){return{backgroundColor:a.color}},value:b.status,allowNone:!1}),c.addField({name:"status",label:i18n("Status"),required:!0,widget:b})}})})},"deploy/widgets/workflow/activity/RunProcessActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,js/webext/widgets/Alert,js/webext/widgets/DomNode,deploy/widgets/property/PropertyTextareaBox".split(","),
function(l,m,k,j,e,h,d,c,b,a){return m("deploy.widgets.workflow.activity.RunProcessActivity",[d],{postCreate:function(){this.inherited(arguments);this.initialized||this.editProperties()},getLabel:function(){var a="";return a=this.initialized?a+this.getDisplayName(this.data.name,this.data.processName,i18n("Run")):a+i18n("Run Generic Process")},editProperties:function(a){var d=this;d.extraPropertyNames=[];var e=d.createPropertyDialog(),h=d.createPropertyForm({dialog:e,validateFields:function(a){return d.validateName(a.name)},
onSubmit:function(b){a&&a();d.initialized=!0;d.data.name=b.name;d.data.processName=b.processName;d.data.resourcePath=b.resourcePath;d.data.properties={};l.forEach(d.extraPropertyNames,function(a){var c=a.substring(2);d.data.properties[c]=b[a]});d.updateLabel();e.hide();h.destroy();e.destroy()},readOnly:d.readOnly});h.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:d.data.name});var j=new c({restUrl:bootstrap.restUrl+"process",getValue:function(a){return a.name},autoSelectFirst:!1,
onChange:function(a,c){d.hideAbsentPropertiesMessage(h);l.forEach(d.extraPropertyNames,function(a){h.removeField(a)});d.extraPropertyNames=[];a&&(d.graphEditor.process&&a===d.graphEditor.process.name?new b({message:i18n("This will call the current process and risk the creation of an infinite loop. Are you sure you want this process to run itself?")}):c&&d.setDefaultNameValue(h,c.name),c&&c.id?k.get({url:bootstrap.restUrl+"process/"+c.id+"/-1",handleAs:"json",load:function(a){d.showProcessFields(h,
a)}}):d.showAbsentPropertiesMessage(h))},allowNone:!1,value:d.data.processName,disabled:d.readOnly});h.addField({name:"processName",label:i18n("Process"),required:!0,description:i18n("The process to run."),widget:j});j=d.data.resourcePath||"";this.initialized||(j="${p:resource.path}");h.addField({name:"resourcePath",label:i18n("Resource Path"),type:"PropertyBox",required:!1,description:i18n("The path to the resource to execute this process on. Leave this blank to use the process's default resource."),
value:j,cache:d.graphEditor.cache});h.placeAt(e.containerNode);e.show()},showProcessFields:function(a,b){var c=this;l.forEach(b.propDefs,function(b){var d=null;c.data.properties&&(d=c.data.properties[b.name]);if(d)b.value=d;if(b.type&&"text"===b.type.toLowerCase())b.type="PropertyBox";else if(b.type&&"text area"===b.type.toLowerCase())b.type="PropertyArea";b.cache=c.graphEditor.cache;b.name="p_"+b.name;a.addField(b);c.extraPropertyNames.push(b.name)})},showAbsentPropertiesMessage:function(b){this.absentPropsMessageDom=
new a({name:"",label:""});var c=e.create("div");c.innerHTML=i18n("Any existing property fields have been omitted due to insufficient permissions to the process.");j.add(c,"processFormMessage");this.absentPropsMessageDom.domAttach.appendChild(c);b.addField({name:"",widget:this.absentPropsMessageDom})},hideAbsentPropertiesMessage:function(a){a.hasField(this.absentPropsMessageDom)&&a.removeField(this.absentPropsMessageDom)},getDefaultName:function(a){return i18n('Run Generic: "%s"',a)}})})},"deploy/widgets/workflow/activity/ComponentRunComponentProcessActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/store/Memory,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,js/webext/widgets/select/WebextSelect,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b){return m("deploy.widgets.workflow.activity.ComponentRunComponentProcessActivity",[h],{postCreate:function(){this.inherited(arguments);this.initialized||this.editProperties()},getLabel:function(){var a="";return a=this.initialized?a+this.getDisplayName(this.data.name,this.data.componentProcessName,i18n("Run")):a+i18n("Run Another Process")},editProperties:function(a){var f=this,h=f.createPropertyDialog(),j=f.createPropertyForm({dialog:h,validateFields:function(a){return f.validateName(a.name)},
onSubmit:function(b){a&&a();f.initialized=!0;f.data.type="componentProcess";f.data.name=b.name;f.data.allowFailure=b.allowFailure;if(f.graphEditor.component)f.data.componentName=f.graphEditor.component.name;else if(f.graphEditor.componentTemplate)f.data.componentTemplateName=f.graphEditor.componentTemplate.name;f.data.componentProcessName=b.componentProcessName;var c={};l.forEach(f.extraPropertyNames,function(a){var d=a.substring(2);c[d]=b[a]});f.data.properties=c;f.updateLabel();h.hide();j.destroy();
h.destroy()},readOnly:f.readOnly});j.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:f.data.name});var t=null;f.graphEditor.component?t=bootstrap.restUrl+"deploy/component/"+f.graphEditor.component.id+"/fullProcesses/false":f.graphEditor.componentTemplate&&(t=bootstrap.restUrl+"deploy/componentTemplate/"+f.graphEditor.componentTemplate.id+"/-1/fullProcesses/false");t="firstDayWizard"===f.graphEditor.mode?new c({store:new e({data:f.graphEditor.firstDayWizardModel.getComponentProcesses(f.graphEditor.component),
idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,value:f.data.componentProcessName,onSetItem:function(a,c){c.name===f.graphEditor.componentProcess.name?new b({message:i18n("This will call the current process and risk the creation of an infinite loop. Are you sure you want this process to run itself?")}):f.setDefaultNameValue(j,c.name)}}):new d({restUrl:t,getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},autoSelectFirst:!1,
getValue:function(a){return a.name},onChange:function(a,c){l.forEach(f.extraPropertyNames,function(a){f.removePropertyField(j,a)});f.extraPropertyNames=[];c&&(c.name===f.graphEditor.componentProcess.name?new b({message:i18n("This will call the current process and risk the creation of an infinite loop. Are you sure you want this process to run itself?")}):f.setDefaultNameValue(j,c.name),l.forEach(c.unfilledProperties,function(a){var b="p_"+a.name,c=a.value,d=!1;f.data.properties&&f.data.properties[a.name]&&
(c=f.data.properties[a.name],d=!0);var e=k.clone(a);e.name=b;e.value=c;if(a.description)e.description=a.description.escape();f.extraPropertyNames.push(b);f.addPropertyField(j,e,d,"allowFailure")}))},allowNone:!1,value:f.data.componentProcessName,disabled:f.readOnly});j.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:t},"allowFailure");(config.data.systemConfiguration.enableAllowFailure||f.data.allowFailure)&&j.addField({name:"allowFailure",
label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:f.data.allowFailure});j.placeAt(h.containerNode);h.show()},getDefaultName:function(a){return i18n('Run: "%s"',a)}})})},"deploy/widgets/workflow/activity/EachAgentIteratorActivity":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k,j){return m([j],{postCreate:function(){this.inherited(arguments);
this.isContainer=!0;this.initialized||this.editProperties()},editProperties:function(){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,validateFields:function(b){var a=e.validateName(b.name);"0"===b.maxIteration.trim()&&a.push(i18n("Max Concurrent Agents cannot be 0."));return a},onSubmit:function(b){e.initialized=!0;e.data={name:b.name,type:"eachAgentIterator",maxIteration:b.maxIteration};if(b.tagIds&&0!==b.tagIds.length)e.data.tags=e.tempTags;else if(e.data.tagIds)e.data.tags=
void 0;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly});d.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:e.data.name});d.addField({name:"tagIds",label:i18n("Limit to Resource Tags"),type:"TagMultiDropDown",objectType:"Resource",value:e.data.tags,readOnly:e.readOnly,description:i18n("Resource Tags to limit this process to. Process will be eligible for running on any resource with ANY of these tags."),onAdd:function(){e.tempTags=this.items},onRemove:function(){e.tempTags=
this.items}});var c=e.data.maxIteration;c||(c=-1);d.addField({name:"maxIteration",label:i18n("Max Concurrent Agents"),type:"Text",required:!0,value:c,description:i18n("The maximum number of agents to run this step at one time.")});d.placeAt(h.containerNode);h.show()},getLabel:function(){return this.data.name?i18n("%s\n(For Every Agent)",this.data.name):i18n("For Every Agent...")},getStyle:function(){return"parallelStyle"},canEdit:function(){return!0},canDelete:function(){return!0},canCopy:function(){return!1}})})},
"deploy/widgets/workflow/activity/ApplicationManualTaskActivity":function(){define("dojo/_base/array,dojo/_base/xhr,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/RestSelect,./TaskApprovalSelector".split(","),function(l,m,k,j,e,h,d,c){return k("deploy.widgets.workflow.activity.ApplicationManualTaskActivity",[e],{postCreate:function(){var b=this;this.inherited(arguments);config.data.extraFormDelegates.push({name:"TaskApprovalSelector",
delegateFunction:function(a){var d=!1;if(null!==a.selector)d=a.form.initialized=!0;return new c({noneLabel:a.noneLabel,name:a.name,addRow:b.addRow,form:a.form,number:a.number,restUrl:a.restUrl,preloading:d,selector:a.selector,approvalType:a.approvalType})}});this.initialized||this.editProperties()},getLabel:function(){var b=i18n("Manual Task");this.initialized&&(b+="\n"+this.data.name);return b},editProperties:function(b){var a=this;a.selectors=[];a.data.roleRestrictionData?(l.forEach(a.data.roleRestrictionData.roleRestrictions,
function(b){a.selectors.push(b)}),a.approvalType=a.data.roleRestrictionData.contextType):a.data.roleRestrictionData={roleRestrictions:[]};if(!a.approvalType)a.approvalType="ANY";var c=a.createPropertyDialog(),e=a.createPropertyForm({dialog:c,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(d){b&&b();a.initialized=!0;a.data.name=d.name;a.data.templateName=d.templateName;a.updateLabel();a.data.taskDefinitionId=d.taskDefinitionId;a.data.roleRestrictionData.roleRestrictions=
[];l.forEach(a.form.selectors,function(b){b.roleId&&a.data.roleRestrictionData.roleRestrictions.push(b)});a.selectors=a.data.roleRestrictionData.roleRestrictions;a.data.roleRestrictionData.contextType=d.approvalType;if("ANY"===a.data.roleRestrictionData.contextType)a.data.roleRestrictionData.contextType=null;a.approvalType=a.data.roleRestrictionData.contextType;a.data.propDefs=d.propDefs;l.forEach(a.data.propDefs,function(a){a.resolveHttpValuesUrl="rest/process/"+appState.applicationProcess.id+"/"+
d.name+"/propDefs/resolveHttpValues/"+a.name});c.hide();e.destroy();c.destroy()},readOnly:a.readOnly});e.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:a.data.name});var j=new d({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return i18n(a)},getValue:function(a){return a},allowNone:!0,value:a.getTemplateName(),disabled:a.readOnly});e.addField({name:"templateName",label:i18n("Notification Template"),required:!1,widget:j});j=new h({propDefs:a.data.propDefs||
[],propSheetDef:{resolveHttpValuesUrl:"rest/process/"+appState.applicationProcess.id+"/"+a.data.name+"/propDefs/resolveHttpValues"}});e.addField({widget:j,label:i18n("Properties"),name:"propDefs"});e.addField({name:"deployingUserOnly",label:i18n("Only Allow Deploying User To Complete"),description:i18n("Only the user that starts the deployment can approve or reject this task."),type:"Checkbox",required:!1,value:a.data.deployingUserOnly,onChange:function(b){(a.data.deployingUserOnly=b)?a.removeApprovalType():
a.addApprovalType()}});a.data.deployingUserOnly||e.addField(a.generateApprovalTypeField());a.form=e;a.form.selectors=a.selectors;a.populateForm(a.approvalType);e.placeAt(c.containerNode);c.show()},populateForm:function(b){this.removeAllSelectors();if(this.approvalType===b)this.form.selectors=this.selectors;"ANY"!==b&&("ENVIRONMENT"===b?this.addSelectorData("/security/resourceType/Environment/resourceRoles",i18n("Environment")):"APPLICATION"===b&&this.addSelectorData("/security/resourceType/Application/resourceRoles",
i18n("Application")))},addRow:function(b,a,c,d,e){b.addField({name:"selector",label:"",type:"TaskApprovalSelector",form:b,number:a,selector:c,restUrl:d,approvalType:e})},removeAllSelectors:function(){for(;this.form.hasField("selector");)this.form.removeField("selector");this.form.selectors=[]},addSelectorData:function(b,a){var c=this,d=0;l.forEach(c.form.selectors,function(e){c.addRow(c.form,d,e,b,a);d++});c.addRow(c.form,d,null,b,a)},getTemplateName:function(){return void 0!==this.data.templateName?
this.data.templateName:"TaskCreated"},removeApprovalType:function(){for(this.form.removeField("approvalType");this.form.hasField("selector");)this.form.removeField("selector")},addApprovalType:function(){this.form.addField(this.generateApprovalTypeField());this.populateForm(this.approvalType)},generateApprovalTypeField:function(){var b=this;return{name:"approvalType",label:i18n("Who can approve this task"),type:"Select",value:b.approvalType,allowedValues:[{label:i18n("Any User"),value:"ANY"},{label:i18n("Role Member By Environment"),
value:"ENVIRONMENT"},{label:i18n("Role Member By Application"),value:"APPLICATION"}],onChange:function(a){b.populateForm(a)}}}})})},"deploy/widgets/workflow/activity/AcquireLockActivity":function(){define(["dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l("deploy.widgets.workflow.activity.AcquireLockActivity",[k],{postCreate:function(){this.inherited(arguments);if(!this.initialized){this.data.name=util.randomString(30);if(!this.data.lockName)this.data.lockName=
appState.applicationProcess?"${p:application.name}-${p:applicationProcess.name}-${p:environment.name}":"${p:component.name}-${p:componentProcess.name}-${p:resource.name}";this.editProperties()}},getLabel:function(){var j="",j=i18n("Acquire Lock");if(this.data.lockName){var e=this.data.lockName;22<e.length&&(e=e.substring(0,20)+"...");j+="\n"+e}return j},editProperties:function(j){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,onSubmit:function(b){j&&j();e.initialized=!0;e.data.lockName=
b.lockName;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly}),c="";if(this.data.lockName)c=this.data.lockName;d.addField({name:"lockName",label:i18n("Lock Name"),type:"PropertyBox",required:!0,value:c,cache:e.graphEditor.cache});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/workflow/activity/EachTouchedResourceActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/DialogMultiSelect,js/webext/widgets/RestSelect,js/webext/widgets/DomNode,deploy/widgets/property/PropertyTextareaBox".split(","),
function(l,m,k,j,e,h,d,c,b,a){return m("deploy.widgets.workflow.activity.EachTouchedResourceActivity",[d],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var a="";if(this.initialized)var b=this.getChildData(),a=a+this.getDisplayName(b.name,b.processName,i18n("Run"));else a+=i18n("Run Generic Process");return a+="\n"+i18n("All Affected Resources")},showProcessFields:function(a,b){var c=this;this.setDefaultNameValue(a,
b.name);l.forEach(b.propDefs,function(b){var d=null;c.data.properties&&(d=c.data.properties[b.name]);if(d)b.value=d;b.name="p_"+b.name;a.addField(b);c.extraPropertyNames.push(b.name)})},editProperties:function(a){var c=this,d=this.getChildData(),e=c.createPropertyDialog(),h=c.createPropertyForm({dialog:e,validateFields:function(a){return c.validateName(a.name)},onSubmit:function(b){a&&a();c.initialized=!0;c.data.name=util.randomString(30);c.data.type="touchedResourceIterator";c.data.maxIteration=
b.maxIteration;c.data.failFast=b.failFast;c.data.preconditionScript=b.preconditionScript;c.data.properties={};c.data.children=[{name:b.name,type:"runProcess",processName:b.processName,allowFailure:b.allowFailure}];l.forEach(c.extraPropertyNames,function(a){var d=a.substring(2);c.data.properties[d]=b[a]});c.updateLabel();e.hide();h.destroy();e.destroy()},readOnly:c.readOnly});h.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:d.name});var j=new b({restUrl:bootstrap.restUrl+"process",
getValue:function(a){return a.name},onChange:function(a,b){c.hideAbsentPropertiesMessage(h);l.forEach(c.extraPropertyNames,function(a){h.removeField(a)});c.extraPropertyNames=[];b?k.get({url:bootstrap.restUrl+"process/"+b.id+"/-1",handleAs:"json",load:function(a){c.showProcessFields(h,a)}}):c.showAbsentPropertiesMessage(h)},allowNone:!1,value:d.processName,disabled:c.readOnly});h.addField({name:"processName",label:i18n("Process"),required:!0,description:i18n("The process to run."),widget:j});(config.data.systemConfiguration.enableAllowFailure||
d.allowFailure)&&h.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:d.allowFailure},"tagId");h.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",required:!0,textDir:"ltr",value:c.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run at the same time. For example, if you set the maximum number of concurrent processes to 2, the generic process runs on only two resources at a time. Use -1 for unlimited.")});
h.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:c.data.failFast});h.addField({name:"preconditionScript",label:i18n("Precondition"),type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:c.data.preconditionScript,cache:c.graphEditor.cache});h.placeAt(e.containerNode);e.show()},
showAbsentPropertiesMessage:function(b){this.absentPropsMessageDom=new a({name:"",label:""});var c=e.create("div");c.innerHTML=i18n("Any existing property fields have been omitted due to insufficient permissions to the process.");j.add(c,"processFormMessage");this.absentPropsMessageDom.domAttach.appendChild(c);b.addField({name:"",widget:this.absentPropsMessageDom})},hideAbsentPropertiesMessage:function(a){a.hasField(this.absentPropsMessageDom)&&a.removeField(this.absentPropsMessageDom)},getDefaultName:function(a){return i18n('Run Generic: "%s"',
a)}})})},"deploy/widgets/workflow/activity/ComponentManualTaskActivity":function(){define("dojo/_base/array,dojo/_base/xhr,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/RestSelect,./TaskApprovalSelector".split(","),function(l,m,k,j,e,h,d,c){return k([e],{postCreate:function(){var b=this;this.inherited(arguments);config.data.extraFormDelegates.push({name:"TaskApprovalSelector",delegateFunction:function(a){var d=!1;if(null!==
a.selector)d=a.form.initialized=!0;return new c({noneLabel:a.noneLabel,name:a.name,addRow:b.addRow,form:a.form,number:a.number,restUrl:a.restUrl,preloading:d,selector:a.selector,approvalType:a.approvalType})}});this.initialized||this.editProperties()},getLabel:function(){var b=i18n("Manual Task");this.initialized&&(b+="\n"+this.data.name);return b},editProperties:function(b){var a=this;a.selectors=[];a.data.roleRestrictionData?(l.forEach(a.data.roleRestrictionData.roleRestrictions,function(b){a.selectors.push(b)}),
a.approvalType=a.data.roleRestrictionData.contextType):a.data.roleRestrictionData={roleRestrictions:[]};if(!a.approvalType)a.approvalType="ANY";var c=a.createPropertyDialog(),e=a.createPropertyForm({dialog:c,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(d){b&&b();a.initialized=!0;a.data.name=d.name;a.data.templateName=d.templateName;a.updateLabel();a.data.taskDefinitionId=d.taskDefinitionId;a.data.roleRestrictionData.roleRestrictions=[];l.forEach(a.form.selectors,function(b){b.roleId&&
a.data.roleRestrictionData.roleRestrictions.push(b)});a.selectors=a.data.roleRestrictionData.roleRestrictions;a.data.roleRestrictionData.contextType=d.approvalType;if("ANY"===a.data.roleRestrictionData.contextType)a.data.roleRestrictionData.contextType=null;a.approvalType=a.data.roleRestrictionData.contextType;a.data.propDefs=d.propDefs;l.forEach(a.data.propDefs,function(a){a.resolveHttpValuesUrl="rest/process/"+appState.componentProcess.id+"/"+d.name+"/propDefs/resolveHttpValues/"+a.name});c.hide();
e.destroy();c.destroy()},readOnly:a.readOnly});e.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:a.data.name});var j=new d({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return i18n(a)},getValue:function(a){return a},allowNone:!0,value:a.getTemplateName(),disabled:a.readOnly});e.addField({name:"templateName",label:i18n("Notification Template"),required:!1,widget:j});j=new h({propDefs:a.data.propDefs||[],propSheetDef:{resolveHttpValuesUrl:"rest/process/"+
appState.componentProcess.id+"/"+a.data.name+"/propDefs/resolveHttpValues"}});e.addField({widget:j,label:i18n("Properties"),name:"propDefs"});e.addField({name:"deployingUserOnly",label:i18n("Only Allow Deploying User To Complete"),description:i18n("Only the user that starts the deployment can approve or reject this task."),type:"Checkbox",required:!1,value:a.data.deployingUserOnly,onChange:function(b){(a.data.deployingUserOnly=b)?a.removeApprovalType():a.addApprovalType()}});a.data.deployingUserOnly||
e.addField(a.generateApprovalTypeField());a.form=e;a.form.selectors=a.selectors;a.populateForm(a.approvalType);e.placeAt(c.containerNode);c.show()},populateForm:function(b){this.removeAllSelectors();if(this.approvalType===b)this.form.selectors=this.selectors;"ANY"!==b&&("ENVIRONMENT"===b?this.addSelectorData("/security/resourceType/Environment/resourceRoles",i18n("Environment")):"APPLICATION"===b?this.addSelectorData("/security/resourceType/Application/resourceRoles",i18n("Application")):"COMPONENT"===
b&&this.addSelectorData("/security/resourceType/Component/resourceRoles",i18n("Component")))},addRow:function(b,a,c,d,e){b.addField({name:"selector",label:"",type:"TaskApprovalSelector",form:b,number:a,selector:c,restUrl:d,approvalType:e})},removeAllSelectors:function(){for(;this.form.hasField("selector");)this.form.removeField("selector");this.form.selectors=[]},addSelectorData:function(b,a){var c=this,d=0;l.forEach(c.form.selectors,function(e){c.addRow(c.form,d,e,b,a);d++});c.addRow(c.form,d,null,
b,a)},getTemplateName:function(){return void 0!==this.data.templateName?this.data.templateName:"TaskCreated"},removeApprovalType:function(){for(this.form.removeField("approvalType");this.form.hasField("selector");)this.form.removeField("selector")},addApprovalType:function(){this.form.addField(this.generateApprovalTypeField());this.populateForm(this.approvalType)},generateApprovalTypeField:function(){var b=this;return{name:"approvalType",label:i18n("Who can approve this task"),type:"Select",value:b.approvalType,
allowedValues:[{label:i18n("Any User"),value:"ANY"},{label:i18n("Role Member By Environment"),value:"ENVIRONMENT"},{label:i18n("Role Member By Application"),value:"APPLICATION"},{label:i18n("Role Member By Component"),value:"COMPONENT"}],onChange:function(a){b.populateForm(a)}}}})})},"deploy/widgets/workflow/activity/EachTagIteratorActivity":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k,j){return m([j],{postCreate:function(){this.inherited(arguments);
this.isContainer=!0},getLabel:function(){return this.data.name?i18n("%s\n(For Each Tag)",this.data.name):i18n("For Each Tag...")},getStyle:function(){return"parallelStyle"},editProperties:function(e){var h=this;this.getChildData();var d=h.createPropertyDialog(),c=h.createPropertyForm({dialog:d,validateFields:function(a){var b=h.validateName(a.name);"0"===a.maxIteration.trim()&&b.push(i18n("Max Concurrent Tags cannot be 0."));return b},onSubmit:function(a){e&&e();h.initialized=!0;h.data={name:a.name,
type:"eachTagIterator",maxIteration:a.maxIteration};if(a.tags&&""!==a.tags)h.data.tags=h.tempTags;else if(h.data.tags)h.data.tags=void 0;h.updateLabel();d.hide();c.destroy();d.destroy()}});c.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:h.data.name});c.addField({name:"tags",label:i18n("Tags"),type:"OrderedTagMultiSelect",required:!0,url:bootstrap.restUrl+"tag/type/Resource",value:h.data.tags,readOnly:h.readOnly,description:i18n("Ordered List of Resource Tags. This process will only run on resources with the given tag for that iteration. This can be overriden at request time. Only tags selected here will be available at request time."),
onReorder:function(){h.tempTags=this.items},onAdd:function(){h.tempTags=this.items},onRemove:function(){h.tempTags=this.items}});var b=h.data.maxIteration;b||(b=1);c.addField({name:"maxIteration",label:i18n("Max Concurrent Tags"),type:"Text",required:!0,value:b,description:i18n("The maximum number of tags to run this step for at one time.")});c.placeAt(d.containerNode);d.show()},canEdit:function(){return!0},canDelete:function(){return!0},canCopy:function(){return!1}})})},"deploy/widgets/workflow/activity/EachVersionComponentActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect,deploy/widgets/property/PropertyTextareaBox".split(","),
function(l,m,k,j,e,h,d,c){return m("deploy.widgets.workflow.activity.EachVersionComponentActivity",[d],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var b="";if(this.initialized){var a=this.getChildChildData();a.component&&a.component.deleted?b+=a.name+"\n"+i18n("(Deleted Component)"):(b+=this.getDisplayName(a.name,a.componentName,a.componentName,i18n("Each Version for %s",a.componentName)),a.componentProcessName&&
(b+="\n"+i18n("Run: %s",a.componentProcessName)))}else b+=i18n("Run Process For Each Version");return b},editProperties:function(b){var a=this;this.getChildData();var c=this.getChildChildData(),d,e=a.createPropertyDialog(),j=a.createPropertyForm({dialog:e,validateFields:function(b){return a.validateName(b.name)},onSubmit:function(c){b&&b();a.initialized=!0;a.data={name:a.data.name,type:"componentEnvironmentIterator"};a.data.component=d.get("item");a.data.componentName=a.data.component.name;if(c.tagId&&
""!==c.tagId)a.data.tagId=c.tagId;else if(a.data.tagId)a.data.tag=void 0,a.data.tagId=void 0;a.data.runOnlyOnFirst=c.runOnlyOnFirst;a.data.maxIteration=c.maxIteration;a.data.failFast=c.failFast;a.data.preconditionScript=c.preconditionScript;var f={};l.forEach(a.extraPropertyNames,function(a){var b=a.substring(2);f[b]=c[a]});a.data.children=[{name:util.randomString(30),type:"allVersionsIterator",componentName:a.data.component.name,children:[{name:c.name,type:"componentProcess",componentName:a.data.component.name,
componentProcessName:c.componentProcessName,allowFailure:c.allowFailure,properties:f}]}];a.updateLabel();e.hide();j.destroy();e.destroy()},readOnly:a.readOnly});j.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:c.name});"firstDayWizard"===a.graphEditor.mode?(c=new h({store:a.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!a.data.component?void 0:a.data.component.id,noDataMessage:i18n("No components found."),autoComplete:!1,selectOnClick:!0,onSetItem:function(b,
c){a.fdwShowFieldsForComponent(j,c)}}),d=j.addField({name:"component",label:i18n("Component"),required:!0,widget:c}).widget):d=j.addField({name:"component",label:i18n("Component"),required:!0,type:"ApplicationComponentSelect",applicationId:a.graphEditor.application.id,value:!a.data.component?void 0:a.data.component.id,disabled:a.readOnly,onSetItem:function(b,c){a.showFieldsForComponent(j,c)}}).widget;j.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",
value:a.data.tagId,readOnly:a.readOnly});j.addField({name:"maxIteration",label:i18n("Maximum number of concurrent processes"),type:"Text",textDir:"ltr",required:!0,value:a.data.maxIteration||-1,description:i18n("The maximum number of concurrent processes to run, per component. This setting limits the number of processes that run simultaneously. For example, if you set the maximum number of concurrent processes to 2, the component process runs on only two instances of the component at a time, even if many instances of the component are installed. Use -1 for unlimited.")});
j.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),value:a.data.failFast});j.addField({name:"runOnlyOnFirst",label:i18n("Run on First Online Resource Only"),type:"Checkbox",description:i18n("When this is checked, this step will only use one resource. It will not run on all resources."),value:a.data.runOnlyOnFirst});j.addField({name:"preconditionScript",label:i18n("Precondition"),
type:"PropertyArea",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:a.data.preconditionScript,cache:a.graphEditor.cache});j.placeAt(e.containerNode);e.show()},showFieldsForComponent:function(b,a){var d=this;b.removeField("componentProcessName");b.removeField("allowFailure");if(a){this.getChildData();var e=this.getChildChildData();this.setDefaultNameValue(b,a.name);l.forEach(this.extraPropertyNames,function(a){d.removePropertyField(b,
a)});this.extraPropertyNames=[];var h;if(d.data.component&&d.data.component.id===a.id)h=e.componentProcessName;h=new c({restUrl:bootstrap.restUrl+"deploy/component/"+a.id+"/fullProcesses/false",getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},getValue:function(a){return a.name},onChange:function(a,c){l.forEach(d.extraPropertyNames,function(a){d.removePropertyField(b,a)});d.extraPropertyNames=[];c&&l.forEach(c.unfilledProperties,function(a){var c="p_"+a.name,
h=a.value,j=!1;e.properties&&e.properties[a.name]&&(h=e.properties[a.name],j=!0);var r=k.clone(a);r.name=c;r.value=h;if(a.description)r.description=a.description.escape();d.extraPropertyNames.push(c);d.addPropertyField(b,r,j,"allowFailure")})},allowNone:!1,value:h,disabled:d.readOnly});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:h},"tagId");(config.data.systemConfiguration.enableAllowFailure||e.allowFailure)&&b.addField({name:"allowFailure",
label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:e.allowFailure},"tagId")}},fdwShowFieldsForComponent:function(b,a){var c=this;if(a){b.removeField("componentProcessName");b.removeField("allowFailure");this.getChildData();var d=this.getChildChildData();this.setDefaultNameValue(b,a.name);l.forEach(this.extraPropertyNames,function(a){c.removePropertyField(b,a)});this.extraPropertyNames=[];var j;if(c.data.component&&c.data.component.id===
a.id)j=d.componentProcessName;j=new h({store:new e({data:c.graphEditor.firstDayWizardModel.getComponentProcesses(a),idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,value:j});b.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:j},"tagId");(config.data.systemConfiguration.enableAllowFailure||d.allowFailure)&&b.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),
type:"Checkbox",value:d.allowFailure},"tagId")}},getDefaultName:function(b){return i18n('All Versions: "%s"',b)}})})},"deploy/widgets/workflow/activity/PatternStackExecutionActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/BaseActivity"],function(l,m){return l("deploy.widgets.workflow.activity.PatternResourceActivity",[m],{postCreate:function(){this.inherited(arguments)},getLabel:function(){return"configurationResourceGroup"===this.data.resourceType||"serverResourceGroup"===
this.data.resourceType||"server"===this.data.resourceType?this.data.name:this.data.name+"\n["+this.data.resourceType+"]"},canEdit:function(){return!1}})})},"deploy/widgets/workflow/activity/ActivityCreator":function(){define("dijit/_Widget,dojo/_base/array,dojo/_base/declare,deploy/widgets/workflow/activity/AcquireLockActivity,deploy/widgets/workflow/activity/ApplicationApprovalTaskActivity,deploy/widgets/workflow/activity/ApplicationManualTaskActivity,deploy/widgets/workflow/activity/ApplicationRunComponentProcessActivity,deploy/widgets/workflow/activity/ApplyConfigurationActivity,deploy/widgets/workflow/activity/ComponentApprovalTaskActivity,deploy/widgets/workflow/activity/ComponentManualTaskActivity,deploy/widgets/workflow/activity/ComponentRunComponentProcessActivity,deploy/widgets/workflow/activity/DesiredInventoryActivity,deploy/widgets/workflow/activity/DesiredSnapshotInventoryActivity,deploy/widgets/workflow/activity/EachAgentIteratorActivity,deploy/widgets/workflow/activity/EachTagIteratorActivity,deploy/widgets/workflow/activity/EachVersionComponentActivity,deploy/widgets/workflow/activity/EnvironmentApprovalTaskActivity,deploy/widgets/workflow/activity/FinishActivity,deploy/widgets/workflow/activity/InstallComponentActivity,deploy/widgets/workflow/activity/InstallMultipleComponentsActivity,deploy/widgets/workflow/activity/JoinActivity,deploy/widgets/workflow/activity/ManualTaskActivity,deploy/widgets/workflow/activity/NoteActivity,deploy/widgets/workflow/activity/PluginActivity,deploy/widgets/workflow/activity/ReleaseLockActivity,deploy/widgets/workflow/activity/ResourceInventoryActivity,deploy/widgets/workflow/activity/RollbackComponentActivity,deploy/widgets/workflow/activity/RollbackMultipleComponentsActivity,deploy/widgets/workflow/activity/RunProcessActivity,deploy/widgets/workflow/activity/SetStatusActivity,deploy/widgets/workflow/activity/StartActivity,deploy/widgets/workflow/activity/SwitchActivity,deploy/widgets/workflow/activity/UninstallComponentActivity,deploy/widgets/workflow/activity/UninstallMultipleComponentsActivity,deploy/widgets/workflow/activity/EachTouchedResourceActivity,deploy/widgets/workflow/activity/ResourceDiscoveryActivity,deploy/widgets/workflow/activity/PatternDeploymentActivity,deploy/widgets/workflow/activity/PatternStackExecutionActivity,deploy/widgets/workflow/activity/RunOperationalProcessMultipleActivity,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L,I,J,U,R,T,W,Y,Q){return k("deploy.widgets.workflow.activity.ActivityCreator",[l],{graphEditor:null,postCreate:function(){this.inherited(arguments);if(!this.graphEditor)throw"Unable to create an ActivityCreator without a graphEditor specified.";},addSavedActivity:function(k,l,S,H,M,F){var Z=this,P,O={data:k,initialized:!0,graphEditor:this.graphEditor,parent:H,graphHasChanges:this.graphHasChanges};if(k.copy)O.initialized=!1;if(this.graphEditor&&
this.graphEditor.readOnly)O.readOnly=!0;if("start"===k.type)P=new N(O);else if("finish"===k.type)P=new u(O);else if("acquireLock"===k.type)P=new j(O);else if("releaseLock"===k.type)P=new A(O);else if("setStatus"===k.type)P=new K(O);else if("plugin"===k.type)P=new B(O);else if("addResourceInventory"===k.type||"removeResourceInventory"===k.type)P=new z(O);else if("applicationManualTask"===k.type)P=new h(O);else if("componentManualTask"===k.type)P=new a(O);else if("manualTask"===k.type)P=new y(O);else if("runProcess"===
k.type)P=new G(O);else if("touchedResourceIterator"===k.type)P=new U(O);else if("componentProcess"===k.type){var X=this.graphEditor.component,fa=this.graphEditor.componentTemplate;if(this.graphEditor.application)O.uiData={componentProcess:{unfilledProperties:k.unfilledProperties}},P=new d(O);else if(X||fa){var ba="componentName";fa&&(X=fa,ba="componentTemplateName");O.data={componentProcessName:k.componentProcessName,name:k.name,type:k.type,properties:k.properties};O.data[ba]=X.name;P=new f(O)}}else if("switch"===
k.type)P=new L(O);else if("join"===k.type)P=new x(O);else if("note"===k.type)P=new C(O);else if("applicationApprovalTask"===k.type)P=new e(O);else if("componentApprovalIterator"===k.type)P=new b(O);else if("environmentApprovalTask"===k.type)P=new s(O);else if("resourceDiscovery"===k.type)P=new R(O);else if("patternStackExecution"===k.type)P=new W(O);else if("patternDeployment"===k.type)P=new T(O);else if("addDesiredSnapshotInventory"===k.type||"removeDesiredSnapshotInventory"===k.type)P=new r(O);
else if(k.children&&0<k.children.length)if(X=k.children[0],"addDesiredInventory"===X.type||"removeDesiredInventory"===X.type)P=new n(O);else if("componentEnvironmentIterator"===k.type)if("inventoryVersionDiff"===X.type)P=new w(O);else if("allVersionsIterator"===X.type)P=new o(O);else if("uninstallAllVersionsIterator"===X.type)P=new I(O);else if("uninstallVersionDiff"===X.type)P=new E(O);else if("configurationDiff"===X.type)P=new c(O);else{if("componentProcess"===X.type)O.uiData={componentProcess:X.componentProcess},
X.componentProcess=void 0,P=new d(O)}else"changedResourceIterator"===k.type?(O.uiData={componentProcess:X.componentProcess},X.componentProcess=void 0,P=new d(O)):"multiComponentEnvironmentIterator"===k.type?"changedResourceIterator"===X.type?P=new Y(O):(X=X.children[0],"inventoryVersionDiff"===X.type?P=new v(O):"uninstallAllVersionsIterator"===X.type?P=new J(O):"uninstallVersionDiff"===X.type?P=new D(O):"operationalProcessFilter"===X.type&&(P=new Y(O))):"eachAgentIterator"===k.type?(P=new t(O),H&&
H.activity&&H.activity.isContainer&&new Q({message:i18n("Nested containers are not supported, you cannot save this process until the design is fixed.")})):"eachTagIterator"===k.type&&(P=new q(O),H&&H.activity&&H.activity.isContainer&&new Q({message:i18n("Nested containers are not supported, you cannot save this process until the design is fixed.")}));if(P)P.createCell(l,S,M,F),P.data.activityId=P.id,P.isContainer&&m.forEach(O.data.children,function(a){Z.addSavedActivity(a,0,0,P.cell)});else if(H&&
"graph"===k.type){l=k.startX;void 0===l&&(l=35);S=k.startY;void 0===S&&(S=20);this.addNewActivity({type:"start"},l,S,H);m.forEach(O.data.children,function(a){var b=0,c=0,d,e,f=util.getNamedProperty(O.data.offsets,a.name);if(f)b=f.x,c=f.y,d=f.h,e=f.w;Z.addSavedActivity(a,b,c,H,d,e)});var ja=Z.graphEditor.graph.getModel(),ga=Z.graphEditor.getStartCell(H);m.forEach(O.data.edges,function(a){var b;b=a.from?ja.filterCells(H.children,function(b){return b.activity&&b.activity.getName()===a.from})[0]:ga;var c;
a.to&&(c=ja.filterCells(H.children,function(b){return b.activity&&b.activity.getName()===a.to})[0]);b&&c&&Z.graphEditor.restoreEdge({from:b,to:c,type:a.type,value:a.value})})}if(k.copy)this.graphHasChanges?this.graphHasChanges():document.hasChanges=!0},addNewActivity:function(k,l,m,H){var M,F={data:{},graphEditor:this.graphEditor,parent:H};if(this.graphEditor&&this.graphEditor.readOnly)F.readOnly=!0;if(k.plugin)F.data={type:"plugin",id:k.id,name:i18n(k.name),commandName:k.name,pluginName:k.plugin.name,
pluginVersion:k.plugin.versionNumber},M=new B(F);else if("addResourceInventory"===k.type||"removeResourceInventory"===k.type)F.data={type:k.type},M=new z(F);else if("inventoryUpdate"===k.type)M=new n(F);else if("snapshotInventoryUpdate"===k.type)M=new r(F);else if("acquireLock"===k.type)F.data={type:k.type},M=new j(F);else if("releaseLock"===k.type)F.data={type:k.type},M=new A(F);else if("applicationManualTask"===k.type)F.data={type:k.type},M=new h(F);else if("componentManualTask"===k.type)F.data=
{type:k.type},M=new a(F);else if("manualTask"===k.type)F.data={type:k.type},M=new y(F);else if("runProcess"===k.type)F.data={type:k.type},M=new G(F);else if("installComponent"===k.type)M=new w(F);else if("uninstallComponent"===k.type)M=new I(F);else if("rollbackComponent"===k.type)M=new E(F);else if("forEachVersionContainer"===k.type)M=new o(F);else if("forEachTouchedResourceContainer"===k.type)M=new U(F);else if("applyConfiguration"===k.type)M=new c(F);else if("installMultipleComponents"===k.type)M=
new v(F);else if("uninstallMultipleComponents"===k.type)M=new J(F);else if("rollbackMultipleComponents"===k.type)M=new D(F);else if("runMultipleOperational"===k.type)M=new Y(F);else if("switch"===k.type)F.data={type:k.type},M=new L(F);else if("join"===k.type)F.data={type:k.type},M=new x(F);else if("start"===k.type)F.data={type:k.type},M=new N(F);else if("note"===k.type)F.data={type:k.type},M=new C(F);else if("finish"===k.type)F.data={type:k.type},M=new u(F);else if("setStatus"===k.type)F.data={type:k.type},
M=new K(F);else if("componentProcess"===k.type)if(this.graphEditor.application)F.data={componentName:k.component.name,children:[{componentName:k.component.name,componentProcessName:k.name}]},F.uiData={componentProcess:{unfilledProperties:k.unfilledProperties}},M=new d(F);else if(this.graphEditor.component)F.data={componentName:this.graphEditor.component.name},M=new f(F);else{if(this.graphEditor.componentTemplate)F.data={componentTemplateName:this.graphEditor.componentTemplate.name},M=new f(F)}else if("applicationApprovalTask"===
k.type)F.data={type:k.type,commentRequired:!1,commentPrompt:""},M=new e(F);else if("componentApprovalIterator"===k.type)F.data={type:k.type,children:[{type:"componentApprovalTask",role:k.role,roleRestrictionData:k.roleRestrictionData,commentRequired:!1,commentPrompt:""}]},M=new b(F);else if("environmentApprovalTask"===k.type)F.data={type:k.type,commentRequired:!1,commentPrompt:""},M=new s(F);else if("multiComponentEnvironmentIterator"===k.type)F.data={type:k.type,commentRequired:!1,commentPrompt:""};
else if("eachAgentIterator"===k.type)!H||!H.activity||!H.activity.isContainer?(F.data={type:k.type},M=new t(F)):new Q({message:i18n("You cannot nest containers!")});else if("eachTagIterator"===k.type)!H||!H.activity||!H.activity.isContainer?(F.data={type:k.type},M=new q(F)):new Q({message:i18n("You cannot nest containers!")});else if("resourceDiscovery"===k.type)F.data={name:k.name,type:k.type,commandType:k.commandType,actionType:k.actionType},M=new R(F);else if("patternStackExecution"===k.type)F.data=
{name:k.name,type:k.type},M=new W(F);else if("patternDeployment"===k.type)F.data={name:k.name,type:k.type},M=new T(F);if(M)M.createCell(l,m),M.data.activityId=M.id,M.isContainer&&(this.addNewActivity({type:"start"},35,20,M.cell),this.addNewActivity({type:"finish"},30,300,M.cell)),this.graphHasChanges?this.graphHasChanges():document.hasChanges=!0}})})},"deploy/widgets/workflow/activity/ApplyConfigurationActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/store/Memory,js/webext/widgets/select/WebextSelect,deploy/widgets/workflow/activity/BaseActivity,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d){return m("deploy.widgets.workflow.activity.ApplyConfigurationActivity",[h],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var c="";if(this.initialized){var b=this.getChildChildData();if(b.component&&b.component.deleted)c+=b.name+"\n"+i18n("(Deleted Component)")+")";else{var a=i18n("Apply Config (%s)",b.componentName),c=c+b.name;c!==a&&(c+="\n"+a)}}else c+=i18n("Apply Configuration");
return c},editProperties:function(c){var b=this;this.getChildData();var a=this.getChildChildData(),d,h=b.createPropertyDialog(),j=b.createPropertyForm({dialog:h,validateFields:function(a){return b.validateName(a.name)},onSubmit:function(a){c&&c();b.initialized=!0;b.data={name:b.data.name,type:"componentEnvironmentIterator"};b.data.component=d.get("item");b.data.componentName=b.data.component.name;if(a.tagId&&""!==a.tagId)b.data.tagId=a.tagId;else if(b.data.tagId)b.data.tag=void 0,b.data.tagId=void 0;
b.data.maxIteration=a.maxIteration;b.data.failFast=a.failFast;b.data.preconditionScript=a.preconditionScript;var e={};l.forEach(b.extraPropertyNames,function(b){var c=b.substring(2);e[c]=a[b]});b.data.children=[{name:util.randomString(30),type:"configurationDiff",componentName:b.data.component.name,children:[{name:a.name,type:"componentProcess",componentName:b.data.component.name,componentProcessName:a.componentProcessName,allowFailure:a.allowFailure,properties:e}]}];b.updateLabel();h.hide();j.destroy();
h.destroy()},readOnly:b.readOnly});j.addField({name:"name",label:i18n("Name"),type:"Text",required:!0,value:a.name});"firstDayWizard"===b.graphEditor.mode?(a=new e({store:b.graphEditor.firstDayWizardModel.components,searchAttr:"name",value:!b.data.component?void 0:b.data.component.id,noDataMessage:i18n("No components found."),autoComplete:!1,selectOnClick:!0,onSetItem:function(a,c){b.fdwShowFieldsForComponent(j,c)}}),d=j.addField({name:"component",label:i18n("Component"),required:!0,widget:a}).widget):
d=j.addField({name:"component",label:i18n("Component"),required:!0,type:"ApplicationComponentSelect",applicationId:b.graphEditor.application.id,value:!b.data.component?void 0:b.data.component.id,readOnly:b.readOnly,onSetItem:function(a,c){b.showFieldsForComponent(j,c)}}).widget;j.addField({name:"tagId",label:i18n("Limit to Resource Tag"),type:"TagDropDown",objectType:"Resource",value:b.data.tagId,readOnly:b.readOnly});j.addField({name:"maxIteration",label:i18n("Maximum number of concurrent jobs"),
type:"Text",textDir:"ltr",required:!0,value:b.data.maxIteration||-1,description:i18n("The maximum number component instances to apply the new configuration to simultaneously. For example, if you set the maximum number of concurrent processes to 2, the server applies the configuration to only two instances of a component at a time, even if many instances of the component are installed. Use -1 for unlimited.")});j.addField({name:"failFast",label:i18n("Fail Fast"),type:"Checkbox",description:i18n("When this is checked, this step will not start any more component processes if one fails."),
value:b.data.failFast});j.addField({name:"preconditionScript",label:i18n("Precondition"),type:"Text Area",textDir:"ltr",description:i18n("A script to determine whether this step should run. Must evaluate to true or false if not left blank."),value:b.data.preconditionScript});j.placeAt(h.containerNode);h.show()},showFieldsForComponent:function(c,b){var a=this;c.removeField("componentProcessName");c.removeField("allowFailure");c.removeField("componentProcessLabel");if(b){this.getChildData();var e=this.getChildChildData(),
h=c.getValue("name");(!h||this.selectedComponent&&h===i18n("Apply Config (%s)",this.selectedComponent.name))&&c.setValue("name",i18n("Apply Config (%s)",b.name));this.selectedComponent=b;l.forEach(this.extraPropertyNames,function(b){a.removePropertyField(c,b)});this.extraPropertyNames=[];var j;if(a.data.component&&a.data.component.id===b.id)j=e.componentProcessName;h=new d({restUrl:bootstrap.restUrl+"deploy/component/"+b.id+"/fullProcesses/false",getLabel:function(a){var b=a.name;a.componentTemplate&&
(b+=i18n(" (Template)"));return b},isValid:function(a){return!a.takesVersion},getValue:function(a){return a.name},onChange:function(b,d){l.forEach(a.extraPropertyNames,function(b){a.removePropertyField(c,b)});a.extraPropertyNames=[];d&&l.forEach(d.unfilledProperties,function(b){var d="p_"+b.name,h=b.value,j=!1;e.properties&&e.properties[b.name]&&(h=e.properties[b.name],j=!0);b={name:d,type:b.type,description:b.description?b.description.escape():b.description,required:b.required,value:h,label:b.label,
allowedValues:b.allowedValues};a.extraPropertyNames.push(d);a.addPropertyField(c,b,j,"allowFailure")})},allowNone:!1,value:j,disabled:a.readOnly});c.addField({name:"componentProcessName",label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:h},"tagId");c.addField({name:"componentProcessLabel",label:"",type:"Label",value:i18n("Note: Only processes set as Operational (No Version Needed) or Configuration Deployment can be used here.")},"tagId");(config.data.systemConfiguration.enableAllowFailure||
e.allowFailure)&&c.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),type:"Checkbox",value:e.allowFailure},"tagId")}},fdwShowFieldsForComponent:function(c,b){var a=this;if(b){c.removeField("componentProcessName");c.removeField("allowFailure");c.removeField("componentProcessLabel");this.getChildData();var d=this.getChildChildData(),h=c.getValue("name");(!h||this.selectedComponent&&h===i18n("Apply Config (%s)",
this.selectedComponent.name))&&c.setValue("name",i18n("Apply Config (%s)",b.name));this.selectedComponent=b;l.forEach(this.extraPropertyNames,function(b){a.removePropertyField(c,b)});this.extraPropertyNames=[];var k;if(a.data.component&&a.data.component.id===b.id)k=d.componentProcessName;h=new e({store:new j({data:a.graphEditor.firstDayWizardModel.getComponentProcesses(b),idProperty:"name"}),searchAttr:"name",autoComplete:!1,selectOnClick:!0,allowNone:!1,value:k});c.addField({name:"componentProcessName",
label:i18n("Component Process"),required:!0,description:i18n("The process to run."),widget:h},"tagId");c.addField({name:"componentProcessLabel",label:"",type:"Label",value:i18n("Note: Only processes set as Operational (No Version Needed) or Configuration Deployment can be used here.")},"tagId");(config.data.systemConfiguration.enableAllowFailure||d.allowFailure)&&c.addField({name:"allowFailure",label:i18n("Ignore Failure"),description:i18n("When checked, this step will always be considered successful."),
type:"Checkbox",value:d.allowFailure},"tagId")}}})})},"deploy/widgets/workflow/activity/ComponentApprovalTaskActivity":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,deploy/widgets/workflow/activity/BaseActivity,deploy/widgets/property/PropDefs,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h){return m([j],{postCreate:function(){this.inherited(arguments);if(appState.environment)this.approvalParent=appState.environment;if(appState.environmentTemplate)this.approvalParent=
appState.environmentTemplate;this.baseResolveHttpValuesUrl="rest/approval/approvalProcess/"+this.approvalParent.id+"/"+this.data.name+"/propDefs/resolveHttpValues/";if(!this.initialized)this.data.name=util.randomString(30),this.data.children[0].name=util.randomString(30),this.editProperties();if(!this.data.children[0].roleName)this.data.children[0].roleName=i18n("Deleted Role")},getLabel:function(){var d=i18n("Component Approval");this.initialized&&(d=this.data.children[0].role?d+("\n"+this.data.children[0].role.name):
d+("\n"+i18n("Deleted Role")));return d},editProperties:function(d){var c=this,b=this.data.children[0].role,a=c.createPropertyDialog(),f=c.createPropertyForm({dialog:a,onSubmit:function(e){c.initialized=!0;d&&d();c.data.children[0].commentRequired=e.commentRequired;c.data.children[0].commentPrompt=void 0!==e.commentPrompt?e.commentPrompt:"";c.data.children[0].roleRestrictionData={};c.data.children[0].roleRestrictionData.contextType="COMPONENT";c.data.children[0].roleRestrictionData.roleRestrictions=
[{roleId:e.role}];c.data.children[0].role=b;c.data.children[0].templateName=e.templateName;c.data.children[0].propDefs=e.propDefs;l.forEach(c.data.children[0].propDefs,function(a){a.resolveHttpValuesUrl=c.baseResolveHttpValuesUrl+a.name});a.hide();f.destroy();a.destroy();c.updateLabel()},readOnly:c.readOnly}),j=new h({restUrl:bootstrap.baseUrl+"security/role",value:this.data.role?this.data.role.id:void 0,onChange:function(a,c){b=c},allowNone:!1});f.addField({name:"role",label:i18n("Role"),required:!0,
description:i18n("The role the approving user must have."),widget:j});j=new h({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(a){return a},getValue:function(a){return a},allowNone:!1,value:c.data.children[0].templateName||"ApprovalCreated",disabled:c.readOnly});f.addField({name:"templateName",label:i18n("Notification Template"),required:!0,widget:j});j=new e({propDefs:c.data.children[0].propDefs||[],propSheetDef:{resolveHttpValuesUrl:c.baseResolveHttpValuesUrl}});
f.addField({widget:j,label:"Properties",name:"propDefs"});f.addField({name:"commentRequired",label:i18n("Require Comment"),type:"Checkbox",required:!1,description:i18n("Is a comment required for this approval request ?"),value:c.data.children[0].commentRequired});f.addField({name:"commentPrompt",label:i18n("Comment Prompt"),type:"Text Area",require:!1,description:i18n("The comment that will be shown in the approval request."),value:c.data.children[0].commentPrompt});f.placeAt(a.containerNode);a.show()}})})},
"deploy/widgets/workflow/activity/DesiredSnapshotInventoryActivity":function(){define(["dojo/_base/declare","dojo/on","deploy/widgets/workflow/activity/BaseActivity"],function(l,m,k){return l("deploy.widgets.workflow.activity.DesiredSnapshotInventoryActivity",[k],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=util.randomString(30),this.editProperties()},getLabel:function(){var j="";this.initialized?"addDesiredSnapshotInventory"===this.data.type?j+=i18n("Inventory: Add Snapshot"):
"removeDesiredSnapshotInventory"===this.data.type&&(j+=i18n("Inventory: Remove Snapshot")):j+=i18n("Snapshot Inventory Update");return j},editProperties:function(j){var e=this,h=e.createPropertyDialog(),d=e.createPropertyForm({dialog:h,onSubmit:function(c){j&&j();e.initialized=!0;e.data.type=c.type;e.updateLabel();h.hide();d.destroy();h.destroy()},readOnly:e.readOnly});d.addField({name:"type",label:i18n("Action"),type:"Select",required:!0,value:e.data.type,allowedValues:[{label:i18n("Choose an Action"),
value:""},{label:i18n("Add Desired Snapshot Inventory"),value:"addDesiredSnapshotInventory"},{label:i18n("Remove Desired Snapshot Inventory"),value:"removeDesiredSnapshotInventory"}]});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/workflow/activity/InstallMultipleComponentsActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/MultipleComponentsActivity"],function(l,m){return l("deploy.widgets.workflow.activity.InstallMultipleComponentsActivity",[m],{statusLabel:i18n("Use Versions Without Status"),
getLabel:function(){var k="";if(this.initialized){var j=this.getChildChildData(),e;j&&j.children&&(e=j.children[0]);k+=this.getDisplayName(e.name,"",i18n("Install"));e.componentProcessName&&(k+="\n"+i18n("Process: %s",e.componentProcessName))}else k+=i18n("Install Multiple Components");return k},getSelfChildData:function(k,j){return[{name:util.randomString(30),type:"componentEnvironmentIterator",tagId:k.tagId,runOnlyOnFirst:k.runOnlyOnFirst,children:[{name:util.randomString(30),type:"inventoryVersionDiff",
status:k.status,children:[{name:k.name,type:"componentProcess",componentProcessName:k.componentProcessName,allowFailure:k.allowFailure,properties:j}]}]}]},getDefaultName:function(k){return i18n('Install Tagged: "%s"',k)}})})},"deploy/widgets/workflow/activity/JoinActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/BaseActivity"],function(l,m){return l("deploy.widgets.workflow.activity.JoinActivity",[m],{postCreate:function(){this.inherited(arguments);if(!this.initialized)this.data.name=
util.randomString(30),this.initialized=!0},getLabel:function(){return i18n("Join")},canCopy:function(){return!1},canEdit:function(){return!1}})})},"deploy/widgets/workflow/activity/RollbackMultipleComponentsActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/MultipleComponentsActivity"],function(l,m){return l("deploy.widgets.workflow.activity.RollbackMultipleComponentsActivity",[m],{statusLabel:i18n("Remove Versions With Status"),getLabel:function(){var k="";if(this.initialized){var j=
this.getChildChildData(),e;j&&j.children&&(e=j.children[0]);k+=this.getDisplayName(e.name,"",i18n("Rollback"));e.componentProcessName&&(k+="\n"+i18n("Process: %s",e.componentProcessName))}else k+=i18n("Rollback Multiple Components");return k},getSelfChildData:function(k,j){return[{name:util.randomString(30),type:"componentEnvironmentIterator",tagId:k.tagId,runOnlyOnFirst:k.runOnlyOnFirst,children:[{name:util.randomString(30),type:"uninstallVersionDiff",selectionType:k.selectionType,status:k.status,
children:[{name:k.name,type:"componentProcess",componentProcessName:k.componentProcessName,allowFailure:k.allowFailure,properties:j}]}]}]},addExtraFields:function(k,j,e){k.addField({name:"selectionType",label:i18n("Rollback Type"),type:"Select",required:!0,value:e.selectionType,allowedValues:[{label:i18n("Remove Undesired Incremental Versions"),value:"UNDESIRED"},{label:i18n("Replace with Last Deployed"),value:"LAST_DEPLOYED"}]},j)},getStatusLabel:function(){return i18n("Remove Versions With Status")},
getDefaultName:function(k){return i18n('Rollback Tagged: "%s"',k)}})})},"deploy/widgets/workflow/activity/RunOperationalProcessMultipleActivity":function(){define(["dojo/_base/declare","deploy/widgets/workflow/activity/MultipleComponentsActivity"],function(l,m){return l("deploy.widgets.workflow.activity.RunOperationalProcessMultipleActivity",[m],{disableStatusSelect:!0,getLabel:function(){var k="";if(this.initialized){var k=this.getChildChildData(),j;k&&k.children&&(j=k.children[0]);k=j.name;-1===
k.indexOf(i18n("Run"))&&-1===k.indexOf(i18n("All"))&&(k+="\n"+i18n("Run Operational Process for Multiple Components"));j.componentProcessName&&(k+="\n"+i18n("Run Generic: %s",j.componentProcessName))}else k+=i18n("Run Operational Process for Multiple Components");return k},showComponentTagSelection:function(k,j,e){j.hasField("monitorTag")&&(j.removeField("monitorTag"),j.removeField("resourceSelectionMode"));k&&(j.addField({name:"monitorTag",label:i18n("Limit Monitoring to Components with This Tag"),
description:i18n("If you select a tag, this step runs only if another step in the application process changes the inventory of components that contain the tag. If you do not select a tag, this step runs if another step in the application process changes the inventory of any component."),multi:!0,type:"TagDropDown",objectType:"Component",value:e.monitorTag}),j.addField({name:"resourceSelectionMode",label:i18n("Resources to Run On"),type:"Radio",allowedValues:[{label:i18n("Run this step only on resources where component inventory changes"),
value:"ONLY_WHERE_COMPONENTS_CHANGED"},{label:i18n("Run this step on all possible resources"),value:"ALL_MAPPED_RESOURCES"}],value:e.resourceSelectionMode||"ONLY_WHERE_COMPONENTS_CHANGED"}))},addExtraFields:function(k){var j=this,e=this.getChildData();k.addField({name:"runOnlyOnFirst",label:i18n("Run on First Online Resource Only"),type:"Checkbox",description:i18n("When this is checked, this step will only use one resource. It will not run on all resources."),value:e.runOnlyOnFirst});var h=!!e&&"changedResourceIterator"===
e.type;k.addField({name:"ifComponentTagChanges",label:i18n("Run Only If Component Inventory Changes"),type:"Checkbox",description:i18n("Select this option to run the component process only if inventory was changed elsewhere in the application process. You may limit inventory-change monitoring to components with a specific tag."),value:h,onChange:function(d){j.showComponentTagSelection(d,k,e)}});this.showComponentTagSelection(h,k,e)},getSelfChildData:function(k,j){var e;e="true"===k.ifComponentTagChanges?
"changedResourceIterator":"componentEnvironmentIterator";return[{name:util.randomString(30),type:e,tagId:k.tagId,runOnlyOnFirst:k.runOnlyOnFirst,resourceSelectionMode:k.resourceSelectionMode,monitorTag:k.monitorTag,children:[{name:util.randomString(30),type:"operationalProcessFilter",status:k.status,children:[{name:k.name,type:"componentProcess",componentProcessName:k.componentProcessName,allowFailure:k.allowFailure,properties:j}]}]}]},getDefaultName:function(k){return i18n('All Tagged: "%s"',k)}})})},
"deploy/widgets/workflow/GraphToolbar":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/_base/lang,dojo/window,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/dom-attr,dojo/on,dojo/mouse,dojo/query,dijit/form/Button,dijit/form/CheckBox,dijit/form/NumberSpinner,deploy/widgets/workflow/GraphEdgeManager,deploy/widgets/workflow/activity/ActivityCreator,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/Switch,deploy/widgets/workflow/GraphLayout,deploy/widgets/workflow/ValidateGraph,deploy/widgets/process/ProcessIconsFormatter,deploy/widgets/workflow/GraphExploreDialog,deploy/widgets/process/RequiredCommentForm".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z){return l(null,{constructor:function(b){j.mixin(this,b);var e=this;this.graph=this.editor.graph;var f=d.create("div",{className:"toolbar-container",style:{minWidth:"900px",overflow:"hidden"}},this.editor.toolbarContainer);this.toolWindowContent=f;b=document.createElement("div");b.setAttribute("class","toolbarSeparator graphIcon");f=new mxToolbar(f);if(this.editor.readOnly)this.editor.graphDiagram.toolbarAttach.style.paddingLeft="10px";var o=
!1;"firstDayWizard"===this.editor.mode?o=!0:this.editor.readOnly&&(o=!0);if(!o)this.saveButton=f.addItem(e.getSaveButtonTitle(),null,function(){e.onSave()},null,"mxToolbarItem graphToolbarButton"),this.discardButton=f.addItem(i18n("Revert"),null,function(){document.hasChanges&&new v({message:i18n("Discard all changes and revert the graph to its last saved state?"),action:function(){document.hasChanges=!1;location.reload(!0)}})},null,"mxToolbarItem graphToolbarButton"),document.hasChanges&&(h.add(this.discardButton,
"enabled"),h.add(this.saveButton,"enabled"));if(this.isForDraft()&&config.data.systemConfiguration.safeEditFeatureEnabled)e.versionData.promotionPending?this.promoteButton=f.addItem(i18n("Promotion Pending"),null,null,null,"mxToolbarItem graphToolbarButton"):(this.promoteButton=f.addItem(i18n("Promote"),null,function(){e.versionData.promoteFunction(document.hasChanges);if(config.data.systemConfiguration.requireProcessPromotionApproval)h.remove(e.promoteButton,"enabled"),e.promoteButton.innerHTML=
i18n("Promotion Pending")},null,"mxToolbarItem graphToolbarButton enabled"),(document.hasChanges||e.isLocked()&&!e.lockIsOwned())&&h.remove(this.promoteButton,"enabled")),this.lockButton=this.isLocked()?this.lockIsOwned()&&config.data.systemConfiguration.safeEditFeatureEnabled?f.addItem(i18n("Unlock"),null,function(){e.versionData.unlockFunction()},null,"mxToolbarItem graphToolbarButton enabled"):f.addItem(i18n("Force Unlock"),null,function(){e.versionData.unlockFunction()},null,"mxToolbarItem graphToolbarButton enabled"):
f.addItem(i18n("Lock"),null,function(){e.versionData.lockFunction()},null,"mxToolbarItem graphToolbarButton enabled");"firstDayWizard"!==this.editor.mode&&(f.addItem(i18n("Print"),null,j.hitch(this,"printPreview"),null,"mxToolbarItem graphToolbarButton enabled"),f.container.appendChild(b.cloneNode(!0)));f.addItem(i18n("Zoom In"),bootstrap.imageUrl+"icons/blank18x18.png",function(){e.zoomToSelectionReset();e.graph.zoomIn();e.graph.tooltipHandler.hide()},null,"mxToolbarItem general-icon zoom-in-icon graphToolbarIcon");
f.addItem(i18n("Zoom Out"),bootstrap.imageUrl+"icons/blank18x18.png",function(){e.zoomToSelectionReset();e.graph.zoomOut();e.graph.tooltipHandler.hide()},null,"mxToolbarItem general-icon zoom-out-icon graphToolbarIcon");f.addItem(i18n("Zoom to Selected"),bootstrap.imageUrl+"icons/blank18x18.png",function(){e.zoomToSelection();e.graph.tooltipHandler.hide()},null,"mxToolbarItem general-icon zoom-select-icon graphToolbarIcon");f.addItem(i18n("Zoom to Fit"),bootstrap.imageUrl+"icons/blank18x18.png",function(){e.zoomToSelectionReset();
e.graph.fit();e.graph.tooltipHandler.hide()},null,"mxToolbarItem general-icon zoom-fit-icon graphToolbarIcon");this.editor.graphPaletteDialog&&(f.container.appendChild(b.cloneNode(!0)),f.addItem(i18n("Popup Step Palette"),bootstrap.imageUrl+"icons/blank18x18.png",function(){e.editor.graphPaletteDialog.show();e.graph.tooltipHandler.hide()},null,"mxToolbarItem general-icon new-step-icon graphToolbarIcon"));o=!!window.parent.document.getElementById("explore_iframe_id");"firstDayWizard"!==this.editor.mode&&
!o&&!this.editor.readOnly&&(f.container.appendChild(b.cloneNode(!0)),f.addItem(i18n("Explore"),bootstrap.imageUrl+"icons/blank18x18.png",function(){if(!e.exploreDialog)e.exploreDialog=new A({"class":"nonModal",editor:e.editor});e.exploreDialog.show();e.graph.tooltipHandler.hide()},null,"mxToolbarSmallerItem mxToolbarItem general-icon explorer-icon graphToolbarIcon"));f.container.appendChild(b.cloneNode(!0));var n=d.create("div",{"class":"toolbar-button",style:{color:"#2e2d2d",display:"inline-block",
position:"relative",minWidth:"120px",lineHeight:"30px"}});f.container.appendChild(n);if("firstDayWizard"!==this.editor.mode&&this.versionData)f.container.appendChild(b.cloneNode(!0)),this.versionContainer=d.create("div",{style:{display:"inline-block",marginLeft:"50px"}}),this.versionContainer.appendChild(d.create("div",{innerHTML:this.versionData.label,style:{display:"inline-block",verticalAlign:"middle",paddingRight:"40px"}},this.versionContainer)),b=d.create("div",{style:{display:"inline-block",
height:this.versionData.latest?"20px":"30px",verticalAlign:"middle"}},this.versionContainer),this.versionData.controls.style.lineHeight="10px",b.appendChild(this.versionData.controls),f.container.appendChild(this.versionContainer);a(this.editor.graphDiagram.hideHelpAttach,"click",function(){e.hideHelp()});this.helpLink=d.create("a",{"class":"linkPointer designer-help-link",innerHTML:util.i18n("Show help")});a(this.helpLink,"click",function(){e.showHelp();c.set(this,"display","none")});f.container.appendChild(this.helpLink);
this.editor.loaded.then(function(){var a=(new x({value:e.editor.autolayout,disabled:e.editor.readOnly,style:{display:"inline",position:"absolute",top:"-3px",marginLeft:"10px"},onChange:function(a){if(e.editor.autolayout!==a)e.editor.autolayout=a,util.setCookie("graphAutoLayout",a?"true":"false"),y.layout(e.editor,{animate:!0}),e.editor.graphHasChanges(),e.graph.tooltipHandler.hide()}})).placeAt(n),b=d.create("label",{"for":a.id,innerHTML:i18n("Autolayout"),style:{verticalAlign:"middle",font:"12px arial",
marginLeft:"5px"}});d.place(b,n);a.placeAt(n)})},getSaveButtonTitle:function(){return this.isForDraft()&&config.data.systemConfiguration.safeEditFeatureEnabled?i18n("Save Draft"):i18n("Save")},destroy:function(){this.exploreDialog&&this.exploreDialog.destroy()},destroyToolbar:function(){d.empty(this.toolWindowContent)},onSave:function(){var a=this;if(document.hasChanges)if(0===a.editor.getFinishCells().length)new u({message:i18n("This process has no 'Finish' step. Processes must end in a finish step to execute successfully.")});
else if(C.validate(a.editor))new u({message:i18n("This process has steps with required properties that have not been set.")});else if(config.data.systemConfiguration.requiresCommitComment){var b=new w({title:i18n("Process Change Comment"),closable:!0});(new z({callback:function(c){c&&a.editor.saveProcessDesign(c.comment);b.hide();b.destroy()}})).placeAt(b);b.show()}else a.editor.saveProcessDesign(),this.isForDraft()&&h.add(a.promoteButton,"enabled")},zoomToSelection:function(){var a=this.graph.getSelectionCell();
if(a&&(!this.editor.zoomToSelectionData||a!==this.editor.zoomToSelectionCell)){this.editor.zoomToSelectionData={edges:{},cells:{}};this.editor.zoomToSelectionCell=a;this.editor.zoomToSelectionData.cells[a.id]=!0;this.zoomToSelectionCollector(a,!0);this.zoomToSelectionCollector(a,!1);this.editor.diagram.mxgraphAttach.style.overflow="auto";if(!this.zscale)this.zscale=this.graph.view.scale;var b=this.zoomToSelectionRefresh();this.graph.fit(b?0.5:0.5>this.zscale?0.5:0.9>this.zscale?1:1.1);!b&&300<a.geometry.y&&
this.graph.scrollCellToVisible(a,!0)}else if(this.editor.zoomToSelectionData)this.editor.diagram.mxgraphAttach.style.overflow="hidden",this.zoomToSelectionReset(),this.graph.fit(y.MIN_SCALE),delete this.zscale},zoomToSelectionCollector:function(a,b){for(var c=b?this.graph.model.getIncomingEdges(a):this.graph.model.getOutgoingEdges(a),d=0,d=0;d<c.length;d++){var e=c[d];this.editor.zoomToSelectionData.edges[e.id]=!0;e=b?e.source:e.target;this.editor.zoomToSelectionData.cells[e.id]||(this.editor.zoomToSelectionData.cells[e.id]=
!0,this.zoomToSelectionCollector(e,b))}},zoomToSelectionReset:function(){this.editor.zoomToSelectionData&&(delete this.editor.zoomToSelectionData,delete this.editor.zoomToSelectionCell,this.zoomToSelectionRefresh())},zoomToSelectionRefresh:function(){var a=[!1];this.zoomToSelectionRefreshHelper(this.graph.getDefaultParent(),a);return a[0]},zoomToSelectionRefreshHelper:function(a,b){for(var c=0,d=this.graph.model.getChildCount(a),c=0;c<d;c++){var e=this.graph.model.getChildAt(a,c),f=this.graph.view.getState(e),
h=!1;if(e.edge)f&&f.shape&&(h=this.editor.zoomToSelectionData&&!this.editor.zoomToSelectionData.edges[e.id],f.shape.node.setAttribute("stroke-opacity",h?"0.1":"1.0"));else if(f&&f.text)h=this.editor.zoomToSelectionData&&!this.editor.zoomToSelectionData.cells[e.id],f.text.opacity=h?0:100,f.shape.image=h?void 0:f.style.image,f.shape.node.setAttribute("cursor",h?"pointer":"arrow");b[0]=b[0]||h;if(f&&f.overlays)for(var j=0,f=f.overlays.getValues(),j=0;j<f.length;j++){var o=f[j];o.overlay.image.width=
h?0:24;o.node.setAttribute("visibility",h?"hidden":"visible")}e.activity&&e.activity.isContainer&&this.zoomToSelectionRefreshHelper(e,b)}},printPreview:function(){var b=this,c=new w({title:i18n("Print Preview"),closable:!0,draggable:!0}),e=!0,f=!0,j=2,o=d.create("div",{},c.containerNode),n=d.create("div",{className:"graph-print-container"},o);d.create("div",{className:"graph-print-container-title",innerHTML:i18n("Print Format")},n);var k=d.create("div",{className:"inline-block graph-print-format-container selected-print-option"},
n);d.create("div",{className:"normal-print-block"},k);d.create("div",{innerHTML:i18n("Normal"),className:"graph-print-container-subtitle"},k);var s=d.create("div",{className:"inline-block graph-print-format-container"},n),l=d.create("div",{className:"poster-print-block-container"},s);d.create("div",{className:"inline-block poster-print-block poster-print-block-left"},l);d.create("div",{className:"inline-block poster-print-block"},l);d.create("div",{className:"inline-block poster-print-block poster-print-block-left"},
l);d.create("div",{className:"inline-block poster-print-block"},l);d.create("div",{innerHTML:i18n("Poster"),className:"graph-print-container-subtitle"},s);var u=d.create("div",{className:"hidden"},n);d.create("div",{innerHTML:i18n("Number of pages"),className:"graph-print-poster-pages-title"},u);(new q({value:2,constraints:{min:1,max:100,places:0},focused:!1,onChange:function(a){j=a}})).placeAt(u);a(k,"click",function(){h.remove(s,"selected-print-option");h.add(u,"hidden");h.add(k,"selected-print-option");
e=!0});a(s,"click",function(){h.remove(k,"selected-print-option");h.remove(u,"hidden");h.add(s,"selected-print-option");e=!1});n=d.create("div",{className:"graph-print-container"},o);d.create("div",{className:"graph-print-container-title",innerHTML:i18n("Graph Style")},n);var y=d.create("div",{className:"inline-block graph-print-style-container selected-print-option"},n),l=d.create("div",{className:"normal-print-style-block"},y);d.create("div",{className:"graph-print-style-container-image"},l);d.create("div",
{innerHTML:i18n("Shaded"),className:"graph-print-style-container-subtitle"},l);var v=d.create("div",{className:"inline-block graph-print-style-container"},n),l=d.create("div",{className:"outline-print-style-block"},v);d.create("div",{className:"graph-print-style-container-image-dark"},l);d.create("div",{innerHTML:i18n("Outline"),className:"graph-print-style-container-subtitle"},l);a(y,"click",function(){h.remove(v,"selected-print-option");h.add(y,"selected-print-option");f=!0});a(v,"click",function(){h.remove(y,
"selected-print-option");h.add(v,"selected-print-option");f=!1});var B=!0,n=d.create("div",{},n),l=(new t({value:B,checked:B,onChange:function(a){B=a}})).placeAt(n);d.create("label",{innerHTML:i18n("Show Overlays"),"for":l.id},n);o=d.create("div",{className:"graph-print-buttons-container"},o);n=(new r({label:i18n("Preview"),onClick:function(){c.hide();var a=[],d=[],h=[],o=[],n=[],k=null;if(!f&&b.graph&&b.graph.model&&b.graph.model.cells){var k=b.graph.model.cells,s=null;for(s in k)if(k.hasOwnProperty(s)){var r=
k[s];if(r.activity&&r.style){var l=r.style;0===l.indexOf("shape")?(-1!==l.indexOf(".png")&&(l=l.replace(".png","-dark.png"),r.setStyle(l)),-1!==l.indexOf("fillColor=#00649D")?n.push(r):a.push(r)):0===l.indexOf("utilityStyle")?d.push(r):0===l.indexOf("noteStyle")?h.push(r):0===l.indexOf("parallelStyle")&&o.push(r)}}a&&0<a.length&&(mxUtils.setCellStyles(b.graph.model,a,"fillColor","#FFF"),mxUtils.setCellStyles(b.graph.model,a,"strokeColor","#3B0256"),mxUtils.setCellStyles(b.graph.model,a,"fontColor",
"#222"));d&&0<d.length&&(mxUtils.setCellStyles(b.graph.model,d,"fillColor","#FFF"),mxUtils.setCellStyles(b.graph.model,d,"strokeColor","#222"),mxUtils.setCellStyles(b.graph.model,d,"fontColor","#222"),mxUtils.setCellStyles(b.graph.model,d,"fontSize","16"));h&&0<h.length&&(mxUtils.setCellStyles(b.graph.model,h,"fillColor","#EEE"),mxUtils.setCellStyles(b.graph.model,h,"strokeColor","#AAA"),mxUtils.setCellStyles(b.graph.model,h,"shadow","1"));o&&0<o.length&&(mxUtils.setCellStyles(b.graph.model,o,"fillColor",
"#EEE"),mxUtils.setCellStyles(b.graph.model,o,"strokeColor","#888"),mxUtils.setCellStyles(b.graph.model,o,"fontColor","#222"));n&&0<n.length&&(mxUtils.setCellStyles(b.graph.model,n,"fillColor","#F0F0F0"),mxUtils.setCellStyles(b.graph.model,n,"strokeColor","#888"),mxUtils.setCellStyles(b.graph.model,n,"fontColor","#222"))}k=null;k=i18n("Printer-friendly version");s=mxUtils.getScaleForPageCount(e?1:j,b.graph,mxConstants.PAGE_FORMAT_A4_LANDSCAPE);1<s&&(s=1);s-=0.1;e||(k=i18n("Poster Printer-friendly version"));
k=new mxPrintPreview(b.graph,s,null,null,null,null,null,k,null);k.pageFormat=mxConstants.PAGE_FORMAT_A4_LANDSCAPE;k.printOverlays=B;k.border=20;k.open();a&&0<a.length&&(m.forEach(a,function(a){var b=a.style;-1!==b.indexOf("-dark.png")&&(b=b.replace("-dark.png",".png"),a.setStyle(b))}),mxUtils.setCellStyles(b.graph.model,a,"fillColor","#7F1C7D"),mxUtils.setCellStyles(b.graph.model,a,"strokeColor","#FFF"),mxUtils.setCellStyles(b.graph.model,a,"fontColor","#FFF"));d&&0<d.length&&(mxUtils.setCellStyles(b.graph.model,
d,"fillColor","#888"),mxUtils.setCellStyles(b.graph.model,d,"strokeColor","#FFF"),mxUtils.setCellStyles(b.graph.model,d,"fontColor","#FFF"),mxUtils.setCellStyles(b.graph.model,d,"fontSize","14"));h&&0<h.length&&(mxUtils.setCellStyles(b.graph.model,h,"fillColor","#FDB813"),mxUtils.setCellStyles(b.graph.model,h,"strokeColor","#FFF"),mxUtils.setCellStyles(b.graph.model,h,"shadow","0"));o&&0<o.length&&(mxUtils.setCellStyles(b.graph.model,o,"fillColor","#82D1F5"),mxUtils.setCellStyles(b.graph.model,o,
"strokeColor","#00B2EF"),mxUtils.setCellStyles(b.graph.model,o,"fontColor","#222"));n&&0<n.length&&(m.forEach(n,function(a){var b=a.style;-1!==b.indexOf("-dark.png")&&(b=b.replace("-dark.png",".png"),a.setStyle(b))}),mxUtils.setCellStyles(b.graph.model,n,"fillColor","#00649D"),mxUtils.setCellStyles(b.graph.model,n,"strokeColor","#FFF"),mxUtils.setCellStyles(b.graph.model,n,"fontColor","#FFF"))}})).placeAt(o);(new r({label:i18n("Cancel"),onClick:function(){c.hide()}})).placeAt(o);h.add(n.domNode,"idxButtonSpecial");
c.show()},showHelp:function(){c.set(this.editor.graphDiagram.helpAttach,"display","block")},hideHelp:function(){c.set(this.editor.graphDiagram.helpAttach,"display","none");c.set(this.helpLink,"display","block")},isForDraft:function(){return this.versionData&&this.versionData.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled},isLocked:function(){return this.versionData&&this.versionData.locked&&config.data.systemConfiguration.safeEditFeatureEnabled},lockIsOwned:function(){return this.versionData&&
this.versionData.lockOwned&&config.data.systemConfiguration.safeEditFeatureEnabled}})})},"dijit/form/NumberSpinner":function(){define(["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(l,m,k,j,e){return l("dijit.form.NumberSpinner",[j,e.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(e,d){var c=this.constraints,b=isNaN(e),a=!isNaN(c.max),f=!isNaN(c.min);b&&0!=d&&(e=0<d?f?c.min:a?c.max:0:a?this.constraints.max:f?c.min:0);var j=
e+d;if(b||isNaN(j))return e;if(a&&j>c.max)j=c.max;if(f&&j<c.min)j=c.min;return j},_onKeyPress:function(e){if(!this.disabled&&!this.readOnly&&(e.charOrCode==k.HOME||e.charOrCode==k.END)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&"undefined"!=typeof this.get("value")){var d=this.constraints[e.charOrCode==k.HOME?"min":"max"];"number"==typeof d&&this._setValueAttr(d,!1);m.stop(e)}}})})},"dijit/form/_Spinner":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/sniff,dojo/mouse,../typematic,./RangeBoundTextBox,dojo/text!./templates/Spinner.html,./_TextBoxMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l("dijit.form._Spinner",c,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:b,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{upArrowNode:"dijitUpArrowButton",downArrowNode:"dijitDownArrowButton"},adjust:function(a){return a},_arrowPressed:function(b,c,d){!this.disabled&&!this.readOnly&&(this._setValueAttr(this.adjust(this.get("value"),c*d),!1),a.selectInputText(this.textbox,this.textbox.value.length))},
_arrowReleased:function(){this._wheelTimer=null},_typematicCallback:function(a,b,c){var d=this.smallDelta;if(b==this.textbox)b=c.charOrCode,d=b==k.PAGE_UP||b==k.PAGE_DOWN?this.largeDelta:this.smallDelta,b=b==k.UP_ARROW||b==k.PAGE_UP?this.upArrowNode:this.downArrowNode;-1==a?this._arrowReleased(b):this._arrowPressed(b,b==this.upArrowNode?1:-1,d)},_wheelTimer:null,_mouseWheeled:function(a){m.stop(a);var b=a.wheelDelta/120;Math.floor(b)!=b&&(b=0<a.wheelDelta?1:-1);a=a.detail?-1*a.detail:b;if(0!==a){var c=
this[0<a?"upArrowNode":"downArrowNode"];this._arrowPressed(c,a,this.smallDelta);this._wheelTimer&&this._wheelTimer.remove();this._wheelTimer=this.defer(function(){this._arrowReleased(c)},50)}},_setConstraintsAttr:function(a){this.inherited(arguments);this.focusNode&&(void 0!==this.constraints.min?this.focusNode.setAttribute("aria-valuemin",this.constraints.min):this.focusNode.removeAttribute("aria-valuemin"),void 0!==this.constraints.max?this.focusNode.setAttribute("aria-valuemax",this.constraints.max):
this.focusNode.removeAttribute("aria-valuemax"))},_setValueAttr:function(a,b){this.focusNode.setAttribute("aria-valuenow",a);this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,h.wheel,"_mouseWheeled");this.own(d.addListener(this.upArrowNode,this.textbox,{charOrCode:k.UP_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.downArrowNode,this.textbox,
{charOrCode:k.DOWN_ARROW,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.upArrowNode,this.textbox,{charOrCode:k.PAGE_UP,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),d.addListener(this.downArrowNode,this.textbox,{charOrCode:k.PAGE_DOWN,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1},this,"_typematicCallback",
this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout))}})})},"url:dijit/form/templates/Spinner.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n\tid="widget_${id}" role="presentation"\n\t><div class="dijitReset dijitButtonNode dijitSpinnerButtonContainer"\n\t\t><input class="dijitReset dijitInputField dijitSpinnerButtonInner" type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t/><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton"\n\t\t\tdata-dojo-attach-point="upArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9650; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class="dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton"\n\t\t\tdata-dojo-attach-point="downArrowNode"\n\t\t\t><div class="dijitArrowButtonInner"\n\t\t\t\t><input class="dijitReset dijitInputField" value="&#9660; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class=\'dijitReset dijitValidationContainer\'\n\t\t><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n\t/></div\n\t><div class="dijitReset dijitInputField dijitInputContainer"\n\t\t><input class=\'dijitReset dijitInputInner\' data-dojo-attach-point="textbox,focusNode" type="${type}" data-dojo-attach-event="onkeypress:_onKeyPress"\n\t\t\trole="spinbutton" autocomplete="off" ${!nameAttrSetting}\n\t/></div\n></div>\n',
"deploy/widgets/workflow/GraphEdgeManager":function(){define("dijit/_Widget,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog".split(","),function(l,m,k,j,e,h){return m("deploy.widgets.workflow.GraphEdgeManager",[l],{graphEditor:null,graph:null,postCreate:function(){this.inherited(arguments);if(!this.graphEditor)throw"Unable to create a GraphEdgeManager without a graphEditor specified.";this.graph=this.graphEditor.graph},setGraphHasChanges:function(){this.graphHasChanges?
this.graphHasChanges():document.hasChanges=!0},addEdgeOverlays:function(d,c){var b=this;this.graph.getModel().getGeometry(d);var a="applicationApprovalTask"===c.activity.data.type||"environmentApprovalTask"===c.activity.data.type||"componentApprovalIterator"===c.activity.data.type;d.data={type:"ALWAYS"};var e=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/close_step.png",18,18));e.cursor="pointer";var h=0,j=0;c.activity&&"start"!==c.activity.data.type&&!a&&("switch"===c.activity.data.type&&
(j=-10),h=10);e.offset=new mxPoint(h,j);e.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){b.deleteEdge(d)}));this.graph.addCellOverlay(d,e);c.activity&&"switch"===c.activity.data.type&&(this.addEditOverlay(d),b.graph.labelChanged(d,i18n("Default")),b.graph.setDefaultEdge(d,!0));if(c.activity&&"switch"!==c.activity.data.type&&"start"!==c.activity.data.type)a?d.data.type="SUCCESS":this.addCheckOverlay(d)},addCheckOverlay:function(d){var c=this,b=new mxCellOverlay(new mxImage(bootstrap.imageUrl+
"icons/process/step_successful.png",20,20));b.cursor="pointer";b.offset=new mxPoint(-11,0);b.align=mxConstants.ALIGN_RIGHT;b.verticalAlign=mxConstants.ALIGN_TOP;b.tooltip=i18n("Run On Success");b.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){c.setGraphHasChanges();c.addErrorOverlay(d);c.graph.removeCellOverlay(d,b)}));d.data.type="SUCCESS";this.graph.setEdgeState(d);this.graph.addCellOverlay(d,b)},addErrorOverlay:function(d){var c=this,b=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/step_fail.png",
20,20));b.cursor="pointer";b.offset=new mxPoint(-11,0);b.align=mxConstants.ALIGN_RIGHT;b.verticalAlign=mxConstants.ALIGN_TOP;b.tooltip=i18n("Run On Failure");b.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){c.setGraphHasChanges();c.addAlwaysOverlay(d);c.graph.removeCellOverlay(d,b)}));d.data.type="FAILURE";this.graph.setEdgeState(d,!0);this.graph.addCellOverlay(d,b)},addAlwaysOverlay:function(d){var c=this,b=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/step_always.png",
20,20));b.cursor="pointer";b.offset=new mxPoint(-11,0);b.align=mxConstants.ALIGN_RIGHT;b.verticalAlign=mxConstants.ALIGN_TOP;b.tooltip=i18n("Always Run");b.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){c.setGraphHasChanges();c.addCheckOverlay(d);c.graph.removeCellOverlay(d,b)}));d.data.type="ALWAYS";this.graph.setEdgeState(d,"always");this.graph.addCellOverlay(d,b)},addEditOverlay:function(d){var c=this,b=new mxCellOverlay(new mxImage(bootstrap.imageUrl+"icons/process/step_edit.png",18,18));
b.cursor="pointer";b.offset=new mxPoint(-10,-10);b.align=mxConstants.ALIGN_RIGHT;b.verticalAlign=mxConstants.ALIGN_TOP;b.addListener(mxEvent.CLICK,mxUtils.bind(this,function(){c.editEdgeProperties(d)}));d.data.type="VALUE";this.graph.addCellOverlay(d,b)},deleteEdge:function(d){var c=this.graph.getModel();c.beginUpdate();this.graph.removeCells([d],!0);c.endUpdate();this.setGraphHasChanges()},editEdgeProperties:function(d){var c=this,b=new h({title:i18n("Edit Properties"),closable:!0,draggable:!0}),
a=new e({onSubmit:function(e){c.setGraphHasChanges();d.data.value=e.value||null;"true"===e.isDefault||""===d.data.value||!e.value?(c.graph.labelChanged(d,i18n("Default")),c.graph.setDefaultEdge(d,!0)):(c.graph.labelChanged(d,e.value.replace(/\n/g,", ")),c.graph.setDefaultEdge(d));b.hide();a.destroy();b.destroy()},onCancel:function(){b.hide();this.destroy();b.destroy()}}),f=!d.data.value,n=a.addField({name:"isDefault",label:i18n("Default?"),type:"Switch",value:f,onChange:function(b){b?a.hasField("value")&&
(a.removeField("value"),a.removeField("value_description"),a.removeField("wildcard")):c.addValueFields(a,d)}});j.create("div",{className:"inline-block graph-edit-properties labelsAndValues-valueCell",innerHTML:i18n("When this switch is on, this connection will be taken only when no others are matched.")},n.widget.fieldRow,"last");f||c.addValueFields(a,d);a.placeAt(b.containerNode);b.show()},addValueFields:function(d,c){d.addField({name:"value",label:i18n("Value"),type:"Text Area",required:!0,value:c.data.value});
d.addField({name:"value_description",label:"",type:"Label",value:i18n("Enter the value(s) to match to take this arrow. Multiple values can be entered, one per line. Only one must match for this connection to be valid.")});d.addField({name:"wildcard",label:"",type:"Label",value:i18n("* can be used as a wildcard.")})}})})},"js/webext/widgets/Switch":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-attr,dojo/dom-geometry,dojo/on,dojo/mouse,dojo/_base/array".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return l("js.webext.widgets.Switch",[m,k],{_colors:"red,orange,yellow,green,blue,purple".split(","),color:"blue",value:!1,focusOnHover:!1,showSwitchLabels:!1,showOnSwitchLabel:!1,showOffSwitchLabel:!1,labelText:null,labelPlacement:"after",master:!1,children:null,sameWidth:!0,disabled:!1,templateString:'<div class="webext-switch noSelect" tabindex="0"><input class="webext-switch-checkbox" tabindex="-1" type="checkbox" role="checkbox" data-dojo-attach-point="checkboxAP"></input><div class="webext-switch-wrapper inline-block" data-dojo-attach-point="wrapperAP"><div class="webext-switch-container" data-dojo-attach-point="containerAP"></div><div class="webext-switch-handle inline-block" data-dojo-attach-point="handleAP"></div></div></div>',
postCreate:function(){this.inherited(arguments);if(!this.onTitle)this.onTitle=this.master?i18n("All On"):i18n("On");if(!this.offTitle)this.offTitle=this.master?i18n("All Off"):i18n("Off");if(!this.middleTitle)this.middleTitle=i18n("Middle");this.set("value",this.value);this.set("color",this.color);this.set("disabled",this.disabled);this._setEvents();this.labelText&&this._setLabel();this.master&&this._setMasterEvents();(this.showSwitchLabels||this.showOnSwitchLabel||this.showOffSwitchLabel)&&this._setSwitchLabel()},
set:function(a,b){this.inherited(arguments);"value"===a?b?"middle"===b?this._setSwitch(this.middleTitle,"switch-middle","middle"):this._setSwitch(this.onTitle,"switch-on","true"):this._setSwitch(this.offTitle,"switch-off","false"):"color"===a?this._setColor():"disabled"===a?b?e.add(this.domNode,"webext-switch-disabled"):e.remove(this.domNode,"webext-switch-disabled"):"width"===a&&!this.master&&this._calculateLabelSize(this.switchLabelContainer,this.width)},_setSwitch:function(a,b,c){d.set(this.domNode,
"title",a);d.set(this.domNode,"aria-checked",c);d.set(this.checkboxAP,"aria-checked",c);e.remove(this.domNode,"switch-on");e.remove(this.domNode,"switch-middle");e.remove(this.domNode,"switch-off");e.add(this.domNode,b);(this.showSwitchLabels||this.showOnSwitchLabel||this.showOffSwitchLabel)&&this._setSwitchWithLabel(b)},_setSwitchLabel:function(){var a=this;this.switchLabelContainer=j.create("div",{className:"webext-switch-container-labels inline-block"},this.containerAP);this.onSwitchLabel=j.create("div",
{className:"webext-switch-on-label inline-block",innerHTML:this.showSwitchLabels||this.showOnSwitchLabel?this.onTitle:" "},a.switchLabelContainer);this.offSwitchLabel=j.create("div",{className:"webext-switch-off-label inline-block",innerHTML:this.showSwitchLabels||this.showOffSwitchLabel?this.offTitle:" "},a.switchLabelContainer);!1===a.value&&j.place(this.offSwitchLabel,this.switchLabelContainer,"first");setTimeout(function(){a._calculateLabelSize(a.switchLabelContainer)},0)},_calculateLabelSize:function(d,
e){var j=this,k=0;if(e)k=e;else{if(this.onSwitchLabel)k=c.getMarginBox(this.onSwitchLabel).w;if(this.offSwitchLabel){var o=c.getMarginBox(this.offSwitchLabel).w;o>k&&(k=o)}this.master&&(k+=10,this.children&&this.sameWidth&&(f.forEach(this.children,function(a){(a=a.get("width"))&&a>k&&(k=a)}),f.forEach(this.children,function(a){a.set("width",k);!a.onSwitchLabel&&!a.offSwitchLabel&&a._setSwitchLabel();a.set("showSwitchLabels",!0)})))}this.onSwitchLabel&&h.set(this.onSwitchLabel,"width",k+"px");this.offSwitchLabel&&
h.set(this.offSwitchLabel,"width",k+"px");d&&h.set(d,"width",k+"px");if(10<k){h.set(this.containerAP,"width",k+28+"px");this.width=k;var s=function(a){var b=a?2:5;!0===j.value?h.set(j.handleAP,"left",j.width+(a?0:6)+"px"):"middle"===j.value&&h.set(j.handleAP,"left",j.width/2+b+"px")};s();this.master&&(this.own(b(j.domNode,a.enter,function(){s(!0);j.hover=!0})),this.own(b(j.domNode,a.leave,function(){s();j.hover=!1})))}},_setSwitchWithLabel:function(a){h.set(this.handleAP,"left","");if(this.switchLabelContainer){if((this.onSwitchLabel||
this.showSwitchLabels)&&"switch-on"===a)j.place(this.onSwitchLabel,this.switchLabelContainer,"first"),h.set(this.handleAP,"left",this.width+(this.master&&this.hover?0:6)+"px");(this.offSwitchLabel||this.showSwitchLabels)&&"switch-off"===a&&j.place(this.offSwitchLabel,this.switchLabelContainer,"first");"switch-middle"===a&&this.width&&h.set(this.handleAP,"left",this.width/2+5+"px")}},_setColor:function(){var a=this,b="blue";f.forEach(a._colors,function(c){a.color===c&&(b=c)});this.currentColor?e.remove(this.domNode,
this.currentColor):this.currentColor=b;this.currentColor=b+"-switch-color";e.add(this.domNode,this.currentColor)},_setEvents:function(){var c=this,d=function(a){c.disabled||("middle"===c.get("value")?a=!0:void 0===a&&(a=!c.get("value")),c.set("value",a),c._onChange(a),c.onChange(a),c.master&&c._setMaster(a))};b(this.domNode,"click",function(){d()});b(this.domNode,"keydown",function(a){"Enter"===a.keyIdentifier||13===a.keyCode?d():"Left"===a.keyIdentifier||37===a.keyCode?d(!1):("Right"===a.keyIdentifier||
39===a.keyCode)&&d(!0)});b(this.domNode,a.enter,function(){c.focusOnHover&&c.domNode.focus()});b(this.domNode,a.leave,function(){c.domNode.blur()})},_setMasterEvents:function(){var a=this;this.initialize=!0;this.childrenValues=[];if(a.children){var b=0,c=0,d=function(){c=b=0;f.forEach(a.childrenValues,function(a){a?b++:c++});0===b&&0<c?a.set("value",!1):0<b&&0===c?a.set("value",!0):a.set("value","middle")},h=function(){a.childrenValues=[];f.forEach(a.children,function(b){b=b.get("value");a.childrenValues.push(b)});
d()};if(this.initialize)this.value?this._setMaster(this.value):h(),this.initialize=!1,delete this.initialize;f.forEach(a.children,function(a){a._onChange=function(){h()}})}e.add(this.domNode,"webext-switch-master")},_setMaster:function(a){f.forEach(this.children,function(b){b.set("value",a)})},_setLabel:function(){var a="after";"after"!==this.labelPlacement&&(a="before",e.add(this.domNode,"webext-switch-label-before"));j.create("div",{innerHTML:this.labelText.escape(),className:"webext-switch-label inline-block"},
this.wrapperAP,a)},_onChange:function(){},onChange:function(){}})})},"deploy/widgets/workflow/ValidateGraph":function(){define(["dojo/_base/declare"],function(l){var m=l("deploy.widgets.workflow.ValidateGraph",[],{});m.validate=function(k){var k=k.graph,j=k.model,e=k.getDefaultParent(),h=[];m.helper(k,j,e,h);e=!1;for(j=0;j<h.length;j++)h[j].activity&&(e=h[j].activity.refreshOverlays(!0)||e);k.refresh();return e};m.helper=function(k,j,e,h){var d,c=j.getChildCount(e);for(d=0;d<c;d++){var b=j.getChildAt(e,
d);b.edge||(b.activity&&b.activity.isContainer&&m.helper(k,j,b,h),h.push(b))}};return m})},"deploy/widgets/workflow/GraphExploreDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/dom-class,dojo/dom-geometry,dojo/dom-attr,dojo/date/locale,dojo/aspect,dojo/on,dojo/has,dojo/query,dojo/_base/event,dojo/_base/lang,dojo/window,dijit/form/Button,dijit/form/Textarea,idx/widget/ResizeHandle,js/webext/widgets/TabManager,js/webext/widgets/Dialog".split(","),function(l,m,k,j,
e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return l("deploy.widgets.workflow.GraphExploreDialog",[w],{postCreate:function(){this.inherited(arguments);var a=this;k.set(this.containerContainer,{maxHeight:"1000px"});k.set(this.titleBar,{padding:"15px 0"});m.create("div",{innerHTML:i18n("Explore"),style:{display:"inline-block"}},this.titleNode);this.addTabManagerWidget();this.resizeWidget=(new s({activeResize:!1,animateSizing:!1,minHeight:200,minWidth:200,targetContainer:this.containerNode,onResize:function(){var b=
e.position(a.containerNode);util.setCookie("savedExplorerWidth",b.w.toString());util.setCookie("savedExplorerHeight",b.h.toString());a.oposition()}})).placeAt(this.containerContainer);this.positioned=this.sized=!1;this._size=function(){if(!a.sized){a.sized=!0;var b=t.getBox(),c=Math.min(util.getCookie("savedExplorerWidth")||1E3,b.w-150),b=Math.min(util.getCookie("savedExplorerHeight")||700,b.h-150);k.set(a.containerNode,{width:c+"px",height:b+20+"px",overflow:"hidden",position:"inherit"});if(util.getCookie("savedExplorerLeft")&&
util.getCookie("savedExplorerWidth"))k.set(a.domNode,{left:util.getCookie("savedExplorerLeft")+"px",top:util.getCookie("savedExplorerTop")+"px"}),a.positioned=!0}};this.oposition=this._position;this._position=function(){if(!a.positioned)a.positioned=!0,a.oposition()};c.around(this,"hide",function(a){return function(){var b=this,c=!1;try{c=this.iframe.contentWindow.document.hasChanges}catch(d){}if(c&&!this._destroying){var e=new w;e.containerContainer.style.maxHeight="1000px";m.create("div",{innerHTML:i18n("Unsaved changes")},
e.titleNode);(new o({value:i18n("Close without saving changes?"),readonly:!0,onfocus:"this.blur()","class":"noBoxShadow",style:{font:"normal 12px tahoma",border:"0"}})).placeAt(e.containerNode);c=m.create("div",{className:"underField"},e.containerNode);(new q({label:i18n("Yes"),onClick:function(){a.apply(b,arguments);b.editor.refreshStepPalette();e.destroy()}})).placeAt(c);(new q({"class":"idxButtonSpecial",label:i18n("No"),onClick:function(){e.destroy()}})).placeAt(c);e.show()}else util.setCookie("savedExplorerLeft",
k.get(b.domNode,"left").toString()),util.setCookie("savedExplorerTop",k.get(b.domNode,"top").toString()),a.apply(this,arguments),this.editor.refreshStepPalette()}})},addTabManagerWidget:function(){var a=this;this.tabAttach=m.create("div",{style:{width:"100%",height:"100%",border:"1pt solid lightGray"}},this.containerNode);var b=m.create("div",{"class":"loading-spinner",style:"position: absolute; left:50%; top: 50%;"},this.tabAttach),c=window.location.href.split("/");this.iframe=m.create("iframe",
{src:c[0]+"//"+c[2]+"/index.jsp"+(this.editor.exploreUrl||""),style:"border: 0; width: 100%; height: 100%; overflow: hidden;",id:"explore_iframe_id",onload:function(){j.add(a.iframe.contentWindow.document.body,"explorer-view");j.add(b,"hidden")},onerror:function(){}});h.set(this.iframe,"data-process-id",this.editor.processId);this.tabAttach.appendChild(this.iframe)}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],
function(l,m,k,j){return l("dijit.form.Textarea",[j,k],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);m.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/has,dojo/_base/lang,dojo/on,dojo/_base/window,../Viewport".split(","),
function(l,m,k,j,e,h,d){k.add("textarea-needs-help-shrinking",function(){var c=h.body(),b=m.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},c,"last"),a=b.scrollHeight>=b.clientHeight;c.removeChild(b);return a});return l("dijit.form._ExpandingTextAreaMixin",
null,{_setValueAttr:function(){this.inherited(arguments);this.resize()},postCreate:function(){this.inherited(arguments);var c=this.textbox;c.style.overflowY="hidden";this.own(e(c,"focus, resize",j.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(d.on("resize",j.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(c){this.inherited(arguments);this.resize()},_estimateHeight:function(){var c=this.textbox;c.rows=(c.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},
resize:function(){function c(){var a=!1;if(""===b.value)b.value=" ",a=!0;var c=b.scrollHeight;if(a)b.value="";return c}var b=this.textbox;if("hidden"==b.style.overflowY)b.scrollTop=0;if(!this.busyResizing){this.busyResizing=!0;if(c()||b.offsetHeight){var a=c()+Math.max(b.offsetHeight-b.clientHeight,0),d=a+"px";if(d!=b.style.height)b.style.height=d,b.rows=1;if(k("textarea-needs-help-shrinking")){var e=c(),h=b.style.minHeight,j=4,l=b.scrollTop;b.style.minHeight=d;for(b.style.height="auto";0<a;){b.style.minHeight=
Math.max(a-j,4)+"px";d=c();e-=d;a-=e;if(e<j)break;e=d;j<<=1}b.style.height=a+"px";b.style.minHeight=h;b.scrollTop=l}b.style.overflowY=c()>b.clientHeight?"auto":"hidden";if("hidden"==b.style.overflowY)b.scrollTop=0}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(l,m,k,j){return l("dijit.form.SimpleTextarea",j,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
postMixInProperties:function(){if(!this.value&&this.srcNodeRef)this.value=this.srcNodeRef.value;this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);k("ie")&&this.cols&&m.add(this.textbox,"dijitTextAreaCols")},filter:function(e){e&&(e=e.replace(/\r/g,""));return this.inherited(arguments)},_onInput:function(e){if(this.maxLength){var h=parseInt(this.maxLength),d=this.textbox.value.replace(/\r/g,""),h=d.length-h;if(0<h){var c=this.textbox;if(c.selectionStart){var b=c.selectionStart,
a=0;if(k("opera"))a=(this.textbox.value.substring(0,b).match(/\r/g)||[]).length;this.textbox.value=d.substring(0,b-h-a)+d.substring(b-a);c.setSelectionRange(b-h,b-h)}else if(this.ownerDocument.selection)c.focus(),d=this.ownerDocument.selection.createRange(),d.moveStart("character",-h),d.text="",d.select()}}this.inherited(arguments)}})})},"js/webext/widgets/TabManager":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/dom-geometry,dojo/on,dojo/query,dijit/_TemplatedMixin,dijit/_WidgetBase".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l([a,b],{templateString:'<div data-dojo-attach-point="tabContainerAttach" class="tabManager"></div>',tabContainerClass:"secondLevelTabs",isTopLevelTabs:!1,postCreate:function(){var a=this;a.inherited(arguments);a.tabSet.selectedTopLevelTab&&m.forEach(navBar.topLevelTabLinks,function(b){b.tab.id===a.tabSet.selectedTopLevelTab?(k.add(b,"selected"),navBar.topLevelTab=b.tab):k.remove(b,"selected")});a.arrayOfTabLinks=[];("main"!==a.tabSet.id||a.isTopLevelTabs)&&m.forEach(a.tabSet.tabs,
function(b){var c=!0,d=!1;void 0!==b.isVisible&&(c=b.isVisible());void 0!==b.isDisabled&&(d=b.isDisabled());if(c){c=j.create("a",{"class":"tab"},a.tabContainerAttach);j.create("span",{"class":"tabLabel",innerHTML:b.label},c);c.tab=b;d?e.set(c,{backgroundColor:"#D3D3D3",color:"black"}):(c.tabIndex=0,k.add(c,"linkPointer"),b===a.tab&&k.add(c,"selected"),d=a.getHashForTab(a.tabSet.id,b.id),c.href="#"+d,c.onclick=function(){return!navBar.checkPreventPageChange()});if(void 0!==b.help)a.tabHelp=j.create("a");
a.arrayOfTabLinks.push(c);void 0!==b.style&&e.set(c,b.style);void 0!==b.className&&k.add(c,b.className);void 0!==b.width&&e.set(c,"width",b.width);void 0!==b.backgroundColor&&e.set(c,"backgroundColor",b.backgroundColor);void 0!==b.color&&e.set(c,"color",b.color)}});var b=a.arrayOfTabLinks.length;1<b?(a.isTopLevelTabs?setTimeout(function(){var c=h.position(a.arrayOfTabLinks[b-1]),c=c.x+c.w;1E3<c&&(k.add(a.domNode,"overflow-tabs"),1200<c?(k.add(a.domNode,"overflow-tabs-1200"),1600<c?k.add(a.domNode,
"overflow-tabs-1600"):1400<c&&k.add(a.domNode,"overflow-tabs-1400")):1100<c&&k.add(a.domNode,"overflow-tabs-1100"))},0):m.forEach(c("body"),function(a){k.remove(a,"noSecondLevelTabs")}),k.remove(a.domNode,"hidden")):(a.isTopLevelTabs||m.forEach(c("body"),function(a){k.add(a,"noSecondLevelTabs")}),k.add(a.domNode,"hidden"))},getHashForTab:function(a,b){var c=config.getTabSet(a),d=config.getTab(a,b),e="";void 0!==c.getTabHash?e+=c.getTabHash(d):(e+=c.id,m.forEach(c.hashPattern,function(a){"tab"===a?
e+="/"+d.id:appState[a]&&(e+="/"+appState[a].id)}));return e},markTabSelected:function(a){m.forEach(this.arrayOfTabLinks,function(b){b.tab.id===a?k.add(b,"selected"):k.remove(b,"selected")})}})})},"deploy/widgets/process/RequiredCommentForm":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dojo/dom-construct","js/webext/widgets/ColumnForm"],function(l,m,k,j,e){return l("deploy.widgets.process.RequiredCommentForm",[m,k],{templateString:'<div class="requiredCommentForm"><div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){var h=this,d=new e({onSubmit:function(c){h.callback(c);d.destroy()},onCancel:function(){d.destroy();h.callback()},validateFields:function(c){var b=[];c&&c.comment&&(1>c.comment.length||1E3<c.comment.length)&&b.push(i18n("A commit message must be provided containing less than 1,000 characters."));return b}});d.addField({name:"comment",label:i18n("Comment"),description:i18n("Provide a comment describing your changes."),required:!0,type:"Text Area"});d.placeAt(this.formAttach)}})})},
"deploy/widgets/workflow/GraphTooltips":function(){define(["dojo/_base/declare"],function(l){return l("deploy.widgets.workflow.GraphTooltips",[],{utility:{finish:i18n("Ends processing. A process can have more than one Finish step. All processes must reach a Finish step to complete successfully."),acquireLock:i18n("This step acquires a lock on a specified string value. You can use locks to prevent concurrent modification of resources."),addResourceInventory:i18n("With this process step, the component resource that the process is running against will have an inventory entry created for it with the specified status."),
join:i18n("The Join step waits until all incoming steps finish. If any incoming step fails or does not run, the Join step causes the process to fail."),note:i18n("Add a note to the diagram."),manualTask:i18n("A manual task interrupts a process until manual intervention is done. A task-interrupted process remains suspended until the targeted user or users respond. Typically, manual tasks are removed after the process is tested or automated."),applicationManualTask:i18n("A manual task interrupts an application process until manual intervention is done. A task-interrupted process remains suspended until the targeted user or users respond. Typically, manual tasks are removed after the process is tested or automated."),
componentManualTask:i18n("A manual task interrupts a component process until manual intervention is done. A task-interrupted process remains suspended until the targeted user or users respond. Typically, manual tasks are removed after the process is tested or automated."),releaseLock:i18n("This step releases a lock on a specified string value."),removeResourceInventory:i18n("With this process step, the component resource that the process is running against will have an inventory entry removed from it."),
componentProcess:i18n("With this step, you can run another process belonging to this component."),runProcess:i18n("This step runs a generic process as a step in an application process."),setStatus:i18n("This step sets the ending status of the process. The step can specify that the process is completed or failed."),"switch":i18n("Use this step to create branches in the process that are based on the value of a property."),applyConfiguration:i18n("Runs a component process of the type Operational (No Version Needed) or Configuration Deployment."),
installComponent:i18n("This step installs the selected component with one of the processes that are defined for the component."),installMultipleComponents:i18n("Install multiple components that are based on component tags or resource tags."),rollbackComponent:i18n("Use this process step to roll back a component version to the version in a snapshot or to the version that was deployed when the process began."),rollbackMultipleComponents:i18n("Use this step to roll back multiple component versions to versions in a snapshot or to versions that were deployed when the process began. The multiple components are based on component tags or resource tags."),
forEachTouchedResourceContainer:i18n("Runs the specified generic process on each resource that is affected by the application process."),runMultipleOperational:i18n("Runs the operational (no version needed) process for multiple components."),forEachVersionContainer:i18n("Use this step to run the specified process once for each version of the specified component."),uninstallComponent:i18n("Use this step to uninstall the selected component."),uninstallMultipleComponents:i18n("Use this step to uninstall multiple components that are based on component tags or resource tags."),
eachAgentIterator:i18n("Run sub process for each agent"),eachTagIterator:i18n("Run sub process for each tag, on resources with the specified tag."),folder:i18n("Run one of this component's processes."),applicationApprovalTask:i18n("A manual task which requests approval for an application."),componentApprovalIterator:i18n("A manual task which requests approval for a component."),environmentApprovalTask:i18n("A manual task which requests approval for an environment.")},utilityID:{ApplyConfigurationActivity:"applyConfiguration",
InstallComponentActivity:"installComponent",InstallMultipleComponentsActivity:"installMultipleComponents",RollbackComponentActivity:"rollbackComponent",RollbackMultipleComponentsActivity:"rollbackMultipleComponents",EachTouchedResourceActivity:"forEachTouchedResourceContainer",RunOperationalProcessMultipleActivity:"runMultipleOperational",EachVersionComponentActivity:"forEachVersionContainer",UninstallComponentActivity:"uninstallComponent",UninstallMultipleComponentsActivity:"uninstallMultipleComponents",
EachAgentIteratorActivity:"eachAgentIterator",EachTagIteratorActivity:"eachTagIterator",ApplicationRunComponentProcessActivity:"folder",ComponentRunComponentProcessActivity:"componentProcess"},plugin:{},drawerTip:{},get:function(l,k,j){var e=null;if(k&&k.overlays){var h=null;for(h in k.overlays.map)if(k.overlays.map.hasOwnProperty(h)&&j===k.overlays.map[h].node.firstChild){j=k.overlays.map[h].image;if(-1!==j.indexOf("step_copy"))e=i18n("Copy this step to the Clipboard drawer");else if(-1!==j.indexOf("close_step"))e=
i18n("Delete this step");else if(-1!==j.indexOf("step_edit"))e=i18n("Edit this step's properties");else if(-1!==j.indexOf("step_info")||-1!==j.indexOf("step_error"))e=i18n("Not all of this step's required properties have been set");break}}if(!e)l=l.activity||l,l=l.command||l,j=null,e=l.activityId?l.activityId.split("_"):[],4<e.length&&this.utilityID[e[4]]?(j=this.utilityID[e[4]],e=this.utility[j]):l.type&&"plugin"!==l.type?(j=l.type,e=this.utility[j]):(j=l.id,e=(e=this.plugin[j])?i18n(e):this.plugin[l.id]=
l.description||l.name),h=this.drawerTip[j],!h&&l.drawerTip?this.drawerTip[j]={drawer:l.drawerTip,step:l.name,plugin:l.plugin&&l.plugin.name?l.plugin.name:null}:k&&h&&(l=[],"folder"!==j&&l.push(i18n("Step: %s",i18n(h.step))),l.push(i18n("Description: %s",i18n(e))),l.push(i18n("Drawer: %s",h.drawer)),h.plugin&&l.push(i18n("Plugin: %s",h.plugin)),e=l.join("\n"));if(e)l=document.createElement("div"),l.innerHTML=e,e=l.childNodes[0].nodeValue;return e||""},getStepName:function(l){l=l.activity.data;if(l.command)return l.command.name;
var k=null,k=l.activityId?l.activityId.split("_"):[],k=4<k.length&&this.utilityID[k[4]]?this.utilityID[k[4]]:l.type&&"plugin"!==l.type?l.type:l.id;return(l=this.drawerTip[k])?i18n(l.step):null}})})},"deploy/widgets/workflow/GraphDiagram":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_Widget"],function(l,m,k){return l("deploy.widgets.workflow.GraphDiagram",[k,m],{templateString:'<div data-dojo-attach-point="graphContainer"><div data-dojo-attach-point="dialogAttach" class="hide-notification process-save-dialog"></div><div><div data-dojo-attach-point="toolbarAttach"></div><div data-dojo-attach-point="mxgraphAttach" class="graphView"></div></div><div data-dojo-attach-point="magnifyAttach" class="graphMagnify"></div><div data-dojo-attach-point="outlineAttach" class="graphOutline"></div><div data-dojo-attach-point="helpAttach" class="designer-help">  <div>    <a class="linkPointer" data-dojo-attach-point="hideHelpAttach">'+
i18n("Hide Help")+"</a>  </div>  <h2>"+i18n("About the Process Flow Designer")+"</h2>  <p>"+i18n("Before you design a process, you must understand the sequence of tasks that the process models. For example, in a deployment task, you might need to know the source and destination locations of a WAR file or prepare a script that the process runs.")+"  </p>  <p>"+i18n("To define a process:")+"    <ul>     <li>"+i18n("Add a step. Take the following actions:")+"</li>       <ul>         <li>"+i18n("Locate the appropriate step in the palette. If you know the name of the step, you can search for it.")+
"</li>         <li>"+i18n("Drag the step from the palette into the design space.")+"</li>         <li>"+i18n("Provide values for all required properties.")+"</li>       </ul>     <li>"+i18n("In this manner, add all the required steps to the process.")+"</li>     <li>"+i18n("Connect the steps in the order that they run. Each step in the process must connect to other steps. You can set steps to run in sequence or in parallel, but each step must be included in the process flow. You must include the Start and Finish step in the sequence of process steps.")+
"</li>       <ul>         <li>"+i18n("Hover the cursor over the step that you want to use as the origin of the connection. The connection tool is displayed.")+"</li>         <li>"+i18n("Drag the connection tool over the target step. The step beneath the connection tool is highlighted.")+"</li>         <li>"+i18n("Release the connection tool over the target step to complete the connection.")+"</li>       </ul>     <li>"+i18n("When your process is complete, click Done to return to wizard.")+"</li>    </ul>  </p>  <p>&nbsp;</p></div></div>",
postCreate:function(){this.inherited(arguments);this.editor.createGraph(this)}})})},"deploy/widgets/workflow/GraphPaletteDialog":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/dom-class,dojo/dom-geometry,dojo/date/locale,dojo/aspect,dojo/on,dojo/has,dojo/_base/event,dojo/_base/connect,dojo/_base/lang,dojo/_base/array,dojo/window,dijit/TitlePane,dijit/form/Button,js/webext/widgets/Dialog,deploy/widgets/workflow/GraphPaletteWidget".split(","),function(l,m,k,j,e,h,d,c,b,
a,f,n,r,t,q,o,s,u){return l("deploy.widgets.workflow.GraphPaletteDialog",[s],{editor:null,positionCell:!0,postCreate:function(){this.inherited(arguments);var a=this;k.set(this.containerContainer,{maxHeight:"1000px"});m.create("div",{innerHTML:i18n("Add Step")},this.titleNode);this.addPaletteWidget();this.buttonContainer=m.create("div",{className:"underField"},this.containerNode);this.selectedItem=null;(new o({label:i18n("Add"),"class":"idxButtonSpecial",onClick:function(){a.selectedItem&&a.releaseFunction(a.selectedItem)}})).placeAt(this.buttonContainer);
(new o({label:i18n("Cancel"),onClick:function(){a.hide()}})).placeAt(this.buttonContainer);this._size=function(){var b=t.getBox(),b=Math.min(600,b.h-300);k.set(a.paletteWidget.treeAttach,"height",b+"px");k.set(a.paletteWidget.paletteContainer,"height",b+"px");k.set(a.containerNode,{width:"415px",height:b+100+"px",overflow:"hidden",position:"inherit"});k.set(a.containerContainer,{height:b+130+"px",overflow:"hidden"});a._position();a.paletteWidget.tree.resize()}},addPaletteWidget:function(){var a=null,
b=this,e=function(c){a.dragOffset.x=0;a.dragOffset.y=0;if(a.begX){if(10<Math.abs(a.begX-c.clientX)||10<Math.abs(a.begY-c.clientY))a.moving=!0}else a.begX=c.clientX,a.begY=c.clientY,a.moving=!1;a.moving&&a.mouseMoveHandler&&(b.isDialogVisible&&(delete b.isDialogVisible,b.hide()),a.mouseMoveHandler(c))},f=function(b){if(this.enabled&&!mxEvent.isConsumed(b))a=b.currentTarget.ds,this.startDrag(b),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),mxEvent.addListener(document,"mousemove",e),this.mouseUpHandler=
mxUtils.bind(this,this.mouseUp),mxEvent.addListener(document,"mouseup",this.mouseUpHandler),mxEvent.consume(b)},h=function(a){b.selectedItem&&j.remove(b.selectedItem,"selected");b.selectedItem=a.currentTarget;j.add(b.selectedItem,"selected")},o=function(a){b.releaseFunction(a.currentTarget)},n=function(){null!==a.mouseUpHandler&&(mxEvent.removeListener(document,"mousemove",e),mxEvent.removeListener(document,"mouseup",a.mouseUpHandler))},k=m.create("div",{},this.containerNode);this.paletteWidget=new u({editor:this.editor,
postStepCreate:function(b){c(b,"click",h);c(b,"dblclick",o);if(a=b.ds){var e=b.mxListenerList[0];mxEvent.removeListener(b,e.name,e.f);mxEvent.addListener(b,e.name,mxUtils.bind(a,f));d.before(a,"mouseUp",n)}},nodrag:mxClient.IS_IE},k);this.paletteWidget.startup();j.add(this.paletteWidget.treeAttach,"dialogPaletteTree")},releaseFunction:function(a){var b=0,c=0,d=this.editor.graph;this.dropDeltaX=this.dropDeltaX||0;this.dropDeltaY=this.dropDeltaY||-50;this.dropDeltaY+=80;if(600<this.dropDeltaY)this.dropDeltaY=
25,this.dropDeltaX+=300;for(var c=this.dropDeltaY,e=d.model,f=d.getDefaultParent(),h=e.getChildCount(f),j=0,j=0;j<h;j++){var o=e.getChildAt(f,j);if(!o.edge){var n=e.getGeometry(o),k=0<e.getEdges(o).length,o=o.activity&&o.activity.isContainer;if(k||o)n.x+n.width>b&&(b=n.x+n.width)}}a.releaseFunction(d,null,null,b+this.dropDeltaX+100,c);this.hide()},show:function(a){var b=this,c=a||{};if(c.onlyShow){var d=null;for(d in this.titlePanes)if(this.titlePanes.hasOwnProperty(d)){var e=this.titlePanes[d];if(d===
c.onlyShow)j.remove(e.domNode,"hidden");else if(!j.contains(e.domNode,"hidden"))j.add(e.domNode,"hidden"),e.restoreMe=!0}}this.inherited(arguments);this._fadeInDeferred&&this._fadeInDeferred.then(function(){b.resize()});if(this.selectedItem)j.remove(this.selectedItem,"selected"),this.selectedItem=null;this.paletteWidget.resetSearch();this.isDialogVisible=!0}})})},"dijit/TitlePane":function(){define("dojo/_base/array,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/_base/event,dojo/fx,dojo/_base/kernel,dojo/keys,./_CssStateMixin,./_TemplatedMixin,./layout/ContentPane,dojo/text!./templates/TitlePane.html,./_base/manager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return m("dijit.TitlePane",[r,n,f],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:q.defaultDuration,baseClass:"dijitTitlePane",templateString:t,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);k.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
"dijitTitlePaneTitle");var a=this.hideNode,b=this.wipeNode;this._wipeIn=c.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=c.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){l.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(j.remove(this.focusNode,"aria-controls"),j.remove(this.focusNode,
"tabIndex"),j.remove(this.focusNode,"aria-pressed"));this._set("toggleable",a);this._setCss()},_setContentAttr:function(a){!this.open||!this._wipeOut||"playing"==this._wipeOut.status()?this.inherited(arguments):(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),h.setMarginBox(this.wipeNode,{h:h.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display="")},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var a=
this.titleBarNode||this.focusNode,b=this._titleBarClass;this._titleBarClass="dijit"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");e.replace(a,this._titleBarClass,b||"");this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(b){b.keyCode==a.ENTER||b.keyCode==a.SPACE?this.toggleable&&(this.toggle(),d.stop(b)):b.keyCode==a.DOWN_ARROW&&this.open&&(this.containerNode.focus(),b.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){b.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.",
"","2.0");this.set("title",a)}})})},"url:dijit/templates/TitlePane.html":'<div>\n\t<div data-dojo-attach-event="onclick:_onTitleClick, onkeydown:_onTitleKey"\n\t\t\tclass="dijitTitlePaneTitle" data-dojo-attach-point="titleBarNode" id="${id}_titleBarNode">\n\t\t<div class="dijitTitlePaneTitleFocus" data-dojo-attach-point="focusNode">\n\t\t\t<img src="${_blankGif}" alt="" data-dojo-attach-point="arrowNode" class="dijitArrowNode" role="presentation"\n\t\t\t/><span data-dojo-attach-point="arrowNodeInner" class="dijitArrowNodeInner"></span\n\t\t\t><span data-dojo-attach-point="titleNode" class="dijitTitlePaneTextNode"></span>\n\t\t</div>\n\t</div>\n\t<div class="dijitTitlePaneContentOuter" data-dojo-attach-point="hideNode" role="presentation">\n\t\t<div class="dijitReset" data-dojo-attach-point="wipeNode" role="presentation">\n\t\t\t<div class="dijitTitlePaneContentInner" data-dojo-attach-point="containerNode" role="region" id="${id}_pane" aria-labelledby="${id}_titleBarNode">\n\t\t\t\t<\!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',
"deploy/widgets/workflow/SavedProcessDiagram":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/xhr,dojo/dom-construct,dojo/dom-style,dojo/dom-class,dijit/_TemplatedMixin,dijit/_Widget,deploy/widgets/workflow/BaseGraph,deploy/widgets/workflow/GraphEdgeManager,deploy/widgets/workflow/activity/ActivityCreator".split(","),function(l,m,k,j,e,h,d,c,b,a){return l("deploy.widgets.workflow.SavedProcessDiagram",[a],{postCreate:function(){this.diagramOnly=!0;this.diagramOnlyData&&
this._assembleWidget(this.diagramOnlyData)},_assembleWidget:function(a){this.createGraph();this.graphStartupDelayed(a);this.domNode.appendChild(this.diagramOnlyContainer);h.set(this.domNode,"position","relative");h.set(this.domNode,"padding","0px");h.set(this.domNode,"width",this.diagramOnlyWidth+"px");h.set(this.domNode,"height",this.diagramOnlyHeight+"px");h.set(this.domNode,"overflow","hidden");this.domNode.appendChild(this._getOverlayDiv())},_getOverlayDiv:function(){var a=e.create("div");h.set(a,
"position","absolute");h.set(a,"top","0px");h.set(a,"left","0px");h.set(a,"width",this.diagramOnlyWidth+"px");h.set(a,"height",this.diagramOnlyHeight+"px");return a},fitDiagram:function(a){var b=this._calculateScaleOffsets(a);a.scaleAndTranslate(b.scale,b.x,b.y)},resize:function(){},_calculateScaleOffsets:function(a){var b=a.getGraphBounds(),c=b.width/a.scale,a=b.height/a.scale,b=Math.min((this.diagramOnlyWidth-20)/c,(this.diagramOnlyHeight-20)/a);return{scale:b,x:((this.diagramOnlyWidth-20-c*b)/
2+10)/b,y:((this.diagramOnlyHeight-20-a*b)/2+10)/b}}})})},"deploy/widgets/workflow/BaseGraph":function(){define("dojo/_base/declare,dijit/layout/ContentPane,idx/layout/BorderContainer,dojo/_base/array,dojo/_base/lang,dojo/_base/xhr,dojo/window,dojo/sniff,dojo/dom,dojo/dom-style,dojo/dom-class,dojo/dom-construct,dojo/dom-attr,dojo/dom-geometry,dojo/aspect,dojo/on,dojo/mouse,dojo/query,dojo/_base/Deferred,dojo/DeferredList,deploy/widgets/workflow/GraphEdgeManager,deploy/widgets/workflow/activity/ActivityCreator,js/webext/widgets/Alert,dijit/form/Button,dijit/form/Textarea,js/webext/widgets/Dialog,deploy/widgets/workflow/GraphDiagram,deploy/widgets/workflow/GraphToolbar,deploy/widgets/workflow/GraphLayout,deploy/widgets/workflow/GraphTooltips,deploy/widgets/workflow/GraphPalettePane,deploy/widgets/workflow/GraphPaletteDialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L){return l("deploy.widgets.workflow.BaseGraph",[m],{graph:null,edgeManager:null,tooltips:null,activityCreator:null,initialized:!1,loaded:null,diagramOnly:void 0,MANUAL_ZOOM_THRESHOLD:0.85,AUTOLAYOUT_ZOOM_THRESHOLD:0.85,MAX_MAGNIFY_HEIGHT:125,postCreate:function(){this.inherited(arguments);var b=this;this.loaded=new w;this.tooltips=new K;this.domNode.style.padding=0;this.domNode.style.overflow="hidden";a.set(this.domNode,"border-top",
"1px solid #d2d2d2");u(".footer-spacer")[0].style.height=0;this.exploreMode=!!window.parent.document.getElementById("explore_iframe_id");this.bc=new k({persist:!0,gutters:!1,liveSplitters:!0,style:"width: 100%;min-width:800px",onPanelOpen:function(){b.exploreMode||util.setCookie("graphPaletteClosed","false")},onPanelClose:function(){b.exploreMode||util.setCookie("graphPaletteClosed","true")}});this.leftPane=new m({persist:!0,region:"left",minSize:25,splitter:!0,style:"width: 260px; border:none;background-color: #808080;visibility:hidden;"});
this.resizePalettePromise=new w;var d=q.after(this.leftPane,"resize",function(){d.remove();b.resizePalettePromise.resolve()});this.graphPane=new m({minSize:75,region:"center",style:"border:none;overflow:hidden;min-width:800px"});this.graphDiagram=new E({editor:this});this.graphPane.addChild(this.graphDiagram);a.set(this.graphDiagram.toolbarAttach,{position:"relative",borderBottom:"1px solid #D2D2D2",display:"none"});this.resizePalettePromise.then(function(){a.set(b.graphDiagram.toolbarAttach,"display",
"")});this.toolbarContainer=n.create("div",{style:{display:"inline-block"}},this.graphDiagram.toolbarAttach);var e=c("safari");if(!e||e&&9>e)this.graphPane.on("wheel",_.debounce(function(a){b.zoomTimeout&&clearTimeout(b.zoomTimeout);b.zoomTimeout=setTimeout(function(){if(!a.ctrlKey){var c=b.graph.view,d=c.getGraphBounds(),e,f;if(0>a.deltaY&&c.scale<G.MAX_SCALE)e=-G.ZOOM_DELTA_SCALE,f=c.scale*G.ZOOM_FACTOR;else if(0<a.deltaY&&c.scale>G.MIN_SCALE)e=G.ZOOM_DELTA_SCALE,f=c.scale*(1/G.ZOOM_FACTOR);if(f){var h=
a.layerX+d.getCenterX()-b.paneBounds.w/2,j=a.layerY+d.getCenterY()-b.paneBounds.h/2,o=d.x/c.scale+5,d=d.y/c.scale+4,n=G.ZOOM_DELTA_LIMIT/(c.scale*G.ZOOM_FACTOR),h=Math.min(h,n),h=Math.max(h,-n),j=Math.min(j,n),j=Math.max(j,-n);c.scaleAndTranslate(f,o+e*h,d+e*j)}}},5)},0));this.dataSetPromise=new w;this.resizeGraphPromise=new w;var f=q.after(this.graphPane,"resize",function(){f.remove();b.resizeGraphPromise.resolve()});this.graphPanePromise=new w;q.before(this.graphPane,"resize",function(a){var c=
!b.paneBounds;b.paneBounds=a;c&&b.graphPanePromise.resolve()});(new v([this.dataSetPromise,this.resizeGraphPromise])).then(function(){b.graphStartupDelayed(b.data)});this.bc.addChild(this.graphPane);this.addChild(this.bc);this.bc.startup();this.resize()},buildToolbar:function(a){this.toolbar=new D({editor:this,versionData:a})},destroyToolbar:function(){this.toolbar.destroyToolbar()},refreshStepPalette:function(a,b){e.mixin(this.graphPalettePane,a);this.graphPalettePane&&this.graphPalettePane.refreshStepPalette(a,
b)},graphStartup:function(b){var c=window.parent.document.getElementById("explore_iframe_id");if(c&&c.dataset.processId===this.processId)new C({message:i18n("You cannot edit a process from within itself.")}),this.readOnly=!0;this.readOnly?a.set(this.graphDiagram.toolbarAttach,"display",""):(this.graphPaletteDialog=new L({"class":"nonModal",editor:this,mode:this.mode}),c=null,"true"!==util.getCookie("graphPaletteClosed")&&!this.exploreMode&&(c=n.create("div",{"class":"loading-spinner",style:"position: absolute; left:75px; top: 50%;"},
this.domNode)),this.graphPalettePane=this.graphPaletteDialog.palettePane=new N({spinner:c,editor:this,myPane:this.leftPane,paletteDialog:this.graphPaletteDialog,resizePalettePromise:this.resizePalettePromise,style:"height: 95%; width:100%",mode:this.mode}),this.leftPane.addChild(this.graphPalettePane),this.graphPalettePane.startup(),this.bc.addChild(this.leftPane),("true"===util.getCookie("graphPaletteClosed")||this.exploreMode)&&this.bc.collapse("left"));this.data=b;this.dataSetPromise.resolve()},
createGraph:function(b){var c=this;this.diagramOnly?(b=n.create("div"),a.set(b,"width",this.diagramOnlyWidth+"px"),a.set(b,"height",this.diagramOnlyHeight+"px"),this.diagramOnlyContainer=b):(this.diagram=b,b=this.diagram.mxgraphAttach,b.style.overflow="hidden",b.style.height=d.getBox().h+"px");mxEvent.disableContextMenu(b);mxConstants.SHADOWCOLOR="#CCCCCC";mxConstants.VERTEX_SELECTION_COLOR="#0099FF";mxConstants.HANDLE_FILLCOLOR="#FFFFFF";mxConstants.HIGHLIGHT_COLOR="#00B2EF";mxConstants.TARGET_HIGHLIGHT_COLOR=
"#00B2EF";mxConstants.VERTEX_HIGHLIGHT_COLOR="#00B2EF";mxConstants.DROP_TARGET_COLOR="#00B2EF";this.graph=new mxGraph(b);this.configureGraph();this.setGraphStyling();if(!this.diagramOnly)o(this.diagram.mxgraphAttach,s.leave,function(){c.graph.tooltipHandler.hide()}),this.graph.tooltipHandler.mouseMove=function(a,b){if(mxClient.IS_IE)b.evt.MSPOINTER_TYPE_MOUSE="mouse";mxTooltipHandler.prototype.mouseMove.call(this,a,b)},new mxOutline(this.graph,this.diagram.outlineAttach),this.magnifySvg=document.createElementNS(mxConstants.NS_SVG,
"svg"),this.magnifySvg.style.width="100%",this.magnifySvg.style.height="100%",this.magnifySvg.style.display="block",this.magnifyCanvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.magnifySvg.appendChild(this.magnifyCanvas),this.diagram.magnifyAttach.appendChild(this.magnifySvg);mxConnectionHandler.prototype.getIconPosition=function(a,b){var d=0,e=0;!c.zoomToSelectionData||c.zoomToSelectionData.cells[b.cell.id]?(d=b.getCenterX()+(0.5>this.graph.getView().scale?b.width/2:0),e=b.getCenterY(),
a.node.setAttribute("visibility","visible"),d-=a.bounds.width/2,e-=a.bounds.height/2):a.node.setAttribute("visibility","hidden");return new mxPoint(d,e)};this.graph.getSelectionModel().addListener(mxEvent.CHANGE,function(){c.graph.tooltipHandler.hide();c.zoomToSelectionData&&c.toolbar.zoomToSelection()});this.graph.getTooltip=function(a,b){return a.cell.activity?c.tooltips.get(a.cell.activity.data,a,b):a.cell.tooltip||""};this.graph.getStepName=function(a){return c.tooltips.getStepName(a)};this.graph.getLabel=
function(a){var b=mxGraph.prototype.getLabel.apply(this,arguments);return G.layoutLabel(c.graph,a,c.autolayout,b)};if(-1!==navigator.userAgent.indexOf("Trident/7.0"))mxClient.IS_IE=!0;mxClient.IS_IE&&(this.diagramOnly?a.set(b,"position",""):(a.set(this.diagram.mxgraphAttach,"position",""),a.set(this.diagram.outlineAttach,"position","")));this.edgeManager=new x({graphEditor:this,graphHasChanges:function(){c.graphHasChanges()}});this.activityCreator=new y({graphEditor:this,graphHasChanges:function(){c.graphHasChanges()}});
if(!this.diagramOnly&&"true"===util.getCookie("processSaved")){var b=util.getCookie("processSavedMessage"),e="true"===util.getCookie("error");this.showSavePopup(b,e)}},graphStartupDelayed:function(a){var b=this,c=this.graph.getDefaultParent(),d=this.graph.getModel();this.pauseLayout=!0;a&&a.children&&(a=this.getLowestGraphChild(a));this.autolayout="true"===util.getCookie("graphAutoLayout");if(a&&a.layoutMode){var f="auto"===a.layoutMode;if(f!==this.autolayout)this.autolayout=f}d.beginUpdate();this.activityCreator.addSavedActivity({type:"start"},
0,0);if(a&&a.children){j.forEach(a.children,function(c){var d=null,e=null,f=null,h=null,j=util.getNamedProperty(a.offsets,c.name);if(j&&(d=j.x+0,e=j.y,"note"===c.type))f=j.h,h=j.w;b.activityCreator.addSavedActivity(c,d,e,null,f,h)});var f=b.graph.getDefaultParent(),k=b.graph.getCellGeometry(b.getStartCell(f)).x,f=b.graph.getChildCells(f),s=G.calculateBoundsOfPlacedSteps(f).minX;k>s&&j.forEach(f,function(a){a.activity&&a.activity.isContainer&&j.forEach(a.children,function(a){a.geometry.x-=k-s})});
var l=this.getStartCell();j.forEach(a.edges,function(a){var e;e=a.from?d.filterCells(c.children,function(b){return b.activity&&b.activity.getName()===a.from})[0]:l;var f;a.to&&(f=d.filterCells(c.children,function(b){return b.activity&&b.activity.getName()===a.to})[0]);e&&f&&b.restoreEdge({from:e,to:f,type:a.type,value:a.value})})}this.getFinishCells().length||this.activityCreator.addNewActivity({type:"finish"},-5,420);d.endUpdate();if(!this.diagramOnly){var r=f=null;if(!this.readOnly)if(this.applicationProcess)r=
this.applicationProcess.id,f="application";else if(this.componentProcess)r=this.componentProcess.id,f=this.componentProcess.component?"component":"componentTemplate";this.cache=["",""];"firstDayWizard"!==this.mode&&f&&r&&h.get({url:bootstrap.restUrl+"process/"+f+"/"+r+"/propContext",handleAs:"json",load:function(a){if(a)b.cache[0]=a.prefixes,b.cache[1]=a.properties}});window.onbeforeunload=e.hitch(this,function(){if(document.hasChanges)return i18n("There are unsaved changes.")});if(r=u(".idxBreadcrumb")[0])for(var f=
0,r=u("a",r),q=function(a){var b=a.currentTarget.oldLink;if(document.hasChanges){var c=new z;(new A({value:i18n("Are you sure you want to navigate away from this page?")+"\n\n"+i18n("You have unsaved changes which will be lost."),readonly:!0,onfocus:"this.blur()","class":"noBoxShadow",style:{font:"normal 12px tahoma",border:"0"}})).placeAt(c.containerNode);a=n.create("div",{className:"underField"},c.containerNode);(new B({label:i18n("Yes"),"class":"idxButtonSpecial",onClick:function(){c.destroy();
document.hasChanges=!1;b.click()}})).placeAt(a);(new B({label:i18n("No"),onClick:function(){c.destroy()}})).placeAt(a);c.show()}else b.click()},f=0;f<r.length;f++){var m=r[f],t=m.cloneNode(!0);m.parentNode.replaceChild(t,m);t.oldLink=m;o(t,"click",q)}}this.graph.fit(G.MIN_SCALE);this.pauseLayout=!1;if(!this.diagramOnly)document.hasChanges=!1,this.initialized=!0,b.autolayout&&setTimeout(function(){b.pauseLayout||G.layout(b,{animate:!1})}),this.loaded.resolve()},getLowestGraphChild:function(a){var b=
a;j.forEach(a.children,function(a){"graph"===a.type&&(b=a)});b!==a&&(b=this.getLowestGraphChild(b));return b},restoreEdge:function(a){var b=this.graph.getDefaultParent();this.getStartCell();var c=a.from,d=a.type,e=a.value,a=this.graph.insertEdge(b,null,null,c,a.to);if(c.activity&&"switch"===c.activity.data.type)a.data.value=e,c=a.data.value||i18n("Default"),this.graph.labelChanged(a,c),e?this.graph.setDefaultEdge(a):this.graph.setDefaultEdge(a,!0);else if(!c.activity||"start"!==c.activity.data.type)"FAILURE"===
d?this.edgeManager.addErrorOverlay(a):"ALWAYS"===d&&this.edgeManager.addAlwaysOverlay(a);return a},getStartCell:function(a){a||(a=this.graph.getDefaultParent());var b=null;j.forEach(a.children,function(a){a.activity&&"start"===a.activity.data.type&&(b=a)});return b},getFinishCells:function(){return this.graph.getModel().filterDescendants(function(a){var b=!1;a.activity&&a.activity.data&&"finish"===a.activity.data.type&&(b=!0);return b})},getWorkflowJson:function(){var a=this.graph.getDefaultParent(),
b=this.graph.getCellGeometry(this.getStartCell());return this.getGraphJson(a,b.x,b.y)},getGraphJson:function(a,b,c){var d=this,e={type:"graph",layoutMode:this.autolayout?"auto":"manual",children:[],edges:[],offsets:[]};if(a.activity){var f=d.getStartCell(a);if(f)f=d.graph.getCellGeometry(f),e.startX=f.x-b,e.startY=f.y-c}j.forEach(a.children,function(a){if(a.edge){var f={};if(a.source.activity&&!a.source.activity.isUtilityCell())f.from=a.source.activity.getName();if(a.target.activity&&!a.target.activity.isUtilityCell())f.to=
a.target.activity.getName();f.type=a.data.type;f.value=a.data.value;e.edges.push(f)}else if(a.activity&&!a.activity.isUtilityCell()){var h=d.graph.getCellGeometry(a),f=h.x-b,j=h.y-c,o=h.height,h=h.width;e.children.push(a.activity.data);f={name:a.activity.getName(),x:f,y:j,h:o,w:h};e.offsets.push(f);if(a.activity.isContainer)a.activity.data.children=[d.getGraphJson(a,0,0)]}});return e},getChildrenByName:function(a,b,c,d){var e=this,f=[];b&&(a=a.toLowerCase());if(d){var h=d.name;h&&(b&&(h=h.toLowerCase()),
h===a&&f.push({cell:c,activity:d}));j.forEach(d.children,function(d){d&&!c.activity.isContainer&&(f=f.concat(e.getChildrenByName(a,b,c,d)))})}else d=this.graph.getModel().filterDescendants(function(a){return a.activity&&a.activity.data}),j.forEach(d,function(c){f=f.concat(e.getChildrenByName(a,b,c,c.activity.data))});return f},graphHasChanges:function(){if(this.initialized)document.hasChanges=!0,this.toolbar.saveButton&&(f.add(this.toolbar.saveButton,"enabled"),f.add(this.toolbar.discardButton,"enabled"),
config.data.systemConfiguration.safeEditFeatureEnabled&&this.toolbar.isForDraft()&&f.remove(this.toolbar.promoteButton,"enabled")),"firstDayWizard"===this.mode&&this.firstDayWizardModel.set("processDesignerSaveBtnState","enabled")},clearHasChanges:function(){document.hasChanges=!1;this.toolbar.saveButton&&(f.remove(this.toolbar.saveButton,"enabled"),f.remove(this.toolbar.discardButton,"enabled"));"firstDayWizard"===this.mode&&this.firstDayWizardModel.set("processDesignerSaveBtnState","disabled")},
registerChangedActivity:function(a){if(!this._editedActivities)this._editedActivities=[];a.data.id&&this._editedActivities.push(a.data.id)},isActivityChanged:function(a){var b=!0;if(a.data.id){if(!this._editedActivities)this._editedActivities=[];b=-1!==j.indexOf(this._editedActivities,a.data.id)}return b},clearChangedActivities:function(){this._editedActivities=[]},showSavePopup:function(a,b){var c=this;util.setCookie("processSaved","true");util.setCookie("processSavedMessage",a);util.setCookie("processSavedError",
b);f.remove(this.diagram.dialogAttach,"hide-notification");f.remove(this.diagram.dialogAttach,"show-notification");f.remove(this.diagram.dialogAttach,"process-saved");f.remove(this.diagram.dialogAttach,"process-error");var d="";!0===b||"true"===b?(d='<div class="inline-block general-icon warning-icon-large"></div>'+util.escape(a),f.add(this.diagram.dialogAttach,"process-error")):(d='<div class="inline-block general-icon check-icon-large"></div>'+util.escape(a),f.add(this.diagram.dialogAttach,"process-saved"));
this.diagram.dialogAttach.innerHTML=d;setTimeout(function(){c.diagram.dialogAttach&&(f.add(c.diagram.dialogAttach,"hide-notification"),f.remove(c.diagram.dialogAttach,"show-notification"));util.setCookie("processSaved","false")},2E3);o(this.diagram.dialogAttach,s.enter,function(){c.diagram.dialogAttach&&(f.add(c.diagram.dialogAttach,"hide-notification"),f.remove(c.diagram.dialogAttach,"show-notification"))})},showSaveErrorPopup:function(a){a&&a.response?409===a.response.status?new C({message:i18n("Design not saved; this process has been modified since you last opened it. Refresh the page before making changes")}):
a.response.text&&new C({messages:[i18n("An error occurred while saving the process design."),"",util.escape(a.response.text)]}):new C({message:i18n("An error occurred while saving the process design.")})},configureGraph:function(){var b=this;mxDragSource.prototype.dragElementZIndex=9999;this.graph.ordered=!0;this.graph.setAllowLoops(!1);this.graph.setConnectable(!0);this.graph.setDropEnabled(!0);this.graph.setPanning(!0);this.graph.panningHandler.useLeftButtonForPanning=!0;this.graph.setTooltips(!0);
this.graph.foldingEnabled=!0;this.graph.graphHandler.guidesEnabled=!0;this.graph.setAutoSizeCells(!0);this.graph.setTolerance(20);mxGraph.prototype.setCellsEditable(!1);this.graph.connectionHandler.connectImage=new mxImage(bootstrap.imageUrl+"icons/process/step_connector.png",16,16);(new Image).src=this.graph.connectionHandler.connectImage.src;this.graph.isValidDropTarget=function(a,b){var c=j.some(b,function(a){return a.activity&&a.activity.isContainer});return a.activity&&a.activity.isContainer&&
!c};this.graph.setDefaultEdge=function(a,c){var d=c?"#00A6A0":"#00649D";mxUtils.setCellStyles(b.graph.model,[a],"fontColor",d);mxUtils.setCellStyles(b.graph.model,[a],"labelBorderColor",d);mxUtils.setCellStyles(b.graph.model,[a],"strokeColor",d)};this.graph.setEdgeState=function(a,c){var d=c?"#D9182D":null;"always"===c&&(d="#777");mxUtils.setCellStyles(b.graph.model,[a],"strokeColor",d)};this.graph.createEdge=function(a,c,d,e,f,h){if(f){var o=!1;j.forEach(e.edges,function(a){if(a.source===e&&a.target===
f||a.source===f&&a.target===e)o=!0});if(!o){b.graphHasChanges();var n=mxGraph.prototype.createEdge(arguments);b.edgeManager.addEdgeOverlays(n,e);return n}}};this.graph.splitEdge=function(a,c,d,e,f){var h=c[0];if(h&&!b.disableSplitting&&!this.model.getEdgeCount(h)&&"Finish"!==h.value&&"noteStyle"!==h.style){e=e||0;f=f||0;if(0===e&&0===f)var j=h.geometry.height||0,e=e-(h.geometry.width||0)/2,f=f-j/2;var j=h.parent||b.graph.getDefaultParent(),o=this.model.getTerminal(a,!0),n=this.model.getTerminal(a,
!1);this.model.beginUpdate();try{d=b.graph.connectionHandler.connect(h,n,null,h),this.cellsMoved(c,e,f,!1,!1),this.cellsAdded(c,j,this.model.getChildCount(j),null,null,!0),this.cellsAdded([d],j,this.model.getChildCount(j),o,h,!1),this.cellConnected(a,h,!1),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",a,"cells",c,"newEdge",d,"dx",e,"dy",f))}finally{this.model.endUpdate()}return d}};this.graph.addListener(mxEvent.MOVE_CELLS,function(a,c){var d=c.properties.cells,e=c.properties.target;
if(c&&c.properties.event){var f=Object.keys(b.graph.model.cells).map(function(a){return b.graph.model.cells[a]}),h=!1;j.forEach(d,function(a){a.activity&&a.activity.isContainer?j.forEach(f,function(d){d.activity&&d.activity.isContainer&&b.graph.intersects(b.graph.view.getState(d),c.properties.event.layerX,c.properties.event.layerY)&&d.id!==a.id&&(h||(h=!0,new C({message:i18n("You cannot nest containers!")})),a.geometry.x-=c.properties.dx,a.geometry.y-=c.properties.dy)}):"Start"===a.value&&c.properties.target&&
(h||(h=!0,new C({message:i18n("The start cell cannot be moved outside of the parent step.")})),j.forEach(f,function(d){if("1"===d.id||d.activity&&d.activity.isContainer){var e=!1;j.forEach(b.graph.getChildCells(d),function(a){"Start"===a.value&&(e=!0)});e||b.graph.moveCells([a],-c.properties.dx,-c.properties.dy,c.properties.clone,d,null)}}))})}e=e&&e.id!==a.getDefaultParent().id;j.forEach(d,function(a){var c=[];j.forEach(a.edges,function(a){a.source.parent!==a.target.parent&&c.push(a)});0<c.length&&
b.graph.removeCells(c)});b.autolayout&&!b.pauseLayout&&e&&G.layout(b,{animate:!0});!b.readOnly&&(!b.autolayout||!e)&&b.graphHasChanges()});this.graph.addListener(mxEvent.REMOVE_CELLS,function(){b.autolayout&&!b.pauseLayout&&G.layout(b,{animate:!0})});this.graph.isHtmlLabel=function(a){return a.htmlLabels?a.htmlLabels:!1};this.graph.oldCellsResized=this.graph.cellsResized;this.graph.cellsResized=function(a,c){var d=[];j.forEach(a,function(a){j.forEach(a.children,function(b){b.edge||d.push({child:b,
parent:a,x:a.geometry.x+b.geometry.x,y:a.geometry.y+b.geometry.y})})});b.graph.oldCellsResized(a,c);j.forEach(d,function(a){var b=a.parent,c=a.x,a=a.y;if(c<b.geometry.x)b.geometry.width+=b.geometry.x-c,b.geometry.x=c;if(a<b.geometry.y)b.geometry.height+=b.geometry.y-a,b.geometry.y=a});j.forEach(d,function(a){var c=a.child,d=a.parent,e=a.x,a=a.y,f=d.geometry.y+c.geometry.y;if(d.geometry.x+c.geometry.x!==e||f!==a)c.geometry.x=e-d.geometry.x,c.geometry.y=a-d.geometry.y;b.graph.extendParent(c)})};this.graph.addListener(mxEvent.CELLS_RESIZED,
function(){b.readOnly||b.graphHasChanges()});this.graph.addListener(mxEvent.CELLS_MOVED,function(a,c){var d=!b.readOnly&&!b.autolayout;if(!d&&b.autolayout){var e=c.getProperties();if(e&&e.cells)for(var f=0,f=0;f<e.cells.length;f++)if(!e.cells[f].edges){d=!0;break}}d&&b.graphHasChanges()});this.graph.addListener(mxEvent.CELLS_FOLDED,function(a,c){if(!b.pauseLayout&&b.autolayout){var d={animate:!0,cellsNotToAnimate:[]},e=c.properties.cells,f;for(f=0;f<e.length;f++){var h=e[f].children;if(h){var j;for(j=
0;j<h.length;j++)h[j].edge||d.cellsNotToAnimate.push(h[j].id)}}G.layout(b,d)}});this.graph.addListener(mxEvent.ADD_CELLS,function(a,c){if(!b.pauseLayout&&b.autolayout){var d=c.properties.cells[0]&&c.properties.cells[0].edge,e=c.properties.parent.id!==a.getDefaultParent().id;(d||e)&&setTimeout(function(){G.layout(b,{animate:!0})})}});this.graph.isCellResizable=function(a){return!b.autolayout&&(a&&"noteStyle"===a.style||a.activity&&a.activity.isContainer)};this.graph.isCellSelectable=function(a){return!a.edge};
this.graph.connectionHandler.isValidSource=function(a){var c=b.graph.isValidSource(a);if(a.activity&&("finish"===a.activity.data.type||"note"===a.activity.data.type))c=!1;return c};this.graph.connectionHandler.isValidTarget=function(a){var c=b.graph.isValidTarget(a);if(a.activity&&("start"===a.activity.data.type||"note"===a.activity.data.type))c=!1;return c};this.graph.isValidConnection=function(a,b){return a.parent===b.parent};var c=this.graph.cellRenderer.initializeShape;this.graph.cellRenderer.initializeShape=
function(a){c.apply(this,arguments);a.shape.node&&a.cell&&a.cell.id&&a.shape.node.setAttribute("id","shape-"+a.cell.id)};var d=this.graph.cellRenderer.initializeLabel;this.graph.cellRenderer.initializeLabel=function(a){d.apply(this,arguments);a.text.node&&a.cell&&a.cell.id&&a.text.node.setAttribute("id","label-"+a.cell.id)};var e=this.graph.cellRenderer.initializeOverlay;this.graph.cellRenderer.initializeOverlay=function(a,b){e.apply(this,arguments);if(b.image&&b.node&&a.cell&&a.cell.id){var c=b.image.split("/"),
c=c[c.length-1];0<c.indexOf(".")&&(c=c.split(".")[0],b.node.setAttribute("id","overlay-"+a.cell.id+"-"+c))}};this.graph.getPreferredSizeForCell=function(a){return b.getPreferredSize(b.graph,b.graph.view.getScale(),a)};this.graph.connectionHandler.marker.highlight.createShape=function(a){var b=mxCellHighlight.prototype.createShape.apply(this,arguments);b.isRounded=!0;b.style={};b.style[mxConstants.STYLE_ARCSIZE]=12;return b};this.graph.fit=function(a){var c=this;b.diagramOnly?b.fitDiagram(this.view):
b.graphPanePromise.then(function(){var d=function(c){var d=b.paneBounds.w-3,e=b.paneBounds.h-35,f=c.getGraphBounds(),h=f.height/c.scale,j=Math.min(d/(f.width/c.scale+40),e/(h+40)),j=Math.min(1,Math.max(a,Math.floor(100*j)/100));if(1>=j||1<a)d=0.25*(d-f.width),100>d&&(d=100),e=0.25*(e-h),c.scaleAndTranslate(j,d*(1/j),10<e?e:10)};d(c.view);d(c.view)})};var f=this.graph.getView();if(!this.diagramOnly)this.graph.getSelectionModel().changeSelection=function(a,c){mxGraphSelectionModel.prototype.changeSelection.apply(this,
arguments);var d=b.autolayout?b.MANUAL_ZOOM_THRESHOLD:b.AUTOLAYOUT_ZOOM_THRESHOLD,e=1===b.graph.getSelectionCount()?b.graph.getSelectionCell():null;(!e||!e.edge&&f.scale<d)&&b.magnify(e)},f.addListener(mxEvent.SCALE,function(){G.layout(b);f.scale>=(b.autolayout?b.MANUAL_ZOOM_THRESHOLD:b.AUTOLAYOUT_ZOOM_THRESHOLD)&&b.magnify(null)}),f.addListener(mxEvent.SCALE_AND_TRANSLATE,function(){G.layout(b);f.scale>=(b.autolayout?b.MANUAL_ZOOM_THRESHOLD:b.AUTOLAYOUT_ZOOM_THRESHOLD)&&b.magnify(null);if(b.autolayout){var a,
c;c=f.getGraphBounds();f.scale>G.MAX_SCALE?(a=c.x/G.MAX_SCALE,c=c.y/G.MAX_SCALE,f.scaleAndTranslate(G.MAX_SCALE,a,c)):f.scale<G.MIN_SCALE&&(a=c.x/G.MIN_SCALE,c=c.y/G.MIN_SCALE,f.scaleAndTranslate(G.MIN_SCALE,a,c))}});mxText.prototype.redraw=function(){var c="noteStyle"===this.state.cell.style;this.size=G.getFontSize(this.scale,b.autolayout,this.state.cell.style);mxShape.prototype.redraw.apply(this,arguments);if(c&&(c=u("div",this.node)[0])){var d=a.get(c,"width");a.set(c,{maxWidth:d-60+"px",paddingLeft:"30px"})}}},
magnify:function(b){for(;this.magnifyCanvas.firstChild;)this.magnifyCanvas.removeChild(this.magnifyCanvas.firstChild);if(b&&!b.edge&&(!b.activity||!b.activity.isContainer)){var c=this.graph.getView().getState(b);if(c&&c.shape){var d=c.shape.node.cloneNode(!0),e=this.getPreferredSize(this.graph,1,b),f=e.width,e=e.height,e=Math.min(this.MAX_MAGNIFY_HEIGHT,e);d.firstChild.setAttribute("x",6);d.firstChild.setAttribute("y",6);d.firstChild.setAttribute("width",f);d.firstChild.setAttribute("height",e);var h=
!1;1<d.childNodes.length&&(h=!0,d.childNodes[1].setAttribute("x",12),d.childNodes[1].setAttribute("y",(e-32)/2),d.childNodes[1].setAttribute("width",32),d.childNodes[1].setAttribute("height",32));this.magnifyCanvas.appendChild(d);var d=35,j=45,n=c.text.value.split("\n");"noteStyle"===b.style?j=10:h&&(j=55);b=document.createElement("div");for(h=h=0;h<n.length;h++){var k=document.createElementNS(mxConstants.NS_SVG,"g");k.setAttribute("font-size","14px");this.magnifyCanvas.appendChild(k);var s=document.createElementNS(mxConstants.NS_SVG,
"text");k.appendChild(s);s.setAttribute("x",j+3);s.setAttribute("y",d+3);b.innerHTML=util.escape(n[h]);k=d+8>e;if(b.childNodes[0]){var l=document.createTextNode(k?"...":b.childNodes[0].nodeValue);s.appendChild(l);s.setAttribute("cursor","default");s.setAttribute("fill",c.style.fontColor);if(k)break;d+=17}}d=document.createElementNS(mxConstants.NS_SVG,"rect");this.magnifyCanvas.appendChild(d);d.setAttribute("pointer-events","none");d.setAttribute("x",3);d.setAttribute("y",3);d.setAttribute("width",
f+6);d.setAttribute("height",e+6);d.setAttribute("rx",4);d.setAttribute("ry",4);d.setAttribute("stroke",mxConstants.VERTEX_SELECTION_COLOR);d.setAttribute("stroke-width",3);d.setAttribute("fill-opacity",0);if(c.overlays)for(b in d=3,j=f-10,n=16,b=null,h=function(a){var b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);a.currentTarget.onode.dispatchEvent(b)},c.overlays.map)if(c.overlays.map.hasOwnProperty(b)){s=c.overlays.map[b];if(s.image.endsWith&&
(s.image.endsWith("info.png")||s.image.endsWith("error.png")))d=e/2-8,j=f-26,n=28;k=s.node;s=k.cloneNode(!0);s.onode=k;k=s.firstChild;k.setAttribute("x",j);k.setAttribute("y",d);k.setAttribute("width",n);k.setAttribute("height",n);k.style=null;o(s,"click",h);this.magnifyCanvas.appendChild(s);j-=20}f+=9;e+=9;a.set(this.magnifySvg,{minWidth:f+"px",minHeight:e+"px"});a.set(this.diagram.magnifyAttach,{visibility:"visible",width:f+2+"px",height:e+2+"px"})}}else a.set(this.diagram.magnifyAttach,{visibility:"hidden"})},
getPreferredSize:function(a,b,c){var d=null;if(null!==c){var e=a.view.getState(c),f=e?e.style:a.getCellStyle(c);if(f&&!a.model.isEdge(c)){var h=40,d=20;if(!this.zoomToSelectionData||this.zoomToSelectionData.cells[c.id]){d=h=0;b=G.getLabelMetrics(a,c,this.autolayout,null,b,e,f).size;if(c.children)f=this.getPrefferedSizeForContainer(a,c),h+=f.maxX-f.minX+2*G.CONTAINER_PADDING,d+=f.maxY-f.minY+2*G.CONTAINER_PADDING,h=b.width+2*G.CONTAINER_PADDING>h?b.width+2*G.CONTAINER_PADDING:h;else{if(null!==a.getImage(e)||
null!==f[mxConstants.STYLE_IMAGE])h=d=32;h+=2*(f[mxConstants.STYLE_SPACING]||0);h+=f[mxConstants.STYLE_SPACING_LEFT]||0;c=f[mxConstants.STYLE_SPACING_RIGHT]||0;d+=2*(f[mxConstants.STYLE_SPACING]||0);d+=f[mxConstants.STYLE_SPACING_TOP]||0;d+=f[mxConstants.STYLE_SPACING_BOTTOM]||0;h=b.width+(h+(0>c?0:c))}d=b.height+d;a.gridEnabled&&(h=a.snap(h+a.gridSize/2),d=a.snap(d+a.gridSize/2))}d=new mxRectangle(0,0,h,d)}}return d},getPrefferedSizeForContainer:function(a,b){var c={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,
maxX:-1,maxY:-1};b.collapsed?(c.minX=0,c.minY=0,c.maxX=40,c.maxY=20):j.forEach(b.children,function(a){if(!a.edge)c.minX=Math.min(a.geometry.x,c.minX),c.minY=Math.min(a.geometry.y,c.minY),c.maxX=Math.max(a.geometry.x+a.geometry.width,c.maxX),c.maxY=Math.max(a.geometry.y+a.geometry.height,c.maxY)});return c},getCellDropTarget:function(a,b,c){b=a.getCellAt(b,c);c=null;b&&b.isVertex()?b.activity&&b.activity.isContainer&&(c=b):c=b;return a.lastDropTarget=c},setGraphStyling:function(){var a=this.graph.getStylesheet().getDefaultEdgeStyle();
a[mxConstants.STYLE_STROKEWIDTH]=0;a[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR]="#FFFFFF";a[mxConstants.STYLE_LABEL_PADDING]=4;a[mxConstants.STYLE_STROKECOLOR]="#3B0256";a[mxConstants.STYLE_LABEL_BORDERCOLOR]="#7F1C7D";a[mxConstants.STYLE_FONTCOLOR]="#7F1C7D";a[mxConstants.STYLE_FONTSIZE]="12";a[mxConstants.STYLE_SPACING_TOP]=15;a[mxConstants.STYLE_MOVABLE]=0;a[mxConstants.STYLE_ROUNDED]=!0;mxConstants.VALID_COLOR="#00B2EF";mxConstants.HIGHLIGHT_COLOR="#00B2EF";mxConstants.TARGET_HIGHLIGHT_COLOR="#00B2EF";
mxConstants.OUTLINE_STROKEWIDTH=0;mxConstants.INVALID_COLOR="#F04E37";mxConstants.OUTLINE_HANDLE_FILLCOLOR="#00B2EF";mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00B2EF";mxConstants.VERTEX_SELECTION_STROKEWIDTH=2;a={};a[mxConstants.STYLE_ENDARROW]=void 0;this.graph.getStylesheet().putCellStyle("noArrowEdgeStyle",a);a=this.graph.getStylesheet().getDefaultVertexStyle();a[mxConstants.STYLE_SPACING]=8;a[mxConstants.STYLE_FONTCOLOR]="#000000";a[mxConstants.VERTEX_HIGHLIGHT_COLOR]="#000000";a[mxConstants.STYLE_ARCSIZE]=
6;a[mxConstants.STYLE_ROUNDED]=!0;a={};a[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_IMAGE;a[mxConstants.STYLE_IMAGE]=bootstrap.imageUrl+"/mxgraph/add.png";a[mxConstants.STYLE_IMAGE_WIDTH]="16";a[mxConstants.STYLE_IMAGE_HEIGHT]="16";this.graph.getStylesheet().putCellStyle("plusStyle",a);a={};a[mxConstants.STYLE_SHAPE]="rectangle";a[mxConstants.STYLE_STROKECOLOR]="#ffffff";a[mxConstants.STYLE_FILLCOLOR]="#ffffff";this.graph.getStylesheet().putCellStyle("topContainerStyle",a);a={};a[mxConstants.STYLE_VERTICAL_ALIGN]=
mxConstants.ALIGN_TOP;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_RIGHT;a[mxConstants.STYLE_SPACING_TOP]=-7;a[mxConstants.STYLE_SPACING_RIGHT]=-3;a[mxConstants.STYLE_SPACING_LEFT]=15;a[mxConstants.STYLE_FONTSIZE]="12";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";a[mxConstants.STYLE_SHAPE]="rectangle";a[mxConstants.STYLE_GRADIENTCOLOR]="#ddddff";a[mxConstants.STYLE_STROKECOLOR]="#bbc6ff";a[mxConstants.STYLE_FILLCOLOR]="#eeeeff";a[mxConstants.STYLE_ROUNDED]=
!1;this.graph.getStylesheet().putCellStyle("sequenceStyle",a);a={};a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_LEFT;a[mxConstants.STYLE_SPACING_TOP]=-7;a[mxConstants.STYLE_SPACING_RIGHT]=-3;a[mxConstants.STYLE_SPACING_LEFT]=5;a[mxConstants.STYLE_FONTSIZE]="12";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";a[mxConstants.STYLE_SHAPE]="rectangle";a[mxConstants.STYLE_GRADIENTCOLOR]="#ffdddd";
a[mxConstants.STYLE_STROKECOLOR]="#ffbbc6";a[mxConstants.STYLE_FILLCOLOR]="#ffeeee";a[mxConstants.STYLE_ROUNDED]=!1;this.graph.getStylesheet().putCellStyle("iterationStyle",a);a={};a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_LEFT;a[mxConstants.STYLE_SPACING_TOP]=-5;a[mxConstants.STYLE_SPACING_RIGHT]=-3;a[mxConstants.STYLE_SPACING_LEFT]=15;a[mxConstants.STYLE_FONTSIZE]="14";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";
a[mxConstants.STYLE_SHAPE]="rectangle";a[mxConstants.STYLE_FILLCOLOR]="#BDE4F6";a[mxConstants.STYLE_STROKEWIDTH]="2";a[mxConstants.STYLE_STROKECOLOR]="#00B2EF";a[mxConstants.STYLE_ROUNDED]=!1;this.graph.getStylesheet().putCellStyle("parallelStyle",a);a={};a[mxConstants.STYLE_SHAPE]="label";a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER;a[mxConstants.STYLE_SPACING_LEFT]=15;a[mxConstants.STYLE_SPACING_TOP]=5;a[mxConstants.STYLE_SPACING_BOTTOM]=
5;a[mxConstants.STYLE_SPACING_RIGHT]=15;a[mxConstants.STYLE_STROKEWIDTH]="2";a[mxConstants.STYLE_STROKECOLOR]="#FFF";a[mxConstants.STYLE_FILLCOLOR]="#888";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";a[mxConstants.STYLE_FONTSIZE]="14";a[mxConstants.STYLE_FONTCOLOR]="#FFFFFF";a[mxConstants.STYLE_SHADOW]="0";a[mxConstants.STYLE_ARCSIZE]=6;a[mxConstants.STYLE_ROUNDED]=!0;this.graph.getStylesheet().putCellStyle("utilityStyle",a);a={};a[mxConstants.STYLE_SHAPE]=
"label";a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER;a[mxConstants.STYLE_SPACING_LEFT]=5;a[mxConstants.STYLE_SPACING_TOP]=5;a[mxConstants.STYLE_SPACING_BOTTOM]=5;a[mxConstants.STYLE_SPACING_RIGHT]=5;a[mxConstants.STYLE_STROKEWIDTH]="2";a[mxConstants.STYLE_STROKECOLOR]="#FFF";a[mxConstants.STYLE_FILLCOLOR]="#FAF2AD";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";a[mxConstants.STYLE_FONTSIZE]=
"12";a[mxConstants.STYLE_FONTSTYLE]="0";a[mxConstants.STYLE_SHADOW]="0";a[mxConstants.STYLE_WHITE_SPACE]="wrap";a[mxConstants.STYLE_OVERFLOW]="width";a[mxConstants.STYLE_AUTOSIZE]="1";this.graph.getStylesheet().putCellStyle("noteStyle",a);a={};a[mxConstants.STYLE_SHAPE]="label";a[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_TOP;a[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_LEFT;a[mxConstants.STYLE_SPACING_LEFT]=45;a[mxConstants.STYLE_SPACING_TOP]=-10;a[mxConstants.STYLE_SPACING_BOTTOM]=-10;
a[mxConstants.STYLE_SPACING_RIGHT]=-20;a[mxConstants.STYLE_STROKECOLOR]="#7F1C7D";a[mxConstants.STYLE_FILLCOLOR]="#7F1C7D";a[mxConstants.STYLE_FONTCOLOR]="#FFFFFF";a[mxConstants.STYLE_FONTFAMILY]="helvetica, arial, tahoma, verdana, sans-serif, 'lucida grande'";a[mxConstants.STYLE_FONTSIZE]="12";a[mxConstants.STYLE_FONTSTYLE]="0";a[mxConstants.STYLE_SHADOW]="0";a[mxConstants.STYLE_ARCSIZE]=6;a[mxConstants.STYLE_ROUNDED]=!0;a[mxConstants.STYLE_IMAGE]=bootstrap.imageUrl+"icons/mxgraph/process_step.png";
a[mxConstants.STYLE_IMAGE_WIDTH]="32";a[mxConstants.STYLE_IMAGE_HEIGHT]="32";this.graph.getStylesheet().putCellStyle("activityStyle",a)},destroy:function(){n.destroy(this.toolbarContainer);this.toolbar&&this.toolbar.destroy();this.graph.tooltipHandler.hide()},resize:function(){var a=t.position(this.domNode,!0).y,b=window.innerWidth||document.body.clientWidth,a=(window.innerHeight||document.body.clientHeight)-a;this.diagram.mxgraphAttach.style.height=a-32+"px";this.bc.containerNode.style.height=a+
"px";this.bc.containerNode.style.width=b+"px";this.bc.resize()},getActivityStyle:function(){}})});mxVertexHandler.prototype.createSelectionShape=function(l){l=new mxRectangleShape(l,null,mxConstants.VERTEX_SELECTION_COLOR);l.strokewidth=3;l.isDashed=!1;l.isRounded=!0;l.style={};l.style[mxConstants.STYLE_ARCSIZE]=4;return l};mxVertexHandler.prototype.redraw=function(){this.selectionBounds=this.getSelectionBounds(this.state);this.bounds=new mxRectangle(this.state.x,this.state.y,this.state.width,this.state.height);
this.bounds.grow(2);this.redrawHandles();this.drawPreview()}},"idx/layout/BorderContainer":function(){require({cache:{"url:idx/layout/templates/_ToggleSplitter.html":'<div class="idxSplitter dijitSplitter"\r\n\tdojoAttachEvent="onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse"\r\n\ttabIndex="-1"\r\n\twaiRole="separator">\r\n\t<div dojoAttachPoint="thumbContainer" class="idxSplitterThumbOuter">\r\n\t\t<div dojoAttachPoint="bartop" class="idxSplitterBarTop"></div>\r\n\t\t<div dojoAttachPoint="thumb" role="button" class="dijitSplitterThumb idxSplitterThumbCollapse" tabIndex="0"></div>\r\n\t\t<div dojoAttachPoint="thumb2" role="button" class="dijitSplitterThumb idxSplitterThumbExpand" tabIndex="0"></div>\r\n\t\t<div dojoAttachPoint="barbottom" class="idxSplitterBarBottom"></div>\r\n\t</div>\r\n</div>\r\n'}});
define("idx/layout/BorderContainer","dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/html,dojo/_base/event,dojo/keys,dojo/dom-geometry,dijit/_base/wai,dijit/layout/BorderContainer,dijit/_CssStateMixin,dijit/_Widget,idx/resources,idx/util,dojo/text!./templates/_ToggleSplitter.html,dojo/i18n!../nls/base,dojo/i18n!./nls/base,dojo/i18n!./nls/BorderContainer".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){var q=l("idx.layout.BorderContainer",[b],{_splitterClass:"idx.layout._Splitter",
_toggleSplitterClass:"idx.layout._ToggleSplitter",_locked:!1,liveSplitters:!1,toggleable:!0,_setToggleableAttr:function(a){(this.toggleable=a)?j.addClass(this.domNode,this.idxBaseClass+"Toggle"):j.removeClass(this.domNode,this.idxBaseClass+"Toggle")},toggleTitles:null,_resizeHandle:null,delayResize:!0,idxBaseClass:"idxBorderContainer",postMixInProperties:function(){if(this.toggleable)this._splitterClass=this._toggleSplitterClass;var a=n.getResources("idx/layout/BorderContainer",this.lang);this.toggleTitles=
{expand:a.toggleTitleExpand,collapse:a.toggleTitleCollapse,restore:a.toggleTitleRestore};this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);this._supportingWidgets=[]},resize:function(a,b){var c=r.isIE;this.delayResize&&!(c&&8>=c)?(clearTimeout(this._resizeHandle),this._resizeHandle=setTimeout(m.hitch(this,function(){this._asynchResize(a,b)}),100)):this._asynchResize(a,b)},_asynchResize:function(a,c){this.domNode&&b.prototype.resize.apply(this,arguments)},_setupChild:function(a){this.inherited(arguments);
a.get("splitter")&&!a.get("open")&&this.collapse(a.get("region"))},collapse:function(a){this.toggleable&&a&&this.getSplitter(a)&&(a=this.getSplitter(a))&&a._collapse&&a._collapse()},expand:function(a){if(this.toggleable){if(!a||""==a)a="center";var b=this.getChildren();k.forEach(b,function(b){var b=b.get("region"),c=this.getSplitter(b);b!=a&&c&&c._collapse&&c._collapse()},this);"center"!=a&&(b=this.getSplitter(a))&&b._expand&&b._expand()}},restore:function(a){if(this.toggleable){var b=this.getChildren();
k.forEach(b,function(b){b=b.get("region");if(!a||a==b)(b=this.getSplitter(b))&&b._restore&&b._restore()},this)}},onDragStart:function(){},onDragEnd:function(){},onPanelOpen:function(){},onPanelClose:function(){},lock:function(){if(this.toggleable)this._locked=!0,j.addClass(this.domNode,"idxBorderContainerLocked")},unlock:function(){if(this.toggleable)this._locked=!1,j.removeClass(this.domNode,"idxBorderContainerLocked")}}),o=l("idx.layout._Splitter",[b._Splitter,a],{_onKeyPress:function(a){var b=
this.horizontal;switch(a.charOrCode){case b?h.UP_ARROW:h.LEFT_ARROW:if(this.container._locked){e.stop(a);return}break;case b?h.DOWN_ARROW:h.RIGHT_ARROW:if(this.container._locked){e.stop(a);return}}this.inherited(arguments)}}),l=l("idx.layout._ToggleSplitter",[o,a],{templateString:t,state:"",position:"",_paneSize:0,_styleAttr:"",_resizable:!0,_snap:!1,_snapSize:40,expandThumbMsg:"",collapseThumbMsg:"",baseClass:"idxSplitter",cssStateNodes:{thumb:"idxSplitterThumbCollapse",thumb2:"idxSplitterThumbExpand"},
attributeMap:m.delegate(f.prototype.attributeMap,{expandThumbMsg:{node:"thumb2",type:"attribute",attribute:"title"},collapseThumbMsg:{node:"thumb",type:"attribute",attribute:"title"}}),postCreate:function(){this.inherited(arguments);j.addClass(this.domNode,"idxSplitter"+(this.horizontal?"H":"V"));!0===this.child.get("bidiToggle")&&(j.addClass(this.domNode,"idxSplitterBidiToggle"),j.addClass(this.domNode,"idxSplitterBidiToggle"+(this.horizontal?"H":"V")));this._styleAttr=this.horizontal?"height":"width";
this.connect(this.thumb,"onclick","_toggle");this.connect(this.thumb,"onkeyup","_onThumbKey");this.connect(this.thumb2,"onclick","_toggleExpand");this.connect(this.thumb2,"onkeyup","_onThumbExpandKey");this.connect(this.container,"layout","_positionThumb");if("true"===this.child.get("fixed"))this._resizable=!1,j.addClass(this.domNode,"idxSplitterNoResize");if("true"===this.child.get("snap"))this._snap=!0;var a;if((a=this.child.get("region"))&&0!=a.length)a=a.toLowerCase(),"leading"==a?a=!this.isLeftToRight()?
"right":"left":"trailing"==a&&(a=!this.isLeftToRight()?"left":"right"),a=a.charAt(0).toUpperCase()+a.substring(1);this.position=a;this.set("state","Normal");this.thumbTitles=this.container.toggleTitles;this._updateThumbTitles()},_setStateAttr:function(a){this.state=this.position+a;this._setStateClass();c.setWaiState(this.thumb,"pressed","Collapsed"==a);c.setWaiState(this.thumb2,"pressed","Expanded"==a)},_getStateAttr:function(){return this.state.substring(this.position.length)},_positionThumb:function(){var a=
this.horizontal?"w":"h",a=d.getMarginBox(this.domNode)[a]/2-d.getMarginBox(this.thumbContainer)[a]/2,a=a+"px",b=this.isLeftToRight()?"left":"right";j.style(this.thumbContainer,this.horizontal?b:"top",a)},_onThumbKey:function(a){a=a.keyCode;(a==h.SPACE||a==h.ENTER)&&this._toggle()},_toggle:function(){this.container._locked||("Collapsed"==this.get("state")?this._restore():this._collapse())},_toggleExpand:function(){this.container._locked||("Expanded"==this.get("state")?this._restore():this._expand())},
_onThumbExpandKey:function(a){a=a.keyCode;(a==h.SPACE||a==h.ENTER)&&this._toggleExpand()},_restore:function(){"Normal"!=this.get("state")&&(this.child&&this.child.set("open",!0),j.style(this.child.domNode,this._styleAttr,this._paneSize+"px"),this.container.layout(),this.set("state","Normal"),j.style(this.domNode,"cursor",""),this.container.onPanelOpen(this.region),this._updateThumbTitles())},_collapse:function(a){var b=this.get("state");if("Collapsed"!=b){if(a)this._paneSize=a;else if("Normal"==b)this._paneSize=
j.style(this.child.domNode,this._styleAttr);j.style(this.child.domNode,this._styleAttr,"0px");this.container.layout();this.set("state","Collapsed");j.style(this.domNode,"cursor","default");this.container.onPanelClose(this.region);this._updateThumbTitles()}},_expand:function(){var a=this.get("state");if("Expanded"!=a){this.child&&this.child.set("open",!0);if("Normal"==a)this._paneSize=j.style(this.child.domNode,this._styleAttr);var b=this._computeMaxSize();j.style(this.child.domNode,this._styleAttr,
b+"px");this.set("state","Expanded");this.container.layout();if("Collapsed"==a)this.container.onPanelOpen(this.region);this._updateThumbTitles()}},_updateThumbTitles:function(){var a=this.get("state"),b=this.thumbTitles;"Normal"==a?(this.set("expandThumbMsg",b.expand),this.set("collapseThumbMsg",b.collapse)):"Expanded"==a?(this.set("expandThumbMsg",b.restore),this.set("collapseThumbMsg",b.collapse)):"Collapsed"==a&&(this.set("expandThumbMsg",b.expand),this.set("collapseThumbMsg",b.restore))},_startDrag:function(a){var b=
a.target;if(!(b==this.thumb||b==this.thumb2))if(!("Normal"!=this.get("state")||this.container._locked||!this._resizable))this._startSize=j.style(this.child.domNode,this._styleAttr),this.inherited(arguments),this.container.onDragStart(this.region)},_stopDrag:function(){this.inherited(arguments);j.style(this.child.domNode,this._styleAttr)<=this._snapSize?this._collapse(this._startSize):this.container.layout();delete this._startSize;this.container.onDragEnd(this.region)},_doSnap:function(){}});m.extend(f,
{fixed:!1,bidiToggle:!1,snap:!1,open:!0});q._ToggleSplitter=l;q._Splitter=o;return m.getObject("idx.oneui.layout",!0).ToggleBorderContainer=q})},"deploy/widgets/workflow/GraphPalettePane":function(){define("dojo/_base/declare,dijit/layout/ContentPane,dojo/_base/array,dojo/_base/xhr,dojo/_base/event,dojo/request/xhr,dojo/window,dojo/_base/Deferred,dojo/DeferredList,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,js/webext/widgets/RadioButtonGroup,js/webext/widgets/GenericConfirm,deploy/widgets/process/ProcessIconsFormatter,deploy/widgets/workflow/GraphPaletteWidget".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return l("deploy.widgets.workflow.GraphPalettePane",[m],{widget:null,postCreate:function(){this.inherited(arguments);this.domNode.style.padding=0;this.domNode.style.overflow="hidden";this.paletteWidget=new o({editor:this.editor,searchBoxWidth:"98%",paletteBorder:0});this.paletteWidget.startup();this.addChild(this.paletteWidget)},refreshStepPalette:function(a,c){var d=this;if(a)this.config=a,this.topStepDrawerLabel=a.topStepDrawerLabel||i18n("Utility Steps");
var e=h(this.config.url+"?rowsPerPage=10000&pageNumber=1",{handleAs:"json"}).then(function(a){d.data=a});(new b([e,this.resizePalettePromise])).then(function(){d.spinner&&d.spinner.parentNode&&d.spinner.parentNode.removeChild(d.spinner);if("firstDayWizard"===d.editor.mode)d.data=d.data.concat(d.editor.firstDayWizardModel.getComponentsForApplicationProcessNav());var a=d.paletteWidget.createPaletteMap(d.topStepDrawerLabel,d.lazyChildrenDrawer,d.data);d.paletteWidget.populateTopLevelDrawers(a,d.topStepDrawerLabel,
d.lazyChildrenDrawer,c);d.paletteDialog.paletteWidget.populateTopLevelDrawers(a,d.topStepDrawerLabel,d.lazyChildrenDrawer,c);d.myPane.domNode.style.visibility="visible"})},resize:function(a){this.inherited(arguments);this.paletteWidget.tree.domNode.style.height=a.h-26+"px";this.paletteWidget.tree.domNode.style.width=a.w+"px";this.paletteWidget.tree.resize()}})})},"deploy/widgets/automationPlugin/AutomationPluginList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/request/iframe,dojo/on,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/util/blocker/BlockingContainer,dijit/form/TextBox,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return e("deploy.widgets.automationPlugin.AutomationPluginList",[m,l],{templateString:'<div class="pluginList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"plugin/automationPlugin",d=[{name:i18n("Plugin"),formatter:this.pluginFormatter,
orderField:"name",filterField:"name",getRawValue:function(a){return a.name},filterType:"text"},{name:i18n("Description"),formatter:function(a){return i18n(a.description)}},{name:i18n("Version"),formatter:this.versionFormatter,orderField:"pluginVersion",filterField:"releaseVersion",getRawValue:function(a){return a.version},filterType:"text"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new s({url:b,serverSideProcessing:!0,hideExpandCollapse:!0,columns:d,orderField:"name",
hidePagination:!1,tableConfigKey:"pluginList",noDataMessage:i18n("No plugins have been loaded.")});this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.managePlugins]&&(b={label:i18n("Load Plugin"),showTitle:!1,onClick:function(){a.showNewPluginForm()}},b=(new k(b)).placeAt(this.buttonTopAttach),c.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},pluginFormatter:function(a){var b=document.createElement("a");
b.innerHTML=i18n(a.name.escape());b.href="#automationPlugin/"+a.id;return b},versionFormatter:function(a){return a.version},actionsFormatter:function(a){var c=this.parentWidget,d=b.create("div");if(config.data.permissions[security.system.managePlugins]){var e=b.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},d);f(e,"click",function(){c.getProcessesUsingPluginAndDelete(a)})}return d},showPluginDeletionConfirm:function(a,b){var c=this;new t({message:b,forceRawMessages:!0,action:function(){c.grid.block();
h.del({url:bootstrap.restUrl+"plugin/automationPlugin/"+a.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh()},error:function(a){(new n({messages:[i18n("Error deleting plugin:"),"",util.escape(a.responseText)]})).startup();c.grid.unblock()}})}})},getProcessesUsingPluginAndDelete:function(a){var b=this,c=i18n("Are you sure you want to delete version %s of the following plugin:",a.version)+"<br/>"+i18n(a.name.escape())+"<br/>"+i18n("This will permanently delete that version from the system.");
h.get({url:bootstrap.restUrl+"plugin/automationPlugin/"+a.id+"/processes",handleAs:"json",load:function(e){if(e&&0<e.length){var f=i18n("The following processes are using this plugin:")+"<br/>";d.forEach(e,function(a){f+=a.name.escape()+"<br/>"});c=f+"<br/>"+c}b.showPluginDeletionConfirm(a,c)},error:function(){c+="<br/>"+i18n("It is unknown if the plugin is being used by any processes.");b.showPluginDeletionConfirm(a,c)}})},showNewPluginForm:function(){var c=this,d=new q,e=new r({title:i18n("Load Plugin"),
closable:!0,draggable:!0}),f=document.createElement("form");f.target="formTarget";f.method="POST";f.enctype="multipart/form-data";f.encoding="multipart/form-data";dojo.addClass(f,"importForm");d.placeAt(e.containerNode);var h=document.createElement("input");h.type="file";h.name="file";var j=b.create("div");(new k({label:i18n("Submit"),type:"submit"})).placeAt(j);f.appendChild(h);f.appendChild(j);d.containerNode.appendChild(f);f.onsubmit=function(){if(h.value){d.block();var b=util.getCookie(bootstrap.expectedSessionCookieName);
a(bootstrap.restUrl+"plugin/automationPlugin/ui?"+bootstrap.expectedSessionCookieName+"="+b,{form:f,handleAs:"json"}).then(function(a){"ok"===a.status?(d.unblock(),e.hide(),e.destroy(),c.grid.refresh()):(d.unblock(),(new n({message:i18n("Error loading plugin: %s",a.error)})).startup())},function(a){d.unblock();(new n({message:i18n("Error loading plugin: %s",a.error)})).startup()})}else(new n({message:i18n("Please choose a plugin file to import.")})).startup();return!1};e.show()}})})},"dojo/request/iframe":function(){define("module,require,./watch,./util,./handlers,../_base/lang,../io-query,../query,../has,../dom,../dom-construct,../_base/window,../NodeList-dom".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){function r(){return!this.isFulfilled()}function t(){return!!this._finished}function q(a,b){if(!b)try{var d=a.options,f=s.doc(s._frame),j=d.handleAs;if("html"!==j){if("xml"===j)if("html"===f.documentElement.tagName.toLowerCase()){c("a",f.documentElement).orphan();var o=f.documentElement.innerText,o=o.replace(/>\s+</g,"><");a.text=h.trim(o)}else a.data=f;else a.text=f.getElementsByTagName("textarea")[0].value;e(a)}else a.data=f}catch(n){b=n}b?this.reject(b):this._finished?
this.resolve(a):this.reject(Error("Invalid dojo/request/iframe request state"))}function o(){this._callNext()}function s(a,b,c){var d=j.parseArgs(a,j.deepCreate(v,b),!0),a=d.url,b=d.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");if(!s._frame)s._frame=s.create(s._iframeName,w+"();");a=j.deferred(d,null,r,t,q,o);a._callNext=function(){if(!this._calledNext)this._calledNext=!0,s._currentDfd=null,s._fireNextRequest()};a._legacy=c;s._dfdQueue.push(a);
s._fireNextRequest();k(a);return c?a:a.promise}var u=l.id.replace(/[\/\.\-]/g,"_"),w=u+"_onload";n.global[w]||(n.global[w]=function(){var b=s._currentDfd;if(b){var c=a.byId(b.response.options.form)||b._tmpForm;if(c){for(var d=b._contentToClean,e=0;e<d.length;e++)for(var h=d[e],j=0;j<c.childNodes.length;j++){var o=c.childNodes[j];if(o.name===h){f.destroy(o);break}}b._originalAction&&c.setAttribute("action",b._originalAction);if(b._originalMethod)c.setAttribute("method",b._originalMethod),c.method=
b._originalMethod;if(b._originalTarget)c.setAttribute("target",b._originalTarget),c.target=b._originalTarget}b._tmpForm&&(f.destroy(b._tmpForm),delete b._tmpForm);b._finished=!0}else s._fireNextRequest()});var v={method:"POST"};s.create=function(a,c,d){if(n.global[a])return n.global[a];if(n.global.frames[a])return n.global.frames[a];d||(b("config-useXDomain")&&!b("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),
d=b("config-dojoBlankHtmlUrl")||m.toUrl("dojo/resources/blank.html"));c=f.place('<iframe id="'+a+'" name="'+a+'" src="'+d+'" onload="'+c+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',n.body());return n.global[a]=c};s.doc=function(a){if(a.contentDocument)return a.contentDocument;var b=a.name;if(b){var c=n.doc.getElementsByTagName("iframe");if(a.document&&c[b].contentWindow&&c[b].contentWindow.document)return c[b].contentWindow.document;if(n.doc.frames[b]&&
n.doc.frames[b].document)return n.doc.frames[b].document}return null};s.setSrc=function(a,b,c){a=n.global.frames[a.name];if(a.contentWindow)a=a.contentWindow;try{c?a.location.replace(b):a.location=b}catch(d){}};s._iframeName=u+"_IoIframe";s._notifyStart=function(){};s._dfdQueue=[];s._currentDfd=null;s._fireNextRequest=function(){var b;try{if(!s._currentDfd&&s._dfdQueue.length){do b=s._currentDfd=s._dfdQueue.shift();while(b&&(b.canceled||b.isCanceled&&b.isCanceled())&&s._dfdQueue.length);if(!b||b.canceled||
b.isCanceled&&b.isCanceled())s._currentDfd=null;else{var c=b.response,e=c.options,o=b._contentToClean=[],k=a.byId(e.form),l=j.notify,r=e.data||null,q;!b._legacy&&"POST"===e.method&&!k?k=b._tmpForm=f.create("form",{name:u+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},n.body()):"GET"===e.method&&k&&-1<c.url.indexOf("?")&&(q=c.url.slice(c.url.indexOf("?")+1),r=h.mixin(d.queryToObject(q),r));if(k){if(!b._legacy){var m=k;do m=m.parentNode;while(m!==n.doc.documentElement);if(!m)k.style.position=
"absolute",k.style.left="-1000px",k.style.top="-1000px",n.body().appendChild(k);if(!k.name)k.name=u+"_form"}if(r){var m=function(a,b){f.create("input",{type:"hidden",name:a,value:b},k);o.push(a)},t;for(t in r){var v=r[t];if(h.isArray(v)&&1<v.length)for(q=0;q<v.length;q++)m(t,v[q]);else k[t]?k[t].value=v:m(t,v)}}var w=k.getAttributeNode("action"),I=k.getAttributeNode("method"),J=k.getAttributeNode("target");if(c.url)b._originalAction=w?w.value:null,w?w.value=c.url:k.setAttribute("action",c.url);if(b._legacy){if(!I||
!I.value)I?I.value=e.method:k.setAttribute("method",e.method)}else b._originalMethod=I?I.value:null,I?I.value=e.method:k.setAttribute("method",e.method);b._originalTarget=J?J.value:null;J?J.value=s._iframeName:k.setAttribute("target",s._iframeName);k.target=s._iframeName;l&&l.emit("send",c,b.promise.cancel);s._notifyStart(c);k.submit()}else{e="";if(c.options.data)e=c.options.data,"string"!==typeof e&&(e=d.objectToQuery(e));m=c.url+(-1<c.url.indexOf("?")?"&":"?")+e;l&&l.emit("send",c,b.promise.cancel);
s._notifyStart(c);s.setSrc(s._frame,m,!0)}}}}catch(U){b.reject(U)}};j.addCommonMethods(s,["GET","POST"]);return s})},"js/util/blocker/BlockingContainer":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_Container","js/util/blocker/_BlockerMixin"],function(l,m,k,j){return l([j,m,k],{})})},"deploy/widgets/automationPlugin/AutomationPluginProcesses":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h){return j("deploy.widgets.automationPlugin.AutomationPluginProcesses",[m,l],{templateString:'<div class="automationPluginProcesses"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=bootstrap.restUrl+"plugin/automationPlugin/"+this.automationPlugin.id+"/processes",c=[{name:i18n("Component or Component Template"),formatter:function(b){return b.componentTemplate?e.componentTemplateLinkFormatter(b.componentTemplate):e.componentLinkFormatter(b.component)},
filterField:"componentName",filterType:"text",getRawValue:function(b){var a="";if(b.componentTemplate)a=b.componentTemplate.name;if(b.component)a=b.component.name;return a}},{name:i18n("Process"),formatter:function(b){return b.component?e.componentProcessLinkFormatter(b.process):b.componentTemplate?e.componentTemplateProcessLinkFormatter(b.process):e.genericProcessLinkFormatter(b.process)},filterField:"processName",filterType:"text",getRawValue:function(b){return b.name}},{name:i18n("Commands Used"),
field:"commandName",filterField:"commandName",filterType:"text",getRawValue:function(b){return b.commandName}}];this.grid=new h({url:d,serverSideProcessing:!0,columns:c,hidePagination:!1,tableConfigKey:"pluginProcessList",noDataMessage:i18n("This plugin is not used in any processes.")});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/automationPlugin/AutomationPluginCommands":function(){define(["dijit/_TemplatedMixin","dijit/_Widget",
"dojo/_base/declare","js/webext/widgets/table/TreeTable"],function(l,m,k,j){return k("deploy.widgets.automationPlugin.AutomationPluginCommands",[m,l],{templateString:'<div class="automationPluginCommands"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=bootstrap.restUrl+"plugin/automationPlugin/"+this.automationPlugin.id+"/commands",h=[{name:i18n("Command"),formatter:function(d){return i18n(d.name)},orderField:"name",filterField:"name",
filterType:"text",getRawValue:function(d){return d.name}},{name:i18n("Description"),formatter:function(d){return i18n(d.description)}}];this.grid=new j({url:e,serverSideProcessing:!0,hideExpandCollapse:!0,hidePagination:!1,columns:h,tableConfigKey:"pluginCommandList",noDataMessage:i18n("This plugin has no commands."),baseFilters:[{name:"automationPlugin.id",type:"eq",className:"UUID",values:[this.automationPlugin.id]}]});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()}})})},"deploy/widgets/agent/AgentEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/agent/EditAgent,deploy/widgets/property/PropValues,deploy/widgets/agent/AgentSecurityTab".split(","),function(l,m,k,j,e,h,d,c,b){return m([h],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var a=this;a.addEntry({id:"basic",label:i18n("Basic Settings"),
action:function(){a.addHeading(i18n("Basic Settings"));a.showBasicSettings()}});a.addEntry({id:"properties",label:i18n("Agent Properties"),action:function(){a.addHeading(i18n("Agent Properties"));a.showProperties()}});!0===config.data.permissions["Settings Tab"]&&a.addEntry({id:"security",label:i18n("Agent Security"),action:function(){a.addHeading(i18n("Agent Security"));a.showSecurity()}})},addHeading:function(a){e.create("div",{innerHTML:a,"class":"containerLabel"},this.detailAttach)},addDescription:function(a){e.create("div",
{innerHTML:a,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,agent:appState.agent,readOnly:!appState.agent.security["Edit Basic Settings"]})).placeAt(this.detailAttach)},showProperties:function(){(new c({propSheet:appState.agent.propSheet,readOnly:!appState.agent.security["Manage Properties"]})).placeAt(this.detailAttach)},showSecurity:function(){(new b({agent:appState.agent})).placeAt(this.detailAttach)}})})},"js/webext/widgets/TwoPaneListManager":function(){define("dojo/_base/declare,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dijit/_TemplatedMixin,dijit/_WidgetBase,dojo/dom-geometry".split(","),
function(l,m,k,j,e,h,d){return l([h,e],{templateString:'<div class="twoPaneManager twoPaneListManager"><div class="twoPaneContainer"><div class="twoPaneList" data-dojo-attach-point="listAttach"></div><div class="twoPaneDetail" data-dojo-attach-point="detailContainerAttach"><div class="twoPaneDetailTopBorder"></div><div class="twoPaneDetailPadding"><div data-dojo-attach-point="detailAttach"></div></div><div style="clear: both;"></div></div></div>',entries:[],detailWidgets:[],overrideListWidth:void 0,
postCreate:function(){this.inherited(arguments);if(this.overrideListWidth)d.isBodyLtr()?this.detailContainerAttach.style.marginLeft=this.overrideListWidth:this.detailContainerAttach.style.marginRight=this.overrideListWidth,this.listAttach.style.width=this.overrideListWidth;this.entries=[];this.detailWidgets=[]},addEntry:function(c){var b=this,a=j.create("div");a.className="twoPaneEntry";c.label?a.innerHTML=c.label:c.domNode?a.appendChild(c.domNode):c.widget&&c.widget.placeAt(a);a.onclick=function(){b.selectEntryByDiv(a)};
j.create("div",{"class":"twoPaneArrow"},a);c={div:a,action:c.action,id:c.id};this.listAttach.appendChild(a);this.entries.push(c);(1===this.entries.length&&void 0===this.defaultSelectionId||c.id&&this.defaultSelectionId===c.id)&&this.selectEntryByDiv(a)},selectEntryByDiv:function(c){var b=this;m.forEach(this.entries,function(a){a.div===c&&b._selectEntry(a)})},selectEntryById:function(c){var b=this;m.forEach(this.entries,function(a){a.id===c&&b._selectEntry(a)})},clearSelection:function(){this.clearDetail();
this.selectedEntry&&k.remove(this.selectedEntry.div,"twoPaneSelectedEntry");this.selectedEntry=null},_selectEntry:function(c){if(this.selectedEntry!==c)this.clearSelection(),this.selectedEntry=c,k.add(c.div,"twoPaneSelectedEntry"),void 0!==c.action&&c.action()},registerDetailWidget:function(c){this.detailWidgets.push(c)},clearDetail:function(){m.forEach(this.detailWidgets,function(c){c.destroy()});this.detailWidgets=[];j.empty(this.detailAttach)},clearList:function(){j.empty(this.listAttach);this.selectedEntry=
void 0;this.entries=[]}})})},"deploy/widgets/agent/EditAgent":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm","deploy/widgets/security/TeamSelector"],function(l,m,k,j,e){return k("deploy.widgets.agent.EditAgent",[m,l],{templateString:'<div class="editAgent">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){this.inherited(arguments);var h=this;this.existingValues={};if(this.agent)this.existingValues=
this.agent;var d=i18n("Cancel");this.showCancel||(d=null);this.form=new j({submitUrl:bootstrap.restUrl+"agent",readOnly:h.readOnly,showButtons:!h.readOnly,cancelLabel:d,postSubmit:function(c){h.noRedirect||navBar.setHash("agent/"+c.id);void 0!==h.callback&&h.callback()},addData:function(c){if(h.agent)c.existingId=h.existingValues.id;c.teamMappings=h.teamSelector.teams},onCancel:function(){void 0!==h.callback&&h.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",
value:this.existingValues.name});d=[];if(h.existingValues&&h.existingValues.extendedSecurity&&h.existingValues.extendedSecurity.teams)d=h.existingValues.extendedSecurity.teams;h.teamSelector=new e({resourceRoleType:"Agent",noneLabel:i18n("Standard Agent"),teams:d});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:h.teamSelector});this.form.addField({name:"useImpersonation",label:i18n("Default Impersonation"),type:"Checkbox",value:!!this.existingValues.impersonationUser,onChange:function(c){c?
h.showImpersonationOptions():h.hideImpersonationOptions()}});this.form.addField({name:"_impersonationInsert",type:"Invisible"});this.form.addField({name:"impersonationLabel",label:"",type:"Label",value:i18n("Default impersonation can be configured here. Any steps which do not specify their own impersonation settings will fall back to the settings provided here.")});this.existingValues.impersonationUser?this.showImpersonationOptions():this.hideImpersonationOptions();this.form.addField({name:"description",
label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.placeAt(this.formAttach)},showImpersonationOptions:function(){this.form.addField({name:"impersonationUser",label:i18n("User"),type:"Text",required:!0,value:this.existingValues.impersonationUser},"_impersonationInsert");this.form.addField({name:"impersonationPassword",label:i18n("Password"),type:"Secure",value:this.existingValues.impersonationPassword},"_impersonationInsert");this.form.addField({name:"impersonationGroup",
label:i18n("Group"),type:"Text",value:this.existingValues.impersonationGroup},"_impersonationInsert");this.form.addField({name:"impersonationUseSudo",label:i18n("Use Sudo"),type:"Checkbox",value:this.existingValues.impersonationUseSudo},"_impersonationInsert");this.form.addField({name:"impersonationForce",label:i18n("Always Use Default Impersonation"),type:"Checkbox",value:this.existingValues.impersonationForce},"_impersonationInsert")},hideImpersonationOptions:function(){this.form.removeField("impersonationUser");
this.form.removeField("impersonationPassword");this.form.removeField("impersonationGroup");this.form.removeField("impersonationUseSudo");this.form.removeField("impersonationForce")}})})},"deploy/widgets/security/TeamSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,js/util/blocker/_BlockerMixin,dijit/form/Select,dijit/form/Button,dojo/_base/declare,dojo/_base/array,dojo/request/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,js/webext/widgets/select/WebextSelect,js/webext/widgets/select/WebextMultiSelect,js/webext/widgets/Alert,js/webext/widgets/FormDelegates".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return h("js.deploy.widgets.security.TeamSelector",[m,l,k],{templateString:'<div class="roleSelector">  <div data-dojo-attach-point="teamsAttach" class="tagDisplay"></div>  <div data-dojo-attach-point="showTeamAttach" class="showTeam inlineBlock"></div>  <div data-dojo-attach-point="teamFormAttach" class="teamForm">     <div data-dojo-attach-point="closeAttach"></div>    <div>      <div class="team-selector">        <div data-dojo-attach-point="addTeamLabelAttach"></div>        <div data-dojo-attach-point="teamListAttach" id="teams"></div>      </div>      <div class="team-selector">        <div data-dojo-attach-point="innerAttach"></div>        <div data-dojo-attach-point="resourceRoleAttach"></div>      </div>    </div>    <div data-dojo-attach-point="buttonAttach" class="team-selector-buttons">       <div data-dojo-attach-point="addButtonAttach" class="inline-block"></div>      <div data-dojo-attach-point="cancelButtonAttach" class="inline-block"></div>    </div>   </div> </div>',
selectedTeams:null,postCreate:function(){var c=this;c.selectedTeams=[];c.hide(c.teamFormAttach);if(!c.isReadOnly()){(new e({showLabel:!1,onClick:function(){c.addTeamSelect();c.show(c.teamFormAttach)},style:"margin: 0 0 2px;",className:"showTeamButton"})).placeAt(this.showTeamAttach);var f=new e({label:i18n("Cancel"),onClick:function(){c.hide(c.teamFormAttach)},className:"hideTeamButton"});a.add(f.domNode,"idxButtonCompact");f.placeAt(c.cancelButtonAttach);f=new e({label:i18n("Add"),onClick:function(){if(!c.teams[0])c.teamsAttach.innerHTML=
"";""!==c.teamSelect.get("value")&&d.forEach(c.selectedTeams,function(a){c.addTeamWithResourceRole(a.teamLabel,c.selectedResourceRoleLabel,a.teamId,c.selectedResourceRoleId,!1)})}});a.add(f.domNode,"idxButtonCompact idxButtonSpecial");f.placeAt(c.addButtonAttach);var f=b.create("div",{"class":"teamFormLabel",innerHTML:i18n("Team")}),h=b.create("div",{"class":"teamFormLabel",innerHTML:i18n("Type")});b.place(f,this.addTeamLabelAttach);b.place(h,this.innerAttach);b.create("div",{"class":"icon-Icon_close__ui-05 linkPointer",
onclick:function(){c.hide(c.teamFormAttach)}},this.closeAttach);c.addResourceRoleSelect()}c.displayTeams()},addTeamSelect:function(){var a=this;if(!a.teamSelect){var b=c.get(bootstrap.restUrl+"security/teamsWithCreateAction/"+a.resourceRoleType,{query:{applyManagePermission:!0},handleAs:"json"});this.block();b.then(function(b){a.teamSelect=q.retrieveDelegate("TableFilterMultiSelect")({data:b,searchAttr:"teamLabel",idAttribute:"teamId",formatDropDownLabel:function(a,b){return b.teamLabel},onAdd:function(b){a.selectedTeams.push({teamId:b.teamId,
teamLabel:b.teamLabel})},onRemove:function(b){a.selectedTeams=d.filter(a.selectedTeams,function(a){return a.teamId!==b.teamId&&a.teamLabel!==b.teamLabel})},allowNone:!1});a.teamSelect.placeAt(a.teamListAttach)});b.always(function(){a.unblock()})}},addResourceRoleSelect:function(){var a=this;a.resourceRoleSelect=q.retrieveDelegate("TableFilterSelect")({url:bootstrap.baseUrl+"security/resourceType/"+a.resourceRoleType+"/resourceRoles",onChange:function(b,c){b?(a.selectedResourceRoleId=b,a.selectedResourceRoleLabel=
c.name):(a.selectedResourceRoleId=null,a.selectedResourceRoleLabel=null)},allowNone:!0,placeHolder:i18n("Standard "+a.resourceRoleType)});a.resourceRoleSelect.placeAt(a.resourceRoleAttach)},addTeamWithResourceRole:function(a,c,e,h,j){var n=this,k=a;c&&(k+=" "+i18n("(as %s)",c));var l=!1;j||d.forEach(n.teams,function(a){n.matchResourceRoleIds(a.resourceRoleId,h)&&a.teamId===e&&(l=!0)});if(!1===l){var r=e+"|"+h+"|"+n.id,a=b.create("div",{"class":"inlineBlock tagBox",id:r});b.create("div",{className:"inline-block tagName",
innerHTML:k.escape()},a);n.isReadOnly()||(k=b.create("div",{className:"inline-block tagDelete",innerHTML:"x"},a),f(k,"click",function(){n.teams=d.filter(n.teams,function(a){return!n.matchResourceRoleIds(a.resourceRoleId,h)||a.teamId!==e});b.destroy(r);if(n.onChanged)n.onChanged(n.teams)}));j||n.teams.push({resourceRoleId:h,teamId:e});b.place(a,n.teamsAttach);if(n.onChanged)n.onChanged(n.teams)}else t({message:i18n("A mapping with that team (%1) and subtype (%2) already exists",a,!c?i18n("Standard %s",
n.resourceRoleType):c)})},displayTeams:function(){var a=this;a.teams?d.forEach(a.teams,function(b){a.addTeamWithResourceRole(b.teamLabel,b.resourceRoleLabel,b.teamId,b.resourceRoleId,!0)}):(a.teamsAttach.innerHTML=i18n("No Teams"),a.teams=[])},isReadOnly:function(){var a=!1;this.readOnly&&(a=!0);return a},hide:function(b){b&&a.add(b,"hidden")},show:function(b){b&&a.remove(b,"hidden")},matchResourceRoleIds:function(a,b){var c=!1;if(a===b||!a&&!b)c=!0;return c}})})},"deploy/widgets/property/PropValues":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/property/EditPropValue,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/DomNode,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e("deploy.widgets.property.PropValues",[m,l],{templateString:'<div class="propValues"><div class="versionLinks" data-dojo-attach-point="versionAttach"></div><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="formAttach"></div></div>',readOnly:!1,showDescription:!0,deleteHeaders:{},oldVersion:!1,data:null,postCreate:function(){this.inherited(arguments);
if(this.propSheet&&this.propSheet.versioned)this.propSheetPath=this.propSheet.path,this.propSheetVersionCount=this.propSheet.versionCount,this.propSheetVersion=this.propSheet.version;else if(this.propSheetPath&&!this.propSheetVersion)this.propSheetVersion=-1;this.generateUrls();if(this.propSheetVersion&&this.propSheetVersionCount){if(this.propSheetVersion<this.propSheetVersionCount)this.oldVersion=!0;this.showVersionLinks()}this.showTable()},generateUrls:function(){this.gridRestUrl=this.propSheetPath?
bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion:this.getUrl?this.getUrl:bootstrap.baseUrl+"property/propSheet/"+this.propSheetId;if(this.propSheetPath)this.saveAllUrl=bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion+"/allPropValues",this.saveBatchAllUrl=bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion+"/allPropValuesFromBatch";
else if(this.propSheetId)this.saveAllUrl=bootstrap.baseUrl+"property/propSheet/"+this.propSheetId+"/allPropValues"},destroy:function(){this.inherited(arguments);this.clearWidgets()},showVersionLinks:function(){var a=this;c.empty(this.versionAttach);if(this.propSheetVersion&&this.propSheetVersionCount){c.create("div",{innerHTML:i18n("Version %s of %s",this.propSheetVersion,this.propSheetVersionCount)},this.versionAttach);var d=c.create("div",{},this.versionAttach);if(1===this.propSheetVersion)c.create("div",
{className:"arrow_fastBackwards_grey inlineBlock"},d),c.create("span",{innerHTML:"&nbsp;&nbsp;"},d),c.create("div",{className:"arrow_backwards_grey inlineBlock"},d);else{var e=c.create("div",{className:"arrow_fastBackwards inlineBlock"},d);b(e,"click",function(){a.propSheetVersion=1;a.refresh()});c.create("span",{innerHTML:"&nbsp;&nbsp;"},d);e=c.create("div",{className:"arrow_backwards inlineBlock"},d);b(e,"click",function(){a.propSheetVersion--;a.refresh()})}c.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},
d);this.propSheetVersion===this.propSheetVersionCount?(c.create("div",{className:"arrow_forward_grey inlineBlock"},d),c.create("span",{innerHTML:"&nbsp;&nbsp;"},d),c.create("div",{className:"arrow_fastForward_grey inlineBlock"},d)):(e=c.create("div",{className:"arrow_forward inlineBlock"},d),b(e,"click",function(){a.propSheetVersion++;a.refresh()}),c.create("span",{innerHTML:"&nbsp;&nbsp;"},d),e=c.create("div",{className:"arrow_fastForward inlineBlock"},d),b(e,"click",function(){a.propSheetVersion=
a.propSheetVersionCount;a.refresh()}),this.readOnly||(c.create("span",{innerHTML:"&nbsp;&nbsp;"},d),d=c.create("a",{innerHTML:i18n("Reset Latest to This Version")},d),b(d,"click",function(){new q({message:i18n("Are you sure you want to reset to version %s?",a.propSheetVersion),action:function(){h.put({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(a.propSheetPath)+"."+a.propSheetVersion+"/setAsLatest",load:function(){a.propSheetVersionCount++;a.propSheetVersion=a.propSheetVersionCount;
a.refresh()},error:function(a){new f({message:i18n("Error: %s",util.escape(a.responseText))})}})}})})))}},refresh:function(){if(this.propSheetVersion&&this.propSheetVersionCount)this.oldVersion=this.propSheetVersion<this.propSheetVersionCount?!0:!1;this.showVersionLinks();this.generateUrls();this.grid?this.showTable():this.form&&this.showBatchEdit();this.showVersionLinks()},clearWidgets:function(){if(this.grid)this.grid.destroy(),this.buttonTopAttach&&c.empty(this.buttonTopAttach),this.gridAttach&&
c.empty(this.gridAttach),this.grid=void 0;if(this.form)this.form.destroy(),this.form=void 0},showTable:function(){var a=this;this.clearWidgets();var b=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",width:"170px",style:{"word-break":"break-all"},getRawValue:function(a){return a.name}},{name:i18n("Value"),orderField:"value",filterField:"value",filterType:"text",style:{"word-break":"break-all"},getRawValue:function(a){return a.value},formatter:function(a){for(var b=
c.create("div"),a=a.value.escape();-1<a.indexOf("\n");)a=a.replace("\n","<br />");b.innerHTML=a;return b}}];this.showDescription&&b.push({name:i18n("Description"),width:"200px",style:{"word-break":"break-all"},field:"description"});!this.readOnly&&!this.oldVersion&&b.push({name:i18n("Actions"),width:"70px",style:{"word-break":"break-all"},formatter:this.actionsFormatter,parentWidget:this});h.get({url:this.gridRestUrl,handleAs:"json",load:function(c){a.propSheetVersion=c.version;if(c.properties)c=
c.properties;a.grid=new o({data:a.propValues||c,hidePagination:!1,serverSideProcessing:!1,hideExpandCollapse:!0,columns:b,tableConfigKey:"propValueList",noDataMessage:i18n("No properties found."),allowHeaderLocking:!1});a.grid.placeAt(a.gridAttach)}});if(!this.readOnly){if(!this.oldVersion){var e={label:i18n("Add Property"),showTitle:!1,onClick:function(){a.showPropertyDialog()}},e=new k(e);d.add(e.domNode,"idxButtonSpecial");e.placeAt(this.buttonTopAttach)}e={label:i18n("Batch Edit"),showTitle:!1,
onClick:function(){a.showBatchEdit()}};(new k(e)).placeAt(this.buttonTopAttach)}},actionsFormatter:function(a){var d=this.parentWidget,e=c.create("div",{style:"word-break:normal;"});if(!d.readOnly&&!a.inherited){var j=c.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Edit")},e);b(j,"click",function(){d.showPropertyDialog(a)});j=c.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Delete")},e);b(j,"click",function(){new q({message:i18n('Are you sure you want to delete property "%s"?',
a.name.escape()),action:function(){var b;b=d.propSheetPath?bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(d.propSheetPath)+".-1/propValues/"+encodeURIComponent(a.name):d.deleteUrl?d.deleteUrl.replace("{propertyName}",encodeURIComponent(a.name)):bootstrap.baseUrl+"property/propSheet/"+d.propSheetId+"/propValues/"+encodeURIComponent(a.name);if(d.propSheetVersion)d.deleteHeaders.version=d.propSheetVersion;h.del({url:b,headers:d.deleteHeaders,load:function(){if(d.refreshHash)navBar.setHash(d.refreshHash,
!1,!0);else{if(d.propSheetVersion&&(d.propSheetVersionCount&&d.propSheetVersionCount++,d.propSheetVersion++,d.propSheet))d.propSheet.version=d.propSheetVersion,d.propSheet.versionCount=d.propSheetVersionCount;d.refresh()}},error:function(a){if(a.responseText){if(409===a.status&&new f({message:i18n("Modifications have occured since you loaded this page, please refresh.")}),d.refreshHash&&navBar.setHash(d.refreshHash,!0,!1),d.grid)d.grid.refresh=function(){navBar.setHash(d.refreshHash,!1,!0)}}else this.inherited(arguments)}})}})})}if(a.inherited)e.innerHTML=
i18n("(Inherited)");return e},showPropertyDialog:function(b){var c=this,d=new r({title:i18n("Edit Property"),closable:!0,draggable:!0});(new a({propValue:b,propSheetVersion:this.propSheetVersion,propSheetPath:this.propSheetPath,propSheetId:this.propSheetId,saveUrl:this.saveUrl,addData:this.addData,callback:function(a){if(a)if(399<a.status){if(409===a.status?new f({message:i18n("Modifications have occured since you loaded this page please refresh.")}):a.responseText&&new f({message:util.escape(a.responseText)}),
c.refreshHash&&navBar.setHash(c.refreshHash,!0,!1),c.grid&&c.refreshHash)c.grid.refresh=function(){navBar.setHash(c.refreshHash,!1,!0)}}else if(d.hide(),d.destroy(),c.refreshHash)navBar.setHash(c.refreshHash,!1,!0);else{if(c.propSheetVersion&&(c.propSheetVersion++,c.propSheetVersionCount&&c.propSheetVersionCount++,c.propSheet))c.propSheet.version=c.propSheetVersion,c.propSheet.versionCount=c.propSheetVersionCount;c.refresh()}else d.hide(),d.destroy()}})).placeAt(d.containerNode);d.show()},showBatchEdit:function(){var a=
this;this.clearWidgets();this.form=new n({submitUrl:this.saveBatchAllUrl,version:this.propSheetVersion,addData:this.addData,onError:function(b){409===b.status?new f({message:i18n("Modifications have occured since you loaded this page, please refresh.")}):new f({message:util.escape(b.responseText)});a.refreshHash&&navBar.setHash(a.refreshHash,!0,!1)},postSubmit:function(){if(a.refreshHash)navBar.setHash(a.refreshHash,!1,!0);else{if(a.propSheetVersion&&(a.propSheetVersion++,a.propSheetVersionCount&&
a.propSheetVersionCount++,a.propSheet))a.propSheet.version=a.propSheetVersion,a.propSheet.versionCount=a.propSheetVersionCount;new f({message:i18n("Saved changes successfully")});a.refresh()}},getData:function(){var a=this,b={};j.forEach(this.fieldsArray,function(c){var d=a.getValueByField(c);void 0!==d&&null!==d&&("properties"===c.name&&d.replace(/\\n/g,"\n"),b[c.name]=d)});this.addData&&this.addData(b);return b},readOnly:a.readOnly||a.oldVersion,cancelLabel:null});a.form.placeAt(a.formAttach);var b=
document.createElement("a");b.onclick=function(){a.showTable()};b.innerHTML=i18n("Use Table Mode");b.className="linkPointer";var c=new t;c.domAttach.appendChild(b);a.form.addField({name:"_switchLink",label:"",widget:c});h.get({url:this.gridRestUrl,handleAs:"json",load:function(b){if(b.version)b=b.properties;var c="";j.forEach(b,function(a){c+=a.name.replace(/\\/g,"\\\\").replace(/\n/g,"\\n\\\n").replace(/\=/g,"\\=").replace(/:/g,"\\:").replace(/ /g,"\\ ")+"="+a.value.replace(/\\/g,"\\\\").replace(/\n/g,
"\\n\\\n").replace(/\=/g,"\\=").replace(/:/g,"\\:")+"\n"});a.form.addField({name:"properties",label:i18n("Properties"),description:i18n("Edit properties as a batch. Properties should be defined in Java.util.Properties format."),required:!0,type:"Text Area",style:{width:"300px",height:"200px"},value:c})}})},addData:function(){}})})},"deploy/widgets/property/EditPropValue":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,
j){return k("deploy.widgets.property.EditPropValue",[m,l],{templateString:'<div class="editPropValue">  <div data-dojo-attach-point="formAttach"></div></div>',propSheetVersion:null,postCreate:function(){this.inherited(arguments);var e=this;this.existingValues={};if(this.propValue)this.existingValues.name=this.propValue.name,this.existingValues.value=this.propValue.value,this.existingValues.description=this.propValue.description,this.existingValues.secure=this.propValue.secure;var h;this.propSheetPath?
(h=bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+".-1/propValues",this.propValue&&(h+="/"+encodeURIComponent(this.propValue.name))):this.saveUrl?h=this.saveUrl:(h=bootstrap.baseUrl+"property/propSheet/"+this.propSheetId+"/propValues",this.propValue&&(h+="/"+encodeURIComponent(this.propValue.name)));this.form=new j({submitUrl:h,version:e.propSheetVersion,addData:function(d){d.propSheetId=e.propSheetId;if(e.propValue)d.existingId=e.propValue.id;if(void 0===
d.value)d.value="";e.addData(d)},onError:function(d){void 0!==e.callback&&e.callback(d)},postSubmit:function(){void 0!==e.callback&&e.callback(!0)},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,readOnly:void 0!==this.propValue,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"secure",label:i18n("Secure"),
type:"Checkbox",value:this.existingValues.secure,onChange:function(d){var c=e.form.getValue("value");e.form.removeField("value");e.form.addField({name:"value",label:i18n("Value"),type:d?"Secure":"Text",value:c})}});this.form.addField({name:"value",label:i18n("Value"),type:this.existingValues.secure?"Secure":"Text Area",value:this.existingValues.value});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/agent/AgentSecurityTab":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/xhr,dojo/dom-class,dojo/_base/array,dojo/_base/declare,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),
function(l,m,k,j,e,h,d,c,b){return d("deploy.widgets.agent.EditAgent",[m,l],{templateString:'<div>  <div style="display:inline-block;">  <div>    <span data-dojo-attach-point="apiKeyLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="apiKeyValueAttach" class="agent-security-value"></span>  </div>    <div data-dojo-attach-point="revokeApiKeyButtonAttach" style="padding-bottom:32px;"></div>  <div>    <span data-dojo-attach-point="subjectLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="subjectValueAttach" class="agent-security-value"></span>  </div>  <div>    <span data-dojo-attach-point="issuingAuthorityLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="issuingAuthorityValueAttach" class="agent-security-value"></span>  </div>  <div>    <span data-dojo-attach-point="notBeforeLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="notBeforeValueAttach" class="agent-security-value"></span>  </div>  <div>    <span data-dojo-attach-point="notAfterLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="notAfterValueAttach" class="agent-security-value"></span>  </div>  <div>    <span data-dojo-attach-point="fingerprintLabelAttach" class="agent-security-label"></span>    <span data-dojo-attach-point="fingerprintValueAttach" class="agent-security-value"></span>  </div>  <div data-dojo-attach-point="revokeIdentityCertButtonAttach"></div>  </div></div>',
postCreate:function(){this.inherited(arguments);var a=this;config.data.permissions["Manage Security"]&&j.get({url:bootstrap.restUrl+"agent/"+a.agent.id+"/jmsCertificate",handleAs:"json",load:function(b){if(b.subject&&config.data.permissions["Manage Security"])a.revokeIdentityCertButton=a.createRevokeIdentityCertButton(),a.revokeIdentityCertButton.placeAt(a.revokeIdentityCertButtonAttach),a.agent.jmsSubject=b.subject,a.agent.jmsIssuingAuthority=b.issuingAuthority,a.agent.jmsNotBefore=b.notBefore,a.agent.jmsNotAfter=
b.notAfter,a.agent.jmsFingerprint=b.fingerprint,a.subjectLabelAttach.innerHTML=i18n("Subject: "),a.subjectValueAttach.innerHTML=util.escape(a.agent.jmsSubject),a.issuingAuthorityLabelAttach.innerHTML=i18n("Issuing Authority: "),a.issuingAuthorityValueAttach.innerHTML=util.escape(a.agent.jmsIssuingAuthority),a.notBeforeLabelAttach.innerHTML=i18n("Not Before: "),a.notBeforeValueAttach.innerHTML=util.escape(util.dateFormatShort(a.agent.jmsNotBefore)),a.notAfterLabelAttach.innerHTML=i18n("Not After: "),
a.notAfterValueAttach.innerHTML=util.escape(util.dateFormatShort(a.agent.jmsNotAfter)),a.fingerprintLabelAttach.innerHTML=i18n("SHA256 Fingerprint: "),a.fingerprintValueAttach.innerHTML=util.escape(a.agent.jmsFingerprint)},error:function(a){(new c({messages:[i18n("Error determining if JMS Certificate exists"),"",util.escape(a.responseText)]})).startup()}});j.get({url:bootstrap.restUrl+"agent/"+a.agent.id+"/apiKey",handleAs:"json",load:function(b){if(b.apiKey&&(a.agent.apiKey=b.apiKey,a.agent.apiKey&&
config.data.permissions["Manage Security"]))a.revokeApiKeyButton=a.createRevokeApiKeyButton(),a.revokeApiKeyButton.placeAt(a.revokeApiKeyButtonAttach),a.apiKeyLabelAttach.innerHTML=i18n("API Key: "),a.apiKeyValueAttach.innerHTML=util.escape(a.agent.apiKey)},error:function(a){(new c({messages:[i18n("Error retrieving API Key"),"",util.escape(a.responseText)]})).startup()}})},createRevokeIdentityCertButton:function(){var a=this,b=new k({showTitle:!0,label:i18n("Forget JMS certificate"),onClick:function(){a.confirmRevokeIdentityCert()}});
e.add(b.domNode,"idxButtonSpecial");return b},confirmRevokeIdentityCert:function(){var a=this;new b({message:i18n("Are you sure you want to revoke this agent's JMS certificate? This will permanently remove it from the system."),confirmLabel:i18n("Revoke"),cancelLabel:i18n("Do not revoke"),action:function(){j.del({url:bootstrap.restUrl+"agent/"+a.agent.id+"/jmsCert",handleAs:"json",load:function(){a.revokeIdentityCertButton.destroy();a.agent.hasJmsCertificate=void 0},error:function(a){(new c({messages:[i18n("Error revoking certificate"),
"",util.escape(a.responseText)]})).startup()}})}})},createRevokeApiKeyButton:function(){var a=this,b=new k({showTitle:!0,label:i18n("Forget API Key"),onClick:function(){a.confirmRevokeApiKey()}});e.add(b.domNode,"idxButtonSpecial");return b},confirmRevokeApiKey:function(){var a=this;new b({message:i18n("Are you sure you want to revoke this agent's API Key? This will permanently remove it from the system."),confirmLabel:i18n("Revoke"),cancelLabel:i18n("Do not revoke"),action:function(){j.del({url:bootstrap.restUrl+
"apikey/agent/"+a.agent.id,handleAs:"json",load:function(){a.agent.apiKey=void 0;a.revokeApiKeyButton.destroy();a.apiKeyLabelAttach.innerHTML="";a.apiKeyValueAttach.innerHTML=""},error:function(a){(new c({messages:[i18n("Error revoking API Key"),"",util.escape(a.responseText)]})).startup()}})}})}})})},"deploy/widgets/agent/SshInstallAgent":function(){define("dijit/form/Button,dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/json,js/util/blocker/_BlockerMixin,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,dojo/dom-construct,js/webext/widgets/DomNode,js/webext/widgets/Dialog,deploy/widgets/agent/EditAgentInstallProps,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return j("deploy.widgets.agent.SshInstallAgent",[k,m,c],{templateString:'<div class="installAgent">  <div data-dojo-attach-point="formAttach"></div></div>',agent:void 0,type:"ssh",postCreate:function(){this.inherited(arguments);var c=this,d=bootstrap.restUrl+"agent/"+this.type+"InstallAgent";c.agent&&(d+="/"+c.agent.id);this.form=new a({submitUrl:d,preSubmit:function(){c.block()},addData:function(a){a.teamMappings=c.teamSelector.teams},postSubmit:function(){c.unblock();
void 0!==c.callback&&c.callback()},onError:function(a){c.unblock();(new b({message:util.escape(a.responseText)})).startup()},onCancel:function(){void 0!==c.callback&&c.callback()}});c.agent||(this.form.addField({name:"hosts",label:i18n("Target Hosts"),required:!0,type:"Text Area",placeholder:"localhost\n10.10.10.10",description:i18n("Enter the host name or IP address of the system where you want to install the agent. To specify multiple entries, type each one on a separate line. On Windows, agent names are the same as the host names or IP addresses that you enter.")}),
"ssh"===c.type&&this.form.addField({name:"port",label:i18n("SSH Port"),required:!0,type:"Text",textDir:"ltr",value:"22",description:i18n("The SSH port address of the target system.")}));this.form.addField({name:"username",label:i18n("Username"),required:!0,type:"Text",description:i18n("Enter the name of the user with appropriate permissions on the target host.")});var f;if("ssh"===this.type||!this.type)f=this.form.addField({name:"usePublicKey",label:i18n("Use Public Key Authentication"),type:"Checkbox",
description:i18n("Select the <b>Use Public Key Authentication</b> check box to use public key authentication instead of a password.")});this.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure",description:i18n("Enter the password that is associated with the user in the <b>Password</b> field.")});f&&h(f.widget,"change",function(){f.widget.checked?c.form.removeField("password"):c.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure",description:i18n("Password to use to ssh/winrs to the agent machine.")},
"name")});!c.agent&&"ssh"===c.type&&this.form.addField({name:"name",label:i18n("Agent Name"),required:!0,type:"Text",description:i18n("Name for the agent. If you enter multiple hosts in the <b>Target Hosts</b> field, the agent name is appended with a number. The number is incremented for each host after the first one. For example, if you enter my_agent as the agent name and specify three hosts, the name of the agent for the first host is my_agent, the name of the agent for the second host is my_agent1, and the name of the third agent is my_agent2. Host names are processed from beginning of the list to the end.")});
c.createAgentInstallPropsSelect();this.form.addField({name:"agentInstallProps",label:i18n("Agent Installation Properties"),description:i18n("Select an agent installation property sheet from the <b>Agent Installation Properties</b> list, or use <b>New</b> to create a property sheet. Agent installation property sheets are templates that can be saved and used to install agents. You can create any number of agent installation property sheets."),required:!0,widget:c.agentInstallPropsDomNode});var j=[];
e.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Agent",handleAs:"json",sync:!0,load:function(a){j=a}});c.teamSelector=new o({resourceRoleType:"Agent",noneLabel:i18n("Standard Agent"),teams:j});c.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:c.teamSelector})},createAgentInstallPropsSelect:function(a){var b=this;b.agentInstallPropsDomNode&&b.agentInstallPropsDomNode.domAttach?n.empty(this.agentInstallPropsDomNode.domAttach):b.agentInstallPropsDomNode=new r({});b.agentInstallPropsSelect=
new f({restUrl:bootstrap.restUrl+"agent/installprops/"+b.type,required:!0,onChange:function(a){b.addEditAgentInstallPropsButton(b.agentInstallPropsDomNode.domNode);b.agentInstallPropsDomNode.set("value",a)},value:a,style:{verticalAlign:"bottom"}});a={label:i18n("New"),showTitle:!1,onClick:function(){b.showEditAgentInstallPropsDialog()}};a=new l(a);b.agentInstallPropsSelect.placeAt(b.agentInstallPropsDomNode.domAttach);b.addEditAgentInstallPropsButton();a.placeAt(b.agentInstallPropsDomNode.domAttach)},
addEditAgentInstallPropsButton:function(){var a=this;a.agentInstallPropsEditButton&&a.agentInstallPropsEditButton.destroy();if(a.agentInstallPropsSelect&&a.agentInstallPropsSelect.get("value")){var b={label:i18n("Edit"),showTitle:!1,onClick:function(){a.showEditAgentInstallPropsDialog(a.agentInstallPropsSelect._getItemAttr())}};a.agentInstallPropsEditButton=new l(b);a.agentInstallPropsEditButton.placeAt(a.agentInstallPropsDomNode.domAttach)}},showEditAgentInstallPropsDialog:function(a){var b=this,
c=new t({title:i18n("Edit Agent Installation Properties"),closable:!0,draggable:!0});(new q({type:b.type,agentInstallProps:a,callback:function(d){c.hide();c.destroy();b.createAgentInstallPropsSelect(d?d.id:a?a.id:void 0)}})).placeAt(c.containerNode);c.show()},startup:function(){this.inherited(arguments);this.form.startup();this.form.placeAt(this.formAttach)}})})},"deploy/widgets/agent/EditAgentInstallProps":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],
function(l,m,k,j){return k("deploy.widgets.agent.EditAgentInstallProps",[m,l],{templateString:'<div class="editScript">  <div data-dojo-attach-point="formAttach"></div></div>',type:"ssh",postCreate:function(){this.inherited(arguments);var e=this;if(this.agentInstallProps)this.existingValues=this.agentInstallProps;else if(this.source)this.existingValues=this.source,this.existingValues.name=void 0,this.existingValues.id=void 0;this.form=new j({submitUrl:bootstrap.restUrl+"agent/installprops/"+e.type,
postSubmit:function(a){void 0!==e.callback&&e.callback(a)},addData:function(a){if(e.agentInstallProps&&e.agentInstallProps.id)a.id=e.agentInstallProps.id},onCancel:function(){void 0!==e.callback&&e.callback()}});var h,d,c,b,a,f,n,k,l,q,o,s;if(this.existingValues)h=this.existingValues.name,d=this.existingValues.description,c=this.existingValues.agentDir,b=this.existingValues.javaHomePath,a=this.existingValues.tempDirPath,f=this.existingValues.serverHost,n=this.existingValues.serverPort,k=this.existingValues.proxyPort,
l=this.existingValues.autoStart,q=this.existingValues.serviceName,o=this.existingValues.serviceUser,s=this.existingValues.servicePassword;this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",description:i18n("Name of the agent installation property sheet."),value:h});this.form.addField({name:"description",label:i18n("Description"),type:"Text",description:i18n("Property sheet description."),value:d});this.form.addField({name:"agentDir",label:i18n("Agent Dir"),required:!0,type:"Text",
textDir:"ltr",value:c||("ssh"===e.type?"/opt/ucd/agent":"C:\\Program Files\\agent"),description:i18n("Directory on the target where the agent is installed.")});this.form.addField({name:"javaHomePath",label:i18n("Java Home Path"),required:!0,type:"Text",textDir:"ltr",value:b||("ssh"===e.type?"/usr/lib/jvm/default-java":"C:\\Program Files\\Java\\jre"),description:i18n("Literal path to Java on the target, such as C:\\Program Files\\Java\\jre or /usr/lib/jvm/default-java. Do not use any variables in this field, including the $JAVA_HOME variable.")});
this.form.addField({name:"tempDirPath",label:i18n("Temp Dir Path"),required:!0,type:"Text",textDir:"ltr",value:a||("ssh"===e.type?"/tmp":"%tmp%"),description:i18n("Path to the directory that is used during installation for temporary files.")});this.form.addField({name:"serverHost",label:i18n("Server Host"),required:!0,type:"Text",textDir:"ltr",value:f||config.data.systemConfiguration.externalHost,description:i18n("Host name or IP of the %s server or agent relay to which the agent connects.",bootstrap.productName)});
this.form.addField({name:"serverPort",label:i18n("Server Port"),required:!0,type:"Text",textDir:"ltr",value:n||"7918",description:i18n("The port that is used by the %s server or agent relay to connect to the agent. The default value is 7918 for the server, and 7916 for the agent relay.",bootstrap.productName)});this.form.addField({name:"proxyPort",label:i18n("Proxy Port"),type:"Text",textDir:"ltr",value:k,description:i18n("HTTP port of the agent relay, if used. The default value is 20080.")});"winrs"===
e.type&&(this.form.addField({name:"autoStart",label:i18n("Auto Start"),type:"Checkbox",value:l,description:i18n("If you want to install the agent as a service, select <b>Auto Start</b> to run the agent automatically when Windows starts. Windows only.")}),this.form.addField({name:"serviceName",label:i18n("Service Name"),type:"Text",value:q||"ucdagent",description:i18n("If the agent is installed as a service, enter a name for the agent service. Windows only.")}),this.form.addField({name:"serviceUser",
label:i18n("Service User"),type:"Text",value:o||".\\localsystem",description:i18n("If the agent is installed as a service, enter a user name that has appropriate permission to run a service. Windows only.")}),this.form.addField({name:"servicePass",label:i18n("Service Password"),type:"Secure",value:s||"",description:i18n("If the agent is installed as a service, enter the password that is associated with the service user. Windows only.")}));this.form.placeAt(this.formAttach)}})})},"deploy/widgets/agent/AgentList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/form/Textarea,dijit/form/TextBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/json,dojo/on,deploy/widgets/Formatters,deploy/widgets/agent/SshInstallAgent,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,deploy/widgets/agent/EditAgent,js/util/blocker/BlockingContainer,js/webext/widgets/Alert,js/webext/widgets/RadioButtonGroup,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,dojo/store/Memory,dijit/form/Select,dojo/data/ObjectStore,deploy/widgets/tag/TagDisplay,js/webext/widgets/table/TreeTable,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K){return d("deploy.widgets.agent.AgentList",[m,l],{templateString:'<div class="agent-list"><div class="listTopButtons" data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="tableAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.currentView="agent";a.relay?a.makeTable(a.currentView,
a.getColumns()):(a.selectStore=f.create("div"),dojo.xhrGet({url:bootstrap.restUrl+"relay/",handleAs:"json",load:function(c){var d=[];b.forEach(c,function(a){d.push({label:a.name,value:a.endpointId})});a.viewSelect=new z({options:[{label:i18n("Flat list"),value:"agent",selected:!0},{label:i18n("By Tag"),value:"agent/all/sort/tags"},{label:i18n("By Team"),value:"agent/all/sort/teams"}],sortByLabel:!1,style:{display:"inline-block"}});a.viewSelect.on("change",function(){if(a.currentView!==this.value){a.currentView=
this.value;a.viewSelect.placeAt(a.selectStore);a.grid.destroy();var b="agent"!==a.currentView;a.makeTable(a.currentView,a.getColumns(d),b)}});a.makeTable(a.currentView,a.getColumns(d))}}));var c=f.create("div",{className:"agent-version-container warning-state-color"},this.buttonAttach);f.create("div",{innerHTML:i18n("Min. Required")},c);f.create("div",{innerHTML:config.data.systemConfiguration.agentMinimumRequiredVersion},c);c=f.create("div",{className:"agent-version-container running-state-color"},
this.buttonAttach);f.create("div",{innerHTML:i18n("Min. Recommended")},c);f.create("div",{innerHTML:config.data.systemConfiguration.agentMinimumRecommendedVersion},c);i18n("Relays Used By This Agent");i18n("Agents Using This Relay");i18n("Relay");i18n("Agent Name");i18n("Agents without Relay");i18n("Agents in ");i18n("Show");i18n("Show agent:");i18n("Show agent without relay.");i18n("Host");i18n("Port");i18n("No agent relays include this agent.");i18n("Relay Name");i18n("Please select at least one agent relay to restart");
i18n("Are you sure you want to restart %s agent relays?","0");i18n("Error restarting relays:");i18n("Please select at least one agent relay to delete");i18n("Are you sure you want to delete %s agent relays?","0");i18n("Error deleting relays:");i18n("Failover Relays");i18n("Total Agents");i18n("Agent Status");i18n("No agent relays have been added yet.");i18n("No agents.");i18n("Total agents:");i18n("Online agents:");i18n("Offline agents:");i18n("Add Agents");i18n("Select the agent or agents to add to the relay.");
i18n("Agent Relays");i18n("Agent Relays: %s","A")},makeTable:function(c,d,e){var h=this,c={serverSideProcessing:"agent"===c,url:bootstrap.restUrl+c,orderField:"name",tableConfigKey:"agentList",selectorField:"id",columns:d,hidePagination:!1,hideExpandCollapse:"agent"===c,expandCollapseAllLinkClass:"linkPointer expand-collapse-all-link",selectable:function(a){return!a.isRoot},isSelectable:function(a){return!a.isRoot},hasChildren:function(a){return!!a.isRoot},getChildUrl:function(a){return bootstrap.restUrl+
"agent/all/"+a.type+"/"+a.id}};if(h.relay)c.baseFilters=[{name:"relayId",type:"eq",values:[h.relay.endpointId],className:"String"}];this.grid=new G(c);this.grid.placeAt(this.tableAttach);this.buttonAttach=this.grid.buttonAttach;this.addTopButtons();h.relay||(c=this.getSelectOptions())&&0<c.length&&(new B({options:c,label:i18n("Select All...")})).placeAt(this.buttonAttach);var o=[];b.forEach(h.getBulkWriteActions(),function(a){o.push(a)});if(o&&0<o.length){var n=new B({options:o,label:i18n("Actions...")});
n.placeAt(this.buttonAttach);c=function(){var a=h.grid.getSelectedItems().length;0===a?(n.set("label",i18n("Actions...")),n.set("disabled",!0)):(n.set("label",i18n("Actions... (%s)",a)),n.set("disabled",!1))};h.grid.on("selectItem",c);h.grid.on("deselectItem",c);h.grid.on("displayTable",c)}if(config.data.systemConfiguration.enableInactiveLinks)e?f.empty(this.activeBoxAttach):((new j({checked:!1,value:"true",onChange:function(a){h.grid.url=a?bootstrap.restUrl+"agent?inactive=true":bootstrap.restUrl+
"agent";h.grid.refresh()}})).placeAt(this.activeBoxAttach),e=document.createElement("div"),a.add(e,"inlineBlock"),e.style.position="relative",e.style.top="2px",e.style.left="2px",e.innerHTML=i18n("Show Inactive Agents"),this.activeBoxAttach.appendChild(e));this.viewSelect&&this.viewSelect.placeAt(this.buttonAttach)},getColumns:function(a){var c=[];c.push(this.getNameColumn());b.forEach(this.getOtherColumns(a),function(a){c.push(a)});return c},getNameColumn:function(){var b=this;return{name:i18n("Name"),
formatter:function(c,d,e){e.style.position="relative";d=f.create("div",{"class":"inlineBlock",style:"margin-right:78px;"});if(c.isRoot)if(c.color)e=[],e.push(c),(new D({readOnly:!0,tags:e})).placeAt(d);else return c.name;else{"ERROR"===c.status&&(e=f.create("div",{className:"general-icon failed-icon inlineBlock",style:{cursor:"pointer"}},d),r(e,"click",function(){b.showAgentErrors(c)}));e=t.agentLinkFormatter(c);a.add(e,"inlineBlock");f.place(e,d);if(!c.status)e=f.create("div",{"class":"inlineBlock description-text",
style:"margin-left:5px"}),e.innerHTML=i18n("(Waiting for provisioned node)"),f.place(e,d);b.tagger=new o({objectType:"Agent",item:c,callback:function(){b.grid.refresh()}});b.tagger.placeAt(d);f.place(b.actionsFormatter(c),d)}return d},orderField:"name",filterField:"name",filterType:"custom",getRawValue:function(a){return a.name},getFilterFields:function(){var a=[];a.push(new h({name:"name","class":"filter",style:{width:"45%"},placeHolder:"basic"===b.currentView?i18n("Agent Name"):i18n("Name"),type:"like"}));
"agent"===b.currentView&&a.push(new s({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"like"}));return a}}},getOtherColumns:function(a){var b=[{name:i18n("Description"),field:"description",filterField:"description",filterType:"text",filterClass:"String"},{name:i18n("Status"),orderField:"status",filterField:"status",filterType:"select",filterClass:"Enum",filterOptions:[{label:i18n("Online"),value:"ONLINE"},{label:i18n("Offline"),value:"OFFLINE"},{label:i18n("Connecting"),
value:"CONNECTING"},{label:i18n("Error"),value:"ERROR"},{label:i18n("Upgrade Recommended"),value:"UPGRADE_RECOMMND"},{label:i18n("Upgrade Required"),value:"UPGRADE_REQUIRED"},{label:i18n("Installable"),value:"INSTALLABLE"}],getRawValue:function(a){return a.status},formatter:function(a,b,c){if(!a.isRoot)return t.agentStatusFormatter(a,b,c)}},{name:i18n("Date Created"),field:"dateCreated",filterField:"dateCreated",filterType:"date",filterClass:"Long",orderField:"dateCreated",formatter:function(a){var b=
i18n("Not Available");a.dateCreated&&(b=util.dateFormatShort(a.dateCreated));return b}},{name:i18n("Last Contact"),field:"lastContact",filterField:"lastContact",filterType:"date",filterClass:"Long",orderField:"lastContact",formatter:function(a){return util.dateFormatShort(a.lastContact)}},{name:i18n("License"),orderField:"licenseType",filterField:"licenseType",filterType:"select",filterClass:"Enum",filterOptions:[{label:i18n("Floating"),value:"FLOATING"},{label:i18n("Authorized"),value:"AUTHORIZED"},
{label:i18n("Authorized"),value:"HCL_AUTHORIZED"},{label:i18n("zOS Floating"),value:"ZOS_FLOATING"},{label:i18n("zOS Authorized"),value:"ZOS_AUTHORIZED"},{label:i18n("Provisioned"),value:"PROVISIONED"},{label:i18n("Unlicensed"),value:"NONE"}],getRawValue:function(a){return a.licenseType},formatter:function(a){var b="",b="SERVER_PVU"===bootstrap.serverLicenseType?i18n("N/A"):"FLOATING"===a.licenseType?i18n("Floating"):"HCL_AUTHORIZED"===a.licenseType?i18n("Authorized"):"AUTHORIZED"===a.licenseType?
i18n("Authorized"):"PROVISIONED"===a.licenseType?i18n("Provisioned"):"NONE"===a.licenseType?i18n("Unlicensed"):"ZOS_FLOATING"===a.licenseType?i18n("zOS Floating"):"ZOS_AUTHORIZED"===a.licenseType?i18n("zOS Authorized"):i18n(a.licenseType);return i18n(b)}},{name:i18n("Type"),field:"communicationVersion",orderField:"communicationVersion",filterField:"communicationVersion",filterType:"select",filterClass:"Enum",filterOptions:[{label:i18n("JMS"),value:"JMS"},{label:i18n("Web"),value:"Web"}],formatter:function(a){return i18n(a.communicationVersion)}},
{name:i18n("Version"),field:"version",orderField:"agentVersion",filterField:"agentVersion",filterType:"text"}];a&&b.push({name:i18n("Relay"),field:"relay",filterField:"relayId",filterType:"select",filterClass:"String",filterOptions:a,getRawValue:function(a){return a.relay},formatter:function(a,b){if(b){var c="ONLINE"===b.status?"online":"offline",d=f.create("div"),e=f.create("div",{"class":"grid-cell-status"}),h=f.create("a",{"class":"name"});h.innerHTML=b.name.escape();h.href="#relay/"+b.id;c=f.create("span",
{"class":c});f.place(h,e);f.place(c,e);f.place(e,d);return d}}});return b},makeSelect:function(){},addTopButtons:function(){var b=this;if(!b.relay){if(config.data.permissions["Install Remote Agents"]){var c={label:i18n("Install New Agent"),showTitle:!1,onClick:function(){b.showInstallAgentDialog()}},c=new k(c);a.add(c.domNode,"idxButtonSpecial");c.placeAt(this.buttonAttach)}c={label:i18n("Discover Available Network Hosts"),showTitle:!1,onClick:function(){b.showHostDiscoveryDialog()}};(new k(c)).placeAt(this.buttonAttach)}},
getSelectOptions:function(){var a=this;return[{label:i18n("All"),onClick:function(){var c=[];b.forEach(a.grid.getItems(),function(a){c.push(a)});a.grid.deselectAll();a.grid.selectItems(c)}},{label:i18n("Online"),onClick:function(){a._selectWithStatus("online")}},{label:i18n("Connected"),onClick:function(){a._selectWithStatus("connected")}},{label:i18n("Offline"),onClick:function(){a._selectWithStatus("offline")}},{label:i18n("Installable"),onClick:function(){a._selectWithStatus("installable")}}]},
_selectWithStatus:function(a){var c=[];b.forEach(this.grid.getItems(),function(b){b.status&&b.status.toLowerCase()===a&&c.push(b)});this.grid.deselectAll();this.grid.selectItems(c)},getBulkWriteActions:function(){var a=this;return[{label:i18n("Restart"),onClick:function(){var b=a._getSelected();a.confirmRestarts(b)}},{label:i18n("Upgrade"),onClick:function(){var b=a._getSelected();a.confirmUpgrades(b)}},{label:i18n("Add Tag"),onClick:function(){var b=a._getSelected();a.tagger.showAddTagDialog(b)}},
{label:i18n("Remove Tag"),onClick:function(){var b=a._getSelected();a.tagger.showRemoveTagDialog(b)}},{label:i18n("Delete"),onClick:function(){var b=a._getSelected();a.confirmDeletes(b)}}]},addEditActions:function(a,b){var c=this;(new k({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.editAgent(a)}})).placeAt(b)},getInstallActions:function(a){var b=this;return[{label:i18n("Install Agent"),onClick:function(){b.showInstallAgentDialog(a)}}]},getCreateActions:function(a){var b=
this,c=[{label:i18n("Restart"),onClick:function(){b.confirmRestart(a)}}];bootstrap.serverLicense&&(bootstrap.serverLicense.agentAuthLicense||bootstrap.backupServerLicense&&bootstrap.backupServerLicense.agentAuthLicense)&&"NONE"===a.licenseType&&!a.licensed&&c.push(b._getLicenseActions(a));return c},_getLicenseActions:function(a){var b=this;return{label:i18n("License"),onClick:function(){b._license(a)}}},getDeleteActions:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]},
getUpgradeActions:function(a){var b=this;return[{label:i18n("Upgrade"),onClick:function(){b.confirmUpgrade(a)}}]},getRunnableActions:function(a){var b=this;return[{label:i18n("Test"),onClick:function(){b.showConnectionTest(a)}}]},_getSelected:function(){return b.map(this.grid.getSelectedItems(),function(a){return a.id})},actionsFormatter:function(a){var c=f.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[];"INSTALLABLE"===a.status&&a.security["Edit Basic Settings"]?
b.forEach(this.getInstallActions(a),function(a){d.push(a)}):a.security["Edit Basic Settings"]&&(this.addEditActions(a,c),a.status&&(b.forEach(this.getCreateActions(a),function(a){d.push(a)}),b.forEach(this.getRunnableActions(a),function(a){d.push(a)})));a.security.Delete&&b.forEach(this.getDeleteActions(a),function(a){d.push(a)});a.security["Upgrade Agents"]&&b.forEach(this.getUpgradeActions(a),function(a){d.push(a)});d.length&&(new B({options:d,label:i18n("Actions...")})).placeAt(c);return c},confirmLicense:function(a,
b){var d=this;a.length||(new v({message:i18n("Please select at least one agent.")})).startup();new C({message:i18n("Are you sure you want to license %s agents? This will license all selected Agents with Authorized licenses.",a.length),action:function(){d.grid.block();c.put({url:bootstrap.restUrl+"agent/license",putData:n.stringify({licensed:b,agentIds:a}),load:function(){d.grid.refresh();d.grid.unblock()},error:function(a){new v({messages:[i18n("Error licensing agents:"),"",util.escape(a.responseText)]});
d.grid.refresh();d.grid.unblock()}})}})},confirmRestarts:function(a,b){var d=this;a.length?new C({message:i18n("Are you sure you want to restart %s agents?",a.length),action:function(){c.put({url:bootstrap.restUrl+"agent/restart",putData:n.stringify({agentIds:a}),load:function(){b&&b();d.grid.refresh()},error:function(a){new v({messages:[i18n("Error restarting agents:"),"",util.escape(a.responseText)]});d.grid.refresh();d.grid.unblock()}})}}):(new v({message:i18n("Please select at least one agent to restart")})).startup()},
confirmUpgrades:function(a,b){var d=this;a.length?new C({message:i18n("Are you sure you want to upgrade %s agents?",a.length),action:function(){c.put({url:bootstrap.restUrl+"agent/upgrade",putData:n.stringify({agentIds:a}),load:function(){b&&b();d.grid.block();setTimeout(function(){d.grid.unblock();d.grid.refresh()},1E3)},error:function(a){new v({messages:[i18n("Error upgrading agents:"),"",util.escape(a.responseText)]});d.grid.refresh();d.grid.unblock()}})}}):(new v({message:i18n("Please select at least one agent to upgrade")})).startup()},
confirmDeletes:function(a,b){var d=this;a.length?new C({message:i18n("Are you sure you want to delete %s agents?",a.length),action:function(){c.del({url:bootstrap.restUrl+"agent/delete",headers:{"Content-Type":"application/json"},putData:n.stringify({agentIds:a}),load:function(){b&&b();d.grid.block();setTimeout(function(){d.grid.unblock();d.grid.refresh()},1E3)},error:function(a){(new v({messages:[i18n("Error deleting agents:"),"",util.escape(a.responseText)]})).startup();d.grid.unblock()}})}}):(new v({message:i18n("Please select at least one agent to delete")})).startup()},
_license:function(a){var b=this;new C({message:i18n("Are you sure you want to attempt to license the Agent %s? This will license the Agent with an Authorized license.",a.name.escape()),action:function(){b.grid.block();c.put({url:bootstrap.restUrl+"agent/"+a.id+"/license",load:function(){b.grid.refresh();b.grid.unblock()},error:function(a){new v({messages:[i18n("Error licensing agent:"),"",util.escape(a.responseText)]});b.grid.refresh();b.grid.unblock()}})}})},editAgent:function(a){var b=this;c.get({url:bootstrap.restUrl+
"agent/"+a.id,handleAs:"json",load:function(a){var c=new y({title:i18n("Edit Agent"),closable:!0,draggable:!0});(new u({agent:a,readOnly:!a.security["Edit Basic Settings"],noRedirect:!0,callback:function(){c.hide();c.destroy();b.grid.refresh()}})).placeAt(c);c.show()},error:function(){}})},confirmRestart:function(a){var b=this;new C({message:i18n("Are you sure you want to restart '%s'?",a.name),action:function(){c.get({url:bootstrap.restUrl+"agent/"+a.id+"/restart",load:function(){b.grid.block();
setTimeout(function(){b.grid.unblock();b.grid.refresh()},1E3)}})}})},confirmUpgrade:function(a){var b=this;new C({message:i18n("Are you sure you want to upgrade '%s'?",a.name),action:function(){c.get({url:bootstrap.restUrl+"agent/"+a.id+"/upgrade",load:function(){b.grid.block();setTimeout(function(){b.grid.unblock();b.grid.refresh()},1E3)},error:function(a){(new v({messages:[i18n("Error upgrading agent:"),"",util.escape(a.responseText)]})).startup();b.grid.unblock()}})}})},confirmDelete:function(a){var b=
this;new C({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),action:function(){b.grid.block();c.del({url:bootstrap.restUrl+"agent/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new v({messages:[i18n("Error deleting agent:"),"",util.escape(a.responseText)]})).startup();b.grid.unblock()}})}})},showHostDiscoveryDialog:function(){var a=this,b=new y({title:i18n("Discover Available Network Hosts"),
closable:!0,draggable:!0}),c=new K({submitUrl:bootstrap.restUrl+"agent/discover",postSubmit:function(){b.hide();b.destroy();a.grid.refresh()},addData:function(){},onCancel:function(){b.hide();b.destroy()}});c.addField({name:"hosts",label:i18n("Subnets"),type:"Text Area",required:!0,placeholder:"10.10.10.10/24",description:i18n("Specify subnets to be searched, one subnet per line.<br/> Format: xxx.xxx.xxx.xxx/nn, where xxx.xxx.xxx.xxx forms an IP address and nn is the network prefix length.<br/><br/>Discovery may take a long time if a large network search is done, so<br/>it is ideal to limit the scope of each search to 255 or fewer addresses.")});
c.placeAt(b.containerNode);b.show()},showInstallAgentDialog:function(a){var b=this,d=new y({title:i18n("Install New Agent"),closable:!0,draggable:!0,description:i18n("You can install agents only on computers that are running UNIX or Windows. If the target system is UNIX, select SSH. Otherwise select WinRS. For more information on system requirements, or for other systems, including z/OS\u00ae, consult the help."),extraClasses:["installNewAgentTypeSelector"]}),e;if(a)c.get({url:bootstrap.restUrl+"agent/"+
a.id+"/properties/discoveredPort",handleAs:"text",load:function(c){"22"===c?e=new q({type:"ssh",agent:a,callback:function(){d.hide();d.destroy();b.grid.refresh()}}):"135"===c&&(e=new q({type:"winrs",agent:a,callback:function(){d.hide();d.destroy();b.grid.refresh()}}));e.placeAt(d.containerNode);d.show()},error:function(){}});else{var f=new x({name:"remoteTypeGroup",options:[{label:i18n("SSH"),value:"ssh"},{label:i18n("WinRS"),value:"winrs"}],disabled:!1,enabled:!0,onChange:function(a){b.remoteType=
a;d.hide();d.destroy();f.destroy();d=new y({title:i18n("Install New Agent"),closable:!0,draggable:!0});e=new q({type:b.remoteType,callback:function(){d.hide();d.destroy();b.grid.refresh()}});e.placeAt(d.containerNode);d.show()}});f.placeAt(d.containerNode);d.show()}},showConnectionTest:function(b){var c=this,d=new w,f=new y({title:i18n("Connection Test"),closable:!0,draggable:!0}),h=new e({});h.set("disabled",!0);a.add(h.domNode,"connectionResults");var j={label:i18n("Run Connectivity Test"),showTitle:!1,
onClick:function(){c.runConnectivityTest(h,b,d)}},j=new k(j);a.add(j.domNode,"idxButtonSpecial");a.add(j.domNode,"connectionTestButton");d.placeAt(f.containerNode);h.placeAt(d.domNode);j.placeAt(d.domNode);f.show()},runConnectivityTest:function(a,b,d){a.set("value",i18n("Running test..."));d.block();c.put({url:bootstrap.restUrl+"agent/"+b.id+"/connectivity",handleAs:"json",load:function(b){a.set("value",b.log);d.unblock()}})},showAgentErrors:function(a){var b=new y,c=f.create("div",{style:{maxWidth:"700px",
maxHeight:"500px",overflow:"auto"}},b.containerNode);f.create("div",{innerHTML:i18n("Error")},b.titleNode);var c=f.create("div",{},c),d;for(d in a.errors)a.errors.hasOwnProperty(d)&&("ERROR_HTTP_CONNECT"===d?f.create("div",{innerHTML:i18n("The agent could not connect to the server or relay using HTTP. Ensure that the external URL is set correctly on the System Settings page and that there are no firewalls blocking HTTP communication from the agent."),className:"bold"},c):f.create("div",{innerHTML:i18n("An error occurred while the agent was connecting to the server:")},
c),f.create("div",{innerHTML:i18n("Full error trace:"),className:"bold",style:{paddingLeft:"15px",paddingTop:"8px"}},c),f.create("div",{innerHTML:a.errors[d].escape(),style:{paddingLeft:"15px",paddingTop:"3px",paddingBottom:"5px"}},c),f.create("div",{innerHTML:i18n("Once the problem has been corrected, please restart either the agent or the server."),className:"bold",style:{paddingTop:"15px"}},c));b.show()}})})},"dojo/data/ObjectStore":function(){define("../_base/lang,../Evented,../_base/declare,../_base/Deferred,../_base/array,../_base/connect,../regexp".split(","),
function(l,m,k,j,e,h,d){function c(b){return"*"==b?".*":"?"==b?".":b}return k("dojo.data.ObjectStore",[m],{objectStore:null,constructor:function(b){this._dirtyObjects=[];if(b.labelAttribute)b.labelProperty=b.labelAttribute;l.mixin(this,b)},labelProperty:"label",getValue:function(b,a,c){return"function"===typeof b.get?b.get(a):a in b?b[a]:c},getValues:function(b,a){var c=this.getValue(b,a);return c instanceof Array?c:void 0===c?[]:[c]},getAttributes:function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&
!("_"==c.charAt(0)&&"_"==c.charAt(1))&&a.push(c);return a},hasAttribute:function(b,a){return a in b},containsValue:function(b,a,c){return-1<e.indexOf(this.getValues(b,a),c)},isItem:function(b){return"object"==typeof b&&b&&!(b instanceof Date)},isItemLoaded:function(b){return b&&"function"!==typeof b.load},loadItem:function(b){var a;"function"===typeof b.item.load?j.when(b.item.load(),function(c){a=c;var d=c instanceof Error?b.onError:b.onItem;d&&d.call(b.scope,c)}):b.onItem&&b.onItem.call(b.scope,
b.item);return a},close:function(b){return b&&b.abort&&b.abort()},fetch:function(b){function a(a){b.onError&&b.onError.call(h,a,b)}var b=l.delegate(b,b&&b.queryOptions),f=this,h=b.scope||f,k=b.query;if("object"==typeof k){var k=l.delegate(k),m;for(m in k){var q=k[m];if("string"==typeof q)k[m]=RegExp("^"+d.escapeString(q,"*?\\").replace(/\\.|\*|\?/g,c)+"$",b.ignoreCase?"mi":"m"),k[m].toString=function(a){return function(){return a}}(q)}}var o=this.objectStore.query(k,b);j.when(o.total,function(c){j.when(o,
function(a){b.onBegin&&b.onBegin.call(h,c||a.length,b);if(b.onItem)for(var d=0;d<a.length;d++)b.onItem.call(h,a[d],b);b.onComplete&&b.onComplete.call(h,b.onItem?null:a,b);return a},a)},a);b.abort=function(){o.cancel&&o.cancel()};if(o.observe)this.observing&&this.observing.cancel(),this.observing=o.observe(function(a,b,c){if(-1==e.indexOf(f._dirtyObjects,a))if(-1==b)f.onNew(a);else if(-1==c)f.onDelete(a);else for(var d in a)if(d!=f.objectStore.idProperty)f.onSet(a,d,null,a[d])},!0);this.onFetch(o);
b.store=this;return b},getFeatures:function(){return{"dojo.data.api.Read":!!this.objectStore.get,"dojo.data.api.Identity":!0,"dojo.data.api.Write":!!this.objectStore.put,"dojo.data.api.Notification":!0}},getLabel:function(b){if(this.isItem(b))return this.getValue(b,this.labelProperty)},getLabelAttributes:function(){return[this.labelProperty]},getIdentity:function(b){return this.objectStore.getIdentity?this.objectStore.getIdentity(b):b[this.objectStore.idProperty||"id"]},getIdentityAttributes:function(){return[this.objectStore.idProperty]},
fetchItemByIdentity:function(b){var a;j.when(this.objectStore.get(b.identity),function(c){a=c;b.onItem.call(b.scope,c)},function(a){b.onError.call(b.scope,a)});return a},newItem:function(b,a){if(a){var c=this.getValue(a.parent,a.attribute,[]),c=c.concat([b]);b.__parent=c;this.setValue(a.parent,a.attribute,c)}this._dirtyObjects.push({object:b,save:!0});this.onNew(b);return b},deleteItem:function(b){this.changing(b,!0);this.onDelete(b)},setValue:function(b,a,c){var d=b[a];this.changing(b);b[a]=c;this.onSet(b,
a,d,c)},setValues:function(b,a,c){if(!l.isArray(c))throw Error("setValues expects to be passed an Array object as its value");this.setValue(b,a,c)},unsetAttribute:function(b,a){this.changing(b);var c=b[a];delete b[a];this.onSet(b,a,c,void 0)},changing:function(b,a){b.__isDirty=!0;for(var c=0;c<this._dirtyObjects.length;c++){var d=this._dirtyObjects[c];if(b==d.object){if(a&&(d.object=!1,!this._saveNotNeeded))d.save=!0;return}}d=b instanceof Array?[]:{};for(c in b)b.hasOwnProperty(c)&&(d[c]=b[c]);this._dirtyObjects.push({object:!a&&
b,old:d,save:!this._saveNotNeeded})},save:function(b){var b=b||{},a,c=[],d=[],e=this,k=this._dirtyObjects,l=k.length;try{h.connect(b,"onError",function(){if(!1!==b.revertOnError){var a=k;k=d;e.revert();e._dirtyObjects=a}else e._dirtyObjects=k.concat(d)});if(this.objectStore.transaction)var o=this.objectStore.transaction();for(var s=0;s<k.length;s++){var m=k[s],w=m.object,v=m.old;delete w.__isDirty;w?a=this.objectStore.put(w,{overwrite:!!v}):"undefined"!=typeof v&&(a=this.objectStore.remove(this.getIdentity(v)));
d.push(m);k.splice(s--,1);j.when(a,function(){--l||b.onComplete&&b.onComplete.call(b.scope,c)},function(a){l=-1;b.onError.call(b.scope,a)})}o&&o.commit()}catch(x){b.onError.call(b.scope,value)}},revert:function(){for(var b=this._dirtyObjects,a=b.length;0<a;){a--;var c=b[a],d=c.object,c=c.old;if(d&&c){for(var e in c)c.hasOwnProperty(e)&&d[e]!==c[e]&&(this.onSet(d,e,d[e],c[e]),d[e]=c[e]);for(e in d)c.hasOwnProperty(e)||(this.onSet(d,e,d[e]),delete d[e])}else if(c)this.onNew(c);else this.onDelete(d);
delete (d||c).__isDirty;b.splice(a,1)}},isDirty:function(b){return!b?!!this._dirtyObjects.length:b.__isDirty},onSet:function(){},onNew:function(){},onDelete:function(){},onFetch:function(){}})})},"deploy/widgets/agent/AgentPools":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.agent.AgentPools",[m,l],{templateString:'<div class="agentPools"><div data-dojo-attach-point="tableAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var h=bootstrap.restUrl+"agent/pool",d=[{name:i18n("Name"),formatter:j.agentPoolLinkFormatter,orderField:"name",getRawValue:function(c){return c.name}},{name:i18n("Description"),field:"description"}];this.grid=new e({url:h,serverSideProcessing:!0,orderField:"name",tableConfigKey:"agentPoolAgentIncludeList",noDataMessage:i18n("No agent pools include this agent."),columns:d,hidePagination:!1,hideExpandCollapse:!0,baseFilters:[{name:"agents.id",type:"eq",
values:[this.agent.id],className:"UUID"}],queryData:{outputType:["BASIC","SECURITY"]}});this.grid.placeAt(this.tableAttach)}})})},"deploy/widgets/notification/NotificationSchemeEntries":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/notification/EditNotificationEntry,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),function(l,m,
k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.notification.NotificationSchemeEntries",[m,l],{templateString:'<div class="notificationSchemeList"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;if(config.data.permissions[security.system.manageNotificationSchemes]){var b=bootstrap.restUrl+"notification/notificationScheme/"+this.notificationScheme.id+"/entries",c=
[{name:i18n("Type"),formatter:this.typeFormatter},{name:i18n("Role"),formatter:this.roleFormatter},{name:i18n("Template"),field:"templateName"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new n({url:b,serverSideProcessing:!1,columns:c,tableConfigKey:"notificationEntryList",noDataMessage:i18n("This scheme has no notification entries."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);b=new k({label:i18n("Add Notification Entry"),showTitle:!1,
onClick:function(){a.showNewEntryDialog()}});h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)}},destroy:function(){this.inherited(arguments);this.grid.destroy()},typeFormatter:function(a){var b="";switch(a.type){case "PROCESS_SUCCESS":b=i18n("Process Success");break;case "PROCESS_FAILURE":b=i18n("Process Failure");break;case "PROCESS_STARTED":b=i18n("Process Started");break;case "APPROVAL_COMPLETED":b=i18n("Approval Completed");break;case "APPROVAL_FAILED":b=i18n("Approval Failed")}return b},
actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div"),f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Edit")},e);c(f,"click",function(){b.showEditEntryDialog(a)});f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);c(f,"click",function(){b.confirmDeletion(a)});return e},roleFormatter:function(a){var b=a.resourceTypeName,c=a.roleName,a=a.resourceRoleName;b||(b=i18n("Unknown"));c||(c=i18n("Unknown"));return a?i18n("%s (%s) / %s",
b,a,c):i18n("%s / %s",b,c)},showNewEntryDialog:function(){var c=this,d=new a({title:i18n("Add Notification Entry"),closable:!0,draggable:!0});(new b({notificationScheme:c.notificationScheme,roleOptions:c.roleOptions,callback:function(){d.hide();d.destroy();c.grid.refresh()}})).placeAt(d.containerNode);d.show()},showEditEntryDialog:function(c){var d=this,e=new a({title:i18n("Edit Notification Entry"),closable:!0,draggable:!0});(new b({notificationEntry:c,roleOptions:d.roleOptions,callback:function(){e.hide();
e.destroy();d.grid.refresh()}})).placeAt(e.containerNode);e.show()},confirmDeletion:function(a){var b=this;new f({message:i18n("Are you sure you want to delete this notification entry?"),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"notification/notificationEntry/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()}})}})}})})},"deploy/widgets/notification/EditNotificationEntry":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm",
"js/webext/widgets/RestSelect"],function(l,m,k,j,e){return k("deploy.widgets.notification.EditNotificationEntry",[m,l],{templateString:'<div class="editNotificationEntry">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=this;this.existingValues={};if(this.notificationEntry)this.existingValues=this.notificationEntry;this.form=new j({submitUrl:bootstrap.restUrl+"notification/notificationEntry",postSubmit:function(){void 0!==h.callback&&h.callback()},
addData:function(c){if(h.notificationScheme)c.notificationSchemeId=h.notificationScheme.id;if(h.notificationEntry)c.existingId=h.notificationEntry.id},onCancel:function(){void 0!==h.callback&&h.callback()}});var d=new e({restUrl:bootstrap.baseUrl+"security/role",allowNone:!1,autoSelectFirst:!1,noIllegalValues:!0,value:this.existingValues.roleId});this.form.addField({name:"roleId",label:i18n("Role"),description:i18n("Send notifications to members of this role on the same team as the target object."),
required:!0,widget:d});this.form.addField({name:"type",label:i18n("Event Type"),description:i18n("The type of events which will be used for this notification entry"),allowedValues:[{label:i18n("Process Success"),value:"PROCESS_SUCCESS"},{label:i18n("Process Failure"),value:"PROCESS_FAILURE"},{label:i18n("Process Started"),value:"PROCESS_STARTED"},{label:i18n("Approval Completed"),value:"APPROVAL_COMPLETED"},{label:i18n("Approval Failed"),value:"APPROVAL_FAILED"}],required:!0,type:"Select",value:this.existingValues.type});
this.form.addField({name:"resourceTypeName",label:i18n("Target"),description:i18n("The target object to send notifications on."),required:!0,type:"Select",allowedValues:[{label:i18n("Application"),value:"Application"},{label:i18n("Environment"),value:"Environment"},{label:i18n("Resource"),value:"Resource"}],value:this.existingValues.resourceTypeName,onChange:function(c){h.showResourceRoleSelect(c)}});this.existingValues.resourceTypeName?this.showResourceRoleSelect(this.existingValues.resourceTypeName,
this.existingValues.resourceRoleId):this.showResourceRoleSelect("Application");d=new e({restUrl:bootstrap.restUrl+"notification/notificationEntry/templateNames",getLabel:function(c){return i18n(c)},getValue:function(c){return c},allowNone:!1,value:this.existingValues.templateName});this.form.addField({name:"templateName",label:i18n("Template Name"),description:i18n("Template to use for this type of event."),required:!0,widget:d});this.form.placeAt(this.formAttach)},showResourceRoleSelect:function(h,
d){this.form.hasField("resourceRoleId")&&this.form.removeField("resourceRoleId");var c=new e({restUrl:bootstrap.baseUrl+"security/resourceType/"+h+"/resourceRoles",noneLabel:i18n("Standard "+h),value:d});this.form.addField({name:"resourceRoleId",label:i18n("Type"),description:i18n("Notifications will be limited to objects which match this type."),widget:c},"templateName")}})})},"deploy/widgets/notification/EditNotificationScheme":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare",
"js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.notification.EditNotificationScheme",[m,l],{templateString:'<div class="editNotificationScheme">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=this;this.existingValues={};if(this.notificationScheme)this.existingValues.name=this.notificationScheme.name,this.existingValues.description=this.notificationScheme.description;this.form=new j({submitUrl:bootstrap.restUrl+
"notification/notificationScheme",postSubmit:function(h){navBar.setHash("notificationScheme/"+h.id);void 0!==e.callback&&e.callback()},addData:function(h){if(e.notificationScheme)h.existingId=e.notificationScheme.id},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.placeAt(this.formAttach)}})})},
"deploy/widgets/notification/NotificationSchemeList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,deploy/widgets/notification/EditNotificationScheme,js/webext/widgets/Dialog,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.notification.NotificationSchemeList",[m,l],{templateString:'<div class="notificationSchemeList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',
defaultNotificationSchemeID:"00000000-0000-0000-0000-000000000000",postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"notification/notificationScheme",c=[{name:i18n("Notification Scheme"),formatter:this.notificationSchemeFormatter},{name:i18n("Description"),field:"description"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!1,columns:c,tableConfigKey:"notificationSchemeList",noDataMessage:i18n("No notification schemes have been created yet."),
hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.manageNotificationSchemes]&&(b={label:i18n("Create Notification Scheme"),showTitle:!1,onClick:function(){a.showNewNotificationSchemeDialog({})}},b=new k(b),d.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},actionsFormatter:function(a){var b=this.parentWidget,d=document.createElement("div");if(config.data.permissions[security.system.manageNotificationSchemes]&&(h.create("a",
{"class":"actionsLink linkPointer",href:"/#notificationScheme/"+a.id,innerHTML:i18n("Edit")},d),a.id!==b.defaultNotificationSchemeID)){var e=h.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},d);c(e,"click",function(){b.confirmDeletion(a)})}return d},confirmDeletion:function(a){var b=this,c;new n({message:i18n("Are you sure you want to delete this notification scheme?"),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"notification/notificationScheme/"+a.id,handleAs:"json",
load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){b.grid.unblock();c=a.responseText}})},destroy:function(){c&&new f({message:c})}})},destroy:function(){this.inherited(arguments);this.grid.destroy()},notificationSchemeFormatter:function(a){var b=document.createElement("a");config.data.permissions[security.system.manageNotificationSchemes]?b.href="#notificationScheme/"+a.id:b.style="text-decoration:none;";b.innerHTML=i18n(a.name.escape());return b},showNewNotificationSchemeDialog:function(){var c=
new a({title:i18n("Create Notification Scheme"),closable:!0,draggable:!0});(new b({callback:function(){c.hide();c.destroy()}})).placeAt(c.containerNode);c.show()}})})},"deploy/widgets/ModelWidgetList":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dijit/_Container","dojo/_base/declare"],function(l,m,k,j){return j([m,l,k],{templateString:'<div class="modelWidgetList"><div data-dojo-attach-point="containerNode"></div></div>',postCreate:function(){var e=this;this.inherited(arguments);this._mappings=
{};if(!this.query)this.query={};var h=this.model.query(this.query);h.observe(function(d,c,b){-1!==c?(d=e.model.getIdentity(d),e.removeChild(c),delete e._mappings[d]):-1!==b&&e.displayWidget(d,b)});h.forEach(this.displayWidget,this)},displayWidget:function(e,h){var d=this.widgetFactory(e);this.addChild(d,h);this._mappings[this.model.getIdentity(e)]=d},getWidgetForModel:function(e){return this._mappings[this.model.getIdentity(e)]}})})},"deploy/widgets/snapshotComparison/SnapshotZOSFileTable":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/dom-class,dojo/_base/declare,dojo/dom-construct,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h){return j("deploy.widgets.snapshotComparison.SnapshotZOSFileTable",[m,l],{templateString:'<div><div class="containerLabel" data-dojo-attach-point="labelAttach"></div><div class="innerContainer"><div data-dojo-attach-point="gridAttach"></div></div></div>',postCreate:function(){this.inherited(arguments);this.labelAttach.innerHTML=i18n("Data Set and File Difference Report for %s",this.componentName.escape());var d=this.createZOSFileCompareTableLayOut(this.snapshotName,this.otherSnapshotName);
this.grid=new h({data:this.artifacts,serverSideProcessing:!1,noDataMessage:i18n("No difference between the two snapshots"),columns:d,orderField:"name",hidePagination:!1,hideFooterLinks:!0,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach)},createZOSFileCompareTableLayOut:function(d,c){return[{name:i18n("Name"),field:"name",orderField:"name",getRawValue:function(b){return b.name}},{name:i18n("Artifact Type"),field:"artifactType",formatter:function(b,a){return"["+a+"]"}},{name:i18n("Snapshot: %s(Versions)",
d),field:"versions1",getRawValue:function(b){return b.versions1}},{name:i18n("Snapshot: %s(Versions)",c),field:"versions2",getRawValue:function(b){return b.versions2}}]},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/snapshotComparison/SnapshotVersionComparison":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.snapshotComparison.SnapshotVersionComparison",
[m,l],{templateString:'<div class="snapshotVersionComparison" style="width: 700px"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Component"),formatter:function(d){return j.componentLinkFormatter(d.component)}},{name:i18n("Version"),formatter:function(d){return j.versionLinkFormatter(d)}},{name:this.snapshot1.name,style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center"},formatter:function(d){var c="";if(d.snapshot1)c=
document.createElement("img"),c.src=bootstrap.webextUrl+"images/webext/icons/icon_check_green.png";return c}},{name:this.snapshot2.name,style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center"},formatter:function(d){var c="";if(d.snapshot2)c=document.createElement("img"),c.src=bootstrap.webextUrl+"images/webext/icons/icon_check_green.png";return c}}];this.grid=new e({url:bootstrap.restUrl+"deploy/snapshot/"+this.snapshot1.id+"/compareVersions/"+this.snapshot2.id,serverSideProcessing:!1,columns:h,
tableConfigKey:"snapshotVersionComparisonList",noDataMessage:i18n("No versions found for either snapshot.")});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/snapshotComparison/SnapshotPropertyComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c){return j([m,
l],{templateString:'<div class="snapshotConfiguration">    <div data-dojo-attach-point="checkboxAttach"></div><div data-dojo-attach-point="propertyComparison"></div></div>',postCreate:function(){var b=this;b.table=new c({url:bootstrap.restUrl+"deploy/snapshot/"+this.snapshot1.id+"/compareProperties/"+this.snapshot2.id+"/true",noDataMessage:i18n("No changes found."),serverSideProcessing:!1,tableConfigKey:"snapshotPropertyComparison",columns:[{name:i18n("Property Name"),field:"name"},{name:this.snapshot1.name,
formatter:function(a){var b="";if(a.value)b=a.value;return b}},{name:this.snapshot2.name,formatter:function(a){var b="";if(a.otherValue)b=a.otherValue;return b}}]});b.table.placeAt(b.propertyComparison);(new k({checked:!0,value:"true",onChange:function(a){b.table.url=a?bootstrap.restUrl+"deploy/snapshot/"+b.snapshot1.id+"/compareProperties/"+b.snapshot2.id+"/true":bootstrap.restUrl+"deploy/snapshot/"+b.snapshot1.id+"/compareProperties/"+b.snapshot2.id+"/false";b.table.refresh()}})).placeAt(b.checkboxAttach);
var a=document.createElement("div");h.add(a,"inlineBlock");a.style.position="relative";a.style.top="2px";a.style.left="2px";a.innerHTML=i18n("Only Show Differences");this.checkboxAttach.appendChild(a)}})})},"deploy/widgets/snapshotComparison/SnapshotFileComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,deploy/widgets/component/ComponentFileTable,deploy/widgets/snapshotComparison/SnapshotZOSFileTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return j([m,l],{templateString:'<div class="snapshotFiles"><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.componentFileTables=[];e.get({url:bootstrap.restUrl+"deploy/snapshot/"+b.snapshot1.id+"/compareFiles/"+b.snapshot2.id,handleAs:"json",load:function(c){k.forEach(c,function(c){c.tooMany?"ZOS"===c.componentType?(c=new f({componentName:c.component,artifacts:c.artifacts,snapshotName:b.snapshot1.name,
otherSnapshotName:b.snapshot2.name}),b.componentFileTables.push(c),c.placeAt(b.tableAttach)):d.place('<div class="containerLabel">File Difference Report for '+c.component+'</div><div class="innerContainer" style="width: 1000px;"><div><br>'+c.tooMany+"<br></div></div>",b.tableAttach):(c=new a({component:c.component,version:c.version1,otherVersion:c.version2,title1:"Snapshot: "+b.snapshot1.name+" ",title2:"Snapshot: "+b.snapshot2.name+" "}),b.componentFileTables.push(c),c.placeAt(b.tableAttach))})}})},
destroy:function(){dojo.empty(this.tableAttach)}})})},"deploy/widgets/component/ComponentFileTable":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/dom-class,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable,deploy/widgets/resource/TransientResourceCompareTree,dojo/_base/xhr,deploy/widgets/version/VersionFileCompare,js/webext/widgets/Alert".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return h("deploy.widgets.component.ComponentFileTable",
[m,l],{templateString:'<div><div class="containerLabel" data-dojo-attach-point="labelAttach"></div><div class="innerContainer"><div data-dojo-attach-point="gridAttach"></div></div></div>',postCreate:function(){this.inherited(arguments);this.labelAttach.innerHTML="ZOS"===this.component.componentType?i18n("Data Set and File Difference Report for %s",this.component.name.escape()):i18n("File Difference Report for %s",this.component.name.escape());var b;b=this.title1?i18n("%s - Version: %s (Last Modified)",
this.title1,this.version.name):i18n("Version: %s (Last Modified)",this.version.name);var c;c=this.title2?i18n("%s - Version: %s (Last Modified)",this.title2,this.otherVersion.name):i18n("Version: %s (Last Modified)",this.otherVersion.name);var d=[];"ZOS"===this.component.componentType?(d=i18n("Action"),d=this.createzOSCompareTableLayout(b,c,d)):d=this.createCompareTableLayout(b,c);b=i18n("No file differences found.");this.component.useVfs?this.component.sourceConfigPlugin&&"AnthillPro"===this.component.sourceConfigPlugin.name&&
(b=i18n("This component does not store its artifacts in CodeStation.")):b=i18n("This component does not store its artifacts in CodeStation.");"ZOS"===this.component.componentType&&(b=i18n("No difference between the two versions."));this.grid=new a({url:bootstrap.restUrl+"deploy/component/"+this.component.id+"/"+this.version.id+"/compareVersions/"+this.otherVersion.id,serverSideProcessing:!1,columns:d,tableConfigKey:"versionFileList",noDataMessage:b,hidePagination:!1,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach)},
modifiedFormatter:function(a,b,e){var f=i18n("Not deployed");if(0===b||b)f=document.createElement("div",{"class":"downContainer"}),f.innerHTML=0<b?util.tableDateFormatter(a,b):i18n("No Date"),!e.archived&&e.component&&e.component.componentType&&"ZOS"!==e.component.componentType&&(d.create("span",{innerHTML:"  (",style:{whiteSpace:"pre"}},f),b=d.create("a",{"class":"linkPointer",innerHTML:i18n("Download")},f),c(b,"click",function(){util.downloadFile(bootstrap.restUrl+"deploy/version/"+e.id+"/downloadArtifact/"+
util.encodeIgnoringSlash(a.download))}),d.create("span",{innerHTML:")"},f));return f},compFormatter:function(a,e,h){var j=this,k=document.createElement("div"),l=d.create("a",{"class":"linkPointer",innerHTML:i18n("Compare")},k);c(l,"click",function(){j.grid.block();n.get({url:bootstrap.restUrl+"deploy/version/"+a.id+"/fileCompare/"+e.id+"/"+h,handleAs:"json",load:function(c){j.grid.unblock();if("resource"===c.type){var d=new b({title:i18n("Differences"),closable:!0,draggable:!1,width:-50});(new f({readOnly:!0,
data:c.data})).placeAt(d.containerNode);d.show()}else"file"===c.type&&(new r({data:c.data,title:i18n("File Differences"),version1:"Version "+a.name,version2:"Version "+e.name})).show()},error:function(a){(new t({title:i18n("Error comparing files"),message:a.responseText})).startup();j.grid.unblock()}})});return k},zosArtifactNameFormater:function(a){var b=a;0<a.indexOf("/")&&(b=a.replace(/\//,"("),b+=")");return b},createzOSCompareActionDialog:function(f){var h=this,j=f.name;f.isUnixFile||h.zosArtifactNameFormater(f.name);
var n=i18n("Compare DeployType and property values"),l=d.create("div"),r=d.create("a",{"class":"linkPointer",title:i18n("Actions"),innerHTML:i18n("Compare")},l);c(r,"click",function(){var c=new b({title:n,closable:!0,draggable:!0}),l=d.create("div");d.create("div",{"class":"innerContainerLabel",innerHTML:i18n("Artifact: ")},l);d.create("div",{"class":"innerContainer description",innerHTML:j},l);var r=d.create("div",{style:{"margin-top":"10px"}},l);d.create("div",{"class":"innerContainerLabel",innerHTML:"Deploy Type:"},
r);d.create("div",{"class":"innerContainer description",innerHTML:i18n("Version(%s):%s",h.version.name,f.zosDeployTypeDifferences.value1)},r);d.create("div",{"class":"innerContainer description",innerHTML:i18n("Version(%s):%s",h.otherVersion.name,f.zosDeployTypeDifferences.value2)},r);var m=f.zosPropertyDifferences,t=[];if(m&&0<m.length)for(r=0;r<m.length;)m[r].different&&t.push(m[r]),r++;c.containerNode.appendChild(l);var v=new a({data:t,serverSideProcessing:!1,noDataMessage:i18n("No Properties"),
columns:[{name:i18n("Name"),field:"name",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Version: %s",h.version.name),field:"value1",getRawValue:function(a){return a.value1}},{name:i18n("Version: %s",h.otherVersion.name),field:"value2",getRawValue:function(a){return a.value2}}],orderField:"name",hidePagination:!0,hideFooterLinks:!0,hideExpandCollapse:!0,style:{maxWidth:"840px",minWidth:"640px"}}),l=new e({checked:!0,value:"true",onChange:function(a){v.data=a?t:m;v.refresh()}});
v.placeAt(c);l.placeAt(c);l=document.createElement("div");k.add(l,"inlineBlock");l.style.position="relative";l.style.top="2px";l.style.left="2px";l.innerHTML=i18n("Only Show Differences");c.containerNode.appendChild(l);c.show()});return l},createzOSCompareTableLayout:function(a,b,c){var d=this;return[{name:i18n("Artifact"),field:"name",formatter:function(a,b){var c=b;a.isUnixFile||(c=d.zosArtifactNameFormater(b));return c}},{name:"Artifact Type",field:"artifactType",formatter:function(a,b){return"["+
b+"]"}},{name:a,field:"version1Modified",formatter:function(a,b){return d.modifiedFormatter(a,b,d.version)}},{name:b,field:"version2Modified",formatter:function(a,b){return d.modifiedFormatter(a,b,d.otherVersion)}},{name:c,field:"zosPropertiesChanges",formatter:function(a,b,c){if(a.zosPropertiesChanges)return d.createzOSCompareActionDialog(a,b,c)}}]},createCompareTableLayout:function(a,b){var c=this;return[{name:i18n("Path"),field:"name"},{name:a,field:"version1Modified",formatter:function(a,b){return c.modifiedFormatter(a,
b,c.version)}},{name:b,field:"version2Modified",formatter:function(a,b){return c.modifiedFormatter(a,b,c.otherVersion)}},{name:i18n("Actions"),field:"changes",formatter:function(a,b){if(b)return c.compFormatter(c.version,c.otherVersion,b)}}]},destroy:function(){this.inherited(arguments);this.grid.destroy();this.compareDialog&&this.compareDialog.destroy()}})})},"deploy/widgets/resource/TransientResourceCompareTree":function(){define("dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,deploy/widgets/Formatters,deploy/widgets/resource/ResourceCompareTree,deploy/widgets/property/TransientPropSheetDiffReportTable".split(","),
function(l,m,k,j,e,h,d,c){return l([d],{readOnly:!0,leftColumnName:i18n("Local Resources"),rightColumnName:i18n("Discovered Resources"),selectable:!1,postCreate:function(){this.inherited(arguments)},viewPropertiesFormatter:function(b){var a=k.create("a",{className:"linkPointer",innerHTML:i18n("View Properties")});j(a,"click",function(){var a=new e({title:i18n("Compare Properties")});(new c({propSheetDiffReport:b.propertyComparison})).placeAt(a.containerNode);a.show()});return a},differenceFormatter:function(b,
a,c){a=k.create("div");"EQUIVALENT"===b.pathChangeType?k.create("div",{innerHTML:i18n("No Change")},a):"RIGHT_ONLY"===b.pathChangeType?(k.create("div",{innerHTML:i18n("Cell Only")},a),m.add(c,"table-compare-changed")):"LEFT_ONLY"===b.pathChangeType?(k.create("div",{innerHTML:i18n("Local Only")},a),m.add(c,"table-compare-changed")):"PROPERTY_DIFFERENCE"===b.pathChangeType?(k.create("div",{innerHTML:i18n("Properties Changed")},a),m.add(c,"table-compare-changed")):"CHILDREN_CHANGED"===b.pathChangeType&&
(k.create("div",{innerHTML:i18n("Children Changed")},a),m.add(c,"table-compare-children-changed"));return a},rightResourceLinkformatter:function(b,a,c){a="";b.rightResource&&(a=h.resourceNonLinkFormatter(b.rightResource));"LEFT_ONLY"===b.pathChangeType&&m.add(c,"resource-compare-placeholder-cell");return a}})})},"deploy/widgets/resource/ResourceCompareTree":function(){define("dijit/_Widget,dijit/_TemplatedMixin,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,dojo/on,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable,deploy/widgets/Formatters,deploy/widgets/property/PropSheetDiffReportTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return h([l,m],{templateString:'<div class="resource-compare-tree with-description-text with-top-buttons"><div data-dojo-attach-point="explainationAttach"></div><div data-dojo-attach-point="treeAttach"></div></div>',readOnly:!1,leftColumnName:i18n("Left"),rightColumnName:i18n("Right"),selectable:!0,postCreate:function(){this.inherited(arguments);var a=this;a.onlyChangedBox=new j({checked:!0,value:"true",onChange:function(){a.tree.refresh()}});a.tree=new t({url:a.url,
data:a.data,selectable:a.selectable,processData:function(b){if(a.onlyChangedBox.get("value")){var c=[],d;e.forEach(b,function(b){if("EQUIVALENT"!==b.pathChangeType)d=a.shallowCloneResource(b),d.children=a.cloneChangedChildren(b),c.push(d)});return c}return b},hideExpandCollapse:!1,idAttribute:"path",isSelectable:function(a){return"EQUIVALENT"!==a.pathChangeType&&"CHILDREN_CHANGED"!==a.pathChangeType&&"PROP_DEF_MISMATCH"!==a.pathChangeType},cascadeSelectedState:!0,onSelectItem:function(b){for(var b=
a.tree._getRowObjectForItem(b).parent,c=[];b;)b.item&&"LEFT_ONLY"===b.item.pathChangeType&&c.push(b.item),b=b.parent;a.tree.selectItems(c)},columns:[{name:a.leftColumnName,formatter:function(b,c,d){return a.leftResourceLinkFormatter(b,c,d)}},{name:a.rightColumnName,alwaysShowExpandArrow:!0,formatter:function(b,c,d){return a.rightResourceLinkFormatter(b,c,d)}},{name:i18n("Difference"),formatter:function(b,c,d){return a.differenceFormatter(b,c,d)}},{name:i18n("Actions"),formatter:function(b,c,d){a.onlyChangedBox.get("value")&&
a.filterIndifferentProperties(b);return a.viewPropertiesFormatter(b,c,d)}}]});a.tree.placeAt(a.treeAttach);this.readOnly||this.buildApplyInstructions();var c=b.create("div",{style:{paddingTop:"7px"}},a.explainationAttach);a.onlyChangedBox.placeAt(c);b.create("span",{innerHTML:i18n("Only show changes"),style:{paddingLeft:"7px"}},c)},buildApplyInstructions:function(){var h=this;b.create("span",{className:"bold",innerHTML:i18n("To apply changes from the first resource tree to the second:")},h.explainationAttach);
b.create("div",{innerHTML:i18n("1: Select changes to apply from the left side to the right side.")},h.explainationAttach);b.create("div",{innerHTML:i18n("2: Click the Continue button to preview changes, then submit to apply all changes.")},h.explainationAttach);var j=new k({showTitle:!1,label:i18n("Continue")});c.add(j.domNode,"idxButtonSpecial");j.placeAt(h.explainationAttach);f(j,"click",function(){var c=new o({propSheetDiffReport:[]}),f=h.tree.getSelectedItems().sort(function(a,b){return a.path.localeCompare(b.path)}),
j=new r({title:i18n("Preview Changes")}),l=b.create("div",{},j.containerNode);b.create("div",{innerHTML:i18n("The following changes will be applied to %s:",appState.rightResource.path.escape()),style:{paddingBottom:"5px"}},l);e.forEach(f,function(a){var d;if("LEFT_ONLY"===a.pathChangeType)d=a.leftResource.path.substring(appState.leftResource.path.length),b.create("div",{innerHTML:i18n("Create %s",d.escape()),style:{paddingBottom:"3px"}},l);else if("RIGHT_ONLY"===a.pathChangeType)d=a.rightResource.path.substring(appState.rightResource.path.length),
b.create("div",{innerHTML:i18n("Delete %s",d.escape()),style:{paddingBottom:"3px"}},l);else if("PROPERTY_DIFFERENCE"===a.pathChangeType){d=a.rightResource.path.substring(appState.rightResource.path.lastIndexOf("/"));var f=b.create("div",{innerHTML:i18n("Apply properties to %s",d.escape()),style:{paddingBottom:"3px"}},l);e.forEach(a.propertyComparison,function(a){function d(a){b.create("div",{innerHTML:a,style:{paddingLeft:"15px"}},f)}var e=c.getDisplayName(a),h=c.getLeftValue(a);a.different&&(void 0===
a.leftPropValue?d(i18n("Remove %s",e.escape())):void 0===a.rightPropValue?d(i18n("Add %s with value %s",e.escape(),h.escape())):d(i18n("Set %s to %s",e.escape(),h.escape())))})}});var q=new k({label:i18n("Apply Changes")});q.placeAt(j.containerNode);q.on("click",function(){var b=[];e.forEach(f,function(a){if("LEFT_ONLY"===a.pathChangeType){var c=appState.rightResource.path+a.path,c=c.substring(0,c.lastIndexOf("/")),a={action:"copy",parentPath:c,sourceId:a.leftResource.id};if(appState.rightResource.resourceTemplate)a.parentTemplate=
appState.rightResource.resourceTemplate.id;b.push(a)}else"RIGHT_ONLY"===a.pathChangeType?b.push({action:"delete",id:a.rightResource.id,path:a.rightResource.path}):"PROPERTY_DIFFERENCE"===a.pathChangeType&&b.push({action:"applyProperties",sourceId:a.leftResource.id,targetId:a.rightResource.id})});j.hide();j.destroy();h.tree.block();d.post({url:bootstrap.restUrl+"resource/resource/applyCompareChanges",postData:a.stringify(b),headers:{"Content-Type":"application/json"},load:function(){j.hide();j.destroy();
new n({message:i18n("Resource changes applied successfully.")});h.tree.refresh()},error:function(a){new n({messages:[i18n("Error applying resource changes:"),"",util.escape(a.responseText)]});h.grid.unblock()}})});j.show()})},filterIndifferentProperties:function(a){var b=[];e.forEach(a.propertyComparison,function(a){a.different&&b.push(a)});a.propertyComparison=b},shallowCloneResource:function(a){return{leftResource:a.leftResource,path:a.path,pathChangeType:a.pathChangeType,propertyComparison:a.propertyComparison,
rightResource:a.rightResource}},cloneChangedChildren:function(a){var b=this,c=[];e.forEach(a.children,function(a){if("EQUIVALENT"!==a.pathChangeType){var d=b.shallowCloneResource(a);d.children=b.cloneChangedChildren(a);c.push(d)}});return c},viewPropertiesFormatter:function(a){var c=b.create("a",{className:"linkPointer",innerHTML:i18n("View Properties")});f(c,"click",function(){var b=new r({title:i18n("Compare Properties")});(new o({propSheetDiffReport:a.propertyComparison})).placeAt(b.containerNode);
b.show()});return c},differenceFormatter:function(a,d,e){d=b.create("div");"EQUIVALENT"===a.pathChangeType?b.create("div",{innerHTML:i18n("No Change")},d):"RIGHT_ONLY"===a.pathChangeType?(b.create("div",{innerHTML:i18n("Deleted")},d),c.add(e,"table-compare-removed")):"LEFT_ONLY"===a.pathChangeType?(b.create("div",{innerHTML:i18n("Added")},d),c.add(e,"table-compare-added")):"PROPERTY_DIFFERENCE"===a.pathChangeType?(b.create("div",{innerHTML:i18n("Properties Changed")},d),c.add(e,"table-compare-changed")):
"CHILDREN_CHANGED"===a.pathChangeType?(b.create("div",{innerHTML:i18n("Children Changed")},d),c.add(e,"table-compare-children-changed")):"PROP_DEF_MISMATCH"===a.pathChangeType&&(b.create("div",{innerHTML:i18n("Property definition type mismatch")},d),c.add(e,"table-compare-error"));return d},rightResourceLinkFormatter:function(a,b,d){b="";a.rightResource&&(b=q.resourceLinkFormatter(a.rightResource));"LEFT_ONLY"===a.pathChangeType&&c.add(d,"resource-compare-placeholder-cell");return b},leftResourceLinkFormatter:function(a,
b,d){b="";a.leftResource&&(b=q.resourceLinkFormatter(a.leftResource));"RIGHT_ONLY"===a.pathChangeType&&c.add(d,"resource-compare-placeholder-cell");return b}})})},"deploy/widgets/property/PropSheetDiffReportTable":function(){define("dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h){return k([l,m],{templateString:'<div class="prop-sheet-diff-report-table"><div class="containerLabel" data-dojo-attach-point="labelAttach"> </div><div data-dojo-attach-point="treeAttach" class="diffReportTable"></div></div>',
leftColumnName:i18n("Left"),rightColumnName:i18n("Right"),applyStatusColor:function(d,c){d.errored?j.add(c,"table-compare-error"):d.different&&j.add(c,"table-compare-changed")},postCreate:function(){this.inherited(arguments);var d=this;this.labelAttach.innerHTML=i18n("Property Difference Report");var c,b;null!==d.propSheetDiffReport&&void 0!==d.propSheetDiffReport?c=d.propSheetDiffReport:b=d.url;d.tree=new h({data:c,url:b,hideExpandCollapse:!0,hidePagination:!1,hideFooterLinks:!0,columns:[{name:i18n("Name"),
formatter:function(a,b,c){d.applyStatusColor(a,c);return d.getDisplayName(a)}},{name:d.leftColumnName,formatter:function(a,b,c){d.applyStatusColor(a,c);return d.getLeftValue(a)}},{name:d.rightColumnName,formatter:function(a,b,c){d.applyStatusColor(a,c);return d.getRightValue(a)}}]});d.tree.placeAt(d.treeAttach)},getDisplayName:function(d){var c=d.name;d.leftPropDef?c=i18n(d.leftPropDef.label):d.rightPropDef&&(c=i18n(d.rightPropDef.label));return c},getLeftSecurity:function(){},getRightSecurity:function(){},
getLeftValue:function(d){var c="";if(d.leftPropValue)c=d.leftPropValue.value;else if(d.leftPropDef)c=d.leftPropDef.value;return c},getRightValue:function(d){var c="";if(d.rightPropValue)c=d.rightPropValue.value;else if(d.rightPropDef)c=d.rightPropDef.value;return c}})})},"deploy/widgets/property/TransientPropSheetDiffReportTable":function(){define(["dojo/_base/declare","deploy/widgets/property/PropSheetDiffReportTable"],function(l,m){return l([m],{leftColumnName:i18n("Local"),rightColumnName:i18n("Discovered")})})},
"deploy/widgets/version/VersionFileCompare":function(){define("dojo/_base/declare,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,deploy/widgets/component/ComponentFileComparison,dojo/_base/array,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/DeferredList,dojo/dom-style,dojo/on,dojo/window,deploy/widgets/log/Blocker,js/util/blocker/_BlockerMixin,js/webext/widgets/Dialog,js/webext/widgets/Pager".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return l([q],{autoRefresh:!0,lines:null,
linesOfInterest:null,pagerControls:null,logText:null,headerContainer:null,postCreate:function(){this.inherited(arguments);this.compareDialog=new q({title:i18n("File Differences"),closable:!0,heightPercent:75,widthPercent:75,destroyOnHide:!0});d.add(this.compareDialog.containerNode,"versionFileCompare")},show:function(){this.compContainer=c.create("div",{"class":"compContainer"},this.compareDialog.containerNode);this.titleContainer=c.create("div",{"class":"titleContainer",innerHTML:"<div></div><br>"},
this.compContainer);c.create("div",{"class":"title",innerHTML:this.version1.escape()},this.titleContainer);c.create("div",{"class":"titleSpacer",style:{width:"2%",display:"inline-block"}},this.titleContainer);c.create("div",{"class":"title",innerHTML:this.version2.escape()},this.titleContainer);this.showCompText();this.compareDialog.show()},showCompText:function(){var a=this;if(void 0!==a.data)a.onData(a.data);else h.get({url:a.url,handleAs:"json",load:function(b){a.onData(b)}})},onData:function(a){var b=
this,d=c.create("div",{"class":"comparedLinesContainer"},b.compContainer),f=c.create("div",{"class":"originalLineContainer"},d),h=c.create("div",{"class":"lineCountContainer"},f),j=c.create("div",{"class":"overflowContainer"},f),n=c.create("div",{"class":"originalLines"},j),k=c.create("div",{"class":"changedLineContainer"},d),l=c.create("div",{"class":"lineCountContainer"},k),r=c.create("div",{"class":"overflowContainer"},k),q=c.create("div",{"class":"changedLines"},r);e.forEach(a,function(a){if(a.space)a=
c.create("div",{"class":"ellipsisContainer"},d),c.create("div",{"class":"leftEll",innerHTML:"..."},a),c.create("div",{"class":"rightEll",innerHTML:"..."},a),f=c.create("div",{"class":"originalLineContainer"},d),h=c.create("div",{"class":"lineCountContainer"},f),j=c.create("div",{"class":"overflowContainer"},f),n=c.create("div",{"class":"originalLines"},j),k=c.create("div",{"class":"changedLineContainer"},d),l=c.create("div",{"class":"lineCountContainer"},k),j=c.create("div",{"class":"overflowContainer"},
k),q=c.create("div",{"class":"changedLines"},j);else if(a.truncated&&!b.truncatedNotifaction)b.truncatedNotifaction=c.create("div",{"class":"truncatedNotification"},d),b.truncatedNotifaction.innerHTML=a.message;else{var e=c.create("div",{"class":"lineCountRow"},h);if(0<=a.originalLineNumber)e.innerHTML=a.originalLineNumber;e=c.create("div",{"class":"original"},n);e.innerHTML=a.original?a.original.escape():" ";var o=c.create("div",{"class":"lineCountRow"},l);if(0<=a.changeLineNumber)o.innerHTML=a.changeLineNumber;
o=c.create("div",{"class":"change"},q);o.innerHTML=a.change?a.change.escape():" ";if("CHANGE"===a.type)e.style.backgroundColor="#FFFCDC",o.style.backgroundColor="#FFFCDC";else if("INSERT"===a.type)o.style.backgroundColor="#F0FFD2";else if("DELETE"===a.type)e.style.backgroundColor="#FFEEEE"}})},hide:function(){this.inherited(arguments);this.refreshTimer&&clearTimeout(this.refreshTimer);this.compareDialog.destroy()}})})},"deploy/widgets/component/ComponentFileComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,deploy/widgets/component/ComponentFileTable".split(","),
function(l,m,k,j,e,h){return j("deploy.widgets.component.ComponentFileComparison",[m,l],{templateString:'<div class="componentFileComparison"><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.versionId=this.otherVersion;this.getVersion(this.versionId)},getVersion:function(d){var c=this;e.get({url:bootstrap.restUrl+"deploy/version/"+d,handleAs:"json",load:function(b){(new h({component:appState.component,version:c.version,otherVersion:b})).placeAt(c.tableAttach)}})},
destroy:function(){this.inherited(arguments);k.forEach(this.componentFileTables,function(d){d.destroy()})}})})},"deploy/widgets/log/Blocker":function(){define(["dijit/_Widget","dojo/_base/declare","js/util/blocker/_BlockerMixin"],function(l,m,k){return m("deploy.widgets.log.Blocker",[k,l],{})})},"js/webext/widgets/Pager":function(){define("dojo/_base/declare,dijit/_WidgetBase,dijit/_TemplatedMixin,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,dijit/form/TextBox".split(","),
function(l,m,k,j,e,h,d,c,b){return l([m,k],{templateString:'<span style="display: inline-block; position:absolute; right: 6px; bottom: 0px;"><div data-dojo-attach-point="pageNumbers" class="pageNumbers"></div></span>',pageNumbers:null,pageCountLabel:null,pageBox:null,firstImg:null,backImg:null,nextImg:null,lastImg:null,disabled:!1,itemsPerPage:50,totalItems:0,pageNumber:null,totalPages:null,startItem:0,buildRendering:function(){var a=this;a.inherited("buildRendering",arguments);a.totalPages=Math.ceil(a.totalItems/
a.itemsPerPage);var d=h.create("a",{"class":"linkPointer pagerItem"});c(d,"click",function(){a.setPageNumber(0)});a._setupEnterToDoClick(d);a.firstImg=a._createImg("arrow_fastBackwards",{alt:"first page"},d);a.pageNumbers.appendChild(d);d=h.create("a",{"class":"linkPointer pagerItem"});c(d,"click",function(){a.setPageNumber(a.pageNumber-1)});a._setupEnterToDoClick(d);a.backImg=a._createImg("arrow_backwards",{alt:"previous page"},d);a.pageNumbers.appendChild(d);a.pageBox=new b({title:i18n("current page"),
name:"page",value:"",style:{width:"40px"},onKeyPress:function(b){13===b.charOrCode&&(b=parseInt(a.pageBox.textbox.value,10)-1,isNaN(b)?this.set("value",isNaN(a.pageNumber)?"":a.pageNumber+1):b!==a.pageNumber&&a.setPageNumber(b))},onFocus:function(){a.pageBox.textbox.select()}});a.pageBox.textbox.style.textAlign="center";a.pageBox.placeAt(a.pageNumbers);a.pageCountLabel=h.create("span",{"class":"pagerItem"},a.pageNumbers);d=h.create("a",{"class":"linkPointer pagerItem"});c(d,"click",function(){a.setPageNumber(a.pageNumber+
1)});a._setupEnterToDoClick(d);a.nextImg=a._createImg("arrow_forward",{alt:i18n("next page")},d);a.pageNumbers.appendChild(d);d=h.create("a",{"class":"linkPointer pagerItem"});c(d,"click",function(){a.setPageNumber(a.totalPages-1)});a._setupEnterToDoClick(d);a.lastImg=a._createImg("arrow_fastForward",{alt:i18n("last page")},d);a.pageNumbers.appendChild(d);a.updateRendering()},setItemsPerPage:function(a){this.itemsPerPage=a;this.pageNumber=Math.ceil(this.startRecord/this.itemsPerPage);this.totalPages=
Math.ceil(this.totalItems/this.itemsPerPage);this.updateRendering()},setTotalItems:function(a){this.totalItems=a;this.totalPages=Math.ceil(this.totalItems/this.itemsPerPage);d.set(this.pageBox.domNode,{width:10*((""+this.totalPages).length+2)+"px"});this.setPageNumber(this.pageNumber)},setPageNumber:function(a){a=Number(a);if(!this.disabled&&!isNaN(a)){var a=Math.min(a,this.totalPages-1),a=Math.max(a,0),b=this.pageNumber;this.pageNumber=a;this.startItem=this.pageNumber*this.itemsPerPage;if(isNaN(this.startItem))this.startItem=
0;this.updateRendering();if(b!==this.pageNumber)this.onPageChange()}},updateRendering:function(){this.totalItems?d.set(this.pageNumbers,{display:"block"}):d.set(this.pageNumbers,{display:"none"});var a=!isNaN(this.pageNumber)&&0<this.pageNumber;this._enablePaggerControl(this.firstImg,a);this._enablePaggerControl(this.backImg,a);a=!isNaN(this.pageNumber)&&this.pageNumber<this.totalPages-1;this._enablePaggerControl(this.nextImg,a);this._enablePaggerControl(this.lastImg,a);this.pageBox.set("value",isNaN(this.pageNumber)?
"":this.pageNumber+1);this.pageCountLabel.innerHTML="/ "+this.totalPages},_enablePaggerControl:function(a,b){var b=void 0===b||!!b,c=a.parentNode;c.tabIndex=b?0:-1;e.toggle(a,"arrow_disabled",!b);e.toggle(c,"linkPointer",b);(c=j.get(a,"alt"))&&(b?j.set(a,"alt",c.replace(/page disabled$/,"page")):j.set(a,"alt",c.replace(/page$/,"page disabled")))},onPageChange:function(){},_createImg:function(a,b,c,d){b||(b={});b.src=this._blankGif;b=h.create("img",b,c,d);e.add(b,a);return b},_setupEnterToDoClick:function(a){return c(a,
"keypress",function(a){13===a.charOrCode&&(document.createEvent?(a=document.createEvent("HTMLEvents"),a.initEvent("click",!0,!0),this.dispatchEvent(a)):this.fireEvent&&this.fireEvent("onclick"))})}})})},"deploy/widgets/snapshotComparison/SnapshotConfigComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return j([m,l],{templateString:'<div class="snapshotConfiguration"><div data-dojo-attach-point="configTree"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/snapshot/"+this.snapshot1.id+"/compareConfiguration/"+this.snapshot2.id+"/true",d=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:this.snapshot1.name,formatter:function(a){var b;
a.snapshot1?(a=a.snapshot1,!0===a.locked?b=a.version:void 0!==a.version&&null!==a.version&&(b=i18n("Latest (%s)",a.version)),a.commit&&(b+=" - "+a.commit.committer+" ("+util.dateFormatShort(a.commit.commitTime)+")")):a.snapshot2&&(b=i18n("N/A"));return b}},{name:this.snapshot2.name,formatter:function(a){var b;a.snapshot2?(a=a.snapshot2,!0===a.locked?b=a.version:void 0!==a.version&&null!==a.version&&(b=i18n("Latest (%s)",a.version)),a.commit&&(b+=" - "+a.commit.committer+" ("+util.dateFormatShort(a.commit.commitTime)+
")")):a.snapshot1&&(b=i18n("N/A"));return b}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.tree=new f({url:b,serverSideProcessing:!1,orderField:"name",tableConfigKey:"snapshotConfigList",noDataMessage:i18n("No configuration found."),columns:d});this.tree.placeAt(this.configTree);(new k({checked:!0,value:"true",onChange:function(b){a.tree.url=b?bootstrap.restUrl+"deploy/snapshot/"+a.snapshot1.id+"/compareConfiguration/"+a.snapshot2.id+"/true":bootstrap.restUrl+"deploy/snapshot/"+
a.snapshot1.id+"/compareConfiguration/"+a.snapshot2.id+"/false";a.tree.refresh()}})).placeAt(this.tree.buttonAttach);b=document.createElement("div");h.add(b,"inlineBlock");b.style.position="relative";b.style.top="2px";b.style.left="2px";b.innerHTML=i18n("Only Show Differences");this.tree.buttonAttach.appendChild(b);c.set(this.tree.buttonAttach,{position:"relative",top:"10px"})},actionsFormatter:function(a){var c=this.parentWidget,f=document.createElement("div");if(a.snapshot1&&a.snapshot2&&"PropSheet"===
a.snapshot1.className){var h=d.create("a",{innerHTML:i18n("View Changes"),"class":"linkPointer actionsLink"},f);b(h,"click",function(){e.get({url:bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(a.snapshot1.path+"."+a.snapshot1.version)+"/compare/"+util.vc.encodeVersionedPath(a.snapshot2.path+"."+a.snapshot2.version),handleAs:"json",load:function(a){c.showPropertyChanges(a)}})})}return f},showPropertyChanges:function(b){var c=new a;(new f({style:{minWidth:"450px"},data:b,serverSideProcessing:!1,
hideExpandCollapse:!0,tableConfigKey:"snapshotConfigChangeList",noDataMessage:i18n("No changes found."),columns:[{name:i18n("Name"),field:"name"},{name:this.snapshot1.name,formatter:function(a){var b="";if(a.value)b=a.value.value;return b}},{name:this.snapshot2.name,formatter:function(a){var b="";if(a.otherValue)b=a.otherValue.value;return b}}]})).placeAt(c.containerNode);c.show()}})})},"deploy/widgets/approval/ApprovalRevocationDialog":function(){define(["dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm",
"js/webext/widgets/Dialog"],function(l,m,k,j){return m("deploy.widgets.approval.ApprovalRevocationDialog",[l],{postCreate:function(){this.inherited(arguments);var e=this,h=new j({closable:!0,draggable:!0}),d="";this.applicationProcessRequestId?d=bootstrap.restUrl+"deploy/applicationProcessRequest/"+this.applicationProcessRequestId+"/revokeApproval":this.componentProcessRequestId&&(d=bootstrap.restUrl+"deploy/componentProcessRequest/"+this.componentProcessRequestId+"/revokeApproval");d=new k({submitUrl:d,
saveLabel:i18n("Submit"),onCancel:function(){h.hide();h.destroy()},postSubmit:function(){h.hide();h.destroy();void 0!==e.callback&&e.callback()}});d.addField({name:"comment",label:i18n("Comment"),required:!1,type:"Text Area"});d.placeAt(h.containerNode);h.show()}})})},"deploy/widgets/approval/TaskResponseDialog":function(){define(["dijit/_Widget","dojo/_base/array","dojo/_base/declare","js/webext/widgets/ColumnForm","js/webext/widgets/Dialog"],function(l,m,k,j,e){return k("deploy.widgets.approval.TaskResponseDialog",
[l],{postCreate:function(){this.inherited(arguments);var h=this,d=new e({title:i18n("Respond"),closable:!0,draggable:!0}),c=new j({submitUrl:bootstrap.restUrl+"approval/task/"+this.task.id+"/close",saveLabel:i18n("Submit"),onCancel:function(){d.hide();d.destroy()},postSubmit:function(){d.hide();d.destroy();void 0!==h.callback&&h.callback()}});c.addField({name:"passFail",type:"Radio",label:i18n("Response"),required:!0,allowedValues:[{label:i18n("Approve"),value:"passed"},{label:i18n("Reject"),value:"failed"}]});
this.task.commentPrompt&&c.addField({name:"commentPrompt",value:this.task.commentPrompt,type:"Label"});c.addField({name:"comment",label:i18n("Comment"),required:this.task.commentRequired,type:"Text Area"});m.forEach(this.task.propDefs,function(b){if(!b.label)b.label=b.name;b.name="p:"+b.name;c.addField(b)});c.placeAt(d.containerNode);d.show()}})})},"deploy/widgets/approval/TasksForUser":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/approval/TaskResponseDialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.approval.TasksForUser",[m,l],{templateString:'<div class="tasksForUser"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this,b=bootstrap.restUrl+"approval/task/tasksForUser",a=[{name:i18n("Name"),field:"name",filterField:"name",filterType:"text",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Started"),field:"startDate",formatter:util.tableDateFormatter,orderField:"dateStarted",
getRawValue:function(a){return new Date(a.startDate)}},{name:i18n("Description"),orderField:"description",filterField:"description",filterType:"text",formatter:this.descriptionFormatter,getRawValue:function(a){return c.getDescriptionFromRow(a)}},{name:i18n("Requester"),formatter:this.requestedByFormatter},{name:i18n("Snapshot/Version"),formatter:this.versionFormatter},{name:i18n("Environment/Resource"),formatter:this.destinationFormatter},{name:i18n("Target"),formatter:this.targetFormatter},{name:i18n("Actions"),
formatter:this.actionsFormatter,parentWidget:this}];this.grid=new d({serverSideProcessing:!1,url:b,noDataMessage:i18n("No work items found."),tableConfigKey:"tasksForUser",orderField:"dateStarted",sortType:"desc",columns:a,hidePagination:!1,hideExpandCollapse:!0});this.grid.parentWidget=this;this.grid.placeAt(this.gridAttach)},requestedByFormatter:function(c){var b=document.createElement("div");if(c.applicationProcessRequest)b.innerHTML=c.applicationProcessRequest.userName?c.applicationProcessRequest.userName.escape():
"";else if(c.componentProcessRequest)b.innerHTML=c.componentProcessRequest.userName?c.componentProcessRequest.userName.escape():"";return b},getDescriptionFromRow:function(c){var b="";c.applicationProcessRequest?b=c.applicationProcessRequest.description?c.applicationProcessRequest.description.escape():"":c.componentProcessRequest&&(b=c.componentProcessRequest.description?c.componentProcessRequest.description.escape():"");return b},descriptionFormatter:function(c){var b=document.createElement("div");
if(c.applicationProcessRequest)b.innerHTML=c.applicationProcessRequest.description?c.applicationProcessRequest.description.escape():"";else if(c.componentProcessRequest)b.innerHTML=c.componentProcessRequest.description?c.componentProcessRequest.description.escape():"";return b},versionFormatter:function(c){var b=document.createElement("div");if(c.applicationProcessRequest){if(c.applicationProcessRequest.snapshot){var a=document.createElement("a");a.href="#snapshot/"+c.applicationProcessRequest.snapshot.id;
a.innerHTML=c.applicationProcessRequest.snapshot.name.escape();b.appendChild(a)}}else if(c.componentProcessRequest&&c.componentProcessRequest.version)a=document.createElement("a"),a.href="#version/"+c.componentProcessRequest.version.id,a.innerHTML=c.componentProcessRequest.version.name.escape(),b.appendChild(a);return b},destinationFormatter:function(c){var b=document.createElement("div");if(c.applicationProcessRequest){var a=document.createElement("a");a.href="#environment/"+c.applicationProcessRequest.environment.id;
a.innerHTML=c.applicationProcessRequest.environment.name.escape();b.appendChild(a)}else if(c.componentProcessRequest)a=document.createElement("a"),a.href="#resource/"+c.componentProcessRequest.resource.id,a.innerHTML=c.componentProcessRequest.resource.name.escape(),b.appendChild(a);return b},targetFormatter:function(c){var b=document.createElement("div");if("approval"===c.type)switch(c.approvalType){case "APPLICATION":var a=document.createElement("a");a.href="#application/"+c.application.id;a.innerHTML=
c.application.name.escape();b.appendChild(a);break;case "EACH_COMPONENT":a=document.createElement("a");a.href="#component/"+c.component.id;a.innerHTML=c.component.name.escape();b.appendChild(a);break;case "ENVIRONMENT":a=document.createElement("a"),a.href="#environment/"+c.environment.id,a.innerHTML=c.environment.name.escape(),b.appendChild(a)}else if("componentTask"===c.type)if(c.applicationProcessRequest)a=document.createElement("a"),a.href="#applicationProcessRequest/"+c.applicationProcessRequest.id,
a.innerHTML=i18n("Application Process Request"),b.appendChild(a);else{if(c.componentProcessRequest)a=document.createElement("a"),a.href="#componentProcessRequest/"+c.componentProcessRequest.id,a.innerHTML=i18n("Component Process Request"),b.appendChild(a)}else if("applicationTask"===c.type)a=document.createElement("a"),a.href="#applicationProcessRequest/"+c.applicationProcessRequest.id,a.innerHTML=i18n("Application Process Request"),b.appendChild(a);return b},actionsFormatter:function(c){var b=this.parentWidget,
a=document.createElement("div");if(c.applicationProcessRequest){var d=document.createElement("a");d.innerHTML=i18n("View Request");d.className="actionsLink";d.href="#applicationProcessRequest/"+c.applicationProcessRequest.id;a.appendChild(d)}if(c.componentProcessRequest)d=document.createElement("a"),d.innerHTML=i18n("View Request"),d.className="actionsLink",d.href="#componentProcessRequest/"+c.componentProcessRequest.id,a.appendChild(d);d=j.create("a",{innerHTML:i18n("Respond"),className:"linkPointer actionsLink"},
a);e(d,"click",function(){b.showApprovalDialog(c)});return a},showApprovalDialog:function(c){var b=this;new h({task:c,callback:function(){b.grid.block();setTimeout(function(){b.grid.unblock();b.grid.refresh()},1500)}})}})})},"deploy/widgets/approval/ApprovalProcessActivities":function(){define("dojo/_base/declare,dojo/request/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,deploy/widgets/workflow/BaseGraph".split(","),function(l,m,k,j,e,h){return l("deploy.widgets.approval.ApprovalProcessActivities",
[h],{postCreate:function(){this.inherited(arguments);var d=this;if(appState.environment)d.approvalParent=appState.environment;if(appState.environmentTemplate)d.approvalParent=appState.environmentTemplate;mxClient.isBrowserSupported()?m.get(bootstrap.restUrl+"approval/approvalProcess/"+d.approvalParent.id+(d.approvalParent.version?"/"+d.approvalParent.version:""),{handleAs:"json"}).then(function(c){d.approvalProcess=c;d.exploreUrl="#environment/";d.processId=d.approvalProcess.id;if(c.environment)d.environment=
c.environment,d.readOnly=!d.environment.security["Manage Approval Processes"],d.exploreUrl+=d.environment.id;if(c.environmentTemplate)d.environmentTemplate=c.environmentTemplate,d.readOnly=!d.environmentTemplate.security["Manage Approval Processes"],d.exploreUrl+=d.environmentTemplate.id;void 0!==d.approvalProcess.rootActivity?d.graphStartup(d.approvalProcess.rootActivity):d.graphStartup(null)}):mxUtils.error(i18n("This browser is not compatible with the rich workflow editor."),200,!1)},graphStartup:function(d){this.inherited(arguments);
this.buildToolbar();this.readOnly||this.refreshStepPalette({process:this.approvalProcess,url:bootstrap.restUrl+"approval/approvalProcess/approvalTypeTree",topStepDrawerLabel:i18n("Approval Steps")})},saveProcessDesign:function(){var d=this;m.put(bootstrap.restUrl+"approval/approvalProcess/"+d.approvalParent.id+"/saveActivities",{data:e.stringify(d.getWorkflowJson())}).then(function(){d.showSavePopup(i18n("Process design saved successfully."));d.clearHasChanges();d.clearChangedActivities();navBar.setHash("environment/"+
d.approvalParent.id+"/approvals/-1",!1,!0)},function(c){d.showSaveErrorPopup(c)})}})})},"deploy/widgets/approval/ProcessPromotions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,js/webext/widgets/table/TreeTable,js/webext/widgets/Alert".split(","),function(l,m,k,j,e,h,d,c){return k("deploy.widgets.approval.ProcessPromotions",[m,l],{templateString:'<div class="tasksForUser"><div data-dojo-attach-point="promotionTaskGridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var b=bootstrap.restUrl+"processPromotion/requested",a=[{name:i18n("Component/Template"),formatter:function(a){var b=document.createElement("div"),c=document.createElement("a");if(a.draftProcess.component)c.href="#component/"+a.draftProcess.component.id,c.innerHTML=util.escape(a.draftProcess.component.name);else if(a.draftProcess.componentTemplate)c.href="#componentTemplate/"+a.draftProcess.componentTemplate.id+"/-1",c.innerHTML=util.escape(a.draftProcess.componentTemplate.name);
b.appendChild(c);return b}},{name:i18n("Existing Process"),formatter:function(a){var b=document.createElement("div"),c=document.createElement("a");c.href="#componentProcess/"+a.draftProcess.id+"/-1";c.innerHTML=util.escape(a.draftProcess.name);b.appendChild(c);return b}},{name:i18n("Proposed Changes"),formatter:function(a){var b=document.createElement("div"),c=document.createElement("a");c.href="#draftComponentProcess/"+a.draftProcess.id+"/"+a.draftProcess.version;c.innerHTML=i18n("Draft Process v. %s",
a.draftProcess.version);b.appendChild(c);return b}},{name:i18n("Requester"),field:"requestUser"},{name:i18n("Request Date"),field:"dateRequested",formatter:util.tableDateFormatter},{name:i18n("Comments"),field:"comment"},{name:i18n("Actions"),formatter:this.promotionApproveRejectFormatter,parentWidget:this}];this.grid=new d({url:b,noDataMessage:i18n("No draft processes awaiting promotion."),orderField:"dateRequested",sortType:"desc",hidePagination:!1,hideExpandCollapse:!0,serverSideProcessing:!1,
columns:a});this.grid.parentWidget=this;this.grid.placeAt(this.promotionTaskGridAttach)},respondToPromoteRequest:function(b,a){var d=this;d.grid.block();j.put({url:a,handleAs:"json",load:function(){d.grid.unblock();d.grid.refresh()},error:function(a){d.grid.unblock();new c({message:util.escape(a.responseText)})}})},promotionApproveRejectFormatter:function(b){var a=this,c=document.createElement("div"),d=document.createElement("a");d.innerHTML=i18n("Approve");d.className="actionsLink linkPointer";c.appendChild(d);
h(d,"click",function(){a.parentWidget.respondToPromoteRequest(b,bootstrap.restUrl+"processPromotion/"+b.id+"/approve")});d=document.createElement("a");d.innerHTML=i18n("Reject");d.className="actionsLink linkPointer";c.appendChild(d);h(d,"click",function(){a.parentWidget.respondToPromoteRequest(b,bootstrap.restUrl+"processPromotion/"+b.id+"/reject")});return c}})})},"deploy/widgets/property/PropDefPopupValues":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/on,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c){return j([m,l],{templateString:'<div class="propDefPopupValues">  <div data-dojo-attach-point="displayAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.dialog=new c({title:this.popupLabel});this.form=new d({onSubmit:function(a){b.form.unblock();b.data=a;b.isValid=!0;b.showLink();b.dialog.hide()},onCancel:function(){b.form.unblock();b.dialog.hide()}});this.form.placeAt(this.dialog.containerNode);b.isValid=!0;var a={};k.forEach(this.propDefs,
function(c){b.displayPropDef(c);a[c.name]=c.value});if(b.isValid)b.data=a;b.showLink()},displayPropDef:function(b){b.label=b.name;this.form.addField(b);if(b.required&&!b.value)this.isValid=!1},showLink:function(){var b=this;e.empty(this.displayAttach);this.isValid?e.create("div",{"class":"inlineBlock general-icon completeIcon"},this.displayAttach):e.create("div",{"class":"inlineBlock general-icon incompleteIcon"},this.displayAttach);var a=e.create("a",{innerHTML:this.popupLabel,"class":"linkPointer"},
this.displayAttach);h(a,"click",function(){b.dialog.show()})},_getValueAttr:function(){return this.data},getValidationMessages:function(){var b=[];this.data||b.push(i18n("Missing property values for %s",this.popupLabel));return b}})})},"deploy/widgets/property/PropSheetDefValues":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/dom-construct,dojo/on,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/GenericConfirm,js/webext/widgets/DomNode".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.property.PropSheetDefValues",[m,l],{templateString:'<div class="propSheetDefValues"><div class="versionLinks" data-dojo-attach-point="versionAttach"></div><div data-dojo-attach-point="detailAttach"></div></div>',noPropertiesMessage:i18n("No properties have been defined."),oldVersion:!1,showVersions:!1,postCreate:function(){this.inherited(arguments);var a=this;if(this.propSheetDef)this.propSheetDef.versioned?(this.propSheetDefPath=this.propSheetDef.path,
this.propSheetDefVersion=this.propSheetDef.version):this.propSheetDefId=this.propSheetDef.id;if(this.propSheet&&this.propSheet.versioned)this.propSheetVersionCount=this.propSheet.versionCount,this.propSheetVersion=this.propSheet.version;if(this.propSheetVersion&&this.propSheetVersionCount){if(this.propSheetVersion<this.propSheetVersionCount)a.oldVersion=!0;this.showVersionLinks()}this.propSheetPath&&!this.propSheetVersion?h.get({url:bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+
".-1",handleAs:"json",load:function(b){a.propSheetVersion=b.version;a.initializePage()}}):a.initializePage()},initializePage:function(){var a=this;a.generateUrls();h.get({url:this.getDefsUrl,handleAs:"json",load:function(b){0<b.length?(a.propDefs=b,a.showForm()):(b=document.createElement("div"),b.style.marginLeft="30px",b.innerHTML=a.noPropertiesMessage,a.detailAttach.appendChild(b))}})},generateUrls:function(){if(this.propSheetDefId)this.getDefsUrl=bootstrap.baseUrl+"property/propSheetDef/"+this.propSheetDefId+
"/propDefs";else if(this.propSheetDefPath)this.getDefsUrl=bootstrap.baseUrl+"property/propSheetDef/"+util.vc.encodeVersionedPath(this.propSheetDefPath),this.getDefsUrl=this.propSheetDefVersion?this.getDefsUrl+"."+this.propSheetDefVersion+"/propDefs":this.getDefsUrl+".-1/propDefs";if(this.propSheetId)this.getValuesUrl=bootstrap.baseUrl+"property/propSheet/"+this.propSheetId+"/propValues",this.saveValuesUrl=bootstrap.baseUrl+"property/propSheet/"+this.propSheetId+"/allPropValues";else if(this.propSheetPath)this.getValuesUrl=
bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion,this.saveValuesUrl=bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion+"/allPropValues",this.saveBatchValuesUrl=bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(this.propSheetPath)+"."+this.propSheetVersion+"/allPropValuesFromBatch"},destroy:function(){this.inherited(arguments);void 0!==this.form&&this.form.destroy()},
showForm:function(){var c=this;this.batchLoaded=!1;var d=this.propDefs;void 0!==c.form&&c.form.destroy();if(c.propSheetVersion)c.version=c.propSheetVersion;c.form=new a({submitUrl:c.saveValuesUrl,version:c.version,postSubmit:function(){if(c.refreshHash)navBar.setHash(c.refreshHash,!1,!0);else{new b({message:i18n("Properties saved.")});c.version&&c.version++;if(c.propSheetVersion&&!this.showVersions&&(c.propSheetVersion++,c.propSheetVersionCount&&c.propSheetVersionCount++,c.propSheet))c.propSheet.version=
c.propSheetVersion,c.propSheet.versionCount=c.propSheetVersionCount;c.refresh()}},onError:function(a){if(void 0===c.onError)if(a.responseText){if(409===a.status?new b({message:i18n("Modifications have occurred since you loaded this page, please refresh.")}):405===a.status&&new b({message:i18n(a.responseText)}),c.refreshHash&&navBar.setHash(c.refreshHash,!0,!1),c.grid)c.grid.refresh=function(){navBar.setHash(c.refreshHash,!1,!0)}}else this.inherited(arguments);else c.onError(a)},readOnly:c.readOnly||
this.oldVersion,cancelLabel:null});c.form.placeAt(c.detailAttach);var f=document.createElement("a");f.onclick=function(){c.showBatchEdit()};f.innerHTML=i18n("Use Batch Edit Mode");f.className="linkPointer";var j=new n;j.domAttach.appendChild(f);c.form.addField({name:"_switchLink",label:"",widget:j});h.get({url:c.getValuesUrl,handleAs:"json",load:function(a){c.form.version=a.version;k.forEach(d,function(b){var d=e.clone(b);util.populatePropValueAndLabel(a.properties,d);d.description=!b.pattern?b.description:
i18n("%s Required Pattern: %s",b.description,b.pattern);c.form.addField(d)})}})},showBatchEdit:function(){var c=this;this.batchLoaded=!0;var d=this.propDefs;void 0!==c.form&&c.form.destroy();c.form=new a({submitUrl:c.saveBatchValuesUrl,version:c.propSheetVersion,addData:function(){var a=this,b={};k.forEach(this.fieldsArray,function(c){var d=a.getValueByField(c);d&&("properties"===c.name&&(d=d.replace(/\\n/g,"\n")),b[c.name]=d)});return b},postSubmit:function(){if(c.refreshHash)navBar.setHash(c.refreshHash,
!1,!0);else{new b({message:i18n("Properties saved.")});c.version&&c.version++;if(c.propSheetVersion&&!this.showVersions&&(c.propSheetVersion++,c.propSheetVersionCount&&c.propSheetVersionCount++,c.propSheet))c.propSheet.version=c.propSheetVersion,c.propSheet.versionCount=c.propSheetVersionCount;c.refresh()}},onError:function(a){if(void 0===c.onError)if(a.responseText){if(409===a.status?new b({message:i18n("Modifications have occured since you loaded this page, please refresh.")}):405===a.status&&new b({message:i18n(a.responseText)}),
c.refreshHash&&navBar.setHash(c.refreshHash,!0,!1),c.grid)c.grid.refresh=function(){navBar.setHash(c.refreshHash,!1,!0)}}else this.inherited(arguments);else c.onError(a)},readOnly:c.readOnly||this.oldVersion,cancelLabel:null});c.form.placeAt(c.detailAttach);var e=document.createElement("a");e.onclick=function(){c.showForm()};e.innerHTML=i18n("Use Property Form Mode");e.className="linkPointer";var f=new n;f.domAttach.appendChild(e);c.form.addField({name:"_switchLink",label:"",widget:f});h.get({url:c.getValuesUrl,
handleAs:"json",load:function(a){c.form.version=a.version;var b="";k.forEach(d,function(c){var d=util.getNamedPropertyValue(a.properties,c.name),e=c.name;if(void 0===d)d=c.value;e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\n\\\n").replace(/\=/g,"\\=").replace(/:/g,"\\:").replace(/ /g,"\\ ");d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n\\\n").replace(/\=/g,"\\=").replace(/:/g,"\\:");b+=e+"="+d+"\n"});c.form.addField({name:"properties",label:i18n("Properties"),description:i18n("Edit properties as a batch. Properties should be defined in Java.util.Properties format."),
required:!0,type:"Text Area",style:{width:"300px",height:"200px"},value:b})}})},showVersionLinks:function(){var a=this;d.empty(this.versionAttach);if(this.propSheetVersion&&this.propSheetVersionCount&&this.showVersions){d.create("div",{innerHTML:i18n("Version %s of %s",this.propSheetVersion,this.propSheetVersionCount)},this.versionAttach);var e=d.create("div",{},this.versionAttach);if(1===this.propSheetVersion)d.create("div",{className:"arrow_fastBackwards_grey inlineBlock"},e),d.create("span",{innerHTML:"&nbsp;&nbsp;"},
e),d.create("div",{className:"arrow_backwards_grey inlineBlock"},e);else{var j=d.create("div",{className:"arrow_fastBackwards inlineBlock"},e);c(j,"click",function(){a.propSheetVersion=1;a.refresh()});d.create("span",{innerHTML:"&nbsp;&nbsp;"},e);j=d.create("div",{className:"arrow_backwards inlineBlock"},e);c(j,"click",function(){a.propSheetVersion--;a.refresh()})}d.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},e);this.propSheetVersion===this.propSheetVersionCount?(d.create("div",{className:"arrow_forward_grey inlineBlock"},
e),d.create("span",{innerHTML:"&nbsp;&nbsp;"},e),d.create("div",{className:"arrow_fastForward_grey inlineBlock"},e)):(j=d.create("div",{className:"arrow_forward inlineBlock"},e),c(j,"click",function(){a.propSheetVersion++;a.refresh()}),d.create("span",{innerHTML:"&nbsp;&nbsp;"},e),j=d.create("div",{className:"arrow_fastForward inlineBlock"},e),c(j,"click",function(){a.propSheetVersion=a.propSheetVersionCount;a.refresh()}),!this.readOnly&&this.oldVersion&&(d.create("span",{innerHTML:"&nbsp;&nbsp;"},
e),e=d.create("a",{innerHTML:i18n("Reset Latest to This Version")},e),c(e,"click",function(){new f({message:i18n("Are you sure you want to reset to version %s?",a.propSheetVersion),action:function(){h.put({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(a.propSheetPath)+"."+a.propSheetVersion+"/setAsLatest",load:function(){a.propSheetVersionCount++;a.propSheetVersion=a.propSheetVersionCount;a.refresh()},error:function(a){new b({message:i18n("Error: %s",util.escape(a.responseText))})}})}})})))}},
refresh:function(){if(this.propSheetVersion&&this.propSheetVersionCount)this.oldVersion=this.propSheetVersion<this.propSheetVersionCount?!0:!1;this.showVersionLinks();this.generateUrls();this.batchLoaded?this.showBatchEdit():this.showForm()}})})},"deploy/widgets/version/EditVersion":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.version.EditVersion",[m,l],{templateString:'<div class="editVersion">  <div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var e=this;this.existingValues={};if(this.version)this.existingValues=this.version;this.form=new j({submitUrl:bootstrap.restUrl+"deploy/version",readOnly:e.readOnly,showButtons:!e.readOnly,postSubmit:function(h){navBar.setHash("version/"+h.id,!1,!0);void 0!==e.callback&&e.callback()},addData:function(h){h.properties={};h.componentId=e.component.id;if(e.version)h.existingId=e.version.id},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",
label:i18n("Name"),required:!0,readOnly:void 0!==this.version,type:"Text",value:this.existingValues.name,disabled:!0});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"type",label:i18n("Type"),type:"Select",value:this.existingValues.type,allowedValues:[{label:i18n("Full"),value:"FULL"},{label:i18n("Incremental"),value:"INCREMENTAL"}]});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/version/VersionArtifacts":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/dom-class,dojo/has,dojo/on,dijit/form/Button,dijit/form/CheckBox,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,deploy/widgets/Formatters".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return k("deploy.widgets.version.VersionArtifacts",[m,l],{templateString:'<div class="versionArtifacts"><div data-dojo-attach-point="countAttach"></div><div data-dojo-attach-point="treeAttach" class="fileTree"></div><div class="archiveAttach" data-dojo-attach-point="archiveAttach"></div></div>',emptyTreeMessage:null,postCreate:function(){this.inherited(arguments);var a;if(appState.component.sourceConfigPlugin)a=appState.component.sourceConfigPlugin.name;var b,
c,d;if("AnthillPro"===a)b=util.getNamedPropertyValue(appState.component.properties,"AnthillComponentProperties/anthillUrl"),a=appState.version.name,c=j.create("div",null,this.treeAttach),c.style.paddingBottom=".5em",d=document.createElement("a"),d.innerHTML=i18n("View artifacts in Anthill"),d.href=b+"/tasks/project/BuildLifeTasks/viewArtifactList?buildLifeId="+a,d.target="_blank",c.appendChild(d);else if("uBuild"===a)b=util.getNamedPropertyValue(appState.component.properties,"uBuildComponentProperties/uBuildUrl"),
a=appState.version.name,c=j.create("div",null,this.treeAttach),c.style.paddingBottom=".5em",d=document.createElement("a"),d.innerHTML=i18n("View artifacts in uBuild"),d.href=b+"/tasks/project/BuildLifeTasks/viewArtifactList?buildLifeId="+a,d.target="_blank",c.appendChild(d);this.showZosSysProperties=!1;this.showTree()},destroy:function(){this.inherited(arguments);this.tree&&this.tree.destroy()},showTree:function(){var a=this;if(appState.version.archived){j.create("div",{innerHTML:i18n("This version's artifacts have been archived."),
"class":"inlineBlock actionsLink"},this.archiveAttach);var b=j.create("a",{innerHTML:i18n("Restore from Backup"),"class":"linkPointer actionsLink"},this.archiveAttach);d(b,"click",function(){a.showRestoreDialog()})}if(void 0!==appState.version.totalCount){b=document.createElement("div");if(appState.component.componentType&&"ZOS"===appState.component.componentType){var c="",e="",f="";if(0<appState.version.totalZosAddPdsCount||0<appState.version.totalZosAddSequentialCount||0<appState.version.totalZosAddUssDirectoryCount)0<
appState.version.totalZosAddPdsCount&&0<appState.version.totalZosAddSequentialCount&&0<appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s members in %s data sets, %s sequential data sets, %s files in %s directories",appState.version.totalZosAddPdsMemberCount,appState.version.totalZosAddPdsCount,appState.version.totalZosAddSequentialCount,appState.version.totalZosDelUssFileCount,appState.version.totalZosAddUssDirectoryCount)),0<appState.version.totalZosAddPdsCount&&0>=appState.version.totalZosAddSequentialCount&&
0<appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s members in %s data sets, %s files in %s directories",appState.version.totalZosAddPdsMemberCount,appState.version.totalZosAddPdsCount,appState.version.totalZosAddUssFileCount,appState.version.totalZosAddUssDirectoryCount)),0<appState.version.totalZosAddPdsCount&&0>=appState.version.totalZosAddSequentialCount&&0>=appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s members in %s data sets",appState.version.totalZosAddPdsMemberCount,
appState.version.totalZosAddPdsCount)),0<appState.version.totalZosAddPdsCount&&0<appState.version.totalZosAddSequentialCount&&0>=appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s members in %s data sets, %s sequential data sets",appState.version.totalZosAddPdsMemberCount,appState.version.totalZosAddPdsCount,appState.version.totalZosAddSequentialCount)),0>=appState.version.totalZosAddPdsCount&&0<appState.version.totalZosAddSequentialCount&&0<appState.version.totalZosAddUssDirectoryCount&&
(c=i18n("Total add: %s sequential data sets, %s files in %s directories",appState.version.totalZosAddSequentialCount,appState.version.totalZosAddUssFileCount,appState.version.totalZosAddUssDirectoryCount)),0>=appState.version.totalZosAddPdsCount&&0<appState.version.totalZosAddSequentialCount&&0>=appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s sequential data sets",appState.version.totalZosAddSequentialCount)),0>=appState.version.totalZosAddPdsCount&&0>=appState.version.totalZosAddSequentialCount&&
0<appState.version.totalZosAddUssDirectoryCount&&(c=i18n("Total add: %s files in %s directories",appState.version.totalZosAddUssFileCount,appState.version.totalZosAddUssDirectoryCount));if(0<appState.version.totalZosDelPdsCount||0<appState.version.totalZosDelSequentialcount||0<appState.version.totalZosDelUssDirectoryCount)0<appState.version.totalZosDelPdsCount&&0<appState.version.totalZosDelSequentialcount&&0<appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s members in %s data sets, %s sequential data sets, %s files in %s directories",
appState.version.totalZosDelPdsMemberCount,appState.version.totalZosDelPdsCount,appState.version.totalZosDelSequentialcount,appState.version.totalZosDelUssFileCount,appState.version.totalZosDelUssDirectoryCount)),0<appState.version.totalZosDelPdsCount&&0>=appState.version.totalZosDelSequentialcount&&0<appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s members in %s data sets, %s files in %s directories",appState.version.totalZosDelPdsMemberCount,appState.version.totalZosDelPdsCount,
appState.version.totalZosDelUssFileCount,appState.version.totalZosDelUssDirectoryCount)),0<appState.version.totalZosDelPdsCount&&0>=appState.version.totalZosDelSequentialcount&&0>=appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s members in %s data sets",appState.version.totalZosDelPdsMemberCount,appState.version.totalZosDelPdsCount)),0<appState.version.totalZosDelPdsCount&&0<appState.version.totalZosDelSequentialcount&&0>=appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s members in %s data sets, %s sequential data sets",
appState.version.totalZosDelPdsMemberCount,appState.version.totalZosDelPdsCount,appState.version.totalZosDelSequentialcount)),0>=appState.version.totalZosDelPdsCount&&0<appState.version.totalZosDelSequentialcount&&0<appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s sequential data sets, %s files in %s directories",appState.version.totalZosDelSequentialcount,appState.version.totalZosDelUssFileCount,appState.version.totalZosDelUssDirectoryCount)),0>=appState.version.totalZosDelPdsCount&&
0<appState.version.totalZosDelSequentialcount&&0>=appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s sequential data sets",appState.version.totalZosDelSequentialcount)),0>=appState.version.totalZosDelPdsCount&&0>=appState.version.totalZosDelSequentialcount&&0<appState.version.totalZosDelUssDirectoryCount&&(e=i18n("Total delete: %s files in %s directories",appState.version.totalZosDelUssFileCount,appState.version.totalZosDelUssDirectoryCount));0<appState.version.totalZosGenericCount&&
(f=i18n("Total generic artifacts: %s artifacts in %s containers",appState.version.totalZosGenericMemberCount,appState.version.totalZosGenericCount));c=c&&e?c+"<br/>"+e:c+e;b.innerHTML=c&&f?c+"<br/>"+f:c+f}else b.innerHTML=i18n("Total: %s (%s files)",util.fileSizeFormat(appState.version.totalSize),appState.version.totalCount);this.countAttach.className="innerContainerLabel";this.countAttach.appendChild(b)}a.showTableTree()},showTableTree:function(){var a=this;this.tree&&this.tree.destroy();var b=[{name:i18n("Last Modified"),
formatter:function(a){if(0!==a.lastModified&&"file"===a.type)return util.dateFormatShort(a.lastModified)}}],f={name:i18n("Name"),formatter:function(a){return q.artifactFormatter(a)},orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},field:"name"},h={name:i18n("Name"),formatter:function(a){var b=util.getNamedPropertyValue(appState.component.properties,"custom/input.baseurl");return q.zosArtifactFormatter(a,b)},orderField:"name",filterField:"name",filterType:"text",
getRawValue:function(a){return a.name},field:"name"},k={name:i18n("Artifact Type"),formatter:function(a){var b="";"folder"===a.type&&(b=a.zosContainerType&&a.zosDeployAction?a.zosContainerType&&"GENERIC"===a.zosContainerType.toUpperCase()?"[GENERIC]":"["+a.zosContainerType+","+a.zosDeployAction+"]":"[PDS,ADD]");return b},orderField:"zosContainerType",filterField:"zosContainerType",filterType:"text",getRawValue:function(a){var b="";"folder"===a.type&&(b=a.zosContainerType&&a.zosDeployAction?"["+a.zosContainerType+
","+a.zosDeployAction+"]":"[PDS,ADD]");return b},field:"zosContainerType",width:"120px"},l={name:i18n("Deploy Type"),orderField:"deployType",filterField:"deployType",filterType:"text",getRawValue:function(a){(a=a.deployType)||(a="");return a},field:"deployType",width:"120px"},m={name:i18n("Inputs"),filterField:"inputNames",filterType:"text",formatter:function(a){if(a.userAttributes&&a.userAttributes.zOSResourceInputsKey&&a.userAttributes.zOSResourceInputsKey.zOSResourceInputs&&0<a.userAttributes.zOSResourceInputsKey.zOSResourceInputs.length){for(var b=
j.create("div"),a=a.userAttributes.zOSResourceInputsKey.zOSResourceInputs,c=0,d=util.getNamedPropertyValue(appState.component.properties,"custom/input.baseurl");c<a.length;){var e=a[c],f=e.name;e.version&&(f=f+"("+e.version+")");(e=e.url)?(0!==e.trim().toUpperCase().indexOf("HTTP")&&d&&(e=d+e),j.create("a",{"class":"linkPointer",href:e,target:"_blank",innerHTML:f},b)):j.create("div",{title:f,innerHTML:f},b);c+1<a.length&&j.create("br",{},b);c++}return b}return""}},C={name:i18n("Properties"),formatter:function(b){var c=
[];if(b.userAttributes&&b.userAttributes.zOSCustomerPropertiesKey)c=b.userAttributes.zOSCustomerPropertiesKey;if(!a.showZosSysProperties){var e=[];c.forEach(function(a){a.name.startsWith("SYS.")||e.push(a)});c=e}var f=c.length;if(0<f){var h=5;5>f&&(h=f);for(var k=j.create("div"),l=0;l<h;){var s=c[l].name.escape(),q=c[l].value.escape(),r=s+"="+q;0===q.toUpperCase().indexOf("HTTP")?j.create("a",{"class":"linkPointer",href:q,target:"_blank",innerHTML:i18n(s)},k):j.create("div",{title:r,innerHTML:r},
k);l+1<h&&j.create("br",{},k);l++}5<f&&(f=" (+"+(f-5)+i18n(" more")+")",f=j.create("a",{"class":"linkPointer",title:i18n("Click to view all"),innerHTML:i18n(f)},k),d(f,"click",function(){var a=b.path;0<a.indexOf("/")&&(a=a.replace(/\//g,"("),a+=")");a=i18n("Properties for Artifact %s",a);a=new n({title:a,closable:!0,draggable:!0});(new t({data:c,serverSideProcessing:!1,columns:[{name:i18n("Name"),field:"name",orderField:"name",getRawValue:function(a){return a.name},style:{"word-break":"break-all"}},
{name:i18n("Value"),field:"value",getRawValue:function(a){return a.value},formatter:function(a,b){var c=a.name.escape(),d=a.value.escape();return b=0===d.toUpperCase().indexOf("HTTP")?j.create("a",{"class":"linkPointer",href:d,target:"_blank",innerHTML:i18n(c)}):d},style:{"word-break":"break-all"}}],orderField:"name",hidePagination:!0,hideFooter:!0,hideExpandCollapse:!0,style:{maxWidth:"640px"}})).placeAt(a);a.show()}));return k}},style:{"word-break":"break-all"},width:"410px"},B={name:i18n("Actions"),
formatter:function(a){if("file"===a.type&&!a.isSymlink&&!appState.version.archived){var b=j.create("a",{"class":"linkPointer",innerHTML:i18n("Download")});d(b,"click",function(){util.downloadFile(bootstrap.restUrl+"deploy/version/"+appState.version.id+"/downloadArtifact/"+util.encodeIgnoringSlash(a.path))});return b}}},A={name:i18n("Size"),formatter:function(a){return a.isSymlink?i18n("N/A (Symbolic Link)"):"file"===a.type?util.fileSizeFormat(a.length):i18n("%s (%s files)",util.fileSizeFormat(a.totalSize),
a.totalCount)}};appState.component.componentType&&"ZOS"===appState.component.componentType?(b.splice(0,0,h),b.splice(1,0,k),b.splice(2,0,l),b.splice(3,0,m),b.push(C)):(b.splice(0,0,f),b.splice(1,0,A),b.push(B));this.tree=new t({url:bootstrap.restUrl+"deploy/version/"+appState.version.id+"/fileTree",columns:b,serverSideProcessing:!1,orderField:"name",noDataMessage:i18n("No artifacts have been added yet"),tableConfigKey:"artifactList",getChildUrl:function(a){return bootstrap.restUrl+"deploy/version/"+
appState.version.id+"/fileTree/"+util.encodeIgnoringSlash(a.$ref)}});if("ZOS"===appState.component.componentType){var z=i18n("Show SYS properties");a.showZosSysProperties&&(z=i18n("Hide SYS properties"));b=j.create("a",{"class":"linkPointer",title:z,style:"margin-left: 10px;",innerHTML:z},this.tree.expandCollapseAttach);d(b,"click",function(){a.showZosSysProperties=!a.showZosSysProperties;this.title=this.innerHTML=z;a.showTableTree()})}"ZOS"!==appState.component.componentType&&(b=new c({label:i18n("Download All"),
showTitle:!1,onClick:function(){new r({message:i18n("For large files, this operation make take some time. Please be patient while your download begins."),action:function(){util.downloadFile(bootstrap.restUrl+"deploy/version/"+appState.version.id+"/downloadArtifacts")}})}}),e.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.tree.buttonAttach));this.tree.placeAt(this.treeAttach)},showRestoreDialog:function(){var b=new n({title:i18n("Restore Version Artifacts"),closable:!0,draggable:!0}),c=new a({submitUrl:bootstrap.restUrl+
"deploy/version/"+appState.version.id+"/restoreArtifacts",postSubmit:function(){b.hide();b.destroy();navBar.setHash("#version/"+appState.version.id,!1,!0)},onCancel:function(){b.hide();b.destroy()}});c.addField({name:"path",label:i18n("Path to Backup Zip"),description:i18n("The path relative to the Archive Path of the backup .zip file containing the artifacts for this version."),value:this.getArchiveZipName(),type:"Text",bidiDynamicSTT:"FILE_PATH",required:!0});c.placeAt(b.containerNode);b.show()},
getArchiveZipName:function(){var a=appState.component.name,a=a+"_"+appState.version.name;return a=(a+".zip").replace("/","_").replace("\\","_")}})})},"deploy/widgets/version/VersionCompare":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,deploy/widgets/component/ComponentFileComparison,deploy/widgets/component/ComponentVersionPropSheetDiffReportTable".split(","),function(l,m,k,j,e,h,d){return k("deploy.widgets.version.versionCompare",
[m,l],{templateString:'<div class = "versionCompare"><div data-dojo-attach-point="formAttach" style="max-height: 500px; overflow: hidden;"></div><div data-dojo-attach-point="tableAttach"></div><div data-dojo-attach-point="propTableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this;this.form=new j({onSubmit:function(b){dojo.empty(c.tableAttach);dojo.empty(c.propTableAttach);b=b.version;(new h({version:c.version,otherVersion:b})).placeAt(c.tableAttach);(new d({version:c.version,
otherVersion:b})).placeAt(c.propTableAttach)},preSubmit:function(){},postSubmit:function(){c.form.unblock()},cancelLabel:null,onError:function(b){new e({title:i18n("Error"),messages:[i18n("An error has occurred while submitting the compare request:"),"",util.escape(b.responseText)]})},saveLabel:i18n("Submit")});this.form.addField({name:"version",label:i18n("Version"),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+"deploy/version",defaultQuery:{filterFields:["component.id","id","active"],
filterType_id:"ne",filterValue_id:c.version.id,"filterType_component.id":"eq","filterValue_component.id":appState.component.id,filterType_active:"eq",filterValue_active:!0,filterClass_active:"Boolean"},allowNone:!1});this.form.placeAt(this.formAttach)},destroy:function(){this.inherited(arguments);this.form.destroy()}})})},"deploy/widgets/component/ComponentVersionPropSheetDiffReportTable":function(){define(["dojo/_base/declare","deploy/widgets/property/PropSheetDiffReportTable"],function(l,m){return l([m],
{postCreate:function(){this.url=bootstrap.restUrl+"deploy/version/"+this.version.id+"/propComparison/"+this.otherVersion;this.inherited(arguments)}})})},"deploy/widgets/version/VersionEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/Alert,js/webext/widgets/TwoPaneListManager,deploy/widgets/version/EditVersion,deploy/widgets/property/PropSheetDefValues".split(","),function(l,m,k,j,e,h,d,c){return m([h],{postCreate:function(){this.inherited(arguments);
this.showList()},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Version Properties"),action:function(){b.addHeading(i18n("Version Properties"));b.showProperties()}})},addHeading:function(b){j.create("div",{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){j.create("div",{innerHTML:b,style:{marginBottom:"10px"}},
this.detailAttach)},showBasicSettings:function(){(new d({component:appState.component,version:appState.version,readOnly:!appState.component.extendedSecurity[security.component.manageVersions],callback:function(){appState.component&&navBar.setHash("component/"+appState.component.id+"/versions")}})).placeAt(this.detailAttach)},showProperties:function(){var b=util.getNamedProperty(appState.version.propSheets,void 0);(new c({propSheetDefPath:b.propSheetDef.path,propSheetDefVersion:b.propSheetDef.version,
propSheetPath:b.path,noPropertiesMessage:i18n("No version properties have been defined by this component."),readOnly:!appState.component.extendedSecurity[security.component.manageVersions],onError:function(a){var b=i18n("An error occurred while saving the properties.");409===a.status?b=i18n("Modifications have occured since you loaded this page, please refresh."):500===a.status&&(b=i18n(a.response.text));new e({message:b})}})).placeAt(this.detailAttach)}})})},"deploy/widgets/version/VersionSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dojo/_base/declare,js/webext/widgets/FormDelegates,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h){return j("deploy.widgets.version.VersionSelector",[m,l],{templateString:'<div class="versionSelector"><div data-dojo-attach-point="typeAttach" class="versionSelectorComponent"></div><div data-dojo-attach-point="valueAttach" class="versionSelectorComponent" style="vertical-align: bottom" ></div></div>',postCreate:function(){this.inherited(arguments);var d=this,c=null,b=new k({options:[{label:i18n("None"),value:"none"},{label:i18n("Specific Version"),value:"version"},{label:i18n("Latest Version"),
value:"latestVersion"},{label:i18n("Latest With Status"),value:"latestWithStatus"},{label:i18n("All With Status"),value:"allWithStatus"},{label:i18n("All In Environment"),value:"allInEnvironment"},{label:i18n("All In Environment (Reversed)"),value:"reverseAllInEnvironment"}],onChange:function(a){if(null!==c)c.destroy(),d.value=void 0;if("version"===a.toLowerCase()){var b;d.environment?(b=bootstrap.restUrl+"deploy/environment/"+d.environment.id+"/versions/"+d.component.id,c=new h({restUrl:b,value:d.subValue,
allowNone:!1,noIllegalValues:!0,onChange:function(b){d.value=b?a+"/"+b:void 0}})):(b=bootstrap.restUrl+"deploy/version/",c=e.retrieveDelegate("TableFilterSelect")({url:b,value:d.subValue,allowNone:!1,defaultQuery:{filterFields:["component.id"],"filterType_component.id":"eq","filterValue_component.id":d.component.id,"filterClass_component.id":"UUID"},onChange:function(b){var c=this.get("item");d.value=b?a+"/"+c.id:void 0}}));c.placeAt(d.valueAttach)}else"allWithStatus"===a||"latestWithStatus"===a?
(c=new h({restUrl:bootstrap.restUrl+"deploy/status/versionStatuses",getValue:function(a){return a.name},value:d.subValue,getStyle:function(a){return{backgroundColor:a.color}},allowNone:!1,noIllegalValues:!0,onChange:function(b){d.value=b?a+"/"+b:void 0}}),c.placeAt(d.valueAttach)):"allInEnvironment"===a||"reverseAllInEnvironment"===a?(c=new h({restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getValue:function(a){return a.name},value:d.subValue,getStyle:function(a){return{backgroundColor:a.color}},
allowNone:!1,noIllegalValues:!0,onChange:function(b){d.value=b?a+"/"+b:void 0}}),c.placeAt(d.valueAttach)):d.value=a+"/"}});b.placeAt(this.typeAttach);if(this.value){var a=this.value.split("/");this.subValue=a[1];if("Version"===a[0])this.value="version/"+a[1],a[0]="version";b.set("value",a[0])}}})})},"deploy/widgets/version/VersionStatuses":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,deploy/widgets/Formatters,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/RestSelect,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j("deploy.widgets.version.VersionStatuses",[m,l],{templateString:'<div class="versionStatuses"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,c=[{name:i18n("Status"),field:"status",formatter:function(a,c,d){return b.statusFormatter(a,c,d)}},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",
formatter:util.tableDateFormatter,orderField:"created",getRawValue:function(a){return new Date(a.created)}},{name:i18n("By"),field:"user",orderField:"user",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new t({url:bootstrap.restUrl+"deploy/version/"+this.version.id+"/status",serverSideProcessing:!1,columns:c,tableConfigKey:"versionStatusList",noDataMessage:i18n("No statuses have been assigned to this version."),hidePagination:!1,
hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach);appState.component.extendedSecurity[security.component.manageVersions]&&(c=new k({label:i18n("Add a Status"),showTitle:!1,onClick:function(){a.showAddStatus()}}),d.add(c.domNode,"idxButtonSpecial"),c.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,d=document.createElement("div");if(appState.component.extendedSecurity[security.component.manageVersions]){var e=
h.create("a",{innerHTML:i18n("Remove"),"class":"actionsLink linkPointer"},d);c(e,"click",function(){b.confirmRemoval(a)})}return d},confirmRemoval:function(a){var b=this;new n({message:i18n("Are you sure you want to remove %s?",a.name.escape()),action:function(){e.del({url:bootstrap.restUrl+"deploy/version/"+b.version.id+"/status/"+util.encodeIgnoringSlash(a.name),load:function(){b.grid.refresh()}})}})},showAddStatus:function(){var c=this,d=new f({title:i18n("Add a Status"),closable:!0,draggable:!0}),
e=new a({submitUrl:bootstrap.restUrl,postSubmit:function(){d.hide();d.destroy();c.grid.refresh()},onCancel:function(){d.hide();d.destroy();c.grid.refresh()}}),h=new r({restUrl:bootstrap.restUrl+"deploy/version/"+c.version.id+"/possibleStatuses",getValue:function(a){return a.name},getStyle:function(a){return b.conditionFormatter(a)},allowNone:!1,onChange:function(a,b){if(b&&b.name)e.submitUrl=bootstrap.restUrl+"deploy/version/"+c.version.id+"/status/"+util.encodeIgnoringSlash(b.name)}});e.addField({name:"status",
label:i18n("Status"),required:!0,widget:h});e.placeAt(d.containerNode);d.show()}})})},"deploy/widgets/version/VersionHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/approval/ApprovalRevocationDialog,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c){return k("deploy.widgets.version.VersionHistory",[m,l],{templateString:'<div class="versionHistory"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var b=this,a=[{name:i18n("Process"),formatter:function(a){a.componentProcess.component=a.component;return h.componentProcessLinkFormatter(a.componentProcess)}},{name:i18n("Resource"),formatter:function(a){return h.resourcePathFormatter(a.resource)}},{name:i18n("Application"),formatter:function(a){return h.applicationLinkFormatter(a.application)}},{name:i18n("Environment"),formatter:function(a){return h.environmentLinkFormatter(a.environment)}},{name:i18n("Scheduled For"),
field:"calendarEntry.scheduledDate",formatter:function(a){return util.dateFormatShort(a.entry.scheduledDate)},orderField:"calendarEntry.scheduledDate"},{name:i18n("By"),field:"userName"},{name:i18n("Status"),formatter:function(a,b,c){return h.requestStatusFormatter(a,b,c)}},{name:i18n("Actions"),formatter:function(a){var c=document.createElement("div"),h=document.createElement("a");h.className="actionsLink";h.innerHTML=i18n("View Request");h.href="#componentProcessRequest/"+a.id;c.appendChild(h);
!a.rootTrace&&!a.error&&a.approval&&a.approval.finished&&!a.approval.failed&&a.approval.userCanRevoke&&(h=j.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Revoke Approval")},c),e(h,"click",function(){new d({componentProcessRequestId:a.id,callback:function(){b.grid.refresh()}})}));return c}}];this.grid=new c({url:bootstrap.restUrl+"deploy/componentProcessRequest/table",baseFilters:[{name:"componentVersion.id",type:"eq",className:"UUID",values:[appState.version.id]}],columns:a,orderField:"calendarEntry.scheduledDate",
sortType:"desc",tableConfigKey:"versionHistory"+appState.version.id,noDataMessage:i18n("No process history found for this version."),hidePagination:!1,hideExpandCollapse:!0,queryData:{outputType:["BASIC","LINKED","EXTENDED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/version/RunningVersionImports":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/component/ComponentSourceConfigHistory"],
function(l,m,k,j){return k("deploy.widgets.version.RunningVersionImports",[m,l],{templateString:'<div class="runningVerisonImports">    <div data-dojo-attach-point="runningIntegrationAttach"></div></div>',postCreate:function(){this.showRunningIntegrations()},showRunningIntegrations:function(){this.compSourceHistory=j({gridRestUrl:bootstrap.restUrl+"sourceConfigExecutionRecord/table/all",tableConfigKey:"allRunningSourceConfigs",showComponentField:!0,oldestFirst:!0});this.compSourceHistory.placeAt(this.runningIntegrationAttach)}})})},
"deploy/widgets/component/ComponentSourceConfigHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/log/LiveLogViewer,js/webext/widgets/table/TreeTable,js/webext/widgets/Dialog,js/webext/widgets/Alert".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return k([m,l],{showComponentField:!1,oldestFirst:!1,templateString:'<div class="componentSourceConfigHistory"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var e=this,f=[{name:i18n("Import Type"),formatter:function(a){return i18n(a.taskInfo)}},{name:i18n("Agent"),formatter:function(a){return c.agentLinkFormatter(a.agent)}},{name:i18n("Start"),formatter:function(a){return util.dateFormatShort(a.startTime)}},{name:i18n("End"),formatter:function(a){if(0!==a.endTime)return util.dateFormatShort(a.endTime)}},{name:i18n("Status"),formatter:function(a,b,d){return c.sourceConfigStatusFormatter(a,b,d)}},{name:i18n("Actions"),
formatter:function(a){var c=h.create("div");if("WAITING"!==a.status){var f=h.create("a",{"class":"linkPointer"},c);d(f,"click",function(){(new b({url:bootstrap.restUrl+"logView/sourceConfigExecution/"+a.id+"/stdOut.txt",completedUrl:bootstrap.restUrl+"sourceConfigExecutionRecord/"+a.id+"/completed",title:i18n("Output Log"),autoRefresh:"EXECUTING"===a.status,paddingTop:"0px"})).show()});h.create("div",{className:"general-icon consoleIcon inline-block",title:i18n("Output Log")},f);a.errorLogExists&&
(f=h.create("a",{"class":"linkPointer"},c),d(f,"click",function(){(new b({url:bootstrap.restUrl+"logView/sourceConfigExecution/"+a.id+"/log.txt",completedUrl:bootstrap.restUrl+"sourceConfigExecutionRecord/"+a.id+"/completed",title:i18n("Error Log"),autoRefresh:"EXECUTING"===a.status})).show()}),h.create("div",{className:"general-icon pageIconRed inline-block",title:i18n("Error Log")},f));f=h.create("a",{"class":"linkPointer"},c);d(f,"click",function(){e.showPropertiesDialog(a)});h.create("div",{className:"general-icon pageIcon inline-block",
title:i18n("Input Properties")},f)}if("EXECUTING"===a.status||"WAITING"===a.status)f=h.create("a",{"class":"linkPointer",innerHTML:i18n("Cancel"),style:{paddingLeft:"10px"}},c),d(f,"click",function(){j.put({url:bootstrap.restUrl+"sourceConfigExecutionRecord/"+a.id+"/cancel",handleAs:"json",load:function(){e.refresh()},error:function(a){new n({message:util.escape(a.responseText)});e.refresh()}})});return c}}];this.showComponentField&&f.unshift({name:i18n("Component"),formatter:function(a){return c.componentLinkFormatter(a.component)}});
if(!e.gridRestUrl)e.gridRestUrl=bootstrap.restUrl+"sourceConfigExecutionRecord/"+appState.component.id+"/table";if(!e.tableConfigKey)e.tableConfigKey="componentSourceConfigHistory"+appState.component.id;this.grid=new a({url:e.gridRestUrl,columns:f,serverSideProcessing:!0,orderField:"startTime",sortType:this.oldestFirst?"asc":"desc",tableConfigKey:e.tableConfigKey,noDataMessage:i18n("No executing version imports found."),hidePagination:!1,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach)},
destroy:function(){this.inherited(arguments);this.grid.destroy()},showPropertiesDialog:function(b){var c=new f,d=document.createElement("div"),o=document.createElement("span");o.innerHTML=i18n("Input Properties");var n=document.createElement("div");n.className="containerLabel";n.appendChild(o);o=document.createElement("div");o.className="innerContainer";o.appendChild(d);var k=document.createElement("div");k.style.maxWidth="700px";k.style.maxHeight="500px";k.style.overflow="auto";k.appendChild(n);
k.appendChild(o);c.containerNode.appendChild(k);c.show();j.get({url:bootstrap.restUrl+"sourceConfigExecutionRecord/"+b.id+"/properties",handleAs:"json",load:function(b){b&&(new a({data:b,serverSideProcessing:!1,columns:[{name:i18n("Name"),field:"name"},{name:i18n("Value"),field:"value",formatter:function(a,b){var c=h.create("div");b&&e.forEach(b.split("\n"),function(a){h.create("div",{innerHTML:a.escape()},c)});return c}}],hidePagination:!0,hideExpandCollapse:!0,hideFooter:!0})).placeAt(d)}})},refresh:function(){this.grid.refresh()}})})},
"deploy/widgets/log/LiveLogViewer":function(){define("dijit/_Widget,dijit/form/Button,dojo/DeferredList,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,dojo/window,dojox/html/entities,deploy/widgets/log/Blocker,js/util/blocker/_BlockerMixin,js/webext/widgets/Dialog,js/webext/widgets/Pager".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e("deploy.widgets.log.LiveLogViewer",[t,l,q],{autoRefresh:!0,lines:null,linesOfInterest:null,
pagerControls:null,logText:null,headerContainer:null,linesContainer:null,displayedLines:0,downloadButtonName:"Download Log",completedUrl:null,isLogFinished:!1,postCreate:function(){this.inherited(arguments);this.lines=[];this.linesOfInterest={};this.displayedLines=0;this.dialogLinerWidget=new r;this.dialogLiner=this.dialogLinerWidget.domNode;d.add(this.dialogLiner,"log-viewer-dialog");this.header&&this.header.placeAt(this.containerNode);if(this.paddingTop)this.containerNode.style.paddingTop=this.paddingTop;
this.dialogLinerWidget.placeAt(this.containerNode)},show:function(){var d=this,e=f.getBox();b.set(d.dialogLiner,{minHeight:0.75*e.h-70+"px",minWidth:0.75*e.w+"px"});e=c.create("div",{"class":"logContainer"},d.dialogLiner);d.linesContainer=c.create("div",{"class":"linesContainer"},e);d.logText=c.create("div",{"class":"logText"},e);e=c.create("div",{"class":"logButtons"},d.dialogLiner);(new m({label:i18n(this.downloadButtonName),showTitle:!1,onClick:function(){d.downloadLog()}})).placeAt(e);d.pagerControls=
new o({totalItems:0,startItem:0,itemsPerPage:1E3,totalPages:0});d.pagerControls.placeAt(e);a(d.pagerControls,"pageChange",function(){d.updateLogText()});d.showLogText();d.dialogLinerWidget.block();this.inherited(arguments)},downloadLog:function(){util.downloadFile(this.url+"?fileDownload=true")},showLogText:function(){var a=this,b=[];if(a.propsUrl){var c=h.get({url:a.propsUrl,handleAs:"json",load:function(b){a.linesOfInterest={};b&&b.outputProps&&(b=util.getNamedPropertyValue(b.outputProps,"LOI"))&&
j.forEach(b.split(","),function(b){a.linesOfInterest[b]=!0})}});b.push(c)}else a.linesOfInterest={};a.completedUrl&&h.get({url:a.completedUrl,handleAs:"json",load:function(b){if(b.completed)a.completionData=!0}});c=h.get({url:a.url,load:function(b){a.lines=b.split(/\r\n|\r|\n/);a.pagerControls.setTotalItems(a.lines.length)}});b.push(c);(new k(b)).addBoth(function(){a.updateLogText()})},hide:function(){this.inherited(arguments);this.refreshTimer&&clearTimeout(this.refreshTimer)},updateLogText:function(){var a=
this,d=a.logText.scrollTop;0<a.displayedLines&&(a.displayedLines--,a.logText.removeChild(a.logText.lastChild),a.linesContainer.removeChild(a.linesContainer.lastChild));var e=a.pagerControls.startItem,f=e+a.pagerControls.itemsPerPage-1;if(a.displayedLines<e||a.displayedLines>f)c.empty(a.linesContainer),c.empty(a.logText),a.displayedLines=Math.max(e-1,0);for(var e=[a.linesContainer.innerHTML],h=[a.logText.innerHTML];a.displayedLines<Math.min(f,a.lines.length);a.displayedLines++){var j=a.displayedLines+
1,o=a.linesOfInterest[j],n=" ";a.lines[a.displayedLines]&&""!==a.lines[a.displayedLines]&&(n=a.lines[a.displayedLines]);var n=a._escapeXml(n),k="monospace";o&&(k+=" log-viewer-line-of-interest");e.push(a._createDivStringWithInnerHtml(k,j));h.push(a._createDivStringWithInnerHtml(k,n))}a.linesContainer.innerHTML=e.join("");a.logText.innerHTML=h.join("");b.set(a.logText,"height",a.logText.scrollHeight);setTimeout(function(){a.logText.scrollTop=d},1);if(a.autoRefresh){if(!a.refreshTimer&&!a.isLogFinished)a.refreshTimer=
setTimeout(function(){a.refreshTimer=null;a.showLogText()},5E3);if(a.completionData)a.isLogFinished=!0}a.dialogLinerWidget.unblock()},_escapeXml:function(a){return n.encode(a).replace(" ","&nbsp;")},_createDivStringWithInnerHtml:function(a,b){return"<div class='"+a+"'>"+b+"</div>"}})})},"deploy/widgets/version/ArtifactUploadForm":function(){define(["dijit/_Widget","dojo/_base/declare","dojo/topic","js/webext/widgets/Alert","js/webext/widgets/Dialog"],function(l,m,k,j,e){return m("deploy.widgets.version.ArtifactUploadForm",
[l],{postCreate:function(){var h=this,d=new e({title:i18n("Upload Artifacts"),closable:!0,draggable:!0}),c=document.createElement("form");c.target="formTarget";c.action=bootstrap.tasksUrl+"PluginTasks/loadPlugin";c.method="POST";c.enctype="multipart/form-data";c.encoding="multipart/form-data";var b=document.createElement("input");b.type="file";b.name="file";var a=document.createElement("input");a.type="submit";a.value=i18n("Submit");a.style.display="block";c.appendChild(b);c.appendChild(a);d.containerNode.appendChild(c);
c.onsubmit=function(){var a=!0;if(b.value)var c=k.subscribe("formTarget",function(){k.unsubscribe(c);setTimeout(function(){d.hide();d.destroy();h.grid.refresh()},20)});else new j({message:i18n("Please choose a file to upload.")}),a=!1;return a};d.show()}})})},"deploy/widgets/configuration/ConfigurationTree":function(){define("dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,js/webext/widgets/table/TreeTable,deploy/widgets/component/ComponentConfigTemplates,deploy/widgets/environment/EnvironmentResourceTree,deploy/widgets/property/PropDefs,deploy/widgets/property/PropValues,deploy/widgets/property/PropSheetDefValues".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j([l,m],{templateString:'<div class="configurationTree"><div class="configurationTreeContainer"><div class="configurationTreeDiv" data-dojo-attach-point="treeAttach"></div><div class="configurationDetail"><div data-dojo-attach-point="detailAttach"></div></div></div></div>',postCreate:function(){this.inherited(arguments);this.showTree()},destroy:function(){this.inherited(arguments);this.tree.destroy()},showTree:function(){var a=this;void 0!==this.tree&&this.tree.destroy();
var b=[{name:i18n("Application, Component, or Environment"),formatter:function(b,c,d){d.onclick=function(){a.loadConfigurationDetails(b)};return b.name},orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},field:"name",style:{"word-break":"break-word"}}];this.tree=new c({url:bootstrap.restUrl+"deploy/configuration/configurationTree",columns:b,serverSideProcessing:!1,orderField:"name",noDataMessage:i18n("No Applications, Environments or Components have been configured yet."),
tableConfigKey:"configurationTreeTable",style:{wordBreak:"normal"}});d.add(this.tree.expandCollapseAttach,"centered-expand-collapse");this.tree.placeAt(this.treeAttach)},showSelectedArrow:function(a){if(void 0!==this.selectedArrow)this.selectedArrow.className="hidden";a.className="";this.selectedArrow=a},loadConfigurationDetails:function(c){var d=this;h.empty(this.detailAttach);k.forEach(this.detailWidgets,function(a){a.destroy()});this.detailWidgets=[];var j="";"Application"===c.objectType?j=i18n("Application: %s",
c.name):"Component"===c.objectType?j=i18n("Component: %s",c.name):"Environment"===c.objectType&&(j=i18n("Configuration of %s in %s",c.component.name,c.name));var l=document.createElement("div");l.className="containerLabel";l.style.padding="10px";l.innerHTML=j.escape();this.detailAttach.appendChild(l);j=document.createElement("div");j.className="hr";this.detailAttach.appendChild(j);var m,w;"Application"===c.objectType?(w=document.createElement("div"),w.className="containerLabel",w.innerHTML=i18n("Properties"),
w.style.padding="5px 0px 10px 0px",this.detailAttach.appendChild(w),m=new n({propSheet:c.propSheet,readOnly:!c.security["Manage Properties"]}),m.placeAt(this.detailAttach),this.detailWidgets.push(m)):"Component"===c.objectType?e.get({url:bootstrap.restUrl+"deploy/component/"+c.id,handleAs:"json",load:function(a){w=document.createElement("div");w.className="containerLabel";w.innerHTML=i18n("Properties");w.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(w);m=new n({propSheet:a.propSheet,
readOnly:!a.security["Manage Properties"]});m.placeAt(d.detailAttach);d.detailWidgets.push(m);var c=document.createElement("div");c.className="hr";d.detailAttach.appendChild(c);c=document.createElement("div");c.className="containerLabel";c.innerHTML=i18n("Environment Property Definitions");c.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(c);c=document.createElement("div");c.className="description";c.innerHTML=i18n("Define properties here to be given values on each environment the component is used in.");
d.detailAttach.appendChild(c);c=new f({propSheetDef:a.environmentPropSheetDef,readOnly:!a.security["Manage Properties"]});c.placeAt(d.detailAttach);d.detailWidgets.push(c);c=document.createElement("div");c.className="hr";d.detailAttach.appendChild(c);c=document.createElement("div");c.className="containerLabel";c.innerHTML=i18n("Configuration Templates");c.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(c);a=new b({component:a});a.placeAt(d.detailAttach);d.detailWidgets.push(a)}}):"Environment"===
c.objectType&&e.get({url:bootstrap.restUrl+"deploy/component/"+c.component.id,handleAs:"json",load:function(b){var f=document.createElement("div");f.className="containerLabel";f.innerHTML=i18n("Resources");f.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(f);f=new a({environment:c,rightPanelClass:"configuration-table"});f.placeAt(d.detailAttach);d.detailWidgets.push(f);f=document.createElement("div");f.className="hr";d.detailAttach.appendChild(f);w=document.createElement("div");w.className=
"containerLabel";w.innerHTML=i18n("Environment Properties");w.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(w);var j=h.create("div");h.place(j,d.detailAttach);e.get({url:bootstrap.restUrl+"deploy/environment/"+c.id+"/mappingProperties/"+b.id,load:function(){var a=new r({propSheetDefPath:b.environmentPropSheetDef.path,propSheetPath:"applications/"+c.application.id+"/environments/"+c.id+"/properties/"+b.id,getValuesUrl:bootstrap.restUrl+"deploy/environment/"+c.id+"/mappingProperties/"+
b.id,noPropertiesMessage:i18n("No environment properties have been defined by this component."),readOnly:!c.security["Manage Properties"]});d.detailWidgets.push(a);a.placeAt(j)}});f=document.createElement("div");f.className="hr";d.detailAttach.appendChild(f);f=document.createElement("div");f.className="containerLabel";f.innerHTML=i18n("Environment Properties (All Components)");f.style.padding="5px 0px 10px 0px";d.detailAttach.appendChild(f);m=new n({propSheet:c.propSheet,readOnly:!c.security["Manage Properties"]});
m.placeAt(d.detailAttach);d.detailWidgets.push(m)}})}})})},"deploy/widgets/component/ComponentConfigTemplates":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/configTemplate/EditConfigTemplate,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.component.ComponentConfigTemplates",
[m,l],{templateString:'<div class="componentConfigTemplates"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/component/"+this.component.id+"/configTemplates",c=[{name:i18n("Name"),field:"name",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=
new n({url:b,serverSideProcessing:!1,columns:c,orderField:"name",sortType:"desc",tableConfigKey:"configurationTemplateList",noDataMessage:i18n("No configuration templates found."),hidePagination:!1,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach);this.component.security["Manage Configuration Templates"]&&(b=new k({label:i18n("Create Configuration Template"),showTitle:!1,onClick:function(){a.showEditConfigTemplateDialog()}}),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonAttach))},
destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if(b.component.security["Manage Configuration Templates"]){var f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Edit")},e);c(f,"click",function(){b.showEditConfigTemplateDialog(a)});f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);c(f,"click",function(){b.confirmDelete(a)})}else f=d.create("a",{"class":"actionsLink linkPointer",
innerHTML:i18n("View")},e),c(f,"click",function(){b.showEditConfigTemplateDialog(a)});return e},showEditConfigTemplateDialog:function(c){var d=this,e=i18n("Create Configuration Template");c&&(e=i18n("Edit Configuration Template"));var f=new a({title:e,closable:!0,draggable:!0});(new b({readOnly:!this.component.security["Manage Configuration Templates"],component:this.component,configTemplate:c,callback:function(){f.hide();f.destroy();d.grid.refresh()}})).placeAt(f.containerNode);f.show()},confirmDelete:function(a){var b=
this;new f({message:i18n("Are you sure you want to delete template %s?",a.name.escape()),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"deploy/configTemplate/"+b.component.id+"/"+a.name,load:function(){b.grid.unblock();b.grid.refresh()}})}})}})})},"deploy/widgets/configTemplate/EditConfigTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),
function(l,m,k,j,e,h,d,c,b){return k("deploy.widgets.configTemplate.EditConfigTemplate",[m,l],{templateString:'<div class="editConfigTemplate">  <div class="versionToggle" data-dojo-attach-point="versionAttach"></div>  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.existingValues={};if(this.configTemplate){this.existingValues=this.configTemplate;if(void 0===this.component)this.component=this.configTemplate.component;this.showVersionLinks()}this.showForm(this.readOnly)},
showForm:function(a){var b=this,e=this.existingValues.version;this.form=new d({readOnly:a,cancelLabel:void 0!==this.callback?i18n("Cancel"):null,submitUrl:bootstrap.restUrl+"deploy/configTemplate",postSubmit:function(){void 0!==b.callback?b.callback():b.configTemplate&&navBar.setHash("configTemplate/"+b.component.id+"/"+b.existingValues.name+"/-1",!1,!0)},addData:function(a){a.componentId=b.component.id;a.previousVersion=null===e?0:e},onError:function(a){a.responseText?409===a.status?new c({message:i18n("Modifications have occured since you loaded this page please refresh.")}):
new c({message:util.escape(a.responseText)}):new c({message:i18n("An error occured.")})},onCancel:function(){void 0!==b.callback&&b.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,readOnly:void 0!==this.configTemplate,type:"Text",value:this.existingValues.name});this.form.addField({name:"data",label:i18n("Template"),type:"Text Area",style:{width:"400px",height:"400px"},value:this.existingValues.data});this.form.placeAt(this.formAttach)},showVersionLinks:function(){var a=
this;e.empty(this.versionAttach);e.create("div",{innerHTML:i18n("Version %s of %s",this.existingValues.version,this.existingValues.versionCount)},this.versionAttach);var d=e.create("div",{},this.versionAttach);if(1===this.existingValues.version)e.create("div",{className:"arrow_backwards_grey inlineBlock"},d);else{var n=e.create("div",{className:"arrow_backwards inlineBlock"},d);h(n,"click",function(){a.existingValues.version--;a.refresh()})}e.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},d);this.existingValues.version===
this.existingValues.versionCount?(e.create("div",{className:"arrow_forward_grey inlineBlock"},d),e.create("span",{innerHTML:"&nbsp;&nbsp;"},d),e.create("div",{className:"arrow_fastForward_grey inlineBlock"},d)):(n=e.create("div",{className:"arrow_forward inlineBlock"},d),h(n,"click",function(){a.existingValues.version++;a.refresh()}),e.create("span",{innerHTML:"&nbsp;&nbsp;"},d),n=e.create("div",{className:"arrow_fastForward inlineBlock"},d),h(n,"click",function(){a.existingValues.version=a.existingValues.versionCount;
a.refresh()}),this.readOnly||(e.create("span",{innerHTML:"&nbsp;&nbsp;"},d),d=e.create("a",{innerHTML:i18n("Reset Latest to This Version")},d),h(d,"click",function(){new b({message:i18n("Are you sure you want to reset to version %s?",a.existingValues.version),action:function(){j.put({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(a.existingValues.path)+"."+a.existingValues.version+"/setAsLatest",load:function(){a.existingValues.versionCount++;a.existingValues.version=a.existingValues.versionCount;
a.refresh()},error:function(a){new c({message:i18n("Error: %s",util.escape(a.responseText))})}})}})})))},refresh:function(){var a=this,b=bootstrap.restUrl+"deploy/configTemplate/"+a.existingValues.componentId+"/"+util.encodeIgnoringSlash(a.existingValues.name)+"/"+a.existingValues.version;j.get({url:b,handleAs:"json",load:function(b){a.existingValues=b;a.form.destroy();a.readOnly?a.showForm(!0):a.showForm(a.existingValues.version!==a.existingValues.versionCount);a.showVersionLinks()},error:function(a){new c({message:i18n("Error: %s",
util.escape(a.responseText))})}})}})})},"deploy/widgets/environment/EnvironmentResourceTree":function(){define("dojo/_base/declare,deploy/widgets/resource/ResourceTree,dijit/form/Button,dojo/_base/array,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,deploy/widgets/resource/ResourceSelectList".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return l([m],{postCreate:function(){if(!this.environment)this.environment=
appState.environment;this.url=bootstrap.restUrl+"deploy/environment/"+this.environment.id+"/resources";this.inherited(arguments)},addTopButtons:function(){var a=this;if(a.environment.security["Manage Base Resources"]){var b=new k({label:i18n("Add Base Resources"),showTitle:!1,onClick:function(){a.showAddResourceDialog()}});h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)}},showAddResourceDialog:function(){var a=this,b=new n({title:i18n("Add Resource to Environment"),closable:!0,draggable:!0,
width:-100});(new t({onCancel:function(){b.hide();b.destroy()},onSave:function(d){var h=[];j.forEach(d,function(a){h.push(a.id)});a.grid.block();e.post({url:void 0!==a.environment?bootstrap.restUrl+"deploy/environment/"+a.environment.id+"/resources":bootstrap.restUrl+"deploy/environment/"+appState.environment.id+"/resources",putData:c.stringify(h),headers:{"Content-Type":"application/json"},load:function(){a.grid.refresh()},error:function(b){new f({messages:[i18n("Error adding resources:"),"",util.escape(b.responseText)]});
a.grid.unblock()}});b.hide();b.destroy()}})).placeAt(b.containerNode);b.show()},getDeleteActions:function(a){var b=this;return a.isRoot?[{label:i18n("Remove from Environment"),onClick:function(){b.confirmRemove(a)}}]:this.inherited(arguments)},confirmRemove:function(a){var b=this;new r({message:i18n("Are you sure you want to remove %s from this environment?",a.name),action:function(){b.grid.block();e.del({url:void 0!==b.environment?bootstrap.restUrl+"deploy/environment/"+b.environment.id+"/resources/"+
a.id:bootstrap.restUrl+"deploy/environment/"+appState.environment.id+"/resources/"+a.id,handleAs:"json",load:function(){b.grid.refresh()},error:function(a){new f({messages:[i18n("Error removing resource:"),"",util.escape(a.responseText)]});b.grid.unblock()}})}})},isSelectable:function(a){return!a.isRoot}})})},"deploy/widgets/resource/ResourceTree":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/TextBox,dijit/Tooltip,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/dom-style,dojo/json,dojo/on,dojo/query,deploy/widgets/Formatters,deploy/widgets/component/ComponentResources,deploy/widgets/log/LiveLogViewer,deploy/widgets/resource/EditResource,deploy/widgets/resource/ResourceSelector,deploy/widgets/resourceTemplate/EditResourceTemplate,js/webext/widgets/RadioButtonGroup,deploy/widgets/resourceTemplate/ApplyResourceTemplate,deploy/widgets/rightPanel/ResourceRightPanelContainer,deploy/widgets/tag/Tagger,deploy/widgets/resource/ResourceCompareSelectorDialog,deploy/widgets/filter/TagFilter,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,js/webext/widgets/ColumnForm,js/webext/widgets/DialogMultiSelect,js/webext/widgets/form/MenuButton".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N,L,I,J){return d([m,l],{templateString:'<div class="resourceList"><div class="listTopButtons" data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="resourcesGrid"></div><div class="right-panel-container" data-dojo-attach-point="panelAttach"></div></div>',hideTopButtons:!1,onRowSelect:function(){},postCreate:function(){this.inherited(arguments);var a=this;if(!this.url)this.url=
bootstrap.restUrl+"resource/resource/tree";if(!this.xhrMethod)this.xhrMethod="GET";if(!this.serverSideProcessing)this.serverSideProcessing=!1;this.className&&b.add(this.domNode,this.className);var d=[];d.push(this.getNameColumn());h.forEach(this.getOtherColumns(),function(a){d.push(a)});var e={url:this.url,style:this.treeStyle,xhrMethod:this.xhrMethod,serverSideProcessing:this.serverSideProcessing,orderField:"name",noDataMessage:i18n("No resources have been added yet."),tableConfigKey:"resourceList",
columns:d,draggable:!0,selectable:!0,hideExpandCollapse:!0,hidePagination:!0,suppressDefaultOnDrop:!0,isSelectable:function(b){return a.isSelectable(b)},canDragItem:function(b){return a.isSelectable(b)},canDropOnItem:function(b,c){var d=!0;h.forEach(b,function(b){if(b.allowedParentResourceRoles)if(!c.hasAgent&&!c.resourceTemplate)d=!1;else if(0<b.allowedParentResourceRoles.length){var e=!1,f=a.grid._getRowObjectForItem(c),j=f.item.name,o=a.getLowestParentRole(f);h.forEach(b.allowedParentResourceRoles,
function(a){o&&o.id===a.id&&(null===a.folder||void 0===a.folder?e=!0:a.folder===j&&(e=!0))});e||(d=!1)}if((b.workingDirectory||b.agent)&&c.hasAgent)d=!1});return d},onDrop:function(b,d,e){var f=function(f){void 0===f&&(f=[],d.children&&h.forEach(d.children,function(a){f[f.length]=a.name}));var j=[],o={},n=!1;h.forEach(b,function(a){j.push({id:a.id});if(-1!==h.indexOf(f,a.name))o[a.id]=a.name,n=!0});var k=bootstrap.restUrl+"resource/resource/",k=e?k+"copyTo":k+"moveTo",k=k+("/"+d.id),l=function(f){a.grid.block();
var o={sources:j};if(f)o.renames=f;c.put({url:k,putData:r.stringify(o),handleAs:"json",load:function(){a.grid.unblock();e||h.forEach(b,function(b){a.grid.refreshSiblingsForItem(b)});a.grid.refreshRowChildrenForItem(d)},error:function(b){new D({message:util.escape(b.responseText)});a.grid.refresh()}})};if(n){var s=new G({title:i18n("Rename Resources with Conflicting Names"),closable:!0,draggable:!0}),m=new L({onSubmit:function(a){l(a);s.hide();s.destroy()},onCancel:function(){s.hide();s.destroy()}});
m.placeAt(s.containerNode);for(var q in o)o.hasOwnProperty(q)&&m.addField({name:q,label:i18n("New name for %s",o[q]),value:i18n("%s (Copy)",o[q]),required:!0,type:"Text"});s.show()}else l()};a.target=d;!a.externalDrop&&d&&0<b.length&&(d.hasChildren&&(!d.children||0===d.children.length)?c.get({url:bootstrap.restUrl+"resource/resource/"+d.id+"/resources",handleAs:"json",load:function(a){var b=[];a&&dojo.forEach(a,function(a){b[b.length]=a.name});f(b)},error:function(b){new D({message:util.escape(b.responseText)});
a.grid.refresh()}}):f(void 0))},onRowSelect:a.onRowSelect,getChildUrl:function(b){return a.getChildUrl(b)},hasChildren:function(a){return a.hasChildren}};this.grid=new N(e);this.grid.placeAt(this.resourcesGrid);if(this.grid.dndContainer)this.grid.dndContainer.onDropExternal=function(){a.externalDrop=!0};this.buttonAttach=this.grid.buttonAttach;this.addTopButtons();this.addHoverHandler();(e=this.getSelectOptions())&&0<e.length&&(new J({options:e,label:i18n("Select All...")})).placeAt(this.buttonAttach);
if((e=this.getActionsOptions())&&0<e.length){var f=new J({options:e,label:i18n("Actions...")});f.placeAt(this.buttonAttach);e=function(){var b=a.grid.getSelectedItems().length;0===b?(f.set("label",i18n("Actions...")),f.set("disabled",!0)):(f.set("label",i18n("Actions... (%s)",b)),f.set("disabled",!1))};a.grid.on("selectItem",e);a.grid.on("deselectItem",e);a.grid.on("displayTable",e)}config.data.permissions[security.system.createResources]&&!b.contains(this.domNode,"agent-pool")&&this.buildRightPanels()},
getChildUrl:function(a){return bootstrap.restUrl+"resource/resource/"+a.id+"/resources"},buildRightPanels:function(){(this.resource&&!this.resource.parent||this.url&&0===this.url.indexOf("/rest/agent"))&&b.add(this.domNode,"resource-group");this.rightPanelClass&&b.add(this.domNode,this.rightPanelClass);this.rightPanel=new B({parent:this,buttonAttachPoint:this.buttonAttach})},refreshRightPanel:function(){this.rightPanel&&this.rightPanel.current&&this.rightPanel.current.refresh()},getNameColumn:function(){var c=
this;return{name:i18n("Name"),formatter:function(d){var h=f.create("div",{"class":"inlineBlock resourceList-nameColumn",style:"margin-"+(a.isBodyLtr()?"right":"left")+":78px;"});if(d.discoveryFailed){var j=f.create("div",{className:"general-icon failed-icon inlineBlock"});new e({connectId:[j],label:i18n("Discovery failed. Click this icon to view logs."),showDelay:100,position:["after","above","below","before"]});f.place(j,h);t(j,"click",function(){(new u({url:bootstrap.restUrl+"logView/latestResourceDiscovery/"+
d.id+"/stdOut.txt",title:i18n("Output Log"),autoRefresh:!1,paddingTop:"0px"})).show()})}j=d.isRoot?o.resourceLinkFormatterWithPath(d):o.resourceLinkFormatter(d);b.add(j,"inlineBlock");f.place(j,h);c.showTags(d,h);return h},orderField:"name",filterField:"name",filterType:"custom",getFilterFields:function(){var a=new j({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Resource Name"),type:"like"}),b=new E({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"like"});
return[a,b]},getRawValue:function(a){return a.path}}},getOtherColumns:function(){return[{name:i18n("Inventory"),formatter:function(a,b,c){return o.resourceInventoryFormatter(a,c,!0)},orderField:"version",filterField:"version",filterType:"text",getRawValue:function(a){var b="None";if(a.version)b=a.version.name;return b}},{name:i18n("Status"),formatter:o.resourceStatusFormatter},{name:i18n("Description"),formatter:function(a){return f.create("div",{innerHTML:a.description?a.description.escape():"",
style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"250px"}})},width:"250px",orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}}]},actionsFormatter:function(a){var b=this,c=f.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions resourceList-rowHoverActions"}),d=[];a.resourceTemplate||(d.push({label:i18n("Compare or Synchronize"),onClick:function(){b.showCompareDialog(a)}}),
d.push({label:i18n("Define New Template"),onClick:function(){b.showNewTemplateDialog(a)}}),d.push({label:i18n("Synchronize With Template"),onClick:function(){b.showApplyTemplateDialog(a)}}),d.push({label:i18n("Add From Template"),onClick:function(){b.showApplyTemplateDialog(a,!0)}}));a.security["Edit Basic Settings"]&&this.addEditActions(a,c);a.security["Create Resources"]&&h.forEach(this.getCreateActions(a),function(a){d.push(a)});a.security["View Resources"]&&h.forEach(this.getRunnableActions(a),
function(a){d.push(a)});a.security.Delete&&(!a.resourceTemplate||a.type)&&h.forEach(this.getDeleteActions(a),function(a){d.push(a)});(new J({options:d,label:i18n("Actions...")})).placeAt(c);return c},addTopButtons:function(){var a=this;if(!a.hideTopButtons&&config.data.permissions[security.system.createResources]){b.add(this.domNode,"all-resources");var c=new k({label:i18n("Create Top-Level Group"),showTitle:!1,onClick:function(){a.showNewResourceDialog()}});b.add(c.domNode,"idxButtonSpecial");c.placeAt(this.buttonAttach)}},
addHoverHandler:function(){var a=this;t(this.grid,"tbody tr:mouseover",function(){if(1>q(".resourceList-rowHoverActions",this).length){var b=q(".resourceList-nameColumn",this)[0],c=a.grid._getRowObjectForDomNode(this).item;f.place(a.actionsFormatter(c),b)}})},addEditActions:function(a,b){var c=this;(new k({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.showEditResourceDialog(a)}})).placeAt(b)},getCreateActions:function(a){var b=this,c=[];c.push({label:i18n("Add Group"),
onClick:function(){b.showNewResourceDialog(a)}});a.hasAgent?(c.push({label:i18n("Add Component"),onClick:function(){b.showNewResourceDialog(a,"component")}}),c.push({label:i18n("Add Component Tag"),onClick:function(){b.showNewResourceDialog(a,"componentTag")}})):(c.push({label:i18n("Add Agent"),onClick:function(){b.showNewResourceDialog(a,"agent")}}),c.push({label:i18n("Add Agent Pool"),onClick:function(){b.showNewResourceDialog(a,"agentPool")}}));return c},getDeleteActions:function(a){var b=this;
return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]},getRunnableActions:function(a){var b=this,d=[];a.hasAgent&&(h.forEach(a.autoConfigureCommands,function(e){d.push({label:i18n("Configure using %s",i18n(e.name)),onClick:function(){b.grid.block();c.put({url:bootstrap.restUrl+"resource/resource/"+a.id+"/autoConfigure/"+e.id,handleAs:"json",load:function(c){b.grid.unblock();b.grid.refreshRowChildrenForItem(a);(new u({url:bootstrap.restUrl+"logView/resourceDiscovery/"+c.id+"/stdOut.txt",
title:i18n("Running configuration step..."),autoRefresh:"EXECUTING"===c.status,paddingTop:"0px"})).show()},error:function(a){b.grid.unblock();new D({message:util.escape(a.responseText)})}})}})}),h.forEach(a.compareCommands,function(e){d.push({label:i18n("Compare using %s",i18n(e.name)),onClick:function(){b.grid.block();c.put({url:bootstrap.restUrl+"resource/resource/"+a.id+"/compareConfig/"+e.id,handleAs:"json",load:function(c){b.grid.unblock();b.grid.refreshRowChildrenForItem(a);(new u({url:bootstrap.restUrl+
"logView/resourceDiscovery/"+c.id+"/stdOut.txt",title:i18n("Running discovery step..."),autoRefresh:"EXECUTING"===c.status,paddingTop:"0px"})).show()},error:function(a){b.grid.unblock();new D({message:util.escape(a.responseText)})}})}})}));return d},showTags:function(a,b){var c=this;c.tagger=new A({objectType:"Resource",item:a,callback:function(){c.grid.refresh()}});c.tagger.placeAt(b)},getSelectOptions:function(){var a=this;return[{label:i18n("Agents"),onClick:function(){var b=[];h.forEach(a.grid.getItems(),
function(a){"agent"===a.type&&b.push(a)});a.grid.deselectAll();a.grid.selectItems(b)}},{label:i18n("Agent Pools"),onClick:function(){var b=[];h.forEach(a.grid.getItems(),function(a){"agent pool"===a.type&&b.push(a)});a.grid.deselectAll();a.grid.selectItems(b)}},{label:i18n("Matching Filter"),onClick:function(){a.grid.deselectAll();a.grid.selectItems(a.grid.getItemsMatchingFilters())}}]},getActionsOptions:function(){var a=this;return[{label:i18n("Add Components"),onClick:function(){a._prepareBulkNewResources("component")}},
{label:i18n("Add Groups"),onClick:function(){a._prepareBulkNewResources()}},{label:i18n("Delete"),onClick:function(){a.confirmBulkDelete()}},{label:i18n("Add Tag"),onClick:function(){a._prepareBulkTagAdd()}},{label:i18n("Remove Tag"),onClick:function(){a._prepareBulkTagRemove()}}]},_prepareBulkTagRemove:function(){var a=[];h.forEach(this.grid.getSelectedItems(),function(b){a.push(b.id)});this.tagger.showRemoveTagDialog(a)},_prepareBulkTagAdd:function(){var a=[];h.forEach(this.grid.getSelectedItems(),
function(b){a.push(b.id)});this.tagger.showAddTagDialog(a)},showNewResourceDialog:function(a,b){var c=this,d=new G({title:i18n("Create Resource"),closable:!0,draggable:!0,description:i18n("A resource can represent an agent, agent pool, component, or an organizational entity that is used to group other resources. You can see your entire infrastructure (all resources across all environments) on the Resources page.")});c.createEditResourceForm({parent:a,type:b,cancelCallback:function(){d.hide();d.destroy()},
callback:function(){d.hide();d.destroy();a?c.grid.refreshRowChildrenForItem(a):c.grid.refresh();c.refreshRightPanel()}}).placeAt(d.containerNode);d.show()},showBulkNewResourceDialog:function(a,b){var c=this,d=new G({title:i18n("Create Resources"),closable:!0,draggable:!0});c.createEditResourceForm({parentIds:b,type:a,cancelCallback:function(){d.hide();d.destroy()},callback:function(){d.hide();d.destroy();c.grid.refresh()}}).placeAt(d.containerNode);d.show()},showEditResourceDialog:function(a){var b=
this;c.get({url:bootstrap.restUrl+"resource/resource/"+a.id,handleAs:"json",load:function(a){var c=new G({title:i18n("Edit Resource"),closable:!0,draggable:!0});b.createEditResourceForm({resource:a,callback:function(){c.hide();c.destroy();b.grid.refresh()},cancelCallback:function(){c.hide();c.destroy()}}).placeAt(c.containerNode);c.show()}})},createEditResourceForm:function(a){return new w(a)},showCompareDialog:function(a){(new z({resource:a})).show()},showNewTemplateDialog:function(a){var b=new G({title:i18n("Define New Template"),
closable:!0,draggable:!0});(new x({sourceResource:a,callback:function(a){b.hide();a&&navBar.setHash("#resourceTemplate/"+a.id)}})).placeAt(b.containerNode);b.show()},showApplyTemplateDialog:function(a,b){var c=this,d=b?i18n("Create New Resource From Template"):i18n("Synchronize With Template"),e=new G({title:d,closable:!0,draggable:!0});(new C({resource:a,createNew:b,callback:function(b){e.hide();b&&c.grid.refreshRowChildrenForItem(a)}})).placeAt(e.containerNode);e.show()},_prepareBulkNewResources:function(a){var b=
[],c=[];h.forEach(this.grid.getSelectedItems(),function(d){c.push(d.id);"component"===a&&(d.hasAgent||b.push(d))});if(0<b.length){var d="";"component"===a&&(d=i18n("Not all of the selected resources can host a component resource. Only resources with an agent available can host components. The following resources are invalid:"));var e=f.create("div",{innerHTML:d});f.create("div",{innerHTML:"&nbsp;"},e);h.forEach(b,function(a){f.create("div",{innerHTML:util.escape(a.path)},e)});new D({title:i18n("Invalid Selection"),
messageDom:e})}else this.showBulkNewResourceDialog(a,c)},_createDeleteDialog:function(a,b){var d=this;new K({forceRawMessages:!0,message:a,action:function(){d.grid.block();c.del({url:bootstrap.restUrl+"resource/resource/"+b.id,handleAs:"json",load:function(){d.grid.unblock();d.grid.refreshSiblingsForItem(b);d.refreshRightPanel()},error:function(a){new D({messages:[i18n("Error deleting resource:"),"",util.escape(a.responseText)]});d.grid.unblock();d.refreshRightPanel()}})}})},_getDescendants:function(a){var b=
this;b.grid.block();c.get({url:bootstrap.restUrl+"resource/resource/"+a.id+"/descendantsCount",handleAs:"json",load:function(c){b.grid.unblock();var d="",d=i18n("<b>%s</b> contains <b>%s</b> children. Are you sure you want to delete it,<b>and its immediate descendants</b>, from the system permanently?",util.escape(a.name),c.numberOfDescendantsTotal.toString());b._createDeleteDialog(d,a)}})},confirmDelete:function(a){var b="";a.hasChildren?this._getDescendants(a):(b=i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",
util.escape(a.name)),this._createDeleteDialog(b,a))},confirmBulkDelete:function(){var a=this,b=[],d="";if(1<a.grid.getSelectedItems().length)d=[i18n("Are you sure you want to delete the following resources? Any child resources of these will also be deleted."),""],h.forEach(this.grid.getSelectedItems(),function(a){b.push(a.id);d.push(a.path.escape())}),d.push("");else{var e=a.grid.getSelectedItems()[0];return a.confirmDelete(e)}new K({messages:d,action:function(){a.grid.block();c.del({url:bootstrap.restUrl+
"resource/resource/bulk",handleAs:"json",putData:r.stringify(b),load:function(){a.grid.unblock();a.grid.refresh()},error:function(b){new D({messages:[i18n("Error deleting resources:"),"",util.escape(b.responseText)]});a.grid.unblock()}})}})},isSelectable:function(){return!0},getLowestParentRole:function(a){for(;(void 0===a.item.role||null===a.item.role)&&null!==a.parent&&void 0!==a.parent&&a.parent.item;)a=a.parent;return void 0===a.item.role||null===a.item.role?a.item.parentRole:a.item.role}})})},
"deploy/widgets/component/ComponentResources":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.component.ComponentResources",[m,l],{templateString:'<div class="componentResources"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Resource"),formatter:function(d){return j.resourcePathFormatter(d.resource)}},
{name:i18n("Version"),formatter:function(d){return j.versionLinkFormatter(d.version)}},{name:i18n("Date"),field:"date",formatter:util.tableDateFormatter,orderField:"dateCreated"},{name:i18n("Status"),formatter:function(d,c,b){return j.statusFormatter(d.status,c,b)}},{name:i18n("Actions")}];this.grid=new e({url:bootstrap.restUrl+"inventory/resourceInventory/table",columns:h,baseFilters:[{name:"componentId",type:"eq",values:[this.componentId]},{name:"ghostedDate",className:"Long",type:"eq",values:[0]}],
orderField:"dateCreated",sortType:"desc",tableConfigKey:"componentResources"+appState.component.id,noDataMessage:i18n("This component has not been installed to any resources."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/resource/EditResource":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojox/data/JsonRestStore,dojo/_base/xhr,dojo/json,dojo/dom-class,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/select/WebextSelect,deploy/widgets/resource/ResourceRolePropertyEditor,deploy/widgets/resource/EditResourceCondition,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return e("deploy.widgets.resource.EditResource",[m,l],{templateString:'<div class="editResource">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,cancelCallback:void 0,agentPlaceholderName:"Agent Prototype",parentIds:[],postCreate:function(){this.inherited(arguments);var b=this;this.existingValues={};if(this.resource)if(this.existingValues=this.resource,this.resource.role)if("COMPONENT"===this.resource.role.specialType)this.type="component";
else if("AGENT_PLACEHOLDER"===this.resource.role.specialType)this.type="agentPlaceholder";else{if("DYNAMIC_GROUP"!==this.resource.role.specialType)this.type="role"}else if(this.resource.agent)this.type="agent";else if(this.resource.agentPool)this.type="agentPool";else{if(this.resource.componentTag)this.type="componentTag"}else this.parent?(this.existingValues.inheritTeam=!0,d.get({url:bootstrap.restUrl+"resource/resource/teamInheritence/"+this.parent.id,handleAs:"json",sync:!0,load:function(a){b.existingValues.extendedSecurity=
{teams:a}}})):this.parentIds&&this.parentIds.length?(this.existingValues.inheritTeam=!0,this.existingValues.extendedSecurity={teams:[]}):d.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Resource",handleAs:"json",sync:!0,load:function(a){b.existingValues.extendedSecurity={teams:a}}});var e=i18n("Cancel");this.showCancel||(e=null);this.form=new f({submitUrl:bootstrap.restUrl+"resource/resource",readOnly:b.readOnly,showButtons:!b.readOnly,cancelLabel:e,postSubmit:function(a){void 0!==b.callback?
b.callback():navBar.setHash("resource/"+a.id)},addData:function(a){if(b.resource&&(a.existingId=b.existingValues.id,b.resource.parent))a.parentId=b.resource.parent.id;if(b.parent)a.parentId=b.parent.id;if(b.parentIds&&b.parentIds.length)a.parentIds=b.parentIds;if(b.resourceTemplate)a.resourceTemplateId=b.resourceTemplate.id;a.teamMappings=b.forceSecurityInheritence?[]:b.teamSelector.teams;if(b.inheritTeam)a.inheritTeam=b.inheritTeam;if("true"===a.dynamic||!0===a.dynamic){var d=[];j.forEach(b.conditions,
function(a){d.push(a.value)});a.roleProperties={rules:c.stringify(d)}}if("agentPlaceholder"===b.type){if(!a.name)a.name=b.agentPlaceholderName;a.agentPlaceholder=!0}if(!a.roleId&&b.resource&&b.resource.role)a.roleId=b.resource.role.id},onError:function(b){b.responseText&&new a({message:util.escape(b.responseText)})},onCancel:function(){void 0!==b.cancelCallback?b.cancelCallback():void 0!==b.callback&&b.callback()},validateFields:function(){var a=[];b.rolePropertyEditor&&(a=b.rolePropertyEditor.getValidationErrors());
return a}});(!this.type||"agentPlaceholder"===this.type&&this.existingValues.name!==this.agentPlaceholderName)&&this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"_typeInsert",type:"Invisible"});this.form.addField({name:"_nameInsert",type:"Invisible"});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.existingValues.prototype&&(this.form.addField({type:"Label",
label:"",name:"_prototypeLabel",value:i18n("This template resource is a prototype. When it is applied to an actual resource, it may create multiple copies of the template. The number of copies is controlled using the Prototype Iterations field. Use the token ${p:#} to reference the current iteration number in the name or properties of this resource and any of its children.")}),this.form.addField({name:"prototypeIterations",label:i18n("Prototype Iterations"),type:"Text",required:!0,value:this.existingValues.prototypeIterations}));
this.forceSecurityInheritence||((this.parent||this.parentIds&&this.parentIds.length||this.resource&&this.resource.parent)&&this.form.addField({name:"inheritTeam",label:i18n("Inherit Teams From Parent"),type:"Checkbox",description:i18n("This option makes the new resource available to the same teams as the resource's parent."),value:!!this.existingValues.inheritTeam,onChange:function(a){b.form.hasField("teams")&&b.form.removeField("teams");a?b._addTeamField(!0,"useImpersonation"):b._addTeamField(!1,
"useImpersonation")}}),this.existingValues.inheritTeam?this._addTeamField(!0):this._addTeamField(!1));this.form.addField({name:"_impersonationMainInsert",type:"Invisible"});this.form.addField({name:"_rolePropertyInsert",type:"Invisible"});b.typeChanged(b.type);e=!1;this.resource&&this.resource.hasAgent&&this.resource.role&&"AGENT_PLACEHOLDER"!==this.resource.role.specialType?e=!0:this.parent&&this.parent.hasAgent?e=!0:"agent"===this.type||"agentPool"===this.type?e=!0:this.type||(e=!0);e&&(this.form.addField({name:"useImpersonation",
label:i18n("Default Impersonation"),type:"Checkbox",description:i18n("Select this option to define default user impersonation credentials for a resource. Credentials are frequently required by agents on target machines. Typically, credentials are defined on plug-in steps, but any step that does not have its own credentials will use credentials defined on the associated resource."),value:!!this.existingValues.impersonationUser,onChange:function(a){a?b.showImpersonationOptions():b.hideImpersonationOptions()}},
"_impersonationMainInsert"),this.form.addField({name:"_impersonationInsert",type:"Invisible"},"_impersonationMainInsert"),this.form.addField({name:"impersonationLabel",label:"",type:"Label",value:i18n("Default impersonation can be configured here. Any steps which do not specify their own impersonation settings will fall back to the settings provided here.")},"_impersonationMainInsert"),this.existingValues.impersonationUser?this.showImpersonationOptions():this.hideImpersonationOptions());this.form.placeAt(this.formAttach)},
_addTeamField:function(a,b){var c=this,d=[];if(c.existingValues&&c.existingValues.extendedSecurity&&c.existingValues.extendedSecurity.teams)d=c.existingValues.extendedSecurity.teams;c.teamSelector=new q({resourceRoleType:"Resource",noneLabel:i18n("Standard Resource"),readOnly:!!a,teams:d,onChanged:function(a){if(!c.readOnly&&c.form.hasField("dynamic"))a=0===a.length,(c.autoIncludeAgents.widget.disabled=a)&&c.form.setValue("dynamic",!1)}});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",
description:i18n("This field contains the teams that should be able to use this resource."),widget:c.teamSelector},b)},typeChanged:function(a){var b=this;this.form.hasField("agentId")&&this.form.removeField("agentId");this.form.hasField("agentPoolId")&&this.form.removeField("agentPoolId");var c,d=null;if("agent"===a){c=!1;if(this.existingValues.agent)d=this.existingValues.agent.id,this.existingValues.name!==this.existingValues.agent.name&&(c=!0);if(this.selectedValue)d=this.selectedValue.id;b.form.addField({name:"agentId",
label:i18n("Agent"),type:"TableFilterSelect",url:bootstrap.restUrl+"agent",defaultQuery:{filterFields:"requiredActions",filterType_requiredActions:"eq",filterValue_requiredActions:security.agent.createResources},value:d,onChange:function(a,d){if(c&&b.existingValues||d)b.form.removeField("name"),b.form.addField({name:"name",label:i18n("Name"),required:!0,value:c?b.existingValues.name:d.name,type:"Text"},"_typeInsert")}},"_typeInsert")}else if("agentPool"===a){c=!1;if(this.existingValues.agentPool)d=
this.existingValues.agentPool.id,this.existingValues.name!==this.existingValues.agentPool.name&&(c=!0);b.form.addField({name:"agentPoolId",label:i18n("Agent Pool"),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+"agent/pool",allowNone:!1,autoSelectFirst:!0,noDataMessage:i18n("No agent pools found"),value:d,defaultQuery:{outputType:["BASIC","SECURITY"]},onSetItem:function(a,d){if(c&&b.existingValues||d)b.form.hasField("name")&&b.form.removeField("name"),b.form.addField({name:"name",label:i18n("Name"),
required:!0,value:c?b.existingValues.name:d.name,type:"Text"},"_typeInsert")}},"_typeInsert")}else if("component"===a||"role"===a){c=!1;if(this.selectedValue&&(this.existingValues.role=this.selectedValue,this.existingValues.name=this.selectedValue.name,this.selectedValue.parentRole))this.existingValues.parentRole=this.selectedValue.parentRole;if(this.existingValues.role)d=this.existingValues.role.id,this.existingValues.name!==this.existingValues.role.name&&(c=!0),this.createNameWidget(b.getAllowedNamesFromExistingValues(this.existingValues),
c?b.existingValues.name:this.existingValues.role.name),this.showRoleProperties(this.existingValues.role);var e;"component"===a?e=appState.application&&!this.existingValues.name?bootstrap.restUrl+"resource/resourceRole/componentRolesForApplication/"+appState.application.id:bootstrap.restUrl+"resource/resourceRole/componentRoles":"role"===a&&(e=bootstrap.restUrl+"resource/resourceRole");if(this.selectedValue)d=this.selectedValue.id;e=new h({target:e,idAttribute:"id"});d=new n({store:e,searchAttr:"name",
autoComplete:!1,pageSize:10,value:d,readOnly:!!d,onChange:function(a,d){if(c&&b.existingValues||d){b.form.removeField("name");var e=b.getAllowedNamesFromExistingValues(b.existingValues);b.createNameWidget(e,c?b.existingValues.name:d.name);b.showRoleProperties(d)}}});b.form.addField({name:"roleId",label:"component"===a?i18n("Component"):i18n("Role"),required:!0,widget:d},"_typeInsert")}else if("componentTag"===a){c=!1;if(this.existingValues.componentTag)d=this.existingValues.componentTag.id,this.existingValues.name!==
this.existingValues.componentTag.name&&(c=!0);if(this.selectedValue)d=this.selectedValue.id;this.form.addField({name:"componentTagId",label:i18n("Component Tag"),type:"TagDropDown",objectType:"Component",value:d,readOnly:b.readOnly,noneLabel:i18n("All Components"),allowNone:!1,onChange:function(a,d){if(c&&b.existingValues||d)b.form.hasField("name")&&b.form.removeField("name"),b.form.addField({name:"name",label:i18n("Name"),required:!0,value:c?b.existingValues.name:d.name,type:"Text"},"_typeInsert")}},
"_typeInsert")}else if("agentPlaceholder"===a){if(this.form.hasField("name")&&this.form.removeField("name"),!b.existingValues.role||"Agent Placeholder"===b.existingValues.role.name){var f;if(this.existingValues.roleProperties)f=this.existingValues.roleProperties.agentNamePatterns;this.form.addField({name:"agentNamePatterns",label:i18n("Agent Name Patterns"),value:f,type:"TextArea",description:i18n("After an environment is created, the agent prototype will automatically find agents matching these patterns and place them in the prototype's location. One pattern may be entered per line, and use the following special tokens: ${p:application.name}, ${p:environment.name}.")})}}else if(!a)a=
!1,this.existingValues.role&&"DYNAMIC_GROUP"===this.existingValues.role.specialType&&(a=!0),b.autoIncludeAgents=this.form.addField({name:"dynamic",label:i18n("Include Agents Automatically"),type:"Checkbox",description:i18n("When checked, this folder will automatically find agents matching the configured conditions and create resources for them inside the folder. Agents added manually will be removed if they do not match the criteria. Only agents sharing a team with this group will be eligible to belong to the group."),
value:a,onChange:function(a){b.toggleDynamicFields(a)}},"_typeInsert"),b.toggleDynamicFields(a),!a&&b.resource&&b.resource.role&&b.showRoleProperties(b.resource.role)},showImpersonationOptions:function(){this.form.addField({name:"impersonationUser",label:i18n("User"),type:"Text",required:!0,description:i18n("Enter the default impersonation user name."),value:this.existingValues.impersonationUser},"_impersonationInsert");this.form.addField({name:"impersonationPassword",label:i18n("Password"),type:"Secure",
description:i18n("Enter the default impersonation password."),value:this.existingValues.impersonationPassword},"_impersonationInsert");this.form.addField({name:"impersonationGroup",label:i18n("Group"),type:"Text",description:i18n("Enter the authentication realm group to impersonate by default."),value:this.existingValues.impersonationGroup},"_impersonationInsert");this.form.addField({name:"impersonationUseSudo",label:i18n("Use Sudo"),type:"Checkbox",description:i18n("To use the sudo command for impersonation, select the <b>Use Sudo</b> check box. If the resource is on a UNIX or Linux machine, you can use this option. If the resource is on a Windows machine, this option has no effect."),
value:this.existingValues.impersonationUseSudo},"_impersonationInsert");this.form.addField({name:"impersonationForce",label:i18n("Always Use Default Impersonation"),type:"Checkbox",description:i18n("To always use the credentials that are defined on the resource and override any defined on process steps, select the <b>Always Use Default Impersonation</b> option."),value:this.existingValues.impersonationForce},"_impersonationInsert")},hideImpersonationOptions:function(){this.form.removeField("impersonationUser");
this.form.removeField("impersonationPassword");this.form.removeField("impersonationGroup");this.form.removeField("impersonationUseSudo");this.form.removeField("impersonationForce")},showRoleProperties:function(a){this.form.hasField("roleProperties")&&this.form.removeField("roleProperties");this.rolePropertyEditor=new r({role:a,resource:this.resource,doubleWidth:!0});this.form.addField({widget:this.rolePropertyEditor,name:"roleProperties"},"_rolePropertyInsert")},toggleDynamicFields:function(a){var b=
this;a?(b.conditions=[],b.showConditionButton(),b.resource&&b.resource.roleProperties?(a=b.resource.roleProperties.rules)&&j.forEach(c.parse(a),function(a){b.addCondition(a)}):b.addCondition()):(b.form.hasField("conditionButton")&&b.form.removeField("conditionButton"),j.forEach(b.conditions,function(a){b.form.removeField(a)}),b.conditions=[])},showConditionButton:function(){var a=this,b=new k({label:i18n("Add Condition"),onClick:function(){a.addCondition()}});a.form.addField({widget:b,name:"conditionButton",
label:""},"_typeInsert")},addCondition:function(a){var b=this,c=new t({value:a,onDelete:function(){util.removeFromArray(b.conditions,c);b.form.removeField(c)}});this.form.addField({widget:c,name:"condition_"+this.conditions.length,label:""},"conditionButton");this.conditions.push(c)},getAllowedNames:function(a,b){var c=!0,d=[];j.forEach(a,function(a){if(!0===c&&a.name===b)void 0===a.allowedName||null===a.allowedName||""===a.allowedName?(c=!1,d=void 0):d[d.length]=a.allowedName});return d},getAllowedNamesFromExistingValues:function(a){var b=
[];if(a.parentRole){var c=a.parentRole.name;a.role&&a.role.allowedParentResourceRoles&&(b=this.getAllowedNames(a.role.allowedParentResourceRoles,c))}return b},createNameWidget:function(a,b){void 0!==a&&0!==a.length?this.form.addField({allowedValues:a,name:"name",label:i18n("Name"),required:!0,value:b,type:"Select"},"_nameInsert"):this.form.addField({name:"name",label:i18n("Name"),required:!0,value:b,type:"Text"},"_nameInsert")}})})},"deploy/widgets/resource/ResourceRolePropertyEditor":function(){define("dijit/_Templated,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,dojo/on,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return e("deploy.widgets.resource.ResourceRolePropertyEditor",[m,l],{templateString:'<div class="resourceRolePropertyEditor"><div data-dojo-attach-point="titleAttach" class="resourceRolePropertyEditorTitle"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){var a=this,d=new r,e={},j={};this.titleAttach.innerHTML=i18n("Role Properties: %s",a.role.name.escape());var n=bootstrap.restUrl+"resource/resourceRole/"+a.role.id+"/propertiesForTableEditor";
a.resource&&a.resource.id&&(n=bootstrap.restUrl+"resource/resource/"+a.resource.id+"/propertiesForRole/"+a.role.id);var k=[{name:i18n("Property"),orderField:"label",filterField:"label",filterType:"text",getRawValue:function(a){return a.propDef.label},formatter:function(a,b,c){b=document.createElement("div");b.innerHTML=a.propDef.label?a.propDef.label.escape():"";if(a.propDef.required)c.style.fontWeight="bold",a=document.createElement("span"),a.className="required",a.innerHTML="*",b.appendChild(a);
return b}},{name:i18n("Description"),formatter:function(a){return a.propDef.description}},{name:i18n("Value"),formatter:function(b){var f=h.clone(b.propDef);f.value=a.getValueForItem(b);f.defaultLabel=b.propValue?b.propValue.label:b.propDef.defaultLabel;f.onChange=function(a,d){b.value=a;b.label=d.label;var f=e[b.propDef.name],h=j[b.propDef.name];f&&h&&(b.value===b.propDef.value?(c.add(f,"hidden"),c.remove(h,"hidden")):(c.remove(f,"hidden"),c.add(h,"hidden")))};"HTTP_MULTI_SELECT"===f.type&&util.updateWebextMultiSelectData(f,
b,"value","label",!1);return d.delegates.delegates[b.propDef.type](f)}},{name:i18n("Actions"),formatter:function(d){var h=document.createElement("div");if("SECURE"!==d.propDef.type){var n=b.create("a",{innerHTML:i18n("Reset to Default"),"class":"linkPointer"},h);f(n,"click",function(){d.value=d.propDef.value;a.propertyGrid.loadTable()});var k=document.createElement("span");k.innerHTML=i18n("Using Default");h.appendChild(k);e[d.propDef.name]=n;j[d.propDef.name]=k;a.getValueForItem(d)===d.propDef.value?
(c.add(e[d.propDef.name],"hidden"),c.remove(j[d.propDef.name],"hidden")):(c.remove(e[d.propDef.name],"hidden"),c.add(j[d.propDef.name],"hidden"))}return h}}];this.propertyGrid=new q({url:n,serverSideProcessing:!1,tableConfigKey:"resourceRolePropList",noDataMessage:i18n("No properties are available on this role."),columns:k,hideExpandCollapse:!0,hidePagination:!1,style:{minWidth:"650px"}});a.propertyGrid.placeAt(a.gridAttach)},getValueForItem:function(a){var b=a.value;if(void 0===b&&void 0!==a.propValue)b=
a.propValue.value;if(void 0===b)b=a.propDef.value;"MULTI_SELECT"===a.propDef.type&&h.isArray(b)&&(b=b.join(","));return b},_getValueAttr:function(){var a=this,b={};j.forEach(a.propertyGrid.cachedData,function(c){var d=a.getValueForItem(c);b[c.propDef.name]=d;b[c.propDef.name+"/HTTP_SELECT_LABEL"]=c.label});return b},getValidationErrors:function(){var a=this,b=[];j.forEach(a.propertyGrid.cachedData,function(c){!a.getValueForItem(c)&&c.propDef.required&&b.push(i18n("%s is a required field.",c.propDef.label))});
return b}})})},"dijit/_Templated":function(){define("./_WidgetBase,./_TemplatedMixin,./_WidgetsInTemplateMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/kernel".split(","),function(l,m,k,j,e,h,d){h.extend(l,{waiRole:"",waiState:""});return e("dijit._Templated",[m,k],{widgetsInTemplate:!1,constructor:function(){d.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_attachTemplateNodes:function(c,
b){this.inherited(arguments);for(var a=h.isArray(c)?c:c.all||c.getElementsByTagName("*"),d=h.isArray(c)?0:-1;d<a.length;d++){var e=-1==d?c:a[d],k=b(e,"waiRole");k&&e.setAttribute("role",k);(k=b(e,"waiState"))&&j.forEach(k.split(/\s*,\s*/),function(a){-1!=a.indexOf("-")&&(a=a.split("-"),e.setAttribute("aria-"+a[0],a[1]))})}}})})},"deploy/widgets/resource/EditResourceCondition":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/TextBox,dojo/_base/declare,dojo/dom-construct,dojo/dom-style,dojo/on".split(","),
function(l,m,k,j,e,h,d,c){return e([m,l],{templateString:'<div class="edit-resource-condition"><div data-dojo-attach-point="typeAttach" class="inline-block"></div><div data-dojo-attach-point="typeValueAttach" class="inline-block"></div><div data-dojo-attach-point="comparisonAttach" class="inline-block"></div><div data-dojo-attach-point="valueAttach" class="inline-block"></div><div data-dojo-attach-point="deleteAttach" class="inline-block linkPointer"></div></div>',postCreate:function(){this.inherited(arguments);
var b=this;d.set(this.domNode,{height:"26px"});var a=b.get("value");b.typeSelect=new k({options:[{label:i18n("Name"),value:"NAME",selected:"NAME"===a.type},{label:i18n("Property"),value:"PROPERTY",selected:"PROPERTY"===a.type}],onChange:function(a){b.typeValueText&&(b.typeValueText.destroy(),delete b.typeValueText);"TYPE"===a?(b.comparisonSelect&&(b.comparisonSelect.destroy(),delete b.comparisonSelect),b.valueText&&(b.valueText.destroy(),delete b.valueText),b._createResourceTypeSelect(a)):b.resourceTypeSelect&&
(b.resourceTypeSelect.destroy(),delete b.resourceTypeSelect,b._createComparisonSelect(a),b._createValueText(a));"PROPERTY"===a&&b._createTypeValueText()}});b.typeSelect.placeAt(b.typeAttach);"PROPERTY"===a.type&&b._createTypeValueText();b._createComparisonSelect(a);b._createValueText(a);a=h.create("div",{className:"iconMinus",style:{position:"relative",top:"5px"}},b.deleteAttach);c(a,"click",function(){if(b.onDelete)b.onDelete()})},validate:function(){var b=[],a=this.get("value");"PROPERTY"===a.type&&
!a.typeValue&&b.push(i18n("A property name must be specified."));a.value||b.push(i18n("A comparison value must be specified."));return b},_getValueAttr:function(){var b=this.value||{type:"NAME",comparison:"EQUALS",typeValue:"",value:""};this.value=b;if(this.typeSelect)b.type=this.typeSelect.get("value");if(this.typeValueText)b.typeValue=this.typeValueText.get("value");if(this.comparisonSelect)b.comparison=this.comparisonSelect.get("value");else if("TYPE"===b.type)b.comparison="EQUALS";if(this.valueText)b.value=
this.valueText.get("value");if(this.resourceTypeSelect)b.value=this.resourceTypeSelect.get("value");if("NAME"===b.type)b.typeValue="";return b},_setValueAttr:function(b){this.value=b},_createTypeValueText:function(){var b=this.get("value");this.typeValueText=new j({value:b.typeValue});this.typeValueText.domNode.style.width="60px";this.typeValueText.placeAt(this.typeValueAttach)},_createComparisonSelect:function(b){this.comparisonSelect=new k({options:[{label:i18n("Equals"),value:"EQUALS",selected:"EQUALS"===
b.comparison},{label:i18n("Doesn't Equal"),value:"NOT_EQUALS",selected:"NOT_EQUALS"===b.comparison},{label:i18n("Contains"),value:"CONTAINS",selected:"CONTAINS"===b.comparison},{label:i18n("Doesn't Contain"),value:"NOT_CONTAINS",selected:"NOT_CONTAINS"===b.comparison},{label:i18n("Matches Regex"),value:"REGEX",selected:"REGEX"===b.comparison}]});this.comparisonSelect.placeAt(this.comparisonAttach)},_createValueText:function(b){this.valueText=new j({value:b.value});this.valueText.domNode.style.width=
"100px";this.valueText.placeAt(this.valueAttach)}})})},"deploy/widgets/resourceTemplate/EditResourceTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,deploy/widgets/security/TeamSelector,dijit/form/CheckBox,dojo/_base/array".split(","),function(l,m,k,j,e,h,d,c,b){return k([m,l],{templateString:'<div class="editResourceTemplate">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,
postCreate:function(){this.inherited(arguments);var a=this;a.editRootResourceTeams=!0;this.readOnly=!1;if(this.resourceTemplate)this.readOnly=!this.resourceTemplate.security["Edit Basic Settings"];this.existingValues={};if(this.resourceTemplate)this.existingValues=this.resourceTemplate;else{if(this.sourceResource)this.existingValues.name=this.sourceResource.name;j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Resource Template",handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity=
{teams:b}}})}this.form=new e({submitUrl:bootstrap.restUrl+"resource/resourceTemplate",readOnly:a.readOnly,showButtons:!a.readOnly,postSubmit:function(b){void 0!==a.callback&&a.callback(b)},addData:function(b){b.teamMappings=a.teamSelector.teams;if(a.resourceTemplate)b.existingId=a.existingValues.id;else if(a.editRootResourceTeams&&!a.form.fields.rootTeamInheritToggle.widget.checked)b.rootTeamMappings=a.rootTeamSelector.teams;if(a.sourceResource)b.sourceResourceId=a.sourceResource.id},onError:function(a){a.responseText&&
new h({message:util.escape(a.responseText)})},onCancel:function(){void 0!==a.callback&&a.callback()},cancelLabel:a.showCancel?i18n("Cancel"):null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});if(this.existingValues.parent||!this.existingValues.id){var b={};if(this.application)b.forApplication=this.application.id;this.form.addField({name:"parentId",
label:i18n("Parent Template"),description:i18n("A resource template can use another existing template as its parent. If a parent is selected, all resources in the parent template will be inherited by the child, but the child template can still add additional resources as an overlay to the parent template. The parent cannot be changed after creating a resource template."),type:"TableFilterSelect",url:bootstrap.restUrl+"resource/resourceTemplate/couldBeParent",defaultQuery:b,readOnly:!!this.existingValues.id,
value:this.existingValues.parent?this.existingValues.parent.id:void 0,onChange:function(){a.editRootResourceTeams=!1;a.form.hasField("rootTeams")&&a.form.removeField("rootTeams");a.form.hasField("rootTeamsCopy")&&a.form.removeField("rootTeamsCopy");a.form.hasField("rootTeamInheritToggle")&&a.form.removeField("rootTeamInheritToggle")}})}this.application&&this.form.addField({name:"applicationId",type:"Invisible",value:this.application.id});b=[];if(a.existingValues&&a.existingValues.extendedSecurity&&
a.existingValues.extendedSecurity.teams)b=a.existingValues.extendedSecurity.teams;this.teamSelector=new d({resourceRoleType:"Resource Template",noneLabel:i18n("Standard Resource Template"),teams:b,onChanged:function(b){!a.resourceTemplate&&a.editRootResourceTeams&&a.form.fields.rootTeamInheritToggle&&a.form.fields.rootTeamInheritToggle.widget.checked&&a.attachRootTeamSelector(!0,a.getSelectedTeams(b))}});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",description:i18n("In the <b>Teams</b> field, add the teams that should be able to use the new resource template."),
widget:this.teamSelector});this.resourceTemplate||(this.form.addField({name:"rootTeamInheritToggle",label:i18n("Copy Teams to Root Resource"),type:"checkBox",value:!0,description:i18n("This option makes the root resource available to the same teams as the resource template."),onChange:function(){a.attachRootTeamSelector(this.checked)}}),a.attachRootTeamSelector(!0));this.form.placeAt(this.formAttach)},attachRootTeamSelector:function(a,b){this.form.hasField("rootTeams")&&this.form.removeField("rootTeams");
this.form.hasField("rootTeamsCopy")&&this.form.removeField("rootTeamsCopy");var c=[];if(a)c=b?b:this.getSelectedTeams(this.teamSelector.teams),this.readOnlyRootTeamSelector=new d({resourceRoleType:"Resource",noneLabel:i18n("Standard Resource"),teams:c,readOnly:!0});else if(!this.rootTeamSelector)this.rootTeamSelector=new d({resourceRoleType:"Resource",noneLabel:i18n("Standard Resource"),teams:c,readOnly:!1});this.form.addField({name:a?"rootTeamsCopy":"rootTeams",label:i18n("Root Resource Teams"),
type:"Text",description:i18n("In the <b>Root Resource Teams</b> field, add the teams that should be able to use the root resource of this resource template."),widget:a?this.readOnlyRootTeamSelector:this.rootTeamSelector})},getSelectedTeams:function(a){var c=this;if(!c.teamSelector.teamSelect)return c.teamSelector.selectedTeams;var d=[];b.forEach(c.teamSelector.teamSelect.data,function(e){b.forEach(a,function(a){c.teamSelector.matchResourceRoleIds(e.teamId,a.teamId)&&d.push(e)})});return d}})})},"deploy/widgets/resourceTemplate/ApplyResourceTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d){return j([m,l],{templateString:'<div class="applyResourceTemplate">  <div data-dojo-attach-point="formAttach"></div></div>',createNew:!1,postCreate:function(){this.inherited(arguments);var c=this;this.form=new h({submitUrl:this.createNew?bootstrap.restUrl+"resource/resource/addFromTemplate":bootstrap.restUrl+"resource/resource/applyTemplate",postSubmit:function(b){void 0!==c.callback&&c.callback(b)},addData:function(b){b.targetResourceId=c.resource.id},onError:function(b){b.responseText&&
new d({message:util.escape(b.responseText)})},onCancel:function(){void 0!==c.callback&&c.callback()}});this.extraPropNames=[];this.createNew&&this.form.addField({name:"name",label:i18n("New Resource Name"),description:i18n("The name of the new resource to be created based on the template."),type:"Text",required:!0});this.form.addField({name:"resourceTemplateId",label:i18n("Resource Template"),description:i18n("Choose the resource template to apply to this resource. Any resources which exist in the template will be copied to the resource which the template is applied to."),
type:"TableFilterSelect",required:!0,url:bootstrap.restUrl+"resource/resourceTemplate/couldBeParent",onChange:function(b){k.forEach(c.extraPropNames,function(a){c.form.removeField(a)});c.extraPropNames=[];b&&(c.form.block(),e.get({url:bootstrap.restUrl+"resource/resourceTemplate/"+b,handleAs:"json",load:function(a){c.form.unblock();k.forEach(a.propDefs,function(a){a.name="p_"+a.name;c.form.addField(a);c.extraPropNames.push(a.name)})},error:function(a){c.form.unblock();new d({message:util.escape(a.responseText)})}}))}});
this.form.placeAt(this.formAttach)}})})},"deploy/widgets/rightPanel/ResourceRightPanelContainer":function(){define("dijit/_Widget,dojo/_base/declare,deploy/widgets/rightPanel/RightPanelAgents,deploy/widgets/rightPanel/RightPanelAgentsWithNoResource,deploy/widgets/rightPanel/RightPanelComponents,deploy/widgets/rightPanel/RightPanelResourceRoles,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/on,dijit/form/Button,js/webext/widgets/form/MenuButton".split(","),function(l,m,k,j,e,h,d,c,b,a,f,
n){return m("deploy.widgets.resource.ResourceRightPanelContainer",[l],{attachPoint:null,buttonAttachPoint:null,parent:null,postCreate:function(){this.inherited(arguments);this._buildHideButton();this.buildPanels()},_buildShowButton:function(a){this.showButton=new n({options:a,label:i18n("Show")});d.add(this.showButton.domNode,"idxButtonCompact");this.buttonAttachPoint&&this.showButton.placeAt(this.buttonAttachPoint);this._buildHideButton()},_buildHideButton:function(){var b=this;this.hideButton?this.buttonAttachPoint&&
(a(this.hideButton,"click",function(a){b.current.hide(a.shiftKey)}),this.hideButton.placeAt(this.buttonAttachPoint)):(this.hideButton=new f({label:i18n("Hide Panel")}),d.add(this.hideButton.domNode,"idxButtonCompact"))},buildPanels:function(){var c=this,f=this.parent,n=f?f.blueprint:null,o=[];this.panel={};var n={parent:f,blueprint:n,attachPoint:c.parent.panelAttach,onShow:function(){this.loaded||this.loadTable();c.parent&&c.parent.domNode&&setTimeout(function(){d.add(c.parent.domNode,"table-show-right-panel")},
10);d.remove(c.hideButton.domNode,"hidden")},onHide:function(){c.parent&&c.parent.domNode&&d.remove(c.parent.domNode,"table-show-right-panel");d.add(c.hideButton.domNode,"hidden")}},l=function(a,b){c.panel[b]=a;o.push({label:i18n(a.header),onClick:function(b){a.show(b.shiftKey);c.current&&c.current!==a&&c.current.hide(b.shiftKey||0);d.remove(c.hideButton.domNode,"hidden");c.current=a}})};if(f.resource&&!f.resource.hasAgent||d.contains(f.domNode,"all-resources")||f.environment)l(new k(n),"agent"),
l(new j(n),"agentnoresource");var m=Object.create(n),w=null;if(f.environment&&f.environment.application)m.url=bootstrap.restUrl+"resource/resourceRole/componentRolesForApplication/"+f.environment.application.id,w=f.environment.application;else if(f.application)w=f.application;if(w&&w.id)m.url=bootstrap.restUrl+"resource/resourceRole/componentRolesForApplication/"+w.id;l(new e(m),"component");l(new h(n),"resourceroles");this._buildShowButton(o);window&&c.parent.domNode&&a(window,"scroll",function(){if(c.current&&
!c.current.isHidden())try{var a=b.position(c.parent.domNode);a&&14>a.y?d.contains(c.parent.panelAttach,"right-panel-top")||d.add(c.parent.panelAttach,"right-panel-top"):d.contains(c.parent.panelAttach,"right-panel-top")&&d.remove(c.parent.panelAttach,"right-panel-top")}catch(e){}})}})})},"deploy/widgets/rightPanel/RightPanelAgents":function(){define("dojo/_base/declare,dojo/_base/array,deploy/widgets/rightPanel/ResourceRightPanel,dojo/dom-class,dojo/dom-construct,dijit/form/TextBox,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b){return l("deploy.widgets.resource.RightPanelAgents",[k],{header:i18n("Agents"),subheader:i18n("Drag and drop agents into resources"),url:bootstrap.restUrl+"agent/",getColumns:function(){var a=this;return[{name:i18n("Name"),formatter:function(b,h,j){j.style.positon="relative";h=d.agentLinkFormatter(b);e.place(d.createIcon("agentIcon"),h,"first");a.tagger=new c({objectType:"Agent",item:b,callback:function(){a.rightPanel.grid.refresh()}});a.tagger.placeAt(h);return h},orderField:"name",
filterField:"name",filterType:"custom",getRawValue:function(a){return a.name},getFilterFields:function(){var a=new h({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Agent Name"),type:"like"}),c=new b({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"like"});return[a,c]}},{name:i18n("Status"),orderField:"status",filterField:"status",filterType:"select",filterOptions:[{label:i18n("Online"),value:"ONLINE"},{label:i18n("Offline"),value:"OFFLINE"},{label:i18n("Connecting"),
value:"CONNECTING"}],getRawValue:function(a){return a.status},formatter:d.agentStatusFormatter},{name:i18n("Version"),field:"version"}]},onDrop:function(a){var b=this,c=this.parent.target;m.forEach(a,function(a){var d=c;d&&(d="agent"!==c.type&&"agent pool"!==c.type&&!c.role);d?b.submitData("agent",c,a,b.optionsSwitch.value):b.table.refresh()})}})})},"deploy/widgets/rightPanel/ResourceRightPanel":function(){define("dojo/_base/declare,dojo/_base/array,deploy/widgets/rightPanel/RightPanel,deploy/widgets/resource/EditResource,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/dom-geometry,dojo/on,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,js/webext/widgets/Switch,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return l("deploy.widgets.resource.ResourceRightPanel",[k],{url:null,showSwitch:!0,postCreate:function(){this.inherited(arguments);this._buildPanel();this.attachPoint&&this.placeAt(this.attachPoint)},getColumns:function(){},refresh:function(){this.table&&this.table.refresh()},loadTable:function(){var a=this;if(this.url)this.table=(new r({url:a.url,baseFilters:a.baseFilters,serverSideProcessing:!0,orderField:"name",noDataMessage:a.noDataMessage||i18n("No resources found."),
tableConfigKey:"rightPanelList",selectorField:"id",columns:a.getColumns(),hideExpandCollapse:!0,hidePagination:!1,selectable:a.selectable||!1,draggable:a.onDrop?!0:!1,copyOnly:!0,suppressDefaultOnDrop:!0,onDrop:function(b,c,d){setTimeout(function(){a.onDrop(b,c,d)},100)},onDisplayTable:function(){a.table.dndContainer.checkAcceptance=function(){return!1};a.loaded=!0;a.content=a.table.domNode}})).placeAt(this.contentAttach);this.showSwitch&&this.showOptionsBox()},showOptionsBox:function(){this.titleContent=
d.create("div",{className:"show-drop-options"});this.optionsSwitch=(new n({labelText:"string"===typeof this.showSwitch?this.showSwitch:i18n("Show options on drop"),labelPlacement:"before",value:!1})).placeAt(this.titleContentAttach)},onDrop:function(){},submitData:function(b,c,d,e,h){var k=this;if(e){var n=new a({title:i18n("Create Resource"),closable:!0,draggable:!0});(new j({parent:c,type:b,callback:function(){n.hide();n.destroy();k.parent.grid.refreshRowChildrenForItem(c)},existingData:h,selectedValue:d})).placeAt(n.containerNode);
n.show()}else e=new f({submitUrl:bootstrap.restUrl+"resource/resource",readOnly:k.readOnly,postSubmit:function(){if(k.parent&&k.parent.grid){var a=null;m.forEach(k.parent.grid.rowObjectList,function(b){if(b.item&&b.item.id===c.id)a=b.item});k.parent.grid.refreshRowChildrenForItem(a)}},addData:function(a){if(h)for(var b in h)h.hasOwnProperty(b)&&(a[b]=h[b]);if(c)a.parentId=c.id;if(k.blueprint&&k.blueprint.id)a.blueprintId=k.blueprint.id},onCancel:function(){void 0!==k.callback&&k.callback()}}),e.addField({name:"name",
value:d.name,type:"Invisible"}),e.addField({name:b+"Id",value:d.id,type:"Invisible"}),e.submitForm()}})})},"deploy/widgets/rightPanel/RightPanel":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/fx,dojo/fx,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/dom-geometry,dojo/on,dijit/Tooltip".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return k("deploy.widgets.rightPanel.RightPanel",[m,l],{templateString:'<div class="right-panel"><div class="panel-header"><div class="panel-close-button icon-Icon_close__brand-01_2x inlineBlock linkPointer" data-dojo-attach-point="closeAttach" title="'+
i18n("Hide Panel")+'"></div><div class="rightPanel-tooltipTitle"><span class="containerLabel title-text" data-dojo-attach-point="titleAttach"></span><div data-dojo-attach-point="tooltip" class="labelsAndValues-helpCell title-helpCell inlineBlock"></div></div><div class="panel-subtitle" data-dojo-attach-point="subtitleAttach"></div><div class="panel-title-contents inlineBlock" data-dojo-attach-point="titleContentAttach"></div><div class="clear"></div></div><div class="panel-content" data-dojo-attach-point="contentAttach"></div></div>',
header:"",subheader:"",description:null,width:500,titleContent:null,content:null,panelHidden:!0,defaultSpeed:180,slowSpeed:1E3,postCreate:function(){this.inherited(arguments);this._buildPanel()},_buildPanel:function(){var b=this;this.titleAttach.innerHTML=this.header;this.subtitleAttach.innerHTML=this.subheader;this.description?(new f({connectId:[this.tooltip],label:this.description,showDelay:100,position:["after","above","below","before"]}),h.remove(this.tooltip,"tooltipHidden")):h.add(this.tooltip,
"tooltipHidden");this.titleContent&&c.place(this.titleContent,this.titleContentAttach);this.content&&c.place(this.content,this.contentAttach);this.contentClass&&h.add(this.contentAttach,this.contentClass);a(this.closeAttach,"click",function(a){b.panelHidden||b.hide(a.shiftKey)});this.panelHidden=!1;this.display?this.domNode.style.width=this.width+"px":(h.add(b.domNode,"hidden"),this.hide(0))},setHeader:function(a){this.titleAttach.innerHTML=a},setSubheader:function(a){this.subtitleAttach.innerHTML=
a},setContent:function(a){c.place(a,this.contentAttach)},show:function(a){if(this.panelHidden){this.panelHidden=!1;a=a||this.defaultSpeed;if("boolean"===typeof a)a=this.slowSpeed;h.remove(this.domNode,"hidden");e.slideTo({node:this.domNode,top:0,left:(b.getMarginBox(this.domNode).l-(this.width-100)).toString(),unit:"px",duration:a}).play();j.animateProperty({node:this.domNode,properties:{width:this.width},duration:a}).play();this.onShow(a)}else this.onShow()},onShow:function(){},hide:function(a){var c=
this;if(!this.panelHidden){this.panelHidden=!0;a=a||c.defaultSpeed;if("boolean"===typeof a)a=this.slowSpeed;e.slideTo({node:this.domNode,top:0,left:(b.getMarginBox(c.domNode).l+(c.width-100)).toString(),unit:"px",duration:a}).play();j.animateProperty({node:this.domNode,properties:{width:0},duration:a}).play();setTimeout(function(){h.add(c.domNode,"hidden")},a);c.onHide(a)}},onHide:function(){},placeAt:function(a){c.place(this.domNode,a)},isHidden:function(){return this.panelHidden}})})},"deploy/widgets/rightPanel/RightPanelAgentsWithNoResource":function(){define(["dojo/_base/declare",
"deploy/widgets/rightPanel/RightPanelAgents"],function(l,m){return l("deploy.widgets.resource.RightPanelAgentsWithNoResource",[m],{header:i18n("Agents With No Resource"),subheader:i18n("Drag and drop agents into resources"),url:bootstrap.restUrl+"agent/noResource"})})},"deploy/widgets/rightPanel/RightPanelComponents":function(){define("dojo/_base/declare,dojo/_base/array,deploy/widgets/rightPanel/ResourceRightPanel,dojo/dom-class,dojo/dom-construct,dijit/form/TextBox,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/Alert,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l("deploy.widgets.resource.RightPanelComponents",[k],{header:i18n("Components"),subheader:i18n("Drag and drop components into agents"),url:bootstrap.restUrl+"resource/resourceRole/componentRoles",selectable:!0,getColumns:function(){return[{name:i18n("Name"),formatter:function(a,b,c){c.style.positon="relative";a=e.create("span",{innerHTML:a.name.escape()});e.place(d.createIcon("componentIcon"),a,"first");return a},orderField:"name",filterField:"name",filterType:"text"}]},
onDrop:function(b){var c=this,d=this.parent.target;m.forEach(b,function(b){var e=d;e&&(e=d.hasAgent||d.resourceTemplate);e?c.submitData(c.optionsSwitch.value?"component":"role",d,b,c.optionsSwitch.value):new a({message:i18n("Invalid component resource location")})})}})})},"deploy/widgets/rightPanel/RightPanelResourceRoles":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,deploy/widgets/rightPanel/ResourceRightPanel,dojo/dom-class,dojo/dom-construct,dijit/form/TextBox,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return l("deploy.widgets.resource.RightPanelResourceRoles",[j],{header:i18n("Resource Roles"),subheader:i18n("Drag and drop new resource roles under existing resources"),url:bootstrap.restUrl+"resource/resourceRole/",postCreate:function(){this.baseFilters=[{name:"specialType",type:"null"}];this.inherited(arguments)},getColumns:function(){return[{name:i18n("Name"),formatter:function(a,b,d){d.style.positon="relative";b=h.create("div",{innerHTML:a.name.escape()});a=
c.getResourceIcon({role:a});h.place(a,b,"first");return b},orderField:"name",filterField:"name",filterType:"text"},{name:i18n("Description"),field:"description"}]},onDrop:function(a){var b=this,c=this.parent.target,d=b.parent.grid._getRowObjectForItem(c),e=b.parent.getLowestParentRole(d);m.forEach(a,function(a){if(c&&(c.hasAgent||c.resourceTemplate))if(b.optionsSwitch.value)a.parentRole=e,b.submitData("role",c,a,b.optionsSwitch.value);else if(a.propDefs){var d=new n({title:i18n("Create New Resource"),
closable:!0,draggable:!0}),h=new f({onSubmit:function(e){var f=e.name;a.defaultNameProperty&&(f=e[a.defaultNameProperty]);b.submitData("role",c,a,!1,{roleProperties:e,name:f});d.hide();d.destroy()},onCancel:function(){d.hide();d.destroy()}});h.placeAt(d.containerNode);var j;e&&(j=b.getAllowedNames(a.allowedParentResourceRoles,e.name));a.defaultNameProperty||b.createNameWidget(j,i18n(a.name),h);m.forEach(a.propDefs,function(b){var c=k.clone(b);c.translate=!0;if(b.name===a.defaultNameProperty&&(c.required=
!0,void 0!==j&&0!==j.length))c.type="Select",c.allowedValues=j;h.addField(c)});d.show()}else b.submitData("role",c,a,!1)})},getAllowedNames:function(a,b){var c=!0,d=[];m.forEach(a,function(a){if(!0===c&&a.name===b)void 0===a.allowedName||null===a.allowedName||""===a.allowedName?(c=!1,d=void 0):d[d.length]=a.allowedName});return d},createNameWidget:function(a,b,c){void 0!==a&&0!==a.length?c.addField({allowedValues:a,name:"name",label:i18n("Resource Name"),required:!0,value:b,type:"Select"}):c.addField({name:"name",
label:i18n("Resource Name"),required:!0,value:b,type:"Text"})}})})},"deploy/widgets/resource/ResourceCompareSelectorDialog":function(){define("dijit/_Widget,dojo/_base/xhr,js/webext/widgets/Dialog,js/webext/widgets/RadioButtonGroup,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,dojo/_base/declare,deploy/widgets/resource/ResourceSelector".split(","),function(l,m,k,j,e,h,d,c){return d([l],{dialog:void 0,resource:void 0,resourceTemplate:void 0,postCreate:function(){this.inherited(arguments)},show:function(){var b=
this;b.resourceTemplate?m.get({url:bootstrap.restUrl+"resource/resourceTemplate/"+b.resourceTemplate.id+"/root",handleAs:"json",load:function(a){b.resource=a;b.setup()},error:function(a){new h({message:util.escape(a.responseText)})}}):b.setup()},setup:function(){var b=this;b.dialog=new k({title:i18n("Compare Resources"),closable:!0,draggable:!0});var a=new j({name:"compareType",options:[{label:i18n("Compare With Resource Template"),value:!0},{label:i18n("Compare With Resource"),value:!1}],disabled:!1,
enabled:!0,onChange:function(d){a.destroy();var h=new e({onSubmit:function(a){b.dialog.hide();b.dialog.destroy();var c="",c=b.resourceTemplate?"/resourceTemplate/"+b.resourceTemplate.id:"/resource/"+b.resource.id,e="",e=d?"/resourceTemplate/"+a.resourceTemplateId:"/resource/"+a.targetResource;navBar.setHash("resourceComparison"+c+e)},onCancel:function(){b.dialog.hide();b.dialog.destroy()}});if(d)h.addField({name:"resourceTemplateId",label:i18n("Resource Template"),description:i18n("Choose the resource template to compare to this resource. This will compare the root resource in the template to the current resource."),
type:"TableFilterSelect",url:bootstrap.restUrl+"resource/resourceTemplate",required:!0});else{var j=new c({url:bootstrap.restUrl+"resource/resource/tree",isSelectable:function(a){var c=b.resource.path,d=c.lastIndexOf("/"),d=0===(c.substring(0,d)+"/").indexOf(a.path+"/"),e=0===a.path.indexOf(c+"/");return c!==a.path&&!e&&!d}});h.addField({name:"targetResource",label:i18n("Target Resource"),widget:j,required:!0})}h.placeAt(b.dialog.containerNode)}});a.placeAt(b.dialog.containerNode);b.dialog.show()}})})},
"deploy/widgets/configuration/Changelog":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-geometry,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b,a){return j("deploy.widgets.configuration.Changelog",[m,l],{templateString:'<div class="changelog"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this,
j=[{name:i18n("Commit ID"),field:"commitId",orderField:"commitId",getRawValue:function(a){return a.commitId}},{name:i18n("User"),field:"committer",orderField:"committer",filterField:"committer",filterType:"text",getRawValue:function(a){return a.committer}},{name:i18n("Date"),field:"commitTime",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(a){return new Date(a.commitTime)}},{name:i18n("Changes"),formatter:function(a){var j=d.create("div");k.forEach(a.friendlyPathsModified,
function(k){var o=k.path;k.persistent&&"PropSheet"===k.persistent.className&&(o=i18n(o));o=d.create("div",{innerHTML:i18n("%s v.%s",util.escape(o),k.version)},j);k.persistent&&"PropSheet"===k.persistent.className&&(o=d.create("a",{innerHTML:i18n("(Changes)"),style:h.isBodyLtr()?{marginLeft:"5px"}:{marginRight:"5px"},"class":"linkPointer actionsLink"},o),c(o,"click",function(){e.get({url:bootstrap.baseUrl+"property/propSheet/"+util.vc.encodeVersionedPath(k.persistent.path+"#"+(a.commitId-1))+"/compare/"+
util.vc.encodeVersionedPath(k.persistent.path+"#"+a.commitId),handleAs:"json",load:function(a){b.showPropertyChanges(a)}})}))});k.forEach(a.friendlyPathsDeleted,function(a){d.create("div",{innerHTML:i18n("(Deleted) %s",util.escape(a.path))},j)});return j}}];this.grid=new a({url:this.url,serverSideProcessing:!1,columns:j,orderField:"date",sortType:"desc",tableConfigKey:"changelogList",noDataMessage:i18n("No changes found.")});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()},showPropertyChanges:function(c){var d=new b({width:800});(new a({style:{minWidth:"450px"},hidePrintLink:!0,data:c,serverSideProcessing:!1,tableConfigKey:"changelogList",noDataMessage:i18n("No changes found."),columns:[{name:i18n("Name"),field:"name"},{name:i18n("Before"),formatter:function(a){var b="";if(a.value)b=a.value.value;return b}},{name:i18n("After"),formatter:function(a){var b="";if(a.otherValue)b=a.otherValue.value;return b}}]})).placeAt(d.containerNode);d.show()}})})},
"deploy/widgets/component/EditComponent":function(){define("dijit/_TemplatedMixin,dijit/_Widget,js/util/blocker/_BlockerMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom,dojo/dom-class,dojo/store/Memory,deploy/widgets/firstDayWizard/FirstDayWizardUtil,dijit/form/ComboBox,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,js/webext/widgets/Alert,deploy/widgets/security/TeamSelector".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return e("deploy.widgets.component.EditComponent",
[m,l,k],{templateString:'<div class="editComponent">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){var b=this;b.block();b.inherited(arguments);b.existingValues={useVfs:config.data.systemConfiguration.copyToCodestation};if(b.component){if(b.existingValues=b.component,b.existingValues.componentType=b.component.componentType,b.component.sourceConfigPlugin)b.existingValues.sourceConfigPluginName=b.component.sourceConfigPlugin.name}else if(b.source){h.get({url:bootstrap.restUrl+
"deploy/component/"+b.source.id,handleAs:"json",sync:!0,load:function(a){b.source=a}});b.existingValues=b.source;b.existingValues.name=void 0;if(b.source.sourceConfigPlugin)b.existingValues.sourceConfigPluginName=b.source.sourceConfigPlugin.name;if(b.source.template)b.existingValues.templateId=b.source.template.id}else h.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Component",handleAs:"json",sync:!0,load:function(a){b.existingValues.extendedSecurity={teams:a}}});if(b.componentTemplate)b.existingValues.template=
b.componentTemplate;var c=b.existingValues.template;b.sourceConfigPropertyNames=[];b.templatePropertyNames=[];b.templatePropertyPatterns=[];b.versionImportPropertyNames=[];b.form=new n({submitUrl:bootstrap.restUrl+"deploy/component",readOnly:b.readOnly,showButtons:!b.readOnly&&"firstDayWizard"!==b.mode,postSubmit:function(a){b.noRedirect||navBar.setHash("component/"+a.id);void 0!==b.callback&&b.callback(a)},addData:function(a){if(b.component)a.existingId=b.component.id;if(b.source){a.copyId=b.source.id;
if(b.source.componentTemplate)a.templateId=b.source.componentTemplate.id;if(b.source.template)a.templateId=b.source.template.id}a.properties={};j.forEach(b.sourceConfigPropertyNames,function(b){void 0!==a[b]?(a.properties[b]=a[b],delete a[b]):a.properties[b]=""});a.importProperties={properties:{}};j.forEach(b.versionImportPropertyNames,function(b){if(void 0!==a[b]){var c=b.indexOf("/")+1,c=b.substring(c);a.importProperties.properties[c]=a[b]}else a.importProperties.properties[b]=""});a.teamMappings=
b.teamSelector.teams},onError:function(a){a.responseText&&new t({message:util.escape(a.responseText)})},onCancel:function(){void 0!==b.callback&&b.callback()},validateFields:function(a){var c=[];j.forEach(b.templatePropertyNames,function(d){var e=b.templatePropertyNames[d],d=b.templatePropertyPatterns[d],f=a[e];d&&f&&(b.validatePattern(f,d)||c.push(i18n("Value for property %s does not follow the required Pattern",e)))});return c},cancelLabel:b.showCancel?i18n("Cancel"):null});b.form.addField({name:"name",
label:i18n("Name"),required:!0,type:"Text",value:b.existingValues.name,onChange:function(a){"firstDayWizard"===b.mode&&b.firstDayWizardModel.set("pre_setComponentName",{component:b.component,newName:a})}});b.form.addField({name:"description",label:i18n("Description"),type:"Text",value:b.existingValues.description});var d=[];if(b.existingValues&&b.existingValues.extendedSecurity&&b.existingValues.extendedSecurity.teams)d=b.existingValues.extendedSecurity.teams;b.teamSelector=new q({resourceRoleType:"Component",
noneLabel:i18n("Standard Component"),teams:d});"firstDayWizard"!==b.mode&&b.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:b.teamSelector});"firstDayWizard"===b.mode&&b.form.addField({name:"advancedConfig",label:i18n("Advanced Configuration"),type:"Checkbox",value:b.existingValues.advancedConfig,onChange:b._showOrHideAdvancedConfigurationAsSpecified.bind(b)});b.form.addField({name:"_templateInsert",type:"Invisible"});b.form.addField({name:"_componentTypeInsert",type:"Invisible"});
b.form.addField({name:"_templateProperties",type:"Invisible"});b.addComponentTypeField();b.form.addField({name:"_sourceProperties",type:"Invisible"});b.form.addField({name:"_sourceStandardProperties",type:"Invisible"});b.form.addField({name:"_integrationProperties",type:"Invisible"});b.form.addField({name:"_cleanupSettingsHeader",type:"SectionLabel",value:i18n("Cleanup Configuration")});b.form.addField({name:"_cleanupSettings",type:"Invisible"});b.addSourcePropertiesHeader();var d=config.data.permissions[security.system.createComponents],
e=config.data.permissions[security.system.createComponentsFromTemplate],f=b.component&&b.component.template||b.componentTemplate;(!b.component&&!b.componentTemplate&&!b.source||!f)&&e?"firstDayWizard"===b.mode?b.showStatusOrTemplateVersionFields():(c=function(){return!0},b.requireTemplateTag&&(c=function(a){return a.tags.some(function(a){return a.id===b.requireTemplateTag.id})}),c=new r({restUrl:bootstrap.restUrl+"deploy/componentTemplate",value:b.existingValues.templateId,isValid:c,onChange:function(a,
c){b.showStatusOrTemplateVersionFields(c)}}),b.form.addField({name:"templateId",label:i18n("Component Template"),description:i18n("The template to use for this component."),required:!d||!!b.requireTemplateTag,widget:c},"_templateInsert")):f?(b.form.addField({name:"templateName",label:i18n("Template"),description:i18n("The template to use for this component."),readOnly:!0,type:"Text",value:c?c.name:"None"},"_templateInsert"),b.showStatusOrTemplateVersionFields(c)):b.showStatusOrTemplateVersionFields();
d=!b.existingValues.cleanupDaysToKeep&&!b.existingValues.cleanupCountToKeep;b.form.addField({name:"inheritSystemCleanup",label:i18n("Inherit Cleanup Settings"),description:i18n("Determines how many component versions are kept in CodeStation and how long they are kept. If selected, the component uses the values on the System Settings pane. If cleared, the Days to Keep Versions and Number of Versions to Keep fields are displayed. Initially, both fields are set to -1, which means keep indefinitely, and keep all."),
type:"Checkbox",onChange:function(c){c?b.form.hasField("cleanupDaysToKeep")&&(b.form.removeField("cleanupDaysToKeep"),b.form.removeField("cleanupCountToKeep")):b.showCleanupFields();"firstDayWizard"===b.mode&&a.boldLabelsOfRequiredFields()},value:d},"_cleanupSettings");d||b.showCleanupFields();"firstDayWizard"===b.mode&&b._showOrHideAdvancedConfigurationAsSpecified();b.form.placeAt(b.formAttach)},_showAdvancedConfiguration:function(){this.form.fieldsArray.forEach(function(a){c.remove(a.widget.fieldRow,
"hidden")})},_hideAdvancedConfiguration:function(){var a=["name","description","teams","advancedConfig"];this.form.fieldsArray.forEach(function(b){-1<a.indexOf(b.name)||c.add(b.widget.fieldRow,"hidden")})},_showOrHideAdvancedConfigurationAsSpecified:function(){this.form&&this.form.fields.advancedConfig&&(this.form.fields.advancedConfig.widget.get("value")?this._showAdvancedConfiguration():this._hideAdvancedConfiguration())},showStatusOrTemplateVersionFields:function(a){var b=this;b.form.hasField("templateVersion")&&
b.form.removeField("templateVersion");if(a){var c=new r({restUrl:b.component?bootstrap.restUrl+"deploy/component/"+b.component.id+"/componentTemplateVersions":bootstrap.restUrl+"deploy/componentTemplate/"+a.id+"/versions",getLabel:function(a){return a.version+" - "+util.dateFormatShort(a.commit.commitTime)},getValue:function(a){return a.version},noneLabel:i18n("Always Use Latest"),value:-1===this.existingValues.templateVersion?null:this.existingValues.templateVersion,onChange:function(c,d){d?b.selectTemplate(d):
b.selectTemplate(a)}});this.form.addField({name:"templateVersion",label:i18n("Template Version"),description:i18n("The version of the template to use for this component."),widget:c},"_templateInsert")}else b.selectTemplate()},selectTemplate:function(a){var b=this;j.forEach(b.sourceConfigPropertyNames,function(a){b.form.removeField(a)});b.sourceConfigPropertyNames=[];b.form.hasField("sourceConfigPlugin")&&(b.form.removeField("sourceConfigPlugin"),b.form.removeField("importAutomatically"),b.form.removeField("useVfs"),
b.form.removeField("defaultVersionType"),b.form.removeField("runVersionCreationProcess"),b.form.removeField("importAgentType"));b.form.hasField("ignoreQualifiers")&&b.form.removeField("ignoreQualifiers");j.forEach(b.templatePropertyNames,function(a){b.form.removeField(a)});b.templatePropertyNames=[];b.addSourcePropertiesHeader();a?h.get({url:b.component?bootstrap.restUrl+"deploy/component/"+b.component.id+"/componentTemplate/"+a.version:bootstrap.restUrl+"deploy/componentTemplate/"+a.id+"/"+a.version,
handleAs:"json",load:function(c){a=c;b.showTemplatePropDefs(a);a.componentType?(b.existingValues.componentType=a.componentType,b.existingValues.ignoreQualifiers=a.ignoreQualifiers,b.showComponentTypeSpecificFields(a)):b.unblock()}}):b.showComponentTypeSpecificFields(a)},showComponentTypeSpecificFields:function(a){this.addComponentTypeField(!!a);this.showSourceConfigProperties(a);"ZOS"===this.existingValues.componentType&&(this.removeSourceConfigPropertiesForZos(),this.showIgnoreQualifiers(a),this.addInvisibleIncrementalVersionTypeField())},
showSourceConfigProperties:function(b){var c=this,d=null;if(this.existingValues.sourceConfigPlugin)d=this.existingValues.sourceConfigPlugin.id;if("firstDayWizard"===this.mode&&this.existingValues.sourceConfigPlugin)d=this.existingValues.sourceConfigPlugin;if(b&&b.sourceConfigPlugin)d=b.sourceConfigPlugin.id;this.form.addField({name:"sourceConfigPlugin",type:"TableFilterSelect",label:i18n("Source Configuration Type"),url:bootstrap.restUrl+"plugin/sourceConfigPlugin",description:i18n("The source configuration plugin to use for this component."),
idProperty:function(a){return a.name},value:d,readOnly:!!b&&!!b.sourceConfigPluginName,allowNone:!0,defaultQuery:{outputType:["BASIC","LINKED","EXTENDED"]},onChange:function(d,e){j.forEach(c.sourceConfigPropertyNames,function(a){c.form.removeField(a)});c.sourceConfigPropertyNames=[];if(e){var f=e.componentPropSheetDef.name;j.forEach(e.componentPropDefs,function(a){var d=!1;if(b&&b.sourceConfigProperties){var e=util.getNamedProperty(b.sourceConfigProperties,a.name);if(e)a.value=e.value,d=!0}if(c.existingValues.properties&&
!d&&(d=util.getNamedProperty(c.existingValues.properties,f+"/"+a.name)))a.value=d.value;if("firstDayWizard"===c.mode&&c.existingValues.properties&&(d=c.existingValues.properties[f+"/"+a.name]))a.value=d;d=util.clone(a);e=f+"/"+a.name;d.name=e;d.translate=!0;c.sourceConfigPropertyNames.push(e);if(b)if(b.sourceConfigProperties){if(util.getNamedProperty(b.sourceConfigProperties,a.name))d.readOnly=!0}else if(c.existingValues.templateSourceProperties&&util.getNamedProperty(c.existingValues.templateSourceProperties,
a.name))d.readOnly=!0;if(-1<d.label.indexOf("URL")||-1<d.label.indexOf(" Url"))d.textDir="ltr";else if(-1<d.label.indexOf("Vob Location")||-1<d.label.indexOf("Path"))d.textDir="ltr";c.form.addField(d,"_sourceProperties")});c.addVersionImportFields(e.importPropSheetDef,e.importPropDefs,e.componentPropDefs)}c.unblock();"firstDayWizard"===c.mode&&(a.boldLabelsOfRequiredFields(),c._showOrHideAdvancedConfigurationAsSpecified())},onFilterResult:function(a){var b=[];"ZOS"===c.form.getValue("componentType")?
j.forEach(a,function(a){/^[zZ][oO][sS]/.test(a.name)&&b.push(a)}):b=a;return b},onSetItem:function(){c.unblock()}},"_sourceProperties");d="inherit";this.existingValues.integrationTag?d="tag":this.existingValues.integrationAgent&&(d="agent");this.form.addField({name:"importAgentType",type:"Radio",label:"",value:d,allowedValues:[{label:i18n("Use the system's default version import agent/tag."),value:"inherit"},{label:i18n("Import new component versions using a single agent."),value:"agent"},{label:i18n("Import new component versions using any agent with the specified tag."),
value:"tag"}],onChange:function(a){c.removeIntegrationTagField();c.removeIntegrationAgentField();"tag"===a?c.addIntegrationTagField():"agent"===a&&c.addIntegrationAgentField()}},"_integrationProperties");"tag"===d?this.addIntegrationTagField():"agent"===d&&this.addIntegrationAgentField();this.form.addField({name:"importAutomatically",label:i18n("Import Versions Automatically"),description:i18n("If this is checked, the configured version source will be polled periodically for new versions."),type:"Checkbox",
value:this.existingValues.importAutomatically},"_sourceStandardProperties");this.form.addField({name:"useVfs",label:i18n("Copy to CodeStation"),description:i18n("If this is checked, artifacts will be copied from the given source into the server's CodeStation repository, from which they can be retrieved during deployments."),type:"Checkbox",value:this.existingValues.useVfs},"_sourceStandardProperties");this.form.addField({name:"defaultVersionType",label:i18n("Default Version Type"),description:i18n("The type of versions to create by default on version imports."),
required:!0,type:"Select",allowedValues:[{label:i18n("Full"),value:"FULL"},{label:i18n("Incremental"),value:"INCREMENTAL"}],value:this.existingValues.defaultVersionType},"_sourceStandardProperties");"firstDayWizard"!==this.mode&&this.form.addField({name:"runVersionCreationProcess",label:i18n("Run Process after a Version is Created"),type:"Checkbox",value:!!this.existingValues.versionCreationProcessId,onChange:function(a){a?c.showProcessOptions():c.hideProcessOptions()}});this.form.addField({name:"_versionCreationProcessInsert",
type:"Invisible"});this.existingValues.versionCreationProcessId?this.showProcessOptions():this.hideProcessOptions();c.unblock()},showIgnoreQualifiers:function(a){this.form.addField({name:"ignoreQualifiers",label:i18n("High Level Qualifier Length"),required:!1,readOnly:!!a,type:"Text",textDir:"ltr",value:!this.existingValues.ignoreQualifiers?"0":this.existingValues.ignoreQualifiers},"_componentTypeInsert")},showTemplatePropDefs:function(a){var b=this;j.forEach(a.propDefs,function(a){var c=util.clone(a);
c.name="template/"+a.name;a.pattern&&(c.description+=i18n(" Required Pattern: %s",util.escape(a.pattern)));util.populatePropValueAndLabel(b.existingValues.properties,c);b.form.addField(c,"_templateProperties");b.templatePropertyNames.push(c.name);b.templatePropertyPatterns.push(c.pattern)})},showCleanupFields:function(){var a=this.existingValues.cleanupDaysToKeep,b=this.existingValues.cleanupCountToKeep;if(0===a&&0===b)a=this.existingValues.systemCleanupDaysToKeep,b=this.existingValues.systemCleanupCountToKeep;
this.form.addField({name:"cleanupDaysToKeep",label:i18n("Days to Keep Versions"),description:i18n("Number of days to keep component versions. -1 will keep indefinitely."),value:a,required:!0,textDir:"ltr",type:"Text"},"_cleanupSettings");this.form.addField({name:"cleanupCountToKeep",label:i18n("Number of Versions to Keep"),description:i18n("Number of versions to keep for each component. -1 will keep all."),value:b,required:!0,textDir:"ltr",type:"Text"},"_cleanupSettings")},showProcessOptions:function(){var a=
new r({restUrl:bootstrap.restUrl+"deploy/application/processes/forComponent/"+this.existingValues.id,getLabel:function(a){return a.application.name+" - "+a.name},value:this.existingValues.versionCreationProcessId});this.form.addField({name:"versionCreationProcessId",label:i18n("Application Process"),widget:a,required:!0},"_versionCreationProcessInsert");a=new r({restUrl:bootstrap.restUrl+"deploy/application/environments/forComponent/"+this.existingValues.id,getLabel:function(a){return a.application.name+
" - "+a.name},value:this.existingValues.versionCreationEnvironmentId});this.form.addField({name:"versionCreationEnvironmentId",label:i18n("Environment"),widget:a,required:!0},"_versionCreationProcessInsert")},hideProcessOptions:function(){this.form.hasField("versionCreationProcessId")&&this.form.removeField("versionCreationProcessId");this.form.hasField("versionCreationEnvironmentId")&&this.form.removeField("versionCreationEnvironmentId")},validatePattern:function(a,b){var c=!0;RegExp(b).exec(a)||
(c=!1);return c},addIntegrationAgentField:function(){var a;if(this.existingValues.integrationAgent)a=this.existingValues.integrationAgent.id;this.form.addField({name:"integrationAgent",label:i18n("Agent for Version Imports"),description:i18n("The agent to use for version imports on this component"),type:"FilteringSelect",url:bootstrap.restUrl+"agent",defaultQuery:{filterFields:"requiredActions",filterType_requiredActions:"eq",filterValue_requiredActions:security.agent.manageVersionImports},value:a},
"_integrationProperties")},addIntegrationTagField:function(){var a="";if(this.existingValues.integrationTag&&this.existingValues.integrationTag.name)a=this.existingValues.integrationTag.name;var c=[];h.get({url:bootstrap.restUrl+"tag/type/Agent",sync:!0,handleAs:"json",load:function(a){c=a}});var d=new b({data:c}),a=new f({store:d,searchAttr:"name",value:a,noDataMessage:i18n("No tags found."),autoComplete:!1,selectOnClick:!0,pageSize:"10"});this.form.addField({name:"integrationTag",label:i18n("Agent Tag for Version Imports"),
widget:a,description:i18n("The tag to use for version imports on this component")},"_integrationProperties")},removeIntegrationAgentField:function(){this.form.removeField("integrationAgent")},removeIntegrationTagField:function(){this.form.removeField("integrationTag")},addSourcePropertiesHeader:function(){this.form.hasField("_sourcePropertiesHeader")||this.form.addField({name:"_sourcePropertiesHeader",type:"SectionLabel",value:i18n("Version Source Configuration")},"_sourceProperties")},removeIgnoreQualifiers:function(){this.form.removeField("ignoreQualifiers")},
removeSourcePropertiesHeader:function(){this.form.removeField("_sourcePropertiesHeader")},removeSourceConfigProperties:function(){this.form.removeField("sourceConfigPlugin");this.form.removeField("importAutomatically");this.form.removeField("useVfs");this.form.removeField("defaultVersionType");this.form.removeField("runVersionCreationProcess");this.form.removeField("importAgentType")},removeSourceConfigPropertiesForZos:function(){this.form.removeField("importAutomatically");this.form.removeField("useVfs");
this.form.removeField("defaultVersionType")},removeSourceConfigFields:function(){var a=this.sourceConfigPropertyNames.length,b;for(b=0;b<a;b++)this.form.removeField(this.sourceConfigPropertyNames[b]);this.sourceConfigPropertyNames=[]},addInvisibleIncrementalVersionTypeField:function(){this.form.addField({name:"defaultVersionType",type:"Invisible",value:"INCREMENTAL"})},addComponentTypeField:function(a){var b=this;this.form.hasField("componentType")&&this.form.removeField("componentType");this.form.addField({name:"componentType",
label:i18n("Component Type"),description:i18n("The Type of Component."),type:"Select",allowedValues:[{label:i18n("Standard"),value:"STANDARD"},{label:i18n("z/OS"),value:"ZOS"}],value:b.existingValues.componentType,readOnly:!!a,onChange:function(a){b.existingValues.componentType=a;b.removeSourceConfigProperties();b.removeSourceConfigFields();"ZOS"===a?(b.showSourceConfigProperties(),b.removeSourceConfigPropertiesForZos(),b.showIgnoreQualifiers(),b.addInvisibleIncrementalVersionTypeField()):(b.removeIgnoreQualifiers(),
b.showSourceConfigProperties())}},"_componentTypeInsert")},addVersionImportHeader:function(){this.form.addField({name:"_versionImportHeader",type:"SectionLabel",value:i18n("Version Import")})},addVersionImportFields:function(a,b){var c=this;if("firstDayWizard"===this.mode){c.form.removeField("_versionImportHeader");j.forEach(c.versionImportPropertyNames,function(a){c.form.removeField(a)});c.versionImportPropertyNames=[];var d=a.name;0<b.length&&(this.addVersionImportHeader(),j.forEach(b,function(a){var b=
util.clone(a);if("Name"===b.label)b.label="Version Name";a=d+"/"+a.name;b.name=a;b.translate=!0;c.versionImportPropertyNames.push(a);if(c.existingValues&&(a=c.existingValues[a]))b.value=a;c.form.addField(b)}))}}})})},"deploy/widgets/firstDayWizard/FirstDayWizardUtil":function(){define(["dojo/_base/array","dojo/query","dojo/dom-attr","dojo/dom-style"],function(l,m,k,j){return{navigateToAndHideCurrentTab:function(e){var h="#main/"+navBar.recentHash;navBar.setHash("main/"+e);l.forEach(dojo.query(".topLevelTabs .tab"),
function(d){k.get(d,"href")===h&&j.set(d,"display","none")})},navigateAndShowTab:function(e){var h="#main/"+e;l.forEach(dojo.query(".topLevelTabs .tab"),function(d){k.get(d,"href")===h&&j.set(d,"display","")});navBar.setHash("main/"+e)},navigateToFirstDisplayedTab:function(){var e=l.filter(dojo.query(".topLevelTabs .tab"),function(e){return"none"!==j.get(e,"display")});e&&0<e.length&&(e=k.get(e[0],"href"),navBar.setHash(e))},hideMainTab:function(e){var h="#main/"+e;l.forEach(dojo.query(".topLevelTabs .tab"),
function(d){k.get(d,"href")===h&&j.set(d,"display","none")})},boldLabelsOfRequiredFields:function(){m(".labelsAndValues-labelCell .required").forEach(function(e){j.set(e.parentNode,"font-weight","bold")})}}})},"deploy/widgets/component/VersionHistoryManager":function(){define("dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-construct,dojo/on,deploy/widgets/component/VersionHistory,js/webext/widgets/TwoPaneListManager".split(","),function(l,m,k,j,e,h,d){return l("deploy.widgets.component.VersionHistoryManager",
[d],{postCreate:function(){this.inherited(arguments);var c=this;m.get({url:bootstrap.restUrl+"deploy/component/"+c.component.id+"/applications",handleAs:"json",load:function(b){k.forEach(b,function(a){c.addEntry({id:a.id,label:a.name.escape(),action:function(){c.showApplications(a)}})})}})},showApplications:function(c){var b=document.createElement("div");b.className="containerLabel";b.style.padding="10px";b.innerHTML=c.name.escape();this.detailAttach.appendChild(b);c=new h({application:c,component:this.component});
c.placeAt(this.detailAttach);this.registerDetailWidget(c)}})})},"deploy/widgets/component/VersionHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/_base/Color,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/on,dojo/has,dojo/mouse,deploy/widgets/Popup,js/webext/widgets/color/Color".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j([m,l],{templateString:'<div class="version-history-calendar"><div class="inlineBlock version-calendar"><div data-dojo-attach-point="keyAttach" class="version-calendar-key"></div><div data-dojo-attach-point="titleAttach" class="version-calendar-title"></div><div data-dojo-attach-point="buttonAttach" class="version-calendar-buttons"></div><div data-dojo-attach-point="headerAttach" class="version-calendar-header"></div><div data-dojo-attach-point="calendarAttach" class="version-calendar-contents"></div><div data-dojo-attach-point="calendarBlocker" class="version-calendar-right-blocker"></div></div></div>',
postCreate:function(){this.dayWidth=3.13;this.versionHeight=26;this.environmentHeight=46;this.environmentsExpandedState={};this.today=this._getBeginningOfDay(new Date);this.showKey();this._createCalendar()},showKey:function(){c.create("div",{className:"version-calendar-key-label inlineBlock",innerHTML:i18n("Key: ")},this.keyAttach);c.create("div",{className:"version-calendar-version current-version inlineBlock",innerHTML:i18n("Environment Inventory for Component")},this.keyAttach)},_createCalendar:function(e){var f=
this;c.empty(this.buttonAttach);c.empty(this.headerAttach);c.empty(this.calendarAttach);this.environmentRows=[];var h=c.create("div",{className:"calendar-control-container"},this.buttonAttach),j=c.create("div",{className:"calendar-button-container"},h);a(j,n.leave,function(){f.down=!1});var k=e||this.today,l=c.create("div",{className:"inlineBlock linkPointer no-double-click-select calendar-arrow back-month",innerHTML:'<div class="inlineBlock arrow back-arrow"></div><div class="inlineBlock arrow back-arrow"></div>',
title:i18n("Move back 1 month")},j);a(l,"mousedown",function(){f._createCalendar(util.shiftMonths(k,-1))});l=c.create("div",{className:"inlineBlock linkPointer no-double-click-select calendar-arrow back-day",innerHTML:'<div class="inlineBlock arrow back-arrow"></div>',title:i18n("Move back 1 day")},j);a(l,"mousedown",function(){f.firstHold=!1;f.down=-1;f._createCalendar(util.shiftDays(k,-1))});a(l,"mouseup",function(){f.down=!1});a(l,n.leave,function(){f.down=!1});l=c.create("div",{className:"inlineBlock linkPointer no-double-click-select calendar-arrow forward-day",
innerHTML:'<div class="inlineBlock arrow forward-arrow"></div>',title:i18n("Move forward 1 day")},j);a(l,"mousedown",function(){f.firstHold=!1;f.down=1;f._createCalendar(util.shiftDays(k,1))});a(l,"mouseup",function(){f.down=!1});a(l,n.leave,function(){f.down=!1});j=c.create("div",{className:"inlineBlock linkPointer no-double-click-select calendar-arrow forward-month",innerHTML:'<div class="inlineBlock arrow forward-arrow"></div><div class="inlineBlock arrow forward-arrow"></div>',title:i18n("Move forward 1 month")},
j);a(j,"mousedown",function(){f._createCalendar(util.shiftMonths(k,1))});h=c.create("a",{className:"inlineBlock linkPointer today-link",innerHTML:i18n("Today"),title:i18n("Bring current day into view")},h);a(h,"click",function(){f._createCalendar(f.today)});h=c.create("div",{className:"no-double-click-select calendar-expander"},this.buttonAttach);j=c.create("a",{className:"inlineBlock linkPointer environment-expander",innerHTML:i18n("Expand All"),title:i18n("Expand All Environment Rows")},h);a(j,
"click",function(){f._expandCollapseAllRows(!0)});h=c.create("a",{className:"inlineBlock linkPointer environment-expander",innerHTML:i18n("Collapse All"),title:i18n("Collapse All Environment Rows")},h);a(h,"click",function(){f._expandCollapseAllRows()});h=util.shiftDays(this.today,-28);j=util.shiftDays(h,32);e&&(h=util.shiftDays(e,-28),j=util.shiftDays(h,32));this.loadEnvironments(h,j);this.showDateHeaders(h,32);if(this.down){h=60;if(!this.firstHold)h=300,this.firstHold=!0;setTimeout(function(){f.down&&
f._createCalendar(util.shiftDays(e,f.down))},h)}window&&a(window,"scroll",function(){try{var a=b.position(f.domNode);a&&22>a.y?d.contains(f.buttonAttach,"calendar-fixed-control")||d.add(f.buttonAttach,"calendar-fixed-control"):d.contains(f.buttonAttach,"calendar-fixed-control")&&d.remove(f.buttonAttach,"calendar-fixed-control")}catch(c){}})},_setCalendarHeight:function(){var a=80;k.forEach(this.environmentRows,function(c){a+=b.getMarginBox(c).h});450>a&&(a=450);this.headerAttach.style.height=a+"px"},
loadEnvironments:function(a,b){var c=this;this.versions?c._showEnvironments(a,b):e.get({url:bootstrap.restUrl+"deploy/application/"+c.application.id+"/versionHistory/"+c.component.id,handleAs:"json",load:function(d){c.versions=d;c._showEnvironments(a,b)}})},_showEnvironments:function(a,b){var c=this;k.forEach(this.versions,function(d){c._createEnvironmentRow(d,a,b)});c._setCalendarHeight()},_createEnvironmentRow:function(b,d,e){var j=this;this.count=0;var n=t.getColorOrConvert(b.color||"#d3d3d3");
!n.standard&&n.fallback&&(n=t.getColor(n.fallback));var l=n.value,n=(new h("#ffffff"===l?"#d3d3d3":l)).toRgb(),m=c.create("div");9>f("ie")?(n=(new h(n)).toHex().substring(1),m=c.create("div",{className:"version-calendar-row",style:{filter:"progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#4c"+n+"', endColorstr='#4c"+n+"')"}},j.calendarAttach)):m=c.create("div",{className:"version-calendar-row",style:{background:"rgba("+n+", 0.20)"}},j.calendarAttach);this._setExpandEnvironmentRow(m,
b.id);this.environmentRows.push(m);this.environmentsExpandedState[b.id]||(this.environmentsExpandedState[b.id]="environment-expanded");n=b.name;18<n.length&&(n=n.substring(0,18)+"...");var r=c.create("div",{className:"version-calendar-environment inlineBlock",title:b.name},m);c.create("div",{className:"inlineBlock linkPointer environment-expander"},r);a(r,"click",function(){j._toggleExpandEnvironmentRow(m,b.id)});c.create("div",{className:"inlineBlock linkPointer color-box",style:{backgroundColor:l}},
r);c.create("div",{className:"inlineBlock environment-name",title:b.name,innerHTML:n.escape(),style:{color:l,backgroundColor:j.getTextBackgroundColor(l)}},r);k.forEach(b.history,function(a){var b="",c=null;k.forEach(a.history,function(f){var h=new Date(f.start),k=new Date(f.end);if(h<=e&&(k>=d||0===f.end))c?(b="same-version",(new Date(c.start)).getDate()===h.getDate()&&(b+=" same-day")):c=f,j._createVersionBar(d,e,a,f,m,l,b)})})},_toggleExpandEnvironmentRow:function(a,b){this.environmentsExpandedState[b]?
(d.remove(a,"environment-expanded"),d.remove(a,"environment-collapsed"),"environment-expanded"===this.environmentsExpandedState[b]?(this.environmentsExpandedState[b]="environment-collapsed",d.add(a,"environment-collapsed")):(this.environmentsExpandedState[b]="environment-expanded",d.add(a,"environment-expanded"))):d.contains(a,"environment-expanded")?(d.remove(a,"environment-expanded"),d.add(a,"environment-collapsed")):(d.remove(a,"environment-expanded"),d.remove(a,"environment-collapsed"),d.add(a,
"environment-expanded"));this._setCalendarHeight()},_expandCollapseAllRows:function(a){k.forEach(this.environmentRows,function(b){d.remove(b,"environment-expanded");d.remove(b,"environment-collapsed");a?d.add(b,"environment-expanded"):d.add(b,"environment-collapsed")});var b="";for(b in this.environmentsExpandedState)this.environmentsExpandedState.hasOwnProperty(b)&&(this.environmentsExpandedState[b]=a?"environment-expanded":"environment-collapsed");this._setCalendarHeight()},_setExpandEnvironmentRow:function(a,
b){this.environmentsExpandedState[b]?"environment-expanded"===this.environmentsExpandedState[b]?d.add(a,"environment-expanded"):d.add(a,"environment-collapsed"):d.add(a,"environment-expanded")},_createVersionBar:function(a,b,d,e,h,j,k){var n=new Date(e.start),l=this.today;0!==e.end?l=new Date(e.end):k+=" current-version";if(!(l<a||n>b)){a>n&&(n=a);b<l&&(l=b);var n=this._getBeginningOfDay(n),l=this._getBeginningOfDay(l),m=Math.round(Math.abs((n.getTime()-l.getTime())/864E5))+1,a=Math.round(Math.abs((a.getTime()-
n.getTime())/864E5));b<=l&&m--;b=this.getShade(j);l=this.isDarkColor(j);n=null;if(f("safari")||8>f("ie")){n=0;for(c.create("div",{},h);n<a;n++)c.create("div",{className:"inlineBlock",style:{width:this.dayWidth+"%"}},h);n=c.create("div",{className:"inlineBlock version-calendar-version"+(l?" dark-color-environment":"")+" "+k,innerHTML:d.name.escape(),style:{marginLeft:"0",width:m*this.dayWidth+"%",backgroundColor:j}},h)}else n=c.create("div",{className:"version-calendar-version"+(l?" dark-color-environment":
"")+" "+k,innerHTML:d.name.escape(),style:{marginLeft:a*this.dayWidth+"%",width:m*this.dayWidth+"%",backgroundColor:j}},h);if(9>f("ie"))n.style.outline="1px solid "+("#ffffff"===j?"#D3D3D3":b);d=this._createVersionPopupContainer(d,e);new r({attachPoint:n,contents:d})}},_createVersionPopupContainer:function(a,b){var d=c.create("div",{className:"calendar-popup"}),e=a.name.escape();c.create("div",{innerHTML:e},d);e=c.create("div",{},d);c.create("div",{className:"inlineBlock version-date-label",innerHTML:i18n("Start Date:")},
e);c.create("div",{className:"inlineBlock",innerHTML:util.dateOnlyFormat(new Date(b.start),"M/d/yyyy hh:mm a")},e);e=c.create("div",{},d);c.create("div",{className:"inlineBlock version-date-label",innerHTML:i18n("End Date:")},e);var f=i18n("Currently Deployed");0!==b.end&&(f=util.dateOnlyFormat(new Date(b.end),"M/d/yyyy hh:mm a"));c.create("div",{className:"inlineBlock",innerHTML:f},e);return d},showDateHeaders:function(a,b){for(var e=a,f=null,h=0,j="Calendar",k=!1,n,l;h<b;)f="",this.today.getMonth()===
e.getMonth()&&this.today.getDate()===e.getDate()&&this.today.getYear()===e.getYear()?(f=" current-day",k=!0):k&&(f=" tomorrow-day",k=!1),n=c.create("div",{className:"version-date-column inlineBlock"+f},this.headerAttach),c.create("div",{className:"version-date-label",innerHTML:util.dateOnlyFormat(e,"EEE")},n),c.create("div",{className:"version-date-number",innerHTML:e.getDate()},n),f=c.create("div",{className:"version-date-contents"},n),c.create("div",{className:"version-date-number bottom-date-number",
innerHTML:e.getDate()},n),c.create("div",{className:"version-date-label bottom-date-label",innerHTML:util.dateOnlyFormat(e,"EEE")},n),l=!1,j!==util.dateOnlyFormat(e,"MMMM yyyy")&&(l=!0),j=util.dateOnlyFormat(e,"MMMM yyyy"),l&&(l=c.create("div",{className:"version-date-month-header"},n),c.create("div",{className:"version-date-month",innerHTML:j},l),d.add(n,"current-month")),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1),h++;if(f)f.style.borderRightWidth="2px"},_getBeginningOfDay:function(a){a.setHours(0);
a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},isDarkColor:function(a){a=(new h(a)).toRgb();return 0.25<1-(0.25*a[0]+0.6*a[1]+0.1*a[2])/255},getTextBackgroundColor:function(a){var b=(new h(a)).toRgb(),c="";200<(300*b[0]+580*b[1]+110*b[2])/1E3&&(c=this.getTint(a,0.82));return c},getTint:function(a,b){return this._alterColor(a,b||1.2)},getShade:function(a,b){return this._alterColor(a,b||0.6)},_alterColor:function(a,b){var c=(new h(a)).toRgb(),d=[];k.forEach(c,function(a){d.push(b*a)});
return h.fromArray(d).toHex()}})})},"deploy/widgets/Popup":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dijit/_Widget,dijit/_TemplatedMixin,dojo/on,dojo/mouse,dojo/dom-geometry,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/has,dijit/place".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return l("deploy.widgets.Popup",[j,e],{templateString:'<div class="mouse-over-popup hidden"><div class="popup-pointer" data-dojo-attach-point="pointerAttach"></div><div class="popup-container" data-dojo-attach-point="popupAttach"><div class="popup-contents" data-dojo-attach-point="containerAttach"></div></div></div>',
attachPoint:void 0,hoverPoint:void 0,clickPoint:null,hoverPointExit:null,contents:null,align:"center",popupShow:d.enter,popupHide:d.leave,textAlign:"center",postCreate:function(){this.inherited(arguments);var c=this;this.contents&&a.place(c.contents,c.containerAttach);this.autoWidth||b.add(this.popupAttach,"fixed-popup-width");f.set(this.popupAttach,"textAlign",this.textAlign);if(this.attachPoint){a.place(this.domNode,this.attachPoint);if(this.popupShow)this.showPopup=h(this.hoverPoint||this.attachPoint,
this.popupShow,function(){c._remarginAttachPoints();c.show()});this.popupHide&&h(this.hoverPointExit||this.hoverPoint||this.attachPoint,this.popupHide,function(){c.hide()})}},movePointer:function(a){this._setElementLeftMargin(this.pointerAttach,a)},movePopup:function(a){this._setElementLeftMargin(this.popupAttach,a)},show:function(){this.popupHide=!1;b.remove(this.domNode,"hidden");b.add(this.domNode,"popup-show");var a=c.position(this.domNode).w||null;a&&(a-=this.popupAttach.value)&&this.movePopup(this.popupAttach.value-
a/2);this.postShow()},postShow:function(){},externalShow:function(){this._remarginAttachPoints();this.show()},hide:function(){this.popupHide=!0;b.remove(this.domNode,"popup-show");b.add(this.domNode,"hidden");this.postHide()},postHide:function(){},destroy:function(){a.destroy(this.domNode);this.showPopup=null},_remarginAttachPoints:function(){var a=c.position(this.attachPoint).w||null;if(a)a/=2,this.popupAttach.value=a,this.movePopup(a),this.movePointer(a-20)},_setElementLeftMargin:function(a,b){n("mozilla")||
n("ff")?a.style.marginLeft=b+"px":f.set(a,"margin-left",b+"px")}})})},"deploy/widgets/component/ComponentVersions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,deploy/widgets/version/VersionCompare,deploy/widgets/component/ComponentSourceConfigHistory,deploy/widgets/filter/TagFilter,deploy/widgets/tag/TagDisplay".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){return h("deploy.widgets.component.ComponentVersions",[m,l],{templateString:'<div class="versions"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div><hr><div data-dojo-attach-point="runningIntegrationTitleAttach" class="containerLabel"></div><div data-dojo-attach-point="runningIntegrationAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var d=this,f=bootstrap.restUrl+"deploy/version",h=[{name:i18n("Version"),formatter:n.versionLinkFormatter,orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Statuses"),formatter:function(a){var c=b.create("div",{"class":"inlineBlock",style:"margin-right:78px;"});if(a.statuses)(new x({readOnly:!0,tags:a.statuses})).placeAt(c);else return"";return c},filterField:"statuses",filterType:"custom",getFilterFields:function(){return[new v({name:"statuses",
"class":"filter",style:{width:"80%"},placeHolder:i18n("Statuses"),type:"eq"})]},getRawValue:function(a){var b=null;if(a.latestStatus)b=a.latestStatus.name;return b}},{name:i18n("Type"),formatter:this.typeFormatter,orderField:"type",filterField:"type",filterType:"select",filterOptions:[{label:i18n("Full"),value:"FULL"},{label:i18n("Incremental"),value:"INCREMENTAL"}],getRawValue:function(a){return a.type}},{name:i18n("Created By"),field:"creator",orderField:"user.name"},{name:i18n("Date"),field:"created",
formatter:util.tableDateFormatter,orderField:"dateCreated",getRawValue:function(a){return new Date(a.created)}},{name:i18n("Description"),field:"description"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new s({url:f,serverSideProcessing:!0,columns:h,orderField:"dateCreated",sortType:"desc",tableConfigKey:"componentVersionList",noDataMessage:i18n("No versions found."),hidePagination:!1,hideExpandCollapse:!0,queryData:{outputType:["BASIC","LINKED"]},baseFilters:[{name:"component.id",
type:"eq",className:"UUID",values:[appState.component.id]},{name:"active",type:"eq",className:"Boolean",values:[!0]}]});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks)(new j({checked:!1,value:"true",onChange:function(a){a?d.grid.baseFilters=e.filter(d.grid.baseFilters,function(a){return"active"!==a.name}):d.grid.baseFilters.push({name:"active",type:"eq",values:[!0],className:"Boolean"});d.grid.refresh()}})).placeAt(this.activeBoxAttach),f=document.createElement("div"),
c.add(f,"inlineBlock"),f.style.position="relative",f.style.top="2px",f.style.left="2px",f.innerHTML=i18n("Show Inactive Versions"),this.activeBoxAttach.appendChild(f);if(appState.component.extendedSecurity[security.component.manageVersions]&&appState.component.sourceConfigPlugin&&(f=new k({label:i18n("Import New Versions"),showTitle:!1,onClick:function(){d.importVersions()}}),c.add(f.domNode,"idxButtonSpecial"),f.placeAt(this.buttonAttach),!1===appState.component.sourceConfigPluginNameMatchesPlugin))f.disabled=
!0,a.set(f.domNode,"display","none");d.showRunningIntegrations();d.injectExtraRefreshLogic()},injectExtraRefreshLogic:function(){var a=this;this.compSourceHistory.grid.oldRefresh=this.compSourceHistory.grid.refresh;this.grid.oldRefresh=this.grid.refresh;this.refreshAll=function(){a.compSourceHistory.grid.oldRefresh();a.grid.oldRefresh()};this.compSourceHistory.grid.refresh=this.refreshAll;this.grid.refresh=this.refreshAll},destroy:function(){this.inherited(arguments);this.grid.destroy()},typeFormatter:function(a){var b=
"";"FULL"===a.type?b=i18n("Full"):"INCREMENTAL"===a.type&&(b=i18n("Incremental"));return b},actionsFormatter:function(a){var c=this.parentWidget,d=document.createElement("div"),e=b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Compare")},d);f(e,"click",function(){c.compareVersion(a)});appState.component.extendedSecurity[security.component.manageVersions]&&(e=b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},d),f(e,"click",function(){c.confirmDeletion(a)}),e=
b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},d),f(e,"click",function(){c.copyDialog(a)}));return d},copyDialog:function(a){var b=this,c=new q({title:i18n("Copy"),closable:!0,draggable:!0}),d=new t({submitUrl:bootstrap.restUrl+"deploy/version",preSubmit:function(){b.grid.block()},postSubmit:function(){b.grid.unblock();c.hide();c.destroy();b.grid.refresh()},addData:function(b){b.copyId=a.id},onError:function(a){b.grid.unblock();(new r({message:i18n("Error copying version: %s",
util.escape(a.responseText))})).startup()},onCancel:function(){c.hide();c.destroy()}});d.addField({name:"name",label:i18n("Name"),required:!0,type:"Text"});d.addField({name:"description",label:i18n("Description"),required:!1,type:"Text"});d.placeAt(c.containerNode);c.show()},confirmDeletion:function(a){var b=this;new o({message:i18n("Are you sure you want to delete version %s?",a.name),action:function(){b.grid.block();d.del({url:bootstrap.restUrl+"deploy/version/"+a.id,handleAs:"json",load:function(a){b.grid.unblock();
a.passed?b.grid.refresh():b.showDeleteViolationDialog(a)},error:function(a){b.grid.unblock();new r({message:util.escape(a.responseText)});b.grid.refresh()}})}})},compareVersion:function(a){var b=new q({title:i18n("Compare Versions"),closable:!0,draggable:!0,heightPercent:75,widthPercent:75,destroyOnHide:!0});(new u({version:a})).placeAt(b.containerNode);b.show()},showDeleteViolationDialog:function(a){var b=document.createElement("div"),d=document.createElement("div");d.style.width="200px";c.add(d,
"inlineBlock");d.innerHTML=i18n("This version cannot be deleted because it is in use by the following:");b.appendChild(d);if(void 0!==a.offendingResources)d=document.createElement("div"),d.style.fontWeight="bold",d.style.marginTop="15px",d.innerHTML=i18n("Resources:"),b.appendChild(d),e.forEach(a.offendingResources,function(a){var c=document.createElement("div");c.style.marginLeft="15px";c.innerHTML=a.path.escape();b.appendChild(c)});if(void 0!==a.offendingSnapshots)d=document.createElement("div"),
d.style.fontWeight="bold",d.style.marginTop="15px",d.innerHTML=i18n("Application Snapshots:"),b.appendChild(d),e.forEach(a.offendingSnapshots,function(a){var c=document.createElement("div");c.style.marginLeft="15px";c.innerHTML=a.name.escape();b.appendChild(c)});if(void 0!==a.offendingProcesses)a=document.createElement("div"),a.style.fontWeight="bold",a.style.marginTop="15px",a.innerHTML=i18n("You cannot delete this version because it is used by: "),b.appendChild(a),a=document.createElement("div"),
a.style.marginTop="15px",a.innerHTML=i18n("Process History (You can delete versions that were deployed in a process only through Artifact Cleanup.)"),b.appendChild(a);new r({messageDom:b})},showRunningIntegrations:function(){this.runningIntegrationTitleAttach.innerHTML=i18n("Currently Running Version Imports");this.compSourceHistory=w({gridRestUrl:bootstrap.restUrl+"sourceConfigExecutionRecord/"+appState.component.id+"/table/running",tableConfigKey:"componentRunningIntegrations"+appState.component.id});
this.compSourceHistory.placeAt(this.runningIntegrationAttach)},importVersions:function(){var a=this;d.get({url:bootstrap.baseUrl+"property/propSheetDef/"+appState.component.sourceConfigPlugin.importPropSheetDef.id+"/propDefs",handleAs:"json",load:function(b){var c=!0;0===b.length&&(c=!1);"true"===util.getNamedPropertyValue(appState.component.properties,"FileSystemComponentProperties/useNamePattern")&&(c=!1);if(c){var f=new q({title:i18n("Import New Versions"),closable:!0,draggable:!0}),h=new t({submitUrl:bootstrap.restUrl+
"deploy/component/"+appState.component.id+"/integrate",preSubmit:function(){a.grid.block()},postSubmit:function(){a.grid.unblock();f.hide();f.destroy();a.grid.refresh()},addData:function(a){a.properties={};e.forEach(b,function(b){a.properties[b.name]=void 0!==a[b.name]?a[b.name]:"";delete a[b.name]})},onError:function(b){a.grid.unblock();(new r({message:i18n("Error running import: %s",util.escape(b.responseText))})).startup()},onCancel:function(){f.hide();f.destroy()}});e.forEach(b,function(a){a.translate=
!0;h.addField(a)});h.placeAt(f.containerNode);f.show()}else d.put({url:bootstrap.restUrl+"deploy/component/"+appState.component.id+"/integrate",putData:"{}",handleAs:"json",load:function(){a.grid.refresh()},error:function(a){(new r({message:i18n("Error running import: %s",util.escape(a.responseText))})).startup()}})}})}})})},"deploy/widgets/component/ComponentList":function(){define("dojo/_base/declare,dojo/_base/connect,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,dojo/_base/xhr,dojo/_base/array,dojo/topic,dojo/Deferred,dijit/form/Button,dijit/form/CheckBox,dijit/form/Select,dijit/form/TextBox,deploy/widgets/component/EditComponent,deploy/widgets/component/ComponentImportFailureIcon,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,dojo/store/Memory,js/webext/widgets/table/TreeTable,dojo/data/ObjectStore,deploy/widgets/tag/TagDisplay,dojo/io/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K){return l("deploy.widgets.application.ComponentList",[k,j],{templateString:'<div class="componentList"><div data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="statAttach" class="statAttach">  <div class="tile tile-border">    <div class="stat-tile-label">'+i18n("Failed Version Import")+'</div>    <div class="stat-tile-number" data-dojo-attach-point="failedStatAttach"></div>  </div>  <div class="tile tile-border">    <div class="stat-tile-label">'+
i18n("Importing Version")+'</div>    <div class="stat-tile-number" data-dojo-attach-point="importingStatAttach"></div>  </div>  <div class="tile tile-border">    <div class="stat-tile-label">'+i18n("No Version")+'</div>    <div class="stat-tile-number" data-dojo-attach-point="noVersionStatAttach"></div>  </div>  <div class="tile tile-border">    <div class="stat-tile-label">'+i18n("Successful")+'</div>    <div class="stat-tile-number" data-dojo-attach-point="successStatAttach"></div>  </div>  <div class="tile">    <div class="stat-tile-label">'+
i18n("No Artifact")+'</div>    <div class="stat-tile-number" data-dojo-attach-point="noArtifactStatAttach"></div>  </div></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',activeOnly:!0,BASIC_VIEW:"basic",TAG_VIEW:"tag",TEAM_VIEW:"team",_views:{basic:{url:bootstrap.restUrl+"deploy/component/details",baseFilters:[{name:"active",type:"eq",values:[!0],className:"Boolean"}]},tag:{url:bootstrap.restUrl+"tag",getChildUrl:function(){return bootstrap.restUrl+
"deploy/component/details"},getChildOutputType:function(){return{outputType:["BASIC","SECURITY"]}},baseFilters:[{name:"objectType",type:"eq",values:["Component"],className:"String"}],getChildFilters:function(a){return[{name:"tags",type:"eq",values:[a.name],className:"String"},{name:"active",type:"eq",values:[!0],className:"Boolean"}]}},team:{url:bootstrap.baseUrl+"security/team",getChildUrl:function(a){return bootstrap.restUrl+"deploy/component/team/details/"+a.id},baseFilters:[],getChildFilters:function(){return[{name:"active",
type:"eq",values:[!0],className:"Boolean"}]}}},isView:function(a){return this.currentView===a},postCreate:function(){this.inherited(arguments);var a=this;if(!config.data.permissions[security.system.manageSecurity])a._views.team.baseFilters=[{name:"username",type:"eq",values:[bootstrap.username],className:"String"}];this.currentView=a.BASIC_VIEW;a.selectStore=d.create("div");a.viewSelect=new q({options:[{label:i18n("Flat list"),value:a.BASIC_VIEW,selected:!0},{label:i18n("By Tag"),value:a.TAG_VIEW},
{label:i18n("By Team"),value:a.TEAM_VIEW}],sortByLabel:!1,style:{display:"inline-block"}});util.setTestId(a.viewSelect,"view-select");c(a.viewSelect,"change",function(b){if(a.currentView!==b)a.currentView=b,a.viewSelect.placeAt(a.selectStore),a.grid.destroy(),b=!a.isView(a.BASIC_VIEW),a._clearOrderField(),a.makeTable(a._views[a.currentView].url,a.getColumns(),b)});a.makeTable(a._views[a.currentView].url,a.getColumns());a.showStats()},_clearOrderField:function(){var a=this.grid.getStoredConfig();a.orderField=
void 0;this.grid.storeConfig(a)},makeTable:function(b,c,d){var f=this,h;f._views[f.currentView].getChildFilters&&(h=function(b){b=f._views[f.currentView].getChildFilters(b);f.activeOnly||(b=a.filter(b,function(a){return"active"!==a.name}));return b});this.grid=new E({url:b,serverSideProcessing:!0,orderField:"name",queryData:{outputType:["BASIC","SECURITY","LINKED"]},baseFilters:f._views[f.currentView].baseFilters||[],tableTitle:i18n("Components"),noDataMessage:i18n("No components found."),tableConfigKey:"componentList",
selectorField:"id",hidePagination:!1,hideExpandCollapse:f.isView(f.BASIC_VIEW),selectable:function(a){return!a.objectType},columns:c,isSelectable:function(a){return!a.objectType&&void 0===a.isDeletable},hasChildren:function(a){return!!a.objectType||void 0!==a.isDeletable},getChildUrl:function(a){if(f._views[f.currentView].getChildUrl)return f._views[f.currentView].getChildUrl(a,!f.activeOnly)},getChildFilters:h,getChildOutputType:f._views[f.currentView].getChildOutputType});this.grid.placeAt(this.gridAttach);
this.buttonAttach=this.grid.buttonAttach;this.addTopButtons();var j=[];a.forEach(this.getBulkReadOptions(),function(a){j.push(a)});a.forEach(this.getBulkWriteOptions(),function(a){j.push(a)});if(j&&0<j.length){var k=new A({options:j,label:i18n("Actions...")});k.placeAt(this.buttonAttach);b=function(){var a=f.grid.getSelectedItems().length;0===a?(k.set("label",i18n("Actions...")),k.set("disabled",!0)):(k.set("label",i18n("Actions... (%s)",a)),k.set("disabled",!1))};f.grid.on("selectItem",b);f.grid.on("deselectItem",
b);f.grid.on("displayTable",b)}if(config.data.systemConfiguration.enableInactiveLinks&&!d)!this.activeBox&&!this.activeLabel?(this.activeBox=new t({checked:!1,value:"true",onChange:function(b){f.activeOnly=!b;!b&&f.isView(f.BASIC_VIEW)?f.grid.baseFilters.push({name:"active",type:"eq",values:[!0],className:"Boolean"}):f.grid.baseFilters=a.filter(f.grid.baseFilters,function(a){return"active"!==a.name});f.grid.refresh()}}),this.activeBox.placeAt(this.activeBoxAttach),this.activeLabel=document.createElement("div"),
e.add(this.activeLabel,"inlineBlock"),this.activeLabel.style.position="relative",this.activeLabel.style.top="2px",this.activeLabel.style.left="2px",this.activeLabel.innerHTML=i18n("Show Inactive Components"),this.activeBoxAttach.appendChild(this.activeLabel)):this.activeBox.set("checked",!1);f.viewSelect.placeAt(f.buttonAttach)},getColumns:function(){var b=[];b.push(this.getNameColumn());a.forEach(this.getOtherColumns(),function(a){b.push(a)});return b},getNameColumn:function(){var a=this;return{name:i18n("Name"),
formatter:function(b,c,e){e.style.position="relative";c=d.create("div",{"class":"inlineBlock",style:"margin-"+(h.isBodyLtr()?"right":"left")+":78px;"});e=d.create("div",{"class":"inlineBlock"});d.place(e,c);if(b.objectType)b.color&&(e=[],e.push(b),(new G({readOnly:!0,tags:e})).placeAt(c));else if(b.componentType){if(b.integrationFailed){var f=new u({label:i18n("A version import failed. Check the component's configuration for more details or use the Actions menu to dismiss this error.")});d.place(f.domNode,
e)}var f=w.componentLinkFormatter(b),j=d.create("div",{"class":"inlineBlock"});j.appendChild(f);d.place(j,e);if(b.templateTags)b.disabledTags=b.templateTags;a.tagger=new v({objectType:"Component",item:b,callback:function(){a.grid.refresh()}});a.tagger.placeAt(c);d.place(a.actionsFormatter(b),c)}else{e=b.name.escape();if("System Team"===e)e=i18n("System Team"),b.description=i18n(b.description);d.create("div",{"class":"inline-block",innerHTML:e},c)}b.importing&&d.create("div",{"class":"inline-block component-importing-text",
innerHTML:"Importing..."},c);return c},orderField:"name",filterField:"name",filterType:"custom",getRawValue:function(a){return a.name},getFilterFields:function(){var b=[];b.push(new o({name:"name","class":"filter",placeHolder:i18n("Name"),type:"like"}));"basic"===a.currentView&&b.push(new x({name:"tags","class":"filter",placeHolder:i18n("Tags"),type:"like"}));return b}}},getOtherColumns:function(){var a=[];a.push({name:i18n("Latest Import"),field:"status",formatter:function(a){var b;"SUCCESS"===a.status?
b=i18n("Successful"):"FAILURE"===a.status?b=i18n("Failed Import"):!a.hasArtifact&&a.versionName&&(b=i18n("No Artifact"));return b}});a.push({name:i18n("Latest Version"),field:"versionName",formatter:function(a){return!a.objectType&&(!a.versionName||"null"===a.versionName)&&a.componentType?i18n("NO VERSION"):a.versionName}});a.push({name:i18n("Template"),field:"template",formatter:function(a){var b="";if(a.template)b=a.template.name;return b}});a.push({name:i18n("Description"),field:"description",
orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}});var b={name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,getRawValue:function(a){return new Date(a.created)}};if(this.isView(this.BASIC_VIEW))b.orderField="dateCreated";a.push(b);a.push({name:i18n("By"),field:"user",getRawValue:function(a){return a.user}});return a},addTopButtons:function(){var a=this,b=config.data.permissions[security.system.createComponents],
c=config.data.permissions[security.system.createComponentsFromTemplate];if(b||c)c={label:i18n("Create Component"),showTitle:!1,onClick:function(){a.showNewComponentDialog()}},c=(new r(c)).placeAt(this.buttonAttach),e.add(c.domNode,"idxButtonSpecial");b&&(b={label:i18n("Import Components"),showTitle:!1,onClick:function(){a.showImportComponentDialog()}},(new r(b)).placeAt(this.buttonAttach))},getBulkWriteOptions:function(){var a=this;return[{label:i18n("Add Tag"),onClick:function(){var b=a._getSelected();
a.tagger.showAddTagDialog(b)}},{label:i18n("Remove Tag"),onClick:function(){var b=a._getSelected();a.tagger.showRemoveTagDialog(b)}},{label:i18n("Delete"),onClick:function(){var b=a._getSelected();a.confirmDeletes(b)}},{label:i18n("Clear Version Import Errors"),onClick:function(){var b=a._getSelected();a.confirmClearIntegrationErrors(b)}}]},getBulkReadOptions:function(){var a=this;return[{label:i18n("Export"),onClick:function(){var b=a._getSelected();a.multipleExports(b)}}]},addEditActions:function(a,
b){var c=this;(new r({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.editComponent(a)}})).placeAt(b)},getRowWriteActions:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}},{label:i18n("Clear Version Import Errors"),onClick:function(){b.confirmClearIntegrationError(a)}}]},getRowCopyActions:function(a){var c=this;return[{label:i18n("Copy"),onClick:function(){a.template?b.get({url:bootstrap.restUrl+"deploy/componentTemplate/"+a.template.id+
"/"+a.template.version,handleAs:"json",load:function(){c.showNewComponentDialog(a)},error:function(a){(403===a.status?new y({message:i18n("Cannot copy a component based on a component template the user does not have read access to.")}):new y({message:i18n("Unknown error loading component template.")})).startup()}}):c.showNewComponentDialog(a)}}]},getRowReadActions:function(a){return[{label:i18n("Export"),onClick:function(){util.downloadFile(bootstrap.restUrl+"deploy/component/"+a.id+"/export")}}]},
actionsFormatter:function(b){var c=d.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),e=[];(config.data.permissions[security.system.createComponents]&&!b.template||config.data.permissions[security.system.createComponentsFromTemplate]&&b.template)&&a.forEach(this.getRowCopyActions(b),function(a){e.push(a)});b.security&&b.security.read&&a.forEach(this.getRowReadActions(b),function(a){e.push(a)});b.security&&b.security["Edit Basic Settings"]&&(this.addEditActions(b,
c),a.forEach(this.getRowWriteActions(b),function(a){e.push(a)}));e.length&&(new A({options:e,label:i18n("Actions...")})).placeAt(c);return c},multipleExports:function(a){a.length&&(a="?ids="+a.join(),util.downloadFile(bootstrap.restUrl+"deploy/component/export"+a))},confirmDeletes:function(a,c){var d=this;a.length?new B({message:i18n("Are you sure you want to delete %s components?",a.length),action:function(){b.del({url:bootstrap.restUrl+"deploy/component/delete",headers:{"Content-Type":"application/json"},
putData:JSON.stringify({componentIds:a}),load:function(){c&&c();d.grid.refresh()},error:function(a){(new y({title:i18n("Error deleting component"),message:a.responseText})).startup();d.grid.unblock()}})}}):(new y({message:i18n("Please select at least one component to delete.")})).startup()},confirmClearIntegrationErrors:function(a){var c=this;a.length?new B({message:i18n("Are you sure you want to dismiss the import failure alerts on %s components? Records of the attempted imports will remain in history.",
a.length),action:function(){b.put({url:bootstrap.restUrl+"deploy/component/clearIntegrationErrors",headers:{"Content-Type":"application/json"},putData:JSON.stringify({componentIds:a}),load:function(){c.grid.refresh()},error:function(a){(new y({title:i18n("Error clearing import failures"),message:a.responseText})).startup();c.grid.unblock()}})}}):(new y({message:i18n("Please select at least one component.")})).startup()},editComponent:function(a){var c=this;b.get({url:bootstrap.restUrl+"deploy/component/"+
a.id,handleAs:"json",load:function(a){var b=new C({title:i18n("Edit Component"),closable:!0,draggable:!0});(new s({component:a,readOnly:!a.security["Edit Basic Settings"],noRedirect:!0,callback:function(){b.hide();b.destroy();c.grid.refresh()}})).placeAt(b);b.show()}})},confirmDelete:function(a){var c=this;new B({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),action:function(){c.grid.block();b.del({url:bootstrap.restUrl+"deploy/component/"+
a.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh()},error:function(a){(new y({title:i18n("Error deleting component"),message:a.responseText})).startup();c.grid.unblock()}})}})},confirmClearIntegrationError:function(a){var c=this;new B({message:i18n("Are you sure you want to dismiss the import failure alert on this component? Records of the attempted imports will remain in its history."),action:function(){b.put({url:bootstrap.restUrl+"deploy/component/clearIntegrationErrors",headers:{"Content-Type":"application/json"},
putData:JSON.stringify({componentIds:[a.id]}),load:function(){c.grid.refresh()},error:function(a){(new y({title:i18n("Error clearing import failures"),message:a.responseText})).startup();c.grid.unblock()}})}})},_getSelected:function(){return a.map(this.grid.getSelectedItems(),function(a){return a.id})},destroy:function(){this.inherited(arguments);this.grid.destroy()},showNewComponentDialog:function(a){var b=new C({title:i18n("Create Component"),closable:!0,draggable:!0,description:i18n("When you create a component, you identify the source and define how the artifacts are brought into UrbanCode Deploy.")});
(new s({source:a,callback:function(){b.hide();b.destroy()}})).placeAt(b.containerNode);b.show()},showImportComponentDialog:function(){var a=this,b=new C({title:i18n("Import Components"),closable:!0,draggable:!0});a.importIsUpgrade=!1;a.importTemplateUpgradeType="USE_EXISTING_IF_EXISTS";a.processUpgradeType="USE_EXISTING_IF_EXISTS";var c=d.create("form",{target:"formTarget",method:"Post",enctype:"multipart/form-data",encoding:"multipart/form-data",className:"importForm"}),e=d.create("div",{className:"filInputContainer"}),
f=d.create("input",{type:"file",name:"file",className:"fileInput"});d.place(f,e);var h=d.create("div",{className:"labelsAndValues-row"}),j=d.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),k=d.create("label",{"for":"upgradeComponent",className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Upgrade Component")});(new t({name:"upgradeComponent",checked:!1,onChange:function(){a.importIsUpgrade=this.get("checked");a.setFormAction(c)}})).placeAt(j);h.appendChild(j);h.appendChild(k);
var j=d.create("div",{className:"labelsAndValues-row"}),k=d.create("div",{className:"labelsAndValues-valueCell"}),n=d.create("div",{className:"labelsAndValues-labelCell",innerHTML:i18n("Component Template Upgrade Type")});(new q({name:"templateUpgradeTypeInput",options:[{label:i18n("Use Existing Template"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Template"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Template Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Template Does Not Exist"),
value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Template If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.importTemplateUpgradeType=this.get("value");a.setFormAction(c)}})).placeAt(k);j.appendChild(n);j.appendChild(k);var k=d.create("div",{className:"labelsAndValues-row"}),n=d.create("div",{className:"labelsAndValues-valueCell"}),o=d.create("div",{className:"labelsAndValues-labelCell",innerHTML:i18n("Generic Process Upgrade Type")});(new q({name:"processUpgradeTypeInput",options:[{label:i18n("Use Existing Process"),
value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Process"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Process Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Process Does Not Exist"),value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Process If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.processUpgradeType=this.get("value");a.setFormAction(c)}})).placeAt(n);k.appendChild(o);k.appendChild(n);n=d.create("div");(new r({label:i18n("Submit"),type:"submit"})).placeAt(n);
c.appendChild(h);c.appendChild(j);c.appendChild(k);c.appendChild(e);c.appendChild(n);b.containerNode.appendChild(c);c.onsubmit=function(){var d=!0;f.value?(a.setFormAction(c),K.send({form:c,handleAs:"json",load:function(c){"ok"===c.status?(b.hide(),b.destroy(),a.grid.refresh()):(new y({message:i18n("Error importing component: %s",c.error||"")})).startup()},error:function(a){(new y({message:i18n("Error importing component: %s",a.error||"")})).startup()}})):(new y({message:i18n("Please choose a template json file to import.")}),
d=!1);return d};b.show()},setFormAction:function(a){var b=util.getCookie(bootstrap.expectedSessionCookieName);a.action=bootstrap.restUrl+"deploy/component/"+(!0===this.importIsUpgrade?"upgrade":"import")+"?upgradeType="+this.importTemplateUpgradeType+"&processUpgradeType="+this.processUpgradeType+"&"+bootstrap.expectedSessionCookieName+"="+b},showStats:function(){var a=this;this.getStats().then(function(b){a.successStatAttach.textContent=b.SUCCESS;a.importingStatAttach.textContent=b.IMPORTING;a.noVersionStatAttach.textContent=
b["NO VERSION"];a.failedStatAttach.textContent=b.FAILURE;a.noArtifactStatAttach.textContent=b["NO ARTIFACT"]})},getStats:function(){var a=bootstrap.restUrl+"deploy/component/stats",c=new n;b.get({url:a,handleAs:"json",load:function(a){c.resolve(a)},error:function(a){c.reject(a)}});return c}})})},"deploy/widgets/component/ComponentImportFailureIcon":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dijit/Tooltip","dojo/_base/declare"],function(l,m,k,j){return j("deploy.widgets.component.ComponentFileTable",
[m,l],{templateString:'<div class="general-icon failed-icon inlineBlock"></div>',postCreate:function(){this.inherited(arguments);if(!this.label)this.label=i18n("A version import failed. Check the component's configuration for more details.");new k({connectId:[this.domNode],label:this.label,showDelay:100,position:["after","above","below","before"]})}})})},"dojo/io/iframe":function(){define("../_base/config,../_base/json,../_base/kernel,../_base/lang,../_base/xhr,../sniff,../_base/window,../dom,../dom-construct,../query,require,../aspect,../request/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){k.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var h=r._iframeName,h=h.substring(0,h.lastIndexOf("_")),t=j.delegate(r,{create:function(){return t._frame=r.create.apply(r,arguments)},get:null,post:null,send:function(a){var b,d=e._ioSetArgs(a,function(){b&&b.cancel()},function(a){var c=null,a=a.ioArgs;try{var d=a.handleAs;"xml"===d||"html"===d?c=b.response.data:(c=b.response.text,"json"===d?c=m.fromJson(c):"javascript"===d&&(c=k.eval(c)))}catch(e){c=
e}return c},function(a,b){b.ioArgs._hasError=!0;return a}),f=d.ioArgs,h="GET",j=c.byId(a.form);a.method&&"POST"===a.method.toUpperCase()&&j&&(h="POST");a={method:h,handleAs:"json"===a.handleAs||"javascript"===a.handleAs?"text":a.handleAs,form:a.form,query:j?null:a.content,data:j?a.content:null,timeout:a.timeout,ioArgs:f};if(a.method)a.method=a.method.toUpperCase();if(l.ioPublish&&k.publish&&!1!==f.args.ioPublish)var t=n.after(r,"_notifyStart",function(a){a.options.ioArgs===f&&(t.remove(),e._ioNotifyStart(d))},
!0);b=r(f.url,a,!0);f._callNext=b._callNext;b.then(function(){d.resolve(d)}).otherwise(function(a){d.ioArgs.error=a;d.reject(a)});return d},_iframeOnload:d.global[h+"_onload"]});j.setObject("dojo.io.iframe",t);return t})},"deploy/widgets/component/ComponentEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/component/EditComponent,deploy/widgets/property/PropValues,deploy/widgets/property/PropDefs,deploy/widgets/component/ComponentConfigTemplates,deploy/widgets/component/ComponentImportFailureIcon,deploy/widgets/component/ComponentSourceConfigHistory".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return m([h],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var a=this;a.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){a.addHeading(i18n("Basic Settings"));a.showBasicSettings()}});a.addEntry({id:"componentProperties",label:i18n("Component Properties"),action:function(){a.addHeading(i18n("Component Properties"));a.showComponentProperties()}});a.addEntry({id:"environmentProperties",label:i18n("Environment Property Definitions"),
action:function(){a.addHeading(i18n("Environment Property Definitions"));a.showEnvironmentProperties()}});a.addEntry({id:"resourceProperties",label:i18n("Resource Property Definitions"),action:function(){a.addHeading(i18n("Resource Property Definitions"));a.showResourceProperties()}});a.addEntry({id:"versionProperties",label:i18n("Version Property Definitions"),action:function(){a.addHeading(i18n("Version Property Definitions"));a.showVersionProperties()}});a.addEntry({id:"configTemplates",label:i18n("Configuration File Templates"),
action:function(){a.addHeading(i18n("Configuration File Templates"));a.showConfigTemplates()}});a.addEntry({id:"versionImportHistory",domNode:a.formatVersionImportHistory(),action:function(){a.addHeading(i18n("Version Import History"));a.showVersionImportHistory()}})},addHeading:function(a){e.create("div",{innerHTML:a,"class":"containerLabel"},this.detailAttach)},addDescription:function(a){e.create("div",{innerHTML:a,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,
component:appState.component,readOnly:!appState.component.security["Edit Basic Settings"]})).placeAt(this.detailAttach)},showComponentProperties:function(){var a=this;k.get({url:bootstrap.restUrl+"deploy/component/"+appState.component.id,handleAs:"json",load:function(b){(new c({propSheet:b.propSheet,readOnly:!b.security["Manage Properties"]})).placeAt(a.detailAttach)}})},showEnvironmentProperties:function(){var a=this;this.addDescription(i18n("Define properties here to be given values on each environment the component is used in."));
k.get({url:bootstrap.restUrl+"deploy/component/"+appState.component.id,handleAs:"json",load:function(c){(new b({propSheetDef:c.environmentPropSheetDef,readOnly:!c.security["Manage Properties"]})).placeAt(a.detailAttach)}})},showResourceProperties:function(){var a=this;this.addDescription(i18n("Define properties here to be given values on any resource this component will be deployed to."));k.get({url:bootstrap.restUrl+"deploy/component/"+appState.component.id,handleAs:"json",load:function(c){(new b({propSheetDefId:c.resourceRole.propSheetDef.id,
propSheetDef:c.resourceRole.propSheetDef,readOnly:!c.security["Manage Properties"]})).placeAt(a.detailAttach)}})},showVersionProperties:function(){var a=this;this.addDescription(i18n("Define properties here to be given values on each of the component's versions."));k.get({url:bootstrap.restUrl+"deploy/component/"+appState.component.id,handleAs:"json",load:function(c){(new b({propSheetDef:c.versionPropSheetDef,readOnly:!c.security["Manage Properties"]})).placeAt(a.detailAttach)}})},showConfigTemplates:function(){this.addDescription(i18n("Configuration file templates can be used to store template configuration files to be written and token-replaced during deployments."));
(new a({component:appState.component})).placeAt(this.detailAttach)},showVersionImportHistory:function(){(new n).placeAt(this.detailAttach)},formatVersionImportHistory:function(){var a=e.create("div",{innerHTML:i18n("Version Import History")});if(appState.component.integrationFailed){var b=new f({label:i18n("A version import failed. Check here for more details or use the Actions menu on the Components page to dismiss this error.")});e.place(b.domNode,a)}return a}})})},"deploy/widgets/component/ComponentRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.component.ComponentRequestHistory",[m,l],{templateString:'<div class="componentRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=[{name:i18n("Process"),formatter:function(b){b.componentProcess.component=b.component;return h.componentProcessLinkFormatter(b.componentProcess)}},{name:i18n("Resource"),formatter:function(b){return h.resourcePathFormatter(b.resource)}},{name:i18n("Version"),
formatter:function(b){return h.versionLinkFormatter(b.version)}},{name:i18n("Application"),formatter:function(b){return h.applicationLinkFormatter(b.application)}},{name:i18n("Environment"),formatter:function(b){return h.environmentLinkFormatter(b.environment)}},{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(b){return util.dateFormatShort(b.entry.scheduledDate)},orderField:"calendarEntry.scheduledDate"},{name:i18n("By"),field:"userName"},{name:i18n("Status"),formatter:function(b,
a,c){return h.requestStatusFormatter(b,a,c)}},{name:i18n("Actions"),formatter:function(b){var a=document.createElement("div"),c=document.createElement("a");c.className="actionsLink";c.innerHTML=i18n("View Request");c.href="#componentProcessRequest/"+b.id;a.appendChild(c);return a}}];this.grid=new d({url:bootstrap.restUrl+"deploy/componentProcessRequest/table",baseFilters:[{name:"component.id",type:"eq",className:"UUID",values:[appState.component.id]}],columns:c,orderField:"calendarEntry.scheduledDate",
sortType:"desc",tableConfigKey:"componentRequestHistory"+appState.component.id,noDataMessage:i18n("No process history found for this component."),hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/component/RunComponentProcess":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d,c){return j("deploy.widgets.component.RunComponentProcess",[m,l],{templateString:'<div class="deploy">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.componentProcessProperties=void 0;this.form=new d({submitUrl:bootstrap.restUrl+"deploy/component/"+this.component.id+"/runProcess",addData:function(a){a.properties={};void 0!==b.selectedComponentProcess&&k.forEach(b.selectedComponentProcess.unfilledProperties,
function(b){a.properties[b.name]=a["p_"+b.name]})},postSubmit:function(a){void 0!==b.callback&&b.callback();navBar.setHash("componentProcessRequest/"+a.requestId+"/log",!1,!0)},onCancel:function(){void 0!==b.callback&&b.callback()},onError:function(a){void 0!==b.callback&&b.callback();new h({title:i18n("Error"),messages:[i18n("An error has occurred while starting the component process:"),"",util.escape(a.responseText)]})},saveLabel:i18n("Submit")});b.form.addField({name:"environmentId",label:i18n("Environment"),
description:i18n("Environments that require snapshots are excluded from this list."),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+"deploy/environment",allowNone:!1,defaultQuery:{outputType:["BASIC","LINKED","SECURITY"],filterFields:["application.id","active","requireSnapshot"],"filterType_application.id":"eq","filterValue_application.id":b.application.id,filterType_active:"eq",filterValue_active:!0,filterClass_active:"Boolean",filterType_requireSnapshot:"eq",filterValue_requireSnapshot:!1,
filterClass_requireSnapshot:"Boolean"},onChange:function(a,d){if(d){b.hasResourceField&&b.form.removeField("resourceId");b.hasResourceField=!0;var e=new c({restUrl:bootstrap.restUrl+"deploy/environment/"+d.id+"/executableResourcesForComponent/"+b.component.id,getLabel:function(a){return a.path},allowNone:!1,noDataMessage:i18n("No resources for component mapped to environment")});b.form.addField({name:"resourceId",label:i18n("Resource"),required:!0,widget:e},"componentProcessId")}}});var a=new c({restUrl:bootstrap.restUrl+
"deploy/component/"+b.component.id+"/executableProcesses",getLabel:function(a){var b=a.name;a.componentTemplate&&(b+=i18n(" (Template)"));return b},allowNone:!1,noDataMessage:i18n("No processes on component"),onChange:function(a,c){b.selectedComponentProcess=c;k.forEach(b.extraFieldNames,function(a){b.form.removeField(a)});b.extraFieldNames=[];c&&(c.takesVersion&&(b.extraFieldNames.push("versionId"),b.form.addField({name:"versionId",type:"TableFilterSelect",allowNone:!1,url:bootstrap.restUrl+"deploy/version",
required:!0,label:i18n("Version"),defaultQuery:{filterFields:["component.id","active"],filterType_active:"eq",filterValue_active:!0,filterClass_active:"Boolean","filterType_component.id":"eq","filterValue_component.id":b.component.id,orderField:"dateCreated",sortType:"desc"}})),k.forEach(c.unfilledProperties,function(a){var c="p_"+a.name;b.extraFieldNames.push(c);var d=e.clone(a);d.name=c;d.context={component:b.component};if(a.description)d.description=a.description.escape();b.form.addField(d)}))}});
b.form.addField({name:"componentProcessId",label:i18n("Process"),required:!0,widget:a});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/dashboard/CurrentActivity":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/aspect,dojo/dom-construct,dojo/on,dojo/_base/xhr,js/webext/widgets/table/TreeTable,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,deploy/widgets/Formatters".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return l([m,k],{templateString:'<div class="currentActivity with-description-text"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"workflow/currentActivity",d=[{name:i18n("Type"),formatter:function(a){var b="";"application"===a.processRequestType?b=i18n("Application"):"component"===a.processRequestType?b=i18n("Component"):"generic"===a.processRequestType&&(b=i18n("Generic"));return b},orderField:"type",filterField:"status",filterType:"select",filterOptions:[{label:i18n("Application"),value:"Application"},{label:i18n("Component"),value:"Component"},
{label:i18n("Generic"),value:"Generic"}],getRawValue:function(a){var b="";"application"===a.processRequestType?b=i18n("Application"):"component"===a.processRequestType?b=i18n("Component"):"generic"===a.processRequestType&&(b=i18n("Generic"));return b}},{name:i18n("Component, Application, or Generic"),formatter:function(a){var b="";"application"===a.processRequestType?b=f.applicationLinkFormatter(a.application):"component"===a.processRequestType?b=f.componentLinkFormatter(a.component):"generic"===
a.processRequestType&&(b=f.genericProcessLinkFormatter(a.process));return b},orderField:"componentApplication",filterField:"componentApplication",filterType:"text",getRawValue:function(a){var b="";if("application"===a.processRequestType)b=a.application.name;else if("component"===a.processRequestType)b=a.component.name;else if("generic"===a.processRequestType)b=a.process.name;return b}},{name:i18n("Resource or Environment"),formatter:function(a){var b="";if("application"===a.processRequestType)b=f.environmentLinkFormatter(a.environment);
else if("component"===a.processRequestType||"generic"===a.processRequestType)b=f.resourcePathFormatter(a.resource);return b},orderField:"resourceEnvironment",filterField:"resourceEnvironment",filterType:"text",getRawValue:function(a){var b="";if("application"===a.processRequestType)b=a.environment.name;else if("component"===a.processRequestType||"generic"===a.processRequestType)b=a.resource.name;return b}},{name:i18n("Process"),formatter:function(a){var b="";"application"===a.processRequestType?b=
f.applicationProcessLinkFormatter(a.applicationProcess):"component"===a.processRequestType?b=f.componentProcessLinkFormatter(a.componentProcess):"generic"===a.processRequestType&&(b=f.genericProcessLinkFormatter(a.process));return b},orderField:"process",filterField:"process",filterType:"text",getRawValue:function(a){var b="";if("application"===a.processRequestType)b=a.applicationProcess.name;else if("component"===a.processRequestType)b=a.componentProcess.name;else if("generic"===a.processRequestType)b=
a.process.name;return b}},{name:i18n("Started On"),field:"startTime",formatter:util.tableDateFormatter,orderField:"startTime",getRawValue:function(a){return new Date(a.startTime)}},{name:i18n("By"),field:"userName",orderField:"userName"},{name:i18n("Status"),formatter:function(a,b,c){return f.activityStatusFormatter(a,b,c)}},{name:i18n("Actions"),parentWidget:this,formatter:this.actionsFormatter}];this.grid=new c({url:b,serverSideProcessing:!1,hideFooter:!1,hidePagination:!0,noDataMessage:i18n("No activity found."),
tableConfigKey:"currentActivity",orderField:"startDate",sortType:"desc",columns:d,getChildUrl:function(a){return bootstrap.restUrl+"workflow/currentActivity?parentRequestId="+a.id},hasChildren:function(a){return"application"===a.processRequestType}});this.grid.placeAt(this.gridAttach);j.after(this.grid,"showTable",function(b){if(a.activityCountNode)a.activityCountNode.innerHTML="("+b.length+")"},!0)},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(c){var f=
document.createElement("div"),j=this.parentWidget;"component"===c.processRequestType?e.create("a",{href:"#componentProcessRequest/"+c.id,innerHTML:i18n("Details"),"class":"actionsLink"},f):"application"===c.processRequestType?e.create("a",{href:"#applicationProcessRequest/"+c.id,innerHTML:i18n("Details"),"class":"actionsLink"},f):"generic"===c.processRequestType&&e.create("a",{href:"#processRequest/"+c.id,innerHTML:i18n("Details"),"class":"actionsLink"},f);if(c.executable){if(c.paused){var k=e.create("a",
{innerHTML:i18n("Resume"),"class":"actionsLink linkPointer"},f);h(k,"click",function(){j.grid.block();d.put({url:bootstrap.restUrl+"workflow/"+(c.traceId||c.workflowTraceId)+"/resume",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new b({message:i18n("Could not resume the process.")});j.grid.unblock();j.grid.refresh()}})})}else k=e.create("a",{innerHTML:i18n("Pause"),"class":"actionsLink linkPointer"},f),h(k,"click",function(){j.grid.block();d.put({url:bootstrap.restUrl+
"workflow/"+(c.traceId||c.workflowTraceId)+"/pause",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new b({message:i18n("Could not pause the process.")});j.grid.unblock();j.grid.refresh()}})});"EXECUTING"===c.state&&(k=e.create("a",{innerHTML:i18n("Cancel"),"class":"actionsLink linkPointer"},f),h(k,"click",function(){new a({message:i18n("Are you sure you want to cancel this process request?"),action:function(){j.grid.block();d.put({url:bootstrap.restUrl+"workflow/"+
(c.traceId||c.workflowTraceId)+"/cancel",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new b({message:i18n("Could not cancel the process.")});j.grid.unblock();j.grid.refresh()}})}})}))}return f}})})},"deploy/widgets/SimpleTag":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/array,dojo/on,dojo/mouse,dojo/_base/declare,dojo/_base/Color,dojo/dom-attr,dojo/dom-class,dojo/dom-style".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return d([m,
l],{templateString:'<div class="inlineBlock tagBox"><span class="tagName" data-dojo-attach-point="nameSpan"></span><span class="tagDelete" data-dojo-attach-point="delSpan" title="'+i18n("Delete")+'">x</span></div>',postCreate:function(){this.inherited(arguments);var b=this;this.nameSpan.textContent=this.name;f.set(this.domNode,"backgroundColor",this.color);this.description&&(e(this.nameSpan,h.enter,function(){k.show(util.escape(b.description),this)}),e(this.nameSpan,h.leave,function(){k.hide(this)}));
b._isDark(this.color)&&a.add(this.domNode,"darkColor");b.readOnly&&f.set(b.delSpan,"display","none");e(b.delSpan,"click",b.deleteHandler)},_isDark:function(a){a=(new c(a)).toRgb();return 0.5<1-(0.25*a[0]+0.6*a[1]+0.1*a[2])/255},getShade:function(a){var a=(new c(a)).toRgb(),b=[];j.forEach(a,function(a){b.push(0.6*a)});return c.fromArray(b).toHex()}})})},"deploy/widgets/deploymentPreview/ComponentChanges":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable",
"deploy/widgets/Formatters"],function(l,m,k,j,e){return k("deploy.widgets.deploymentPreview.ComponentChanges",[m,l],{templateString:'<div class="componentChanges"><div data-dojo-attach-point="treeAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Component/Resource"),formatter:function(d){return d.resource?util.getOnClickLink("resource/"+d.resource.id,d.resource.path):e.componentLinkFormatter(d)},getRawValue:function(d){return d.name},field:"name"},{name:i18n("Process"),
formatter:function(d){if(d.version)return e.componentProcessLinkFormatter(d.componentProcess)}},{name:i18n("Version"),formatter:function(d){if(d.version)return e.versionLinkFormatter(d.version)}},{name:i18n("Change Type"),formatter:function(d){var c;if(d.version&&d.type){c=document.createElement("div");var b=document.createElement("img");b.src="ADD"===d.type?bootstrap.webextUrl+"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";c.appendChild(b);b=document.createElement("div");
b.innerHTML=d.status.name.escape();b.style.backgroundColor=d.status.color;b.className="statusLabel";c.appendChild(b)}return c}}];this.tree=new j({url:this.applicationProcessRequest?bootstrap.restUrl+"deploy/applicationProcessRequest/"+this.applicationProcessRequest.id+"/changesByComponent":bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/changesByComponent?environmentId="+this.environment.id+"&applicationProcessId="+this.applicationProcess.id,columns:h,serverSideProcessing:!1,orderField:"name",
tableConfigKey:"resourceChangesList"});this.tree.placeAt(this.treeAttach)},destroy:function(){this.inherited(arguments);this.tree.destroy()}})})},"deploy/widgets/deploymentPreview/ResourceChanges":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable","deploy/widgets/Formatters"],function(l,m,k,j,e){return k("deploy.widgets.deploymentPreview.ResourceChanges",[m,l],{templateString:'<div class="resourceChanges"><div data-dojo-attach-point="treeAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Resource/Component"),formatter:function(d){return d.component?e.componentLinkFormatter(d.component):util.getOnClickLink("resource/"+d.id,d.path)},getRawValue:function(d){return d.name},field:"name"},{name:i18n("Process"),formatter:function(d){if(d.version)return e.componentProcessLinkFormatter(d.componentProcess)}},{name:i18n("Version"),formatter:function(d){if(d.version)return e.versionLinkFormatter(d.version)}},{name:i18n("Change Type"),
formatter:function(d){var c;if(d.version&&d.type){c=document.createElement("div");var b=document.createElement("img");b.src="ADD"===d.type?bootstrap.webextUrl+"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";c.appendChild(b);b=document.createElement("div");b.innerHTML=d.status.name.escape();b.style.backgroundColor=d.status.color;b.className="statusLabel";c.appendChild(b)}return c}}];this.tree=new j({url:this.applicationProcessRequest?bootstrap.restUrl+"deploy/applicationProcessRequest/"+
this.applicationProcessRequest.id+"/changesByResource":bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/changesByResource?environmentId="+this.environment.id+"&applicationProcessId="+this.applicationProcess.id,columns:h,serverSideProcessing:!1,orderField:"name",tableConfigKey:"resourceChangesList"});this.tree.placeAt(this.treeAttach)},destroy:function(){this.inherited(arguments);this.tree.destroy()}})})},"deploy/widgets/deploymentPreview/SnapshotConfigurationPreview":function(){define(["dojo/_base/declare",
"dojo/_base/xhr","dojo/json","deploy/widgets/applicationProcessRequest/RequestConfigurationChanges"],function(l,m,k,j){return l([j],{makeRequest:function(){var e=this;m.put({url:bootstrap.restUrl+"deploy/application/"+this.snapshot.application.id+"/previewProcessPropertyChanges",handleAs:"json",putData:k.stringify({applicationProcessId:this.applicationProcess.id,environmentId:this.environment.id,snapshotId:this.snapshot.id}),load:function(h){e.makeTable(h)}})}})})},"deploy/widgets/applicationProcessRequest/RequestConfigurationChanges":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/json,dojo/on,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return j([m,l],{templateString:'<div class="snapshotConfiguration"><div data-dojo-attach-point="configTree"></div></div>',postCreate:function(){this.inherited(arguments);this.excludeAgentProperties=this.excludeUnchanged=!0;this.configTree.innerHTML=i18n("Loading...");this.makeRequest()},makeRequest:function(){var a=this;e.get({url:bootstrap.restUrl+"deploy/applicationProcessRequest/"+this.applicationProcessRequest.id+"/configurationChanges",handleAs:"json",load:function(b){a.makeTable(b)},
error:function(b){a.configTree.innerHTML=i18n("Error getting configuration changes: %s",util.escape(b.responseText))}})},makeTable:function(a){var b=this;this.configTree.innerHTML="";var e=[{name:i18n("Name"),orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.path?a.path:a.id},formatter:function(a,b,d){c.set(d,{wordBreak:"break-all",width:"30%"});a.path?(d.colSpan=3,a=i18n("Changes to: %s",a.path.escape())):a=a.id.escape();return a}},{name:i18n("Current Value"),
orderField:"current",filterField:"current",filterType:"text",getRawValue:function(a){if(a.old)return a.old.escape()},formatter:function(a,b,d){c.set(d,{wordBreak:"break-all"});if(a.old)return a.old.escape()}},{name:i18n("New Value"),orderField:"new",filterField:"new",filterType:"text",getRawValue:function(a){if(a["new"])return a["new"].escape()},formatter:function(a,b,d){c.set(d,{wordBreak:"break-all"});if(a["new"])return a["new"].escape()}}];b.tree=new n({data:a,itemPasses:function(a){var c=!1;if(a.path)c=
!0;else if(!b.excludeUnchanged||a.old!==a["new"])if(!b.excludeAgentProperties||0!==a.id.indexOf("agent/"))c=!0;return c},serverSideProcessing:!1,orderField:"name",tableConfigKey:"snapshotConfigList",noDataMessage:i18n("No configuration found."),columns:e,hidePagination:!1});b.tree.placeAt(b.configTree);(new k({checked:!0,value:"true",onChange:function(a){b.excludeUnchanged=a;b.tree.refresh()}})).placeAt(b.tree.buttonAttach);a=document.createElement("div");h.add(a,"inlineBlock");h.add(a,"tableHeaderCheckBoxLabel");
a.innerHTML=i18n("Hide Unchanged Properties");b.tree.buttonAttach.appendChild(a);d.create("div",{style:{height:"5px"}},b.tree.buttonAttach);(new k({checked:!0,value:"true",onChange:function(a){b.excludeAgentProperties=a;b.tree.refresh()}})).placeAt(b.tree.buttonAttach);a=document.createElement("div");h.add(a,"inlineBlock");h.add(a,"tableHeaderCheckBoxLabel");a.innerHTML=i18n("Hide Agent Properties");b.tree.buttonAttach.appendChild(a)}})})},"deploy/widgets/sourceConfigPlugin/SourceConfigPluginList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/request/iframe,dojo/on,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/util/blocker/BlockingContainer,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e("deploy.widgets.sourceConfigPlugin.SourceConfigPluginList",[m,l],{templateString:'<div class="pluginList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"plugin/sourceConfigPlugin",d=[{name:i18n("Plugin"),field:"name",orderField:"name",filterField:"name",getRawValue:function(a){return a.name},
filterType:"text"},{name:i18n("Description"),formatter:function(a){return i18n(a.description)}},{name:i18n("Version"),formatter:this.versionFormatter,orderField:"pluginVersion",filterField:"releaseVersion",getRawValue:function(a){return a.version},filterType:"text"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new o({url:b,serverSideProcessing:!0,hideExpandCollapse:!0,hidePagination:!1,columns:d,tableConfigKey:"pluginList",noDataMessage:i18n("No plugins have been loaded.")});
this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.managePlugins]&&(b={label:i18n("Load Plugin"),showTitle:!1,onClick:function(){a.showNewPluginForm()}},b=(new k(b)).placeAt(this.buttonTopAttach),c.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},versionFormatter:function(a){return a.version},actionsFormatter:function(a){var c=this.parentWidget,d=b.create("div");if(config.data.permissions[security.system.managePlugins]){var e=
b.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},d);f(e,"click",function(){c.getComponentsUsingPluginAndDelete(a)})}return d},showPluginDeletionConfirm:function(a,b){var c=this;new t({message:i18n(b),forceRawMessages:!0,action:function(){c.grid.block();h.del({url:bootstrap.restUrl+"plugin/sourceConfigPlugin/"+a.id,handleAs:"json",load:function(){c.grid.refresh()},error:function(a){(new n({messages:[i18n("Error deleting plugin:"),"",util.escape(a.responseText)]})).startup();
c.grid.unblock()}})}})},getComponentsUsingPluginAndDelete:function(a){var b=this,c=i18n("Are you sure you want to delete %s? This will permanently delete it from the system. ",i18n(util.escape(a.name))+" "+a.version);h.get({url:bootstrap.restUrl+"plugin/sourceConfigPlugin/"+a.id+"/components",handleAs:"json",load:function(e){if(e&&0<e.length){var f=i18n("The source config is using the following components:")+"<br/>";d.forEach(e,function(a){f+=a.escape()+"<br/>"});c=f+"<br/>"+c}b.showPluginDeletionConfirm(a,
c)},error:function(){c+="<br/>"+i18n("It is unknown if the source config is being used by any components.");b.showPluginDeletionConfirm(a,c)}})},showNewPluginForm:function(){var c=this,d=new q,e=new r({title:i18n("Load Plugin"),closable:!0,draggable:!0}),f=document.createElement("form");f.target="formTarget";f.method="POST";f.enctype="multipart/form-data";f.encoding="multipart/form-data";dojo.addClass(f,"importForm");d.placeAt(e.containerNode);var h=document.createElement("input");h.type="file";h.name=
"file";var j=b.create("div");(new k({label:i18n("Submit"),type:"submit"})).placeAt(j);f.appendChild(h);f.appendChild(j);d.containerNode.appendChild(f);f.onsubmit=function(){if(h.value){d.block();var b=util.getCookie(bootstrap.expectedSessionCookieName);a(bootstrap.restUrl+"plugin/sourceConfigPlugin/ui?"+bootstrap.expectedSessionCookieName+"="+b,{form:f,handleAs:"json"}).then(function(a){"ok"===a.status?(d.unblock(),e.hide(),e.destroy(),c.grid.refresh()):(d.unblock(),(new n({message:i18n("Error loading plugin: %s",
a.error)})).startup())},function(a){d.unblock();(new n({message:i18n("Error loading plugin: %s",a.error)})).startup()})}else(new n({message:i18n("Please choose a plugin file to import.")})).startup();return!1};e.show()}})})},"deploy/widgets/applicationProcessRequest/RequestVersions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable,dojo/_base/xhr".split(","),function(l,m,k,j,e,h){return k("deploy.widgets.applicationProcessRequest.RequestVersions",
[m,l],{templateString:'<div class="requestVersions"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=bootstrap.restUrl+"deploy/applicationProcessRequest/"+appState.applicationProcessRequest.id+"/versions",c=this,b=[{name:i18n("Component"),formatter:function(a){return j.componentLinkFormatter(a.component)}},{name:i18n("Version for Request"),formatter:j.versionLinkFormatter},{name:i18n("Role"),formatter:function(a,b,c){return j.resourceRoleFormatter(a.role,
b,c)}},{name:i18n("Type"),formatter:this.typeFormatter},{name:i18n("Description"),field:"description"}];h.get({url:d,handleAs:"json",load:function(a){c.grid=new e({url:d,serverSideProcessing:!1,data:a.versions,columns:b,tableConfigKey:"componentVersionRequestList",noDataMessage:i18n("No component versions found."),hideExpandCollapse:!0,hidePagination:!1});c.grid.placeAt(c.gridAttach);if(a.futureRequest)dojo.byId("versionWarning").innerHTML=i18n("* These versions may change before the process executes.")}})},
destroy:function(){this.inherited(arguments);this.grid.destroy()},typeFormatter:function(d){var c="";"FULL"===d.type?c=i18n("Full"):"INCREMENTAL"===d.type&&(c=i18n("Incremental"));return c},componentLinkFormatter:function(d){return j.componentLinkFormatter(d.component)}})})},"deploy/widgets/applicationProcessRequest/RequestResourceChanges":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,
j,e){return k("deploy.widgets.applicationProcessRequest.RequestResourceChanges",[m,l],{templateString:'<div class="requestResourceChanges"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:"&nbsp;",orderField:"changeType",getRawValue:function(d){return d.type},style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center",width:"20px"},formatter:function(d){var c=document.createElement("img");c.src="ADDED"===d.type?bootstrap.webextUrl+
"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";return c}},{name:i18n("Resource"),orderField:"resource",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.resource)c=d.name;return c},formatter:function(d){return j.resourcePathFormatter(d.resourceInventoryEntry.resource)}},{name:i18n("Component"),orderField:"component",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.component)c=d.name;return c},formatter:function(d){return j.componentLinkFormatter(d.resourceInventoryEntry.component)}},
{name:i18n("Version"),orderField:"version",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.version)c=d.name;return c},formatter:function(d){return j.versionLinkFormatter(d.resourceInventoryEntry.version)}},{name:i18n("Date"),orderField:"date",getRawValue:function(d){return new Date(d.resourceInventoryEntry.date)},formatter:function(d){return util.tableDateFormatter(d,d.resourceInventoryEntry.date)}},{name:i18n("Actions"),formatter:function(d){var c=document.createElement("a");c.innerHTML=
i18n("Details");c.href="#childComponentProcess/"+appState.applicationProcessRequest.id+"/"+d.activityTraceId+"/"+d.workflowTraceId;return c}}];this.grid=new e({url:bootstrap.restUrl+"deploy/applicationProcessRequest/"+appState.applicationProcessRequest.id+"/changes",serverSideProcessing:!1,columns:h,tableConfigKey:"requestResourceChangeList",noDataMessage:i18n("No component version found."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()},typeFormatter:function(e){var d="";"INSTALL"===e.type?d=i18n("Installed"):"UNINSTALL"===e.type&&(d=i18n("Uninstalled"));return d}})})},"deploy/widgets/IconLegend":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","dojo/dom-construct","dojo/string"],function(l,m,k,j,e){return k("deploy.widgets.IconLegend",[m,l],{templateString:'<div class="legend-container"><div class="legend-title">'+i18n("Key")+'</div><div class="legend-table" data-dojo-attach-point="legendTable"></div></div>',
postCreate:function(){this.inherited(arguments);this.staticIconClass=this.staticIconClass||"";this.redraw()},redraw:function(){this.legendTable.innerHTML="";this.iconData.forEach(function(e){j.place(this.generateLegendColumnDom(e),this.legendTable)},this)},keyTableTemplate:'<div class="legend-column"></div>',generateLegendColumnDom:function(h){var d=j.toDom(e.substitute(this.keyTableTemplate,{}));h.forEach(function(c){j.place(this.generateKeyRowDom(c),d)},this);return d},keyRowTemplate:'<div class="legend-row"><div class="legend-cell"><div class="legend-icon ${staticIconClass} ${iconClass}"></div><div class="legend-icon-legend"><span>${iconLabel}</span></div></div></div>',
generateKeyRowDom:function(h){return j.toDom(e.substitute(this.keyRowTemplate,{iconLabel:h.legend,iconClass:h.iconClass,staticIconClass:this.staticIconClass}))}})})},"deploy/widgets/environmentComparison/EnvironmentFileComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,deploy/widgets/component/ComponentFileTable".split(","),function(l,m,k,j,e,h,d){return j("deploy.widgets.component.EnvironmentFileComparison",[m,
l],{templateString:'<div class="environmentFileComparison"><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this;this.componentFileTables=[];e.get({url:bootstrap.restUrl+"deploy/component",content:{filterFields:["applications.id"],"filterValue_applications.id":c.application.id,"filterType_applications.id":"eq","filterClass_applications.id":"UUID",outputType:["BASIC","LINKED"]},handleAs:"json",load:function(b){if(b&&1>b.length){var a=h.create("div",
{innerHTML:i18n("No files found."),style:"margin:10px;"});h.place(a,c.tableAttach)}k.forEach(b,function(a){e.get({url:bootstrap.restUrl+"deploy/environment/"+c.environment1.id+"/compareFiles/"+c.environment2.id+"/"+a.id,handleAs:"json",load:function(b){0!==c.componentFileTables.length&&h.create("div",{"class":"hr",style:{marginTop:"15px"}},c.tableAttach);b.tooMany?(h.create("div",{"class":"containerLabel",innerHTML:i18n("File Difference Report for %s",a.name.escape())+"<br/><br/>"},c.tableAttach),
h.create("div",{innerHTML:i18n("One or both environments contain more than one version of component %s",a.name.escape()),style:{marginLeft:"40px"}},c.tableAttach)):b.environment1Version?b.environment2Version?(b=new d({component:a,version:b.environment1Version,otherVersion:b.environment2Version,title1:"Environment: "+c.environment1.name,title2:"Environment: "+c.environment2.name}),c.componentFileTables.push(b),b.placeAt(c.tableAttach)):(h.create("div",{"class":"containerLabel",innerHTML:i18n("File Difference Report for %s",
a.name.escape())+"<br/><br/>"},c.tableAttach),h.create("div",{innerHTML:i18n("No version of component %s has been deployed to %s.",a.name.escape(),c.environment2.name.escape()),style:{marginLeft:"40px"}},c.tableAttach)):(h.create("div",{"class":"containerLabel",innerHTML:i18n("File Difference Report for %s",a.name.escape())+"<br/><br/>"},c.tableAttach),h.create("div",{innerHTML:i18n("No version of component %s has been deployed to %s.",a.name.escape(),c.environment1.name.escape()),style:{marginLeft:"40px"}},
c.tableAttach))}})})}})},destroy:function(){this.inherited(arguments);k.forEach(this.componentFileTables,function(c){c.destroy()})}})})},"deploy/widgets/environmentComparison/EnvironmentVersionComparison":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.environmentComparison.EnvironmentVersionComparison",[m,l],{templateString:'<div class="environmentVersionComparison" style="width: 700px"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Component"),formatter:function(d){return j.componentLinkFormatter(d.component)}},{name:i18n("Version"),formatter:function(d){return j.versionLinkFormatter(d.version)}},{name:i18n("Status"),formatter:function(d,c,b){return j.statusFormatter(d.status,c,b)}},{name:this.environment1.name,style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center"},formatter:function(d){var c="";if(d.environment1)c=document.createElement("img"),c.src=
bootstrap.webextUrl+"images/webext/icons/icon_check_green.png";return c}},{name:this.environment2.name,style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center"},formatter:function(d){var c="";if(d.environment2)c=document.createElement("img"),c.src=bootstrap.webextUrl+"images/webext/icons/icon_check_green.png";return c}}];this.grid=new e({url:bootstrap.restUrl+"deploy/environment/"+this.environment1.id+"/compareVersions/"+this.environment2.id,serverSideProcessing:!1,columns:h,tableConfigKey:"environmentComparisonList",
noDataMessage:i18n("No inventory found for either environment."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/environmentComparison/ComponentPropertiesTable":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable"],function(l,m,k,j){return k("deploy.widgets.environmentComparison.ComponentPropertiesTable",[m,l],{templateString:'<div><div class="containerLabel" data-dojo-attach-point="labelAttach"></div><div class="innerContainer"><div data-dojo-attach-point="gridAttach"></div></div></div>',
postCreate:function(){this.inherited(arguments);this.labelAttach.innerHTML=i18n("Active Property Report for %s",this.component.name.escape());var e=[{name:i18n("Name"),field:"name"},{name:this.environment1.name,field:"environment1Value",formatter:function(e,d){var c=i18n("Not deployed");d&&(c=d);return c}},{name:this.environment2.name,field:"environment2Value",formatter:function(e,d){var c=i18n("Not deployed");d&&(c=d);return c}}];this.grid=new j({url:bootstrap.restUrl+"deploy/environment/"+this.environment1.id+
"/compareProperties/"+this.environment2.id+"/"+this.component.id,serverSideProcessing:!1,columns:e,tableConfigKey:"componentPropertiesList",noDataMessage:i18n("No properties found."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/environmentComparison/EnvironmentConfigComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,deploy/widgets/environmentComparison/ComponentPropertiesTable".split(","),
function(l,m,k,j,e,h,d){return j("deploy.widgets.environmentComparison.EnvironmentConfigComparison",[m,l],{templateString:'<div class="environmentConfigComparison"><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this;this.componentPropertiesTables=[];e.get({url:bootstrap.restUrl+"deploy/component",content:{filterFields:["applications.id"],"filterValue_applications.id":c.application.id,"filterType_applications.id":"eq","filterClass_applications.id":"UUID"},
handleAs:"json",load:function(b){if(b&&1>b.length){var a=h.create("div",{innerHTML:i18n("No configuration comparisons found."),style:"margin:10px;"});h.place(a,c.tableAttach)}k.forEach(b,function(a){0!==c.componentPropertiesTables.length&&h.create("div",{"class":"hr",style:{marginTop:"15px"}},c.tableAttach);a=new d({component:a,environment1:c.environment1,environment2:c.environment2});c.componentPropertiesTables.push(a);a.placeAt(c.tableAttach)})}})},destroy:function(){this.inherited(arguments);k.forEach(this.componentPropertiesTables,
function(c){c.destroy()})}})})},"deploy/widgets/resourceRole/EditResourceRole":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.resourceRole.EditResourceRole",[m,l],{templateString:'<div class="editResourceRole">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=this,h="#ffffff",d,c,b;if(this.resourceRole)d=this.resourceRole.id,c=this.resourceRole.name,
b=this.resourceRole.description,h=this.resourceRole.color;this.form=new j({submitUrl:bootstrap.restUrl+"resource/resourceRole",postSubmit:function(){void 0!==e.callback?e.callback():e.resourceRole&&navBar.setHash("resourceRole/"+e.resourceRole.id+"/resources",!1,!0)},addData:function(a){if(e.resourceRole)a.existingId=d},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:c});this.form.addField({name:"description",
label:i18n("Description"),type:"Text",value:b});this.form.addField({name:"color",label:i18n("Color"),required:!0,type:"Color",value:h});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/resourceRole/ResourceRoleEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/resourceRole/EditResourceRole,deploy/widgets/property/PropDefs".split(","),function(l,m,k,j,e,h,d){return m([e],{postCreate:function(){this.inherited(arguments);
this.showList()},showList:function(){var c=this;c.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){c.addHeading(i18n("Basic Settings"));c.showBasicSettings()}});c.addEntry({id:"properties",label:i18n("Role Properties"),action:function(){c.addHeading(i18n("Role Properties"));c.showProperties()}})},addHeading:function(c){j.create("div",{innerHTML:c,"class":"containerLabel"},this.detailAttach)},addDescription:function(c){j.create("div",{innerHTML:c,style:{marginBottom:"10px"}},this.detailAttach)},
showBasicSettings:function(){(new h({resourceRole:appState.resourceRole})).placeAt(this.detailAttach)},showProperties:function(){(new d({readOnly:!config.data.permissions[security.system.createManageResourceRoles],propSheetDefId:appState.resourceRole.propSheetDef.id,propSheetDef:appState.resourceRole.propSheetDef})).placeAt(this.detailAttach)}})})},"deploy/widgets/resourceRole/RolePicker":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h,d,c){return e("deploy.widgets.resourceRole.RolePicker",[m,l],{templateString:'<div class="rolePicker"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="listAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.value=void 0!==this.roles?this.roles:[];this.listAttach.style.paddingTop="5px";j.forEach(this.value,function(a){b.showRole(a)});this.buttonAttach.style.paddingBottom="7px";(new c({restUrl:bootstrap.restUrl+"resource/resourceRole",
onChange:function(a,c){if(c){var d=!1;j.forEach(this.roles,function(a){a.id===c.id&&(d=!0)});d||(b.value.push(c),b.showRole(c));this.setValue("none")}}})).placeAt(this.buttonAttach);(new k({label:i18n("Remove All"),showTitle:!1,onClick:function(){b.clearAll()}})).placeAt(this.buttonAttach)},clearAll:function(){d.empty(this.listAttach);this.value=[]},showRole:function(b){var a=document.createElement("div");a.innerHTML=b.name.escape();h.add(a,"inlineBlock");a.style.padding="3px";a.style.marginLeft=
"3px";a.style.marginBottom="3px";a.style.backgroundColor=b.color;this.listAttach.appendChild(a)}})})},"deploy/widgets/agentRelay/EditRelay":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,js/webext/widgets/ColumnForm,dojo/date/locale,deploy/widgets/security/TeamSelector".split(","),function(l,m,k,j,e,h){return k("deploy.widgets.agentRelay.EditRelay",[m,l],{templateString:'<div class="edit-relay">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){this.inherited(arguments);
var d=this;this.existingValues={};if(this.relay)this.existingValues=this.relay;var c=i18n("Cancel");this.showCancel||(c=null);this.form=new j({submitUrl:bootstrap.restUrl+"relay/"+d.existingValues.id,readOnly:d.readOnly,showButtons:!d.readOnly,cancelLabel:c,postSubmit:function(b){d.noRedirect||navBar.setHash("relay/"+b.id);void 0!==d.callback&&d.callback()},addData:function(b){for(var a in b)b.hasOwnProperty(a)&&"description"!==a&&delete b[a];b.teamMappings=d.teamSelector.teams},onCancel:function(){d.form.setValue("description",
d.existingValues.description);d.noRedirect||navBar.setHash("relay/"+d.existingValues.id)}});this.form.addField({name:"name",label:i18n("Name"),type:"Label",style:"margin-top:0;",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text",value:this.existingValues.description});c=[];if(d.existingValues&&d.existingValues.extendedSecurity&&d.existingValues.extendedSecurity.teams)c=d.existingValues.extendedSecurity.teams;d.teamSelector=new h({resourceRoleType:"Agent Relay",
noneLabel:i18n("Standard Agent Relay"),teams:c});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:d.teamSelector});this.form.addField({name:"relayHostname",label:i18n("Host"),type:"Label",style:"margin-top:0",value:this.existingValues.relayHostname});this.form.addField({name:"hostname",label:i18n("Listening on"),type:"Label",style:"margin-top:0",value:this.existingValues.hostname});this.form.addField({name:"jmsPort",label:i18n("JMS Port"),type:"Label",style:"margin-top:0",value:this.existingValues.jmsPort.toString()});
this.form.placeAt(this.formAttach)}})})},"deploy/widgets/agentRelay/AgentRelayList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/form/TextBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/agentPool/EditAgentPool,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable,dijit/Tooltip".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return h("deploy.widgets.agentPool.AgentRelayList",[m,l],{templateString:'<div class="relay-list"><div class="listTopButtons" data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="tableAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var b=this,d=bootstrap.restUrl+"relay/",e=a.create("div",{className:"relay-version-container warning-state-color"},
this.buttonAttach);a.create("div",{innerHTML:i18n("Min. Required")},e);a.create("div",{innerHTML:config.data.systemConfiguration.relayMinimumRequiredVersion},e);e=a.create("div",{className:"relay-version-container running-state-color"},this.buttonAttach);a.create("div",{innerHTML:i18n("Min. Recommended")},e);a.create("div",{innerHTML:config.data.systemConfiguration.relayMinimumRecommendedVersion},e);b.largest=0;this.getLargest(d,function(a){b.largest=a;a=[b.getNameColumn(),{name:i18n("Description"),
field:"description"},{name:i18n("Status"),field:"status",orderField:"status",filterField:"status",filterType:"select",filterClass:"Enum",filterOptions:[{label:i18n("Online"),value:"ONLINE"},{label:i18n("Offline"),value:"OFFLINE"}],formatter:n.agentStatusFormatter},{name:i18n("Last Contact"),field:"lastContact",orderField:"lastContact",filterField:"lastContact",filterType:"date",filterClass:"Long",formatter:function(a){return util.dateFormatShort(a.lastContact)}},{name:i18n("Version"),field:"version",
filterField:"relayVersion",filterType:"text",filterClass:"String",orderField:"relayVersion"}];b.agent&&a.push({name:i18n("Host")+":"+i18n("Port"),formatter:function(a){return a.relayHostname+":"+a.jmsPort}});a.push({name:i18n("Agent Status"),field:"activeAgents",formatter:b.activeAgentsFormatter,parentWidget:b});b.agent||a.push({name:i18n("Total Agents"),field:"totalAgents",formatter:b.agentsFormatter,parentWidget:b});var a={url:d,serverSideProcessing:!0,orderField:"name",selectorField:"id",sortType:"asc",
columns:a,hidePagination:!1,hideExpandCollapse:!0,selectable:function(a){return!a.isRoot},isSelectable:function(a){return b.isSelectable(a)},queryData:{outputType:["BASIC","SECURITY"]}},e="";if(b&&b.agent&&b.agent.relayId)e=b.agent.relayId;b.agent?(a.tableConfigKey="agentRelayAgentIncludeList",a.noDataMessage=i18n("No agent relays include this agent."),a.baseFilters=[{name:"endpointId",type:"eq",values:[e],className:"String"}]):(a.tableConfigKey="agentRelayList",a.noDataMessage=i18n("No agent relays have been added yet."));
b.grid=new u(a);b.grid.placeAt(b.tableAttach);var f=[];c.forEach(b.getBulkWriteActions(),function(a){f.push(a)});if(f&&0<f.length){var h=new s({options:f,label:i18n("Actions...")});h.placeAt(b.buttonAttach);a=function(){var a=b.grid.getSelectedItems().length;0===a?(h.set("label",i18n("Actions...")),h.set("disabled",!0)):(h.set("label",i18n("Actions... (%s)",a)),h.set("disabled",!1))};b.grid.on("selectItem",a);b.grid.on("deselectItem",a);b.grid.on("displayTable",a)}})},getLargest:function(a,b){var d=
0;dojo.xhrGet({url:a,handleAs:"json",load:function(a){c.forEach(a,function(a){if(a.totalAgents>d)d=a.totalAgents});"function"===typeof b&&b(d)}})},getNameColumn:function(){var c=this;return{name:i18n("Name"),orderField:"name",filterField:"name",filterType:"custom",formatter:function(d,e,f){f.style.position="relative";e=a.create("div",{"class":"inlineBlock",style:"margin-right:30px;"});f=n.relayLinkFormatter(d);b.add(f,"inlineBlock");a.place(f,e);a.place(c.actionsFormatter(d),e);return e},getRawValue:function(a){return a.name},
getFilterFields:function(){var a=[];a.push(new e({name:"name","class":"filter",style:{width:"45%"},placeHolder:"basic"===c.currentView?i18n("Agent Name"):i18n("Name"),type:"like"}));return a}}},actionsFormatter:function(b){var d=a.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),e=[];c.forEach(this._getRelayActions(b),function(a){e.push(a)});e.length&&(new s({options:e,label:i18n("Actions...")})).placeAt(d);return d},agentsFormatter:function(b,c){var d=100*
c/this.parentWidget.largest,e=a.create("div",{"class":"grid-cell-bar-agents"}),f=a.create("div");f.innerHTML=c;a.place(f,e);f=a.create("div",{"class":"meter"});d=a.create("span",{style:"width:"+d+"%;"});a.place(d,f);new w({connectId:[e],label:0===c||"0"===c?i18n("No agents."):i18n("Total agents:"+c),showDelay:100,position:["above"]});a.place(f,e);return e},activeAgentsFormatter:function(b,c){var d=a.create("div",{"class":"grid-cell-bar-active-agents"});if(0<b.totalAgents){if(b.totalAgents<b.activeAgents)c=
b.activeAgents=b.totalAgents;var e=100*c/b.totalAgents,f=a.create("div"),h=a.create("span");h.innerHTML=b.activeAgents;var j=a.create("span",{style:"float:right;"});j.innerHTML=b.totalAgents-b.activeAgents;a.place(h,f);a.place(j,f);a.place(f,d);f=a.create("div",{"class":"meter"});e=a.create("span",{style:"width:"+e+"%;"});a.place(e,f);new w({connectId:[d],label:i18n("Online agents:")+b.activeAgents+", "+i18n("Offline agents:"+(b.totalAgents-b.activeAgents)),showDelay:100,position:["above"]});a.place(f,
d)}return d},getBulkWriteActions:function(){var a=this;return[{label:i18n("Delete"),onClick:function(){var b=a._getSelected();a.confirmDeletes(b,b.length)}}]},_getRelayActions:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.confirmDeletes([a.id],1)}}]},isSelectable:function(){return!0},_getSelected:function(){return c.map(this.grid.getSelectedItems(),function(a){return a.id})},confirmDeletes:function(a,b,c){var e=this;1>b?(new t({message:i18n("Please select at least one agent relay to delete")})).startup():
new o({message:i18n("Are you sure you want to delete %s agent relays?",b),action:function(){d.del({url:bootstrap.restUrl+"relay",headers:{"Content-Type":"application/json"},putData:JSON.stringify({relayIds:a}),load:function(){c&&c();e.grid.block();setTimeout(function(){e.grid.unblock();e.grid.refresh()},1E3)},error:function(a){(new t({messages:[i18n("Error deleting relays:"),"",util.escape(a.responseText)]})).startup();e.grid.unblock()}})}})}})})},"deploy/widgets/agentPool/EditAgentPool":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/DialogMultiSelect,js/webext/widgets/Alert,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c){return k("deploy.widgets.agentPool.EditAgentPool",[m,l],{templateString:'<div class="editAgentPool">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){this.inherited(arguments);var b=this;this.existingValues={};this.agentPool?this.existingValues=this.agentPool:this.source?(this.existingValues=this.source,this.existingValues.name=void 0):j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Agent Pool",handleAs:"json",sync:!0,
load:function(a){b.existingValues.extendedSecurity={teams:a}}});var a=i18n("Cancel");this.showCancel||(a=null);this.form=new e({submitUrl:bootstrap.restUrl+"agent/pool",readOnly:b.readOnly,showButtons:!b.readOnly,cancelLabel:a,postSubmit:function(a){navBar.setHash("agentPool/"+a.id);void 0!==b.callback&&b.callback()},addData:function(a){if(b.agentPool)a.existingId=b.existingValues.id;if(b.source)a.copyId=b.existingValues.id;a.teamMappings=b.teamSelector.teams},onError:function(a){new d({message:util.escape(a.responseText)})},
onCancel:function(){void 0!==b.callback&&b.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});a=[];if(b.existingValues&&b.existingValues.extendedSecurity&&b.existingValues.extendedSecurity.teams)a=b.existingValues.extendedSecurity.teams;b.teamSelector=new c({resourceRoleType:"Agent Pool",noneLabel:i18n("Standard Agent Pool"),
teams:a});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:b.teamSelector});this.form.addField({name:"agents",type:"TableFilterMultiSelect",url:bootstrap.restUrl+"agent",label:i18n("Add Agents"),description:i18n("Select the agent or agents to add to the pool."),defaultQuery:{filterFields:"requiredActions",filterType_requiredActions:"eq",filterValue_requiredActions:security.agent.addToAgentPool},value:this.existingValues.agents,required:!0});this.form.placeAt(this.formAttach)}})})},
"deploy/widgets/agentRelay/RelayEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/agentRelay/EditRelay,deploy/widgets/property/PropValues".split(","),function(l,m,k,j,e,h,d){return m([h],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var c=this;c.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){c.addHeading(i18n("Basic Settings"));
c.showBasicSettings()}})},addHeading:function(c){e.create("div",{innerHTML:c,"class":"containerLabel"},this.detailAttach)},addDescription:function(c){e.create("div",{innerHTML:c,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({relay:appState.relay})).placeAt(this.detailAttach)}})})},"deploy/widgets/snapshot/SnapshotVersionSelection":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/registry,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/_base/window,dojo/dnd/Source,dojo/dom,dojo/dom-geometry,dojo/dom-construct,dojo/dom-style,dojo/on,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,js/webext/widgets/form/MenuButton,js/webext/widgets/ColumnForm,deploy/widgets/version/VersionSelect,deploy/widgets/version/VersionDisplay".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y){return h("deploy.widgets.snapshot.SnapshotVersionSelection",[m,l],{templateString:'<div class="versionSelector" style="margin-top:15px;"><div data-dojo-attach-point="buttonAttach" class="inlineBlock"></div><div data-dojo-attach-point="gridAttach"></div></div>',versionDisplays:{},postCreate:function(){this.originalCompVersions=[];this.createVersionForm()},createVersionForm:function(){this.createVersionTable();this.snapshot.versionsLocked||(this.addSelectForAll(),
this.addRevertButton(),this.addLockButton())},showNameDialog:function(a){var b=this;this.nameDialog&&this.nameDialog.destroy();this.nameForm&&this.nameForm.destroy();this.nameDialog=new o({title:i18n("Add Versions With Name...")});n.create("div",{innerHTML:i18n("Warning: This action will remove any existing versions from the snapshot."),style:{fontWeight:"bold",padding:"3px 15px",marginLeft:"150px"}},this.nameDialog.containerNode);this.nameForm=new v({postSubmit:function(){b.nameDialog.destroy();
b.nameForm.destroy()},onCancel:function(){b.nameDialog.destroy();b.nameForm&&b.nameForm.destroy()},onSubmit:function(c){c&&d.put({url:a+"/"+c.name,handleAs:"json",load:function(){b.grid.refresh()},error:function(a){new q({messages:[i18n("Error adding component versions:"),"",util.escape(a.responseText)]})}})}});this.nameForm.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",description:i18n("Use * as a wildcard. Without wildcard character, exact match is used.")});this.nameForm.placeAt(this.nameDialog.containerNode);
this.nameDialog.show()},showCopyFromEnvironmentDialog:function(){var a=this,b=new o({title:i18n("Copy Versions from Environment")});n.create("div",{innerHTML:i18n("Warning: This action will remove any existing versions from the snapshot."),style:{fontWeight:"bold",padding:"3px 15px",marginLeft:"150px"}},b.containerNode);var c=new v({submitUrl:null,postSubmit:function(){b.hide();b.destroy();a.grid.refresh()},onCancel:function(){b.hide();b.destroy()}});c.addField({name:"environmentId",label:i18n("Environment"),
type:"TableFilterSelect",required:!0,url:bootstrap.restUrl+"deploy/environment",defaultQuery:{filterFields:["application.id","active"],"filterType_application.id":"eq","filterValue_application.id":a.applicationId,filterType_active:"eq",filterValue_active:!0,filterClass_active:"Boolean"},onChange:function(b,d){if(d)c.submitUrl=bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+"/versions/fromEnvironment/"+d.id},allowNone:!1});c.placeAt(b.containerNode);b.show()},showCreateCompressedVersionDialog:function(a){var b=
this;this.versionNameDialog&&this.versionNameDialog.destroy();this.versionNameForm&&this.versionNameForm.destroy();this.versionNameDialog=new o({title:i18n("Create merged version for component %s",a.name)});this.versionNameForm=new v({submitUrl:null,preSubmit:function(c){b.versionNameForm.submitUrl=bootstrap.restUrl+"deploy/snapshot/"+b.snapshot.id+"/createCompressedVersion/"+a.zosComponentId+"/"+util.encodeIgnoringSlash(c.version)},postSubmit:function(a){b.versionNameDialog.destroy();b.versionNameForm.destroy();
navBar.setHash("version/"+a.id,!1,!0)},onCancel:function(){b.versionNameDialog.destroy();b.versionNameForm&&b.versionNameForm.destroy()},onError:function(a){new q({messages:[i18n("Error merging component versions:"),"",util.escape(a.responseText)]})}});this.versionNameForm.addField({name:"version",label:i18n("Version Name"),required:!0,type:"Text",description:i18n("The version name for the merged version.")});this.versionNameForm.placeAt(this.versionNameDialog.containerNode);this.versionNameDialog.show()},
showCopyFromSnapshotDialog:function(){var a=this,b=new o({title:i18n("Copy Versions from Snapshot")});n.create("div",{innerHTML:i18n("Warning: This action will remove any existing versions from the snapshot."),style:{fontWeight:"bold",padding:"3px 15px",marginLeft:"150px"}},b.containerNode);var c=new v({submitUrl:null,postSubmit:function(){b.hide();b.destroy();a.grid.refresh()},onCancel:function(){b.hide();b.destroy()}});c.addField({name:"snapshotId",label:i18n("Snapshot"),type:"TableFilterSelect",
url:bootstrap.restUrl+"deploy/application/"+a.applicationId+"/snapshots/false",onChange:function(b,d){if(d)c.submitUrl=bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+"/versions/fromSnapshot/"+d.id},defaultQuery:{filterFields:["id"],filterType_id:"ne",filterValue_id:a.snapshot.id,filterClass_id:"UUID"}});c.placeAt(b.containerNode);b.show()},addSelectForAll:function(){var a=this,b=[{label:i18n("Latest Available"),onClick:function(){a.addLatestVersions(bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+
"/latestVersions")}},{label:i18n("Copy From Environment..."),onClick:function(){a.showCopyFromEnvironmentDialog()}},{label:i18n("Copy From Snapshot..."),onClick:function(){a.showCopyFromSnapshotDialog()}},{label:i18n("Versions With Name..."),onClick:function(){a.showNameDialog(bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+"/versions")}},{label:i18n("None (Clear All)"),onClick:function(){a.removeAllVersions()}}];this.applyAllSelect=new w({options:b,label:i18n("Select For All...")});this.applyAllSelect.placeAt(a.buttonAttach)},
addRevertButton:function(){var a=this;(new k({label:i18n("Revert"),title:i18n("Reverts To Versions From Original Page Load"),onClick:function(){e.forEach(a.grid.cachedData,function(a){a.desiredVersions=[]});e.forEach(a.originalCompVersions,function(b){e.forEach(b.desiredVersions,function(c){a.addVersion(c.id,c,b)})});a.saveVersions()}})).placeAt(this.buttonAttach)},addLockButton:function(){var a=this;(new k({label:i18n("Lock Versions"),onClick:function(){new s({message:i18n("Are you sure you want to lock the versions on this snapshot? This will prevent any further changes to the list of versions included in this snapshot. Once locked, it cannot be unlocked."),
action:function(){a.grid.block();d.put({url:bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+"/versions/lock"}).then(function(){a.readOnly=!0;n.empty(a.buttonAttach);a.grid.refresh()},function(b){a.grid.unblock();new q({message:i18n("Error locking snapshot versions: %s",util.escape(b.responseText))})})}})}})).placeAt(this.buttonAttach)},createVersionTable:function(){var d=this,h=bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/versions",k=i18n("No components found on the snapshot.");this.grid&&
this.grid.destroy();var o=[{name:i18n("Component"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},formatter:function(a,b,c){b=a.name;a.zosContainerType&&(b+=" ["+a.zosContainerType,a.membersCount&&("directory"===a.zosContainerType?b+=", "+a.membersCount+" "+i18n("files"):"PDS"===a.zosContainerType&&(b+=", "+a.membersCount+" "+i18n("members"))),b+="]");return a.zosComponentId&&!a.isZosArtifact?(c.style.position="relative",c=n.create("div",
{"class":"inlineBlock",style:"margin-"+(f.isBodyLtr()?"right":"left")+":78px;"}),b=n.create("div",{"class":"inlineBlock",innerHTML:b}),n.place(b,c),n.place(d.actionsFormatter(a),c),c):b}},{name:i18n("Versions"),formatter:function(h,k,o){if(h.isZosArtifact)return h.versionsWithTheArtifact;r.set(o,"width","50%");d.clearDisplays(h.id);var k=n.create("div",{"class":"snapshot-version-selection"}),l=n.create("div",{"class":"inlineBlock",id:"tagAttach_"+h.id},k),o=new b(l,{item:h,copyOnly:!1,copyState:function(){return!1},
horizontal:!0,onDndDrop:function(a,b,c,f){if(this===a&&this===f)a=this.item.desiredVersions,b=j.byId(b[0].id).version,c=e.indexOf(a,b),-1!==c&&a.splice(c,1),c=j.byId(f.current.id).version,c=e.indexOf(a,c),-1!==c&&(f.before||c++,a.splice(c,0,b)),d.clearDisplays(this.item.id),d.displayVersions(this.item,l),d.saveVersions();this.onDndCancel()}});l.source=o;n.create("div",{"class":"selectorAttach"},l,"before");if(!d.readOnly){var m=n.create("div",{innerHTML:i18n("Add..."),"class":"inlineBlock linkPointer"},
k);d.addEvent=t(m,"click",function(){var b=this;b.selector&&b.selector.destroy();b.selector=new x({component:h,environment:d.environment,allowInvalidVersions:d.allowInvalidVersions});b.selector.placeAt(dojo.body());var j=f.position(m),k=f.position(dojo.body()),n=0;e.forEach(this.selector.versionAttach.children,function(a){a=f.position(a);n+=a.w});n+=22;k=Math.min(j.x,k.w-n-8);dojo.style(this.selector.versionAttach,{position:"fixed",top:j.y+"px",left:k+"px"});if(b.selector.versionSelect&&b.selector.versionSelect.dropDown)j=
b.selector.versionSelect.dropDown,j.focusNode&&j.focusNode.focus();t(b.selector.versionSelect,"add",function(a){a&&d.addVersion(a.id,a,h)});t(b.selector.versionSelect,"remove",function(a){a&&d.unAddVersion(a.id,a,h)});t(b.selector.latest,"click",function(){d.addLatestVersion(bootstrap.restUrl+"deploy/component/"+h.id+"/latestVersion",h,l);b.selector&&b.selector.destroy()});var o=t(c.doc,"click",function(e){b.selector&&a.isDescendant(e.target,c.doc)&&e.target!==m&&!a.isDescendant(e.target,b.selector.versionAttach)&&
!a.isDescendant(e.target,b.selector.versionAttach.nextSibling)&&(b.selector.destroy(),o.remove(),d.saveVersions())});b.selector.own(o)})}d.displayVersions(h,l);return k}}];d.grid=new u({url:h,processXhrResponse:function(a){if(null!==d.originalCompVersions&&0>=d.originalCompVersions.length)d.originalCompVersions=a},serverSideProcessing:!1,columns:o,noDataMessage:k,hidePagination:!1,hideFooterLinks:!0,hideExpandCollapse:!0,getChildUrl:function(a){var b=bootstrap.restUrl+"deploy/snapshot/"+d.snapshot.id+
"/"+a.zosComponentId+"/fileTree";a.$ref&&(b=bootstrap.restUrl+"deploy/snapshot/"+d.snapshot.id+"/"+a.zosComponentId+"/fileTree/"+util.encodeIgnoringSlash(a.$ref));return b}});d.grid.placeAt(d.gridAttach)},displayVersions:function(a,b){var c=this;e.forEach(a.desiredVersions,function(d){var e=new y({version:d,readOnly:c.readOnly,onDelete:function(){c.deleteVersion(d,e)}});e.placeAt(b);c.versionDisplays[a.id].push(e);b.source.setItem(e.id,{type:["text"]})})},clearDisplays:function(a){e.forEach(this.versionDisplays[a],
function(a){a.destroy()});this.versionDisplays[a]=[]},deleteVersion:function(a,b){var c=this;d.del({url:bootstrap.restUrl+"deploy/snapshot/"+c.snapshot.id+"/versions/"+a.id,handleAs:"json",load:function(){b.destroy();c.grid&&c.grid.refresh()},error:function(a){new q({messages:[i18n("Error deleting component versions:"),"",util.escape(a.responseText)]})}})},unAddVersion:function(a,b,c){a&&(a=e.indexOf(c.desiredVersions,b),0<=a&&c.desiredVersions.splice(a,1),(a=this.versionDisplays[c.id])&&(this.versionDisplays[c.id]=
e.filter(a,function(a){a.version.id===b.id&&a.destroy();return a.version.id!==b.id})))},addVersion:function(a,b,c){if(a){var d=e.indexOf(this.grid.cachedData,c);e.some(c.desiredVersions,function(b){return b===a})||c.desiredVersions.push(b);-1===d?this.grid.cachedData.push(c):this.grid.cachedData[d]=c}},saveVersions:function(){var a=this,b={versionIds:[]};e.forEach(a.grid.cachedData,function(a){e.forEach(a.desiredVersions,function(a){b.versionIds.push(a.id)})});d.put({url:bootstrap.restUrl+"deploy/snapshot/"+
a.snapshot.id+"/versions",putData:JSON.stringify(b),load:function(){a.grid.refresh()},error:function(a){new q({messages:[i18n("Error adding component versions:"),"",util.escape(a.responseText)]})}})},addLatestVersions:function(a){var b=this;d.put({url:a,load:function(){b.grid.refresh()},error:function(a){new q({messages:[i18n("Error adding latest component versions:"),"",util.escape(a.responseText)]})}})},addLatestVersion:function(a,b){var c=this;d.get({url:a,handleAs:"json",load:function(a){a&&(c.addVersion(a.id,
a,b),c.saveVersions())}})},removeAllVersions:function(){var a=this;d.put({url:bootstrap.restUrl+"deploy/snapshot/"+a.snapshot.id+"/versions",putData:JSON.stringify({versionIds:[]}),sync:!0,load:function(){a.grid.refresh()},error:function(a){new q({messages:[i18n("Error adding component versions:"),"",util.escape(a.responseText)]})}})},_getValueAttr:function(){var a={};e.forEach(this.grid.cachedData,function(b){a[b.id]=b.desiredVersions});return a},actionsFormatter:function(a){var b=this,c=n.create("div",
{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[{label:i18n("Merge"),onClick:function(){b.showCreateCompressedVersionDialog(a)}}];d.length&&(new w({options:d,label:i18n("Actions...")})).placeAt(c);return c}})})},"deploy/widgets/snapshot/SnapshotConfiguration":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/property/PropValues,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,deploy/widgets/configTemplate/EditConfigTemplate,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e("deploy.widgets.snapshot.SnapshotConfiguration",[m,l],{templateString:'<div class="snapshotConfiguration"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="configTree"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/snapshot/"+this.snapshotId+"/configurationByPath/",d=[{name:i18n("Name"),field:"name",formatter:function(a){return i18n(a.name)},getRawValue:function(a){return a.name}},
{name:i18n("Version"),formatter:function(a){var b;!0===a.locked?b=a.version:void 0!==a.version&&null!==a.version&&(b=i18n("Latest (%s)",a.versionCount));return b}},{name:i18n("Commit"),formatter:function(a){var b="";a.commit&&(b=i18n("%s on %s",a.commit.committer,util.dateFormatShort(a.commit.commitTime)));return b}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.tree=new o({url:b+"base",serverSideProcessing:!1,hideExpandCollapse:!0,orderField:"name",noDataMessage:i18n("No configuration found."),
columns:d,hasChildren:function(a){return!!a.treePath},getChildUrl:function(a){return b+util.encodeIgnoringSlash(a.treePath)}});this.tree.placeAt(this.configTree);if(!this.readOnly){var d=c.create("table",{style:{width:"620px",borderSpacing:"10px",borderCollapse:"separate"}},this.buttonAttach),e=c.create("tr",{},d),f=c.create("td",{},e);(new k({label:i18n("Copy from Snapshot"),showTitle:!1,onClick:function(){a.showCopyFromSnapshotDialog()}})).placeAt(f);c.create("td",{innerHTML:i18n("Copies all selected configuration versions from another snapshot.")},
e);e=c.create("tr",{},d);f=c.create("td",{},e);(new k({label:i18n("Reset All to Latest"),showTitle:!1,onClick:function(){a.showLatestDialog()}})).placeAt(f);c.create("td",{innerHTML:i18n("Updates all configuration in this snapshot so that it uses the latest available version of that configuration. Any additional changes to the configuration will also be pulled into this snapshot until it is locked.")},e);e=c.create("tr",{},d);f=c.create("td",{},e);(new k({label:i18n("Set Latest Entries to Current"),
showTitle:!1,onClick:function(){a.showLatestLockDialog()}})).placeAt(f);c.create("td",{innerHTML:i18n('Sets all configuration in this snapshot which is currently marked as "Latest" so that it will no longer take any future changes. This prevents automatically absorbing configuration changes, but does not prevent manual changes to the version of each configuration object being used.')},e);d=c.create("tr",{},d);e=c.create("td",{},d);(new k({label:i18n("Lock Configuration"),showTitle:!1,onClick:function(){a.showLockConfigDialog()}})).placeAt(e);
c.create("td",{innerHTML:i18n("Locks all configuration to the current version selected and prevents any future changes. This cannot be reversed.")},d)}},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div");if("PropSheet"===a.className){var f=c.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink"},e);b(f,"click",function(){d.showProperties(a.name,a)})}else"ComponentProcess"===a.className?c.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink",
href:"#componentProcess/"+a.id+"/"+a.version},e):"ApplicationProcess"===a.className?c.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink",href:"#applicationProcess/"+a.id+"/"+a.version},e):"ApprovalProcess"===a.className?c.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink",href:"#environment/"+a.environmentId+"/approvals"},e):"ConfigTemplate"===a.className&&(f=c.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink"},e),b(f,"click",function(){d.showConfigTemplate(a.name,
a)}));a.path&&!d.readOnly&&(f=c.create("a",{innerHTML:i18n("Set Version"),"class":"linkPointer actionsLink"},e),b(f,"click",function(){d.showSetVersion(a)}));return e},showProperties:function(b,c){var d=new r({title:i18n("Property Details: %s",util.escape(b)),closable:!0,draggable:!0,style:{width:"500px"}});(new a({propSheet:c,showDescription:!1,readOnly:!0})).placeAt(d.containerNode);d.show()},showConfigTemplate:function(a,b){var c=i18n("View Configuration Template: %s",util.escape(a)),c=new r({title:c,
closable:!0,dtaggable:!0}),d=new q({readOnly:!0,component:{id:b.componentId},configTemplate:b});d.refresh();d.placeAt(c.containerNode);c.show()},showSetVersion:function(a){var e=this,f=new r({title:i18n("Set Version")}),k=c.create("div",{style:{overflowY:"auto",maxHeight:"200px",maxWidth:"350px",paddingRight:"30px"}},f.containerNode);f.show();d.get({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(a.path)+"/commits",handleAs:"json",load:function(d){d.reverse();var n=d.length;j.forEach(d,
function(j){var o=h.clone(n);if(o===d.length){var l=c.create("a",{innerHTML:i18n("Always use latest version"),style:{display:"block",padding:"1px"},"class":"linkPointer"},k);b(l,"click",function(){e.updateConfigurationVersion(f,a,o,j,!0)})}l=c.create("a",{innerHTML:i18n("%s: %s on %s",n,j.committer,util.dateFormatShort(j.commitTime)),style:{display:"block",padding:"1px"},"class":"linkPointer"},k);b(l,"click",function(){e.updateConfigurationVersion(f,a,o,j)});n--})}})},showCopyFromSnapshotDialog:function(){var a=
this,b=new r({title:i18n("Copy Configuration from Snapshot")});c.create("div",{innerHTML:i18n("Warning: This action will remove any existing configuration from the snapshot."),style:{fontWeight:"bold",padding:"3px 15px",marginLeft:"150px"}},b.containerNode);var d=new n({submitUrl:null,postSubmit:function(){b.hide();b.destroy();a.tree.refresh()},onCancel:function(){b.hide();b.destroy()}});d.addField({name:"snapshotId",label:i18n("Snapshot"),required:!0,type:"TableFilterSelect",url:bootstrap.restUrl+
"deploy/application/"+this.applicationId+"/snapshots/false",autoSelectFirst:!0,onChange:function(b,c){if(c)d.submitUrl=bootstrap.restUrl+"deploy/snapshot/"+a.snapshotId+"/configuration/fromSnapshot/"+c.id},defaultQuery:{filterFields:["id"],filterType_id:"ne",filterValue_id:a.snapshotId}});d.placeAt(b.containerNode);b.show()},updateConfigurationVersion:function(a,b,c,e,h){var j=this;h&&(c=-1);d.put({url:bootstrap.restUrl+"deploy/snapshot/"+j.snapshotId+"/configuration/"+util.vc.encodeVersionedPath(b.path)+
"/"+c,load:function(){j.tree.refreshSiblingsForItem(b);a.hide();a.destroy()},error:function(b){new f({messages:[i18n("Error setting snapshot configuration version:"),"",util.escape(b.responseText)]});a.hide();a.destroy()}})},showLatestDialog:function(){var a=this;new t({message:i18n("Are you sure you want to reset all configuration to the latest version?"),action:function(){a.tree.block();d.del({url:bootstrap.restUrl+"deploy/snapshot/"+a.snapshotId+"/configuration",load:function(){a.tree.unblock();
a.tree.refresh()}})}})},showLatestLockDialog:function(){var a=this;new t({message:i18n("This action will lock all configuration which is automatically using the latest version available. Are you sure you want to lock all loose configuration targets?"),action:function(){a.tree.block();d.put({url:bootstrap.restUrl+"deploy/snapshot/"+a.snapshotId+"/configuration/lockAllToCurrent",load:function(){a.tree.unblock();a.tree.refresh()}})}})},showLockConfigDialog:function(){var a=this;new t({message:i18n("Are you sure you want to lock the configuration of this snapshot? This will prevent any further changes to the configuration selected for this snapshot. Once locked, it cannot be unlocked."),
action:function(){a.tree.block();d.put({url:bootstrap.restUrl+"deploy/snapshot/"+a.snapshotId+"/configuration/lock"}).then(function(){a.readOnly=!0;c.empty(a.buttonAttach);a.tree.refresh()},function(b){a.tree.unblock();new f({message:i18n("Error locking snapshot versions: ",util.escape(b.responseText))})})}})}})})},"deploy/widgets/snapshot/SnapshotRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.snapshot.SnapshotRequestHistory",[m,l],{templateString:'<div class="snapshotRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=[{name:i18n("Process"),formatter:function(b){b.applicationProcess.application=b.application;return h.applicationProcessLinkFormatter(b.applicationProcess)}},{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(b){return util.dateFormatShort(b.entry.scheduledDate)},
orderField:"calendarEntry.scheduledDate"},{name:i18n("By"),field:"userName"},{name:i18n("Status"),formatter:function(b,a,c){return h.requestStatusFormatter(b,a,c)}},{name:i18n("Actions"),formatter:function(b){var a=document.createElement("div"),c=document.createElement("a");c.className="actionsLink";c.innerHTML=i18n("View Request");c.href="#applicationProcessRequest/"+b.id;a.appendChild(c);return a}}];this.grid=new d({url:bootstrap.restUrl+"deploy/applicationProcessRequest/table",baseFilters:[{name:"environment.id",
type:"eq",className:"UUID",values:[this.environment.id]},{name:"snapshot.id",type:"eq",className:"UUID",values:[this.snapshot.id]}],columns:c,orderField:"calendarEntry.scheduledDate",sortType:"desc",pageOptions:[5,10,25,50,100,250],rowsPerPage:5,tableConfigKey:"snapshotProcessHistory"+this.snapshot.id+"-"+this.environment.id,noDataMessage:i18n("No process history found."),hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()}})})},"deploy/widgets/snapshot/SnapshotEnvironmentList":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dijit/registry,dojo/dnd/Source,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/application/ApplicationEnvironmentList,deploy/widgets/snapshot/SnapshotEnvironmentSummary".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return m([a],{postCreate:function(){this.savingCount=0;this.showInactive=!1;this.environmentSummaries=[];this.setupScroll({query:{outputType:["BASIC",
"SECURITY","LINKED"],orderField:"order"},url:bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/environments",scrollNode:this.dndAttach,bottomOffset:200,noItemsLabel:i18n("No Environments Found!")});this._postCreate()},loadCompliancies:function(){},createEnvironmentSummary:function(a){var b=this,a=new f({draggable:!0,showDelete:!0,application:b.application,snapshot:b.snapshot,environment:a,onApprovalChange:function(){b.snapshotTasks.refresh()}});b.dndAttach&&a.placeAt(b.dndAttach);return a},
buildFilter:function(){var a=this,e="",f=function(b,c){b&&(e=b.get("value"),setTimeout(function(){if(e===b.get("value")){var d=null;if(c&&c.query&&""!==e)d=c.query,k.mixin(d,{outputType:["BASIC","SECURITY","LINKED"],orderField:"order",filterType_name:"like",filterClass_name:"String",filterValue_name:e});a.searchItem(e,{searchAttr:c?c.searchAttr:"name",query:d});a._dontSaveOrder=""===e?!1:!0}else f(b,c)},500))};this.filterTextBox=this.createFilter({type:"TEXT",placeHolder:i18n("Search by Name"),className:"environment-list-search-box environment-list-name-search-box inline-block",
style:{},onChange:function(b){""!==b&&f(a.filterTextBox,{query:{filterFields:["name"]}})}});d.place(this.filterTextBox.domNode,this.filterAttach);c(this.filterTextBox,"keyUp",function(){f(a.filterTextBox,{query:{filterFields:["name"]}})});d.create("span",{innerHTML:i18n("or")},this.filterAttach);this.filterBlueprintSelect=this.createFilter({type:"TableFilterSelect",allowNone:!0,className:"environment-list-search-box inline-block",placeHolder:i18n("Search by Blueprint"),url:bootstrap.restUrl+"deploy/application/"+
this.application.id+"/blueprints/all",formatDropDownLabel:b.environmentBlueprintDropDownFormatter,onChange:function(b,c){var d={},d=c&&c.integrationProviderId?{filterFields:["application.id","externalEnvironment.externalBlueprintName"],"filterType_externalEnvironment.externalBlueprintName":"like","filterValue_externalEnvironment.externalBlueprintName":c?c.name:"","filterClass_externalEnvironment.externalBlueprintName":"String",outputType:["BASIC","SECURITY","LINKED"],orderField:"order"}:{filterFields:["application.id",
"blueprint.name"],"filterType_blueprint.name":"like","filterValue_blueprint.name":c?c.name:"","filterClass_blueprint.name":"String",outputType:["BASIC","SECURITY","LINKED"],orderField:"order"};f(a.filterBlueprintSelect,{query:d})},style:{}});d.place(this.filterBlueprintSelect.domNode,this.filterAttach);c(this.filterTextBox,"focus",function(){a.filterBlueprintSelect&&a.filterBlueprintSelect.dropDown.set("value","",void 0,void 0,"")});c(this.filterBlueprintSelect,"focus",function(){a.filterTextBox&&
""!==a.filterTextBox.get("value")&&(a.filterTextBox.set("value",""),f(a.filterTextBox,"name"))});this.onHitTop(this.dndAttach,function(){h.add(a.domNode,"fixed-top")},function(){h.remove(a.domNode,"fixed-top")},60)}})})},"deploy/widgets/application/ApplicationEnvironmentList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/registry,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/_base/xhr,dojo/dnd/Source,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/dom-attr,dojo/json,dojo/on,dojo/mouse,dojo/query,deploy/widgets/Formatters,deploy/widgets/environment/EnvironmentSummary,js/util/blocker/_BlockerMixin,js/util/infiniteScroll/_InfiniteScrollJsonRestMixin,js/webext/widgets/color/Color,deploy/widgets/environment/EditEnvironmentWizard,deploy/widgets/environment/EditEnvironmentWizardPane,deploy/widgets/environment/CreateEnvironmentDialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E){return d([m,l,y,C],{templateString:'<div class="applicationEnvironmentList application-environment-list"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"><div class="environment-list-help-text"><span class="description-text" data-dojo-attach-point="descriptionAttach"></span><span class="description-text number-of-environments" data-dojo-attach-point="numberAttach"></span></div><div data-dojo-attach-point="savedAttach" class="hide-notification"></div><div data-dojo-attach-point="savedWarningAttach" class="hide-notification"></div></div><div class="application-environment-list-filter" data-dojo-attach-point="filterAttach"><div class="environments-expand-collapse-all"><a class="linkPointer" data-dojo-attach-point="expandAllLink">'+
i18n("Expand All")+'</a><a class="linkPointer" data-dojo-attach-point="collapseAllLink">'+i18n("Collapse All")+'</a></div></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 3px;"></div><div data-dojo-attach-point="dndAttach" class="environment-list"></div><div data-dojo-attach-point="loadingMoreAttachPoint"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.savingCount=0;this.showInactive=!1;this.environmentSummaries=[];config.data.systemConfiguration.enableInactiveLinks&&
((new j({checked:!1,value:"true",onChange:function(b){a.showInactive=b;a._setupScroll();a.showEnvironments()}})).placeAt(this.activeBoxAttach),r.create("div",{innerHTML:i18n("Show Inactive Environments"),"class":"inlineBlock",style:{position:"relative",top:"2px",left:"2px"}},this.activeBoxAttach));this._setupScroll();this.showAddButton();this.showCompareButton();this._postCreate()},_setupScroll:function(){var a=["application.id"],b={filterFields:a,"filterType_application.id":"eq","filterValue_application.id":this.application.id,
"filterClass_application.id":"UUID",outputType:["BASIC","SECURITY","LINKED"],orderField:"order"};if(!this.showInactive)a.push("active"),b.filterType_active="eq",b.filterValue_active=!0,b.filterClass_active="Boolean";this.setupScroll({query:b,url:bootstrap.restUrl+"deploy/environment",scrollNode:this.dndAttach,bottomOffset:200,noItemsLabel:i18n("No Environments Found!")})},_postCreate:function(){var a=this;this.showEnvironments();this.buildFilter();s(this.expandAllLink,"click",function(){a.expandCollapseAllEnvironments(!0)});
s(this.collapseAllLink,"click",function(){a.expandCollapseAllEnvironments()});s(this.savedAttach,u.enter,function(){n.add(a.savedAttach,"hide-notification")});s(this.savedWarningAttach,u.enter,function(){n.add(a.savedWarningAttach,"hide-notification")});q.set(this.descriptionAttach,"innerHTML",i18n("Drag environments by their names to re-order them."))},showAddButton:function(){var a=this;if(a.application.security["Manage Environments"]){var b=new k({label:i18n("Create Environment"),showTitle:!1,
onClick:function(){a.showNewEnvironmentDialog()}});n.add(b.domNode,"idxButtonSpecial inlineBlock");r.place(b.domNode,this.buttonAttach,"first");b=r.create("div",{className:"general-icon add-item-icon linkPointer",title:i18n("Create Environment")},a.filterAttach);this.own(s(b,"click",function(){a.showNewEnvironmentDialog()}))}},showCompareButton:function(){var a=this;this.compareEnvironmentsButton=new k({id:"compareButton",label:i18n("Compare Environments"),disabled:!0,onClick:function(){navBar.setHash("multiEnvironmentComparison/"+
a.application.id)}});n.add(this.compareEnvironmentsButton.domNode,"inlineBlock");r.place(this.compareEnvironmentsButton.domNode,this.buttonAttach,"first")},determineCompareButtonStatus:function(){var a=dijit.byId("compareButton");this.environmentIds&&2<=this.environmentIds.length&&a?(a.set("disabled",!1),a.set("title","")):a&&(a.set("disabled",!0),a.set("title",i18n("Two or more environments are required to view the multi environment comparison page")))},showEnvironments:function(){this.resetIndex();
this.clearList();this.environmentSummaries=[];this.environmentIds=[];this.block();this.loadMoreItems();this.unblock()},loadCompliancies:function(){var b=this;this.environmentIds&&a.post({url:bootstrap.restUrl+"deploy/environment/compliancies",postData:o.stringify({environmentIds:b.environmentIds}),headers:{"Content-Type":"application/json"},handleAs:"json",load:function(a){h.forEach(b.environmentSummaries,function(c){if(c.environment&&c.environment.id){var d=c.environment.id;a[d]&&b._loadCompliancyForEnvironment(c,
a[d])}})}})},_loadCompliancyForEnvironment:function(a,b){if(a.compliancyAttach){r.empty(a.compliancyAttach);var c=b.desiredCount,d=b.correctCount;if(0<c){r.create("div",{className:"successMeter",style:{width:100*(d/c)+"%"}},a.compliancyAttach);r.create("div",{className:"failMeter failed-state-color",style:{width:100-100*(d/c)+"%"}},a.compliancyAttach);var e=r.create("div",{className:"compliancy-label"},a.latestSnapshotAttach,"before");r.create("div",{innerHTML:i18n("Compliancy")},e);r.create("div",
{innerHTML:i18n("%s / %s",d,c)},e)}else e=B.getColorOrConvert(a.environment.color),!e.standard&&e.fallback&&(e=B.getColor(e.fallback)),e=e.value,a.compliancyAttach&&t.set(a.compliancyBackgroundAttach,"backgroundColor",e),r.create("span",{innerHTML:i18n("Compliancy: %s / %s",d,c)},a.compliancyAttach)}},onLoadMoreItems:function(a,b){this._createEnvironmentSummaries(a);this.environmentSummaries&&this.domNode&&t.set(this.domNode,"minHeight",38*this.environmentSummaries.length+140+"px");this.filterTextBox&&
this.filterTextBox.domNode&&n.remove(this.filterTextBox.domNode,"dijitTextBoxError");this.numberAttach&&q.set(this.numberAttach,"innerHTML",1===b?i18n("%s Environment",b):i18n("%s Environments",b));this.determineCompareButtonStatus();this.loadCompliancies();this.environmentIds=[]},onNoItemsFound:function(){this.filterTextBox&&""!==this.filterTextBox.get("value")&&n.add(this.filterTextBox.domNode,"dijitTextBoxError")},clearList:function(){h.forEach(this.environmentSummaries,function(a){a.destroy()});
this.environmentSummaries=[];this.environmentIds=[];this.notLoadingMore=!0},expandCollapseAllEnvironments:function(a){h.forEach(this.environmentSummaries,function(b){a?setTimeout(function(){b.expandEnvironment()},500):b.collapseEnvironment()})},_createEnvironmentSummaries:function(c){var d=this;h.forEach(c,function(a){var b=d.createEnvironmentSummary(a);d.environmentSummaries.push(b);d.environmentIds.push(a.id);n.add(b.domNode,"initial-hide-environment");setTimeout(function(){b&&b.domNode&&n.remove(b.domNode,
"initial-hide-environment")},225)});d.dndContainer?d.dndContainer.sync():(d.dndContainer=new f(d.dndAttach,{withHandles:!0,copyState:function(){return!1},onSelectStart:function(){}}),d.dndContainer.oldOnDrop=d.dndContainer.onDndDrop,d.dndContainer.onDndDrop=function(c,f,j,k){if(d.dndContainer===c&&d.dndContainer===k){this.oldOnDrop(c,f,j,k);b.body()&&n.remove(b.body(),"move-environment");var l=[];h.forEach(this.getAllNodes(),function(a){a=e.byNode(a);l.push(a.environment.id)});!d._dontSaveOrder&&
!d.snapshot?a.put({url:bootstrap.restUrl+"deploy/application/"+d.application.id+"/orderEnvironments",putData:o.stringify(l),handleAs:"json",load:function(){d.showSaved()}}):d.showSaved(!0)}})},createEnvironmentSummary:function(a){var b=this,c=new x({autoExpandInventory:b.autoExpandInventory,environment:a,application:b.application,draggable:!0,showDelete:!0,onSetActive:function(){b.showEnvironments()},onDelete:function(){b.showEnvironments()},onCopy:function(){b.showEnvironments()},onEdit:function(){b.showEnvironments()}});
b.dndAttach&&c.placeAt(b.dndAttach);r.create("span",{innerHTML:i18n("Loading Compliancy..."),style:{color:a.color}},c.compliancyAttach);return c},buildFilter:function(){var a=this,b="",d=function(e,f){e&&(b=e.get("value"),setTimeout(function(){if(e&&b===e.get("value")){var h=null;if(f&&f.query&&""!==b)h=f.query,c.mixin(h,{outputType:["BASIC","SECURITY","LINKED"],orderField:"order","filterType_application.id":"eq","filterValue_application.id":a.application.id,"filterClass_application.id":"UUID",filterType_name:"like",
filterClass_name:"String",filterValue_name:b});a.searchItem(b,{searchAttr:f?f.searchAttr:"name",query:h});a._dontSaveOrder=""===b?!1:!0}else d(e,f)},500))};this.filterTextBox=this.createFilter({type:"TEXT",placeHolder:i18n("Search by Name"),className:"environment-list-search-box environment-list-name-search-box inline-block",style:{},onChange:function(b){""!==b&&d(a.filterTextBox,{query:{filterFields:["application.id","name"]}})}});r.place(this.filterTextBox.domNode,this.filterAttach);s(this.filterTextBox,
"keyUp",function(){d(a.filterTextBox,{query:{filterFields:["application.id","name"]}})});r.create("span",{innerHTML:i18n("or")},this.filterAttach);this.filterBlueprintSelect=this.createFilter({type:"TableFilterSelect",allowNone:!0,searchAttr:"name",className:"environment-list-search-box inline-block",placeHolder:i18n("Search by Blueprint"),url:bootstrap.restUrl+"deploy/application/"+a.application.id+"/blueprints/all",formatDropDownLabel:v.environmentBlueprintDropDownFormatter,onChange:function(b,
c){var e={},e=c&&c.integrationProviderId?{filterFields:["application.id","externalEnvironment.externalBlueprintName"],"filterType_externalEnvironment.externalBlueprintName":"like","filterValue_externalEnvironment.externalBlueprintName":c?c.name:"","filterClass_externalEnvironment.externalBlueprintName":"String",outputType:["BASIC","SECURITY","LINKED"],orderField:"order"}:{filterFields:["application.id","blueprint.name"],"filterType_blueprint.name":"like","filterValue_blueprint.name":c?c.name:"","filterClass_blueprint.name":"String",
outputType:["BASIC","SECURITY","LINKED"],orderField:"order"};d(a.filterBlueprintSelect,{query:e})},style:{}});r.place(this.filterBlueprintSelect.domNode,this.filterAttach);s(this.filterTextBox,"focus",function(){a.filterBlueprintSelect&&a.filterBlueprintSelect.dropDown.set("value","",void 0,void 0,"")});s(this.filterBlueprintSelect,"focus",function(){a.filterTextBox&&""!==a.filterTextBox.get("value")&&(a.filterTextBox.set("value",""),d(a.filterTextBox,"name"))});this.onHitTop(this.dndAttach,function(){n.add(a.domNode,
"fixed-top")},function(){n.remove(a.domNode,"fixed-top")},60)},showSaved:function(a){var b=this,c=a?b.savedWarningAttach:b.savedAttach;if(b.snapshot)c=b.savedWarningAttach;if(!this._saveMessage)this._saveMessage=r.create("div",{className:"saved-notification",innerHTML:'<div class="inline-block general-icon check-icon-large"></div>'+i18n("Environment order saved.")},this.savedAttach),a=b.snapshot?i18n("Environment order is only saved on the Environments page!"):i18n("Environment order is only saved in full list view!"),
r.create("div",{className:"saved-notification notification-warning",innerHTML:'<div class="inline-block general-icon warning-icon-large"></div>'+a},this.savedWarningAttach);this.savingCount++;n.remove(c,"hide-notification");setTimeout(function(){b.savingCount--;0<b.savingCount?b.savingCount--:n.add(c,"hide-notification")},3E3)},destroy:function(){this.inherited(arguments);this.dndContainer&&this.dndContainer.destroy()},showNewEnvironmentDialog:function(){var a=new E({title:i18n("Create Environment"),
closable:!0});a.show();var b=(new A({doneButtonLabel:i18n("Save"),hideDisabled:!0,cancelFunction:function(){a.hide();a.destroy()},style:"width: 650px;"})).placeAt(a.containerNode);a.wizard=b;(new z({dialog:a,application:this.application})).placeAt(b);b.startup()}})})},"deploy/widgets/environment/EnvironmentSummary":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/popup,dijit/TooltipDialog,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-attr,dojo/dom-style,dojo/dom-geometry,dojo/on,dojo/mouse,deploy/widgets/Formatters,deploy/widgets/application/RunApplicationProcess,deploy/widgets/environment/EditEnvironment,js/webext/widgets/Alert,js/webext/widgets/color/Color,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/RestSelect,js/webext/widgets/table/TreeTable,js/webext/widgets/form/MenuButton,deploy/widgets/environment/CreateEnvironmentDialog,deploy/widgets/environment/EditLandscaperBlueprintProperties".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z){return h([m,l],{templateString:'<div class="environment-summary environmentSummary"><div class="environment-summary-highlight left" data-dojo-attach-point="highlightAttachLeft"></div><div class="environment-summary-highlight right" data-dojo-attach-point="highlightAttachRight"></div><div class="environment-summary-wrapper"><div class="environmentContainer environment-information-container no-double-click-select" data-dojo-attach-point="environmentContainer"><div class="environment-compliancy" data-dojo-attach-point="compliancyBackgroundAttach"><div data-dojo-attach-point="compliancyAttach" class="environment-compliancy-wrapper"></div></div><div class="environment-inner-container"><div data-dojo-attach-point="latestSnapshotAttach" class="inlineBlock environment-latest-snapshot"></div><div data-dojo-attach-point="blueprintAttach" class="inline-block external-blueprint"></div></div></div><div class="environment-name-container" data-dojo-attach-point="nameContainerAttach"><div class="environment-summary-buttons" data-dojo-attach-point="buttonsAttach"><div data-dojo-attach-point="executeAttach" class="inlineBlock button-container request-process"></div><div data-dojo-attach-point="snapshotAttach" class="inlineBlock button-container create-snapshot"></div><div data-dojo-attach-point="actionsAttach" class="inlineBlock button-container environment-actions environmentActions"></div></div><div data-dojo-attach-point="nameAttach" class="environment-name"></div></div><div class="clear"></div><div data-dojo-attach-point="detailsAttach" class="environment-details"><div data-dojo-attach-point="gridAttach"></div></div></div></div>',
postCreate:function(){this.inherited(arguments);var a=this;if(this.environment.security.execute){var c=b.create("div",{className:"environment-summary-button",title:i18n("Request Process")},this.executeAttach);b.create("div",{className:"general-icon executeIcon"},c);r(c,"click",function(){a.showDeployDialog()})}appState.application&&appState.application.extendedSecurity&&appState.application.extendedSecurity[security.application.manageSnapshots]&&(c=b.create("div",{className:"environment-summary-button",
title:i18n("Create Snapshot")},this.snapshotAttach),b.create("div",{className:"general-icon snapshotIcon"},c),r(c,"click",function(){a.showNewSnapshotDialog()}));c=[{label:i18n("Compare To"),onClick:function(){a.showCompareDialog()}}];appState.application&&appState.application.security&&appState.application.security["Manage Environments"]&&c.push({label:i18n("Copy"),onClick:function(){a.showCopyDialog()}});this.environment.security["Edit Basic Settings"]&&c.push({label:i18n("Edit"),onClick:function(){a.showEditDialog()}});
var d=this.environment.extEnvironment&&0<this.environment.extEnvironment.length;appState.application&&appState.application.security&&appState.application.security["Manage Environments"]&&d&&c.push({label:i18n("Update from Blueprint..."),onClick:function(){a.showUpdateFromBlueprintDialog()}});this.environment.security.Delete&&c.push({label:i18n("Delete"),onClick:function(){a.confirmDelete()}});(new B({options:c,title:i18n("More..."),iconClass:"general-icon more-actions-icon"})).placeAt(this.actionsAttach);
b.create("div",{innerHTML:i18n("Snapshot:")+"&nbsp;",className:"snapshot-label"},this.latestSnapshotAttach);this.environment.latestSnapshot?b.create("a",{innerHTML:this.environment.latestSnapshot.name.escape(),href:"#snapshot/"+this.environment.latestSnapshot.id},this.latestSnapshotAttach):b.create("div",{innerHTML:i18n("None")},this.latestSnapshotAttach);this._postCreate()},_postCreate:function(){var d=this,e=b.create("div",{className:"expand-node-container"},this.nameContainerAttach);b.create("div",
{"class":"expandNode inline-block"},e);r(e,"click",function(){d.toggleExpand()});r(this.nameContainerAttach,"dblclick",function(){d.toggleExpand()});r(this.environmentContainer,"dblclick",function(){d.toggleExpand()});var h=w.getColorOrConvert(this.environment.color);!h.standard&&h.fallback&&(h=w.getColor(h.fallback));var e=h.value,j=util.getTint(e,0.25);f.set(this.detailsAttach,"borderColor",e);f.set(this.detailsAttach,"borderRightColor",j);h.light&&c.add(this.domNode,"light-colored-environment");
util.isDarkColor(e)&&c.add(this.domNode,"dark-colored-environment");f.set(this.nameContainerAttach,"backgroundColor",e);f.set(this.highlightAttachLeft,"backgroundColor",e);f.set(this.highlightAttachRight,"backgroundColor",j);f.set(this.environmentContainer,"backgroundColor",j);f.set(this.compliancyBackgroundAttach,"backgroundColor",util.getTint(e,0.8));(h=this.actionsAttach||this.previewAttach)&&f.set(h,"borderRightColor",j);var j=this.environment.description,k=b.create("a",{innerHTML:this.environment.name.escape(),
href:"#environment/"+this.environment.id,className:"environment-name-label",title:this.environment.name+(""===j?"":" - ("+j+")")},this.nameAttach);a.set(this.nameAttach,"alt","Environment: "+this.environment.name);var o=this.environment.extEnvironment&&0<this.environment.extEnvironment.length,h=this.environment.blueprint;o&&(e=b.create("div",{className:"inline-block cloud-container",style:{backgroundColor:e}},this.nameAttach,"first"),b.create("div",{className:"general-icon cloud-icon"},e),c.add(this.nameAttach,
"cloud-environment"));if(o||h)e=o?this.environment.extEnvironment[0]:null,b.create("div",{innerHTML:i18n("Blueprint:")},this.blueprintAttach),e?b.create("a",{innerHTML:e.externalBlueprintName.escape(),href:e.externalBlueprintUrl},this.blueprintAttach):b.create("div",{innerHTML:this.environment.blueprint.name.escape(),className:"no-link"},this.blueprintAttach),c.add(this.latestSnapshotAttach,"blueprint-environment");var l=b.create("a",{innerHTML:this.environment.name.escape(),href:"#environment/"+
this.environment.id,className:"environment-name-label-overflow hidden",title:this.environment.name+(""===j?"":" - ("+j+")")},this.nameAttach),m=null,s=!1,q=0;r(d.domNode,t.enter,function(){if(d.nameContainerAttach&&d.buttonsAttach){var a=n.position(d.nameContainerAttach),b=n.position(k),e=n.position(d.buttonsAttach);if(a&&b){var h=b.w,j=a.w-e.w-15;o?j-=25:h+=20;if(j<h){var t=1,u=25,y=1;document&&(r(document,"keydown",function(a){a.shiftKey&&(y=5)}),r(document,"keyup",function(){y=1}));m&&clearInterval(m);
c.remove(l,"hidden");m=setInterval(function(){1>u?(t>h+80&&!o||t>h+100&&o?(t=-1,s=!1):(f.set(k,"marginLeft",-1*t+"px"),t+=y,1>t&&-1<t&&(u=50)),o&&t>h-j+100?(s=!0,q=h+100-t):t>h-j+80&&(s=!0,q=h+80-t)):u--},15)}}}});r(d.domNode,t.leave,function(){m&&(clearInterval(m),s&&f.set(k,"marginLeft",q+"px"),setTimeout(function(){f.set(k,"marginLeft","");c.add(d.nameAttach,"reset-environment-name")},50),setTimeout(function(){c.remove(d.nameAttach,"reset-environment-name")},300));s=!1;q=0;c.add(l,"hidden")});
if(this.draggable)c.add(this.domNode,"dojoDndItem"),c.add(this.nameAttach,"dojoDndHandle"),this.domNode.draggable=!1},toggleExpand:function(){this.expanded?this.collapseEnvironment():this.expandEnvironment()},expandEnvironment:function(){c.add(this.domNode,"expanded");this.showInventoryGrid();this.expanded=!0},collapseEnvironment:function(){c.remove(this.domNode,"expanded");this.expanded=!1},showInventoryGrid:function(){var a;if(!this.grid)a=q.inventoryGridColumnsFormatter(function(a,d,f,h){var n=
function(e){r(e,"click",function(){var e=new x({closable:!0,draggable:!0}),f=function(){e&&e.hide()};b.create("span",{innerHTML:i18n("Inventory For")+"&nbsp;"},e.titleNode);var h=b.create("a",{href:"#component/"+a.component.id,innerHTML:a.component.name.escape()},e.titleNode);r(h,"click",f);(new C({getData:function(){var b=[a];d&&(b=b.concat(d));return b},serverSideProcessing:!1,columns:q.inventoryGridColumnsFormatter(null,f,!0,!0),hideExpandCollapse:!0})).placeAt(e.containerNode);f=(new k({label:i18n("Close"),
onClick:f})).placeAt(e.containerNode,"last");c.add(f.domNode,"underField");e.show()})},o;o=d?q.moreVersionsLinkFormatter(d.length,f):b.create("a",{innerHTML:i18n("(View Details)"),title:i18n("Click to view details"),className:"linkPointer",style:"margin-left: 5px;"},f);n(o);var l=!1;if(d){var m=new e({content:q.versionPopupFormatter(d,!1,n),onMouseLeave:function(){j.close(m);l=!1},className:"inventory-popup"});n(m.connectorNode);r(o,t.enter,function(){j.open({popup:m,around:o})});var s=function(){j.close(m)};
r(o,"click",s);r(m.domNode,"click",s);r(m.connectorNode,"click",s);r(m.domNode,t.enter,function(){l=!0});r(h,t.leave,function(){setTimeout(function(){l||(s(),l=!1)},100)})}}),this.grid=new C({url:bootstrap.restUrl+"deploy/environment/"+this.environment.id+"/latestDesiredInventory/true",serverSideProcessing:!1,columns:a,orderField:"name",sortType:"desc",tableConfigKey:"environmentSummary",noDataMessage:i18n("No components have been installed to this environment."),hideExpandCollapse:!0}),this.grid.placeAt(this.gridAttach)},
destroy:function(){this.inherited(arguments);this.grid&&this.grid.destroy()},showDeployDialog:function(){var a,b=new x({title:i18n("Run Process on %s",util.escape(this.environment.name)),closable:!0,draggable:!0,onCancel:function(){a.destroy()}});a=new o({application:this.application,environment:this.environment,callback:function(){b.hide();b.destroy();a.destroy()}});a.placeAt(b.containerNode);b.show()},showCompareDialog:function(){var a=this,b=new x({title:i18n("Compare %s",this.environment.name.escape()),
closable:!0,draggable:!0}),c=new v({onSubmit:function(c){b.hide();b.destroy();navBar.setHash("environmentComparison/"+a.environment.id+"/"+c.environmentId)},onCancel:function(){b.hide();b.destroy()}}),d=new y({restUrl:bootstrap.restUrl+"deploy/application/"+this.application.id+"/environments/false",isValid:function(b){return b.id!==a.environment.id},allowNone:!1});c.addField({name:"environmentId",label:i18n("Environment"),required:!0,widget:d});c.placeAt(b.containerNode);b.show()},confirmDelete:function(){var a=
this,c=new x({title:i18n("Confirmation")}),e=new v({onSubmit:function(b){d.del({url:bootstrap.restUrl+"deploy/environment/"+a.environment.id,content:b,handleAs:"json",load:function(){if(void 0!==a.onDelete)a.onDelete()},error:function(b){(new u({messages:[i18n("Error deleting environment:"),"",util.escape(b.responseText)]})).startup();a.grid.unblock()}});c.hide();c.destroy()},onCancel:function(){c.hide();c.destroy()},saveLabel:i18n("Delete")}),f=this.environment.extEnvironment&&0<this.environment.extEnvironment.length,
h;(f||this.environment.instanceId)&&e.addField({type:"Checkbox",label:i18n("Delete Cloud Instances"),description:i18n("When checked, any instances in the cloud provider this environment is associated with will be deleted as well."),name:"deleteCloudInstances",value:!0,onChange:function(a){h&&h.widget&&h.widget.set("disabled",a)}});h=e.addField({type:"Checkbox",label:i18n("Delete Attached Resources"),description:i18n("When checked, all base resources in this environment will be deleted, as well as their children."),
name:"deleteAttachedResources",value:!(!this.environment.instanceId&&!f),readOnly:!!f});b.create("div",{innerHTML:i18n("Are you sure you want to delete environment %s?",this.environment.name.escape()),style:{}},c.containerNode);e.placeAt(c.containerNode);c.show()},showCopyDialog:function(){var a=this,b=new x({title:i18n("Copy %s",util.escape(this.environment.name)),closable:!0,draggable:!0});(new s({source:this.environment,application:appState.application,callback:function(){b.hide();b.destroy();
if(void 0!==a.onCopy)a.onCopy()}})).placeAt(b.containerNode);b.show()},showEditDialog:function(){var a=this;d.get({url:bootstrap.restUrl+"deploy/environment/"+this.environment.id,handleAs:"json",load:function(b){var c=new x({title:i18n("Edit %s",util.escape(b.name)),closable:!0,draggable:!0});(new s({environment:b,application:appState.application,callback:function(){c.hide();c.destroy();if(void 0!==a.onEdit)a.onEdit()}})).placeAt(c.containerNode);c.show()}})},showUpdateFromBlueprintDialog:function(){var a=
new A({title:i18n("Update %s from Blueprint",util.escape(this.environment.name)),closable:!0,draggable:!0}),b=appState.application;(new z({environment:this.environment,dialog:a,application:b,callback:function(){a.hide();a.destroy();navBar.setHash("application/"+b.id,!1,!0)}})).placeAt(a.containerNode);a.show()},showNewSnapshotDialog:function(){var a=new x({title:i18n("Create Snapshot"),closable:!0,draggable:!0}),b=new v({submitUrl:bootstrap.restUrl+"deploy/snapshot/fromEnvironment/"+this.environment.id,
onCancel:function(){a.hide();a.destroy()},postSubmit:function(b){a.hide();a.destroy();navBar.setHash("snapshot/"+b.id,!1,!0)}});b.addField({name:"name",label:i18n("Name"),required:!0,type:"Text"});b.addField({name:"description",label:i18n("Description"),type:"Text"});b.placeAt(a.containerNode);a.show()}})})},"deploy/widgets/environment/EditEnvironment":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/DialogMultiSelect,js/webext/widgets/RestSelect,deploy/widgets/Formatters,deploy/widgets/security/TeamSelector,deploy/widgets/resource/ResourceSelector,deploy/widgets/environment/EditLandscaperEnvironmentWizardPane,deploy/widgets/environment/EditEnvironmentBlueprintWizardPane".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return j([m,l],{templateString:'<div class="editEnvironment">  <div data-dojo-attach-point="formAttach"></div></div>',templatePropertyNames:[],templatePropertyPatterns:[],showCancel:!0,postCreate:function(){this.inherited(arguments);var a=this;this.existingValues={color:"#ffffff",snapshotDaysToKeep:0,cleanupDaysToKeep:0,cleanupCountToKeep:0,enableProcessHistoryCleanup:!0,useSystemDefaultDays:!0};this.environment?this.existingValues=this.environment:this.source?
(e.get({url:bootstrap.restUrl+"deploy/environment/"+this.source.id,handleAs:"json",sync:!0,load:function(b){a.source=b}}),this.existingValues=this.source):e.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Environment",handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity={teams:b}}});this.form=new c({submitUrl:bootstrap.restUrl+"deploy/environment",readOnly:a.readOnly,showButtons:(this.environment||this.source)&&"firstDayWizard"!==a.mode,postSubmit:function(){void 0!==
a.callback&&a.callback()},addData:function(b){b.applicationId=a.application.id;if(a.environment)b.existingId=a.environment.id;if(a.source)b.copyId=a.source.id;"SYSTEM_DEFAULT"===b.snapshotLockType&&delete b.snapshotLockType;if("firstDayWizard"!==a.mode)b.teamMappings=a.teamSelector.teams},onError:function(a){a.responseText&&new d({message:util.escape(a.responseText)})},onCancel:function(){void 0!==a.callback&&a.callback()},validateFields:function(b){var c=[];k.forEach(a.templatePropertyNames,function(d){var e=
a.templatePropertyNames[d],d=a.templatePropertyPatterns[d],f=b[e];d&&f&&(a.validatePattern(f,d)||c.push(i18n("Value for property %s does not follow the required pattern.",e)))});if(b.snapshotDaysToKeep){var d=parseInt(b.snapshotDaysToKeep,10);isNaN(d)?c.push(i18n("The application snapshot cleanup days to keep must be an integer.")):-1>d?c.push(i18n("The application snapshot cleanup days to keep must be greater than or equal to -1")):b.snapshotDaysToKeep=d}b.historyCleanupDaysToKeep&&(/^[0-9]+$/.test(b.historyCleanupDaysToKeep)||
c.push(i18n("The Days to Keep Process History must be an integer, 0 or greater.")));return c},cancelLabel:a.showCancel?i18n("Cancel"):null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.source?void 0:this.existingValues.name,onChange:function(b){"firstDayWizard"===a.mode&&a.firstDayWizardModel.set("pre_setEnvironmentName",{environment:a.environment,newName:b})}});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});
!this.environment&&!this.source&&(a.form.addField({name:"_templateInsert",type:"Invisible"}),this.form.addField({type:"Invisible",name:"_blueprintInsert"}),this._addBlueprintField(),this.form.addField({type:"Invisible",name:"_baseResourceInsert"}));if("firstDayWizard"!==this.mode){var b=[];if(a.existingValues&&a.existingValues.extendedSecurity&&a.existingValues.extendedSecurity.teams)b=a.existingValues.extendedSecurity.teams;a.teamSelector=new n({resourceRoleType:"Environment",noneLabel:i18n("Standard Environment"),
teams:b});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:a.teamSelector})}a.form.addField({name:"_settingsInsert",type:"Invisible"});a.form.addField({name:"_templateProperties",type:"Invisible"});a.application.templateId?a.addTemplateFields():a.addSettingsFields();this.form.placeAt(this.formAttach)},_showSnapshotLockType:function(a){var b={ALL:i18n("Component Versions and Configuration"),VERSIONS:i18n("Only Component Versions"),CONFIGURATION:i18n("Only Configuration")};this.form.addField({name:"snapshotLockType",
label:i18n("Snapshot Lock Type"),readOnly:!!a,description:i18n("This setting determines which contents of a snapshot are locked when it is included in a deployment to this environment. Anything left unlocked can still be changed after the snapshot has been deployed."),required:!0,value:this.existingValues.snapshotLockType||"SYSTEM_DEFAULT",type:"Select",allowedValues:[{label:i18n("System Default (%s)",b[config.data.systemConfiguration.defaultSnapshotLockType]),value:"SYSTEM_DEFAULT"},{label:b.ALL,
value:"ALL"},{label:b.VERSIONS,value:"VERSIONS"},{label:b.CONFIGURATION,value:"CONFIGURATION"}]},"_snapshotLockTypeInsert")},_addBlueprintField:function(){var a=this;this.form.addField({name:"blueprintId",label:i18n("Blueprint"),type:"TableFilterSelect",url:bootstrap.restUrl+"deploy/application/"+this.application.id+"/blueprints/all",storeType:"Memory",allowNone:!0,pageSize:1E4,formatDropDownLabel:f.environmentBlueprintDropDownFormatter,onChange:function(b,c){b?"landscaper"===c.source?a._handleLandscaperBlueprints(b,
c):a._handleUcdBlueprints(b):(this.value=void 0,a._removeBlueprintFields())}},"_blueprintInsert")},_removeBlueprintFields:function(){this.form.hasField("baseResourceId")&&this.form.removeField("baseResourceId");this.form.onSubmit=void 0;if(this.blueprintWizardPane)this.dialog.wizard.removeChild(this.blueprintWizardPane),this.blueprintWizardPane.destroyRecursive(),this.blueprintWizardPane=null;this.dialog.wizard.selectedChildWidget.attachDoneFunction();this.dialog.wizard.selectedChildWidget.isLastChild=
!0;this.dialog.wizard.doneButton.set("label","Save");this.dialog.wizard.resize();this.dialog.wizard.selectedChildWidget.refreshWizardIcons()},_handleLandscaperBlueprints:function(a,b){this.form.hasField("baseResourceId")&&this.form.removeField("baseResourceId");if(this.blueprintWizardPane)this.dialog.wizard.removeChild(this.blueprintWizardPane),this.blueprintWizardPane.destroyRecursive(),this.blueprintWizardPane=null;var c=this.form.getData();this.blueprintWizardPane=(new t({environmentData:c,blueprint:b,
dialog:this.dialog,application:this.application})).placeAt(this.dialog.wizard);this.dialog.wizard.selectedChildWidget.detachDoneFunction();this.dialog.wizard.selectedChildWidget.isLastChild=!1;this.dialog.wizard.doneButton.set("label","Create");this.dialog.wizard.resize();this.dialog.wizard.selectedChildWidget.refreshWizardIcons()},_handleUcdBlueprints:function(a){var b=new r({url:bootstrap.restUrl+"resource/resource/tree",isSelectable:function(a){return!a.hasAgent&&a.security["Manage Children"]&&
a.security["Create Resources"]}});this.form.hasField("baseResourceId")||this.form.addField({name:"baseResourceId",label:i18n("Base Resource"),widget:b,required:!0,description:i18n("Choose a resource node in which the resources for this environment should be created.")},"_baseResourceInsert");if(this.blueprintWizardPane)this.dialog.wizard.removeChild(this.blueprintWizardPane),this.blueprintWizardPane.destroyRecursive(),this.blueprintWizardPane=null;var c=[];e.get({url:bootstrap.restUrl+"resource/resourceTemplate/"+
a+"/requiredValues",sync:!0,handleAs:"json",load:function(a){c=a}});c.length?(b=this.form.getData(),this.blueprintWizardPane=(new q({environmentData:b,blueprintId:a,dialog:this.dialog,requiredValues:c,application:this.application})).placeAt(this.dialog.wizard),this.dialog.wizard.selectedChildWidget.detachDoneFunction(),this.dialog.wizard.selectedChildWidget.isLastChild=!1,this.dialog.wizard.doneButton.set("label","Create")):(this.dialog.wizard.selectedChildWidget.attachDoneFunction(),this.dialog.wizard.selectedChildWidget.isLastChild=
!0,this.dialog.wizard.doneButton.set("label","Save"));this.dialog.wizard.selectedChildWidget.refreshWizardIcons();this.dialog.wizard.resize()},showCleanupFields:function(a){this.form.addField({name:"snapshotDaysToKeep",label:i18n("Days to Retain Application Snapshots"),readOnly:!!a,description:i18n("The number of days to retain snapshots after they are no longer the most recently deployed snapshot in this environment. The most recently deployed snapshot is always retained. To retain application snapshots indefinitely, enter -1. To use the system default retention value, enter 0."),
value:this.existingValues.snapshotDaysToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup");this.form.addField({name:"cleanupDaysToKeep",label:i18n("Days to Retain Versions"),readOnly:!!a,description:i18n("The number of days to retain component versions.  To retain component versions indefinitely, enter - 1. To use the system default retention value, enter 0."),value:this.existingValues.cleanupDaysToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup");
this.form.addField({name:"cleanupCountToKeep",label:i18n("Number of Versions to Retain"),readOnly:!!a,description:i18n("The number of versions to retain for each component. To retain all component versions, enter -1. To use the system default retention value, enter 0."),value:this.existingValues.cleanupCountToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup")},showHistoryCleanupFields:function(a){var b=this;this.form.fields.enableProcessHistoryCleanup&&this.form.removeField("enableProcessHistoryCleanup");
this.form.addField({name:"enableProcessHistoryCleanup",label:i18n("Use Deployment History Cleanup"),description:i18n("Select to use deployment history cleanup for this environment. If selected, the deployment history records in this environment are deleted according to the values that you set."),value:!!this.existingValues.enableProcessHistoryCleanup,textDir:"ltr",type:"Checkbox",readOnly:!!a,onChange:function(c){b.showUseSystemDefaultDays(c);c||b.showHistoryCleanupDaysToKeep(c,a)}});this.existingValues.enableProcessHistoryCleanup&&
b.showUseSystemDefaultDays(!0,a)},showUseSystemDefaultDays:function(a,b){var c=this;a?(this.form.addField({name:"useSystemDefaultDays",label:i18n("Use Default Deployment History Retention"),description:i18n("Select to retain the deployment history for the number of days that the administrator set."),value:!!this.existingValues.useSystemDefaultDays,textDir:"ltr",type:"Checkbox",readOnly:!!b,onChange:function(a){c.showHistoryCleanupDaysToKeep(!a,b)}}),this.existingValues.useSystemDefaultDays||c.showHistoryCleanupDaysToKeep(!0,
b)):this.form.removeField("useSystemDefaultDays")},showHistoryCleanupDaysToKeep:function(a,b){a?this.form.addField({name:"historyCleanupDaysToKeep",label:i18n("Days to Retain Deployment History "),description:i18n("The number of days to retain application deployment history. Valid range is 0 or greater"),value:this.existingValues.historyCleanupDaysToKeep,required:!0,textDir:"ltr",type:"Number",readOnly:!!b}):this.form.hasField("historyCleanupDaysToKeep")&&this.form.removeField("historyCleanupDaysToKeep")},
addTemplateFields:function(){var b=this,c=!1,d=config.data.permissions[security.system.createEnvironments],e=config.data.permissions[security.system.createEnvironmentsFromTemplate],f=b.environment&&b.environment.template||b.environmentTemplate;!b.environment&&!b.source&&e?(e=new a({restUrl:bootstrap.restUrl+"deploy/applicationTemplate/"+b.application.templateId+"/"+b.application.templateVersion+"/environmentTemplates",onChange:function(a,d){d?(b.form.hasField("blueprintId")&&(b.form.removeField("blueprintId"),
b._removeBlueprintFields()),b.selectTemplate(d)):(c?(b.resetExistingValues(),b.removeTemplatePropDefFields(),b.removeSettingsFields(),b._addBlueprintField()):c=!0,b.addSettingsFields())}}),b.form.addField({name:"templateId",label:i18n("Environment Template"),description:i18n("The template to use for this environment"),required:!d,widget:e},"_templateInsert")):f?(b.form.addField({name:"templateName",label:i18n("Template"),description:i18n("The template to use for this environment"),readOnly:!0,type:"Text",
value:b.existingValues.template.name},"_templateInsert"),b.selectTemplate(b.existingValues.template)):(b.removeTemplatePropDefFields(),b.source&&b.source.template?b.addSettingsFields(b.source.template):b.addSettingsFields())},selectTemplate:function(a){var b=this;b.removeTemplatePropDefFields();a&&e.get({url:bootstrap.restUrl+"deploy/environmentTemplate/"+a.id+"/"+a.version,handleAs:"json",load:function(a){b.existingValues.color=a.color;b.existingValues.snapshotDaysToKeep=a.snapshotDaysToKeep;b.existingValues.cleanupCountToKeep=
a.cleanupCountToKeep;b.existingValues.cleanupDaysToKeep=a.cleanupDaysToKeep;b.existingValues.historyCleanupDaysToKeep=a.historyCleanupDaysToKeep;b.existingValues.lockSnapshots=a.lockSnapshots;b.existingValues.snapshotLockType=a.snapshotLockType;b.existingValues.requireApprovals=a.requireApprovals;b.existingValues.noSelfApprovals=a.noSelfApprovals;b.existingValues.exemptProcesses=a.exemptProcesses;b.existingValues.requireSnapshot=a.requireSnapshot;b.addTemplatePropDefFields(a);b.addSettingsFields(a)}})},
addTemplatePropDefFields:function(a){var b=this;k.forEach(a.propDefs,function(a){var c=util.clone(a);c.name="template/"+a.name;a.pattern&&(c.description+=i18n(" Required Pattern: %s",a.pattern));util.populatePropValueAndLabel(b.existingValues.properties,c);b.form.addField(c,"_templateProperties");b.templatePropertyNames.push(c.name);b.templatePropertyPatterns.push(c.pattern)})},removeTemplatePropDefFields:function(){var a=this;k.forEach(a.templatePropertyNames,function(b){a.form.removeField(b)})},
removeSettingsFields:function(){this.form.hasField("requireApprovals")&&this.form.removeField("requireApprovals");this.form.hasField("noSelfApprovals")&&this.form.removeField("noSelfApprovals");this.form.hasField("exemptProcesses")&&this.form.removeField("exemptProcesses");this.form.hasField("color")&&this.form.removeField("color");this.form.hasField("_snapshotLockTypeInsert")&&this.form.removeField("_snapshotLockTypeInsert");this.form.hasField("inheritSystemCleanup")&&this.form.removeField("inheritSystemCleanup");
this.form.hasField("snapshotDaysToKeep")&&this.form.removeField("snapshotDaysToKeep");this.form.hasField("cleanupDaysToKeep")&&this.form.removeField("cleanupDaysToKeep");this.form.hasField("cleanupCountToKeep")&&this.form.removeField("cleanupCountToKeep");this.form.hasField("historyCleanupDaysToKeep")&&this.form.removeField("historyCleanupDaysToKeep");this.form.hasField("snapshotLockType")&&this.form.removeField("snapshotLockType");this.form.hasField("lockSnapshots")&&this.form.removeField("lockSnapshots");
this.form.hasField("requireSnapshot")&&this.form.removeField("removeSnapshot")},resetExistingValues:function(){var a=this.existingValues.extendedSecurity;this.existingValues=null;this.existingValues={color:"#ffffff"};this.existingValues.extendedSecurity=a},addSettingsFields:function(a){var c=this,d=c.environment||c.source||a;c.removeSettingsFields();if("firstDayWizard"!==c.mode){c.form.addField({name:"requireApprovals",label:i18n("Require Approvals"),readOnly:!!a,type:"Checkbox",description:i18n("When this is checked, no versions or snapshots can be deployed to this environment without being approved according to the approval process for this environment."),
onChange:function(b){c.showNoSelfApprovalField(b,a)},value:c.existingValues.requireApprovals});c.existingValues.requireApprovals&&c.showNoSelfApprovalField(!0,a);var e=new b({url:bootstrap.restUrl+"deploy/application/"+c.application.id+"/processes/true",value:c.existingValues.exemptProcesses,getLabel:function(a){return a.name.escape()},getValue:function(a){return a.id},disabled:!!a,noSelectionsLabel:i18n("None")});c.form.addField({name:"exemptProcesses",label:i18n("Exempt Processes"),widget:e,description:i18n("Any processes selected here will be exempt from approval, even when the environment normally requires it.")});
c.form.addField({name:"lockSnapshots",label:i18n("Lock Snapshots"),readOnly:!!a,type:"Checkbox",description:i18n("When this is checked, all snapshots used in a request to this deployment will be locked to prevent further changes."),value:c.existingValues.lockSnapshots,onChange:function(b){b?c._showSnapshotLockType(a):c.form.removeField("snapshotLockType")}});c.form.addField({type:"Invisible",name:"_snapshotLockTypeInsert"});c.existingValues.lockSnapshots&&c._showSnapshotLockType(a)}c.form.addField({name:"requireSnapshot",
label:i18n("Require Snapshot"),readOnly:!!a,type:"Checkbox",description:i18n("If this box is checked, any deployment request must use a snapshot instead of individual versions."),value:c.existingValues.requireSnapshot});config.data.systemConfiguration.safeEditFeatureEnabled&&(c.form.addField({name:"_draftProcessInsert",type:"Invisible"}),c.form.addField({name:"allowDrafts",label:i18n("Allow process drafts to be deployed"),readOnly:c.readOnly,type:"Checkbox",description:i18n("Process Drafts will be used for the configured components when deploying to this environment."),
value:c.existingValues.allowDrafts,onChange:function(a){a?c.showComponentsUsingDraftsField():c.form.removeField("componentsUsingDrafts")}},"_draftProcessInsert"),c.existingValues.allowDrafts&&c.showComponentsUsingDraftsField());c.form.addField({name:"color",label:i18n("Color"),readOnly:!!a,type:"ColorPicker",value:c.existingValues.color,onChange:function(a){"firstDayWizard"===c.mode&&c.environment.set("color",a)}});"firstDayWizard"!==c.mode&&(d=!d||0===c.existingValues.cleanupDaysToKeep&&0===c.existingValues.cleanupCountToKeep&&
0===c.existingValues.snapshotDaysToKeep,c.form.addField({name:"inheritSystemCleanup",label:i18n("Use Default Artifact Cleanup Settings"),readOnly:!!a,description:i18n("When selected, this environment uses the artifact cleanup settings for the system or component settings, if available. Clear to provide values for all components and snapshots in this environment."),type:"Checkbox",onChange:function(b){b?(c.form.hasField("cleanupDaysToKeep")&&(c.form.removeField("snapshotDaysToKeep"),c.form.removeField("cleanupDaysToKeep"),
c.form.removeField("cleanupCountToKeep")),c.form.validateFields=function(){return[]}):c.showCleanupFields(a)},value:d}),c.showHistoryCleanupFields(a),d||this.showCleanupFields(a))},showComponentsUsingDraftsField:function(){this.form.addField({name:"componentsUsingDrafts",label:i18n("Components Using Process Drafts"),readOnly:this.readOnly,type:"TableFilterMultiSelect",description:i18n("The components which will be using drafts when deployed."),url:bootstrap.restUrl+"deploy/application/"+appState.application.id+
"/components",value:this.existingValues.componentsUsingDrafts},"_draftProcessInsert")},showNoSelfApprovalField:function(a,b){a?this.form.hasField("noSelfApprovals")||this.form.addField({name:"noSelfApprovals",label:i18n("No Self-Approvals"),readOnly:!!b,type:"Checkbox",description:i18n("When this option is selected, users that submit deployment requests cannot approve their own requests."),value:this.existingValues.noSelfApprovals},"exemptProcesses"):this.form.hasField("noSelfApprovals")&&this.form.removeField("noSelfApprovals")},
submitForm:function(){this.form.submitForm()}})})},"deploy/widgets/environment/EditLandscaperEnvironmentWizardPane":function(){define(["dojo/_base/declare","dojox/widget/WizardPane","deploy/widgets/environment/EditLandscaperBlueprintProperties","dojo/dom-style"],function(l,m,k,j){return l([m],{postCreate:function(){this.inherited(arguments);var e=this;this.page=new k({environmentData:this.environmentData,dialog:this.dialog,blueprint:this.blueprint,callback:function(){e.dialog.hide();e.dialog.destroy();
e.application&&navBar.setHash("#application/"+e.application.id,!1,!0)}});this.attachDoneFunction();this.addChild(this.page,0)},_doneFunction:function(){this.page.submitForm()},attachDoneFunction:function(){this.doneFunction=this._doneFunction},detachDoneFunction:function(){this.doneFunction=null},getData:function(){return this.page.form.getData()},setData:function(e){this.page.environmentData=e},_onShow:function(){this.inherited(arguments);this.refreshWizardIcons()},refreshWizardIcons:function(){j.set(this.dialog.wizardIconNode1,
"display","none");j.set(this.dialog.wizardIconNode2,"display","inline")}})})},"dojox/widget/WizardPane":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,dijit/layout/StackContainer,dijit/layout/ContentPane,dijit/form/Button,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/i18n,dojo/text!./Wizard/Wizard.html,dojo/i18n!dijit/nls/common,dojo/i18n!./nls/Wizard,dojox/widget/WizardPane".split(","),function(l,m,k,j,e){return m("dojox.widget.WizardPane",e,{canGoBack:!0,passFunction:null,
doneFunction:null,startup:function(){this.inherited(arguments);if(this.isFirstChild)this.canGoBack=!1;if(l.isString(this.passFunction))this.passFunction=l.getObject(this.passFunction);if(l.isString(this.doneFunction)&&this.doneFunction)this.doneFunction=l.getObject(this.doneFunction)},_onShow:function(){if(this.isFirstChild)this.canGoBack=!1;this.inherited(arguments)},_checkPass:function(){var e=!0;if(this.passFunction&&l.isFunction(this.passFunction)){var d=this.passFunction();switch(typeof d){case "boolean":e=
d;break;case "string":alert(d),e=!1}}return e},done:function(){this.doneFunction&&l.isFunction(this.doneFunction)&&this.doneFunction()}})})},"dijit/layout/StackContainer":function(){define("dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/has,dojo/_base/lang,dojo/ready,dojo/topic,../registry,../_WidgetBase,./_LayoutWidget,dojo/i18n!../nls/common".split(","),function(l,m,k,j,e,h,d,c,b,a,f){e("dijit-legacy-requires")&&d(0,function(){require(["dijit/layout/StackController"])});k=k("dijit.layout.StackContainer",
f,{doLayout:!0,persist:!1,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);j.add(this.domNode,"dijitLayoutContainer")},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress)},startup:function(){if(!this._started){var a=this.getChildren();l.forEach(a,this._setupChild,this);this.persist?this.selectedChildWidget=b.byId(m(this.id+"_selectedChild")):l.some(a,function(a){if(a.selected)this.selectedChildWidget=a;return a.selected},
this);var d=this.selectedChildWidget;if(!d&&a[0])d=this.selectedChildWidget=a[0],d.selected=!0;c.publish(this.id+"-startup",{children:a,selected:d});this.inherited(arguments)}},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=!0;var a=this.selectedChildWidget;a&&this._showChild(a)}this.inherited(arguments)},_setupChild:function(a){this.inherited(arguments);j.replace(a.domNode,"dijitHidden","dijitVisible");a.domNode.title=""},addChild:function(a,b){this.inherited(arguments);this._started&&
(c.publish(this.id+"-addChild",a,b),this.layout(),this.selectedChildWidget||this.selectChild(a))},removeChild:function(a){this.inherited(arguments);this._started&&c.publish(this.id+"-removeChild",a);if(!this._descendantsBeingDestroyed){if(this.selectedChildWidget===a&&(this.selectedChildWidget=void 0,this._started)){var b=this.getChildren();b.length&&this.selectChild(b[0])}this._started&&this.layout()}},selectChild:function(a,d){a=b.byId(a);if(this.selectedChildWidget!=a){var e=this._transition(a,
this.selectedChildWidget,d);this._set("selectedChildWidget",a);c.publish(this.id+"-selectChild",a);this.persist&&m(this.id+"_selectedChild",this.selectedChildWidget.id)}return e},_transition:function(a,b){b&&this._hideChild(b);var c=this._showChild(a);a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize());return c},_adjacent:function(a){var b=this.getChildren(),c=l.indexOf(b,this.selectedChildWidget),c=c+(a?1:b.length-1);return b[c%b.length]},forward:function(){return this.selectChild(this._adjacent(!0),
!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},_onKeyPress:function(a){c.publish(this.id+"-containerKeyPress",{e:a,page:this})},layout:function(){var a=this.selectedChildWidget;a&&a.resize&&(this.doLayout?a.resize(this._containerContentBox||this._contentBox):a.resize())},_showChild:function(a){var b=this.getChildren();a.isFirstChild=a==b[0];a.isLastChild=a==b[b.length-1];a._set("selected",!0);j.replace(a.domNode,"dijitVisible","dijitHidden");return a._onShow&&a._onShow()||!0},
_hideChild:function(a){a._set("selected",!1);j.replace(a.domNode,"dijitHidden","dijitVisible");a.onHide&&a.onHide()},closeChild:function(a){a.onClose(this,a)&&(this.removeChild(a),a.destroyRecursive())},destroyDescendants:function(a){this._descendantsBeingDestroyed=!0;this.selectedChildWidget=void 0;l.forEach(this.getChildren(),function(b){a||this.removeChild(b);b.destroyRecursive(a)},this);this._descendantsBeingDestroyed=!1}});k.ChildWidgetProperties={selected:!1,disabled:!1,closable:!1,iconClass:"dijitNoIcon",
showTitle:!0};h.extend(a,k.ChildWidgetProperties);return k})},"dijit/layout/_LayoutWidget":function(){define("dojo/_base/lang,../_Widget,../_Container,../_Contained,../Viewport,dojo/_base/declare,dojo/dom-class,dojo/dom-geometry,dojo/dom-style".split(","),function(l,m,k,j,e,h,d,c,b){return h("dijit.layout._LayoutWidget",[m,k,j],{baseClass:"dijitLayoutContainer",isLayoutContainer:!0,buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitContainer")},startup:function(){if(!this._started){this.inherited(arguments);
var a=this.getParent&&this.getParent();if(!a||!a.isLayoutContainer)this.resize(),this.own(e.on("resize",l.hitch(this,"resize")))}},resize:function(a,d){var e=this.domNode;a&&c.setMarginBox(e,a);var h=d||{};l.mixin(h,a||{});if(!("h"in h)||!("w"in h))h=l.mixin(c.getMarginBox(e),h);var j=b.getComputedStyle(e),k=c.getMarginExtents(e,j),o=c.getBorderExtents(e,j),h=this._borderBox={w:h.w-(k.w+o.w),h:h.h-(k.h+o.h)},k=c.getPadExtents(e,j);this._contentBox={l:b.toPixelValue(e,j.paddingLeft),t:b.toPixelValue(e,
j.paddingTop),w:h.w-k.w,h:h.h-k.h};this.layout()},layout:function(){},_setupChild:function(a){d.add(a.domNode,this.baseClass+"-child "+(a.baseClass?this.baseClass+"-"+a.baseClass:""))},addChild:function(a,b){this.inherited(arguments);this._started&&this._setupChild(a)},removeChild:function(a){d.remove(a.domNode,this.baseClass+"-child"+(a.baseClass?" "+this.baseClass+"-"+a.baseClass:""));this.inherited(arguments)}})})},"url:dojox/widget/Wizard/Wizard.html":'<div class="dojoxWizard" dojoAttachPoint="wizardNode">\n    <div class="dojoxWizardContainer" dojoAttachPoint="containerNode"></div>\n    <div class="dojoxWizardButtons" dojoAttachPoint="wizardNav">\n        <button dojoType="dijit.form.Button" type="button" dojoAttachPoint="previousButton">${previousButtonLabel}</button>\n        <button dojoType="dijit.form.Button" type="button" dojoAttachPoint="nextButton">${nextButtonLabel}</button>\n        <button dojoType="dijit.form.Button" type="button" dojoAttachPoint="doneButton" style="display:none">${doneButtonLabel}</button>\n        <button dojoType="dijit.form.Button" type="button" dojoAttachPoint="cancelButton">${cancelButtonLabel}</button>\n    </div>\n</div>\n',
"deploy/widgets/environment/EditEnvironmentBlueprintWizardPane":function(){define(["dojo/_base/declare","dojox/widget/WizardPane","deploy/widgets/environment/EditEnvironmentBlueprintProperties","dojo/dom-style"],function(l,m,k,j){return l([m],{postCreate:function(){this.inherited(arguments);var e=this;this.page=new k({environmentData:this.environmentData,dialog:this.dialog,requiredValues:this.requiredValues,blueprintId:this.blueprintId,callback:function(){e.dialog.hide();e.dialog.destroy();e.application&&
navBar.setHash("#application/"+e.application.id,!1,!0)}});this.attachDoneFunction();this.addChild(this.page,0)},_doneFunction:function(){this.page.submitForm()},attachDoneFunction:function(){this.doneFunction=this._doneFunction},detachDoneFunction:function(){this.doneFunction=null},getData:function(){return this.page.form.getData()},setData:function(e){this.page.setData(e)},refreshWizardIcons:function(){j.set(this.dialog.wizardIconNode1,"display","none");j.set(this.dialog.wizardIconNode2,"display",
"inline")}})})},"deploy/widgets/environment/EditEnvironmentBlueprintProperties":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/DialogMultiSelect,js/webext/widgets/RestSelect,deploy/widgets/resource/ResourceSelector,deploy/widgets/environment/EditCloudResourceParameters,deploy/widgets/resourceTemplate/SmartCloudDeploymentSelector".split(","),function(l,m,k,j,e,h,d,c,b,a){return k([m,l],{templateString:'<div class="editEnvironment">  <div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var c=this;this.form=new e({submitUrl:bootstrap.restUrl+"deploy/environment",readOnly:c.readOnly,showButtons:!1,postSubmit:function(){void 0!==c.callback&&c.callback()},addData:function(a){for(var b in c.environmentData)c.environmentData.hasOwnProperty(b)&&(a[b]=c.environmentData[b]);c.cloudDeploymentSelector.environmentProfile?a.environment_profile=c.cloudDeploymentSelector.environmentProfile:a.cloud_group=c.cloudDeploymentSelector.cloudGroup;a.nodeProperties=
{};for(b in a)if(a.hasOwnProperty(b)&&0===b.indexOf("properties_")){var d=b.substring(11);a.nodeProperties[d]=a[b]}},onCancel:function(){void 0!==c.callback&&c.callback();if(void 0!==c.onCancel)c.onCancel()}});this.form.placeAt(this.formAttach);this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",readOnly:!0,value:this.environmentData.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",readOnly:!0,value:this.environmentData.description});this.cloudDeploymentSelector=
new a({form:c.form,blueprintId:c.blueprintId});this.form.addField({name:"propSectionLabel",type:"SectionLabel",value:i18n("Set property values for nodes to be created for this environment"),style:{fontWeight:"bold"}});dojo.forEach(this.requiredValues,function(a){var d=new b({propDefs:a.propDefs,popupLabel:a.nodePath.escape(),cloudDeploymentSelector:c.cloudDeploymentSelector});c.form.addField({name:"properties_"+a.nodePath,label:"",widget:d})})},setData:function(a){this.environmentData=a;this.form.setValue("name",
this.environmentData.name);this.form.setValue("description",this.environmentData.description)},submitForm:function(){this.form.submitForm()}})})},"deploy/widgets/environment/EditCloudResourceParameters":function(){define("dojo/_base/declare,dojo/on,deploy/widgets/property/PropDefPopupValues,dijit/form/FilteringSelect,dojox/data/JsonRestStore,deploy/widgets/resourceTemplate/SmartCloudDeploymentSelector".split(","),function(l,m,k,j,e){return l([k],{_multipleNICCount:0,postCreate:function(){this.inherited(arguments);
var e=this;e.dialog.connect(e.dialog,"show",function(){e.addCloudGroupField()})},displayPropDef:function(e){var d=null,c=null,c=e.name.lastIndexOf("/");-1<c&&c<e.name.length?(d=e.name.substring(0,c),c=e.name.substring(c+1)):c=d=e.name;if("name"===e.name)this.form.addField({name:"name",label:i18n("Name"),readOnly:!0,type:"SectionLabel",value:i18n("Image Part")});else if("name"===c)this.startsWith(d,"default_add_nic")?this._multipleNICCount+=1:this.form.addField({name:"name",label:i18n("Name"),readOnly:!0,
type:"SectionLabel",value:d});else if("description"===c)this.startsWith(d,"default_add_nic")||this.form.addField({name:"description",label:i18n("Description"),type:"Label",value:e.value,style:{marginTop:"0px",marginBottom:"5px",width:"300px"}});else if("cloud_group"===c)this.form.addField({name:"_cloudGroupInsertionPoint",type:"Invisible"});else if("ip_group"===c)this.form.addField({name:"_ipGroupInsertionPoint",type:"Invisible"}),this.form.addField({name:"_extraNICInsertionPoint",type:"Invisible"});
else if("extra_ip_groups"!==c){if(!e.label)e.label=c;this.form.addField(e);if(e.required&&!e.value)this.isValid=!1}},addCloudGroupField:function(){var h=this;if(h.cloudDeploymentSelector.environmentProfile)h.cloudCloudGroupsStore=new e({target:bootstrap.restUrl+"resource/cloud/connection/"+h.cloudDeploymentSelector.connectionId+"/environmentProfile/"+h.cloudDeploymentSelector.environmentProfile+"/cloudGroup",idAttribute:"id"}),h.cloudGroupSelector=new j({store:h.cloudCloudGroupsStore,searchAttr:"name",
labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0,onChange:function(d){h.cloudGroup=d;h.addIPGroupField()}}),h.form.hasField("cloud_group")&&h.form.removeField("cloud_group"),h.form.addField({name:"cloud_group",label:i18n("Cloud Group"),required:!1,widget:h.cloudGroupSelector},"_cloudGroupInsertionPoint")},addIPGroupField:function(){var e=0;if(this.cloudDeploymentSelector.environmentProfile&&(e=this._generateIPGroupWidget(),this.form.hasField("ip_group")&&
this.form.removeField("ip_group"),this.form.addField({name:"ip_group",label:this._multipleNICCount?i18n("IP Group 0"):i18n("IP Group"),required:!1,widget:e},"_ipGroupInsertionPoint"),this._multipleNICCount))for(e=0;e<this._multipleNICCount;e++){var d="extra_ip_groups["+e+"]";this.form.hasField(d)&&this.form.removeField(d);var c=this._generateIPGroupWidget();this.form.addField({name:d,label:i18n("IP Group "+(e+1)),required:!1,widget:c},"_extraNICInsertionPoint")}},_generateIPGroupWidget:function(){if(!this.cloudIPGroupsStore)this.cloudIPGroupsStore=
new e({target:bootstrap.restUrl+"resource/cloud/connection/"+this.cloudDeploymentSelector.connectionId+"/environmentProfile/"+this.cloudDeploymentSelector.environmentProfile+"/cloudGroup/"+this.cloudGroup+"/ipGroup",idAttribute:"id"});return new j({store:this.cloudIPGroupsStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0})},startsWith:function(e,d){return e.substring(0,d.length)===d}})})},"deploy/widgets/resourceTemplate/SmartCloudDeploymentSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/aspect,dojo/dom-construct,dojo/dom-class,dojo/store/JsonRest,dijit/form/Button,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,js/webext/widgets/select/WebextSelect,deploy/widgets/resourceTemplate/CloudConnectionSelect".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return k([m,l],{templateString:'<div class="collectionSelector">  <div data-dojo-attach-point="selectorAttach" class="versionSelectorComponent"></div></div>',postCreate:function(){var a=this;this.inherited(arguments);a.connectionSelector=new t({store:a.connectionStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0,blueprintId:a.blueprintId,onChange:function(b){a.connectionId=b;a.form.hasField("cloudQuotaSpace")&&
a.form.removeField("cloudQuotaSpace");a.addCloudQuotaField(b)}});a.form.addField({name:"connection",label:i18n("Cloud Connection"),required:!0,widget:a.connectionSelector});a.form.addField({name:"_cloudLocationInsertionPoint",type:"Invisible"})},addCloudQuotaField:function(a){var b=this;b.cloudQuotaSpaceField=b.form.addField({name:"cloudQuotaSpace",label:i18n("Choose Location"),type:"Select",readOnly:!1,intermediateChanges:!0,value:"environment_profile",allowedValues:[{label:i18n("Environment Profile"),
value:"environment_profile"},{label:i18n("Cloud Group"),value:"cloud_group"}],onChange:function(c){"cloud_group"===c?b.addCloudGroupField(a):"environment_profile"===c&&b.addCloudEnvironmentProfilesField(a)}},"_cloudLocationInsertionPoint");b.form.hasField("cloud_group")?(b.form.removeField("cloud_group"),b.addCloudGroupField(a),b.cloudQuotaSpaceField.widget.set("value","cloud_group")):b.form.hasField("environment_profile")?(b.form.removeField("environment_profile"),b.cloudQuotaSpaceField.widget.set("value",
"environment_profile")):b.addCloudEnvironmentProfilesField(a)},addCloudGroupField:function(a){var b=this;b.cloudGroup=void 0;if(b.form.hasField("environment_profile"))b.form.removeField("environment_profile"),b.environmentProfile=void 0;b.cloudCloudGroupsStore=new c({target:bootstrap.restUrl+"resource/cloud/connection/"+a+"/cloudGroup",idAttribute:"id"});b.cloudGroupSelector=new r({store:b.cloudCloudGroupsStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,
intermediateChanges:!0,onChange:function(a){b.cloudGroup=a}});b.cloudGroupField=b.form.addField({name:"cloud_group",label:i18n("Cloud Group"),required:!0,widget:b.cloudGroupSelector},"_cloudLocationInsertionPoint")},addCloudEnvironmentProfilesField:function(a){var b=this;b.environmentProfile=void 0;if(b.form.hasField("cloud_group"))b.form.removeField("cloud_group"),b.cloudGroup=void 0;b.cloudEnvironmentProfilesStore=new c({target:bootstrap.restUrl+"resource/cloud/connection/"+a+"/environmentProfile",
idAttribute:"id"});b.cloudEnvironmentProfilesSelector=new r({store:b.cloudEnvironmentProfilesStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0,onChange:function(a){b.environmentProfile=a}});b.form.addField({name:"environment_profile",label:i18n("Environment Profile"),type:"Select",readOnly:!1,required:!0,widget:b.cloudEnvironmentProfilesSelector},"_cloudLocationInsertionPoint")}})})},"deploy/widgets/resourceTemplate/CloudConnectionSelect":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/_base/lang,dojo/aspect,dojo/dom-construct,dojo/dom-class,dijit/form/Button,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return k("js.deploy.widgets.resourceTemplate.CloudConnectionSelect",[m,l],{templateString:'<div class="collectionSelector">  <div data-dojo-attach-point="selectorAttach" class="versionSelectorComponent"></div>  <div data-dojo-attach-point="buttonAttach" style="vertical-align: top; display:inline-block;" ></div></div>',postCreate:function(){var c=this;this.inherited(arguments);j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Cloud Connection",handleAs:"json",
sync:!0,load:function(a){c.extendedSecurity={teams:a}}});var d=bootstrap.restUrl+"resource/cloud/connection";c.blueprintId&&(d+="?filter_type=blueprint&same_host_as="+c.blueprintId);this.connectionSelector=new n({restUrl:d,onChange:function(a,b){if(a)c.selectedCloudId=a,c.set("value",c.selectedCloudId),c.selectedCloudabel=b.name;c.onChange(a)},isValid:function(){return!0},allowNone:!1});this.newConnectionBtn=new b({label:i18n("New Connection..."),onClick:function(){var b=new a({title:i18n("New Cloud Connection"),
closable:!0,draggable:!0,description:i18n("To create a cloud connection, specify the cloud system to connect to and the credentials for that cloud system. Make sure that you have a user account on the cloud system and that you have the permissions to read information about virtual system patterns, IP groups, cloud groups, and environment profiles.")});this.form=new f({submitUrl:bootstrap.restUrl+"resource/cloud/connection",postSubmit:function(a){b.hide();b.destroy();void 0!==c.callback&&c.callback(a);
c.connectionSelector._updateRestUrl()},addData:function(a){a.teamMappings=c.teamSelector.teams},onCancel:function(){b.hide();b.destroy();void 0!==c.callback&&c.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!1,type:"Text"});this.form.addField({name:"url",label:i18n("Management Console"),required:!0,textDir:"ltr",type:"Text",placeholder:"<hostname>",description:i18n("Specify the host name of the cloud system.")});this.form.addField({name:"username",label:i18n("Username"),
required:!0,description:i18n("The user name of an account that has permission to request cloud resources. The server stores this user name and password and uses it to request cloud resources when you use this cloud connection."),type:"Text"});this.form.addField({name:"password",label:i18n("Password"),required:!0,description:i18n("The password for the user account."),textDir:"ltr",type:"Secure"});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text"});var d=[];if(c.extendedSecurity.teams)d=
c.extendedSecurity.teams;c.teamSelector=new r({resourceRoleType:"Cloud Connection",noneLabel:i18n("Standard Cloud Connection"),teams:d});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:c.teamSelector});this.form.placeAt(b.containerNode);b.show()}});this.connectionSelector.placeAt(this.selectorAttach);this.newConnectionBtn.placeAt(this.buttonAttach)},get:function(a){if(this.connectionSelector)return this.connectionSelector.get(a)},set:function(a,b){if(this.connectionSelector)return this.connectionSelector.set(a,
b)}})})},"deploy/widgets/environment/CreateEnvironmentDialog":function(){define("dojo/_base/declare,js/webext/widgets/Dialog,dojo/dom-construct,dojo/on,dojo/dom-style,dojo/dom,dojo/json,dijit/focus".split(","),function(l,m,k,j,e,h,d,c){return l([m],{templateString:'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">    <div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">    <span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"></span>    <span data-dojo-attach-point="wizardIconNode1"  style="display:none;">        <span data-dojo-attach-point="wizardIconText1" class="iconWizardPage1" ></span>    </span>    <span data-dojo-attach-point="wizardIconNode2"  style="display:none;">        <span data-dojo-attach-point="wizardIconText2" class="iconWizardPage2" ></span>    </span>    <span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabIndex="-1" style="display:inline;">        <span data-dojo-attach-point="closeText" class="icon-Icon_close__ui-05" title="${buttonCancel}"></span>    </span>    </div>    <div data-dojo-attach-point="errorContainer" class="environment-error-container" style="position: relative; display: none;">      <div class="inlineBlock vAlignMiddle minusMargin5Left iconError"></div>      <div data-dojo-attach-point="errorContainerNode" class="inlineBlock vAlignMiddle margin5Left"></div>      <div data-dojo-attach-point="errorContainerDetailNode" class="block vAlignMiddle environment-error-detail" style="display :none;"></div>    </div>    <div data-dojo-attach-point="containerContainer" style="overflow-y: auto;overflow-x: hidden;">       <div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>    </div></div>',
showError:function(b,a,c,d){var h=this,l="";this.errorContainerDetailNode.innerHTML="";if(d&&Array.isArray(d))l=d.length,dojo.forEach(d,function(d){if(d.errorMessage){var e="";"template"===d.source?e=a+": ":"configuration"===d.source&&(e=c+": ");var e=e+d.errorMessage,n=k.create("div",{},h.errorContainerDetailNode),e=k.create("a",{innerHTML:e},n);j(e,"click",function(){h.focusField(b,d)})}});else{var l="1",d=a+": "+d,m=k.create("div",{},h.errorContainerDetailNode);k.create("a",{innerHTML:d},m)}e.set(h.errorContainer,
"display","block");l="1"===l?i18n('%s Error deploying blueprint "%s"',l,a):i18n('%s Errors deploying blueprint "%s"',l,a);l=k.create("a",{innerHTML:util.escape(l)},this.errorContainerNode);j(l,"click",function(){"none"===e.get(h.errorContainerDetailNode,"display")?e.set(h.errorContainerDetailNode,"display","block"):e.set(h.errorContainerDetailNode,"display","none")})},hideError:function(){k.empty(this.errorContainerNode);k.empty(this.errorContainerDetailNode);e.set(this.errorContainer,"display","none")},
showFieldErrors:function(b,a){dojo.forEach(a,function(a){if(a.object.parameters)for(var b in a.object.parameters)if(a.object.parameters.hasOwnProperty(b))break})},getField:function(b,a){var c=null;dojo.forEach(b.fieldsArray,function(b){a&&(b.name===a||b.name==="parameter/"+a)?c=b:"environmentName"===a&&"name"===b.name&&(c=b)});return c},focusField:function(b,a){if(a.object.parameters)for(var d in a.object.parameters)if(a.object.parameters.hasOwnProperty(d)){(d=this.getField(b,d))&&d.widget&&c.focus(d.widget.domNode);
break}}})})},"js/util/infiniteScroll/_InfiniteScrollJsonRestMixin":function(){define("dojo/_base/declare,js/util/infiniteScroll/_InfiniteScrollMixin,dojo/store/JsonRest,dojo/dom-class,dojo/dom-construct,dojo/on,dijit/form/TextBox,js/webext/widgets/FormDelegates".split(","),function(l,m,k,j,e,h,d,c){return l([m],{store:null,url:null,idAttribute:"id",itemsPerPage:15,noItemsLabel:null,onLoadMoreItems:function(){},onPreLoad:function(){},onPostLoad:function(){},onNoItemsFound:function(){},clearList:function(){},
displayLoadingContainer:function(b,a,c){var d=this;if(this.loadingMoreAttachPoint){if(!this._loadingMoreContainer)this._loadingMoreContainer=e.create("div",{className:"infinite-scroll-loading-more-container"},this.loadingMoreAttachPoint),h(this._loadingMoreContainer,"click",function(){d.loadMoreItems(function(){d.notLoadingMore=!0})}),j.add(this.loadingMoreAttachPoint,"hidden");e.empty(this._loadingMoreContainer);a?e.create("div",{className:"infinite-scroll-loading-more-container-text",innerHTML:i18n("Loading...")},
this._loadingMoreContainer):c?e.create("div",{className:"infinite-scroll-loading-more-container-text",innerHTML:d.noItemsLabel||i18n("No items found")},this._loadingMoreContainer):e.create("div",{className:"infinite-scroll-loading-more-container-text linkPointer",innerHTML:i18n("Scroll up or click to load more items")},this._loadingMoreContainer);b?j.remove(this.loadingMoreAttachPoint,"hidden"):j.add(this.loadingMoreAttachPoint,"hidden")}},setupScroll:function(b){if(b.store)this.store=b.store;else if(!this.store&&
b.url)this.url=b.url,this.createStore();if(b.query)this.query=b.query;if(b.scrollNode)this.scrollNode=b.scrollNode;if(b.scrollContainer)this.scrollContainer=b.scrollNode;if(b.bottomOffset)this.bottomOffset=b.bottomOffset;if(b.noItemsLabel)this.noItemsLabel=b.noItemsLabel;this._store={total:-1};b.initialLoad&&this.loadMoreItems();this.addScrollListener();this.displayLoadingContainer(!0,!0)},createStore:function(){this.store=new k({target:this.url,idAttribute:this.idAttribute||"id"})},onScrollBottom:function(b){this.loadMoreItems(b)},
searchItem:function(b,a){var c=this,d=a.searchAttr||"name";a.reset&&(b="");c._query=null;if(a.query)c._query=a.query;else if(b){c._query={name:b};if(a.outputType)c._query.outputType=a.outputType;if(a.orderField)c._query.orderField=a.orderField}else c._query=c.query;c.options={};c.options[d]=b;if(!c._isSearching&&c._previousSearch!==b)c._isSearching=!0,c.resetIndex(),c.displayLoadingContainer(!0,!0),c.clearList(),c.loadMoreItems(function(){c.notLoadingMore=!0;c._isSearching=!1}),c._previousSearch=
b},createFilter:function(b){var a=null;if(b.type){var d=(new c).getDelegate(b.type);if(d){var e=b.className;b.className&&delete b.className;a=new d(b);a.domNode&&e&&j.add(a.domNode,e)}}return a},resetIndex:function(){this._store.startIndex=0;this._store.endIndex=this.itemsPerPage-1;this.searchOptions={start:0}},incrementIndex:function(){this.searchOptions={start:this._store.startIndex};this._store.startIndex=this._store.endIndex+1;this._store.endIndex=this._store.startIndex+this.itemsPerPage-1},loadMoreItems:function(b){var a=
this;this._store.endIndex||this.resetIndex();this.store.headers={Range:"items="+a._store.startIndex+"-"+a._store.endIndex};this.onPreLoad();try{var c=a.store.query(a._query||a.query);if(-1===this._store.total||this._store.startIndex<=this._store.total)a.incrementIndex(),a.displayLoadingContainer(!0,!0),c.then(function(d){c.total.then(function(c){var e=a._store.startIndex<=c;a._store.total=c;a.onLoadMoreItems(d,c,e);a.displayLoadingContainer(e);0===c&&(a.displayLoadingContainer(!0,!1,!0),a.onNoItemsFound());
a.onPostLoad();setTimeout(function(){b&&b()},100)})})}catch(d){b&&b()}}})})},"js/util/infiniteScroll/_InfiniteScrollMixin":function(){define("dojo/_base/declare,dojo/_base/window,dojo/on,dojo/mouse,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-attr,dojo/dom-geometry".split(","),function(l,m,k,j,e,h,d,c,b){return l(null,{scrollNode:null,scrollContainer:null,bottomOffset:50,onScrollBottom:function(a){setTimeout(function(){a()},1E3)},setupScroll:function(a){if(a.scrollNode)this.scrollNode=
a.scrollNode;if(a.scrollContainer)this.scrollContainer=a.scrollNode;if(a.bottomOffset)this.bottomOffset=a.bottomOffset;this.addScrollListener()},addScrollListener:function(){var a=this;this.notLoadingMore=!0;this._determineScrollContainer();this.scrollContainer&&this.scrollNode?this.onscroll=k(this.scrollContainer,"scroll",function(){var c=b.position(a.scrollContainerNode),c=a._windowHeight||c.h,d=b.position(a.scrollNode);if(0===d.h&&0===d.w&&0===d.x&&0===d.y)a.onscroll.remove();else if(d.h+d.y<c+
a.bottomOffset&&a.notLoadingMore)a.notLoadingMore=!1,a.onScrollBottom(function(){setTimeout(function(){a.notLoadingMore=!0},500)})}):console.warn("No node defined for infinite scroll")},onHitTop:function(a,c,d,e){a&&c&&(e||(e=0),this.own(k(window,"scroll",function(){var h=b.position(a);h&&h.y<e?c():d&&d()})))},_determineScrollContainer:function(){if(this.scrollContainer)this.scrollContainerNode=this.scrollContainer;else if(this.scrollContainer=window,this.scrollContainerNode=m.body(),window&&window.innerHeight)this._windowHeight=
window.innerHeight;else if(document&&document.documentElement)this._windowHeight=document.documentElement.clientHeight;if(!this.scrollNode)this.scrollNode=this.domNode}})})},"deploy/widgets/environment/EditEnvironmentWizard":function(){define(["dojo/_base/declare","dojox/widget/Wizard","dojo/dom-class","dojo/dom-style"],function(l,m,k){return l([m],{postCreate:function(){this.inherited(arguments);k.add(this.doneButton.domNode,"idxButtonSpecial");k.add(this.nextButton.domNode,"idxButtonSpecial")},
forward:function(){var j;this.selectedChildWidget.getData&&(j=this.selectedChildWidget.getData());this.inherited(arguments);this.selectedChildWidget.setData&&this.selectedChildWidget.setData(j)}})})},"dojox/widget/Wizard":function(){define("dojo/_base/lang,dojo/_base/declare,dojo/_base/connect,dijit/layout/StackContainer,dijit/layout/ContentPane,dijit/form/Button,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dojo/i18n,dojo/text!./Wizard/Wizard.html,dojo/i18n!dijit/nls/common,dojo/i18n!./nls/Wizard,dojox/widget/WizardPane".split(","),
function(l,m,k,j,e,h,d,c,b,a){return m("dojox.widget.Wizard",[j,d,c],{templateString:a,nextButtonLabel:"",previousButtonLabel:"",cancelButtonLabel:"",doneButtonLabel:"",cancelFunction:null,hideDisabled:!1,postMixInProperties:function(){this.inherited(arguments);var a=l.mixin({cancel:b.getLocalization("dijit","common",this.lang).buttonCancel},b.getLocalization("dojox.widget","Wizard",this.lang)),c;for(c in a)this[c+"ButtonLabel"]||(this[c+"ButtonLabel"]=a[c])},startup:function(){if(!this._started){this.inherited(arguments);
this.connect(this.nextButton,"onClick","_forward");this.connect(this.previousButton,"onClick","back");if(this.cancelFunction){if(l.isString(this.cancelFunction))this.cancelFunction=l.getObject(this.cancelFunction);this.connect(this.cancelButton,"onClick",this.cancelFunction)}else this.cancelButton.domNode.style.display="none";this.connect(this.doneButton,"onClick","done");this._subscription=k.subscribe(this.id+"-selectChild",l.hitch(this,"_checkButtons"));this._started=!0}},resize:function(){this.inherited(arguments);
this._checkButtons()},_checkButtons:function(){var a=this.selectedChildWidget,b=a.isLastChild;this.nextButton.set("disabled",b);this._setButtonClass(this.nextButton);if(a.doneFunction){if(this.doneButton.domNode.style.display="",b)this.nextButton.domNode.style.display="none"}else this.doneButton.domNode.style.display="none";this.previousButton.set("disabled",!this.selectedChildWidget.canGoBack);this._setButtonClass(this.previousButton)},_setButtonClass:function(a){a.domNode.style.display=this.hideDisabled&&
a.disabled?"none":""},_forward:function(){this.selectedChildWidget._checkPass()&&this.forward()},done:function(){this.selectedChildWidget.done()},destroy:function(){k.unsubscribe(this._subscription);this.inherited(arguments)}})})},"deploy/widgets/environment/EditEnvironmentWizardPane":function(){define("dojo/_base/declare,dojox/widget/WizardPane,deploy/widgets/environment/EditEnvironment,js/webext/widgets/Dialog,dojo/dom-construct,dijit/form/Button,dojo/dom-class,js/webext/widgets/Alert,dojo/dom-style".split(","),
function(l,m,k,j,e,h,d,c,b){return l([m],{postCreate:function(){this.inherited(arguments);var a=this;this.page=new k({application:this.application,dialog:this.dialog,callback:function(){a.dialog.hide();a.dialog.destroy();a.application&&navBar.setHash("#application/"+a.application.id,!1,!0)}});this.attachDoneFunction();this.addChild(this.page,0)},_doneFunction:function(){this.page.submitForm()},attachDoneFunction:function(){this.doneFunction=this._doneFunction},detachDoneFunction:function(){this.doneFunction=
null},getData:function(){return this.page.form.getData()},_checkPass:function(){var a=this.page.form.validateRequired();return 0<a.length?(a.unshift(i18n("Please correct the following errors before submitting this form:")),(new c({messages:a})).startup(),!1):!0},_onShow:function(){this.inherited(arguments);this.refreshWizardIcons()},refreshWizardIcons:function(){this.isLastChild?b.set(this.dialog.wizardIconNode1,"display","none"):b.set(this.dialog.wizardIconNode1,"display","inline");b.set(this.dialog.wizardIconNode2,
"display","none")}})})},"deploy/widgets/snapshot/SnapshotEnvironmentSummary":function(){define("dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/dom-geometry,dojo/on,dojo/mouse,dojox/html/entities,deploy/widgets/Formatters,deploy/widgets/application/RunApplicationProcess,deploy/widgets/environment/EditEnvironment,deploy/widgets/environment/EnvironmentSummary,deploy/widgets/snapshot/SnapshotRequestHistory,js/webext/widgets/color/Color,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/RestSelect,js/webext/widgets/form/MenuButton".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){return k("deploy.widgets.snapshot.SnapshotEnvironmentSummary",[q],{templateString:'<div class="environment-summary snapshot-environment-summary environmentSummary snapshotEnvironmentSummary"><div class="environment-summary-highlight left" data-dojo-attach-point="highlightAttachLeft"></div><div class="environment-summary-highlight right" data-dojo-attach-point="highlightAttachRight"></div><div class="environment-summary-wrapper"><div class="environmentContainer environment-information-container no-double-click-select" data-dojo-attach-point="environmentContainer"><div class="environment-compliancy" data-dojo-attach-point="compliancyBackgroundAttach"><div data-dojo-attach-point="compliancyAttach" class="environment-compliancy-wrapper"></div></div><div class="environment-inner-container"><div data-dojo-attach-point="latestSnapshotAttach" class="inlineBlock environmentLatestSnapshot"></div><div data-dojo-attach-point="blueprintAttach" class="inlineBlock external-blueprint"></div></div></div><div class="environment-name-container" data-dojo-attach-point="nameContainerAttach"><div class="environment-summary-buttons"" data-dojo-attach-point="buttonsAttach"><div data-dojo-attach-point="executeAttach" class="inlineBlock button-container request-process"></div><div data-dojo-attach-point="previewAttach" class="inlineBlock button-container preview-snapshot"></div></div><div data-dojo-attach-point="nameAttach" class="environment-name"></div></div><div class="clear"></div><div data-dojo-attach-point="detailsAttach" class="environment-details"><div data-dojo-attach-point="gridAttach"></div></div></div></div>',
postCreate:function(){var a=this;e.add(this.domNode,"snapshot-environment-summary snapshotEnvironmentSummary");if(this.environment.security.execute){var c=h.create("div",{className:"environment-summary-button",title:i18n("Request Process")},this.executeAttach);h.create("div",{className:"general-icon executeIcon"},c);b(c,"click",function(){a.showRunProcessDialog()})}c=h.create("div",{className:"environment-summary-button",title:i18n("Preview")},this.previewAttach);h.create("div",{className:"general-icon preview-icon"},
c);b(c,"click",function(){a.showPreviewDialog()});this._postCreate();var c=this.environment.desiredVersions,f=this.environment.correctVersions;if(0<c){h.create("div",{className:"successMeter",style:{width:100*(f/c)+"%"}},a.compliancyAttach);h.create("div",{className:"failMeter failed-state-color",style:{width:100-100*(f/c)+"%"}},a.compliancyAttach);var j=h.create("div",{className:"compliancy-label"},a.latestSnapshotAttach,"before");h.create("span",{innerHTML:i18n("%s / %s Snapshot Versions Found",
f,c)},j)}else j=s.getColorOrConvert(a.environment.color),!j.standard&&j.fallback&&(j=s.getColor(j.fallback)),d.set(a.compliancyBackgroundAttach,"backgroundColor",util.getTint(j.value,0.1)),h.create("span",{innerHTML:i18n("%s / %s Snapshot Versions Found",f,c)},a.compliancyAttach)},destroy:function(){this.inherited(arguments);this.historyGrid&&this.historyGrid.destroy()},expandEnvironment:function(){e.add(this.domNode,"expanded");this.showHistoryGrid();this.expanded=!0},showHistoryGrid:function(){if(!this.historyGrid)this.historyGrid=
new o({snapshot:this.snapshot,environment:this.environment,application:this.application}),this.historyGrid.placeAt(this.gridAttach)},showRunProcessDialog:function(){var a=new w({title:i18n("Run Process on %s",util.escape(this.environment.name)),closable:!0,draggable:!0});(new r({application:this.application,environment:this.environment,snapshot:this.snapshot,callback:function(){a.hide();a.destroy()}})).placeAt(a.containerNode);a.show()},showPreviewDialog:function(){var a=this,b=new w({title:i18n("Preview Deployment")}),
c=new u({saveLabel:i18n("OK"),onSubmit:function(c){b.hide();b.destroy();navBar.setHash("deploymentPreview/"+a.snapshot.id+"/"+a.environment.id+"/"+c.applicationProcessId,!1,!0)},onCancel:function(){b.hide();b.destroy()}}),d=new x({restUrl:bootstrap.restUrl+"deploy/application/"+this.application.id+"/processes/false",allowNone:!1});c.addField({name:"applicationProcessId",label:i18n("Process"),required:!0,widget:d});c.placeAt(b.containerNode);b.show()}})})},"deploy/widgets/snapshot/EditSnapshot":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,js/webext/widgets/Alert,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h){return j("deploy.widgets.snapshot.EditSnapshot",[m,l],{templateString:'<div class="editSnapshot">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=this;this.versionPickers=[];this.existingValues={};if(this.snapshot)this.existingValues=this.snapshot;this.form=new h({submitUrl:bootstrap.restUrl+"deploy/snapshot",postSubmit:function(c){navBar.setHash("snapshot/"+c.id+"/versions",!1,!0);void 0!==d.callback&&d.callback()},
addData:function(c){c.applicationId=d.application.id;if(d.snapshot)c.existingId=d.snapshot.id;c.versions=[];k.forEach(d.versionPickers,function(b){k.forEach(b.versions,function(a){c.versions.push(a.id)})})},onError:function(c){c.responseText&&new e({message:util.escape(c.responseText)})},onCancel:function(){void 0!==d.callback&&d.callback()},readOnly:this.readOnly,showButtons:!d.readOnly,cancelLabel:void 0===d.snapshot?i18n("Cancel"):void 0});this.form.addField({name:"name",label:i18n("Name"),required:!0,
type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/snapshot/SnapshotEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/snapshot/EditSnapshot,deploy/widgets/snapshot/SnapshotConfiguration".split(","),function(l,m,k,j,e,h,d){return m([e],{postCreate:function(){this.inherited(arguments);
this.showList()},showList:function(){var c=this;c.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){c.addHeading(i18n("Basic Settings"));c.showBasicSettings()}});c.addEntry({id:"advanced",label:i18n("Advanced Settings"),action:function(){c.addHeading(i18n("Advanced Settings"));c.showAdvancedSettings()}})},addHeading:function(c){j.create("div",{innerHTML:c,"class":"containerLabel"},this.detailAttach)},addDescription:function(c){j.create("div",{innerHTML:c,style:{marginBottom:"10px"}},
this.detailAttach)},showBasicSettings:function(){(new h({snapshot:appState.snapshot,application:appState.application,readOnly:!appState.application.extendedSecurity[security.application.manageSnapshots]||appState.snapshot.versionsLocked||appState.snapshot.configLocked})).placeAt(this.detailAttach)},showAdvancedSettings:function(){(new d({snapshotId:appState.snapshot.id,applicationId:appState.application.id,readOnly:!appState.application.extendedSecurity[security.application.manageSnapshots]||appState.snapshot.configLocked})).placeAt(this.detailAttach)}})})},
"deploy/widgets/snapshot/SnapshotTasks":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/approval/TaskResponseDialog,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b){return k("deploy.widgets.snapshot.SnapshotTasks",[m,l],{templateString:'<div class="snapshotTasks"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=
bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/tasks",c=[{name:i18n("Name"),field:"name"},{name:i18n("Approval Process"),formatter:this.approvalProcessFormatter},{name:i18n("Target"),formatter:this.targetFormatter},{name:i18n("Status"),formatter:this.statusFormatter},{name:i18n("Completed By"),formatter:this.completedByFormatter},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new b({serverSideProcessing:!0,url:a,tableConfigKey:"snapshotTaskList",noDataMessage:i18n("No work items found."),
columns:c});this.grid.parentWidget=this;this.grid.placeAt(this.gridAttach)},refresh:function(){this.grid.refresh()},approvalProcessFormatter:function(a){var b=document.createElement("a");b.href="#applicationProcessRequest/"+a.applicationProcessRequest.id;b.innerHTML=a.approval.name.escape();return b},targetFormatter:function(a){var b="";switch(a.approvalType){case "APPLICATION":b=document.createElement("a");b.href="#application/"+a.application.id;b.innerHTML=a.application.name.escape();break;case "EACH_COMPONENT":b=
document.createElement("a");b.href="#component/"+a.component.id;b.innerHTML=a.component.name.escape();break;case "ENVIRONMENT":b=document.createElement("a"),b.href="#environment/"+a.environment.id,b.innerHTML=a.environment.name.escape()}return b},statusFormatter:function(a,b,c){c.style.textAlign="center";b="";switch(a.status){case "OPEN":j.add(c,"running-state-color");b=i18n("Open");break;case "CLOSED":j.add(c,"success-state-color");b=i18n("Complete");break;case "FAILED":j.add(c,"failed-state-color"),
b=i18n("Failed")}return b},completedByFormatter:function(a){var b="";if(a.completedBy)b=a.completedBy,a.completedOn&&(b+=" ("+util.dateFormatShort(a.completedOn)+")");return b},actionsFormatter:function(a){var b=this.parentWidget,d=document.createElement("div");if(a.userCanModify&&"OPEN"===a.status){var j=e.create("a",{innerHTML:i18n("Respond"),"class":"linkPointer actionsLink"},d);h(j,"click",function(){b.showApprovalDialog(a)})}else if(a.comment){j=e.create("a",{},d);h(j,"click",function(){var b=
new c,d=document.createElement("div");d.innerHTML=a.comment.escape();b.containerNode.appendChild(d);d=document.createElement("div");d.innerHTML=" - "+a.completedBy.escape()+" ("+util.dateFormatShort(a.completedOn)+")";d.style.marginTop="8px";d.style.marginLeft="12px";b.containerNode.appendChild(d);b.show()});var k=document.createElement("img");k.src=bootstrap.webextUrl+"images/webext/icons/icon_document_white.gif";k.title=i18n("Approval Log");k.style.margin="0px 2px";j.appendChild(k);d.appendChild(j)}return d},
showApprovalDialog:function(a){var b=this;new d({task:a,callback:function(){b.grid.block();setTimeout(function(){b.grid.unblock();b.grid.refresh();if(void 0!==b.onTaskClose)b.onTaskClose()},1500)}})}})})},"deploy/widgets/snapshot/SnapshotStatuses":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/RestSelect,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j("deploy.widgets.snapshot.SnapshotStatuses",[m,l],{templateString:'<div class="snapshotStatuses"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,c=[{name:i18n("Status"),formatter:b.statusFormatter},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,
orderField:"created",getRawValue:function(a){return new Date(a.created)}},{name:i18n("By"),field:"user",orderField:"user",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new t({url:bootstrap.restUrl+"deploy/snapshot/"+this.snapshot.id+"/status",serverSideProcessing:!1,hideExpandCollapse:!0,hidePagination:!1,columns:c,tableConfigKey:"snapshotStatusList",noDataMessage:i18n("No statuses have been assigned to this snapshot.")});
this.grid.placeAt(this.gridAttach);appState.application.extendedSecurity[security.application.manageSnapshots]&&(c=new k({label:i18n("Add a Status"),showTitle:!1,onClick:function(){a.showAddStatus()}}),h.add(c.domNode,"idxButtonSpecial"),c.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if(appState.application.extendedSecurity[security.application.manageSnapshots]){var f=
d.create("a",{innerHTML:i18n("Remove"),"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.confirmRemoval(a)})}return e},confirmRemoval:function(a){var b=this;new n({message:i18n("Are you sure you want to remove %s?",a.name.escape()),action:function(){e.del({url:bootstrap.restUrl+"deploy/snapshot/"+b.snapshot.id+"/status/"+util.encodeIgnoringSlash(a.name),load:function(){b.grid.refresh()}})}})},showAddStatus:function(){var c=this,d=new f({title:i18n("Add a Status"),closable:!0,draggable:!0}),
e=new a({submitUrl:bootstrap.restUrl,postSubmit:function(){d.hide();d.destroy();c.grid.refresh()},onCancel:function(){d.hide();d.destroy();c.grid.refresh()}}),h=new r({restUrl:bootstrap.restUrl+"deploy/snapshot/"+c.snapshot.id+"/possibleStatuses",getValue:function(a){return a.name},getStyle:function(a){return b.conditionFormatter(a)},allowNone:!1,onChange:function(a,b){if(b&&b.name)e.submitUrl=bootstrap.restUrl+"deploy/snapshot/"+c.snapshot.id+"/status/"+util.encodeIgnoringSlash(b.name)}});e.addField({name:"status",
label:i18n("Status"),required:!0,widget:h});e.placeAt(d.containerNode);d.show()}})})},"deploy/widgets/resource/ResourceConfigInventory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/property/PropValues,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c){return k("deploy.widgets.resource.ResourceConfigInventory",[m,l],{templateString:'<div class="resourceConfigInventory"><div data-dojo-attach-point="configTree"></div></div>',
postCreate:function(){this.inherited(arguments);var b=bootstrap.restUrl+"inventory/resourceConfiguration/"+this.resourceId,a=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Version"),field:"version"},{name:i18n("Commit"),formatter:function(a){var b="";a.commit&&(b=a.commit.committer+" on "+util.dateFormatShort(a.commit.commitTime));return b}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];
this.tree=new c({url:b,serverSideProcessing:!1,orderField:"name",tableConfigKey:"resourceConfigList",noDataMessage:i18n("No configuration has been deployed yet."),columns:a});this.tree.placeAt(this.configTree)},actionsFormatter:function(b){var a=this.parentWidget,c=document.createElement("div");if(b.propSheet){var d=j.create("a",{innerHTML:i18n("View"),"class":"linkPointer actionsLink"},c);e(d,"click",function(){a.showProperties(b.name,b.propSheet)})}return c},showProperties:function(b,a){var c=new d({title:i18n("Property Details: %s",
util.escape(b)),closable:!0,draggable:!0,style:{width:"500px"}});(new h({propSheet:a,showDescription:!1,readOnly:!0})).placeAt(c.containerNode);c.show()}})})},"deploy/widgets/resource/ResourceVarianceBrowser":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/_base/event,dojo/json,dojo/on,dojo/query,dijit/Tooltip,dijit/_TemplatedMixin,dijit/_Widget,dijit/_WidgetBase,js/webext/widgets/table/TreeTable,dijit/form/CheckBox,dojo/dom-construct,dojo/dom-class,js/util/blocker/_BlockerMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return l([a,b,o],{templateString:'<div><div data-dojo-attach-point="buttonAttach" style="margin-top:10px;margin-left:5px"></div><div data-dojo-attach-point="dataDiv"></div></div>',newValueColumnHeading:i18n("New Value"),oldValueColumnHeading:i18n("Old Value"),showChangedOnly:!1,postCreate:function(){var a=this;if(!this.url)this.url=bootstrap.restUrl+"resource/resource/"+this.resource.id+"/variance";var b=[{name:i18n("Name"),field:"name",filterField:"name",
filterType:"text",orderField:"name",getRawValue:function(a){return a.name}},{name:a.newValueColumnHeading,field:"value",filterField:"value",filterType:"text",getRawValue:function(a){return a.value}},{name:a.oldValueColumnHeading,field:"oldValue",filterField:"oldValue",filterType:"text",getRawValue:function(a){return a.oldValue}}];this.tree=new n({url:this.url,noDataMessage:i18n("No fingerprint found from Config Management Server!"),columns:b,serverSideProcessing:!1,orderField:"name",idAttribute:"name",
draggable:!1,selectable:!1,hidePagination:!0,itemPasses:function(b){var c=!0;if(a.showChangedOnly&&(!b.varianceType||"NONE"===b.varianceType))c=!1;return c},applyRowStyle:function(b,c){"ADDED"===b.varianceType?q.add(c,"resourceVarianceAdded"):"REMOVED"===b.varianceType?q.add(c,"resourceVarianceRemoved"):"CHANGED"===b.varianceType?q.add(c,"resourceVarianceChanged"):"CHILD_CHANGED"===b.varianceType&&!a.showChangedOnly&&q.add(c,"resourceVarianceChildChanged")},getItemChildren:function(a){var b=a.children;
if(void 0===b||null===b)b=[];dojo.forEach(a.attributes,function(a){b.push(a)});return b}});(new r({checked:a.showChangedOnly,onChange:function(b){a.showChangedOnly=b;a.tree.refresh()}})).placeAt(this.buttonAttach);t.create("div",{innerHTML:i18n("Show Only Changed"),"class":"inlineBlock",style:{position:"relative",top:"2px",left:"2px"}},this.buttonAttach);this.tree.placeAt(this.dataDiv)}})})},"deploy/widgets/resource/SingleResourceSelector":function(){define("dijit/_Widget,dijit/form/FilteringSelect,dojo/_base/declare,dojox/data/JsonRestStore,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h){return k("deploy.widgets.resource.SingleResourceSelector",[l],{postCreate:function(){this.inherited(arguments);var d=this;if(this.resourceGroup)this.submitUrl=bootstrap.restUrl+"resource/resGroup/static/"+this.resourceGroup.id+"/addResources",this.storeUrl=bootstrap.restUrl+"resource/resGroup/static/"+this.resourceGroup.id+"/unusedResources";this.dialog=new h({title:i18n("Add a Resource"),closable:!0,draggable:!0});var c=new j({target:this.storeUrl,idAttribute:"id"});this.select=
new m({store:c,autoComplete:!1});this.form=new e({submitUrl:this.submitUrl,getData:function(){var b=[];b.push(d.select.value);var a={};if(void 0!==d.storeData)a=d.storeData;a.resources=b;return a},postSubmit:function(){d.dialog.hide();void 0!==d.callback&&d.callback()},onCancel:function(){d.dialog.hide()}});this.form.addField({name:"resource",label:i18n("Select a Resource"),description:i18n("Start typing to filter results. Use * as a wildcard."),required:!0,widget:this.select});this.form.placeAt(this.dialog.containerNode);
this.dialog.show()}})})},"deploy/widgets/resource/ResourceEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/resource/EditResource,deploy/widgets/property/PropDefs,deploy/widgets/property/PropValues".split(","),function(l,m,k,j,e,h,d,c){return m([e],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));
b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Resource Properties"),action:function(){b.addHeading(i18n("Resource Properties"));b.showProperties()}})},addHeading:function(b){j.create("div",{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){j.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new h({showCancel:!1,resource:appState.resource,readOnly:!appState.resource.security["Edit Basic Settings"]})).placeAt(this.detailAttach)},
showProperties:function(){appState.resource.propSheetDef?(new d({propSheetDef:appState.resource.propSheetDef,readOnly:!appState.resource.security["Manage Properties"],onlyValueChange:!0})).placeAt(this.detailAttach):(new c({propSheet:appState.resource.propSheet,readOnly:!appState.resource.security["Manage Properties"]})).placeAt(this.detailAttach)}})})},"deploy/widgets/resource/ResourceConfigurationHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,dojo/_base/array,deploy/widgets/Formatters,deploy/widgets/log/LiveLogViewer,deploy/widgets/resource/TransientResourceCompareTree,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return k([m,l],{templateString:'<div class="resourceConfigurationExecutionList"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var j=[{name:i18n("Command"),formatter:function(a){return i18n(a.command.name).escape()}},{name:i18n("Type"),formatter:function(a){var b="";a.actionType&&("COMPARE"===a.actionType&&(b=i18n("Comparison")),"CONFIGURE"===a.actionType&&(b=i18n("Configuration")),"APPLY"===a.actionType&&(b=
i18n("Apply ")));return b}},{name:i18n("Start"),formatter:function(a){return util.dateFormatShort(a.startTime)}},{name:i18n("End"),formatter:function(a){if(0!==a.endTime)return util.dateFormatShort(a.endTime)}},{name:i18n("Status"),formatter:function(a,b,d){return c.sourceConfigStatusFormatter(a,b,d)}},{name:i18n("Actions"),formatter:function(c){var j=e.create("div"),k=e.create("a",{"class":"linkPointer"},j);h(k,"click",function(){(new b({url:bootstrap.restUrl+"logView/resourceDiscovery/"+c.id+"/stdOut.txt",
title:i18n("Output Log"),autoRefresh:"EXECUTING"===c.status,paddingTop:"0px"})).show()});e.create("div",{className:"general-icon consoleIcon inline-block",title:i18n("Output Log")},k);d.forEach(c.extraFiles,function(a){var d=e.create("a",{"class":"linkPointer"},j);h(d,"click",function(){(new b({url:bootstrap.restUrl+"logView/resourceDiscovery/"+c.id+"/"+a,title:a,autoRefresh:"EXECUTING"===c.status,paddingTop:"0px"})).show()});e.create("div",{className:"general-icon extraLogIcon inline-block",title:a},
d)});c.compareAllowed&&(k=e.create("a",{"class":"linkPointer"},j),h(k,"click",function(){var b=new f({title:i18n("Compare with Live Cell"),closable:!0,draggable:!1,width:-50});(new a({readOnly:!0,url:bootstrap.restUrl+"resource/resource/transientCompare/"+appState.resource.id+"/"+c.id})).placeAt(b.containerNode);b.show()}),e.create("div",{className:"general-icon compareIcon inline-block",title:i18n("Compare")},k));return j}}];this.grid=new n({url:bootstrap.restUrl+"resource/resourceDiscoveryExecution",
baseFilters:[{name:"resource.id",type:"eq",className:"UUID",values:[appState.resource.id]}],columns:j,orderField:"startTime",sortType:"desc",tableConfigKey:"resourceConfigurationHistory",noDataMessage:i18n("No configuration task history found for this resource."),hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/resource/ResourceVarianceTree":function(){define("dijit/form/TextBox,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom-construct,dojo/dom-style,js/webext/widgets/table/TreeTable,deploy/widgets/component/ComponentConfigTemplates,deploy/widgets/environment/EnvironmentResourceTree,deploy/widgets/property/PropDefs,deploy/widgets/property/PropValues,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,deploy/widgets/property/PropSheetDefValues,dojo/on,dijit/form/FilteringSelect,dojox/data/JsonRestStore,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,deploy/widgets/resource/ResourceVarianceBrowser,js/webext/widgets/RestSelect,deploy/widgets/resource/ResourceSelector,deploy/widgets/resource/ResourceTree".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A){return e([m,k],{templateString:'<div class="resourceConfigurationTree"><div class="resourceConfigurationTreeContainer"><div class="resourceConfigurationTreeDiv" data-dojo-attach-point="treeAttach"></div><div class="resourceConfigurationDetail"><div data-dojo-attach-point="detailAttach"></div></div></div></div>',postCreate:function(){this.inherited(arguments);if(!this.url)this.url=bootstrap.restUrl+"resource/resource/tree";this.showTree()},
destroy:function(){this.inherited(arguments);this.tree.destroy()},showTree:function(){var a=this;void 0!==this.tree&&this.tree.destroy();this.tree=new A({showTags:function(){},getOtherColumns:function(){return[]},getActionsOptions:function(){return[]},getSelectOptions:function(){return[]},actionsFormatter:function(){return d.create("div")},getNameColumn:function(){return a.getNameColumn()},hideTopButtons:"true",xhrMethod:"POST",serverSideProcessing:!0,onRowSelect:function(b){a.loadConfigurationDetails(b)}});
this.tree.placeAt(this.treeAttach)},getNameColumn:function(){var a=this;return{name:i18n("Name"),formatter:function(b,c,d){d.style.position="relative";c=b.isRoot?t.resourceLinkFormatterWithPath(b):t.resourceLinkFormatter(b);a.showTags(b,c);a.showDiff(b,c);return c},orderField:"name",filterField:"name",filterType:"text",getFilterFields:function(){return[new l({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Resource Name"),type:"like"})]},getRawValue:function(a){return a.path}}},
showDiffResourceSelect:function(a){var b=this,c=new x({title:i18n("Diff Resource %s",util.escape(a.path)),closable:!0,draggable:!0}),d,e,f,h=new v({saveLabel:i18n("Diff"),cancelLabel:i18n("Cancel"),onSubmit:function(c){var d=bootstrap.restUrl+"resource/resource/"+a.id,e=c.resource.path,f=a.path;c.localVersion?(d=d+"/"+c.localVersion+"/variance/"+c.resource.id,f=f+" - "+c.localVersion):d=d+"/variance/"+c.resource.id;c.version&&(d=d+"/"+c.version,e=e+" - "+c.version);b.loadConfigurationDetailsByUrl(d,
e,f)},postSubmit:function(){d&&d.destroy();e&&e.destroy();h.destroy();c.destroy()},onCancel:function(){d&&d.destroy();e&&e.destroy();h.destroy();c.destroy()},onError:function(){d&&d.destroy();e&&e.destroy();h.destroy();c.destroy()}});d=new B({resourceSelectTitle:i18n("Select resource to diff with %s",util.escape(a.path)),returnEntireObject:!0,onChange:function(a){e&&(e.destroy(),h.removeField("version"));e=new C({restUrl:bootstrap.restUrl+"resource/resource/"+a.id+"/configuration/versions",getValue:function(a){return a},
getLabel:function(a){return a},allowNone:!0,noneLabel:i18n("Latest")});h.addField({name:"version",label:i18n("Version for %s",util.escape(a.path)),widget:e},"_versionInsert")}});f=new C({restUrl:bootstrap.restUrl+"resource/resource/"+a.id+"/configuration/versions",getValue:function(a){return a},getLabel:function(a){return a},allowNone:!0,noneLabel:i18n("Latest")});h.addField({name:"localVersion",label:i18n("Version for %s",util.escape(a.path)),widget:f});h.addField({name:"resource",label:i18n("Resource"),
required:!0,widget:d});h.addField({name:"_versionInsert",type:"Invisible"});h.placeAt(c);c.show()},showDiff:function(a,b){var c=this,d=dojo.create("div",{"class":"resourceVarianceDiff link"});d.innerHTML="diff";s(d,"click",function(d){h.stop(d);c.showDiffResourceSelect(a,b)});b.appendChild(d)},showTags:function(a,b){var c=this;c.tagger=new q({allowTagAdd:!1,objectType:"Resource",item:a,callback:function(){c.tree.expand(parent);c.tree.refresh()}});c.tagger.placeAt(b)},loadConfigurationDetailsByUrl:function(a,
b,c){this.configurationBrowser&&this.configurationBrowser.destroy();d.empty(this.detailAttach);this.configurationBrowser=new y({url:a,newValueColumnHeading:b,oldValueColumnHeading:c});this.configurationBrowser.placeAt(this.detailAttach)},loadConfigurationDetails:function(a){this.configurationBrowser&&this.configurationBrowser.destroy();d.empty(this.detailAttach);this.configurationBrowser=new y({resource:a});this.configurationBrowser.placeAt(this.detailAttach)}})})},"deploy/widgets/resource/ResourceResourceTree":function(){define(["dojo/_base/declare",
"dojo/dom-class","js/webext/widgets/form/MenuButton","deploy/widgets/resource/ResourceTree"],function(l,m,k,j){return l([j],{addTopButtons:function(){if(config.data.permissions[security.system.createResources]){var e=this.getCreateOptions(),e=new k({label:i18n("Create ..."),options:e});m.add(e.domNode,"idxButtonSpecial");e.placeAt(this.buttonAttach)}},getCreateOptions:function(){var e=this,h=[],d=this.resource;if(d){var c={label:i18n("Group Resource"),onClick:function(){e.showNewResourceDialog(d)}};
h.push(c);(!d.type||!("agent"===d.type.toLowerCase()||"agent pool"===d.type.toLowerCase()))&&!d.role?(c={label:i18n("Agent"),onClick:function(){e.showNewResourceDialog(d,"agent")}},h.push(c),c={label:i18n("Agent Pool"),onClick:function(){e.showNewResourceDialog(d,"agentPool")}}):c={label:i18n("Component"),onClick:function(){e.showNewResourceDialog(d,"component")}};h.push(c)}return h}})})},"deploy/widgets/resource/ResourceInventory":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare",
"deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.resource.ResourceInventory",[m,l],{templateString:'<div class="resourceInventory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Component"),formatter:function(d){return j.componentLinkFormatter(d.component)}},{name:i18n("Version"),formatter:function(d){return j.versionLinkFormatter(d.version)}},{name:i18n("Date"),
field:"date",formatter:util.tableDateFormatter,orderField:"dateCreated",getRawValue:function(d){return new Date(d.date)}},{name:i18n("Status"),formatter:function(d,c,b){return j.statusFormatter(d.status,c,b)}},{name:i18n("Actions")}];this.grid=new e({url:bootstrap.restUrl+"inventory/resourceInventory/table",columns:h,baseFilters:[{name:"resourceId",type:"eq",values:[appState.resource.id]},{name:"ghostedDate",className:"Long",type:"eq",values:[0]}],orderField:"dateCreated",sortType:"desc",tableConfigKey:"resourceInventoryList",
noDataMessage:i18n("No components have been installed to this resource."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/resource/ResourceRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c){return k("deploy.widgets.resource.ResourceRequestHistory",
[m,l],{templateString:'<div class="resourceRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=[{name:i18n("Component Process"),formatter:function(a){a.componentProcess.component=a.component;return d.componentProcessLinkFormatter(a.componentProcess)}},{name:i18n("Component"),formatter:function(a){return d.componentLinkFormatter(a.component)}},{name:i18n("Version"),formatter:function(a){return d.versionLinkFormatter(a.version)}},
{name:i18n("Application"),formatter:function(a){return d.applicationLinkFormatter(a.application)}},{name:i18n("Environment"),formatter:function(a){return d.environmentLinkFormatter(a.environment)}},{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(a){return util.dateFormatShort(a.entry.scheduledDate)},orderField:"calendarEntry.scheduledDate"},{name:i18n("Status"),formatter:function(a,b,c){return d.requestStatusFormatter(a,b,c)}},{name:i18n("Actions"),formatter:function(a){var b=
document.createElement("div"),c=document.createElement("a");c.className="actionsLink";c.innerHTML=i18n("View Request");c.href="#componentProcessRequest/"+a.id;b.appendChild(c);return b}}];this.grid=new c({url:bootstrap.restUrl+"deploy/componentProcessRequest/table",baseFilters:[{name:"resource.id",type:"eq",className:"UUID",values:[appState.resource.id]}],columns:b,orderField:"calendarEntry.scheduledDate",sortType:"desc",tableConfigKey:"resourceProcessHistory",noDataMessage:i18n("No component process history found for this resource."),
hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/TooltipTitle":function(){define("dojo/_base/declare,dojo/_base/lang,dijit/Tooltip,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-construct".split(","),function(l,m,k,j,e){return l("deploy.widgets.TooltipTitle",[j,e],{templateString:'<div class="tooltipTitle">   <span data-dojo-attach-point="titleBar" class="containerLabel title-text"></span>   <div data-dojo-attach-point="tooltip" class="labelsAndValues-helpCell title-helpCell inlineBlock"></div></div>',
titleText:"",tooltipText:"",postCreate:function(){this.inherited(arguments);this.titleBar.innerHTML=this.titleText;new k({connectId:[this.tooltip],label:this.tooltipText,showDelay:100,position:["after","above","below","before"]})}})})},"deploy/widgets/network/NetworkRelayList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/network/EditNetworkRelay,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.network.NetworkRelayList",[m,l],{templateString:'<div class="networkRelayList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="networkRelayList"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"network/networkRelay",c=[{name:i18n("Name"),formatter:function(a){return a.name},orderField:"name",filterField:"name",filterType:"text"},{name:i18n("Active"),
formatter:this.statusFormatter},{name:i18n("Host"),field:"host"},{name:i18n("Port"),field:"port"},{name:i18n("Actions"),formatter:this.actionsFormatter.bind(this),parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!1,noDataMessage:i18n("No servers have have been connected to the server cluster yet."),tableConfigKey:"networkRelayList",columns:c,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.networkRelayList);a.hasEditNetworkPermission()&&(b={label:i18n("Add Server To Server Cluster"),
showTitle:!1,onClick:function(){a.showNewNetworkRelayDialog()}},b=new k(b),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},statusFormatter:function(a,b,c){b=document.createElement("div");b.style.textAlign="center";a.active?(b.innerHTML=i18n("Active"),h.add(c,"success-state-color")):(b.innerHTML=i18n("Inactive"),h.add(c,"failed-state-color"));return b},actionsFormatter:function(a){var b=this,e=document.createElement("div");if(b.hasEditNetworkPermission()){var f=d.create("a",{innerHTML:i18n("Edit"),
"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.showNewNetworkRelayDialog(a)});f=d.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.showDeleteConfirm(a)})}return e},showNewNetworkRelayDialog:function(b){var c=this,d=new f({title:b?i18n("Edit Server Entry"):i18n("Connect Server to Server Cluster"),closable:!0,draggable:!0});(new a({networkRelay:b,callback:function(){d.hide();d.destroy();c.grid.refresh()}})).placeAt(d.containerNode);
d.show()},showDeleteConfirm:function(a){var b=this;new n({message:i18n("Are you sure you want to disconnect this server from the server cluster?"),action:function(){e.del({url:bootstrap.restUrl+"network/networkRelay/"+a.id,load:function(){b.grid.refresh()}})}})},hasEditNetworkPermission:function(){return config&&config.data&&config.data.permissions&&config.data.permissions[security.system.editNetworkSettings]}})})},"deploy/widgets/network/EditNetworkRelay":function(){define(["dijit/_TemplatedMixin",
"dijit/_Widget","dijit/form/CheckBox","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j,e){return j("deploy.widgets.network.EditNetworkRelay",[m,l],{templateString:'<div class="editNetworkRelay">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=this,d=null,c=null,b=null,a=null,f=!1;if(this.networkRelay)d=this.networkRelay.id,c=this.networkRelay.name,b=this.networkRelay.host,a=this.networkRelay.port,f=this.networkRelay.active;
this.form=new e({submitUrl:bootstrap.restUrl+"network/networkRelay",postSubmit:function(){void 0!==h.callback&&h.callback()},addData:function(a){if(h.networkRelay)a.existingId=d},onCancel:function(){void 0!==h.callback&&h.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:c});this.form.addField({name:"host",label:i18n("Host"),required:!0,type:"Text",textDir:"ltr",value:b});this.form.addField({name:"port",label:i18n("Port"),description:i18n("The JMS port for the server to connect to the cluster (default: 7918)."),
required:!0,type:"Number",textDir:"ltr",value:a});this.activeCheckBox=new k({checked:f||!0,value:"true"});this.form.addField({name:"active",label:i18n("Active"),widget:this.activeCheckBox})},startup:function(){this.inherited(arguments);this.form.startup();this.form.placeAt(this.formAttach)}})})},"deploy/widgets/network/ConnectedServerList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return j("deploy.widgets.network.ConnectedServerList",[m,l],{templateString:'<div class="connectedServerList" id="connectedServerListContainer"><div data-dojo-attach-point="connectedServerList" id="connectedServerListTable"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"server",e=[{name:i18n("Server Id"),formatter:function(b){var e=d.create("div",{"class":"inlineBlock",style:"margin-"+(c.isBodyLtr()?"right":"left")+
":78px;"}),f=d.create("div");f.innerHTML=i18n(util.escape(b.serverId));d.place(f,e);d.place(a.actionsFormatter(b),e);return e}},{name:i18n("Date Created"),field:"createdDate",formatter:util.tableDateFormatter,getRawValue:function(a){return new Date(a.createdDate)}},{name:i18n("Last Modified"),field:"modifiedDate",formatter:util.tableDateFormatter,getRawValue:function(a){return new Date(a.modifiedDate)}},{name:i18n("Host"),field:"host"},{name:i18n("Port"),field:"port"},{name:i18n("Server Public Key Fingerprint"),
field:"serverPublicKeyFingerprint"},{name:i18n("Client Public Key Fingerprint"),field:"clientPublicKeyFingerprint"}];this.grid=new q({url:b,serverSideProcessing:!1,noDataMessage:i18n("No servers have have been connected to the server cluster yet."),tableConfigKey:"connectedServerList",columns:e,hidePagination:!0,hideExpandCollapse:!0});this.grid.placeAt(this.connectedServerList)},statusFormatter:function(a,b,c){b=document.createElement("div");b.style.textAlign="center";a.active?(b.innerHTML=i18n("Active"),
h.add(c,"success-state-color")):(b.innerHTML=i18n("Inactive"),h.add(c,"failed-state-color"));return b},actionsFormatter:function(a){var b=d.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),c=[];config.data.permissions[security.system.editNetworkSettings]&&k.forEach(this.getDeleteAction(a),function(a){c.push(a)});c.length&&(new t({options:c,label:i18n("Actions...")})).placeAt(b);return b},getDeleteAction:function(a){var b=this;return[{label:i18n("Delete"),
onClick:function(){b.confirmDelete(a)}}]},confirmDelete:function(a){var b=this;new r({message:i18n("Are you sure you want to delete %s?",a.serverId),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"server/"+a.serverId,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){new f({message:a.responseText});b.grid.unblock()}})}})}})})},"deploy/widgets/Security":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l){l.provide("deploy.widgets.Security");
security={general:{editBasicSettings:"Edit Basic Settings"},agent:{addToAgentPool:"Add to Agent Pool",createResources:"Create Resources",manageVersionImports:"Manage Version Imports",upgradeAgent:"Upgrade Agents",installRemoteAgents:"Install Remote Agents"},application:{runComponentProcesses:"Run Component Processes",manageSnapshots:"Manage Snapshots",deleteSnapshots:"Delete Snapshots"},component:{manageVersions:"Manage Versions"},resource:{mapToEnvironments:"Map to Environments",resourceBasicSettings:"Basic Settings (Resources)",
resourceProperties:"Manage Properties (Resources)",resourceTeams:"Manage Teams (Resources)",manageImpersonation:"Manage Impersonation",resourceManageChildren:"Manage Resource Children"},system:{createComponents:"Create Components",createComponentsFromTemplate:"Create Components From Template",createComponentTemplates:"Create Component Templates",createApplications:"Create Applications",createApplicationsFromTemplate:"Create Applications From Template",createApplicationTemplates:"Create Application Templates",
createEnvironments:"Create Environments",createEnvironmentsFromTemplate:"Create Environments From Template",createEnvironmentTemplates:"Create Environment Templates",createResources:"Create Resources",createResourceTemplates:"Create Resource Templates",createAgentPools:"Create Agent Pools",createProcess:"Create Processes",createManageResourceRoles:"Manage Resource Roles",manageSecurity:"Manage Security",managePlugins:"Manage Plugins",manageAuthTokenRestrictions:"Manage Auth Token Restrictions",managePostProcessingScripts:"Manage Post Processing Scripts",
viewBasicSystemSettings:"View Basic System Settings",editBasicSystemSettings:"Edit Basic System Settings",viewLocks:"View Locks",releaseLocks:"Release Locks",manageDiagnostics:"Manage Diagnostics",manageNotificationSchemes:"Manage Notification Schemes",manageStatuses:"Manage Statuses",viewNetworkSettings:"View Network Settings",editNetworkSettings:"Edit Network Settings",manageAuditLog:"Manage Audit Log",viewAuditLog:"View Audit Log",viewOutputLog:"View Output Log",manageBlueprintDesignIntegrations:"Manage Blueprint Designer Integrations",
manageLogging:"Manage Logging Settings",manageSystemProperties:"Manage System Properties"},resourceTypes:{ui:"20000000000000000000000000000200",system:"20000000000000000000000000000201"}}})},"deploy/widgets/rightPanel/RightPanelUsersAndGroups":function(){define("dojo/_base/declare,dojo/_base/array,deploy/widgets/rightPanel/RightPanel,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/on,dojo/mouse,dojo/query,dijit/form/Button,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,
c,b,a,f){return l("deploy.widgets.rightPanel.RightPanelUsersAndGroups",[k],{postCreate:function(){this.inherited(arguments);this.loadPermissions();this.setHeader();this.canModify&&(this.loadUserTable(),this.loadGroupTable());this._buildPanel();this.attachPoint&&this.placeAt(this.attachPoint);this._buildShowButton();this.showHelp()},setHeader:function(){this.header=i18n("Users & Groups");this.description=i18n("Click and drag users and groups and release them over the role that you want to assign them to.  You can select multiple users to assign to a role.  Assigned users and groups are automatically saved to the role.")},
loadPermissions:function(){var a=config.data.permissions;this.canAdd=a["Add Team Members"];this.canModify=(this.canEdit=a["Manage Security"])||this.canAdd;if(!this.canModify)this.subheader=""},refresh:function(){this.table&&this.table.refresh()},_buildShowButton:function(){if(this.canModify){var b=this,c=i18n("Add Users & Groups");this.canEdit&&(c=i18n("Show Users & Groups"));var e=i18n("Hide Users & Groups");this.showButton=new a({label:b.panelHidden?c:e,value:b.panelHidden?!0:!1});j.add(this.showButton.domNode,
"idxButtonCompact");d(this.showButton,"click",function(a){b.showButton.value?(b.showButton.set("label",e),b.showButton.set("value",!1),b.show(a.shiftKey)):(b.showButton.set("label",c),b.showButton.set("value",!0),b.hide(a.shiftKey))});this.showButton.placeAt(this.buttonAttachPoint)}},onHide:function(){if(this.showButton){var a=i18n("Add Users & Groups");this.canEdit&&(a=i18n("Show Users & Groups"));this.showButton.set("value",!0);this.showButton.set("label",a)}this.onHideExtra()},onHideExtra:function(){},
showHelp:function(){if(this.canAdd){var a=h.create("div",{className:"dnd-hint-help"},this.titleContentAttach);h.create("div",{innerHTML:i18n("Drag items on handle"),className:"inline-block description-text"},a);h.create("div",{innerHTML:"::",className:"inline-block dnd-handle-text"},a)}},loadUserTable:function(){var a=this,e=bootstrap.baseUrl+"security/user",k=[{name:i18n("User"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Name"),
field:"actualName",orderField:"actualName",filterField:"actualName",filterType:"text",getRawValue:function(a){return a.actualName}},{name:i18n("Email"),field:"email",orderField:"email",filterField:"email",filterType:"text",getRawValue:function(a){return a.email},formatter:function(a,b){var c="";b&&(c=b);return h.create("div",{innerHTML:c,className:"user-email-cell"})}}];this.users=new f({url:e,serverSideProcessing:!1,columns:k,tableConfigKey:"teamRightPanelUserList",noDataMessage:i18n("No users have been created yet."),
rowsPerPage:10,pageOptions:[5,10,15,20,25,50,75,100],draggable:a.canModify,selectable:a.canModify,hideFooterLinks:!0,hidePagination:!1,hideExpandCollapse:!0,allowHeaderLocking:!1,onDisplayTable:function(){j.add(this.domNode,"right-panel-users");if(a.canModify)this.dndContainer.copyOnly=!0,this.dndContainer.value="user",this.dndContainer.checkAcceptance=function(){return!1},this.dndContainer.onDraggingOut=function(){a.showMinimizeBubble()}},applyRowStyle:function(a,e){e.value=a;j.add(e,"member-box-"+
a.id);d(e,c.enter,function(){var f=b(".member-box-"+a.id);m.forEach(f,function(a){j.add(a,"hover")});d(e,c.leave,function(){m.forEach(f,function(a){j.remove(a,"hover")})})})}});h.place(this.users.domNode,this.contentAttach)},loadGroupTable:function(){var a=this,e=bootstrap.baseUrl+"security/group",k=[{name:i18n("Group"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Authorization Realm"),formatter:function(a){return a.authorizationRealm.name}}];
this.groups=new f({url:e,serverSideProcessing:!0,columns:k,tableConfigKey:"groupList",noDataMessage:i18n("No groups have been created yet."),rowsPerPage:10,pageOptions:[5,10,15,20,25,50,75,100],draggable:a.canModify,selectable:a.canModify,hideFooterLinks:!0,hidePagination:!1,hideExpandCollapse:!0,allowHeaderLocking:!1,onDisplayTable:function(){j.add(this.domNode,"right-panel-groups");if(a.canModify)this.dndContainer.copyOnly=!0,this.dndContainer.value="group",this.dndContainer.checkAcceptance=function(){return!1}},
applyRowStyle:function(a,e){e.value=a;j.add(e,"member-box-"+a.id);d(e,c.enter,function(){var f=b(".member-box-"+a.id);m.forEach(f,function(a){j.add(a,"hover")});d(e,c.leave,function(){m.forEach(f,function(a){j.remove(a,"hover")})})})}});h.place(this.groups.domNode,this.contentAttach)},showMinimizeBubble:function(){}})})},"deploy/widgets/environment/EnvironmentRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.environment.EnvironmentRequestHistory",[m,l],{templateString:'<div class="environmentRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=[{name:i18n("Process"),formatter:function(b){b.applicationProcess.application=b.application;return h.applicationProcessLinkFormatter(b.applicationProcess)}},{name:i18n("Snapshot"),formatter:function(b){return h.snapshotLinkFormatter(b.snapshot)}},
{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(b){return util.dateFormatShort(b.entry.scheduledDate)},orderField:"calendarEntry.scheduledDate"},{name:i18n("Status"),formatter:function(b,a,c){return h.requestStatusFormatter(b,a,c)}},{name:i18n("Actions"),formatter:function(b){var a=document.createElement("div"),c=document.createElement("a");c.className="actionsLink";c.innerHTML=i18n("View Request");c.href="#applicationProcessRequest/"+b.id;a.appendChild(c);return a}}];
this.grid=new d({url:bootstrap.restUrl+"deploy/applicationProcessRequest/table",baseFilters:[{name:"environment.id",type:"eq",className:"UUID",values:[appState.environment.id]}],columns:c,orderField:"calendarEntry.scheduledDate",sortType:"desc",tableConfigKey:"environmentProcessHistory"+appState.environment.id,noDataMessage:i18n("No process history found for this environment."),hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},
destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/environment/EnvironmentCompliancy":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,js/webext/widgets/table/TreeTable,deploy/widgets/Formatters".split(","),function(l,m,k,j,e,h,d){return k("deploy.widgets.environment.EnvironmentCompliancy",[m,l],{templateString:'<div class="environmentCompliancy"><div class="compliancyHeaderContainer inline-block" data-dojo-attach-point="containerAttach"><div class="compliancyHeader" data-dojo-attach-point="headerAttach"></div></div><div data-dojo-attach-point="treeAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var c=this;j.get({url:bootstrap.restUrl+"deploy/environment/"+appState.environment.id+"/compliancy",handleAs:"json",load:function(b){var a=b.compliancy.desiredCount,d=b.compliancy.missingCount,b=b.compliancy.correctCount,h=document.createElement("div"),j=document.createElement("span");if(b<a)h.innerHTML=i18n("Noncompliant: "),e.add(c.containerAttach,"failed-state-color"),c.containerAttach.style.marginBottom="-2px",j.innerHTML=i18n("%s/%s (%s missing)",
""+b,""+a,""+d),c.showTree();else if(0===a)h.innerHTML=i18n("No Desired Inventory"),e.add(c.containerAttach,"gray-state-color");else if(b===a)h.innerHTML=i18n("Compliant: "),e.add(c.containerAttach,"success-state-color"),j.innerHTML=""+b+"/"+(""+a);h.appendChild(j);c.headerAttach.appendChild(h)}})},destroy:function(){this.inherited(arguments);this.tree&&this.tree.destroy()},showTree:function(){var c=[{name:i18n("Resource/Component"),formatter:function(b){return b.version?d.componentLinkFormatter(b.version.component):
d.resourcePathFormatter(b)},field:"name"},{name:i18n("Version"),formatter:function(b){if(b.version)return d.versionLinkFormatter(b.version)}}];this.tree=new h({url:bootstrap.restUrl+"deploy/environment/"+appState.environment.id+"/noncompliantResources",columns:c,serverSideProcessing:!1,orderField:"name",tableConfigKey:"environmentCompliancyList"});this.tree.placeAt(this.treeAttach)}})})},"deploy/widgets/environment/EnvironmentCondition":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/on,js/webext/widgets/RestSelect,deploy/widgets/Formatters".split(","),
function(l,m,k,j,e,h,d,c){return j("deploy.widgets.environment.EnvironmentCondition",[m,l],{templateString:'<div class="environmentCondition"><div data-dojo-attach-point="statusesAttach" class="statusesAttach inlineBlock align-top"></div><div data-dojo-attach-point="newStatusAttach" class="newStatusAttach inlineBlock align-top"></div><div data-dojo-attach-point="orAttach">- '+i18n("or")+" -</div></div>",postCreate:function(){this.inherited(arguments);var b=this;b.trackedStatuses=[];k.forEach(this.statuses,
function(a){b.addStatus(a)});if(!this.readOnly){var a=new d({restUrl:bootstrap.restUrl+"deploy/status/versionStatuses",getValue:function(a){return a.name},getStyle:function(a){return c.conditionFormatter(a)},noneLabel:i18n("And..."),onChange:function(c,d){if(d){var e=!1;k.forEach(b.statuses,function(a){a.name===d.name&&(e=!0)});e||(b.addStatus(d),b.statuses.push(d));a.setValue("")}}});a.placeAt(this.newStatusAttach)}},addStatus:function(b){var a=this,d=e.create("div",{"class":"inlineBlock environmentStatusBoxAttached",
style:c.conditionAttachBoxFormatter(b),innerHTML:b.name.escape()},this.statusesAttach);if(!this.readOnly){var j=c.conditionXButtonFormatter(d,b);h(j,"click",function(){e.destroy(d);util.removeFromArray(a.statuses,b);0===a.statuses.length&&a.parent.removeCondition(a)})}},getValue:function(){var b=[];k.forEach(this.statuses,function(a){b.push(a.name)});return b}})})},"deploy/widgets/environment/EnvironmentEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/environment/EditEnvironment,deploy/widgets/property/PropValues,deploy/widgets/environment/EnvironmentComponentProperties".split(","),
function(l,m,k,j,e,h,d,c){return m([e],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Environment Properties"),action:function(){b.addHeading(i18n("Environment Properties"));b.showProperties()}})},addHeading:function(b){j.create("div",{innerHTML:b,"class":"containerLabel"},this.detailAttach)},
addDescription:function(b){j.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new h({showCancel:!1,environment:appState.environment,application:appState.application,readOnly:!appState.environment.security["Edit Basic Settings"],callback:function(){navBar.setHash("#environment/"+appState.environment.id,!1,!0)}})).placeAt(this.detailAttach)},showProperties:function(){(new d({propSheet:appState.environment.propSheet,readOnly:!appState.environment.security["Manage Properties"]})).placeAt(this.detailAttach);
this.addHeading(i18n("Component Environment Properties"));(new c({environment:appState.environment})).placeAt(this.detailAttach)}})})},"deploy/widgets/environment/EnvironmentComponentProperties":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/_base/lang,dojo/_base/xhr,deploy/widgets/environment/EnvironmentComponentProperty,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/FieldList,js/webext/widgets/select/WebextSelect,dojox/data/JsonRestStore,deploy/widgets/property/PropSheetDefValues".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j("deploy.widgets.environment.EnvironmentComponentProperties",[m,l],{templateString:'<div class="environmentComponentProperties"><div data-dojo-attach-point="filterScrollAttach" style="margin-bottom: 20px;"></div><hr><div data-dojo-attach-point="noDataMessageAttach" style="margin-top: 20px; font-size: 14px; text-align: center;"></div><div data-dojo-attach-point="formAttach"></div></div>',form:null,componentPropSheetForm:null,postCreate:function(){this.inherited(arguments);
var a=this,b=new r({target:bootstrap.restUrl+"deploy/application/"+this.environment.application.id+"/components",idAttribute:"id"}),b=new n({store:b,onChange:function(b){a.componentPropSheetForm&&a.componentPropSheetForm.destroy();a.form&&a.form.destroy();a.noDataMessageAttach&&e.empty(a.noDataMessageAttach);b&&""!==b?a.showComponentProperties(b):d.get({url:bootstrap.restUrl+"deploy/environment/"+a.environment.id+"/componentProperties",handleAs:"json",load:function(b){a.showAllProperties(b)}})},allowNone:!0,
pageSize:10,label:i18n("Filter By Component")});this.filterContainer=new f;this.filterContainer.insertField(b);this.filterContainer.placeAt(this.filterScrollAttach);d.get({url:bootstrap.restUrl+"deploy/environment/"+a.environment.id+"/componentProperties",handleAs:"json",load:function(b){a.showAllProperties(b)}})},showComponentProperties:function(a){var b=this;d.get({url:bootstrap.restUrl+"deploy/environment/"+b.environment.id+"/componentPropertySheets/"+a,handleAs:"json",load:function(a){b.componentPropSheetForm=
new t({propSheetDefPath:a.propSheetDef.path,propSheetPath:a.propSheet.path,showVersions:!0,propSheetVersion:a.propSheet.version,propSheetVersionCount:a.propSheet.versionCount,readOnly:!b.environment.extendedSecurity["Manage Properties"]});b.componentPropSheetForm.placeAt(b.formAttach)}})},showAllProperties:function(d){var e=this,f=[];d[0]?(this.form=new a({submitUrl:bootstrap.restUrl+"deploy/environment/"+this.environment.id+"/componentProperties",validateFields:function(){var a=[];k.forEach(f,function(b){0<
b.form.validateRequired().length&&a.push(i18n("Missing required value for field %s",b.getLabel()));b.validatePattern(a)});return a},readOnly:!this.environment.security["Manage Properties"],cancelLabel:null,addData:function(a){e.flattenProperties(a)},postSubmit:function(){new b({message:i18n("Properties saved.")})}}),k.forEach(d,function(a){var b=new c({readOnly:!e.environment.security["Manage Properties"],propertyData:a});f.push(b);e.form.addField({name:a.name,widget:b})}),this.form.placeAt(this.formAttach)):
this.noDataMessageAttach.innerHTML=i18n("There are no Component Environment Properties to display.")},flattenProperties:function(a){var b=h.clone(a),c;for(c in b)if(b.hasOwnProperty(c)){delete a[c];var d=b[c],e;for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}}})})},"deploy/widgets/environment/EnvironmentComponentProperty":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/on,js/webext/widgets/ColumnForm".split(","),function(l,
m,k,j,e,h,d,c){return j("deploy.widgets.environment.EnvironmentComponentProperty",[m,l],{templateString:'<div class="environmentComponentProperty">  <div data-dojo-attach-point="labelAttach"></div>  <div data-dojo-attach-point="formAttach"></div>  <div data-dojo-attach-point="expandAttach"></div></div>',doubleWidth:!0,tooltipIcon:!0,postCreate:function(){this.inherited(arguments);var b=this;this.form=new c({showButtons:!1,readOnly:this.readOnly});this.isCollapsible()&&this.valuesAreEqual()?this.collapse():
this.expand();var a=b.getLabel();this.labelAttach.appendChild(h.create("div",{innerHTML:a.escape(),style:{fontSize:"14px","class":"actionsLink"}}));this.form.placeAt(this.formAttach);if(b.isCollapsible()&&!b.readOnly){a=i18n("Set a Single Value");b.collapsed&&(a=i18n("Split Values Per Component"));var e=h.create("a",{innerHTML:a,"class":"linkPointer",style:{marginLeft:"167px"}},this.expandAttach);d(e,"click",function(){b.collapsed?(e.innerHTML=i18n("Set a Single Value"),b.expand()):(e.innerHTML=i18n("Split Values Per Component"),
b.collapse())})}},expand:function(){var b=this;this.collapsed=!1;k.forEach(this.fieldNames,function(a){b.form.removeField(a)});this.fieldNames=[];k.forEach(this.propertyData.components,function(a){var c=a.propValue,d=a.propDef,h=d.value,j=d.defaultLabel;if(c)h=c.value,j=c.label;c=e.clone(d);c.value=h;c.defaultLabel=j;c.label=a.name;c.name=a.name+"/"+d.name;c.tooltipIcon=b.tooltipIcon;c.pattern&&(c.description+=i18n(" Required Pattern: %s",c.pattern));b.fieldNames.push(c.name);b.form.addField(c)})},
collapse:function(){var b=this;this.collapsed=!0;k.forEach(this.fieldNames,function(a){b.form.removeField(a)});this.fieldNames=[];var a=this.propertyData.components[0],c=a.propDef,d=a.propValue,a=c.value;if(d)a=d.value;d=e.clone(c);d.value=a;d.label=i18n("All Components");d.name=c.name;d.description=this.getDescription();d.required=this.isRequired();d.tooltipIcon=b.tooltipIcon;this.fieldNames.push(d.name);this.form.addField(d)},isCollapsible:function(){var b=!1,a=this.propertyData,c,d=!1;1<a.components.length&&
(k.forEach(a.components,function(a){a=a.propDef;c?a.type!==c&&(d=!0):c=a.type}),!d&&"SECURE"!==c&&(b=!0));return b},valuesAreEqual:function(){var b=!1,a,c=!1;k.forEach(this.propertyData.components,function(b){var b=b.propValue,d="";if(b)d=b.value;void 0===a?a=d:d!==a&&(c=!0)});c||(b=!0);return b},isRequired:function(){var b=!1;k.forEach(this.propertyData.components,function(a){a=a.propDef;b=b||a.required});return b},getDescription:function(){var b;k.forEach(this.propertyData.components,function(a){a=
a.propDef;if(!b)b=a.description});return b},getLabel:function(){var b;k.forEach(this.propertyData.components,function(a){a=a.propDef;if(!b||a.label!==a.name)b=a.label});return b},_getValueAttr:function(){return this.form.getData()},validatePattern:function(b){var a=this;k.forEach(this.propertyData.components,function(c){var d=c.propDef,e=a.form.getValue(c.name+"/"+d.name),h=d.pattern;h&&e&&(a.checkPattern(e,h)||b.push(i18n("Value for property %s does not follow the required pattern",d.name+"/"+c.name)))});
return b},checkPattern:function(b,a){var c=!0;RegExp(a).exec(b)||(c=!1);return c}})})},"deploy/widgets/environment/EnvironmentConditions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,deploy/widgets/environment/EnvironmentCondition,deploy/widgets/Formatters,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h,d,c,b){return j("deploy.widgets.environment.EnvironmentConditions",[m,l],{templateString:'<div class="environmentSummary inlineBlock"><table><tr><td style="width: 110px;"><div data-dojo-attach-point="infoAttach" class="environmentSummaryBox" style="text-align:center;font-size: 11pt;font-weight: bold;"></td><td style="min-width: 300px; vertical-align: top;"><div data-dojo-attach-point="conditionAttach"></div><div style="margin-top: 3px;" data-dojo-attach-point="newConditionAttach"></div></td></tr></table></div>',
postCreate:function(){this.inherited(arguments);var a=this;if(this.application)a.readOnly=!(this.application.security["Manage Environments"]&&this.environment.security["Edit Basic Settings"]);else if(this.applicationTemplate)a.readOnly=this.applicationTemplate.version===this.applicationTemplate.versionCount?!this.applicationTemplate.security["Manage Environment Templates"]:!0;if(this.application&&this.applicationTemplate&&this.environment.templateId)a.readOnly=!0;var f=document.createElement("span");
f.innerHTML=this.environment.name.escape();this.infoAttach.appendChild(f);this.conditions=[];k.forEach(a.environment.conditions,function(b){b=new d({statuses:b,readOnly:a.readOnly,parent:a});b.placeAt(a.conditionAttach);a.conditions.push(b)});if(a.readOnly)a.conditions.length?e.add(a.conditions[a.conditions.length-1].orAttach,"hidden"):h.create("div",{innerHTML:i18n("No conditions defined")},a.conditionAttach);else{var j=new b({restUrl:bootstrap.restUrl+"deploy/status/versionStatuses",getValue:function(a){return a.name},
getStyle:function(a){return c.conditionFormatter(a)},noneLabel:i18n("Add a new condition..."),onChange:function(b,c){if(c){var e=new d({statuses:[c],readOnly:a.readOnly,parent:a});e.placeAt(a.conditionAttach);a.conditions.push(e);j.setValue("")}}});j.placeAt(this.newConditionAttach)}},removeCondition:function(a){util.removeFromArray(this.conditions,a);a.destroy()},getValue:function(){var a={environmentId:this.environment.id,conditions:[]};k.forEach(this.conditions,function(b){a.conditions.push(b.getValue())});
return a}})})},"deploy/widgets/resourceTemplate/ResourceTemplateEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,dijit/Tooltip,js/webext/widgets/TwoPaneListManager,deploy/widgets/resourceTemplate/EditResourceTemplate,deploy/widgets/resourceTemplate/ResourceTemplateResourceTree,deploy/widgets/property/PropDefs".split(","),function(l,m,k,j,e,h,d,c,b,a){return m([d],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var a=
this;a.addEntry({id:"resources",label:i18n("Resources"),action:function(){a.addHeading(i18n("Resources"));a.showResourceTree()}});a.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){a.addHeading(i18n("Basic Settings"));a.showBasicSettings()}});a.addEntry({id:"basic",label:i18n("Property Definitions"),action:function(){a.addHeading(i18n("Property Definitions"));a.showPropertyDefinitions()}})},addHeading:function(a){e.create("div",{innerHTML:a,"class":"containerLabel"},this.detailAttach)},
addDescription:function(a){e.create("div",{innerHTML:a,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new c({showCancel:!1,resourceTemplate:this.resourceTemplate,readOnly:!this.resourceTemplate.security["Edit Basic Settings"],callback:function(a){a&&navBar.setHash("#resourceTemplate/"+a.id,!1,!0)}})).placeAt(this.detailAttach)},showResourceTree:function(){(new b({resourceTemplate:this.resourceTemplate})).placeAt(this.detailAttach)},showPropertyDefinitions:function(){(new a({propSheetDefId:this.resourceTemplate.propSheetDef.id})).placeAt(this.detailAttach)}})})},
"deploy/widgets/resourceTemplate/ResourceTemplateResourceTree":function(){define("dojo/_base/declare,deploy/widgets/resource/ResourceTree,dijit/form/Button,dojo/_base/array,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,deploy/widgets/resource/ResourceSelectList".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return l([m],{postCreate:function(){var a=this;this.xhrMethod=
"POST";this.serverSideProcessing=!0;this.url=bootstrap.restUrl+"resource/resourceTemplate/"+this.resourceTemplate.id+"/resources";this.inherited(arguments);this.grid.applyRowStyle=function(b,c){b.resourceTemplate.id!==a.resourceTemplate.id&&h.add(c,"readOnlyResourceRow")}},getChildUrl:function(a){return bootstrap.restUrl+"resource/resourceTemplate/"+this.resourceTemplate.id+"/resources/"+a.id+"/children"},getOtherColumns:function(){return[{name:i18n("Description"),formatter:function(a){var b=a.description?
a.description.escape():"";a.isRoot&&a.resourceTemplate&&(b=a.resourceTemplate.description?a.resourceTemplate.description.escape():"");return d.create("div",{innerHTML:util.applyBTD(b),title:b,alt:b,className:"resource-template-description one-line-overflow-text-click-to-show"})},orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}}]},addTopButtons:function(){},addEditActions:function(a,b){if(!a.isRoot&&a.resourceTemplate.id===this.resourceTemplate.id)return this.inherited(arguments)},
getRunnableActions:function(a){var b=this,c=[];!a.isRoot&&a.resourceTemplate.id===b.resourceTemplate.id&&!a.prototype&&a.role&&"AGENT_PLACEHOLDER"!==a.role.specialType&&c.push({label:i18n("Convert to Prototype"),onClick:function(){b.showConvertToPrototypeDialog(a)}});return c},getDeleteActions:function(a,b){if(!a.isRoot&&a.resourceTemplate.id===this.resourceTemplate.id)return this.inherited(arguments)},isSelectable:function(a){return!a.isRoot},createEditResourceForm:function(a){a.forceSecurityInheritence=
!0;a.resourceTemplate=this.resourceTemplate;return this.inherited(arguments)},getCreateActions:function(a){var b=this,c=[];c.push({label:i18n("Add Group"),onClick:function(){b.showNewResourceDialog(a)}});a.hasAgent?(c.push({label:i18n("Add Component"),onClick:function(){b.showNewResourceDialog(a,"component")}}),c.push({label:i18n("Add Component Tag"),onClick:function(){b.showNewResourceDialog(a,"componentTag")}})):c.push({label:i18n("Add Agent Prototype"),onClick:function(){b.showNewResourceDialog(a,
"agentPlaceholder")}});return c},showConvertToPrototypeDialog:function(a){var b=this;b.grid.block();e.get({url:bootstrap.restUrl+"resource/resource/"+a.id+"/prototypeCheck",handleAs:"json",load:function(c){b.grid.unblock();if(c&&0<c.length){var d=[i18n("Converting %s into a resource template will delete all other resources with the same role in the same folder of this template.",a.name.escape()),"",i18n("The following resources will be deleted:"),""];j.forEach(c,function(a){d.push(a.name.escape())});
new r({messages:d,action:function(){b.promoteToPrototype(a)}})}else b.promoteToPrototype(a)},error:function(a){b.grid.unblock();new f({message:util.escape(a.responseText)})}})},promoteToPrototype:function(a){var b=this;b.grid.block();e.put({url:bootstrap.restUrl+"resource/resource/"+a.id+"/convertToPrototype",load:function(){b.grid.unblock();b.grid.refreshSiblingsForItem(a)},error:function(a){b.grid.unblock();new f({message:util.escape(a.responseText)})}})}})})},"deploy/widgets/resourceTemplate/ImportResourceTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,deploy/widgets/security/TeamSelector,js/webext/widgets/select/WebextSelect,dojo/store/JsonRest,js/webext/widgets/Dialog,deploy/widgets/resourceTemplate/CloudConnectionSelect".split(","),
function(l,m,k,j,e,h,d,c,b,a){return k([m,l],{templateString:'<div class="importResourceTemplate">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.existingValues={};this.resourceTemplate?this.existingValues=this.resourceTemplate:j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Resource Template",handleAs:"json",sync:!0,load:function(a){b.existingValues.extendedSecurity={teams:a}}});this.form=new e({submitUrl:bootstrap.restUrl+
"resource/resourceTemplate",postSubmit:function(a){void 0!==b.callback&&b.callback(a)},addData:function(a){if(b.resourceTemplate)a.existingId=b.existingValues.id;a.teamMappings=b.teamSelector.teams},onCancel:function(){void 0!==b.callback&&b.callback()}});this.connectionSelector=new a({store:b.connectionStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0,onChange:function(a){b.form.hasField("isVsys")&&b.form.removeField("isVsys");
b.form.addField({name:"isVsys",label:i18n("Use Virtual System Patterns"),description:i18n("When this box is checked, Virtual System patterns in IBM PureApplication System version 2.0 or later will be used. Uncheck to use Classic patterns instead."),type:"Checkbox",value:!0,onChange:function(c){b.showCloudResourceField(a,c)}},"_cloudResourceInsertionPoint");b.showCloudResourceField(a,!0)}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Validation Text",promptMessage:null,value:this.existingValues.name});
this.form.addField({name:"connection",label:i18n("Cloud Connection"),description:i18n("In the <b>Cloud Connection</b> list, select the connection to the cloud system. If you do not have a connection to the cloud system, click <b>New Connection</b> and specify the information for the connection, including the host name and login information for the cloud system."),required:!0,widget:this.connectionSelector});this.form.addField({name:"_cloudResourceInsertionPoint",type:"Invisible"});this.teamSelector=
new h({resourceRoleType:"Resource Template",noneLabel:i18n("Standard Resource Template"),teams:this.existingValues.extendedSecurity.teams});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",description:i18n("In the <b>Teams</b> field, add the teams that should be able to use the resource template."),widget:this.teamSelector});this.form.placeAt(this.formAttach)},showCloudResourceField:function(a,b){this.form.hasField("cloudResourceId")&&this.form.removeField("cloudResourceId");this.cloudResourcesStore=
new c({target:bootstrap.restUrl+"resource/cloud/connection/"+a+"/resources",idAttribute:"id"});this.cloudResourcesSelector=new d({store:this.cloudResourcesStore,searchAttr:"name",labelAttr:"name",noDataMessage:i18n("No resources found."),autoComplete:!1,intermediateChanges:!0,defaultQuery:{vsys:!!b}});this.cloudResourceField=this.form.addField({name:"cloudResourceId",label:i18n("Cloud Resource"),description:i18n("In the <b>Cloud Resource</b> list, select the virtual system pattern to use."),required:!0,
widget:this.cloudResourcesSelector},"_cloudResourceInsertionPoint")}})})},"deploy/widgets/resourceTemplate/ResourceTemplateList":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dijit/form/Button,deploy/widgets/Formatters,deploy/widgets/resourceTemplate/EditResourceTemplate,deploy/widgets/resourceTemplate/ImportResourceTemplate,deploy/widgets/resource/ResourceCompareSelectorDialog,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return m([c,d],{templateString:'<div class="resource-template-list"><div class="listTopButtons" data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.table=new w({url:bootstrap.restUrl+"resource/resourceTemplate",orderField:"name",tableConfigKey:"resourceTemplateList",hidePagination:!1,hideExpandCollapse:!0,
baseFilters:[{name:"application",type:"null"}],queryData:{outputType:["BASIC","SECURITY","LINKED"]},columns:[{name:i18n("Name"),orderField:"name",filterField:"name",filterType:"text",formatter:function(a,c,d){d.style.position="relative";var c=e.create("div",{"class":"inlineBlock",style:"margin-"+(h.isBodyLtr()?"right":"left")+":78px;"}),j=e.create("div",{"class":"inlineBlock"},c),d=f.resourceTemplateLinkFormatter(a),j=e.create("div",{"class":"inlineBlock"},j);e.place(d,j);d=e.create("div",{dir:util.getUIDir(),
align:util.getUIDirAlign(),"class":"tableHoverActions"},c);j=[{label:i18n("Compare or Synchronize"),onClick:function(){b.showCompareDialog(a)}}];a.security&&a.security.Delete&&j.push({label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}});(new u({options:j,label:i18n("Actions...")})).placeAt(d);return c},getRawValue:function(a){return a.name}},{name:i18n("Parent"),filterField:"parentResourceTemplate.name",filterType:"text",formatter:function(a){return f.resourceTemplateLinkFormatter(a.parent)},
getRawValue:function(a){return a.parent.name}},{name:i18n("Description"),field:"description",filterField:"description",filterType:"text"}]});this.table.placeAt(this.tableAttach);if(config.data.permissions[security.system.createResourceTemplates]){var c=new a({label:i18n("Create Resource Template"),showTitle:!1,onClick:function(){b.showNewTemplateDialog()}});j.add(c.domNode,"idxButtonSpecial");c.placeAt(this.buttonAttach);bootstrap.isFIPSModeEnabled||(new a({label:i18n("Import Template from Cloud"),
showTitle:!1,onClick:function(){b.showImportTemplateDialog()}})).placeAt(this.buttonAttach)}},showNewTemplateDialog:function(){var a=new o({title:i18n("Create Resource Template"),closable:!0,draggable:!0,description:i18n("Resource templates define sets of resources which can be applied to the actual resource tree in order to make standardization and initial configuration of target environments easier. To create a resource template, specify the contents and organization of the template, including resources, groups, and agent prototypes.")});
(new n({callback:function(b){a.hide();a.destroy();b&&navBar.setHash("#resourceTemplate/"+b.id)}})).placeAt(a.containerNode);a.show()},showImportTemplateDialog:function(){var a=new o({title:i18n("Import Resource Template"),closable:!0,draggable:!0,description:i18n("If you have a virtual system pattern on a cloud system, you can import that pattern as a resource template. This resource template is a pattern from which you can provision cloud resources. Before you can import a pattern as a resource template, you must create a virtual system pattern on a compatible cloud system. Each node in this pattern must include the Install %s Agent script package.",
bootstrap.productName)});(new r({callback:function(b){a.hide();a.destroy();b&&navBar.setHash("#resourceTemplate/"+b.id)}})).placeAt(a.containerNode);a.show()},showCompareDialog:function(a){(new t({resourceTemplate:a})).show()},confirmDelete:function(a){var b=this;new s({message:i18n("Are you sure you want to delete resource template '%s'?",a.name),action:function(){k.del({url:bootstrap.restUrl+"resource/resourceTemplate/"+a.id,handleAs:"json",load:function(){b.table.refresh()},error:function(a){(new q({message:a.responseText})).startup()}})}})}})})},
"deploy/widgets/applicationTemplate/ApplicationTemplateEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/application/ApplicationEnvironmentConditions,deploy/widgets/applicationTemplate/EditApplicationTemplate,deploy/widgets/property/PropDefs".split(","),function(l,m,k,j,e,h,d,c){return m([e],{postCreate:function(){this.inherited(arguments);this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},
showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Application Property Definitions"),action:function(){b.addHeading(i18n("Application Property Definitions"));b.showProperties()}});b.addEntry({id:"gates",label:i18n("Environment Gates"),action:function(){b.addHeading(i18n("Environment Gates"));b.showGates()}})},addHeading:function(b){j.create("div",
{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){j.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,applicationTemplate:this.applicationTemplate,readOnly:!this.applicationTemplate.security["Edit Basic Settings"]||!this.isMaxVersion()})).placeAt(this.detailAttach)},showProperties:function(){var b=this.isMaxVersion(),a=null,d=null;b?d="applicationTemplates/"+this.applicationTemplate.id+
"/propSheetDef":a=this.applicationTemplate.propDefs;this.addDescription(i18n("Define properties here to be given values on each application using this template."));(new c({propDefs:a,propSheetDefPath:d,readOnly:!this.applicationTemplate.security["Manage Properties"]||!b,refreshHash:"applicationTemplate/"+this.applicationTemplate.id+"/-1/configuration/properties",headers:{applicationTemplateVersion:this.applicationTemplate.version}})).placeAt(this.detailAttach)},showGates:function(){(new h({applicationTemplate:appState.applicationTemplate})).placeAt(this.detailAttach)},
isMaxVersion:function(){return this.applicationTemplate.version===this.applicationTemplate.versionCount}})})},"deploy/widgets/application/ApplicationEnvironmentConditions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,deploy/widgets/environment/EnvironmentConditions,js/webext/widgets/Alert".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return e("deploy.widgets.application.ApplicationEnvironmentConditions",
[m,l],{templateString:'<div class="applicationEnvironmentConditions"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="listAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.environmentConditionBoxes=[];this.saveButtonShown=!1;if(this.application)this.managePermission=this.application.security["Manage Environments"],this.putUrl=bootstrap.restUrl+"deploy/application/"+this.application.id+"/environmentConditions",this.getUrl=
bootstrap.restUrl+"deploy/application/"+this.application.id+"/environments/false";else if(this.applicationTemplate)this.managePermission=this.applicationTemplate.version===this.applicationTemplate.versionCount?this.applicationTemplate.security["Manage Environment Templates"]:!1,this.putUrl=bootstrap.restUrl+"deploy/applicationTemplate/"+this.applicationTemplate.id+"/environmentConditions",this.getUrl=bootstrap.restUrl+"deploy/applicationTemplate/"+this.applicationTemplate.id+"/"+this.applicationTemplate.version+
"/environmentTemplates";(!this.application||!this.applicationTemplate)&&this.managePermission&&this.showSaveButton();this.showEnvironments()},showSaveButton:function(){var a=this;this.saveButtonShown=!0;var c=new k({label:i18n("Save Conditions"),showTitle:!1,onClick:function(){var c=[];j.forEach(a.environmentConditionBoxes,function(a){a.readOnly||c.push(a.getValue())});h.put({url:a.putUrl,putData:b.stringify(c),load:function(){new f({message:i18n("Conditions saved successfully.")});a.application||
navBar.setHash("applicationTemplate/"+a.applicationTemplate.id+"/-1/configuration/gates",!1,!0)},error:function(a){new f({messages:[i18n("Error saving conditions:"),"",util.escape(a.responseText)]})}})}});d.add(c.domNode,"idxButtonSpecial");c.placeAt(this.buttonAttach)},showEnvironments:function(){var b=this;h.get({url:b.getUrl,handleAs:"json",load:function(d){j.forEach(d,function(d){var e=new a({environment:d,application:b.application,applicationTemplate:b.applicationTemplate});e.placeAt(b.listAttach);
b.environmentConditionBoxes.push(e);!d.version&&!d.templateId&&!b.saveButtonShown&&b.managePermission&&b.showSaveButton();c.create("div",{},b.listAttach)})}})},destroy:function(){this.inherited(arguments)}})})},"deploy/widgets/applicationTemplate/EditApplicationTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,js/webext/widgets/Alert,deploy/widgets/security/TeamSelector,deploy/widgets/applicationTemplate/ComponentTagRequirementSelector".split(","),
function(l,m,k,j,e,h,d,c,b){return k("deploy.widgets.application.EditApplication",[m,l],{templateString:'<div class="editApplication">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){var a=this;a.inherited(arguments);a.existingValues={};a.applicationTemplate?a.existingValues=a.applicationTemplate:j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Application Template",handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity={teams:b}}});
a.form=new e({submitUrl:bootstrap.restUrl+"deploy/applicationTemplate",readOnly:a.readOnly,showButtons:!a.readOnly,postSubmit:function(b){this.noRedirect||navBar.setHash("applicationTemplate/"+b.id+"/-1");void 0!==a.callback&&a.callback()},addData:function(b){if(a.applicationTemplate)b.existingId=a.applicationTemplate.id;"none"===b.notificationSchemeId&&delete b.notificationSchemeId;b.teamMappings=a.teamSelector.teams},onError:function(a){a.responseText&&new d({message:util.escape(a.responseText)})},
onCancel:function(){void 0!==a.cancelCallback?a.cancelCallback():void 0!==a.callback&&a.callback()},validateFields:function(a){var b=[];a.tagRequirements.forEach(function(a){(0>a.number||999<a.number||""===a.number)&&b.push(i18n("The Required Component Tag number %s for the %s tag is invalid. Please enter a number between 0 and 999",a.number,a.name))});return b},cancelLabel:a.showCancel?i18n("Cancel"):null});a.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:a.existingValues.name});
a.form.addField({name:"description",label:i18n("Description"),type:"Text",value:a.existingValues.description});var f=[];if(a.existingValues&&a.existingValues.extendedSecurity&&a.existingValues.extendedSecurity.teams)f=a.existingValues.extendedSecurity.teams;a.teamSelector=new c({readOnly:a.readOnly,resourceRoleType:"Application Template",noneLabel:i18n("Standard Application Template"),teams:f});a.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:a.teamSelector});f=new h({disabled:a.readOnly,
restUrl:bootstrap.restUrl+"notification/notificationScheme",value:a.existingValues.notificationSchemeId,getLabel:function(a){return i18n(a.name)}});a.form.addField({name:"notificationSchemeId",label:i18n("Notification Scheme"),description:i18n("A notification scheme to use when handling events generated by applications using this template."),widget:f});a.form.addField({name:"enforceCompleteSnapshots",label:i18n("Enforce Complete Snapshots"),type:"Checkbox",description:i18n("Whether this applications using this template should require that a version be given for each component when creating snapshots."),
value:this.existingValues.enforceCompleteSnapshots});a.requirementSelector=new b({readOnly:this.readOnly,value:this.existingValues.tagRequirements});a.form.addField({name:"tagRequirements",label:i18n("Required Component Tags"),widget:a.requirementSelector,description:i18n("Specify which tags the set of components for applications created from this template must be tagged with as well as the number of components for each tag.")});a.form.placeAt(a.formAttach)}})})},"deploy/widgets/applicationTemplate/ComponentTagRequirementSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/lang,dojo/store/Memory,dojo/store/Observable,dojo/_base/declare,dojo/dom-style,deploy/widgets/ModelWidgetList,deploy/widgets/applicationTemplate/ComponentTagRequirement,js/webext/widgets/FormDelegates".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return d([m,l],{templateString:'<div class="tagRequirementSelector"><div data-dojo-attach-point="tagRequirementAddAttach"></div><div class="tagRequirementList" data-dojo-attach-point="tagRequirementListAttach"></div></div>',postCreate:function(){this.inherited(arguments);if(!this.value)this.value=[];this.rowClass="labelsAndValues-row labelsAndValues-row-verticalAlign-top";this.initRequirementList();this.readOnly||this.addRequirementSelector()},initRequirementList:function(){this.requirementsModel=
new h(new e({idProperty:"name"}));this.value.forEach(function(a){this.addRequirement(a)},this);this.tagRequirementList=new b({model:this.requirementsModel,widgetFactory:j.hitch(this,this.createRequirementWidget)});this.tagRequirementList.placeAt(this.tagRequirementListAttach)},createRequirementWidget:function(b){var c=this,d={readOnly:this.readOnly,deleteHandler:function(){var a=c.requirementsModel.getIdentity(b);c.requirementsModel.remove(a)}};j.mixin(d,b);return new a(d)},addRequirement:function(a){if(!a.name)a.name=
a.tag.name;if(!a.type)a.type="GREATER_THAN";if(void 0===a.number)a.number=0;this.requirementsModel.put(a)},addRequirementSelector:function(){var a=this;this.tagSelector=(new f).getDelegate("TagDropDown")({idProperty:"name",searchAttr:"name",placeHolder:i18n("Select Component Tags"),allowNone:!0,selectOnClick:!0,objectType:"Component",onChange:function(b,c){c&&(a.addRequirement({tag:c}),a.tagSelector.dropDown.set("value","",void 0,void 0,""))}});a.tagSelector.placeAt(a.tagRequirementAddAttach)},_getValueAttr:function(){return this.tagRequirementList.getChildren().map(function(a){return a.get("value")})}})})},
"deploy/widgets/applicationTemplate/ComponentTagRequirement":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/on,dojo/json,dojo/mouse,dojo/_base/declare,dojo/_base/Color,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-attr,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r){return d([m,l],{templateString:'<div class="inlineBlock tagRequirement tagBox"><span class="tagName" data-dojo-attach-point="nameSpan"></span><select data-dojo-attach-point="requirementType" class="requirementType"><option value="EQUALS">=</option><option value="GREATER_THAN">&gt;</option><option value="LESS_THAN">&lt;</option></select><input type="text" data-dojo-attach-point="requirementNumber" class="requirementValue"><span class="tagDelete" data-dojo-attach-point="delSpan" title="'+
i18n("Delete")+'">x</span></div>',postCreate:function(){this.inherited(arguments);var a=this.tag;null!==util.getIE()&&f.add(this.domNode,"ieTagRequirement");this.nameSpan.textContent=a.name;this.requirementNumber.value=this.number;this.requirementType.value=this.type;var b=this.getShade(a.color);n.set(this.domNode,"backgroundColor",a.color);n.set(this.domNode,"borderColor",b);n.set(this.delSpan,"borderColor",b);this._isDark(a.color)&&f.add(this.domNode,"darkColor");this.readOnly&&(n.set(this.delSpan,
"display","none"),r.set(this.requirementType,"disabled","disabled"),r.set(this.requirementNumber,"disabled","disabled"));j(this.delSpan,"click",this.deleteHandler)},_getValueAttr:function(){return{name:this.tag.name,type:this.requirementType.value,number:this.requirementNumber.value}},_isDark:function(a){a=(new c(a)).toRgb();return 0.5<1-(0.25*a[0]+0.6*a[1]+0.1*a[2])/255},getShade:function(a){var a=(new c(a)).toRgb(),b=[];k.forEach(a,function(a){b.push(0.6*a)});return c.fromArray(b).toHex()}})})},
"deploy/widgets/applicationTemplate/ApplicationTemplateEnvironmentTemplateList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dijit/registry,dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/_base/xhr,dojo/dnd/Source,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/dom-style,dojo/dom-attr,dojo/json,dojo/on,deploy/widgets/environmentTemplate/EditEnvironmentTemplate,deploy/widgets/Formatters,js/webext/widgets/color/Color,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z){return d([m,l],{templateString:'<div class="applicationEnvironmentList application-environment-list"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div class="environmentTemplateList" data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.showTable();this.showAddButton()},showTable:function(){var a=this,b=bootstrap.restUrl+"deploy/applicationTemplate/"+a.applicationTemplate.id+"/"+a.applicationTemplate.version+
"/environmentTemplates";a.readOnly=a.applicationTemplate.version!==a.applicationTemplate.versionCount||!a.applicationTemplate.security["Manage Environment Templates"];a.gridLayout=[{name:i18n("Name"),formatter:function(b,c,d){d.style.position="relative";c=t.create("div",{"class":"inlineBlock",style:"margin-"+(r.isBodyLtr()?"right":"left")+":78px;"});d=t.create("div",{"class":"inlineBlock"});t.place(d,c);if(b.security.read){var e=document.createElement("a");e.href="#environmentTemplate/"+b.id+"/-1";
e.innerHTML=b.name.escape();t.place(e,d);t.place(a.actionsFormatter(b),c)}else c.innerHTML=b.name.escape();return c},orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Description"),field:"description"}];a.grid=new A({serverSideProcessing:!1,url:b,tableConfigKey:"environmentTemplateList",noDataMessage:i18n("No environment templates found."),columns:a.gridLayout,hidePagination:!1,hideExpandCollapse:!0,orderField:"name",sortType:"asc"});a.grid.placeAt(a.tableAttach)},showAddButton:function(){var a=
this;if(!a.readOnly){var b=new k({label:i18n("Create Environment Template"),showTitle:!1,onClick:function(){a.showNewEnvironmentTemplateDialog()}});n.add(b.domNode,"idxButtonSpecial inlineBlock");b.placeAt(a.buttonAttach)}},showNewEnvironmentTemplateDialog:function(){var a=new y({title:i18n("Create Environment Template"),closable:!0,draggable:!0});(new w({applicationTemplate:this.applicationTemplate,callback:function(b){a.hide();a.destroy();navBar.setHash("environmentTemplate/"+b.id+"/-1")},cancelCallback:function(){a.hide();
a.destroy()}})).placeAt(a);a.show()},showEditEnvironmentTemplate:function(b){var c=this;a.get({url:bootstrap.restUrl+"deploy/environmentTemplate/"+b.id,handleAs:"json",load:function(a){var b=new y({title:i18n("Edit Environment Template"),closable:!0,draggable:!0});(new w({applicationTemplate:c.applicationTemplate,environmentTemplate:a,callback:function(){b.hide();b.destroy();navBar.setHash("applicationTemplate/"+c.applicationTemplate.id+"/-1/environmentTemplates",!1,!0)},cancelCallback:function(){b.hide();
b.destroy()}})).placeAt(b);b.show()},error:function(a){(new z({title:i18n("Error retrieving environment template for edit."),message:a.responseText})).startup()}})},confirmDelete:function(b){var c=this;new C({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",b.name.escape()),action:function(){c.grid.block();a.del({url:bootstrap.restUrl+"deploy/environmentTemplate/"+b.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh();navBar.setHash("applicationTemplate/"+
c.applicationTemplate.id+"/-1/environmentTemplates",!1,!0)},error:function(a){(new z({title:i18n("Error deleting environment template"),message:a.responseText})).startup();c.grid.unblock()}})}})},addEditActions:function(a,b){var c=this;c.readOnly||(new k({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.showEditEnvironmentTemplate(a)}})).placeAt(b)},getRowWriteActions:function(a){var b=this;if(!b.readOnly)return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]},
actionsFormatter:function(a){var b=t.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),c=[];a.security["Edit Basic Settings"]&&(this.addEditActions(a,b),h.forEach(this.getRowWriteActions(a),function(a){c.push(a)}));c.length&&(new B({options:c,label:i18n("Actions...")})).placeAt(b);return b}})})},"deploy/widgets/environmentTemplate/EditEnvironmentTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/DialogMultiSelect,deploy/widgets/Formatters,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a){return k([m,l],{templateString:'<div class="editEnvironment">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;this.existingValues={color:"#ffffff",snapshotDaysToKeep:0,cleanupDaysToKeep:0,cleanupCountToKeep:0,enableProcessHistoryCleanup:!0,useSystemDefaultDays:!0};this.environmentTemplate?this.existingValues=this.environmentTemplate:this.source?(j.get({url:bootstrap.restUrl+"deploy/environmentTemplate/"+
this.source.id+"id",handleAs:"json",sync:!0,load:function(a){b.source=a}}),this.existingValues=this.source):j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Environment Template",handleAs:"json",sync:!0,load:function(a){b.existingValues.extendedSecurity={teams:a}}});this.form=new d({submitUrl:bootstrap.restUrl+"deploy/environmentTemplate",readOnly:b.readOnly,postSubmit:function(a){void 0!==b.callback&&b.callback(a)},addData:function(a){a.applicationTemplateId=b.applicationTemplate.id;
if(b.environmentTemplate)a.existingId=b.environmentTemplate.id;if(b.source)a.copyId=b.source.id;"SYSTEM_DEFAULT"===a.snapshotLockType&&delete a.snapshotLockType;a.teamMappings=b.teamSelector.teams},onError:function(a){a.responseText&&new h({message:util.escape(a.responseText)})},onCancel:function(){void 0!==b.cancelCallback&&b.cancelCallback()},validateFields:function(a){var b=[];a.historyCleanupDaysToKeep&&(/^[0-9]+$/.test(a.historyCleanupDaysToKeep)||b.push(i18n("The Days to Keep Process History must be an integer, 0 or greater.")));
if(a.snapshotDaysToKeep){var c=parseInt(a.snapshotDaysToKeep,10);isNaN(c)?b.push(i18n("The application snapshot cleanup days to keep must be an integer.")):-1>c?b.push(i18n("The application snapshot cleanup days to keep must be greater than or equal to -1")):a.snapshotDaysToKeep=c}return b}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.source?void 0:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});
this.form.addField({name:"resourceTemplate",label:i18n("Resource Template"),type:"TableFilterSelect",value:this.existingValues.resourceTemplateId,url:bootstrap.restUrl+"resource/resourceTemplate",required:!0,defaultQuery:{filterFields:["application"],filterType_application:"null",filterValue_application:null}});this.form.addField({name:"environmentType",label:i18n("Type"),type:"TableFilterSelect",value:this.existingValues.environmentTypeId,url:bootstrap.baseUrl+"security/resourceRole",allowNone:!0,
placeHolder:i18n("Standard Environment"),defaultQuery:{outputType:["BASIC"],filterFields:["resourceType.name","ghostedDate"],"filterType_resourceType.name":"eq","filterValue_resourceType.name":"Environment","filterClass_resourceType.name":"String",filterType_ghostedDate:"eq",filterValue_ghostedDate:"0",filterClass_ghostedDate:"Long"}});var e=[];if(b.existingValues&&b.existingValues.extendedSecurity&&b.existingValues.extendedSecurity.teams)e=b.existingValues.extendedSecurity.teams;b.teamSelector=new a({resourceRoleType:"Environment Template",
noneLabel:i18n("Standard Environment Template"),teams:e});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:b.teamSelector});this.form.addField({name:"requireApprovals",label:i18n("Require Approvals"),type:"Checkbox",description:i18n("When this is checked, no versions or snapshots can be deployed to this environment without being approved according to the approval process for this environment."),onChange:function(a){b.showNoSelfApprovalField(a)},value:this.existingValues.requireApprovals});
b.existingValues.requireApprovals&&b.showNoSelfApprovalField(!0);e=new c({url:bootstrap.restUrl+"deploy/applicationTemplate/"+this.applicationTemplate.id+"/"+this.applicationTemplate.version+"/processes",value:this.existingValues.exemptProcesses,getLabel:function(a){return a.name.escape()},getValue:function(a){return a.id},noSelectionsLabel:i18n("None")});this.form.addField({name:"exemptProcesses",label:i18n("Exempt Processes"),widget:e,description:i18n("Any processes selected here will be exempt from approval, even when the environment normally requires it.")});
this.form.addField({name:"lockSnapshots",label:i18n("Lock Snapshots"),type:"Checkbox",description:i18n("When this is checked, all snapshots used in a request to this deployment will be locked to prevent further changes."),value:this.existingValues.lockSnapshots,onChange:function(a){a?b._showSnapshotLockType():b.form.removeField("snapshotLockType")}});this.form.addField({type:"Invisible",name:"_snapshotLockTypeInsert"});this.existingValues.lockSnapshots&&b._showSnapshotLockType();b.form.addField({name:"requireSnapshot",
label:i18n("Require Snapshot"),type:"Checkbox",description:i18n("If this box is checked, any deployment request must use a snapshot instead of individual versions."),value:b.existingValues.requireSnapshot});this.form.addField({name:"color",label:i18n("Color"),type:"ColorPicker",value:this.existingValues.color});e=!b.environmentTemplate&&!b.source||0===b.existingValues.cleanupDaysToKeep&&0===b.existingValues.cleanupCountToKeep&&0===b.existingValues.snapshotDaysToKeep;this.form.addField({name:"inheritSystemCleanup",
label:i18n("Use Default Artifact Settings"),description:i18n("When selected, this environment uses the artifact cleanup settings for the system or component settings, if available. Clear to provide values for all components and snapshots in this environment."),type:"Checkbox",onChange:function(a){a?(b.form.hasField("cleanupDaysToKeep")&&(b.form.removeField("snapshotDaysToKeep"),b.form.removeField("cleanupDaysToKeep"),b.form.removeField("cleanupCountToKeep")),b.form.validateFields=function(){return[]}):
b.showCleanupFields()},value:e});b.showHistoryCleanupFields();e||this.showCleanupFields();this.form.placeAt(this.formAttach)},_showSnapshotLockType:function(){var a={ALL:i18n("Component Versions and Configuration"),VERSIONS:i18n("Only Component Versions"),CONFIGURATION:i18n("Only Configuration")};this.form.addField({name:"snapshotLockType",label:i18n("Snapshot Lock Type"),description:i18n("This setting determines which contents of a snapshot are locked when it is included in a deployment to this environment. Anything left unlocked can still be changed after the snapshot has been deployed."),
required:!0,value:this.existingValues.snapshotLockType||"SYSTEM_DEFAULT",type:"Select",allowedValues:[{label:i18n("System Default (%s)",a[config.data.systemConfiguration.defaultSnapshotLockType]),value:"SYSTEM_DEFAULT"},{label:a.ALL,value:"ALL"},{label:a.VERSIONS,value:"VERSIONS"},{label:a.CONFIGURATION,value:"CONFIGURATION"}]},"_snapshotLockTypeInsert")},showCleanupFields:function(){this.form.addField({name:"snapshotDaysToKeep",label:i18n("Days to Retain Application Snapshots"),description:i18n("The number of days to retain snapshots after they are no longer the most recently deployed snapshot in this environment. The most recently deployed snapshot is always retained. To retain application snapshots indefinitely, enter -1. To use the system default retention value, enter 0."),
value:this.existingValues.snapshotDaysToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup");this.form.addField({name:"cleanupDaysToKeep",label:i18n("Days to Retain Versions"),description:i18n("The number of days to retain component versions.  To retain component versions indefinitely, enter - 1. To use the system default retention value, enter 0."),value:this.existingValues.cleanupDaysToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup");this.form.addField({name:"cleanupCountToKeep",
label:i18n("Number of Versions to Retain"),description:i18n("The number of versions to retain for each component. To retain all component versions, enter -1. To use the system default retention value, enter 0."),value:this.existingValues.cleanupCountToKeep,required:!0,textDir:"ltr",type:"Text"},"enableProcessHistoryCleanup")},showHistoryCleanupFields:function(){var a=this;this.form.addField({name:"enableProcessHistoryCleanup",label:i18n("Use Deployment History Cleanup"),description:i18n("Select to use deployment history cleanup for this environment. If selected, the deployment history records in this environment are deleted according to the values that you set."),
value:!!this.existingValues.enableProcessHistoryCleanup,textDir:"ltr",type:"Checkbox",onChange:function(b){a.showUseSystemDefaultDays(b);b||a.showHistoryCleanupDaysToKeep(b)}});this.existingValues.enableProcessHistoryCleanup&&a.showUseSystemDefaultDays(!0)},showUseSystemDefaultDays:function(a){var b=this;a?(this.form.addField({name:"useSystemDefaultDays",label:i18n("Use Default Deployment History Retention"),description:i18n("Select to retain the deployment history for the number of days that the administrator set."),
value:!!this.existingValues.useSystemDefaultDays,textDir:"ltr",type:"Checkbox",onChange:function(a){b.showHistoryCleanupDaysToKeep(!a)}}),this.existingValues.useSystemDefaultDays||b.showHistoryCleanupDaysToKeep(!0)):this.form.removeField("useSystemDefaultDays")},showHistoryCleanupDaysToKeep:function(a){a?this.form.addField({name:"historyCleanupDaysToKeep",label:i18n("Days to Retain Deployment History "),description:i18n("The number of days to retain application deployment history. Valid range is 0 or greater"),
value:this.existingValues.historyCleanupDaysToKeep,required:!0,textDir:"ltr",type:"Number"}):this.form.hasField("historyCleanupDaysToKeep")&&this.form.removeField("historyCleanupDaysToKeep")},showNoSelfApprovalField:function(a){a?this.form.hasField("noSelfApprovals")||this.form.addField({name:"noSelfApprovals",label:i18n("No Self-Approvals"),type:"Checkbox",description:i18n("When this option is selected, users that submit deployment requests cannot approve their own requests."),value:this.existingValues.noSelfApprovals},
"exemptProcesses"):this.form.hasField("noSelfApprovals")&&this.form.removeField("noSelfApprovals")},submitForm:function(){this.form.submitForm()}})})},"deploy/widgets/applicationTemplate/ApplicationTemplateApplications":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/application/EditApplication,deploy/widgets/application/wizard/ApplicationWizard,deploy/widgets/application/wizard/WizardProgressVisualization,js/webext/widgets/Dialog,deploy/widgets/wizard/WizardDialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return h("deploy.widgets.applicationTemplate.ApplicationTemplateApplications",[m,l],{templateString:'<div class="applicationList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/application/",d=[{name:i18n("Name"),formatter:this.applicationFormatter,
orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Template Version"),formatter:function(a){a=a.templateVersion;-1===a&&(a=i18n("Latest Version"));return a},orderField:"templateVersion",getRawValue:function(a){var b=a.templateVersion;-1===a.templateVersion&&(b=1E6);return b}},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,orderField:"dateCreated",getRawValue:function(a){return new Date(a.created)}},
{name:i18n("By"),field:"user.name",orderField:"user.name",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}],e=[{name:"active",type:"eq",className:"Boolean",values:[!0]},{name:"templateId",type:"eq",className:"UUID",values:[a.applicationTemplate.id]}];this.grid=new s({url:b,orderField:"name",serverSideProcessing:!0,noDataMessage:i18n("No applications found."),tableConfigKey:"applicationTemplateComponentList",columns:d,hidePagination:!1,
hideExpandCollapse:!0,queryData:{outputType:["BASIC","LINKED","SECURITY"]},baseFilters:e});this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.createApplicationsFromTemplate]&&(b={label:i18n("Create Application"),showTitle:!1,onClick:function(){a.showNewApplicationDialog()}},b=new k(b),c.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},applicationFormatter:function(a){var b=document.createElement("a");
b.innerHTML=a.name.escape();b.href="#application/"+a.id;return b},actionsFormatter:function(c){var d=this.parentWidget,e=document.createElement("div");if(c.security.Delete){var f=b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);a(f,"click",function(){d.confirmDelete(c)})}return e},confirmDelete:function(a){var b=this;new o({message:i18n("Are you sure you want to delete application %s?",a.name.escape()),action:function(){b.grid.block();d.del({url:bootstrap.restUrl+"deploy/application/"+
a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()}})}})},showNewApplicationDialog:function(){var a=this,b=new n({applicationTemplate:this.applicationTemplate}),c=new q({title:i18n("Create Application"),closable:!0,draggable:!0,progressVisualization:r,wizard:b});b.cleanup=function(){c.hide();c.destroy();a.grid.refresh()};c.connect(c,"hide",function(){b.destroy();c.destroy()});b.startup();c.show()}})})},"deploy/widgets/application/EditApplication":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,js/webext/widgets/Alert,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b){return j("deploy.widgets.application.EditApplication",[m,l],{aThing:{},templateString:'<div class="editApplication">  <div data-dojo-attach-point="formAttach"></div></div>',templatePropertyNames:[],templatePropertyPatterns:[],showCancel:!0,onTemplateChange:function(){},showButtons:!0,postCreate:function(){var a=this;a.inherited(arguments);a.existingValues={};a.application?a.existingValues=a.application:e.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Application",
handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity={teams:b}}});a.form=new h({submitUrl:bootstrap.restUrl+"deploy/application",readOnly:a.readOnly,showButtons:!a.readOnly&&a.showButtons,postSubmit:function(b){this.noRedirect||navBar.setHash("application/"+b.id);void 0!==a.callback&&a.callback()},addData:function(b){if(a.application)b.existingId=a.application.id;"none"===b.notificationSchemeId&&delete b.notificationSchemeId;b.teamMappings=a.teamSelector.teams},onError:function(a){a.responseText&&
new c({message:util.escape(a.responseText)})},onCancel:function(){void 0!==a.callback&&a.callback()},validateFields:function(b){var c=[];k.forEach(a.templatePropertyNames,function(d,e){var f=a.templatePropertyPatterns[e],h=b[d];if(f&&h){var j=!0;-1!==a.templatePropertyTypes[e].indexOf("MULTI_SELECT")?h.split(",").forEach(function(b){a.validatePattern(b,f)||(j=!1)}):a.validatePattern(h,f)||(j=!1);if(!j){var h="",k=dojo.filter(a.form.fieldsArray,function(a){return a.name===d});if(k&&1===k.length)h=
k[0].label;h||(0===d.indexOf("template/")&&(d=d.substring(9)),h=d);c.push(i18n("Value does not follow the required pattern for property %s.",h))}}});return c},cancelLabel:a.showCancel?i18n("Cancel"):null});a.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:a.existingValues.name});a.form.addField({name:"description",label:i18n("Description"),type:"Text",value:a.existingValues.description});var d=[];if(a.existingValues&&a.existingValues.extendedSecurity&&a.existingValues.extendedSecurity.teams)d=
a.existingValues.extendedSecurity.teams;a.teamSelector=new b({readOnly:a.readOnly,resourceRoleType:"Application",noneLabel:i18n("Standard Application"),teams:d});a.form.addField({name:"teams",label:i18n("Teams"),widget:a.teamSelector});a.form.addField({name:"_templateInsert",type:"Invisible"});a.form.addField({name:"_settingsInsert",type:"Invisible"});a.form.addField({name:"_templateProperties",type:"Invisible"});a.addTemplateFields();a.form.placeAt(a.formAttach)},addSettingFields:function(a){this.form.removeField("notificationSchemeId");
this.form.removeField("enforceCompleteSnapshots");var b=new d({disabled:this.readOnly||!!a,restUrl:bootstrap.restUrl+"notification/notificationScheme",value:this.existingValues.notificationSchemeId,getLabel:function(a){return i18n(a.name)}});this.form.addField({name:"notificationSchemeId",label:i18n("Notification Scheme"),description:i18n("A notification scheme to use when handling events generated by this application."),widget:b},"_settingsInsert");this.form.addField({name:"enforceCompleteSnapshots",
label:i18n("Enforce Complete Snapshots"),readOnly:!!a,type:"Checkbox",description:i18n("Whether this application should require that a version be given for each component when creating snapshots."),value:this.existingValues.enforceCompleteSnapshots},"_settingsInsert")},addTemplateFields:function(){var a=this,b=a.existingValues.template||a.applicationTemplate,c=config.data.permissions[security.system.createApplications],e=config.data.permissions[security.system.createApplicationsFromTemplate],h=a.application&&
a.application.template||a.applicationTemplate;(!a.application&&!a.applicationTemplate&&!a.source||!h)&&e?(b=new d({restUrl:bootstrap.restUrl+"deploy/applicationTemplate",value:a.existingValues.templateId,tooltipField:"description",onChange:function(b,c){a.showStatusOrTemplateVersionFields(c)}}),a.form.addField({name:"templateId",label:i18n("Application Template"),description:i18n("The template to use for this application."),required:!c,widget:b},"_templateInsert")):h?(a.form.addField({name:"templateName",
label:i18n("Application Template"),description:i18n("The template to use for this application."),readOnly:!0,type:"Text",value:b?b.name:"None"},"_templateInsert"),a.showStatusOrTemplateVersionFields(b)):a.addSettingFields()},showStatusOrTemplateVersionFields:function(a){var b=this;b.form.hasField("templateVersion")&&b.form.removeField("templateVersion");a?(b.templateVersionSelect=new d({restUrl:bootstrap.restUrl+"deploy/applicationTemplate/"+a.id+"/versions",getLabel:function(a){return a.version+
" - "+util.dateFormatShort(a.commit.commitTime)},getValue:function(a){return a.version},noneLabel:i18n("Always Use Latest"),value:-1===this.existingValues.templateVersion?null:this.existingValues.templateVersion,onChange:function(c,d){d?b.selectTemplate(d):b.selectTemplate(a)}}),this.form.addField({name:"templateVersion",label:i18n("Application Template Version"),description:i18n("The version of the template to use for this component."),widget:b.templateVersionSelect},"_templateInsert")):(b.selectTemplate(),
b.addSettingFields())},selectTemplate:function(a){var b=this;b.removeTemplatePropDefs();a?e.get({url:b.templateVersionSelect.value?bootstrap.restUrl+"deploy/applicationTemplate/"+a.id+"/"+b.templateVersionSelect.value:bootstrap.restUrl+"deploy/applicationTemplate/"+a.id+"/-1",handleAs:"json",load:function(a){b.existingValues.notificationSchemeId=a.notificationSchemeId;b.existingValues.enforceCompleteSnapshots=a.enforceCompleteSnapshots;b.showTemplatePropDefs(a);b.addSettingFields(a);b.onTemplateChange.apply(this,
arguments)}}):b.onTemplateChange.apply(this,arguments)},showTemplatePropDefs:function(a){var b=this;b.templatePropertyNames=[];b.templatePropertyPatterns=[];b.templatePropertyTypes=[];k.forEach(a.propDefs,function(a){var c=util.clone(a);c.name="template/"+a.name;a.pattern&&(c.description+=i18n(" Required Pattern: %s",a.pattern));util.populatePropValueAndLabel(b.existingValues.properties,c);b.form.addField(c,"_templateProperties");b.templatePropertyNames.push(c.name);b.templatePropertyPatterns.push(c.pattern);
b.templatePropertyTypes.push(c.type)})},removeTemplatePropDefs:function(){var a=this;k.forEach(a.templatePropertyNames,function(b){a.form.removeField(b)})},getData:function(){return this.form.getData()},submit:function(){this.form.submitForm()},validatePattern:function(a,b){return RegExp("^"+b+"$").test(a)},validate:function(){var a=this.form.validateFields(this.getData());Array.prototype.push.apply(a,this.form.validateRequired());return a}})})},"deploy/widgets/application/wizard/ApplicationWizard":function(){define("idx/widget/ResizeHandle,dojo/_base/declare,dojox/widget/WizardPane,dojo/dom-class,dojo/on,dojo/query,dojo/_base/array,dojo/_base/lang,dojo/request/xhr,dojo/Stateful,dojo/store/Memory,dojo/store/Observable,deploy/widgets/application/EditApplication,deploy/widgets/application/wizard/ComponentPage,deploy/widgets/application/wizard/EnvironmentPage,deploy/widgets/application/wizard/AgentMappingPage,deploy/widgets/wizard/Wizard,js/webext/widgets/Alert,js/util/blocker/_BlockerMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return m([s,w],{doLayout:!1,hideDisabled:!0,cancelFunction:function(){this._cleanup()},saveDraftButtonLabel:i18n("Save as Draft"),wizardPaneHeight:500,postCreate:function(){var a=this;this.inherited(arguments);this.addedPanes=[];this._initSharedData();j.add(this.domNode,"applicationWizard");this.nextButton.domNode.style["margin-right"]="25px";this.newApplicationForm=new r({showButtons:void 0,applicationTemplate:this.applicationTemplate,onTemplateChange:function(b){a.sharedData.template&&
b?(a._initSharedData(b),a._disableWizard(),a._setupFullWizard()):!a.sharedData.template&&b?(a._initSharedData(b),a._setupFullWizard()):(a._initSharedData(),a._disableWizard())},callback:function(){a._cleanup()}});this.firstPage=(new k({content:this.newApplicationForm,doneFunction:c.hitch(this,this._nonWizardDoneFunction),passFunction:function(){var b=this.content.validate();return a.interpretValidationResult(b)}})).placeAt(this)},_initSharedData:function(b){this.sharedData={};if(b)this.sharedData.template=
b,this.sharedData.environmentTemplates=new n(new f({data:b.environmentTemplates.map(function(b){return a(b)})})),this.sharedData.environments=new n(new f({idProperty:"uniqId"}))},_setupFullWizard:function(){function a(d){c.mixin(d,{onShow:function(){c.isFunction(this.content._onShow)&&this.content._onShow()},passFunction:function(){var a=this.content.validate();return b.interpretValidationResult(a)}});return new k(d)}var b=this,d=this.wizardPaneHeight+"px";this.firstPage.domNode.style.width="800px";
this.firstPage.domNode.style.height=d;this.hideDisabled=!1;this.firstPage.doneFunction=void 0;this.componentPage=new t({sharedData:this.sharedData});this.componentPage.doneFunction=void 0;this.addedPanes.push(a({style:"height: "+d+"; width: 800px;",content:this.componentPage}));this.environmentPage=new q({sharedData:this.sharedData});this.environmentPage.doneFunction=void 0;this.addedPanes.push(a({style:"height:"+d+"; width: 800px;",content:this.environmentPage}));this.agentMappingPage=new o({sharedData:this.sharedData});
this.agentMappingPane=a({style:"height:"+d+"; width: 1000px;",content:this.agentMappingPage,doneFunction:c.hitch(this,this._wizardDoneFunction)});this.addedPanes.push(this.agentMappingPane);this.resizeWidget=(new l({activeResize:!0,minHeight:this.wizardPaneHeight,minWidth:800,targetContainer:this.agentMappingPane.domNode})).placeAt(this.resizeDom);this.addedPanes.forEach(function(a){a.placeAt(this)},this);this.firstPage.isLastChild=!1;this.resize()},_disableWizard:function(){this.firstPage.domNode.style.width=
"";this.firstPage.domNode.style.height="";this.firstPage.doneFunction=c.hitch(this,this._nonWizardDoneFunction);this.hideDisabled=!0;this.addedPanes.forEach(function(a){this.removeChild(a)},this);this.addedPanes=[];this.firstPage.isLastChild=!0;this.resize()},_nonWizardDoneFunction:function(){this.newApplicationForm.submit()},_wizardDoneFunction:function(){this.block();var a=[];this.sharedData.components.query().forEach(function(b){a.push(b.id)});var b=[];this.sharedData.environments.query().forEach(function(a){var c=
this.makeEnvironmentJSON(a);a.props.query().forEach(function(a){var b="template/"+a.name;c[b]=a.currentValue;if("HTTP_SELECT"===a.type||"HTTP_MULTI_SELECT"===a.type)c[b+"/HTTP_SELECT_LABEL"]=a.currentHttpSelectLabel});c.resources=[];Object.keys(a.mappings).forEach(function(b){a.mappings[b].forEach(function(a){c.resources.push({name:a.name,agentId:a.id,path:a.parentPath})})});b.push(c)},this);this.onSave({application:this.newApplicationForm.form.getData(),components:{existingComponents:a,newComponents:[]},
environments:b})},onSave:function(a){var c=this,a=b.put(bootstrap.restUrl+"deploy/application/createFromWizard",{data:JSON.stringify(a),headers:{"Content-Type":"application/json"},handleAs:"json"});a.then(function(a){c.unblock();this.noRedirect||navBar.setHash("application/"+a.id);c._cleanup()},function(a){c.unblock();var b="An unknown error has occurred";if(a.response&&a.response.text)b=a.response.text;(new u({message:util.escape(b)})).startup()});return a},_cleanup:function(){c.isFunction(this.cleanup)&&
this.cleanup()},_checkButtons:function(){this.inherited(arguments);var a=this.selectedChildWidget,b=a.isLastChild;a.doneFunction?this.highlightButton(this.doneButton,"idxButtonSpecial"):b||this.highlightButton(this.nextButton,"idxButtonSpecial");if(this.resizeWidget)this.resizeWidget.domNode.style.display=a===this.agentMappingPane?"":"none"},makeEnvironmentJSON:function(a){return{name:a.name,templateId:a.template.id,templateVersion:a.template.version,description:a.description,requireApprovals:a.template.requireApprovals,
noSelfApprovals:a.template.noSelfApprovals,exemptProcesses:a.template.exemptProcesses,lockSnapshots:a.template.lockSnapshots,requireSnapshot:a.template.requireSnapshot,color:a.template.color,inheritSystemCleanup:a.template.inheritSystemCleanup,teamMappings:this.generateTeamMappingsForEnvironments(a.template)}},interpretValidationResult:function(a){switch(typeof a){case "boolean":return a;case "string":return u({message:util.escape(a)}),!1;case "object":return"[object Array]"===Object.prototype.toString.call(a)?
0<a.length?(a=a.map(function(a){return util.escape(a)}),u({messages:a}),!1):!0:!1}},generateTeamMappingsForEnvironments:function(a){var b=[];d.forEach(this.newApplicationForm.getData().teamMappings,function(c){d.some(b,function(a){return a.teamId===c.teamId},this)||b.push({resourceRoleId:a.environmentTypeId,teamId:c.teamId})},this);return b}})})},"deploy/widgets/application/wizard/ComponentPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dijit/Dialog,dojo/_base/declare,dojo/store/Memory,dojo/store/Observable,deploy/widgets/TooltipTitle,deploy/widgets/application/wizard/AppWizardComponentSelector".split(","),
function(l,m,k,j,e,h,d,c,b){return e([m,l,k],{templateString:'<div class="wizardFullPage">  <div data-dojo-attach-point="callToAction" class="callToAction"></div>  <\!-- begin no permission no component tags --\>  <div class="pageAlerts">    <div data-dojo-attach-point="noPermissionNoTagsAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+i18n("You cannot specify components for this application now.")+'      </h1>       <p class="description">'+i18n("Your role does not have the permissions to add components to an application, and the application template does not contain component tags.")+
'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader solutionoptionscontainer">'+i18n("For permissions")+'          <li class="solutionoptions">'+i18n("You can ask your administrator to grant your role the permissions that are required to add components to an application.")+'          </li>      </ul>      <ul class="listheader">'+i18n("For component tags (You must request permission to add components to an application.)")+'          <li class="solutionoptions">'+
i18n("You can add components after you save this application.")+'          </li>          <li class="solutionoptions">'+i18n("You can request that component tags be added to the application template.")+'          </li>          <li class="solutionoptions">'+i18n("If you expected to specify components for this application during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end no permission no component tags --\>   <\!-- begin yes permission no component tags --\>  <div class="pageAlerts">    <div data-dojo-attach-point="yesPermissionNoTagsAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+
i18n("You cannot specify components for this application now.")+'      </h1>       <p class="description">'+i18n("The application template does not contain component tags.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can add components after you save this application.")+'          </li>          <li class="solutionoptions">'+i18n("You can request that component tags be added to the application template.")+
'          </li>          <li class="solutionoptions">'+i18n("If you expected to specify components for this application during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end yes permission no component tags --\>  <\!-- begin no permission yes component tags --\>  <div class="pageAlerts">    <div data-dojo-attach-point="noPermissionYesTagsAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+i18n("You cannot specify components for this application now.")+
'      </h1>       <p class="description">'+i18n("Your role does not have the permissions to add components to an application.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can ask your administrator to grant your role the permissions that are required to add components to an application.")+"          </li>      </ul>    </div>  </div>  <\!-- end no permission yes component tags --\></div>",
postCreate:function(){this.inherited(arguments);(new c({titleText:i18n("Select components to deploy in this application."),tooltipText:"<div class='wizard-component-page-tooltip'>"+i18n("An application is a collection of components. Components are deployable items  and the processes that are required to deploy them to an environment.  Applications often contain multiple components, and you might use the same component in multiple applications.")+"<br/><br/>"+i18n("During application creation, you populate the application with a specific number of components that contain the  displayed tags. You can add existing components or create components. If you add components, they must contain the specified tag. If you create components, you must create them from templates that contain the tag. The total number of added and created components must meet the requirements that are specified for each tag.")+
"<br/><br/>"+i18n("If you create a component, you must create a deployment process for the component.")+"</div>"})).placeAt(this.callToAction)},_hasPermission:function(){var a=!1;config.data.permissions["Manage Components"]&&config.data.permissions["View Components"]&&(a=!0);return a},_hasTag:function(){var a=!1;this.sharedData.template&&0<this.sharedData.template.tagRequirements.length&&(a=!0);return a},_onShow:function(){if(!(this.template&&this.template.name===this.sharedData.template.name))this._hasPermission()?
(this._hasTag()?(dojo.style(this.noPermissionNoTagsAttach,"display","none"),dojo.style(this.yesPermissionNoTagsAttach,"display","none")):(dojo.style(this.callToAction,"display","none"),dojo.style(this.yesPermissionNoTagsAttach,"display",""),dojo.style(this.noPermissionNoTagsAttach,"display","none")),dojo.style(this.noPermissionYesTagsAttach,"display","none")):(dojo.style(this.callToAction,"display","none"),this._hasTag()?(dojo.style(this.noPermissionYesTagsAttach,"display",""),dojo.style(this.yesPermissionNoTagsAttach,
"display","none"),dojo.style(this.noPermissionNoTagsAttach,"display","none")):(dojo.style(this.noPermissionNoTagsAttach,"display",""),dojo.style(this.yesPermissionNoTagsAttach,"display","none"),dojo.style(this.noPermissionYesTagsAttach,"display","none"))),this.template=this.sharedData.template,this.sharedData.components=new d(new h({idProperty:"id"})),this.getChildren().forEach(function(a){"deploy.widgets.TooltipTitle"!==a.declaredClass&&a.destroy()}),this._hasPermission()&&this.template.tagRequirements.forEach(function(a){this.addChild(new b({tagRequirement:a,
components:this.sharedData.components}))},this)},validate:function(){var a=[];this.getChildren().forEach(function(b){"deploy.widgets.TooltipTitle"!==b.declaredClass&&(b.isRequirementSatisfied()||a.push(b.getRequirementDescriptionWithTagName()))});return a}})})},"deploy/widgets/application/wizard/AppWizardComponentSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-construct,dojo/mouse,dojo/on,dojox/data/JsonRestStore,js/webext/widgets/Dialog,js/webext/widgets/select/WebextSelect,deploy/widgets/ModelWidgetList,deploy/widgets/SimpleTag,deploy/widgets/component/EditComponent".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return j([m,l],{templateString:'<div class="appComponentSelector">  <div data-dojo-attach-point="selectorControls" class="selectorControls">    <div class="requirementLabel" data-dojo-attach-point="requirementLabel"></div>    <div data-dojo-attach-point="createComponentNode" class="createComponent"></div>    <div class="selectAttach" data-dojo-attach-point="selectAttach"></div>  </div>  <div data-dojo-attach-point="componentListAttach" class="componentList"></div>  <div data-dojo-attach-point="requirementDescription" class="requirementDescription"></div></div>',
postCreate:function(){function f(a){return a.tags.some(function(a){return a.name===j.tagRequirement.tag.name})}var j=this;this.inherited(arguments);this.requirementLabel.textContent=this.tagRequirement.tag.name;h.set(this.requirementLabel,"title",this.tagRequirement.tag.name);var l=new a({target:"/rest/deploy/component",idAttribute:"id"}),m=(new n({placeHolder:i18n("Add Component"),allowNone:!0,store:l,searchAttr:"name",defaultQuery:{filterFields:"tags",filterValue_tags:this.tagRequirement.tag.name,
filterType_tags:"eq",filterClass_tags:"String"},pageSize:10,onChange:function(a,b){b&&(j.components.put(b),m.dropDown.set("value","",void 0,void 0,""))},formatDropDownLabel:function(a,d){d.description&&(b(a,c.enter,function(){k.show(util.escape(d.description),this)}),b(a,c.leave,function(){k.hide(this)}))}})).placeAt(this.selectAttach);this.componentList=(new r({model:this.components,query:f,widgetFactory:e.hitch(this,this.createComponentWidget)})).placeAt(this.componentListAttach);this.components.query(f).observe(e.hitch(this,
this.updateRequirementDescription));config.data.permissions[security.system.createComponentsFromTemplate]&&(d.create("a",{"class":"linkPointer",innerHTML:i18n("Create Component")},this.createComponentNode),b(this.createComponentNode,"click",e.hitch(this,this.createComponent)));this.updateRequirementDescription()},createComponentWidget:function(a){var b=this;return new t({name:a.name,description:a.description,color:"#00B2EF",readOnly:this.readOnly,deleteHandler:function(){var c=b.components.getIdentity(a);
b.components.remove(c)}})},createComponent:function(){var a=this,b=new f({title:i18n("Edit Component"),closable:!0,draggable:!0});(new q({noRedirect:!0,requireTemplateTag:this.tagRequirement.tag,callback:function(c){b.hide();b.destroy();c&&a.components.add(c)}})).placeAt(b);b.show()},updateRequirementDescription:function(){if(this.isRequirementSatisfied())this.requirementDescription.style.display="none";else{var a=this.getRequirementDescription();this.requirementDescription.textContent=i18n("Components Required: ")+
a;this.requirementDescription.style.display=""}},isRequirementSatisfied:function(){var a=this.componentList.getChildren().length;if("EQUALS"===this.tagRequirement.type)a=a===this.tagRequirement.number;else if("GREATER_THAN"===this.tagRequirement.type)a=a>this.tagRequirement.number;else if("LESS_THAN"===this.tagRequirement.type)a=a<this.tagRequirement.number;else throw"Unknown tag requirement type: "+this.tagRequirement.type;return a},getRequirementDescription:function(){var a=this.tagRequirement.number;
if("EQUALS"===this.tagRequirement.type)return i18n('Needs %1 components with "%2" tag.',""+a,this.tagRequirement.tag.name);if("GREATER_THAN"===this.tagRequirement.type)return i18n('Needs %1 or more components with "%2" tag.',""+(a+1),this.tagRequirement.tag.name);if("LESS_THAN"===this.tagRequirement.type)return i18n('Needs %1 or fewer components with "%2" tag.',""+(a-1),this.tagRequirement.tag.name);throw"Unknown tag requirement type: "+this.tagRequirement.type;},getRequirementDescriptionWithTagName:function(){return this.getRequirementDescription()}})})},
"deploy/widgets/application/wizard/EnvironmentPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/declare,dojo/_base/array,dojo/on,dojo/query,dojo/request/xhr,dojo/store/Memory,dojo/store/Observable,deploy/widgets/TooltipTitle,deploy/widgets/application/wizard/EnvironmentOption,deploy/widgets/application/wizard/EnvironmentForm,deploy/widgets/application/wizard/AppWizEnvironment,deploy/widgets/application/wizard/EnvironmentControls,deploy/widgets/ModelWidgetList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return j([m,l,k],{templateString:'<div class="environmentPage wizardFullPage">  <div data-dojo-attach-point="callToAction" class="callToAction">  </div>  <div data-dojo-attach-point="columnsAttach" class="columns">    <div class="created-environments-column">      <div data-dojo-attach-point="environmentControlsAttach" class="created-environments-controls"></div>      <div data-dojo-attach-point="createdEnvironmentsListAttach" class="created-environments-list"></div>    </div>    <div data-dojo-attach-point="environmentColumnFormAttach" class="create-environment-form-column">        <div data-dojo-attach-point="formAttach"></div>    </div>  </div>  <\!-- begin yes env permission no env tmpls --\>  <div class="pageAlerts">    <div data-dojo-attach-point="yesEnvPermNoEnvTmplAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+
i18n("You cannot create environments for this application now.")+'      </h1>       <p class="description">'+i18n("The application template does not contain environment templates.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can create environments after you save this application. To create an environment, from within the application, click Environments > Create Environment. After you define the environment, define base resources by opening the environment and clicking Add Base Resources.")+
'          </li>          <li class="solutionoptions">'+i18n("You can request that environment templates be added to the application template.")+'          </li>          <li class="solutionoptions">'+i18n("If you expected to create environments during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end yes env permission no env tmpls --\>  <\!-- begin no env permission no env tmpls --\>  <div class="pageAlerts">    <div data-dojo-attach-point="noEnvPermNoEnvTmplAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+
i18n("You cannot create environments for this application now.")+'      </h1>       <p class="description">'+i18n("Your role does not have the permissions to create environments, and the application template does not contain environment templates.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">'+i18n("For permissions")+'          <li class="solutionoptions">'+i18n("You can ask administrator to grant your role the permissions that are required to create an environment while using this application template.")+
'          </li>          <li class="solutionoptions">'+i18n("You can request that environment templates be added to the application template.")+'          </li>      </ul>      <ul class="listheader">'+i18n("For environment templates (You must request permission to create an environment while using application templates.)")+'          <li class="solutionoptions">'+i18n("You can create environments after you save this application. To create an environment, from within the application, click Environments > Create Environment. After you define the environment, define base resources by opening the environment and clicking Add Base Resources.")+
'          </li>          <li class="solutionoptions">'+i18n("You can request that environment templates be added to the application template.")+'          </li>          <li class="solutionoptions">'+i18n("If you expected to create environments during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end no env permission no env tmpls --\>  <\!-- begin no env permission yes env tmpls --\>  <div class="pageAlerts">    <div data-dojo-attach-point="noEnvPermYesEnvTmplAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+
i18n("You cannot create environments for this application now.")+'      </h1>       <p class="description">'+i18n("Your role does not have the permissions that are needed to create environments during application creation.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can ask your administrator to grant your role the permissions that are required to create an environment while using this application template.")+
"          </li>      </ul>    </div>  </div>  <\!-- end no env permission yes env tmpls --\></div>",postCreate:function(){var a=this;this.inherited(arguments);(new f({titleText:i18n("Create the environments to use in this application"),tooltipText:"<div class='wizard-environment-page-tooltip'>"+i18n("An environment is a collection of resources to which you deploy the components of an application. If you deploy the application to multiple stages, such as development and production, create an environment for each stage.")+
"<br/><br/>"+i18n("During application creation, the environments that you create are based on only the displayed environment templates, and you  can create multiple environments that are based on these templates. After  you complete this wizard, if your role  has permission,  you can add more environments to the application.")+"<br/><br/>"+i18n("The environment template might contain  environment properties, which are a type of environment variable. If these properties are required, you must provide values for each property before you proceed.")+
"<br/><br/>"+i18n("You can duplicate an environment. For example, if two  quality assurance environments require several identical environment properties, you can duplicate the  environment after you provide the property values.")+"</div>"})).placeAt(this.callToAction);c.get(bootstrap.restUrl+"deploy/applicationTemplate/"+this.sharedData.template.id+"/"+this.sharedData.template.version+"/environmentTemplates?linked=true",{handleAs:"json",query:{extended:!0,linked:!0}}).then(function(b){var c=a.sharedData.environmentTemplates;
b.forEach(function(a){var b=c.getIdentity(a);a.hasOwnProperty("resourceTemplate")?c.get(b).set(a):c.remove(b)},this);a._initWidgets()})},_hasEnvironmentTemplates:function(){var a=!1;this.sharedData.environmentTemplates&&0<this.sharedData.environmentTemplates.query().length&&(a=!0);return a},_canCreateEnvironment:function(){var a=!1;config.data.permissions["Create Environments From Template"]&&(a=!0);return a},_onShow:function(){this._canCreateEnvironment()?this._hasEnvironmentTemplates()?(dojo.style(this.columnsAttach,
"display",""),dojo.style(this.noEnvPermNoEnvTmplAttach,"display","none"),dojo.style(this.noEnvPermYesEnvTmplAttach,"display","none"),dojo.style(this.yesEnvPermNoEnvTmplAttach,"display","none")):(dojo.style(this.callToAction,"display","none"),dojo.style(this.yesEnvPermNoEnvTmplAttach,"display",""),dojo.style(this.noEnvPermNoEnvTmplAttach,"display","none"),dojo.style(this.noEnvPermYesEnvTmplAttach,"display","none"),dojo.style(this.columnsAttach,"display","none")):(dojo.style(this.callToAction,"display",
"none"),this._hasEnvironmentTemplates()?(dojo.style(this.noEnvPermYesEnvTmplAttach,"display",""),dojo.style(this.noEnvPermNoEnvTmplAttach,"display","none"),dojo.style(this.yesEnvPermNoEnvTmplAttach,"display","none")):(dojo.style(this.noEnvPermNoEnvTmplAttach,"display",""),dojo.style(this.yesEnvPermNoEnvTmplAttach,"display","none"),dojo.style(this.noEnvPermYesEnvTmplAttach,"display","none")),dojo.style(this.columnsAttach,"display","none"))},_initWidgets:function(){var a=this;(new q({sharedData:a.sharedData})).placeAt(this.environmentControlsAttach);
(new o({model:a.sharedData.environments,widgetFactory:function(b){return new n({environment:b,onSelected:function(b){a.sharedData.environments.query({selected:!0}).forEach(function(a){a.get("uniqId")!==b.get("uniqId")&&a.set("selected",!1)})}})}})).placeAt(this.createdEnvironmentsListAttach);(new r({sharedData:this.sharedData})).placeAt(this.formAttach)},validate:function(){var a=i18n("Provide required property values in the following "),b=[],c=[];this.sharedData.environments.query().forEach(function(a){a.get("props").query().forEach(function(b){""!==
b.get("error")&&-1===e.indexOf(c,a.name)&&c.push(a.name)})});0<c.length&&(1===c.length?b.push(a+i18n("environment:")):b.push(a+i18n("environments:")),e.forEach(c,function(a){b.push(" - "+a)}));return b}})})},"deploy/widgets/application/wizard/EnvironmentOption":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),function(l,m,k,j,e,h,d,c,b,a){return j([m,
l],{templateString:'<div data-dojo-attach-point="environmentOptionAttach" class="environment-option">  <span class="environment-option-content">    <span data-dojo-attach-point="nameContainerAttach" class="environment-name-container">      <div class="horizontal-spacer"></div>      <span data-dojo-attach-point="nameAttach" class="environment-name"></span>    </span>    <span data-dojo-attach-point="requiredPropertiesAttach" class="required-property-wrapper">      <span class="environment-req-props">'+
i18n("REQUIRED property")+'      </span>      <span data-dojo-attach-point="propStatusIconAttach" class="propStatusIcon"></span>    </span>  </span></div>',onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);new k({connectId:[this.propStatusIconAttach],position:["after","above","below","before"],getContent:function(a){return a.classList.contains("complete")?i18n("The environment contains all required property values"):i18n("The environment does not contains all required property values")}});
this._reflectName(this.environment.get("name"));this.environment.watch("name",function(b,c,d){a._reflectName(d)});this._reflectHasRequiredProperties();this._reflectTemplate(this.environment.get("template"));this.environment.watch("template",function(b,c,d){a._reflectTemplate(d)});this._reflectSelected(this.environment.get("selected"));this.environment.watch("selected",function(b,c,d){a._reflectSelected(d)});b(this,"click",this._onSelected)},_onSelected:function(){this.environment.set("selected",!0);
if(this.onSelected)this.onSelected(this.environment)},_reflectTemplate:function(a){var b=this;this.environment.get("props").query().forEach(function(a){a.watch("currentValue",function(){b._reflectProperty(a)})});this._reflectColor(a.color);this._reflectHasRequiredProperties(a.propDefs)},_reflectColor:function(b){b=a.getColorOrConvert(b);!b.standard&&b.fallback&&(b=a.getColor(b.fallback));c.set(this.environmentOptionAttach,"borderLeftWidth","thick");c.set(this.environmentOptionAttach,"borderLeftStyle",
"solid");c.set(this.environmentOptionAttach,"borderLeftColor",b.value)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display="none";d.add(this.nameContainerAttach,"full-length");this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display="",d.remove(a.nameContainerAttach,"full-length"),d.add(a.nameContainerAttach,"partial-length");
return!0===b.required});this._reflectValidation()},_reflectProperty:function(){this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.environment.get("props").query().some(function(b){if(""!==b.error)return d.remove(a.propStatusIconAttach,"complete"),d.add(a.propStatusIconAttach,"empty"),!0});!1===b&&(d.remove(this.propStatusIconAttach,"empty"),d.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?d.add(this.environmentOptionAttach,"selected"):
d.remove(this.environmentOptionAttach,"selected")}})})},"deploy/widgets/application/wizard/EnvironmentForm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/ComboBox,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/on,dojo/query,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/color/Color,deploy/widgets/application/wizard/EnvironmentModelHelper,deploy/widgets/application/wizard/EnvironmentTemplateOption,deploy/widgets/ModelWidgetList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return e([m,l],{templateString:'<div data-dojo-attach-point="environmentFormAttach" class="environment-form">  <div data-dojo-attach-point="environmentTemplateAttach">    <div class="env-tmpl-dropdown">      <span class="env-tmpl-dropdown-label">'+i18n("Environment template")+'</span>      <span data-dojo-attach-point="selectAttach"></span>      <div data-dojo-attach-point="templateSelectTooltip" class="labelsAndValues-helpCell title-helpCell inlineBlock"></div>    </div>    <div data-dojo-attach-point="environmentTmplDescriptionAttach" class="environment-tmpl-description"></div>  </div>  <div>    <div data-dojo-attach-point="columnFormAttach"></div>    <div data-dojo-attach-point="createEnvironmentAttach">        <div class="create-environment-label">            <div class="icon-button add-button"></div>'+
i18n("Create Environment")+'        </div>        <div data-dojo-attach-point="createEnvironmentWidgetAttach" class="create-env-widget"></div>    </div>    <div class="pageAlerts">      <div data-dojo-attach-point="noEnvironmentSelectedAttach" class="pageAlert" style="display: none;">'+i18n("No environment is currently selected.")+'      </div>    </div>  </div>  <div style="height: 1px;"></div></div>',postCreate:function(){var a=this;this.inherited(arguments);this.modelHelper=new s(this.sharedData);
this.environment=null;var b=this.sharedData.environments.query({selected:!0});if(b&&0<b.length)this.environment=b[0];this.sharedData.environmentTemplates.query().forEach(function(a){var b=o.getColorOrConvert(a.color);!b.standard&&b.fallback&&(b=o.getColor(b.fallback));a.label='<div style="border-left-width:thick; border-left-style:solid; border-left-color:'+b.value+';">&nbsp;&nbsp;&nbsp;'+a.name+"</div>"});this.templateSelect=(new k({store:this.sharedData.environmentTemplates,labelAttr:"label",labelType:"html",
searchAttr:"name",autoComplete:!1,selectOnClick:!0,onChange:function(b){b=a.sharedData.environmentTemplates.query({name:b})[0];a.environment.set("template",b)}})).placeAt(this.selectAttach);b="<div class='wizard-environment-page-tooltip'>"+i18n("Environment templates are defined for each application template. An environment template contains  a resource  template and can contain environment properties and deployment approval processes.  The resource template defines the resource tree, which determines the structure of its resources. Resources include the computers that you deploy components to and the agents and components themselves.")+
"</div>";new j({connectId:[this.templateSelectTooltip],label:b,showDelay:100,position:["below","after","above","before"]});this._reflectSelectedEnvironment();this._updateEnvironmentWatchers();this.sharedData.environments.query().observe(function(b,c,d){if(-1!==d)a.environment=b,a._updateEnvironmentWatchers(),a._reflectSelectedEnvironment();if(0===a.sharedData.environments.query({selected:!0}).length)a.environment=null,a._reflectSelectedEnvironment()})},_reflectSelectedEnvironment:function(){var b=
this;this.environment?(this.environmentTmplDescriptionAttach.textContent=this.environment.get("template").description,a.set(this.noEnvironmentSelectedAttach,"display","none"),a.set(this.createEnvironmentAttach,"display","none"),a.set(this.environmentTemplateAttach,"display",""),this.templateSelect.set("value",this.environment.get("template").name),f.empty(this.createEnvironmentWidgetAttach),this._reflectSelectedEnvironmentTemplate()):(a.set(this.noEnvironmentSelectedAttach,"display",""),a.set(this.createEnvironmentAttach,
"display","none"),a.set(this.environmentTemplateAttach,"display","none"),f.empty(this.columnFormAttach),0===this.sharedData.environments.query().length&&(a.set(this.noEnvironmentSelectedAttach,"display","none"),a.set(this.createEnvironmentAttach,"display",""),(new w({model:b.sharedData.environmentTemplates,widgetFactory:function(c){return new u({template:c,onSelected:function(c){a.set(b.createEnvironmentAttach,"display","none");b.modelHelper.addEnvironment(c,!0);f.empty(b.createEnvironmentWidgetAttach)}})}})).placeAt(this.createEnvironmentWidgetAttach)))},
_updateEnvironmentWatchers:function(){var a=this;this.sharedData.environments.query().forEach(function(b){b.watch("selected",function(c,d,e){if(!0===e&&(!a.environment||b.get("uniqId")!==a.environment.get("uniqId")))a.environment=b,a._reflectSelectedEnvironment()});b.watch("template",function(c,d,e){b===a.environment&&d!==e&&a._reflectSelectedEnvironmentTemplate(e)})})},_reflectSelectedEnvironmentTemplate:function(){var a=this;f.empty(this.columnFormAttach);this.envForm=new q({showButtons:!1});this.envForm.placeAt(this.columnFormAttach);
this.envForm.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.environment?this.environment.name:"",onChange:function(b){a.environment.set("name",b)}});this.envForm.addField({name:"description",label:i18n("Description"),type:"Text",value:this.environment?this.environment.description:"",onChange:function(b){a.environment.set("description",b)}});f.place("<div class='env-prop-label'>"+i18n("Environment Properties")+"</div>",this.envForm.formContainer.fieldAttach);this._havePropDefs()&&
this.environment.get("props").query().forEach(function(a){var b=a.get("propDef"),c=util.clone(b);c.name="template/"+b.name;b.pattern&&(c.description+=i18n(" Required Pattern: %s",b.pattern));c.onChange=function(b,c){"MULTI_SELECT"===a.propDef.type?a.set("currentValue",b.join(",")):"HTTP_SELECT"===a.propDef.type?(a.set("currentValue",c.value),a.set("currentHttpSelectLabel",c.label)):a.set("currentValue",b)};"HTTP_MULTI_SELECT"===c.type&&util.updateWebextMultiSelectData(c,a,"currentValue","currentHttpSelectLabel",
!0);c.value=a.get("currentValue");c.defaultLabel=a.get("currentHttpSelectLabel");this.envForm.addField(c)},this)},_havePropDefs:function(){var a=this.environment.get("template").propDefs;return a&&0<a.length}})})},"deploy/widgets/application/wizard/EnvironmentModelHelper":function(){define("dojo/_base/declare,dojo/query,dojo/store/Memory,dojo/store/Observable,deploy/widgets/application/wizard/AppWizProperty,deploy/widgets/application/wizard/AppWizEnvironment".split(","),function(l,m,k,j,e,h){return l([],
{constructor:function(d){this.sharedData=d;this.sequenceNum=-1},precreateEnvironments:function(){var d=this;this.sharedData.environmentTemplates.query().forEach(function(b){d.addEnvironment(b,!1)});var c=this.sharedData.environments.query();c&&0<c.length&&c[0].set("selected",!0)},addEnvironment:function(d,c){d||(d=this._getFirstEnvironmentTmpl());var b=this.sharedData.environments.query({template:d}).length+1,a=new h(this._getEnvironmentUniqId(),d,c);a.set("name",a.get("name")+" "+b.toString());this.sharedData.environments.put(a)},
cloneEnvironment:function(d,c){var b=new h(this._getEnvironmentUniqId(),d.template,c);b.set("name",d.get("name")+" copy");b.set("description",d.get("description"));b.set("props",this.cloneProps(d.get("props")));this.sharedData.environments.put(b)},cloneProps:function(d){return new j(new k({data:d.query().map(function(c){return new e(c.propDef,c.currentValue)})}))},removeEnvironment:function(d){this.sharedData.environments.remove(d.get("uniqId"))},_getFirstEnvironmentTmpl:function(){return this.sharedData.environmentTemplates.query()[0]},
_getEnvironmentUniqId:function(){return this.sequenceNum+=1}})})},"deploy/widgets/application/wizard/AppWizProperty":function(){define(["dojo/Stateful","dojo/store/Memory","dojo/store/Observable","dojo/_base/declare"],function(l,m,k,j){return j([l],{propDef:null,currentValue:null,currentHttpSelectLabel:null,error:null,constructor:function(e,h){var d=this;this.propDef=e;if(this._valueIsDefinedAndNotEmpty(h))this.currentValue=h;else if(this._valueIsDefinedAndNotEmpty(e.value)){if("CHECKBOX"===e.type)if("true"===
e.value)this.currentValue=!0;else{if("false"===e.value)this.currentValue=!1}else this.currentValue=e.value;this._handleHttpSelectLabel()}else this.currentValue="SELECT"===e.type?e.allowedValues&&0<e.allowedValues.length?e.allowedValues[0].value:"":"CHECKBOX"===e.type?!1:"DATETIME"===e.type?(new Date).getTime().toString():"";this.validate();this.watch("currentValue",function(c,b,a){b!==a&&d.validate()})},validate:function(){var e=this,h="",d=this.propDef.pattern,c=this.propDef.label;0===c.indexOf("template/")&&
(c=c.substring(9));if(!0===this.propDef.required&&(""===this.currentValue||!1===this.currentValue||0===this.currentValue.length))return h=i18n("Value for property %s is required but not given",c),this.set("error",h),[!1,h];if(d&&this.currentValue)if(-1!==this.propDef.type.indexOf("MULTI_SELECT")){var b=!0;this.currentValue.split(",").forEach(function(a){e._validatePattern(a,d)||(h=i18n("Value for property %s does not match the required pattern.",c),b=!1)});if(!1===b)return this.set("error",h),[!1,
h]}else if(!this._validatePattern(this.currentValue,d))return h=i18n("Value for property %s does not match the required pattern.",c),this.set("error",h),[!1,h];this.set("error","");return[!0,""]},_handleHttpSelectLabel:function(){if("HTTP_SELECT"===this.propDef.type||"HTTP_MULTI_SELECT"===this.propDef.type)this.currentHttpSelectLabel=this.propDef.defaultLabel},_valueIsDefinedAndNotEmpty:function(e){return null!==e&&void 0!==e&&""!==e},_validatePattern:function(e,h){return RegExp("^"+h+"$").test(e)}})})},
"deploy/widgets/application/wizard/AppWizEnvironment":function(){define(["dojo/Stateful","dojo/store/Memory","dojo/store/Observable","dojo/_base/declare","deploy/widgets/application/wizard/AppWizProperty"],function(l,m,k,j,e){return j([l],{uniqId:null,name:null,description:null,template:null,props:null,selected:null,constructor:function(e,d,c){var b=this;this.uniqId=e;this.name=d.name;this.description="";this.template=d;c||(c=!1);this.selected=c;this._reflectTemplate();this.watch("template",function(a,
c,d){c!==d&&b._reflectTemplate()})},_reflectTemplate:function(){this.props=new k(new m({data:this.template.get("propDefs").map(function(h){return new e(h)})}))}})})},"deploy/widgets/application/wizard/EnvironmentTemplateOption":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),function(l,m,k,j,e,h,d,c,b){return k([m,l],{templateString:'<div class="environment-template-option">  <div data-dojo-attach-point="contentAttach" class="environment-template-option-content">  <div class="environment-name-container">    <div class="horizontal-spacer"></div>    <span data-dojo-attach-point="nameAttach" class="environment-name"></span>  </div>  </div></div>',
onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);this._reflectName(this.template.get("name"));this.template.watch("name",function(b,c,d){a._reflectName(d)});this._reflectColor(this.template.get("color"));this.template.watch("color",function(b,c,d){a._reflectSelected(d)});c(this,"click",function(){a.onSelected(a.template)})},_reflectColor:function(a){a=b.getColorOrConvert(a);!a.standard&&a.fallback&&(a=b.getColor(a.fallback));a=a.value;d.set(this.contentAttach,"borderLeftWidth",
"thick");d.set(this.contentAttach,"borderLeftStyle","solid");d.set(this.contentAttach,"borderLeftColor",a)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)}})})},"deploy/widgets/application/wizard/EnvironmentControls":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/dom-class,dojo/dom-style,dojo/on,deploy/widgets/application/wizard/EnvironmentModelHelper,deploy/widgets/application/wizard/EnvironmentTemplateOption,deploy/widgets/ModelWidgetList".split(","),
function(l,m,k,j,e,h,d,c,b,a){return j([m,l],{templateString:'<div data-dojo-attach-point="environmentControlAttach" class="environment-controls">  <span data-dojo-attach-point="titleAttach" class="created-environments-title"></span>  <div class="button-container">    <div data-dojo-attach-point="addEnvironmentMenuAttach"         class="addEnvironmentMenu"         style="display:none;">    </div>    <div data-dojo-attach-point="addButtonAttach" class="icon-button add-button"></div>    <div data-dojo-attach-point="cloneButtonAttach" class="icon-button clone-button"></div>    <div data-dojo-attach-point="removeButtonAttach" class="icon-button remove-button"></div>  </div></div>',
postCreate:function(){var e=this;this.inherited(arguments);e.modelHelper=new c(e.sharedData);config.data.permissions["Create Environments From Template"]&&e.modelHelper.precreateEnvironments();d(this.addButtonAttach,"click",function(){"none"===h.get(e.addEnvironmentMenuAttach,"display")?h.set(e.addEnvironmentMenuAttach,"display",""):h.set(e.addEnvironmentMenuAttach,"display","none")});d(this.cloneButtonAttach,"click",function(){var a=e._getSelectedEnvironment();null!==a&&(e.sharedData.environments.query({selected:!0}).forEach(function(a){a.set("selected",
!1)}),e.modelHelper.cloneEnvironment(a,!0))});d(this.removeButtonAttach,"click",function(){var a=e._getSelectedEnvironment();null!==a&&e.modelHelper.removeEnvironment(a)});new k({connectId:[this.addButtonAttach],label:i18n("Create an environment from a template"),showDelay:100,position:["above","before","below","after"]});new k({connectId:[this.removeButtonAttach],label:i18n("Delete the selected environment"),showDelay:100,position:["above","before","below","after"]});new k({connectId:[this.cloneButtonAttach],
label:i18n("Duplicate the selected environment"),showDelay:100,position:["above","before","below","after"]});this._reflectNumberOfEnvironments();this.sharedData.environments.query().observe(function(a,b,c){(-1!==b||-1!==c)&&e._reflectNumberOfEnvironments()},!1);(new a({model:e.sharedData.environmentTemplates,widgetFactory:function(a){return new b({template:a,onSelected:function(a){h.set(e.addEnvironmentMenuAttach,"display","none");e.sharedData.environments.query({selected:!0}).forEach(function(a){a.set("selected",
!1)});e.modelHelper.addEnvironment(a,!0)}})}})).placeAt(this.addEnvironmentMenuAttach)},_reflectNumberOfEnvironments:function(){var a=this.sharedData.environments.query(),b=0;if(a)b=a.length;this.titleAttach.textContent=i18n("Environments (%s)",b.toString());0===b?(e.remove(this.cloneButtonAttach,"clone-button"),e.add(this.cloneButtonAttach,"clone-button-disabled"),e.remove(this.removeButtonAttach,"remove-button"),e.add(this.removeButtonAttach,"remove-button-disabled")):(e.remove(this.cloneButtonAttach,
"clone-button-disabled"),e.add(this.cloneButtonAttach,"clone-button"),e.remove(this.removeButtonAttach,"remove-button-disabled"),e.add(this.removeButtonAttach,"remove-button"))},_getSelectedEnvironment:function(){var a=this.sharedData.environments.query({selected:!0});return a&&0<a.length?a[0]:null}})})},"deploy/widgets/application/wizard/AgentMappingPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/layout/ContentPane,dijit/layout/BorderContainer,dijit/form/TextBox,dijit/Tooltip,dojo/_base/declare,dojo/store/Memory,dojo/store/Observable,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/on,dojo/mouse,js/webext/widgets/table/TreeTable,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,deploy/widgets/TooltipTitle,deploy/widgets/application/wizard/AgentMappingTargetTree,deploy/widgets/ModelWidgetList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){return d([m,l],{templateString:'<div class="agentMappingPage wizardFullPage">  <div data-dojo-attach-point="callToAction" class="callToAction">  </div>  <div class="columns" data-dojo-attach-point="columnsAttach">    <div class="agentsColumn">      <div data-dojo-attach-point="agentsColumnHeader" class="columnHeader">'+i18n("Agents")+'</div>      <div class="columnInstructions">'+i18n("To find agents, use the search boxes. Drag agents to the agent prototypes for each environment.")+
'      </div>      <div data-dojo-attach-point="agentsAttach" class="agentsAttach"></div>    </div>    <div class="environmentsColumn">      <div data-dojo-attach-point="environmentsColumnHeader" class="columnHeader">'+i18n("Environments")+'</div>      <div data-dojo-attach-point="environmentsAttach" class="environmentsAttach"></div>    </div>  </div>  <div style="display:none">'+i18n('Confirm that the permissions are correctly set for the roles that are used to create applications from this template. For more information about these permissions, open the documentation and search for "Permissions reference for using application templates."')+
'  </div>  <\!-- begin yes map permission no env --\>  <div class="pageAlerts">    <div data-dojo-attach-point="yesMapPermNoEnvAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+i18n("You cannot map agents to environments now.")+'      </h1>       <p class="description">'+i18n("The application does not contain environments.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can add agents to the base resources after you save the application and create environments. To map an agent, from within the application, open the environment. Select the base resource that must contain an agent, and then click Actions > Add Agent and select the agent.")+
'          </li>          <li class="solutionoptions">'+i18n("If you expected to specify environments for this application during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end yes resource permission no env --\>  <\!-- begin no map permission no env --\>  <div class="pageAlerts">    <div data-dojo-attach-point="noMapPermNoEnvAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+i18n("You cannot map agents to environments now.")+
'      </h1>       <p class="description">'+i18n("Your role does not have the permissions to create or map resources for the environments, and the application does not contain environments.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">'+i18n("For permissions")+'          <li class="solutionoptions">'+i18n("You can ask your administrator to grant your role the permissions that are needed to create or map resources for the environments.")+
'          </li>      </ul>      <ul class="listheader">'+i18n("For environments (You must request permission to create resources for environments.)")+'          <li class="solutionoptions">'+i18n("You can add agents to the base resources after you save the application and create environments. To map an agent, from within the application, open the environment. Select the base resource that must contain an agent, and then click Actions > Add Agent and select the agent.")+'          </li>          <li class="solutionoptions">'+
i18n("You can request that environment templates be added to the application template.")+'          </li>          <li class="solutionoptions">'+i18n("If you expected to specify environments for this application during creation, confirm that you selected the correct application template.")+'          </li>      </ul>    </div>  </div>  <\!-- end no resource permission no env --\>  <\!-- begin no resource permission yes env --\>  <div class="pageAlerts" >    <div data-dojo-attach-point="noMapPermYesEnvAttach" class="pageAlert lowPriority">      <h1 class="msgtitle">'+
i18n("You cannot map agents to environments now.")+'      </h1>       <p class="description">'+i18n("Your role does not have the permissions that are needed to create or map resources for the environments.")+'      </p>      <h2 class="solutionheader">'+i18n("Solutions")+'      </h2>      <ul class="listheader">          <li class="solutionoptions">'+i18n("You can ask your administrator to grant your role the permissions that are needed to create or map resources for the environments.")+"          </li>      </ul>    </div>  </div>  <\!-- end no resource permission yes env --\></div>",
postCreate:function(){this.inherited(arguments);(new u({titleText:i18n("Add agents to the resource tree for each environment."),tooltipText:"<div class='wizard-agent-mapping-page-tooltip'>"+i18n("An agent is software that runs deployment processes. Each environment contains a resource tree that describes the  structure of its resources. Resources include the computers that you deploy components to and the agents and components themselves.")+"<br/><br/>"+i18n("The environment templates in an application template contain resource templates that specify the resource tree. Because resource templates are applied to multiple environments, they often contain agent prototypes and component tags instead of individual agents and components.")+
"<br/><br/>"+i18n("You assign agents to agent prototypes.  If an agent prototype is assigned component tags, the agent that you assign runs processes for the components that contain  those tags.")+"</div>"})).placeAt(this.callToAction);this._initDnDTrees()},_initDnDTrees:function(){var a=this;this.crossWidgetDnDState={};this.agentList=new q({serverSideProcessing:!0,url:bootstrap.restUrl+"agent",orderField:"name",selectorField:"id",columns:[this.getNameColumn()],hideExpandCollapse:!0,hidePagination:!1,
hideFooter:!0,selectable:!1,draggable:!0,copyOnly:!0,onDrop:function(b){if(b&&0<b.length)a.crossWidgetDnDState.sources=b},drawHeadings:function(){},onDisplayTable:function(){a.agentsColumnHeader.innerText="Agents ("+this.totalRecords+")"}});this.agentList.placeAt(this.agentsAttach);this.modelWidgetList=new v({model:this.sharedData.environments,widgetFactory:function(b){return new w({crossWidgetDnDState:a.crossWidgetDnDState,environment:b})}});this.modelWidgetList.placeAt(this.environmentsAttach)},
getNameColumn:function(){var b=this;return{name:i18n("Name"),formatter:function(c,d,e){e.style.position="relative";d=a.create("div",{"class":"inlineBlock"});e=document.createElement("span");e.innerHTML=c.name.escape();d.appendChild(e);f.add(e,"inlineBlock");a.place(e,d);c.description&&(r(e,t.enter,function(){h.show(util.escape(c.description),this)}),r(e,t.leave,function(){h.hide(this)}));(new o({objectType:"Agent",item:c,callback:function(){b.agentList.refresh()}})).placeAt(d);return d},orderField:"name",
filterField:"name",filterType:"custom",getRawValue:function(a){return a.name},getFilterFields:function(){var a=[];a.push(new e({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Agent Name"),type:"like"}));a.push(new s({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"eq"}));return a}}},validate:function(){return!0},_hasPermission:function(){var a=!1;config.data.permissions["Map to Environments"]&&(a=!0);return a},_hasEnvironment:function(){var a=!1;
this.sharedData&&this.sharedData.environments&&0<this.sharedData.environments.query().length&&(a=!0);return a},_onShow:function(){this._hasPermission()?this._hasEnvironment()?(this.environmentsColumnHeader.innerText="Environments ("+this.sharedData.environments.query().length+")",dojo.style(this.callToAction,"display",""),dojo.style(this.columnsAttach,"display",""),dojo.style(this.noMapPermNoEnvAttach,"display","none"),dojo.style(this.noMapPermYesEnvAttach,"display","none"),dojo.style(this.yesMapPermNoEnvAttach,
"display","none")):(dojo.style(this.yesMapPermNoEnvAttach,"display",""),dojo.style(this.callToAction,"display","none"),dojo.style(this.columnsAttach,"display","none"),dojo.style(this.noMapPermNoEnvAttach,"display","none"),dojo.style(this.noMapPermYesEnvAttach,"display","none")):(this._hasEnvironment()?(dojo.style(this.noMapPermYesEnvAttach,"display",""),dojo.style(this.callToAction,"display","none"),dojo.style(this.columnsAttach,"display","none"),dojo.style(this.noMapPermNoEnvAttach,"display","none")):
(dojo.style(this.noMapPermNoEnvAttach,"display",""),dojo.style(this.callToAction,"display","none"),dojo.style(this.columnsAttach,"display","none"),dojo.style(this.noMapPermYesEnvAttach,"display","none")),dojo.style(this.yesMapPermNoEnvAttach,"display","none"))}})})},"dijit/layout/BorderContainer":function(){define("dojo/_base/array,dojo/cookie,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/_base/event,dojo/keys,dojo/_base/lang,dojo/on,dojo/touch,../_WidgetBase,../_Widget,../_TemplatedMixin,./_LayoutWidget,./utils".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){var u=k("dijit.layout._Splitter",[t,q],{live:!0,templateString:'<div class="dijitSplitter" data-dojo-attach-event="onkeypress:_onKeyPress,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse" tabIndex="0" role="separator"><div class="dijitSplitterThumb"></div></div>',constructor:function(){this._handlers=[]},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?
1:-1;this._cookieName=this.container.id+"_"+this.region},buildRendering:function(){this.inherited(arguments);j.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var a=m(this._cookieName);a&&(this.child.domNode.style[this.horizontal?"height":"width"]=a)}},_computeMaxSize:function(){var a=this.horizontal?"h":"w",b=h.getMarginBox(this.child.domNode)[a],c=l.filter(this.container.getChildren(),function(a){return"center"==a.region})[0],a=h.getMarginBox(c.domNode)[a];
return Math.min(this.child.maxSize,b+a)},_startDrag:function(b){if(!this.cover)this.cover=e.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");j.add(this.cover,"dijitSplitterCoverActive");this.fake&&e.destroy(this.fake);if(!(this._resize=this.live))(this.fake=this.domNode.cloneNode(!0)).removeAttribute("id"),j.add(this.domNode,"dijitSplitterShadow"),e.place(this.fake,this.domNode,"after");j.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");
this.fake&&j.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");var d=this._factor,k=this.horizontal,l=k?"pageY":"pageX",o=b[l],m=this.domNode.style,r=h.getMarginBox(this.child.domNode)[k?"h":"w"],q=this._computeMaxSize(),s=this.child.minSize||20,k=this.region,t="top"==k||"bottom"==k?"top":"left",u=parseInt(m[t],10),w=this._resize,L=a.hitch(this.container,"_layoutChildren",this.child.id),k=this.ownerDocument;this._handlers=this._handlers.concat([f(k,n.move,this._drag=
function(a,b){var c=a[l]-o,e=d*c+r,f=Math.max(Math.min(e,q),s);(w||b)&&L(f);m[t]=c+u+d*(f-e)+"px"}),f(k,"dragstart",c.stop),f(this.ownerDocumentBody,"selectstart",c.stop),f(k,n.release,a.hitch(this,"_stopDrag"))]);c.stop(b)},_onMouse:function(a){a="mouseover"==a.type||"mouseenter"==a.type;j.toggle(this.domNode,"dijitSplitterHover",a);j.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",a)},_stopDrag:function(a){try{this.cover&&j.remove(this.cover,"dijitSplitterCoverActive"),this.fake&&
e.destroy(this.fake),j.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow"),this._drag(a),this._drag(a,!0)}finally{this._cleanupHandlers(),delete this._drag}this.container.persist&&m(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365})},_cleanupHandlers:function(){for(var a;a=this._handlers.pop();)a.remove()},_onKeyPress:function(a){this._resize=!0;var d=this.horizontal,e=1;switch(a.charOrCode){case d?
b.UP_ARROW:b.LEFT_ARROW:e*=-1;case d?b.DOWN_ARROW:b.RIGHT_ARROW:break;default:return}d=h.getMarginSize(this.child.domNode)[d?"h":"w"]+this._factor*e;this.container._layoutChildren(this.child.id,Math.max(Math.min(d,this._computeMaxSize()),this.child.minSize));c.stop(a)},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments)}}),w=k("dijit.layout._Gutter",[t,q],{templateString:'<div class="dijitGutter" role="presentation"></div>',
postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region)},buildRendering:function(){this.inherited(arguments);j.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"))}}),k=k("dijit.layout.BorderContainer",o,{design:"headline",gutters:!0,liveSplitters:!0,persist:!1,baseClass:"dijitBorderContainer",_splitterClass:u,postMixInProperties:function(){this.gutters||(this.baseClass+="NoGutter");this.inherited(arguments)},startup:function(){this._started||(l.forEach(this.getChildren(),
this._setupChild,this),this.inherited(arguments))},_setupChild:function(b){var c=b.region;if(c){this.inherited(arguments);j.add(b.domNode,this.baseClass+"Pane");var d=this.isLeftToRight();"leading"==c&&(c=d?"left":"right");"trailing"==c&&(c=d?"right":"left");if("center"!=c&&(b.splitter||this.gutters)&&!b._splitterWidget)d=b.splitter?this._splitterClass:w,a.isString(d)&&(d=a.getObject(d)),d=new d({id:b.id+"_splitter",container:this,child:b,region:c,live:this.liveSplitters}),d.isSplitter=!0,b._splitterWidget=
d,e.place(d.domNode,b.domNode,"after"),d.startup();b.region=c}},layout:function(){this._layoutChildren()},addChild:function(a,b){this.inherited(arguments);this._started&&this.layout()},removeChild:function(a){var b=a.region,c=a._splitterWidget;c&&(c.destroy(),delete a._splitterWidget);this.inherited(arguments);this._started&&this._layoutChildren();j.remove(a.domNode,this.baseClass+"Pane");d.set(a.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});d.set(a.domNode,"top"==
b||"bottom"==b?"width":"height","auto")},getChildren:function(){return l.filter(this.inherited(arguments),function(a){return!a.isSplitter})},getSplitter:function(a){return l.filter(this.getChildren(),function(b){return b.region==a})[0]._splitterWidget},resize:function(a,b){if(!this.cs||!this.pe){var c=this.domNode;this.cs=d.getComputedStyle(c);this.pe=h.getPadExtents(c,this.cs);this.pe.r=d.toPixelValue(c,this.cs.paddingRight);this.pe.b=d.toPixelValue(c,this.cs.paddingBottom);d.set(c,"padding","0px")}this.inherited(arguments)},
_layoutChildren:function(a,b){if(this._borderBox&&this._borderBox.h){var c=l.map(this.getChildren(),function(a,b){return{pane:a,weight:["center"==a.region?Infinity:0,a.layoutPriority,("sidebar"==this.design?1:-1)*(/top|bottom/.test(a.region)?1:-1),b]}},this);c.sort(function(a,b){for(var c=a.weight,d=b.weight,e=0;e<c.length;e++)if(c[e]!=d[e])return c[e]-d[e];return 0});var d=[];l.forEach(c,function(a){a=a.pane;d.push(a);a._splitterWidget&&d.push(a._splitterWidget)});s.layoutChildren(this.domNode,{l:this.pe.l,
t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h},d,a,b)}},destroyRecursive:function(){l.forEach(this.getChildren(),function(a){var b=a._splitterWidget;b&&b.destroy();delete a._splitterWidget});this.inherited(arguments)}});k.ChildWidgetProperties={region:"",layoutPriority:0,splitter:!1,minSize:0,maxSize:Infinity};a.extend(r,k.ChildWidgetProperties);k._Splitter=u;k._Gutter=w;return k})},"deploy/widgets/application/wizard/AgentMappingTargetTree":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/tag/Tagger,js/webext/widgets/table/TreeTable,js/webext/widgets/color/Color".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return k([m,l],{templateString:'<div class="agentMappingTargetTree">  <div data-dojo-attach-point="environmentNameContainer" class="environment-name-container">    <span data-dojo-attach-point="environmentName" class="environment-name"></span>  </div>  <div data-dojo-attach-point="resourcesGrid"></div></div>',USETHISSOMEDAYMAYBE:i18n("Drag agents here"),postCreate:function(){this.inherited(arguments);var a=this;if(!a.environment.mappings)a.environment.mappings=
{};this.setName();this.environment.watch("name",function(){a.setName()});this.setDescription();this.environment.watch("description",function(){a.setDescription()});this.setColor();this.setupTree();this.environment.watch("template",function(){a.environment.mappings={};a.setColor();a.setupTree()})},setName:function(){this.environmentName.textContent=this.environment.name},setDescription:function(){var a=this.environment.get("description");a&&e.set(this.environmentNameContainer,"title",util.escape(a))},
setColor:function(){var a=t.getColorOrConvert(this.environment.get("template").get("color"));!a.standard&&a.fallback&&(a=t.getColor(a.fallback));var b=a.value;util.getTint(b,0.25);a.light&&h.add(this.domNode,"light-colored-environment");util.isDarkColor(b)&&h.add(this.domNode,"dark-colored-environment");d.set(this.environmentNameContainer,"backgroundColor",b)},setupTree:function(){var a=this;b.empty(this.resourcesGrid);var c={url:bootstrap.restUrl+"resource/resourceTemplate/"+this.environment.get("template").get("resourceTemplateId")+
"/resources",xhrMethod:"POST",serverSideProcessing:!1,orderField:"name",columns:[this.getNameColumn()],draggable:!0,selectable:!1,hideExpandCollapse:!0,hidePagination:!0,hideFooterLinks:!0,expandRoots:!0,suppressDefaultOnDrop:!0,canDragItem:function(){return!1},canDropOnItem:function(b,c){var d=!1,e;a._isAgentPrototype(c)&&c.parent&&(d=!0,e=a.environment.mappings[c.parent.id]);Array.isArray(e)&&0<e.length&&(d=b.every(function(a){return e.every(function(b){return b.id!==a.id})}));return d},onDrop:function(b,
c){if(c){var d=this;setTimeout(function(){var b=a.crossWidgetDnDState.sources,e=c.parent.id,f=a.environment.mappings;f[e]||(f[e]=[]);b.forEach(function(a){if(!f[e].some(function(b){return b.id===a.id})){var b=j.mixin({},a);f[e].push(b);b.parentPath=c.parent.path}});d.loadTable()},100)}},getChildUrl:function(b){return a.getChildUrl(b)},hasChildren:function(a){return a.hasChildren},drawHeadings:function(){}};this.grid=new r(c);this.grid.placeAt(this.resourcesGrid)},getChildUrl:function(a){return bootstrap.restUrl+
"resource/resourceTemplate/"+this.environment.get("template").get("resourceTemplateId")+"/resources/"+a.id+"/children"},getNameColumn:function(){var c=this;return{name:i18n("Name"),formatter:function(d){var e=b.create("div",{"class":"inlineBlock"}),j=f.resourceNonLinkFormatter(d,!0);h.add(j,"inlineBlock");b.place(j,e);c.showTags(d,e);if(c._isAgentPrototype(d)&&d.parent){var k=c.environment.mappings[d.parent.id];k&&k.forEach(function(c){c.agent=!0;var d=f.resourceNonLinkFormatter(c,!0);h.add(d,"assignedAgent");
var j=b.toDom('<span class="del">\u00d7</span>');a(j,"click",function(){var a=k.indexOf(c);k.splice(a,1);b.destroy(d)});b.place(j,d);b.place(d,e)})}return e},getRawValue:function(a){return a.path}}},showTags:function(a,b){var c=this;c.tagger=new n({objectType:"Resource",allowTagAdd:!1,item:a,callback:function(){c.grid.refresh()}});c.tagger.placeAt(b)},_isAgentPrototype:function(a){return!!a.path.match("Agent Prototype[/]?$")}})})},"deploy/widgets/wizard/Wizard":function(){define(["dojo/_base/declare",
"dojo/dom-class","dojox/widget/Wizard"],function(l,m,k){return l([k],{doneButtonLabel:i18n("Create"),nextButtonLabel:i18n("Next"),previousButtonLabel:i18n("Previous"),cancelButtonLabel:i18n("Cancel"),postCreate:function(){this.inherited(arguments);this._highlightButtons=[]},_checkButtons:function(){this.inherited(arguments);this.cancelFunction?this._buttonOn(this.cancelButton):this._buttonOff(this.cancelButton);""===this.doneButton.domNode.style.display&&this._buttonOn(this.doneButton);this.hideDisabled||
("none"===this.doneButton.domNode.style.display&&this._buttonOff(this.doneButton),"none"===this.nextButton.domNode.style.display&&this._buttonOff(this.nextButton))},_buttonOff:function(j){j.set("disabled",!0);j.domNode.style.display=this.hideDisabled?"none":""},_buttonOn:function(j){j.set("disabled",!1);j.domNode.style.display=""},highlightButton:function(j,e){this._highlightButtons.filter(function(h){return m.contains(h.domNode,e)}).forEach(function(h){m.remove(h.domNode,e)});j&&(m.add(j.domNode,
e),-1===this._highlightButtons.indexOf(j)&&this._highlightButtons.push(j))}})})},"deploy/widgets/application/wizard/WizardProgressVisualization":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/dom-style,dojo/dom-attr,dijit/_Widget,dijit/_TemplatedMixin,deploy/widgets/wizard/_WizardWatcherMixin".split(","),function(l,m,k,j,e,h,d){return l([e,h,d],{templateString:'<img data-dojo-attach-point="wizardProgressImage" class="wizardProgressImage"></img>',postCreate:function(){this.inherited(arguments);
this._addWizardChangeHandler(m.hitch(this,this.render))},render:function(){var c=this.wizard.getChildren(),b=c.length,c=c.indexOf(this.wizard.selectedChildWidget)+1;k.set(this.wizardProgressImage,"display",1<b?"":"none");j.set(this.wizardProgressImage,"src",bootstrap.contentUrl+"images/wizard/WizardProgress_"+c+".png")}})})},"deploy/widgets/wizard/_WizardWatcherMixin":function(){define(["dojo/_base/declare","dojo/topic"],function(l,m){return l(null,{postCreate:function(){this.inherited(arguments);
this._wizardWatcherCallbacks=[];this.wizard&&this._watchWizard(this.wizard)},_watchWizard:function(k){if(void 0!==this._watchedWizard)throw"Not implemented: Wizard watchers can currently only watch one wizard.";this._watchedWizard=k;this._subscribeToWizardTopic("addChild");this._subscribeToWizardTopic("removeChild");this._subscribeToWizardTopic("selectChild")},_subscribeToWizardTopic:function(k){var j=this;m.subscribe(this.wizard.id+"-"+k,function(e){j._wizardWatcherCallbacks.forEach(function(h){h(e)})})},
_addWizardChangeHandler:function(k){this._wizardWatcherCallbacks.push(k)}})})},"deploy/widgets/wizard/WizardDialog":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class","js/webext/widgets/Dialog","deploy/widgets/wizard/_WizardWatcherMixin"],function(l,m,k,j,e){return l([j,e],{resizeOnWizardChange:!0,postCreate:function(){this.inherited(arguments);k.add(this.domNode,"webext-wizardDialog");if(!1!==this.resizeOnWizardChange)this.resizeOnWizardChange=!0;if(void 0!==this.progressVisualization.call)this.progressVisualization=
new this.progressVisualization({wizard:this.wizard});this.progressVisualization&&this.progressVisualization.placeAt(this.titleBar);this.resizeOnWizardChange&&this._wizardWatcherCallbacks.push(m.hitch(this,this.resize));this.wizard.resizeDom=this.domNode;this.wizard.placeAt(this.containerNode)},show:function(){void 0!==this.progressVisualization&&this.progressVisualization.render();this.inherited(arguments)}})})},"deploy/widgets/applicationTemplate/ApplicationTemplateList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,deploy/widgets/applicationTemplate/EditApplicationTemplate,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/util/blocker/BlockingContainer,js/webext/widgets/table/TreeTable,dojo/io/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){return h("deploy.widgets.application.ApplicationTemplateList",[m,l],{templateString:'<div class="applicationTemplateList"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.addTopButtons();this.makeTable()},makeTable:function(){var b=this;this.grid=new v({url:bootstrap.restUrl+"deploy/applicationTemplate",serverSideProcessing:!1,
noDataMessage:i18n("No application templates found."),tableConfigKey:"applicationTemplateList",hidePagination:!1,hideExpandCollapse:!0,columns:[{name:i18n("Name"),formatter:function(c,d,e){e.style.position="relative";d=f.create("div",{"class":"inlineBlock",style:"margin-"+(a.isBodyLtr()?"right":"left")+":78px;"});e=f.create("div",{"class":"inlineBlock"});f.place(e,d);var h=t.applicationTemplateLinkFormatter(c);f.place(h,e);f.place(b.actionsFormatter(c),d);return d},orderField:"name",filterField:"name",
filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,orderField:"created",getRawValue:function(a){return new Date(a.created)}},{name:i18n("By"),field:"user",orderField:"user",getRawValue:function(a){return a.user}}]});this.grid.placeAt(this.gridAttach)},addTopButtons:function(){var a=this;if(config.data.permissions[security.system.createApplicationTemplates]){var c={label:i18n("Create Application Template"),
showTitle:!1,onClick:function(){a.showNewApplicationTemplateDialog()}},c=(new j(c)).placeAt(this.buttonAttach);b.add(c.domNode,"idxButtonSpecial");c={label:i18n("Import Application Template"),showTitle:!1,onClick:function(){a.showImportApplicationTemplateDialog()}};(new j(c)).placeAt(this.buttonAttach)}},addEditActions:function(a,b){var c=this;(new j({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.editApplicationTemplate(a)}})).placeAt(b)},getRowWriteActions:function(a){var b=
this;return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]},getRowReadActions:function(a){return[{label:i18n("Export"),onClick:function(){util.downloadFile(bootstrap.restUrl+"deploy/applicationTemplate/"+a.id+"/export")}}]},actionsFormatter:function(a){var b=f.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[];a.security.read&&c.forEach(this.getRowReadActions(a),function(a){d.push(a)});a.security["Edit Basic Settings"]&&(this.addEditActions(a,
b),c.forEach(this.getRowWriteActions(a),function(a){d.push(a)}));d.length&&(new u({options:d,label:i18n("Actions...")})).placeAt(b);return b},editApplicationTemplate:function(a){var b=this;d.get({url:bootstrap.restUrl+"deploy/applicationTemplate/"+a.id,handleAs:"json",load:function(a){var c=new o({title:i18n("Edit Application Template"),closable:!0,draggable:!0});(new r({applicationTemplate:a,readOnly:!a.security["Edit Basic Settings"],noRedirect:!0,callback:function(){c.hide();c.destroy();b.grid.refresh()},
cancelCallback:function(){c.hide();c.destroy()}})).placeAt(c);c.show()},error:function(a){(new q({title:i18n("Error retrieving application template for edit."),message:a.responseText})).startup()}})},confirmDelete:function(a){var b=this;new s({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),action:function(){b.grid.block();d.del({url:bootstrap.restUrl+"deploy/applicationTemplate/"+a.id,handleAs:"json",load:function(){b.grid.unblock();
b.grid.refresh()},error:function(a){(new q({title:i18n("Error deleting application template"),message:a.responseText})).startup();b.grid.unblock()}})}})},destroy:function(){this.inherited(arguments);this.grid.destroy()},showImportApplicationTemplateDialog:function(){var a=this,b=new w,c=new o({title:i18n("Import Application Template"),closable:!0,draggable:!0});b.placeAt(c.containerNode);a.importIsUpgrade=!1;var d=f.create("form",{target:"formTarget",method:"Post",enctype:"multipart/form-data",encoding:"multipart/form-data"}),
h=f.create("div",{className:"filInputContainer"}),l=f.create("input",{type:"file",name:"file",className:"fileInput"});f.place(l,h);var n=f.create("div",{className:"labelsAndValues-row"}),m=f.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),r=f.create("label",{"for":"upgradeApplication",className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Upgrade Application Template")});(new e({name:"upgradeApplication",checked:!1,onChange:function(){a.importIsUpgrade=this.get("checked");
a.setFormAction(d)}})).placeAt(m);n.appendChild(r);n.appendChild(m);var m=f.create("div",{className:"labelsAndValues-row"}),r=f.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),s=f.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Generic Process Upgrade Type")}),t=new k({name:"processUpgradeTypeInput",options:[{label:i18n("Use Existing Process"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Process"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Process Exists"),
value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Process Does Not Exist"),value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Process If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.processUpgradeType=this.get("value");a.setFormAction(d)}});a.processUpgradeType=t.get("value");t.placeAt(r);m.appendChild(s);m.appendChild(r);var r=f.create("div",{className:"labelsAndValues-row"}),s=f.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),t=f.create("div",{className:"labelsAndValues-labelCell inlineBlock",
innerHTML:i18n("Resource Template Upgrade Type")}),u=new k({name:"resourceTemplateUpgradeTypeInput",options:[{label:i18n("Use Existing Resource Template"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Resource Template"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Resource Template Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Resource Template Does Not Exist"),value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Resource Template If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.resourceTemplateUpgradeType=
this.get("value");a.setFormAction(d)}});a.resourceTemplateUpgradeType=u.get("value");u.placeAt(s);r.appendChild(t);r.appendChild(s);s=f.create("div",{style:"display:block; margin-top:10px;"});(new j({label:i18n("Submit"),type:"submit"})).placeAt(s);d.appendChild(n);d.appendChild(m);d.appendChild(r);d.appendChild(h);d.appendChild(s);b.containerNode.appendChild(d);d.onsubmit=function(){var e=!0;l.value?(b.block(),a.setFormAction(d),x.send({form:d,handleAs:"json",load:function(d){b.unblock();"ok"===
d.status?(c.hide(),c.destroy(),a.grid.refresh()):(new q({message:i18n("Error importing application template: %s",util.escape(d.error||""))})).startup()},error:function(a){b.unblock();(new q({message:i18n("Error importing application template: %s",util.escape(a.error||""))})).startup()}})):(new q({message:i18n("Please choose a template json file to import.")}),e=!1);return e};c.show()},setFormAction:function(a){var b=util.getCookie(bootstrap.expectedSessionCookieName);a.action=bootstrap.restUrl+"deploy/applicationTemplate/import?"+
bootstrap.expectedSessionCookieName+"="+b+"&processUpgradeType="+this.processUpgradeType+"&resourceTemplateUpgradeType="+this.resourceTemplateUpgradeType+"&isUpgrade="+this.importIsUpgrade},showNewApplicationTemplateDialog:function(){var a=new o({title:i18n("Create Application Template"),closable:!0,draggable:!0});(new r({callback:function(){a.hide();a.destroy()}})).placeAt(a.containerNode);a.show()}})})},"deploy/widgets/CustomDateRangeSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/DateTextBox,dijit/form/Select,dojo/_base/declare,dojo/date,dojo/dom-construct,js/webext/widgets/BidiDateUtil".split(","),
function(l,m,k,j,e,h,d,c,b){return h("deploy.widgets.CustomDateRangeSelector",[m,l],{templateString:'<div class="customDateRangeSelector"><div data-dojo-attach-point="startDateAttach" class="inlineBlock"></div><div class="inlineBlock">&nbsp;-&nbsp;</div><div data-dojo-attach-point="endDateAttach" class="inlineBlock"></div><div><div class="inlineBlock"><div>'+i18n("Increments")+'</div><div data-dojo-attach-point="tuSelectAttach"></div></div><div data-dojo-attach-point="buttonAttach" class="inlineBlock"></div></div></div>',
doneButton:null,startDateAttach:null,endDataAttach:null,tuSelectAttach:null,buttonAttach:null,timeUnit:"TIME_UNIT_MONTH",timeUnitSelect:null,startDateSelect:null,endDateSelect:null,startDate:null,endDate:null,startDateBackup:new Date,endDateBackup:new Date,constructor:function(a){this.inherited(arguments);if(a.endDate)this.endDateBackup=a.endDate;if(a.startDate)this.startDateBackup=a.startDate},buildRendering:function(){this.inherited(arguments);this.createTimeUnitWidget();this.createDateWidgets();
this.createDoneButton()},destroy:function(){this.inherited(arguments);var a=this.timeUnitSelect;a&&a.destroy();(a=this.startDateSelect)&&a.destroy();(a=this.endDateSelect)&&a.destroy()},createDateWidgets:function(){c.empty(this.startDateAttach);c.empty(this.endDateAttach);var a={name:"startDate",forceWidth:!1,style:{width:"7em"},format:this.dateFormatter},e={forceWidth:!1,name:"endDate",style:{width:"7em"},format:this.dateFormatter};if("TIME_UNIT_MONTH"===this.timeUnit)this.endDateBackup.setDate(1),
this.startDateBackup.setDate(1),a.rangeCheck=this.monthRangeCheck,e.rangeCheck=this.monthRangeCheck;else if("TIME_UNIT_WEEK"===this.timeUnit){var h=this.startDateBackup.getDay();this.startDateBackup=d.add(this.startDateBackup,"day",-h);h=this.endDateBackup.getDay();this.endDateBackup=d.add(this.endDateBackup,"day",-h);a.rangeCheck=this.weekRangeCheck;e.rangeCheck=this.weekRangeCheck}a.value=this.startDateBackup;e.value=this.endDateBackup;a.datePackage=b.getDatePackage();e.datePackage=b.getDatePackage();
this.startDateSelect=new j(a);this.startDateSelect.placeAt(this.startDateAttach);this.endDateSelect=new j(e);this.endDateSelect.placeAt(this.endDateAttach)},createTimeUnitWidget:function(){var a=this;a.timeUnitSelect=new e({name:"time_unit",required:!0,options:[{label:'<img src="'+bootstrap.imageUrl+'icons/icon_month_picker.gif"/>'+i18n("Months"),value:"TIME_UNIT_MONTH"},{label:'<img src="'+bootstrap.imageUrl+'icons/icon_week_picker.gif"/>'+i18n("Weeks"),value:"TIME_UNIT_WEEK"},{label:'<img src="'+
bootstrap.imageUrl+'icons/icon_day_picker.gif"/>'+i18n("Days"),value:"TIME_UNIT_DAY"}],value:a.timeUnit,onChange:function(b){a.timeUnit=b;a.createDateWidgets(b)}});a.timeUnitSelect.placeAt(a.tuSelectAttach)},createDoneButton:function(){var a=this;c.empty(a.buttonAttach);a.doneButton=new k({label:i18n("OK"),showTitle:!1,onClick:function(){a.finished()}});a.doneButton.placeAt(a.buttonAttach)},monthRangeCheck:function(a){return 1===a.getDate()},weekRangeCheck:function(a){return 0===a.getDay()},getStartDate:function(){return this.startDateSelect.get("value")},
getEndDate:function(){var a=this.endDateSelect.get("value");a.setHours(23);a.setMinutes(59);a.setSeconds(59);a.setMilliseconds(999);return a},getTimeUnit:function(){return this.timeUnitSelect.get("value")},dateFormatter:function(a){return util.dayFormatShort(a)}})})},"deploy/widgets/patterns/PatternExecutionLogFormatters":function(){define("exports,dijit/form/Button,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Popup,deploy/widgets/approval/TaskResponseDialog,deploy/widgets/log/LiveLogViewer,deploy/widgets/patterns/PatternProcessIconsFormatter,deploy/widgets/resource/TransientResourceCompareTree,js/webext/widgets/Dialog,js/webext/widgets/FieldList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){l.nameFormatter=function(a,c){if("OS::Nova::Server"===c.resourceType)a.appendChild(formatters.createIcon("agentIcon"));else{var d=null;"patternDeployment"===c.type?d="deploy":"patternStackExecution"===c.type&&(d="process");null!==d?b.create("div",{className:"inline-block execution-log-process-icon process-icon "+d+"-step-icon"},a):(d=t.getIconForStep({activity:c}),b.create("div",{className:"inline-block execution-log-process-icon pattern-process-icon "+d+"-step-icon"},
a))}d=c.displayName;if(!d)d=c.name;c.resourceType&&"configurationResourceGroup"!==c.resourceType&&"serverResourceGroup"!==c.resourceType&&"server"!==c.resourceType&&(d+=" ("+c.resourceType+")");d&&util.appendTextSpan(a,d.escape()+"&nbsp;");return a};l.actionsMenuFormatter=function(a,b,c){"OS::Nova::Server"===a.resourceType&&"INITIALIZED"!==a.state&&(!a.error||"CANCELED"===a.result)&&c.splice(0,0,{label:i18n("Output Log"),icon:'<div class="inlineBlock general-icon consoleIcon" ></div>',onClick:function(){(new r({url:bootstrap.restUrl+
"integration/pattern/"+a.integrationProviderId+"/environment/"+a.stackId+"/instance/"+a.physicalResourceId+"/consoleOutput",title:i18n("Output Log"),autoRefresh:"EXECUTING"===a.state||"SUCCEEDED"===a.state,paddingTop:"0px"})).show()}})}})},"deploy/widgets/patterns/PatternProcessIconsFormatter":function(){define("dojo/_base/array,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/mouse,dojo/on,dijit/form/Button,dijit/TooltipDialog,dijit/popup,deploy/widgets/tag/TagDisplay,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m){return{getIconForTree:function(k){var j="process-icon ",j=k.type?"folder"===k.type?j+"process-folder-icon":j+(k.type+"-step-icon"):j+(this.getIconForStep(k)+"-step-icon");return m.create("div",{className:"inline-block "+j})},getIconForStep:function(k){var j="patternResourceDefault";(k=k.activity.resourceType)&&("OS::Neutron::Port"===k?j="port":"IBM::UrbanCode::ResourceTree"===k?j="resourceTree":"IBM::UrbanCode::SoftwareConfig::UCD"===k?j="swConfig":"IBM::UrbanCode::SoftwareDeploy::UCD"===
k?j="swDeploy":"OS::Heat::MultipartMime"===k?j="mime":"OS::Heat::SoftwareConfig"===k?j="swConfig":"OS::Neutron::SecurityGroup"===k?j="securityGroup":"OS::Cinder::Volume"===k?j="volume":"OS::Cinder::VolumeAttachment"===k?j="volumeAttachment":"server"===k?j="server":"configurationResourceGroup"===k?j="configuration":"serverResourceGroup"===k?j="server":"OS::Neutron::Router"===k?j="router":"OS::Swift::Container"===k?j="volumeBlob":"OS::Neutron::LoadBalancer"===k?j="loadbalancer":"OS::Neutron::HealthMonitor"===
k?j="monitor":"OS::Neutron::Pool"===k?j="replicationGroup":"OS::Neutron::FloatingIP"===k?j="elasticIp":"OS::Neutron::Net"===k?j="network":"OS::Heat::AutoScalingGroup"===k?j="scalingGroup":"OS::Heat::ScalingPolicy"===k?j="scalingPolicy":"OS::Neutron::Net"===k?j="network":"IBM::ElastiCache::ReplicationGroup"===k?j="scalingPolicy":"IBM::RDS::Instance"===k?j="rdsInstance":"IBM::ElastiCache::Cluster"===k?j="elasticCache":k.endsWith(".yaml")||k.endsWith(".yml")?j="blueprint":"OS::Ceilometer::Alarm"===k&&
(j="alarm"));return j}}})},"deploy/widgets/Color":function(){define(["dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/dom-style"],function(){return{getBasicColorName:function(l){var m="",l=l.toUpperCase();switch(l){case "#FFF5EE":case "#FFC0CB":case "#F08080":case "#FF0000":case "#DC143C":case "#B22222":case "#8B0000":case "#A52A2A":m="red";break;case "#FFF8DC":case "#FFE4C4":case "#F4A460":case "#FF4500":case "#D2691E":case "#8B4513":case "#FFE4B5":case "#FFA500":case "#FF8C00":case "#FF7F50":case "#A0522D":m=
"orange";break;case "#FFFACD":case "#FFFFE0":case "#F0E68C":case "#EEE8AA":case "#FFFF00":case "#FFD700":case "#808000":m="yellow";break;case "#556B2F":case "#98FB98":case "#90EE90":case "#7FFF00":case "#32CD32":case "#228B22":case "#008000":case "#006400":case "#8FBC8F":case "#2E8B57":m="green";break;case "#AFEEEE":case "#20B2AA":case "#48D1CC":case "#008B8B":case "#191970":case "#E0FFFF":case "#87CEFA":case "#87CEEB":case "#4169E1":case "#0000FF":case "#0000CD":case "#000080":case "#E6E6FA":case "#6495ED":case "#7B68EE":case "#6A5ACD":case "#483D8B":m=
"blue";break;case "#8A2BE2":case "#4B0082":case "#DDA0DD":case "#EE82EE":case "#DA70D6":case "#BA55D3":case "#9932CC":case "#8B008B":case "#800080":m="purple";break;case "#FFFFFF":case "#D3D3D3":case "#C0C0C0":case "#808080":case "#696969":case "#2F4F4F":case "#000000":m="black";break;default:m="black"}return m}}})},"deploy/widgets/componentTemplate/ComponentTemplateComponents":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/component/EditComponent,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return h("deploy.widgets.componentTemplate.ComponentTemplateComponents",[m,l],{templateString:'<div class="componentList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/component/",d=[{name:i18n("Name"),formatter:this.componentFormatter,
orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Template Version"),formatter:function(a){a=a.templateVersion;-1===a&&(a=i18n("Latest Version"));return a},orderField:"templateVersion",getRawValue:function(a){var b=a.templateVersion;-1===a.templateVersion&&(b=1E6);return b}},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,orderField:"dateCreated",getRawValue:function(a){return new Date(a.created)}},
{name:i18n("By"),field:"user.name",orderField:"user.name",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}],f={name:"active",type:"eq",className:"Boolean",values:[!0]},h=[f,{name:"templateId",type:"eq",className:"UUID",values:[a.componentTemplate.id]}];this.grid=new t({url:b,orderField:"name",serverSideProcessing:!0,noDataMessage:i18n("No components found."),tableConfigKey:"componentTemplateComponentList",columns:d,hidePagination:!1,
hideExpandCollapse:!0,queryData:{outputType:["BASIC","LINKED","SECURITY"]},baseFilters:h});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks)(new j({checked:!1,value:"true",onChange:function(b){b?a.grid.baseFilters=e.filter(a.grid.baseFilters,function(a){return"active"!==a.name}):a.grid.baseFilters.push(f);a.grid.refresh()}})).placeAt(this.activeBoxAttach),b=document.createElement("div"),c.add(b,"inlineBlock"),b.style.position="relative",b.style.top="2px",b.style.left=
"2px",b.innerHTML=i18n("Show Inactive Components"),this.activeBoxAttach.appendChild(b);config.data.permissions[security.system.createComponentsFromTemplate]&&(b={label:i18n("Create Component"),showTitle:!1,onClick:function(){a.showNewComponentDialog()}},b=new k(b),c.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},componentFormatter:function(a){var b=document.createElement("a");b.innerHTML=a.name.escape();b.href=
"#component/"+a.id;return b},actionsFormatter:function(c){var d=this.parentWidget,e=document.createElement("div");if(config.data.permissions[security.system.createComponents]){var f=b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},e);a(f,"click",function(){d.showNewComponentDialog(c)})}c.security.Delete&&(f=b.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e),a(f,"click",function(){d.confirmDelete(c)}));return e},confirmDelete:function(a){var b=this;
new r({message:i18n("Are you sure you want to delete component %s?",a.name.escape()),action:function(){b.grid.block();d.del({url:bootstrap.restUrl+"deploy/component/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new q({title:i18n("Error deleting component"),message:a.responseText})).startup();b.grid.unblock()}})}})},showNewComponentDialog:function(a){var b=new n({title:i18n("Create Component"),closable:!0,draggable:!0});(new f({source:a,componentTemplate:this.componentTemplate,
callback:function(){b.hide();b.destroy()}})).placeAt(b.containerNode);b.show()}})})},"deploy/widgets/componentTemplate/ComponentTemplateList":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dijit/form/Button,dijit/form/CheckBox,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,dojo/topic,dojo/_base/xhr,dojo/io/iframe,deploy/widgets/Formatters,deploy/widgets/componentTemplate/EditComponentTemplate,deploy/widgets/tag/Tagger,deploy/widgets/tag/TagDisplay,js/webext/widgets/table/TreeTable,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,dijit/form/Select,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){return l([m,k],{templateString:'<div class="componentTemplateList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/componentTemplate",f=[{name:i18n("Name"),formatter:function(b,e,f){f.style.position="relative";
var e=c.create("div",{"class":"inlineBlock",style:"margin-"+(d.isBodyLtr()?"right":"left")+":78px;"}),f=c.create("div",{"class":"inlineBlock"}),h=r.componentTemplateLinkFormatter(b);c.place(h,f);c.place(f,e);a.tagger=new q({objectType:"ComponentTemplate",item:b,callback:function(){a.grid.refresh()}});a.tagger.placeAt(e);return e},orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",
formatter:util.tableDateFormatter,orderField:"created",getRawValue:function(a){return new Date(a.created)}},{name:i18n("By"),field:"user",orderField:"user",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new s({url:b,serverSideProcessing:!1,noDataMessage:i18n("No component templates found."),tableConfigKey:"componentTemplateList",columns:f,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks)(new e({checked:!1,
value:"true",onChange:function(b){a.grid.url=b?bootstrap.restUrl+"deploy/componentTemplate/all":bootstrap.restUrl+"deploy/componentTemplate";a.grid.refresh()}})).placeAt(this.activeBoxAttach),b=document.createElement("div"),h.add(b,"inlineBlock"),b.style.position="relative",b.style.top="2px",b.style.left="2px",b.innerHTML=i18n("Show Inactive Templates"),this.activeBoxAttach.appendChild(b);config.data.permissions[security.system.createComponentTemplates]&&(f={label:i18n("Create Template"),showTitle:!1,
onClick:function(){a.showNewComponentTemplateDialog()}},b={label:i18n("Import Template"),showTitle:!1,onClick:function(){a.showImportTemplateDialog()}},f=(new j(f)).placeAt(this.buttonTopAttach),(new j(b)).placeAt(this.buttonTopAttach),h.add(f.domNode,"idxButtonSpecial"))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div");if(a.security.Delete){var f=c.create("a",{"class":"actionsLink linkPointer",
innerHTML:i18n("Delete")},e);b(f,"click",function(){d.confirmDelete(a)})}util.createDownloadAnchor({"class":"actionsLink linkPointer",innerHTML:i18n("Export"),href:bootstrap.restUrl+"deploy/componentTemplate/"+a.id},e);return e},confirmDelete:function(a){var b=this;new w({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),action:function(){b.grid.block();f.del({url:bootstrap.restUrl+"deploy/componentTemplate/"+a.id,handleAs:"json",
load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new x({title:i18n("Error deleting component template"),message:a.responseText})).startup();b.grid.unblock()}})}})},showImportTemplateDialog:function(){var a=this,b=new u({title:i18n("Import Template"),closable:!0,draggable:!0});a.processUpgradeType="USE_EXISTING_IF_EXISTS";var d=document.createElement("form");d.target="formTarget";d.method="POST";d.enctype="multipart/form-data";d.encoding="multipart/form-data";dojo.addClass(d,"importForm");
var f=document.createElement("input");f.type="file";f.name="file";f.className="filInputContainer";var h=document.createElement("div");dojo.addClass(h,"labelsAndValues-row");var k=document.createElement("div");k.innerHTML=i18n("Upgrade Template");dojo.addClass(k,"labelsAndValues-labelCell inlineBlock");var l=document.createElement("div");dojo.addClass(l,"labelsAndValues-valueCell inlineBlock");var o=new e({name:"upgradeComponent",checked:!1});o.placeAt(l);var m=document.createElement("div");dojo.addClass(m,
"labelsAndValues-row");var r=document.createElement("div");r.innerHTML=i18n("Generic Process Upgrade Type");dojo.addClass(r,"labelsAndValues-labelCell");var q=document.createElement("div");dojo.addClass(q,"labelsAndValues-valueCell");(new v({name:"templateUpgradeTypeInput",options:[{label:i18n("Use Existing Template"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Template"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Template Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Template Does Not Exist"),
value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Template If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.processUpgradeType=this.get("value");a.setFormAction(d)}})).placeAt(q);m.appendChild(r);m.appendChild(q);r=c.create("div");(new j({label:i18n("Submit"),type:"submit"})).placeAt(r);h.appendChild(l);h.appendChild(k);d.appendChild(h);d.appendChild(m);d.appendChild(f);d.appendChild(r);b.containerNode.appendChild(d);d.onsubmit=function(){var c=!0;if(f.value){var e=util.getCookie(bootstrap.expectedSessionCookieName);
d.action=bootstrap.restUrl+"deploy/componentTemplate/"+(!0===o.checked?"upgrade":"import")+"?processUpgradeType="+a.processUpgradeType+"&"+bootstrap.expectedSessionCookieName+"="+e;n.send({form:d,handleAs:"json",load:function(c){"ok"===c.status?(b.hide(),b.destroy(),a.grid.refresh()):(new x({message:i18n("Error importing component template: %s",c.error)})).startup()},error:function(a){(new x({message:i18n("Error importing component template: %s",a.error)})).startup()}})}else new x({message:i18n("Please choose a template json file to import.")}),
c=!1;return c};b.show()},showNewComponentTemplateDialog:function(){var a=new u({title:i18n("Create Component Template"),closable:!0,draggable:!0});(new t({callback:function(){a.hide();a.destroy()}})).placeAt(a.containerNode);a.show()}})})},"deploy/widgets/componentTemplate/EditComponentTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/on,dojo/_base/xhr,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/DomNode,js/webext/widgets/RestSelect,deploy/widgets/security/TeamSelector".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.componentTemplate.EditComponentTemplate",[m,l],{templateString:'<div class="editComponentTemplate">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){this.inherited(arguments);var a=this;this.sourceConfigPropertyNames=[];this.existingValues={componentType:"STANDARD"};if(this.componentTemplate){if(this.readOnly=!this.componentTemplate.security["Edit Basic Settings"],this.existingValues=this.componentTemplate,
this.existingValues.componentType=this.componentTemplate.componentType,!this.readOnly)this.readOnly=this.componentTemplate.version!==this.componentTemplate.versionCount}else d.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Component Template",handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity={teams:b}}});var e=[];this.sourceConfigPluginSelect=new f({restUrl:bootstrap.restUrl+"plugin/sourceConfigPlugin",getLabel:function(a){return i18n(a.name)},getValue:function(a){return a.name},
value:this.existingValues.sourceConfigPluginName,onChange:function(b,c){k.forEach(e,function(b){a.removePropertyField(a.form,b)});e=[];if(c){var d=c.componentPropSheetDef.name;k.forEach(c.componentPropDefs,function(b){var c=null;if(a.existingValues.sourceConfigProperties&&(c=util.getNamedProperty(a.existingValues.sourceConfigProperties,b.name)))b.value=c.value;var f=util.clone(b),b=d+"/"+b.name;f.name=b;f.translate=!0;e.push(b);if(-1<f.label.indexOf("URL")||-1<f.label.indexOf(" Url"))f.textDir="ltr";
else if(-1<f.label.indexOf("Vob Location")||-1<f.label.indexOf("Path"))f.textDir="ltr";a.addPropertyField(a.form,f,!!c)})}}});this.form=new b({submitUrl:bootstrap.restUrl+"deploy/componentTemplate",postSubmit:function(b){navBar.setHash("componentTemplate/"+b.id+"/-1");void 0!==a.callback&&a.callback()},addData:function(b){if(a.componentTemplate)b.existingId=a.componentTemplate.id;b.properties={};k.forEach(a.sourceConfigPropertyNames,function(a){void 0!==b[a]&&(b.properties[a]=b[a],delete b[a])});
b.teamMappings=a.teamSelector.teams},onError:function(a){a.responseText&&new c({message:util.escape(a.responseText)})},onCancel:function(){void 0!==a.callback&&a.callback()},readOnly:a.readOnly,showButtons:!a.readOnly,cancelLabel:a.showCancel?i18n("Cancel"):null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});var h=[];if(a.existingValues&&
a.existingValues.extendedSecurity&&a.existingValues.extendedSecurity.teams)h=a.existingValues.extendedSecurity.teams;a.teamSelector=new n({resourceRoleType:"Component Template",noneLabel:i18n("Standard Component Template"),teams:h});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:a.teamSelector});this.form.addField({name:"componentType",label:i18n("Component Type"),description:i18n("The Type of Component. z/OS components do not use source configs and will have them disabled."),
type:"Select",allowedValues:[{label:i18n("Standard"),value:"STANDARD"},{label:i18n("z/OS"),value:"ZOS"}],onChange:function(b){a.existingValues.componentType=b;"ZOS"===b?a.showIgnoreQualifiers():a.removeIgnoreQualifiers()},value:this.existingValues.componentType});a.addSourceConfigField();"ZOS"===this.existingValues.componentType&&a.showIgnoreQualifiers();this.form.placeAt(this.formAttach)},showIgnoreQualifiers:function(){this.form.hasField("ignoreQualifiers")||this.form.addField({name:"ignoreQualifiers",
label:i18n("High Level Qualifier Length"),required:!1,type:"Text",value:!this.existingValues.ignoreQualifiers?"0":this.existingValues.ignoreQualifiers},"sourceConfigPlugin")},removeIgnoreQualifiers:function(){this.form.hasField("ignoreQualifiers")&&this.form.removeField("ignoreQualifiers")},addSourceConfigField:function(){var a=this,b=null;if(this.existingValues.sourceConfigPlugin)b=this.existingValues.sourceConfigPlugin.id;this.form.addField({name:"sourceConfigPlugin",type:"TableFilterSelect",label:i18n("Source Configuration Type"),
url:bootstrap.restUrl+"plugin/sourceConfigPlugin",description:i18n("The source configuration plugin to use for this component."),value:b,idProperty:function(a){return a.name},defaultQuery:{outputType:["BASIC","LINKED","EXTENDED"]},allowNone:!0,onFilterResult:function(b){var c=[];"ZOS"===a.form.getValue("componentType")?k.forEach(b,function(a){/^[zZ][oO][sS]/.test(a.name)&&c.push(a)}):c=b;return c},onChange:function(b,d){k.forEach(a.sourceConfigPropertyNames,function(b){a.removePropertyField(a.form,
b)});a.sourceConfigPropertyNames=[];if(void 0!==a.componentTemplate&&d.id!==this.value){var e=i18n("When you change the source configuration of a component template you will have to also update the configuration of components based on that template before you do version imports.");new c({message:util.escape(e)})}if(d){var f=d.componentPropSheetDef.name;k.forEach(d.componentPropDefs,function(b){var c=null;if(a.existingValues.sourceConfigProperties&&(c=util.getNamedProperty(a.existingValues.sourceConfigProperties,
b.name)))b.value=c.value;var d=util.clone(b),b=f+"/"+b.name;d.name=b;d.translate=!0;a.sourceConfigPropertyNames.push(b);a.addPropertyField(a.form,d,!!c)})}}},"_sourceProperties")},removeSourceConfigField:function(){this.form.removeField("sourceConfigPlugin")},updateSourceConfig:function(a){"ZOS"===a?this.form.removeField("sourceConfigPlugin"):this.addSourceConfigField()},addPropertyField:function(b,c,d,f){var j="runtime_switch_"+c.name,k=new a,l=e.create("a",{"class":"linkPointer",innerHTML:i18n("Prompt for a value on use"),
style:{marginBottom:"5px"}},k.domAttach),n={name:j,widget:k,label:""},m="config_switch_"+c.name,k=new a,y=e.create("a",{"class":"linkPointer",innerHTML:i18n("Set a value here"),style:{marginBottom:"5px"}},k.domAttach),C={name:m,widget:k,label:i18n(c.label)};h(l,"click",function(){b.addField(C,c.name);b.removeField(j);b.removeField(c.name)});h(y,"click",function(){b.addField(c,m);b.addField(n,m);b.removeField(m)});d?(b.addField(c,f),this.readOnly||b.addField(n,f)):b.addField(C,f)},removeAllSourceConfigPropertyFields:function(){var a=
this.sourceConfigPropertyNames.length,b;for(b=0;b<a;b++)this.removePropertyField(this.form,this.sourceConfigPropertyNames[b]);this.sourceConfigPropertyNames=[]},removePropertyField:function(a,b){var c="config_switch_"+b,d="runtime_switch_"+b;a.hasField(c)?a.removeField(c):(a.removeField(b),a.removeField(d))}})})},"deploy/widgets/componentTemplate/ComponentTemplateEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/componentTemplate/EditComponentTemplate,deploy/widgets/property/PropValues,deploy/widgets/property/PropDefs".split(","),
function(l,m,k,j,e,h,d,c,b){return m([h],{postCreate:function(){this.inherited(arguments);this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},showList:function(){var a=this;a.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){a.addHeading(i18n("Basic Settings"));a.showBasicSettings()}});a.addEntry({id:"properties",label:i18n("Properties"),action:function(){a.addHeading(i18n("Properties"));a.showProperties()}});a.addEntry({id:"componentProperties",
label:i18n("Component Property Definitions"),action:function(){a.addHeading(i18n("Component Property Definitions"));a.showComponentProperties()}});a.addEntry({id:"environmentProperties",label:i18n("Environment Property Definitions"),action:function(){a.addHeading(i18n("Environment Property Definitions"));a.showEnvironmentProperties()}});a.addEntry({id:"resourceProperties",label:i18n("Resource Property Definitions"),action:function(){a.addHeading(i18n("Resource Property Definitions"));a.showResourceProperties()}})},
addHeading:function(a){e.create("div",{innerHTML:a,"class":"containerLabel"},this.detailAttach)},addDescription:function(a){e.create("div",{innerHTML:a,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,componentTemplate:appState.componentTemplate,readOnly:!appState.componentTemplate.security.write})).placeAt(this.detailAttach)},showProperties:function(){var a=appState.componentTemplate.version!==appState.componentTemplate.versionCount;this.addDescription(i18n("Set custom properties here. These will be available as standard component properties to any component using this template."));
(new c({propValues:appState.componentTemplate.propValues,propSheetPath:"componentTemplates/"+appState.componentTemplate.id+"/propSheet",refreshHash:"componentTemplate/"+appState.componentTemplate.id+"/-1/configuration/properties",readOnly:!appState.componentTemplate.security["Manage Properties"]||a,headers:{componentTemplateVersion:appState.componentTemplate.version}})).placeAt(this.detailAttach)},showEnvironmentProperties:function(){this._showPropSheetDefTable("envPropDefs",i18n("Define properties here to be given values on each environment the component is used in."),
"componentTemplates/"+appState.componentTemplate.id+"/envPropSheetDef","componentTemplate/"+appState.componentTemplate.id+"/-1/configuration/environmentProperties",this.detailAttach)},showResourceProperties:function(){this._showPropSheetDefTable("resPropDefs",i18n("Define properties here to be given values on each component resource."),"componentTemplates/"+appState.componentTemplate.id+"/resPropSheetDef","componentTemplate/"+appState.componentTemplate.id+"/-1/configuration/resourceProperties",this.detailAttach)},
_showPropSheetDefTable:function(a,c,d,e,h){var j=appState.componentTemplate.version!==appState.componentTemplate.versionCount,k=null;j&&(k=appState.componentTemplate[a]);this.addDescription(c);(new b({propDefs:k,propSheetDefPath:d,readOnly:!appState.componentTemplate.security["Manage Properties"]||j,refreshHash:e,headers:{componentTemplateVersion:appState.componentTemplate.version}})).placeAt(h)},showComponentProperties:function(){var a=appState.componentTemplate.version!==appState.componentTemplate.versionCount,
c=null,d=null;a?c=appState.componentTemplate.propDefs:d="componentTemplates/"+appState.componentTemplate.id+"/propSheetDef";this.addDescription(i18n("Define properties here to be given values on each component using this template."));(new b({propDefs:c,propSheetDefPath:d,readOnly:!appState.componentTemplate.security["Manage Properties"]||a,refreshHash:"componentTemplate/"+appState.componentTemplate.id+"/-1/configuration/componentProperties",headers:{componentTemplateVersion:appState.componentTemplate.version}})).placeAt(this.detailAttach)}})})},
"deploy/widgets/firstDayWizard/Paginator":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/array,dojo/_base/declare,dojo/store/Memory,dojo/store/Observable,dojo/dom-class,dojo/dom-construct,deploy/widgets/ModelWidgetList,deploy/widgets/TooltipTitle,d3/d3".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return e([m,l,k],{templateString:'<span data-dojo-attach-point = "paginatorAttach"></span>',postCreate:function(){var a=this;this.inherited(arguments);a.pages=a._initPagesData(this.wizardModel);
this._initWidgets(a.pages);this.wizardModel.watch("selectedPageIndex",function(b,c,d){a.pages.forEach(function(b,c){c!==d?b.selected=!1:(b.selected=!0,b.enabled||a.wizardModel.set("furthestEnabledPageIndex",c))});a._initWidgets(a.pages)});this.wizardModel.watch("pageIds",function(){if(a.pages.length!==a.wizardModel.pageIds.length)a.pages=a._initPagesData(this.wizardModel),a._initWidgets(a.pages)});this.wizardModel.watch("furthestEnabledPageIndex",function(b,c,d){a.pages.forEach(function(a,b){a.enabled=
b<=d?!0:!1});a._initWidgets(a.pages)})},_initPagesData:function(a){var b=[];a.pageIds.forEach(function(c,d){var e=!1,f=!1,h=!1,j=!1,k=d+1;a.selectedPageIndex===d&&(e=!0);0===d&&(h=!0);d===a.pageIds.length-1&&(j=!0);d<=a.furthestEnabledPageIndex&&(f=!0);e={id:a.getUniqId(),name:a.PageNameById[c],number:k,selected:e,enabled:f,firstPage:h,endPage:j,wizardModel:a};b.push(e)});return b},_initWidgets:function(a){b.empty("fdw-paginator");var c=a.length,d=n.select("span#fdw-paginator").append("svg").attr("width",
function(){return 40*c+20}).attr("height",50),e=d.append("g"),f=d.append("g"),d=d.append("g");e.selectAll("circle").data(a).enter().append("circle").attr("cx",function(a){return 40*a.number}).attr("cy",25).attr("r",function(a){return a.selected?15:10}).style("fill",function(a){var b="#f4f4f4";a.enabled&&!a.selected&&(b="#999999");return b}).style("stroke",function(a){var b="#999999";a.selected&&(b="#373E3E");return b}).style("stroke-width",function(a){var b="2";a.selected&&(b="4");return b}).on("click",
function(a){a.selected||a.wizardModel.set("pre_selectedPageIndex",a.number-1)}).append("svg:title").text(function(a){return a.name});f.selectAll("rect").data(a).enter().append("rect").attr("x",function(a){return a.selected?40*a.number-27:40*a.number-20}).attr("y",24).attr("width",10).attr("height",2).style("fill",function(a){var b="#999999";a.firstPage&&(b="none");return b});d.selectAll("rect").data(a).enter().append("rect").attr("x",function(a){return a.selected?40*a.number+17:40*a.number+10}).attr("y",
24).attr("width",10).attr("height",2).style("fill",function(a){var b="#999999";a.endPage&&(b="none");return b})}})})},"deploy/widgets/firstDayWizard/AgentMappingPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dijit/form/Button,dijit/form/TextBox,dijit/Dialog,dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/dom-geometry,dojo/dom,dojo/keys,dojo/query,dojo/on,dojo/Deferred,dojo/store/Memory,dojo/store/Observable,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/dnd/Source,dojox/form/CheckedMultiSelect,deploy/widgets/TooltipTitle,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,d3/d3".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z){return d([m,l,k],{templateString:'<div class="fdw-AgentMapping-page">    <div class="fdw-info-column">        <div class="fdw-info-text">            <div class="fdw-info-title">'+i18n("Map Components to Agents")+'</div>            <br/>            <div data-dojo-attach-point="text1Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text21Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text22Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text23Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text3Attach" class="fdw-info-content">              <div class="fdw-emphasis2">'+
i18n("In this step:")+"</div>              <ul>              <li>"+i18n("Drag an agent to one environment, and choose components to map to the agent.")+'</li>              </ul>            </div>        </div>    </div>    <div class="fdw-svg-mapping-widget">        <div class="fdw-svg-mapping-widget-title">            <div class="fdw-mapping-agent-title fdw-mapping-title" data-dojo-attach-point="fdwMappingAgentTitleTextAttach"></div>            <div class="fdw-mapping-environment-title fdw-mapping-title" id="fdwMapEnvTitle" data-dojo-attach-point="fdwMappingEnvTitleTextAttach"></div>        </div>        <br/>        <div class="fdw-svg" id="fdw-agent-mapping-svg-container" data-dojo-attach-point="mappingWidgetAttach"></div>        <div data-dojo-attach-point="fdwAgentFilterAttach"></div>    </div></div>',
notAllComponentsMappedError:i18n("In each environment that you create, all components must be mapped before you can save the application. You can map all components within one agent or map them with a combination of agents."),agentHeight:30,agentWidth:"20%",envWidth:"65%",environmentHeight:40,envOffset:280,leftLibrary:{attachPoint:".agent-group-rect",target:"#fdw-unmapped-agentGroup",parent:"#unmapped-agent-group-container",handle:"left-Handle",savedScrollY:0},rightLibrary:{attachPoint:".env-group-rect",
target:"#fdw-agentMapping-rightSide",parent:"#env-group-container",handle:"right-Handle",savedScrollY:0},leftY:0,rightY:0,_calcAgentOffset:function(){return 90},_calcCompOffset:function(){return 180},selectedEnv:null,selectedAgent:null,selectedComponent:null,selectedSide:null,agentColor:"#FFFFFF",triangleData:[{x:10,y:10},{x:10,y:30},{x:10,y:30},{x:20,y:20},{x:20,y:20},{x:10,y:10}],triangleSmallerData:[{x:10,y:2},{x:10,y:22},{x:10,y:22},{x:20,y:12},{x:20,y:12},{x:10,y:2}],lineFunction:z.line().x(function(a){return a.x}).y(function(a){return a.y}),
postCreate:function(){this.inherited(arguments);w.place("<div>"+i18n("Agents are installed on the servers that host components of an application. Agents manage the servers, download component artifacts, and run processes. An agent must run on each host server.")+"</div>",this.text1Attach);w.place("<div>"+i18n("To drag an agent, hover the cursor over the agent name, click and hold, and move the agent name to the line that includes the target environment.")+"</div>",this.text21Attach);w.place("<div>"+
i18n("To delete an agent from an environment, hover over the agent name, and click the red x to the right of the name.")+"</div>",this.text22Attach);w.place("<div>"+i18n("To add or remove components from the agent, click the agent name and select or clear the associated text boxes.")+"</div>",this.text23Attach);this._setUpAgentListDeferred=this._setUpAgentList()},startup:function(){var a=this;this.model.environments.query().observe(function(b,c,d){-1!==d&&a._setWatchEnv(b);-1!==c&&a._removeAgentsFromEnvironment(b)});
this.model.environments.query().forEach(function(b){a._setWatchEnv(b)});this.model.components.query().observe(function(b,c){-1!==c&&a._removeComponentFromAgents(b);a._initWidget()});this.model.watch("agents",function(){a._initWidget()});var b=new e({name:"agentFilter",value:"",placeHolder:i18n("filter")},a.fdwAgentFilterAttach);u.add(b.domNode,"agent-filter");dojo.addClass(b.domNode,"agent-filter");t(b,"keyup",function(c){if("Enter"===c.key)a._setUpAgentListDeferred=void 0,a._setUpAgentListDeferred=
a._setUpAgentList(b.get("value")),a._initWidget()})},validate:function(){var a=!1;this._evaluateEnvAgents()===this.model.environments.query().length?a=!0:new A({messages:[this.notAllComponentsMappedError]});return a},_calcExpandedChildren:function(a){var b=0;if(a.expanded&&a.children&&0<a.children.length){var b=b+a.children.length,c;for(c=0;c<a.children.length;c++)b+=this._calcExpandedChildren(a.children[c])}return b},_findItemIndexByName:function(a,b){var c=-1,d;for(d=0;d<a.length;d++)a[d].name===
b&&(c=d);return c},_findItemIndexById:function(a,b){var c=-1,d;for(d=0;d<a.length;d++)a[d].id===b&&(c=d);return c},_initWidget:function(){if(this.pageShown){var a=this;this._setUpAgentListDeferred.then(function(){w.empty(dojo.byId("fdw-agent-mapping-svg-container"));a._determineOffset();a._setupWindowResizeHandle();var b=a.model.agents,c=a.model.environments.query(),d=a.model.components.query(),e=[];b.forEach(function(a){a.mappedToEnv||e.push(a)});a.fdwMappingAgentTitleTextAttach.textContent=i18n("Agents (%s)",
a.model.agentsTotal);a.fdwMappingEnvTitleTextAttach.textContent=i18n("Environments with All Components (%s / %s)",a._evaluateEnvAgents(),c.length);var f=z.zoom().on("zoom",function(){}),h=function(){var b,d;if(z.select(a.leftLibrary.target).node()===z.event.currentTarget)b=a.leftLibrary,d=e.length*a.agentHeight;else if(z.select(a.rightLibrary.target).node()===z.event.currentTarget)b=a.leftLibrary,d=a._calcTotalHeight(c);if(b){var f=0;z.event.detail?f=0<z.event.detail?15:-15:z.event.deltaY?f=0<z.event.deltaY?
15:-15:z.event.wheelDelta&&(f=-z.event.wheelDeltaY/10);z.event.preventDefault&&z.event.preventDefault();0<z.event.currentTarget.transform.baseVal.numberOfItems&&(f+=-z.event.currentTarget.transform.baseVal.getItem(0).matrix.f);var h=z.select(b.attachPoint).node().getBBox();d=a._defineScale(b,h,d);a._scroll(b,z.select(b.target),f,z.select("#"+b.handle),d)}},j=z.select("div.fdw-svg").append("svg").attr("width","100%").attr("height","100%").style("stroke","none"),k=j.append("g").attr("id","env-group-container").attr("transform",
function(){return"translate("+a.envOffset+", 0)"});k.append("g").append("rect").attr("class","env-group-rect").attr("width",a.envWidth).attr("height","100%").attr("y",0).style("fill","#FFFFFF");k=k.append("g").attr("id","fdw-agentMapping-rightSide").call(f).on("wheel.zoom",h);j=j.append("g").attr("class","agent-column").append("g").attr("id","unmapped-agent-group-container").attr("transform",function(){return"translate(15,"+parseInt(v.getComputedStyle(dojo.query("#fdw-wizard .agent-filter")[0]).height,
10)+")"});j.append("rect").attr("class","agent-group-rect").attr("width",a.agentWidth).attr("height",function(){var a=parseInt(v.getComputedStyle(dojo.query("#fdw-agent-mapping-svg-container")[0]).height,10),a=a-parseInt(v.getComputedStyle(dojo.query("#fdw-wizard .agent-filter")[0]).height,10);return a+"px"}).attr("y",0).style("fill","#FFFFFF");f=j.append("g").attr("id","fdw-unmapped-agentGroup").call(f).on("wheel.zoom",h);a._drawEnvironments(c,b,d,k);a._drawAllAgents(c,b,d,f,k);a._drawComponents(c,
b,d,k);b=e.length*a.agentHeight;d=a._calcTotalHeight(c);a._drawScrollbar(a.leftLibrary,b);a._drawScrollbar(a.rightLibrary,d);f.selectAll(".agent-name-label").call(function(a,b){a.each(function(){for(var a=z.select(this),c=a.text(),d=a.node().getComputedTextLength();d>b&&0<d;)c=c.slice(0,-1),a.text(c+"..."),d=a.node().getComputedTextLength()})},a.agentWidth-45)})}},_drawEnvironments:function(a,b,c,d){var e=this,b=d.append("g").attr("class","fdw-environment-group").selectAll("g").data(a).enter().append("g").attr("transform",
function(b,c){return"translate(0,"+e._calcEnvHeight(c,a)+" )"}).on("mouseover",function(a){e.selectedEnv=a}).on("mouseout",function(){e.selectedEnv=null}).on("click",function(a){if(0<a.children.length)a.expanded=!a.expanded,e._initWidget()});b.append("rect").attr("width",e.envWidth).attr("height",e.environmentHeight-5+"px").style("fill","#E1E1E1");b.append("rect").attr("x",35).attr("width","10px").attr("height",e.environmentHeight-5+"px").style("fill",function(a){return a.color});b.append("path").attr("class",
"twisty-triangle").attr("d",e.lineFunction(e.triangleData)).attr("stroke","none").attr("transform",function(a){return a.expanded?"rotate(90, 15, 20)":"rotate(0, 15, 20)"}).attr("fill",function(a){return 0<a.children.length?"grey":"none"});b.append("text").attr("x",55).attr("y",e.environmentHeight/2+5).attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size","14").attr("class","environment-name-label").text(function(a){return a.name});b.append("text").attr("x",300).attr("y",
e.environmentHeight/2+5).attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size","12").attr("class","fdw-environment-list-state-label").text(function(a){var b="";0===a.children.length?b=i18n("Drag agents here"):0<a.children.length&&(a=e._calcMissingChildren(a),0<a&&(b=i18n("Components Missing: %s",a)));return b})},_drawAllAgents:function(a,b,c,d,e){this._drawMappedAgents(a,b,c,e);this._drawUnmappedAgents(b,a,d)},_drawMappedAgents:function(a,b,c,d){for(var e=this,
b=[],c=0;c<a.length;c++){var f=a[c];f.expanded&&(b=b.concat(f.children))}d=d.append("g").attr("class","fdw-assigned-agent-group").selectAll("g").data(b).enter().append("g").on("mouseover",function(b){e.selectedAgent=b;b=e._findItemIndexById(a,b.envId);e.selectedEnv=a[b];z.select(this).select(".delete-agent").style("opacity",1);z.select(this).select(".agent-name-label").attr("text-decoration","underline");z.select(this).style("cursor","pointer")}).on("mouseout",function(){e.selectedAgent=null;e.selectedEnv=
null;z.select(this).select(".delete-agent").style("opacity",0);z.select(this).select(".agent-name-label").attr("text-decoration","none");z.select(this).style("cursor","default")}).attr("transform",function(b){return"translate("+e._calcAgentOffset()+", "+e._calcAgentHeight(b,a)+" )"});d.append("rect").attr("width",e.agentWidth).attr("height",e.agentHeight-5+"px").style("fill",e.agentColor).on("click",function(a){e._showComponentSelectionDialog(a)});d.append("image").attr("x",30).attr("y",3).attr("width",
19).attr("height",19).attr("xlink:href",bootstrap.contentUrl+"images/deploy/resources/agent.png").attr("class","agentIcon");d.append("text").attr("x",50).attr("y",e.agentHeight/2).attr("class","agent-name-label").attr("stroke","none").attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size","14").text(function(a){return a.name}).on("click",function(a){e._showComponentSelectionDialog(a)});b=d.append("g").attr("class","agent-twisty-group").on("click",function(a){if(0<
a.children.length)a.expanded=!a.expanded,e._initWidget()});b.append("rect").attr("width","25px").attr("height","20px").style("fill",e.agentColor);b.append("path").attr("class","twisty-triangle").attr("d",e.lineFunction(e.triangleSmallerData)).attr("stroke","white").attr("transform",function(a){return a.expanded?"rotate(90, 15, 12)":"rotate(0, 15, 12)"}).attr("fill",function(a){return 0<a.children.length?"grey":"none"});d=d.append("g").attr("class","delete-agent").attr("transform",function(){var a=
z.select(this.parentNode).select(".agent-name-label").node().getBBox();return"translate("+(a.x+a.width+20)+", 10)rotate(45, 0, 0)"}).style("opacity",0).on("click",function(){var b=z.select(this.parentNode).datum(),c=e._findItemIndexById(a,b.envId);e._removeAgentFromEnvironment(b,a[c]);e._initWidget()});d.append("path").attr("d",function(){return z.symbol().size(180).type(z.symbolSquare)()}).attr("fill",e.agentColor).attr("stroke",e.agentColor).attr("stroke-width",1);d.append("path").attr("d",function(){return z.symbol().size(100).type(z.symbolCross)()}).attr("fill",
"#ff0000").attr("stroke","#ff0000").attr("stroke-width",1)},_drawUnmappedAgents:function(a,b,c){var d=this,e=z.drag().on("start",function(){z.event.sourceEvent.stopPropagation()}).on("drag",function(){var a=z.event.x,b=z.event.y;z.select(this).attr("pointer-events","none");z.select(this).attr("transform","translate("+a+","+b+")");z.select(this).select(".agent-drag-handle").style("display","none")}).on("end",function(){z.select(this).attr("pointer-events","auto");var c,e;d.selectedEnv?(c=d._findItemIndexByName(a,
z.select(this).datum().name),e=b.indexOf(d.selectedEnv),d._addAgentToEnvironment(e,c)):d.selectedAgent?(c=d._findItemIndexByName(a,z.select(this).datum().name),e=d._findItemIndexById(b,d.selectedAgent.envId),d._addAgentToEnvironment(e,c)):d.selectedComponent?(c=d._findItemIndexByName(a,z.select(this).select(".agent-name-label").text()),e=d._findItemIndexById(b,a[c].envId),d._addAgentToEnvironment(e,c)):d._initWidget()}),f=[];a.forEach(function(a){a.mappedToEnv||f.push(a)});c=c.selectAll("g").data(f).enter().append("g").attr("class",
"draggable").call(e).on("mouseover",function(){z.select(this).style("cursor","move")}).on("mouseout",function(){z.select(this).style("cursor","default")}).attr("transform",function(a,b){return"translate(0,"+b*d.agentHeight+")"});c.append("rect").attr("width",d.agentWidth).attr("height",d.agentHeight-5+"px").style("fill",d.agentColor);c.append("image").attr("x",3).attr("y",3).attr("width",19).attr("height",19).attr("xlink:href",bootstrap.contentUrl+"images/deploy/resources/agent.png").attr("class",
"agentIcon");c.append("text").attr("x",function(){var a=z.select(this.parentNode).select(".agentIcon").node().getBBox();return a.x+a.width+10}).attr("y",d.agentHeight/2).attr("class","agent-name-label").attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size","14").text(function(a){return a.name});c.append("text").attr("class","agent-drag-handle").attr("x",function(){return d.agentWidth-20}).attr("y",d.agentHeight/2).attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size",
"14").text("::")},_drawComponents:function(a,b,c,d){var e=this,f=[];a.forEach(function(a){a.children.forEach(function(b){a.expanded&&b.expanded&&0<b.children.length&&(f=f.concat(b.children))})});b=d.append("g").attr("class","fdw-mapped-comp-group").selectAll("g").data(f).enter().append("g").attr("transform",function(b){b=e._calcCompHeight(b,a,e.environmentHeight,e.agentHeight,e.environmentHeight);return"translate("+e._calcCompOffset()+", "+b+" )"}).on("mouseover",function(){z.select(this).select(".delete-component").style("opacity",
1)}).on("mouseout",function(){z.select(this).select(".delete-component").style("opacity",0)});b.append("rect").attr("width",e.agentWidth).attr("height",e.agentHeight-5+"px").style("fill",e.agentColor);b.append("image").attr("x",3).attr("y",3).attr("width",19).attr("height",19).attr("xlink:href",bootstrap.contentUrl+"images/deploy/component_19x19.png");b.append("text").attr("class","component-name-label").attr("x",28).attr("y",e.agentHeight/2).attr("font-family","'Helvetica-Light', 'Helvetica Light',  'Helvetica'").attr("font-size",
"14").attr("class","component-name-label").text(function(a){return c.filter(function(b){return a.id===b.id})[0].name});b=b.append("g").attr("class","delete-component").attr("transform",function(){var a=z.select(this.parentNode).select(".component-name-label").node().getBBox();return"translate("+(a.x+a.width+20)+", 10)rotate(45, 0, 0)"}).style("opacity",0).on("click",function(){var b=z.select(this.parentNode).datum(),c=a[e._findItemIndexById(a,b.envId)],c=c.children[e._findItemIndexById(c.children,
b.agentId)];e._removeCompFromAgent(b,c);e._initWidget()});b.append("path").attr("d",function(){return z.symbol().size(180).type(z.symbolSquare)()}).attr("fill",e.agentColor).attr("stroke",e.agentColor).attr("stroke-width",1);b.append("path").attr("d",function(){return z.symbol().size(100).type(z.symbolCross)()}).attr("fill","#ff0000").attr("stroke","#ff0000").attr("stroke-width",1)},_addComponentsToAgent:function(a,b){var c=this.model.environments.query();this.model.components.query();var d=c[this._findItemIndexById(c,
a.envId)],e=this._findItemIndexById(d.children,a.id);d.children[e].children=[];b.forEach(function(b){d.children[e].children.push({id:b.id,agentId:a.id,envId:d.id});d.children[e].expanded=!0});this._initWidget()},_removeComponentFromAgents:function(a){var b=this,c=b.model.environments.query(),d=[];b.selectedEnv=null;b.selectedAgent=null;b.selectedComponent=null;c.forEach(function(a){d=d.concat(a.children)});d.forEach(function(c){b._removeCompFromAgent(a,c)})},_removeCompFromAgent:function(a,b){this.selectedComponent=
this.selectedAgent=this.selectedEnv=null;var c=this._findItemIndexById(b.children,a.id);-1<c&&b.children.splice(c,1)},_addAgentToEnvironment:function(a,b){var c=this.model.agents,d=this.model.environments.query()[a];c[b].envId=d.id;c[b].mappedToEnv=!0;this.model.set("agents",c);this._showComponentSelectionDialog(this.model.agents[b]);d.children.push(this.model.agents[b]);this.model.environments.query()[a].set("children",d.children);this.model.environments.query()[a].set("expanded",!0)},_removeAgentsFromEnvironment:function(a){var b=
this;b.selectedAgent=null;b.selectedEnv=null;var c=a.children;0<a.children.length&&c.forEach(function(c){b._removeAgentFromEnvironment(c,a)});a.set("children",[])},_removeAgentFromEnvById:function(a){var b=this,c=b.model.environments.query();b.selectedAgent=null;b.selectedEnv=null;var d,e;c.forEach(function(b){b.children.forEach(function(c){c.id===a&&(d=c,e=b)})});if(-1<c.indexOf(e)&&(e.children.splice(e.children.indexOf(d),1),0===e.children.length))e.expanded=!1;d.mappedToEnv=!1;c=b.model.agents;
if(c=c[b._findItemIndexById(c,d.id)])c.mappedToEnv=!1;d.children.forEach(function(a){b._removeCompFromAgent(a,d)});d.expanded=!1;d.envId=-1},_removeAgentFromEnvironment:function(a,b){this.selectedEnv=this.selectedAgent=null;if(-1<this.model.environments.query().indexOf(b)&&(b.children.splice(b.children.indexOf(a),1),0===b.children.length))b.expanded=!1;a.mappedToEnv=!1;var c=this.model.agents;if(c=c[this._findItemIndexById(c,a.id)])c.mappedToEnv=!1;a.children=[];a.expanded=!1;a.envId=-1},_calcEnvHeight:function(a,
b){var c=0,d;for(d=0;d<a;d++)c+=this._calcExpandedChildren(b[d]);return c*this.agentHeight+a*this.environmentHeight},_calcAgentHeight:function(a,b){var c=this._findItemIndexById(b,a.envId),d=b[c],c=this._calcEnvHeight(c,b),e=0,f=d.children.indexOf(a),h;for(h=0;h<f;h++)e+=1,d.children[h].expanded&&(e+=d.children[h].children.length);return c+e*this.agentHeight+this.agentHeight+10},_calcCompHeight:function(a,b){var c=this._findItemIndexById(b,a.envId),c=b[c],d=c.children[this._findItemIndexById(c.children,
a.agentId)],c=this._calcAgentHeight(d,b),d=d.children.indexOf(a);return c+d*this.agentHeight+this.agentHeight},_evaluateEnvAgents:function(){var a=this,b=0;a.model.environments.query().forEach(function(c){a._allComponentsMappedToEnvironment(c)&&(b+=1)});return b},_calcTotalHeight:function(a){var b=0,b=a[a.length-1];!b.expanded||1>b.children.length?b=this._calcEnvHeight(a.length-1,a)+this.environmentHeight:!b.children[b.children.length-1].expanded||1>b.children[b.children.length-1].children.length?
(b=b.children[b.children.length-1],b=this._calcAgentHeight(b,a)+this.agentHeight):(b=b.children[b.children.length-1],b=this._calcCompHeight(b.children[b.children.length-1],a)+this.agentHeight);return b},_allComponentsMappedToEnvironment:function(a){var b=!1;if(a.children&&0<a.children.length){var c=0;this.model.components.query().forEach(function(b){var d=!1;a.children.forEach(function(a){a.children&&0<a.children.filter(function(a){return a.id===b.id}).length&&(d=!0)});d&&(c+=1)});c===this.model.components.query().length&&
(b=!0)}return b},_onShow:function(){this.pageShown=!0;this._initWidget()},_onHide:function(){this.pageShown=!1;this.windowResizeHandle.remove();this.windowResizeHandle=void 0},_setWatchEnv:function(a){var b=this;a.watch("children",function(){b._initWidget()});a.watch("expanded",function(){b._initWidget()});a.watch("name",function(){b._initWidget()});a.watch("color",function(){b._initWidget()})},_setUpAgentList:function(a){var b=this,d=new q,e=b._getListOfMappedAgents();this._getAgentList(a).then(function(a){a=
c.map(a,function(a){a.mappedToEnv=-1<e.indexOf(a.id);a.children=[];return a});b.model.set("agents",a);d.resolve()},function(a){new A({messages:[i18n("Error retrieving processes:"),"",util.escape(a.responseText)]});d.reject(a)});return d},_getListOfMappedAgents:function(){var a=[];this.model.environments.query().forEach(function(b){b.children.forEach(function(b){a.push(b.id)})});return a},_getTestAgentList:function(a){var b=[],c;for(c=0;c<a;c++)b.push({name:c+"agent name",mappedToEnv:!1,children:[]});
return b},_showComponentSelectionDialog:function(a){var b=this,c,d=new h({title:i18n("Select Components to Use This Agent: %s","<br>"+util.escape(a.name)),closable:!1,draggable:!0,destroyOnHide:!0,className:"fdw-compSelect-dialog",description:i18n("You can select which components will be present on the agent you just dragged to it's environment.")});c=new y({multiple:!0,name:"compSelectWidget"});b.model.components.query().forEach(function(d){var e=!1;b._isCompChildOfAgent(d,a)&&(e=!0);e={value:d,
selected:e};e.label='<img src="'+bootstrap.contentUrl+'images/deploy/component_19x19.png"><span class="agent-mapping-dialog-comp-name">'+d.name+"</span>";c.addOption(e)});var e={label:i18n("OK"),showTitle:!1,onClick:function(){var e=c.getValue();e&&b._addComponentsToAgent(a,e);d.hide()}},f={label:i18n("Cancel"),showTitle:!1,onClick:function(){d.hide()}};c.placeAt(d.containerNode);this.designerOkButton=(new j(e)).placeAt(d.containerNode);u.add(this.designerOkButton.domNode,"fdw-designer-ok-btn");u.add(this.designerOkButton.domNode,
"idxButtonSpecial");this.designerCancelButton=(new j(f)).placeAt(d.containerNode);u.add(this.designerCancelButton.domNode,"fdw-designer-cancel-btn");d.show()},_isCompChildOfAgent:function(a,b){var c=!1;b.children.forEach(function(b){b.id===a.id&&(c=!0)});return c},_calcMissingChildren:function(a){var b=this,c=b.model.components.query(),d=c.length;b._allComponentsMappedToEnvironment(a)?d=0:c.forEach(function(c){var e=!0;a.children.forEach(function(a){e&&b._isCompChildOfAgent(c,a)&&(d--,e=!1)})});return d},
_getAgentList:function(a){var c=this,d=bootstrap.restUrl+"agent",e=new q;b.get({url:d,content:{rowsPerPage:1E3,pageNumber:1,orderField:"name",sortType:"asc",filterFields:["requiredActions","name"],filterType_requiredActions:"eq",filterValue_requiredActions:["Create Resources"],filterType_name:"like",filterValue_name:a,filterClass_name:"String"},handleAs:"json",load:function(b,d){var f=d.xhr.getResponseHeader("Content-Range");if(!a)c.model.agentsTotal=parseInt(f.substring(f.indexOf("/")+1),10);e.resolve(b)},
error:function(a){e.reject(a)}});return e},_scroll:function(a,b,c,d,e){var f=this,h=this._normalize(c,0,e.domain()[1]),c=e(h),c=this._normalize(c,0,a.maxHandleBarY);d.attr("transform","translate(0, "+c+")");a.savedScrollY=h;b.attr("transform",function(){f.leftY=-h;return"translate(0,"+f.leftY+")"})},_defineScale:function(a,b,c){var d=b.height,b=c-d,c=d*d/c-6;a.handleBarHeight=c;c=d-c-10;a.maxHandleBarY=c;return z.scaleLinear().domain([0,b]).range([0,c]).clamp(!0)},_drawScrollbar:function(a,b){var c=
this,d=z.select(a.attachPoint).node().getBBox();if(d.height<b){var e=d.width+5,f=d.y+5,h=d.height-10,j=c._defineScale(a,d,b),k=z.select(a.parent).append("g").attr("class","slider").attr("transform","translate("+e+","+f+")");k.append("line").attr("class","track").attr("y1",0).attr("y2",h).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-inset").select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-handle").attr("id",
function(){return a.handle}).attr("y1",0).attr("y2",a.handleBarHeight).select(function(){return this.parentNode.appendChild(this.cloneNode(!0))}).attr("class","track-overlay").attr("y1",0).attr("y2",h).call(z.drag().on("start.interrupt",function(){k.interrupt()}).on("start",function(){var b=z.event.y,d=z.select("#"+a.handle).node(),e=0;if(0<d.transform.baseVal.numberOfItems)e=d.transform.baseVal.getItem(0).matrix.f;a.handleBarRelativeY=b-d.getBBox().y-e;if(0>a.handleBarRelativeY||a.handleBarRelativeY>
a.handleBarHeight)b=c._normalize(b,0,a.maxHandleBarY),c._scroll(a,z.select(a.target),j.invert(b),z.select("#"+a.handle),j)}).on("drag",function(){var b=z.event.y;z.select("#"+a.handle);b-=a.handleBarRelativeY;b=c._normalize(b,0,a.maxHandleBarY);c._scroll(a,z.select(a.target),j.invert(b),z.select("#"+a.handle),j)}));c._scroll(a,z.select(a.target),a.savedScrollY,z.select("#"+a.handle),j)}},_setupWindowResizeHandle:function(){var a=this;if(!this.windowResizeHandle)this.windowResizeHandle=t(window,"resize",
function(){a._determineOffset();a._initWidget()})},_determineOffset:function(){if(r(".fdw-mapping-agent-title")){var a=r(".fdw-mapping-agent-title")[0];this.agentWidth=20*v.get(a,"width")/30;this.envWidth=65*v.get(a,"width")/30;this.envOffset=v.get(a,"width");var a=-v.get(a,"padding-left"),b=r(".fdw-mapping-environment-title")[0];v.set(b,"margin-left",a+"px")}},_normalize:function(a,b,c){a=Math.max(a,b);return a=Math.min(a,c)}})})},"dojox/form/CheckedMultiSelect":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/event,dojo/dom-geometry,dojo/dom-class,dojo/dom-construct,dojo/i18n,dijit/_WidgetBase,dijit/_TemplatedMixin,dijit/_WidgetsInTemplateMixin,dijit/registry,dijit/Menu,dijit/MenuItem,dijit/Tooltip,dijit/form/_FormSelectWidget,dijit/form/ComboButton,dojo/text!dojox/form/resources/_CheckedMultiSelectMenuItem.html,dojo/text!dojox/form/resources/_CheckedMultiSelectItem.html,dojo/text!dojox/form/resources/CheckedMultiSelect.html,dojo/i18n!dojox/form/nls/CheckedMultiSelect,dijit/form/CheckBox".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){var x=l("dojox.form._CheckedMultiSelectItem",[b,a,f],{templateString:w,baseClass:"dojoxMultiSelectItem",option:null,parent:null,disabled:!1,readOnly:!1,postMixInProperties:function(){this._type=this.parent.multiple?{type:"checkbox",baseClass:"dijitCheckBox"}:{type:"radio",baseClass:"dijitRadio"};this.disabled=this.option.disabled=this.option.disabled||!1;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.labelNode.innerHTML=
this.option.label},_changeBox:function(){if(!this.get("disabled")&&!this.get("readOnly"))this.parent.multiple?this.option.selected=this.checkBox.get("value")&&!0:this.parent.set("value",this.option.value),this.parent._updateSelection(),this.parent.focus()},_onClick:function(a){this.get("disabled")||this.get("readOnly")?j.stop(a):this.checkBox._onClick(a)},_updateBox:function(){this.checkBox.set("value",this.option.selected)},_setDisabledAttr:function(a){this.disabled=a||this.option.disabled;this.checkBox.set("disabled",
this.disabled);h.toggle(this.domNode,"dojoxMultiSelectDisabled",this.disabled)},_setReadOnlyAttr:function(a){this.checkBox.set("readOnly",a);this.readOnly=a}}),y=l("dojox.form._CheckedMultiSelectMenu",r,{multiple:!1,buildRendering:function(){this.inherited(arguments);var a=this.menuTableNode=this.domNode,b=this.domNode=d.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}});a.parentNode&&a.parentNode.replaceChild(b,a);h.remove(a,"dijitMenuTable");b.className=a.className+" dojoxCheckedMultiSelectMenu";
a.className="dijitReset dijitMenuTable";a.setAttribute("role","listbox");b.setAttribute("role","presentation");b.appendChild(a)},resize:function(a){if(a&&(e.setMarginBox(this.domNode,a),"w"in a))this.menuTableNode.style.width="100%"},onClose:function(){this.inherited(arguments);if(this.menuTableNode)this.menuTableNode.style.width=""},onItemClick:function(a,b){"undefined"==typeof this.isShowingNow&&this._markActive();this.focusChild(a);if(a.disabled||a.readOnly)return!1;if(!this.multiple)this.onExecute();
a.onClick(b)}}),C=l("dojox.form._CheckedMultiSelectMenuItem",t,{templateString:u,option:null,parent:null,_iconClass:"",postMixInProperties:function(){this.parent.multiple?(this._iconClass="dojoxCheckedMultiSelectMenuCheckBoxItemIcon",this._type={type:"checkbox"}):(this._iconClass="",this._type={type:"hidden"});this.disabled=this.option.disabled;this.checked=this.option.selected;this.label=this.option.label;this.readOnly=this.option.readOnly;this.inherited(arguments)},onChange:function(){},_updateBox:function(){h.toggle(this.domNode,
"dojoxCheckedMultiSelectMenuItemChecked",!!this.option.selected);this.domNode.setAttribute("aria-checked",this.option.selected);this.inputNode.checked=this.option.selected;this.parent.multiple||h.toggle(this.domNode,"dijitSelectSelectedOption",!!this.option.selected)},_onClick:function(a){if(!this.disabled&&!this.readOnly)if(this.parent.multiple)this.option.selected=!this.option.selected,this.parent.onChange(),this.onChange(this.option.selected);else if(!this.option.selected)k.forEach(this.parent.getChildren(),
function(a){a.option.selected=!1}),this.option.selected=!0,this.parent.onChange(),this.onChange(this.option.selected);this.inherited(arguments)}});return l("dojox.form.CheckedMultiSelect",o,{templateString:v,baseClass:"dojoxCheckedMultiSelect",required:!1,invalidMessage:"$_unset_$",_message:"",dropDown:!1,labelText:"",tooltipPosition:[],setStore:function(a,b,c){this.inherited(arguments);this.store.fetch({query:{selected:!0},onComplete:function(a){a=k.map(a,function(a){return a.value[0]});a.length&&
this.set("value",a)},scope:this})},postMixInProperties:function(){this.inherited(arguments);this._nlsResources=c.getLocalization("dojox.form","CheckedMultiSelect",this.lang);if("$_unset_$"==this.invalidMessage)this.invalidMessage=this._nlsResources.invalidMessage},_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var a=this.srcNodeRef.selectedIndex||0;this.value=this.options[0<=a?a:0].value}if(this.dropDown)h.toggle(this.selectNode,"dojoxCheckedMultiSelectHidden"),
this.dropDownMenu=new y({id:this.id+"_menu",style:"display: none;",multiple:this.multiple,onChange:m.hitch(this,"_updateSelection")})},startup:function(){this.inherited(arguments);if(this.dropDown)this.dropDownButton=new s({label:this.labelText,dropDown:this.dropDownMenu,baseClass:"dojoxCheckedMultiSelectButton",maxHeight:this.maxHeight},this.comboButtonNode)},_onMouseDown:function(a){j.stop(a)},validator:function(){return!this.required?!0:k.some(this.getOptions(),function(a){return a.selected&&null!=
a.value&&0!=a.value.toString().length})},validate:function(a){q.hide(this.domNode);(a=this.isValid(a))||this.displayMessage(this.invalidMessage);return a},isValid:function(){return this.validator()},getErrorMessage:function(){return this.invalidMessage},displayMessage:function(a){q.hide(this.domNode);a&&q.show(a,this.domNode,this.tooltipPosition)},onAfterAddOptionItem:function(){},_addOptionItem:function(a){var b;this.dropDown?(b=new C({option:a,parent:this.dropDownMenu}),this.dropDownMenu.addChild(b)):
(b=new x({option:a,parent:this}),this.wrapperDiv.appendChild(b.domNode));this.onAfterAddOptionItem(b,a)},_refreshState:function(){this.validate(this.focused)},onChange:function(){this._refreshState()},reset:function(){this.inherited(arguments);q.hide(this.domNode)},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);k.forEach(this._getChildren(),function(a){a._updateBox()});d.empty(this.containerNode);var a=this;k.forEach(this.value,function(b){b=d.create("option",
{value:b,label:b,selected:"selected"});d.place(b,a.containerNode)});if(this.dropDown&&this.dropDownButton){var b=0,c="";k.forEach(this.options,function(a){if(a.selected)b++,c=a.label});this.dropDownButton.set("label",this.multiple?m.replace(this._nlsResources.multiSelectLabelText,{num:b}):c)}},_getChildren:function(){return this.dropDown?this.dropDownMenu.getChildren():k.map(this.wrapperDiv.childNodes,function(a){return n.byNode(a)})},invertSelection:function(){this.multiple&&(k.forEach(this.options,
function(a){a.selected=!a.selected}),this._updateSelection())},_setDisabledAttr:function(a){this.inherited(arguments);this.dropDown&&this.dropDownButton.set("disabled",a);k.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);"readOnly"in this.attributeMap&&this._attrToDom("readOnly",a);this.readOnly=a;k.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},uninitialize:function(){q.hide(this.domNode);k.forEach(this._getChildren(),
function(a){a.destroyRecursive()});this.inherited(arguments)}})})},"dijit/form/ComboButton":function(){define("dojo/_base/declare,dojo/_base/event,dojo/keys,../focus,./DropDownButton,dojo/text!./templates/ComboButton.html".split(","),function(l,m,k,j,e,h){return l("dijit.form.ComboButton",e,{templateString:h,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",
_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(d){if(d.charOrCode==k[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"])j.focus(this._popupStateNode),m.stop(d)},_onArrowKeyPress:function(d){if(d.charOrCode==k[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"])j.focus(this.titleNode),m.stop(d)},focus:function(d){this.disabled||j.focus("start"==d?this.titleNode:this._popupStateNode)}})})},"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n\tcellspacing=\'0\' cellpadding=\'0\' role="presentation"\n\t><tbody role="presentation"><tr role="presentation"\n\t\t><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:_onClick,onkeypress:_onButtonKeyPress"\n\t\t><div id="${id}_button" class="dijitReset dijitButtonContents"\n\t\t\tdata-dojo-attach-point="titleNode"\n\t\t\trole="button" aria-labelledby="${id}_label"\n\t\t\t><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n\t\t\t><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n\t\t></div\n\t\t></td\n\t\t><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n\t\t\tdata-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n\t\t\tdata-dojo-attach-event="onkeypress:_onArrowKeyPress"\n\t\t\ttitle="${optionsTitle}"\n\t\t\trole="button" aria-haspopup="true"\n\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n\t\t></td\n\t\t><td style="display:none !important;"\n\t\t\t><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode" role="presentation"\n\t\t/></td></tr></tbody\n></table>\n',
"url:dojox/form/resources/_CheckedMultiSelectMenuItem.html":'<tr class="dijitReset dijitMenuItem" dojoAttachPoint="focusNode" role="menuitemcheckbox" tabIndex="-1"\n\tdojoAttachEvent="ondijitclick:_onClick"\n\t><td class="dijitReset dijitMenuItemIconCell" role="presentation"\n\t\t><div src="${_blankGif}" alt="" class="dijitMenuItemIcon ${_iconClass}" dojoAttachPoint="iconNode"\n\t\t\t><input class="dojoxCheckedMultiSelectCheckBoxInput" dojoAttachPoint="inputNode" type="${_type.type}"\n\t\t/></div></td\n\t><td class="dijitReset dijitMenuItemLabel" colspan="2" dojoAttachPoint="containerNode,labelNode"></td\n\t><td class="dijitReset dijitMenuItemAccelKey" style="display: none" dojoAttachPoint="accelKeyNode"></td\n\t><td class="dijitReset dijitMenuArrowCell" role="presentation">&nbsp;</td\n></tr>',
"url:dojox/form/resources/_CheckedMultiSelectItem.html":'<div class="dijitReset ${baseClass}"\n\t><input class="${baseClass}Box" data-dojo-type="dijit.form.CheckBox" data-dojo-attach-point="checkBox" \n\t\tdata-dojo-attach-event="_onClick:_changeBox" type="${_type.type}" baseClass="${_type.baseClass}"\n\t/><div class="dijitInline ${baseClass}Label" data-dojo-attach-point="labelNode" data-dojo-attach-event="onclick:_onClick"></div\n></div>\n',"url:dojox/form/resources/CheckedMultiSelect.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}"\n\t><div data-dojo-attach-point="comboButtonNode"\n\t></div\n\t><div data-dojo-attach-point="selectNode" class="dijit dijitReset dijitInline ${baseClass}Wrapper" data-dojo-attach-event="onmousedown:_onMouseDown,onclick:focus"\n\t\t><select class="${baseClass}Select dojoxCheckedMultiSelectHidden" multiple="true" data-dojo-attach-point="containerNode,focusNode"></select\n\t\t><div data-dojo-attach-point="wrapperDiv"></div\n\t></div\n></div>',
"deploy/widgets/firstDayWizard/DefineProcessesPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dijit/form/Button,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/store/Memory,dojo/store/Observable,dojo/query,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,js/webext/widgets/RadioButtonGroup,dijit/Dialog,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/TooltipTitle,deploy/widgets/ModelWidgetList,deploy/widgets/componentProcess/ComponentProcessActivities,deploy/widgets/applicationProcess/ApplicationProcessActivities,deploy/widgets/componentProcess/EditComponentProcess,deploy/widgets/applicationProcess/EditApplicationProcess,deploy/widgets/firstDayWizard/ComponentProcessAnchorEntry,deploy/widgets/firstDayWizard/ApplicationProcessAnchorEntry,deploy/widgets/firstDayWizard/ProcessListEntry,deploy/widgets/firstDayWizard/Controls,deploy/widgets/workflow/SavedProcessDiagram".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G){return e([m,l,k],{templateString:'<div class="fdw-defineProcesses-page">    <div class="fdw-info-column">        <div class="fdw-info-text">            <div class="fdw-info-title">'+i18n("Define Processes")+'</div>            <br/>            <div data-dojo-attach-point="text1Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text2Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text3Attach" class="fdw-info-content">              <div class="fdw-emphasis2">'+
i18n("In this step:")+"</div>              <ul>                <li>"+i18n("Create a deployment process for each component.")+"</li>                <li>"+i18n("Create a deployment process for the application.")+"</li>                <li>"+i18n("Optional: Define the automated steps for each process by using the process editor.")+'</li>              </ul>            </div>            <br/>        </div>    </div>    <div class="fdw-control-form-column">        <div class="fdw-control-column">            <div data-dojo-attach-point="controlAttach" class="fdw-control-row"></div>            <div data-dojo-attach-point="listAttach" class="fdw-list-column"></div>        </div>        <div data-dojo-attach-point="formAttach" class="fdw-form-column">            <div data-dojo-attach-point="minifyProcessAttach" class="fdw-minifyProcess"></div>        </div>    </div></div>',
duplicateNameError:i18n("The process name you entered already exists. Process names must be unique."),atLeastOneDuplicateNameError:i18n("A process name you entered is a duplicate.  Process names must be unique."),notEveryComponentHasAProcess:i18n("Every component must have a process that is defined for it."),zeroApplicationProcessError:i18n("You must create at least one application process before you can proceed."),noProcessDesignErrorPart1:i18n("Each component and the application must have a process flow. You can design the process flow now or later. Complete one of these steps:"),
noProcessDesignErrorPart2:i18n('Click the "Design the process flow now" radio button, click the process editor window, and then design the process flow.'),noProcessDesignErrorPart3:i18n('Click the "Design the process flow later" radio button, and continue.'),createProcessButtonLabel:i18n("Create Process Design"),modifyProcessButtonLabel:i18n("Modify Process Design"),postCreate:function(){this.inherited(arguments);n.place("<div>"+i18n("Processes are automated tasks that UrbanCode Deploy runs. Components and applications include different types of processes. Component processes deploy, modify, upgrade, or uninstall the component artifacts. Application processes call the component processes in the order that you specify.")+
"</div>",this.text1Attach);n.place("<div>"+i18n("Each process contains steps that define the sequence of these actions, and you use the process editor to define the steps for each process. Before you define an application process, each component that the process will contain, must contain a deployment process.")+"</div>",this.text2Attach);(new G({objType:"process",model:this.model})).placeAt(this.controlAttach);var a=this;this.model.processes.query().observe(function(b,c,d){if(-1!==d)a.selectedProcess=
b,a._setWatch(b),a._refreshForm();if(0===a.model.processes.query({selected:!0}).length)a.selectedProcess=void 0,a.model.selectedProcess=void 0,a._refreshForm();a._updateComponentApplicationProcessList()});this.model.processes.query().forEach(function(b){a._setWatch(b)});this.model.watch("pre_selectAComponentAnchor",function(b,c,d){if(d&&(a.model.pre_selectAComponentAnchor=!1,a._validateProcessForm()))a._saveProcess(),a.model.selectedObjForProcess={id:d.id,type:"component"},a.model.unSelectAllObjs("process"),
a.model.application.set("selected",!1),a.model.setSelectedObj("component",d),a.model.selectedProcess=void 0,a.selectedProcess=void 0,a._refreshForm()});this.model.watch("pre_selectAnApplicationAnchor",function(b,c,d){if(d&&(a.model.pre_selectAnApplicationAnchor=!1,a._validateProcessForm()))a._saveProcess(),a.model.selectedObjForProcess={id:d.id,type:"application"},a.model.unSelectAllObjs("component"),a.model.unSelectAllObjs("process"),a.model.application.set("selected",!0),a.model.selectedProcess=
void 0,a.selectedProcess=void 0,a._refreshForm()});this.model.watch("pre_addAProcess",function(b,c,d){if(d)a.model.pre_addAProcess=!1,a._validateProcessForm()&&(a._saveProcess(),a.model.addObj("process",null,!0,a.model.selectedObjForProcess.id,a.model.selectedObjForProcess.type),a.model.unSelectAllObjs("component"),a.model.application.set("selected",!1))});this.model.watch("pre_selectAProcess",function(b,c,d){if(d&&(a.model.pre_selectAProcess=!1,a._validateProcessForm()))a._saveProcess(),a.model.unSelectAllObjs("component"),
a.model.application.set("selected",!1),a.model.selectedObjForProcess={id:d.parentObjId,type:d.parentObjType},a.model.setSelectedObj("process",d),a.selectedProcess=d});(new x({model:this.model.components,widgetFactory:function(b){return new z({component:b,onSelected:function(b){a.model.set("pre_selectAComponentAnchor",b)}})}})).placeAt(this.listAttach);(new E({application:this.model.application,onSelected:function(){a.model.set("pre_selectAnApplicationAnchor",a.model.application)}})).placeAt(this.listAttach);
this.model.watch("pre_setProcessName",function(b,c,d){if(d)a.model.pre_setProcessName=void 0,(b=a._validateName(d.process,d.newName))?(d.process.hasInvalidName=!0,new o({messages:["","",util.escape(b)]})):(d.process.hasInvalidName&&delete d.process.hasInvalidName,d.process.set("name",d.newName))})},_updateComponentApplicationProcessList:function(){var a=this;a.model.components.query().forEach(function(d){var e=a.model.processes.query().filter(function(a){return a.parentObjId===d.id}),e=new b(new c({data:e})),
f=dojo.byId("component-"+d.id);f&&(n.empty(f),(new x({model:e,widgetFactory:function(b){return new D({process:b,onSelected:function(b){a.model.set("pre_selectAProcess",b)}})}})).placeAt(f))});var d=a.model.processes.query().filter(function(a){return"application"===a.parentObjType}),d=new b(new c({data:d})),e=dojo.byId("application-process-anchor");e&&(n.empty(e),(new x({model:d,widgetFactory:function(b){return new D({process:b,onSelected:function(b){a.model.set("pre_selectAProcess",b)}})}})).placeAt(e))},
_setWatch:function(a){var b=this;a.watch("selected",function(c,d,e){if(!0===e)b.selectedProcess=a,b._refreshForm()})},_saveProcess:function(){if(this.selectedProcess){var a=this,b=this.form.form.getData();h.forEach(Object.keys(b),function(c){a.selectedProcess.props[c]=b[c];a.selectedProcess[c]=b[c]});a.selectedProcess.props.useDesigner=a.selectedProcess.useDesigner}},_refreshForm:function(){n.empty(this.formAttach);this.form=void 0;if(this.selectedProcess){if("component"===this.model.selectedObjForProcess.type)this.form=
(new B({mode:"firstDayWizard",firstDayWizardModel:this.model,componentProcess:this.selectedProcess})).placeAt(this.formAttach),this._addProcessDesignerChoice();else if("application"===this.model.selectedObjForProcess.type)this.form=(new A({mode:"firstDayWizard",firstDayWizardModel:this.model,applicationProcess:this.selectedProcess})).placeAt(this.formAttach),this._addProcessDesignerChoice();a(".labelsAndValues-labelCell .required").forEach(function(a){r.set(a.parentNode,"font-weight","bold")});w.boldLabelsOfRequiredFields()}},
_addProcessDesignerChoice:function(){var a=this;n.place("<br/>",this.formAttach);var b=n.toDom('<div class="fdw-designer-choice-section"></div>');n.place(b,this.formAttach);(new s({name:"useDesigner",options:[{label:i18n("Design the process flow now"),value:!0},{label:i18n("I'll design the process flow later"),value:!1}],value:this.selectedProcess.useDesigner,disabled:!1,enabled:!0,onChange:function(b){(a.selectedProcess.useDesigner=b)?(a.processDesignerButton.set("disabled",!1),f.add(a.processDesignerButton.domNode,
"idxButtonSpecial")):(a.processDesignerButton.set("disabled",!0),f.remove(a.processDesignerButton.domNode,"idxButtonSpecial"))}})).placeAt(b);a.processDesignerButton=(new j({label:this.createProcessButtonLabel,showTitle:!1,onClick:function(){a._launchDesigner()}})).placeAt(b);f.add(a.processDesignerButton.domNode,"idxButtonSpecial");this.selectedProcess.useDesigner?(a.processDesignerButton.set("disabled",!1),f.add(this.processDesignerButton.domNode,"idxButtonSpecial")):(a.processDesignerButton.set("disabled",
!0),f.remove(this.processDesignerButton.domNode,"idxButtonSpecial"));this._updateLaunchBtnText()},_launchDesigner:function(){if(this.selectedProcess&&this.selectedProcess.useDesigner&&this.model.selectedObjForProcess&&this._validateProcessForm(!0)){var a=this,b;if("application"===this.model.selectedObjForProcess.type){var c=this.selectedProcess;c.version="1";if(b=this.model.getProcessDesign("application",c))c.rootActivity=a._cloneDesign(b);b=new C({mode:"firstDayWizard",application:this.model.application,
applicationProcess:c,firstDayWizardModel:this.model})}else if("component"===this.model.selectedObjForProcess.type){c=this.selectedProcess;c.version="1";if(b=this.model.getProcessDesign("component",c))c.rootActivity=a._cloneDesign(b);b=this.model.getObjById("component",this.model.selectedObjForProcess.id);b=new y({mode:"firstDayWizard",component:b,componentProcess:c,firstDayWizardModel:this.model})}var d=new u({id:"fdw-designer-dialog",title:i18n("Process: %s",this.selectedProcess.name),className:"fdw-process-dialog",
style:"height:100%; width:100%; top:0; left:0; position:absolute; max-width: 100%; max-height: 100%",closable:!0,draggable:!1,destroyOnHide:!0}),c={label:i18n("Done"),showTitle:!1};this.designerDoneButton=(new j(c)).placeAt(d.titleNode);f.add(this.designerDoneButton.domNode,"fdw-designer-done-btn");this.model.watch("processDesignerSaveBtnState",function(b,c,d){a.designerDoneButton&&("enabled"===d?(f.add(a.designerDoneButton.domNode,"idxButtonSpecial"),a._addDesignerDoneClickHandler()):(f.remove(a.designerDoneButton.domNode,
"idxButtonSpecial"),a._removeDesignerDoneClickHandler()))});c={label:i18n("Cancel"),showTitle:!1};c=(new j(c)).placeAt(d.titleNode);t(c,"click",function(){d.destroy();a._updateLaunchBtnText()});b.placeAt(d.containerNode);d.show();f.toggle(d.domNode,"fullScreen",!0)}},_cloneDesign:function(a){return JSON.parse(JSON.stringify(a))},_addDesignerDoneClickHandler:function(){var a=this;this._removeDesignerDoneClickHandler();this.designerDoneSignal=t(this.designerDoneButton,"click",function(){var b=dijit.byId(dijit.byId("fdw-designer-dialog").containerNode.childNodes[0].id);
b&&(b.toolbar.onSave(),a._updateLaunchBtnText())})},_removeDesignerDoneClickHandler:function(){this.designerDoneSignal&&this.designerDoneSignal.remove()},_updateLaunchBtnText:function(){this.savedProcessDiagram&&this.savedProcessDiagram.destroy();var a;"application"===this.model.selectedObjForProcess.type?a=this.model.getProcessDesign("application",this.selectedProcess):"component"===this.model.selectedObjForProcess.type&&(a=this.model.getProcessDesign("component",this.selectedProcess));a?this.processDesignerButton.set("label",
this.modifyProcessButtonLabel):this.processDesignerButton.set("label",this.createProcessButtonLabel)},_validateProcessForm:function(a){var b=!0;if(this.selectedProcess){this.form.form.getData();var c=this.form.form.validateRequired();0<c.length&&(c=c.map(function(a){return util.escape(a)}),o({messages:c}),b=!1);if(!a&&this.selectedProcess.useDesigner){var d;"application"===this.model.selectedObjForProcess.type?d=this.model.getProcessDesign("application",this.selectedProcess):"component"===this.model.selectedObjForProcess.type&&
(d=this.model.getProcessDesign("component",this.selectedProcess));d||(o({messages:[this.noProcessDesignErrorPart1,"",this.noProcessDesignErrorPart2,"",this.noProcessDesignErrorPart3]}),b=!1)}}return b},_onShow:function(){if(!this.model.selectedProcess&&!this.model.selectedObjForProcess){var a=this.model.getFirstComponent();this.model.selectedObjForProcess={id:a.id,type:"component"};this.model.unSelectAllObjs("process");this.model.setSelectedObj("component",a);this._refreshForm()}else if(this.model.selectedObjForProcess)this.model.selectedProcess?
(this.model.setSelectedObj("process",this.model.selectedProcess),this.selectedProcess=this.model.selectedProcess,this._refreshForm()):"component"===this.model.selectedObjForProcess.type?(this.model.unSelectAllObjs("process"),this.model.application.set("selected",!1),this.model.setSelectedObj("component",this.model.getObjById("component",this.model.selectedObjForProcess.id))):(this.model.unSelectAllObjs("component"),this.model.unSelectAllObjs("process"),this.model.application.set("selected",!0));this._updateComponentApplicationProcessList()},
_onHide:function(){this.selectedProcess=void 0;this.model.selectedProcess=void 0;this.model.selectedObjForProcess=void 0},_validateName:function(a,b){var c;if(0<h.filter(this.model.processes.query(),function(c){if(c.parentObjType===a.parentObjType&&c.parentObjId===a.parentObjId&&a.id!==c.id)return c.name===b}).length)c=this.duplicateNameError;return c},_validateAllNames:function(){var a=this.model.processes.query(),b,c;for(c=0;c<a.length;c++)if(b=a[c],b=this._validateName(b,b.name)){b=this.atLeastOneDuplicateNameError;
break}return b},save:function(){if(this.selectedProcess)this._saveProcess(),this.model.selectedProcess=this.selectedProcess},validate:function(){if(this._validateAllNames())return o({messages:[this.duplicateNameError]}),!1;if(this.selectedProcess){if(this.selectedProcess.hasInvalidName)return o({messages:[this.duplicateNameError]}),!1;if(!this._validateProcessForm())return!1;this._saveProcess()}if(!this.model.isEveryComponentHasAProcess())return o({messages:[this.notEveryComponentHasAProcess]}),!1;
return 1>this.model.getAllApplicationProcesses().length?(o({messages:[this.zeroApplicationProcessError]}),!1):!0}})})},"deploy/widgets/componentProcess/ComponentProcessActivities":function(){define("dojo/_base/declare,dojo/request/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/json,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/Alert,deploy/widgets/process/RequiredCommentForm,deploy/widgets/workflow/BaseGraph".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return l("deploy.widgets.componentProcess.ComponentProcessActivities",
[f],{componentId:null,componentTemplateId:null,componentProcessId:null,componentProcessVersion:null,readOnly:!1,postCreate:function(){this.inherited(arguments);var a=this;if(mxClient.isBrowserSupported()){if(void 0!==this.componentProcess)this.processId=this.componentProcessId=this.componentProcess.id,this.componentProcessVersion=this.componentProcess.version;"firstDayWizard"===this.mode?(a.readOnly=!1,a.callGraphStartup()):m(a.getProcessUrl(),{handleAs:"json"}).then(function(b){a.component=b.component;
a.componentTemplate=b.componentTemplate;a.componentProcess=b;a.exploreUrl=a.component?"#component/"+a.component.id:"#componentTemplate/"+a.componentTemplate.id+"/-1";if(b.versionCount!==b.version)a.readOnly=!0;else if(a.componentTemplate&&!a.componentTemplate.security["Manage Processes"])a.readOnly=!0;else if(a.component&&!a.component.security["Manage Processes"])a.readOnly=!0;a.callGraphStartup()})}else mxUtils.error(i18n("This browser is not compatible with the rich workflow editor."),200,!1)},
getProcessUrl:function(){return this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled?bootstrap.restUrl+"deploy/componentProcess/draft/"+this.componentProcessId+"/"+this.componentProcessVersion:bootstrap.restUrl+"deploy/componentProcess/"+this.componentProcessId+"/"+this.componentProcessVersion},callGraphStartup:function(){void 0!==this.componentProcess.rootActivity?this.graphStartup(this.componentProcess.rootActivity):this.graphStartup(null)},createToolbar:function(a,b){var c=this;
if(a)c.componentProcess.locked=b,c.componentProcess.currentUserIsLockOwner=b;c.buildToolbar({latest:c.componentProcess.version===c.componentProcess.versionCount,label:c.getVersionToggleLabel(),isDraft:c.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled,locked:c.componentProcess.locked&&config.data.systemConfiguration.safeEditFeatureEnabled,lockOwned:c.componentProcess.currentUserIsLockOwner&&config.data.systemConfiguration.safeEditFeatureEnabled,lockFunction:function(){c.lockProcess(c.componentProcess)},
unlockFunction:function(){c.unlockProcess(c.componentProcess,c.componentProcess.currentUserIsLockOwner)},promoteFunction:function(a){var b="";a||(b=config.data.systemConfiguration.requireProcessPromotionApproval?i18n("Draft Process Submitted for Promotion."):i18n("Draft Process Successfully Promoted."),m.put(bootstrap.restUrl+"deploy/componentProcess/promote/"+c.componentProcess.id+"/"+c.componentProcess.version).then(function(){c.showSavePopup(b)},function(a){c.showSaveErrorPopup(a)}))},promotionPending:c.componentProcess.promotionPending,
controls:c.generateVersionControls(c.componentProcess)})},graphStartup:function(a){this.inherited(arguments);this.createToolbar();var b;b="firstDayWizard"===this.mode?"deploy/componentProcess/activityTree":"deploy/componentProcess/"+this.componentProcess.id+"/activityTree";this.readOnly||this.refreshStepPalette({favoriteCookie:"component",favoriteDrawers:[i18n("Utility Steps")],process:this.componentProcess,url:bootstrap.restUrl+b})},lockProcess:function(a){var c=this;dojo.xhrPut({url:bootstrap.restUrl+
"deploy/componentProcess/lock/"+a.id,handleAs:"json",load:function(){c.destroyToolbar();c.createToolbar(!0,!0)},error:function(a){(new b({messages:[i18n("Error locking process:"),"",util.escape(a.responseText)]})).startup()}})},unlockProcess:function(a,c){var d=this;dojo.xhrPut({url:bootstrap.restUrl+"deploy/componentProcess/unlock/"+a.id,handleAs:"json",load:function(){c?(d.destroyToolbar(),d.createToolbar(!0,!1)):navBar.setHash("draftComponentProcess/"+d.componentProcessId+"/-1",!1,!0)},error:function(a){(new b({messages:[i18n("Error unlocking process:"),
"",util.escape(a.responseText)]})).startup()}})},getVersionToggleLabel:function(){return this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled?i18n("Draft %s of %s",this.componentProcess.version,this.componentProcess.versionCount):i18n("Version %s of %s",this.componentProcess.version,this.componentProcess.versionCount)},getHashForSpecificVersion:function(a){return this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled?"draftComponentProcess/"+this.componentProcess.id+
"/"+a:"componentProcess/"+this.componentProcess.id+"/"+a},saveProcessDesign:function(a){var b=this,c=b.getWorkflowJson();if(a)c.comment=a;"firstDayWizard"===b.mode?(b.firstDayWizardModel.saveProcessDesign("component",b.componentProcess,c),dijit.byId("fdw-designer-dialog").destroy()):m.put(bootstrap.restUrl+"deploy/componentProcess/"+b.componentProcess.id+"/saveActivities",{data:h.stringify(c),headers:{componentProcessVersion:b.componentProcess.version,"Content-Type":"application/json"}}).then(function(){b.showSavePopup(i18n("Process design saved successfully."));
document.hasChanges=!1;b.clearChangedActivities();navBar.setHash(b.getHashForSpecificVersion("-1"),!1,!0)},function(a){b.showSaveErrorPopup(a)})},createDivWithClass:function(a,b){j.create("div",{className:a},b)},generateVersionControls:function(f){var k=this;if(!config.data.systemConfiguration.safeEditFeatureEnabled)return util.vc.generateVersionControls(k.componentProcess,function(a){return k.getHashForSpecificVersion(a)});var l=j.create("div",{});if(1<f.version){var q=j.create("a",{href:"#"+k.getHashForSpecificVersion(f.version-
1)},l);k.createDivWithClass("arrow_backwards inlineBlock",q)}else k.createDivWithClass("arrow_backwards_grey inlineBlock",l);j.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},l);if(f.version<f.versionCount){q=j.create("a",{href:"#"+k.getHashForSpecificVersion(f.version+1)},l);j.create("span",{innerHTML:"&nbsp;&nbsp;"},l);var o=j.create("a",{href:"#"+k.getHashForSpecificVersion(f.versionCount)},l);k.createDivWithClass("arrow_forward inlineBlock",q);k.createDivWithClass("arrow_fastForward inlineBlock",
o);if(f.component&&f.component.security["Manage Processes"]||f.componentTemplate&&f.componentTemplate.security["Manage Processes"])q=j.create("div",{style:{paddingTop:"5px"}},l),q=j.create("a",{"class":"linkPointer",innerHTML:i18n("Copy as Latest Draft")},q),e(q,"click",function(){new c({message:i18n("Are you sure you want to reset the draft process to version %s of this process?",f.version),action:function(){if(config.data.systemConfiguration.requiresCommitComment){var c=new d({title:i18n("Process Change Comment"),
closable:!0});(new a({callback:function(a){var d={};if(a.comment)d.comment=a.comment;a&&m.put(bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(f.path)+"."+f.version+"/setAsLatestWithComment",{data:h.stringify(d),headers:{"Content-Type":"application/json"}}).then(function(){config.data.systemConfiguration.safeEditFeatureEnabled?navBar.setHash("draftComponentProcess/"+k.componentProcessId+"/-1",!1,!0):navBar.setHash("componentProcess/"+k.componentProcessId+"/-1",!1,!0)},function(){new b({message:i18n("Error: %s",
util.escape(a.responseText))})});c.hide();c.destroy()}})).placeAt(c);c.show()}else dojo.xhrPut({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(f.path)+"."+f.version+"/setAsLatest",load:function(){config.data.systemConfiguration.safeEditFeatureEnabled?navBar.setHash("draftComponentProcess/"+k.componentProcessId+"/-1",!1,!0):navBar.setHash("componentProcess/"+k.componentProcessId+"/-1",!1,!0)},error:function(a){new b({message:i18n("Error: %s",util.escape(a.responseText))})}})}})})}else k.createDivWithClass("arrow_forward_grey inlineBlock",
l),j.create("span",{innerHTML:"&nbsp;&nbsp;"},l),k.createDivWithClass("arrow_fastForward_grey inlineBlock",l);return l}})})},"deploy/widgets/applicationProcess/ApplicationProcessActivities":function(){define("dojo/_base/declare,dojo/request/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,deploy/widgets/workflow/BaseGraph".split(","),function(l,m,k,j,e,h){return l("deploy.widgets.applicationProcess.ApplicationProcessActivities",[h],{postCreate:function(){this.inherited(arguments);var d=this;if(mxClient.isBrowserSupported()){if(void 0!==
this.applicationProcess)this.processId=this.applicationProcessId=this.applicationProcess.id;"firstDayWizard"===this.mode?(this.readOnly=!1,void 0!==d.applicationProcess.rootActivity?d.graphStartup(d.applicationProcess.rootActivity):d.graphStartup(null)):m(bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcessId+"/"+this.applicationProcessVersion,{handleAs:"json"}).then(function(c){d.application=c.application;d.applicationTemplate=c.applicationTemplate;d.applicationProcess=c;d.exploreUrl=
d.application?"#application/"+d.application.id:"#applicationTemplate/"+d.applicationTemplate.id+"/-1";d.readOnly=!d.hasManageProcessesPermission()||c.versionCount!==c.version?!0:!1;void 0!==d.applicationProcess.rootActivity?d.graphStartup(d.applicationProcess.rootActivity):d.graphStartup(null)})}else mxUtils.error(i18n("This browser is not compatible with the rich workflow editor."),200,!1)},graphStartup:function(d){this.inherited(arguments);var c=this;c.buildToolbar({latest:c.applicationProcess.version===
c.applicationProcess.versionCount,label:i18n("Version %s of %s",c.applicationProcess.version,c.applicationProcess.versionCount),controls:util.vc.generateVersionControls(c.applicationProcess,function(a){return"applicationProcess/"+c.applicationProcess.id+"/"+a})});var b;b="firstDayWizard"===this.mode?"deploy/applicationProcess/activityTree":"deploy/applicationProcess/"+c.applicationProcess.id+"/activityTree";this.readOnly||c.refreshStepPalette({process:c.applicationProcess,url:bootstrap.restUrl+b,
topStepDrawerLabel:i18n("Application Steps"),lazyChildrenDrawer:{label:i18n("Component Process Steps"),getUrl:function(a){return bootstrap.restUrl+"deploy/component/"+a.id+"/processesForStepPalette"}}})},saveProcessDesign:function(d){var c=this,b=c.getWorkflowJson();if(d)b.comment=d;"firstDayWizard"===c.mode?(c.firstDayWizardModel.saveProcessDesign("application",c.applicationProcess,b),dijit.byId("fdw-designer-dialog").destroy()):m.put(bootstrap.restUrl+"deploy/applicationProcess/"+c.applicationProcess.id+
"/saveActivities",{data:e.stringify(b),handleAs:"json",headers:{applicationProcessVersion:c.applicationProcess.version,"Content-Type":"application/json"}}).then(function(){c.showSavePopup(i18n("Process design saved successfully."));document.hasChanges=!1;c.clearChangedActivities();navBar.setHash("applicationProcess/"+c.applicationProcess.id+"/-1",!1,!0)},function(a){c.showSaveErrorPopup(a)})},hasManageProcessesPermission:function(){var d=!1;this.application?d=this.application.security["Manage Processes"]:
this.applicationTemplate&&(d=this.applicationTemplate.security["Manage Processes"]);return d}})})},"deploy/widgets/componentProcess/EditComponentProcess":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,deploy/widgets/firstDayWizard/FirstDayWizardUtil".split(","),function(l,m,k,j,e,h,d){return k("deploy.widgets.componentProcess.EditComponentProcess",[m,l],{templateString:'<div class="editComponentProcess">  <div data-dojo-attach-point="formAttach"></div></div>',
showCancel:!0,postCreate:function(){this.inherited(arguments);var c=this;this.existingValues={};this.componentProcess?this.existingValues=this.componentProcess:(this.existingValues.takesVersion=!0,this.existingValues.inventoryActionType="ADD",this.existingValues.defaultWorkingDir="${p:resource/work.dir}/${p:component.name}");this.form=new e({submitUrl:bootstrap.restUrl+"deploy/componentProcess",readOnly:c.isReadOnly(),showButtons:!c.readOnly&&"firstDayWizard"!==c.mode,postSubmit:function(a){navBar.setHash(c.getOnSaveRedirectHash(a.id),
!1,!0);void 0!==c.callback&&c.callback()},onError:function(a){a.responseText&&new j({message:util.escape(a.responseText)});c.componentProcess&&navBar.setHash(c.getConfigurationHash(c.componentProcess),!0,!1)},addData:function(a){if(c.component)a.componentId=c.component.id;else if(c.componentTemplate)a.componentTemplateId=c.componentTemplate.id;if(c.componentProcess)a.existingId=c.componentProcess.id,a.componentProcessVersion=c.componentProcess.version;var b=a.processType;delete a.processType;if("deploy"===
b)a.inventoryActionType="ADD",a.configActionType="ADD",a.takesVersion=!0;else if("config_deploy"===b)a.configActionType="ADD",a.takesVersion=!1;else if("uninstall"===b)a.inventoryActionType="REMOVE",a.takesVersion=!0;else if("operational_version"===b)a.takesVersion=!0;else if("operational"===b)a.takesVersion=!1},onCancel:function(){void 0!==c.callback&&c.callback()},cancelLabel:c.showCancel?i18n("Cancel"):null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name,
textDir:util.getBaseTextDir(),onChange:function(a){"firstDayWizard"===c.mode&&c.firstDayWizardModel.set("pre_setProcessName",{process:c.componentProcess,newName:a})}});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"_type",type:"Invisible"});var b=null,b=this.existingValues.takesVersion?"ADD"===this.existingValues.inventoryActionType?"deploy":"REMOVE"===this.existingValues.inventoryActionType?"uninstall":
"operational_version":"ADD"===this.existingValues.configActionType?"config_deploy":"firstDayWizard"===c.mode?"deploy":"operational";this.form.addField({name:"processType",label:i18n("Process Type"),type:"Select",allowedValues:[{label:i18n("Deployment"),value:"deploy"},{label:i18n("Configuration Deployment"),value:"config_deploy"},{label:i18n("Uninstall"),value:"uninstall"},{label:i18n("Operational (With Version)"),value:"operational_version"},{label:i18n("Operational (No Version Needed)"),value:"operational"}],
required:!0,value:b,description:i18n('The type of action this process is performing. Specify "Deployment" to install a component or "Uninstall" to remove a component. Specify "Configuration Deployment" to apply new configuration settings to a component without installing files. Specify an operational process to make changes to an installed component without changing its status in the inventory. '),onChange:function(a){"deploy"===a||"uninstall"===a?c.form.hasField("status")||c.showStatusSelect():c.form.hasField("status")&&
c.form.removeField("status");"firstDayWizard"===c.mode&&d.boldLabelsOfRequiredFields()}},"_type");("deploy"===b||"uninstall"===b)&&c.showStatusSelect();this.form.addField({name:"defaultWorkingDir",label:i18n("Default Working Directory"),type:"Text",bidiDynamicSTT:"FILE_PATH",required:!0,value:this.existingValues.defaultWorkingDir});this.form.addField({name:"requiredRoleId",label:i18n("Required Role"),description:i18n("The role on the component which a user must have to execute this process"),url:bootstrap.baseUrl+
"security/role",value:this.existingValues.requiredRoleId,allowNone:!0,type:"TableFilterSelect",formatDropDownLabel:function(a,b){a.textContent=i18n(b.name)},enforceTranslatedDisplayValues:!0});this.form.placeAt(this.formAttach)},isReadOnly:function(){return this.readOnly||this.isDraft&&this.componentProcess&&this.componentProcess.locked&&!this.componentProcess.currentUserIsLockOwner&&config.data.systemConfiguration.safeEditFeatureEnabled||!this.isDraft&&this.componentProcess&&"firstDayWizard"!==this.mode&&
config.data.systemConfiguration.safeEditFeatureEnabled?!0:!1},getOnSaveRedirectHash:function(c){return(this.isDraft||!this.componentProcess)&&config.data.systemConfiguration.safeEditFeatureEnabled?"draftComponentProcess/"+c+"/-1":"componentProcess/"+c+"/-1"},getConfigurationHash:function(c){return this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled?"draftComponentProcess/"+c.id+"/-1/configuration":"componentProcess/"+c.id+"/-1/configuration"},showStatusSelect:function(){var c=new h({disabled:this.readOnly,
restUrl:bootstrap.restUrl+"deploy/status/inventoryStatuses",getLabel:function(b){return i18n(b.name)},getValue:function(b){return b.name},getStyle:function(b){return{backgroundColor:b.color}},allowNone:!1,value:this.existingValues.status});this.form.addField({name:"status",label:i18n("Inventory Status"),required:!0,widget:c,description:i18n("The inventory status to add or remove.")},"_type")}})})},"deploy/widgets/applicationProcess/EditApplicationProcess":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/Alert,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h,d){return j("deploy.widgets.applicationProcess.EditApplicationProcess",[m,l],{templateString:'<div class="editApplicationProcess">  <div data-dojo-attach-point="formAttach"></div></div>',showCancel:!0,postCreate:function(){this.inherited(arguments);var c=this;this.componentsForPresets=[];this.existingValues={};if(this.applicationProcess)this.existingValues=this.applicationProcess;this.form=new d({submitUrl:bootstrap.restUrl+"deploy/applicationProcess",readOnly:c.readOnly,showButtons:!c.readOnly&&
"firstDayWizard"!==c.mode,postSubmit:function(b){navBar.setHash("applicationProcess/"+b.id+"/-1",!1,!0);void 0!==c.callback&&c.callback()},onError:function(b){b.responseText&&new h({message:util.escape(b.responseText)});c.applicationProcess&&navBar.setHash("applicationProcess/"+c.applicationProcess.id+"/-1/configuration",!0,!1)},addData:function(b){if(c.application)b.applicationId=c.application.id;else if(c.applicationTemplate)b.applicationTemplateId=c.applicationTemplate.id,b.inventoryManagementType=
"AUTOMATIC";if(c.applicationProcess)b.existingId=c.applicationProcess.id,b.applicationProcessVersion=c.applicationProcess.version;if(c.applicationProcess)b.applicationProcessVersion=c.applicationProcess.version;if("firstDayWizard"===c.mode)b.inventoryManagementType="AUTOMATIC";b.versionPresets=[];k.forEach(c.componentsForPresets,function(a){var c=b["ver_"+a.id];c&&"none/"!==c&&b.versionPresets.push({selector:c,component:a.id})})},onCancel:function(){void 0!==c.callback&&c.callback()},cancelLabel:c.showCancel?
i18n("Cancel"):null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name,onChange:function(b){"firstDayWizard"===c.mode&&c.firstDayWizardModel.set("pre_setProcessName",{process:c.applicationProcess,newName:b})}});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});c.application&&this.form.addField({name:"inventoryManagementType",label:i18n("Inventory Management"),description:i18n("How inventory updates will be managed for this process."),
type:"Select",required:!0,allowedValues:[{label:i18n("Automatic"),value:"AUTOMATIC"},{label:i18n("Advanced"),value:"ADVANCED"}],value:this.existingValues.inventoryManagementType});this.form.addField({name:"offlineAgentHandling",label:i18n("Offline Agent Handling"),description:i18n("How this process will react when some of the agents it would use are offline.")+"<br/><br/>"+i18n("Check before execution: The process will not start if any agents are offline.")+"<br/>"+i18n("Use all available; report failure: Any steps expected to run on offline agents will be marked as failed.")+
"<br/>"+i18n("Always report success: Any steps expected to run on offline agents will be marked successful."),type:"Select",required:!0,allowedValues:[{label:i18n("Check Before Execution"),value:"PRE_EXECUTION_CHECK"},{label:i18n("Use All Available; Report Failure"),value:"FAIL_BUT_CONTINUE"},{label:i18n("Always Report Success"),value:"ALLOW_OFFLINE"}],value:this.existingValues.offlineAgentHandling});this.form.addField({name:"requiredRoleId",label:i18n("Required Role"),description:i18n("The role on the application which a user must have to execute this process"),
url:bootstrap.baseUrl+"security/role",value:this.existingValues.requiredRoleId,allowNone:!0,type:"TableFilterSelect",formatDropDownLabel:function(b,a){b.textContent=i18n(a.name)},enforceTranslatedDisplayValues:!0});this.existingValues.application&&e.get({url:bootstrap.restUrl+"deploy/applicationProcess/"+c.applicationProcess.id+"/componentsTakingVersions/"+c.application.id,handleAs:"json",load:function(b){(0<b.length||c.existingValues.versionPresets)&&c.form.addField({type:"Label",value:i18n("Version presets can be configured below. Whenever a value other than 'None' is given here, the user will not be able to provide a value at runtime, and any snapshot versions for that component will be ignored.")});
var a=[],d={};k.forEach(b,function(b){a.push(b.name);d[b.name]={component:b}});k.forEach(c.existingValues.versionPresets,function(b){a.push(b.component.name);d[b.component.name]={component:b.component,value:b.selector}});a.sort();k.forEach(a,function(a){c.addPresetField(d[a].component,d[a].value)})}});this.form.placeAt(this.formAttach)},addPresetField:function(c,b){var a=document.createElement("span"),d=document.createElement("span");d.innerHTML=i18n("Version for %s",c.name.escape());a.appendChild(d);
this.componentsForPresets.push(c);this.form.addField({label:a,name:"ver_"+c.id,type:"VersionSelector",context:{component:c},value:b,required:!1})}})})},"deploy/widgets/firstDayWizard/ComponentProcessAnchorEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),function(l,m,k,j,e,h,d,c,b){return j([m,l],{templateString:'<div class="process-anchor-entry">  <div data-dojo-attach-point="componentEntryWrapperAttach">  <span>    <div class="inlineBlock general-icon componentIcon"></div>    <span data-dojo-attach-point="nameAttach" class="component-name-container"></span>  </span>  </div>  <div data-dojo-attach-point="componentProcessAttach" class="component-processes">  </div></div>',
onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);this._reflectName(this.component.get("name"));this.component.watch("name",function(b,c,d){a._reflectName(d)});this._reflectSelected(this.component.get("selected"));this.component.watch("selected",function(b,c,d){a._reflectSelected(d)});this.componentProcessAttach.id="component-"+this.component.id;b(this,"click",this._onSelected)},_onSelected:function(){if(this.onSelected)this.onSelected(this.component)},_reflectName:function(a){this.nameAttach.textContent=
i18n(a)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display="none";this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display="",d.remove(a.nameContainerAttach,"full-length"),d.add(a.nameContainerAttach,"partial-length");return!0===b.required});this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.component.get("props").query().some(function(b){if(""!==b.error)return d.remove(a.propStatusIconAttach,
"complete"),d.add(a.propStatusIconAttach,"empty"),!0});!1===b&&(d.remove(this.propStatusIconAttach,"empty"),d.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?d.add(this.componentEntryWrapperAttach,"selected"):d.remove(this.componentEntryWrapperAttach,"selected")}})})},"deploy/widgets/firstDayWizard/ApplicationProcessAnchorEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),
function(l,m,k,j,e,h,d,c,b){return j([m,l],{templateString:'<div class="process-anchor-entry">  <div data-dojo-attach-point="applicationEntryWrapperAttach">  <span>    <div class="inlineBlock general-icon applicationIcon"></div>    <span data-dojo-attach-point="nameAttach" class="name-container"></span>  </span>  </div>  <div data-dojo-attach-point="applicationProcessAttach" class="component-processes">  </div></div>',onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);this._reflectName(this.application.get("name"));
this.application.watch("name",function(b,c,d){a._reflectName(d)});this._reflectSelected(this.application.get("selected"));this.application.watch("selected",function(b,c,d){a._reflectSelected(d)});this.applicationProcessAttach.id="application-process-anchor";b(this,"click",this._onSelected)},_onSelected:function(){if(this.onSelected)this.onSelected(this.application)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display=
"none";this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display="",d.remove(a.nameContainerAttach,"full-length"),d.add(a.nameContainerAttach,"partial-length");return!0===b.required});this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.application.get("props").query().some(function(b){if(""!==b.error)return d.remove(a.propStatusIconAttach,"complete"),d.add(a.propStatusIconAttach,"empty"),!0});!1===
b&&(d.remove(this.propStatusIconAttach,"empty"),d.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?d.add(this.applicationEntryWrapperAttach,"selected"):d.remove(this.applicationEntryWrapperAttach,"selected")}})})},"deploy/widgets/firstDayWizard/ProcessListEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/_base/event,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),
function(l,m,k,j,e,h,d,c,b,a){return j([m,l],{templateString:'<div data-dojo-attach-point="componentEntryAttach" class="entry">  <span class="component-entry-content">    <div class="inlineBlock general-icon processIcon"></div>    <span data-dojo-attach-point="nameAttach" class="name-container"></span>  </span></div>',onSelected:null,postCreate:function(){var b=this;this.inherited(arguments);this._reflectName(this.process.get("name"));this.process.watch("name",function(a,c,d){b._reflectName(d)});
this._reflectSelected(this.process.get("selected"));this.process.watch("selected",function(a,c,d){b._reflectSelected(d)});a(this,"click",this._onSelected)},_onSelected:function(a){h.stop(a);if(this.onSelected)this.onSelected(this.process)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display="none";this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display=
"",c.remove(a.nameContainerAttach,"full-length"),c.add(a.nameContainerAttach,"partial-length");return!0===b.required});this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.process.get("props").query().some(function(b){if(""!==b.error)return c.remove(a.propStatusIconAttach,"complete"),c.add(a.propStatusIconAttach,"empty"),!0});!1===b&&(c.remove(this.propStatusIconAttach,"empty"),c.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?c.add(this.componentEntryAttach,
"selected"):c.remove(this.componentEntryAttach,"selected")}})})},"deploy/widgets/firstDayWizard/Controls":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/Alert,deploy/widgets/ModelWidgetList".split(","),function(l,m,k,j,e,h,d,c,b){return j([m,l],{templateString:'<div data-dojo-attach-point="controlAttach" class="controls">  <span data-dojo-attach-point="titleAttach" class="created-objects-title"></span>  <div class="button-container">    <div data-dojo-attach-point="addMenuAttach"         class="add-menu"         style="display:none;">    </div>    <div data-dojo-attach-point="addButtonAttach" class="icon-button add-button"></div>    <div data-dojo-attach-point="removeButtonAttach" class="icon-button remove-button"></div>  </div></div>',
postCreate:function(){var a=this;this.inherited(arguments);this.objStorageName="process"===this.objType?this.objType+"es":this.objType+"s";c(this.addButtonAttach,"click",function(){"process"===a.objType?a._handleProcessAdd():"environment"===a.objType?a._handleEnvironmentAdd():"component"===a.objType&&a._handleComponentAdd()});c(this.removeButtonAttach,"click",function(){var c=a._getSelected(),d;c&&("component"===a.objType&&(d=a._checkForUseInAppProcess(c)),d?b({messages:[d]}):a.model.removeObj(a.objType,
c))});var d;switch(a.objType){case "component":d=i18n("Create a component");break;case "process":d=i18n("Create a process");break;case "environment":d=i18n("Create an environment")}new k({connectId:[this.addButtonAttach],label:d,showDelay:100,position:["above","before","below","after"]});var e;switch(a.objType){case "component":e=i18n("Delete the selected component");break;case "process":e=i18n("Delete the selected process");break;case "environment":e=i18n("Delete the selected environment")}new k({connectId:[this.removeButtonAttach],
label:e,showDelay:100,position:["above","before","below","after"]});this._reflectNumberOfObjects();this.model[this.objStorageName]&&this.model[this.objStorageName].query().observe(function(b,c,d){(-1!==c||-1!==d)&&a._reflectNumberOfObjects()},!1)},_handleComponentAdd:function(){this._getSelected()?this.model.set("pre_addAComponent",!0):this.model.addObj(this.objType,null,!0)},_handleEnvironmentAdd:function(){this._getSelected()?this.model.set("pre_addAnEnvironment",!0):this.model.addObj(this.objType,
null,!0)},_handleProcessAdd:function(){this.model.selectedObjForProcess?this.model.selectedObjForProcess.id===this.model.application.id?this._handleApplicationProcessAdd():this._addAProcess():b({messages:[i18n("Please select a component or application first")]})},_handleApplicationProcessAdd:function(){this._validateComponentProcesses()?this._addAProcess():b({messages:[i18n("Please define all component processes before attempting to define an application process.")]})},_addAProcess:function(){this._getSelected()?
this.model.set("pre_addAProcess",!0):(this.model.addObj(this.objType,null,!0,this.model.selectedObjForProcess.id,this.model.selectedObjForProcess.type),this.model.unSelectAllObjs("component"),this.model.application.set("selected",!1))},_checkForUseInAppProcess:function(a){var b=this.model.processDesigns;if(b){var c=i18n("Component cannot be deleted, it is being used in an application process."),d;for(d=0;d<b.length;d++){var e=b[d];if("application"===e.parentObjType){var e=e.children,h;for(h=0;h<e.length;h++){var j=
e[h];if(j.componentName&&j.componentName===a.name)return c}}}}},_validateComponentProcesses:function(){var a=!0,b=this.model.components.query(),c=this.model.getAllComponentProcesses();1>c.length&&(a=!1);b.forEach(function(b){1>c.filter(function(a){return b.id===a.parentObjId}).length&&(a=!1)});return a},_reflectNumberOfObjects:function(){if(this.model[this.objStorageName]){var a=this.model[this.objStorageName].query(),b=0;if(a)b=a.length;if("component"===this.objType)this.titleAttach.textContent=
i18n("Components (%s)",b.toString());else if("process"===this.objType)this.titleAttach.textContent=i18n("Processes (%s)",b.toString());else if("environment"===this.objType)this.titleAttach.textContent=i18n("Environments (%s)",b.toString());0===b?(h.remove(this.removeButtonAttach,"remove-button"),h.add(this.removeButtonAttach,"remove-button-disabled")):(h.remove(this.removeButtonAttach,"remove-button-disabled"),h.add(this.removeButtonAttach,"remove-button"))}},_getSelected:function(){var a=this.model[this.objStorageName].query({selected:!0});
return a&&0<a.length?a[0]:null}})})},"deploy/widgets/firstDayWizard/AddOrCreateComponentsPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dijit/Dialog,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/xhr,dojo/Deferred,dojo/store/Memory,dojo/store/Observable,dojo/dom-class,dojo/dom-style,dojo/dom-construct,dojo/query,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/TooltipTitle,deploy/widgets/firstDayWizard/Controls,deploy/widgets/firstDayWizard/ComponentListEntry,deploy/widgets/component/EditComponent,deploy/widgets/ModelWidgetList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C){return e([m,l,k],{templateString:'<div class="fdw-application-page">    <div class="fdw-info-column">        <div class="fdw-info-text">            <div class="fdw-info-title">'+i18n("Specify Components")+'</div>            <br/>            <div data-dojo-attach-point="text1Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text2Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text3Attach" class="fdw-info-content">              <div class="fdw-emphasis2">'+
i18n("In this step:")+"</div>              <ul>              <li>"+i18n("Create components to use in the application.")+"</li>              <li>"+i18n("Specify where artifacts for the components are stored.")+"</li>              <li>"+i18n("Optionally: Configure advanced settings, including those for source configuration plug-ins.")+'</li>              </ul>            </div>        </div>    </div>    <div class="fdw-control-form-column">        <div class="fdw-control-column">            <div data-dojo-attach-point="controlAttach" class="fdw-control-row"></div>            <div data-dojo-attach-point="listAttach" class="fdw-list-column"></div>        </div>        <div data-dojo-attach-point="formAttach" class="fdw-form-column"></div>    </div></div>',
duplicateNameError:i18n("The component name you entered already exists. Component names must be unique."),zeroComponentError:i18n("Create at least one component before you continue to the next step."),postCreate:function(){this.inherited(arguments);t.place("<div>"+i18n("Components represent deployable artifacts of an application. UrbanCode Deploy can receive pushed, or published, deployable artifacts from build systems and install them on environments. If required, UrbanCode Deploy can pull in artifacts using source configuration plug-ins.")+
"</div>",this.text1Attach);t.place("<div>"+i18n("For best results, break up deployable artifacts into small components so that you can deploy small pieces of the application independently.")+"</div>",this.text2Attach);(new v({model:this.model,objType:"component",templateBased:!1})).placeAt(this.controlAttach);var a=this;this.model.components.query().observe(function(b,c,d){if(-1!==d)a.selectedComponent=b,a._setWatch(b),a._refreshForm();if(0===a.model.components.query({selected:!0}).length)a.selectedComponent=
null,a._refreshForm()});this.model.components.query().forEach(function(b){a._setWatch(b)});this.model.watch("pre_addAComponent",function(b,c,d){if(d)a.model.pre_addAComponent=!1,a._validateComponent()&&(a._saveComponent(),a.model.addObj("component",null,!0))});this.model.watch("pre_selectAComponent",function(b,c,d){if(d)a.model.pre_selectAComponent=!1,a._validateComponent()&&(a._saveComponent(),a.model.setSelectedObj("component",d))});(new C({model:this.model.components,widgetFactory:function(b){return new x({component:b,
onSelected:function(b){a.model.set("pre_selectAComponent",b)}})}})).placeAt(this.listAttach);this.model.watch("pre_setComponentName",function(b,c,d){if(d)a.model.pre_setComponentName=void 0,d.newName&&a._validateName(d.component,d.newName).then(function(a){Boolean(a.result)?(d.component.hasInvalidName&&delete d.component.hasInvalidName,d.component.set("name",d.newName)):(d.component.hasInvalidName=!0,new s({messages:["","",util.escape(i18n("A component with this name already exists. Component Name: %s",
d.newName))]}))})});if(this.model.selectedComponent)this.model.setSelectedObj("component",this.model.selectedComponent),this.selectedComponent=this.model.selectedComponent,this._refreshForm()},_setWatch:function(a){var b=this;a.watch("selected",function(c,d,e){if(!0===e)b.selectedComponent=a,b._refreshForm()})},_refreshForm:function(){t.empty(this.formAttach);this.form=void 0;if(this.selectedComponent)this.form=(new y({mode:"firstDayWizard",component:this.selectedComponent,firstDayWizardModel:this.model})).placeAt(this.formAttach),
u.boldLabelsOfRequiredFields()},_validateComponent:function(){var a=!0;if(this.selectedComponent){var b=this.form.form.getData(),c=this.form.form.validateRequired();c.concat(this.form.form.validateFields(b));this.selectedComponent.hasInvalidName&&c.push(this.duplicateNameError);0<c.length&&(c=c.map(function(a){return util.escape(a)}),s({messages:c}),a=!1)}return a},_saveComponent:function(){if(this.selectedComponent){var a=this,b=this.form.form.getData();d.forEach(Object.keys(b),function(c){a.selectedComponent.props[c]=
b[c];a.selectedComponent[c]=b[c]})}},_validateName:function(a,e){var f=new b;if(0<d.filter(this.model.components.query(),function(b){if(a.id!==b.id)return b.name===e}).length){var h={};h.responseText=this.duplicateNameError;f.reject(h)}else h=bootstrap.restUrl+"deploy/firstDay/isValidName/COMPONENT/"+encodeURIComponent(e),c.get({url:h,handleAs:"json",load:function(a){f.resolve(a)},error:function(a){f.reject(a)}});return f},save:function(){if(this.selectedComponent)this._saveComponent(),this.model.selectedComponent=
this.selectedComponent},validate:function(){if(this.selectedComponent){if(this.selectedComponent.hasInvalidName)return s({messages:[this.duplicateNameError]}),!1;if(!this._validateComponent())return!1;this._saveComponent()}return 1>this.model.components.query().length?(s({messages:[this.zeroComponentError]}),!1):!0}})})},"deploy/widgets/firstDayWizard/ComponentListEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),
function(l,m,k,j,e,h,d,c,b){return j([m,l],{templateString:'<div data-dojo-attach-point="componentEntryAttach" class="entry">  <span>    <div class="inlineBlock general-icon componentIcon"></div>    <span data-dojo-attach-point="nameAttach" class="component-name-container">    </span>  </span></div>',onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);this._reflectName(this.component.get("name"));this.component.watch("name",function(b,c,d){a._reflectName(d)});this._reflectSelected(this.component.get("selected"));
this.component.watch("selected",function(b,c,d){a._reflectSelected(d)});b(this,"click",this._onSelected)},_onSelected:function(){if(this.onSelected)this.onSelected(this.component)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display="none";this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display="",d.remove(a.nameContainerAttach,
"full-length"),d.add(a.nameContainerAttach,"partial-length");return!0===b.required});this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.component.get("props").query().some(function(b){if(""!==b.error)return d.remove(a.propStatusIconAttach,"complete"),d.add(a.propStatusIconAttach,"empty"),!0});!1===b&&(d.remove(this.propStatusIconAttach,"empty"),d.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?d.add(this.componentEntryAttach,"selected"):
d.remove(this.componentEntryAttach,"selected")}})})},"deploy/widgets/firstDayWizard/DataModel":function(){define(["dojo/_base/declare","dojo/Stateful"],function(l,m){return l([m],{props:{},constructor:function(k){this.props=k.props||this.props;this.initialize()},deserialize:function(k){var j=null,e=null;this.initialize();for(e in this.props)this.props.hasOwnProperty(e)&&void 0!==k[e]&&(j=this[e+"Deserializer"],"function"===typeof j?j.apply(this,[k[e]]):this.set(e,k[e]))},serialize:function(){var k=
{},j=null,e=null;for(e in this.props)this.props.hasOwnProperty(e)&&(j=this[e+"Serializer"],k[e]="function"===typeof j?j.apply(this,[]):this.get(e));return k},validate:function(){var k={},j=!0,e=null,h=null;for(h in this.props)if(this.props.hasOwnProperty(h))try{e=this[h+"Validator"],"function"===typeof e&&e.apply(this,[])}catch(d){k[h]=d.message,j=!1}if(!j)throw{errors:k};},initialize:function(){var k=null;for(k in this.props)this.props.hasOwnProperty(k)&&this.set(k,this.props[k])},getProps:function(){return this.props}})})},
"deploy/widgets/firstDayWizard/WelcomePage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dijit/registry,dijit/form/CheckBox,dijit/form/Button,dojo/_base/declare,dojo/_base/array,dojo/_base/xhr,dojo/on,dojo/dom,dojo/Deferred,dojo/DeferredList,dojo/dom-class,dojo/dom-construct,dojo/dom-attr,dojo/dom-style,js/webext/widgets/Alert,js/util/blocker/_BlockerMixin,deploy/widgets/GetStartedPopup,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/TooltipTitle,deploy/widgets/firstDayWizard/WizardPage".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C){return d([m,l,w,k],{name:"welcome",dismissedPrefix:"dismissed_",hideWelcomeTab:!1,templateString:'<div class="fdw-welcome-page">    <div data-dojo-attach-point="headingAttach" class="fdw-heading1"></div>    <div class="fdw-text-column">      <div data-dojo-attach-point="section1Attach" class="fdw-emphasis2"></div>      <div data-dojo-attach-point="section2Attach" class="fdw-emphasis2"></div>      <div data-dojo-attach-point="section3Attach" class="fdw-emphasis2">'+
i18n("You can find additional educational and information materials in the Getting Started page, here:")+'        <a class="linkPointer" data-dojo-attach-point="getStartedAttach">'+i18n("Getting Started")+'</a>      </div>    </div>    <div id="hide-welcome-tab-launch-wizard-container">        <span id="hide-welcome-tab-checkbox" data-dojo-attach-point="checkboxAttach"></span>            <label id="hide-welcome-tab-label" for="hide-welcome-tab-checkbox">'+i18n("Hide the Welcome tab next time I log in. (You can display this tab again from the help menu)")+
'            </label>        <span data-dojo-attach-point="buttonAttach" id="launch-wizard"></span>    </div></div>',postCreate:function(){var b=this;this.inherited(arguments);var d=c.filter(dojo.query(".topLevelTabs .tab"),function(a){return"#main/welcome"===o.get(a,"href")});!d||0===d.length||"none"===s.get(d[0],"display")?x.navigateToFirstDisplayedTab():(s.set("first-day-wizard","display","none"),q.place('<span class="fdw-emphasis1">'+i18n("Welcome %s",bootstrap.userFullName.escape())+"</span>",
this.headingAttach),q.place("<div>"+i18n("Looks like you are new to UrbanCode Deploy. UrbanCode Deploy is a deployment automation solution. With UrbanCode Deploy you can:")+"</div>",this.section1Attach),q.place("<ul><li>"+i18n("Model your application for deployment automation.")+"</li><li>"+i18n("Deploy application components to target environments.")+"</li><li>"+i18n("Monitor application deployments.")+"</li></ul>",this.section2Attach),b.block(),(new r([this._getUserPreferences(),this._getUseWizardPermission(),
this._getAgentsForCreatingResources()])).then(function(a){b.unblock();var c=a[0][1],d=a[1][1],a=0<JSON.parse(a[2][1]).length,f=!1;c&&c.dismissedUserAlerts&&c.dismissedUserAlerts.dismissed_welcome&&(f=!0);c=new e({checked:f,onChange:function(){b.hideWelcomeTab=this.checked;b._saveHideWelcomeTabPreference()}});q.place(c.domNode,b.checkboxAttach);c={label:i18n("Create an application"),showTitle:!1,onClick:function(){b._launchWizard()}};c=(new h(c)).placeAt(b.buttonAttach);t.add(c.domNode,"idxButtonSpecial");
var j;document.all&&!window.atob&&(j=!0);if(!d.result||j||!a)c.set("disabled",!0),t.remove(c.domNode,"idxButtonSpecial"),j?c.set("title",i18n("The application wizard does not support Internet Explorer 9 and earlier.")):a?c.set("title",i18n("Please ensure that you have the proper permissions for the wizard.")):c.set("title",i18n("Please ensure that you have view & create resource permissions for at least one agent to launch the wizard."))}),a(this.getStartedAttach,"click",function(){(new v({name:"gs"})).open(!0)}),
sessionSharedData&&sessionSharedData.wizardData&&this._launchWizard())},_getUserPreferences:function(){var a=new n;b.get({url:bootstrap.restUrl+"security/userPreferences",handleAs:"json",load:function(b){a.resolve(b)},error:function(b){a.reject(b)}});return a},_getAgentsForCreatingResources:function(){var a=new n;b.get({url:bootstrap.restUrl+"agent",content:{filterFields:["requiredActions"],filterType_requiredActions:"eq",filterValue_requiredActions:["Create Resources"]},handleas:"json",load:function(b){a.resolve(b)},
error:function(b){a.reject(b)}});return a},_getUseWizardPermission:function(){var a=new n;b.get({url:bootstrap.restUrl+"deploy/firstDay/userHavePerms",handleAs:"json",load:function(b){a.resolve(b)},error:function(b){a.reject(b)}});return a},_launchWizard:function(){s.set("fdw-welcome","display","none");s.set("first-day-wizard","display","");new C},_saveHideWelcomeTabPreference:function(){var a=bootstrap.restUrl+"security/userPreferences",c=this.dismissedPrefix+this.name;b.post({url:this.hideWelcomeTab?
a+"/dismissAlert/"+c:a+"/resetAlert/"+c,headers:{"Content-Type":"application/json"},rror:function(a){new u({messages:[i18n("Error saving hide welcome tab preferences:"),"",util.escape(a.responseText)]})}})}})})},"deploy/widgets/GetStartedPopup":function(){define("dojo/_base/declare,dijit/_WidgetBase,dojo/on,dojo/dom-class,dojo/dom-construct,dijit/focus,js/webext/widgets/Dialog".split(","),function(l,m,k,j,e,h,d){return l("deploy.widgets.GetStartedPopup",[m],{name:void 0,alertName:void 0,links:{},
postCreate:function(){this.createDialog()},createDialog:function(){var c=this;this.gsDialog=new d({className:"get-started-popup"});var b=e.create("div",{className:"close-popup-button",title:i18n("Close")},this.gsDialog.titleNode);k(b,"click",function(){c.close()});e.create("div",{innerHTML:'<h1 class="title">'+i18n("Getting started")+'</h1><div class="content"><div class="message">'+i18n("Access this anytime from the banner help menu.")+'</div><div class="bottomrow"><div class="badgecontainer tutorial-container" tabindex="1"><div class="secondarytaskbadges tutorial"></div><div class="secondarytasklbl">'+
i18n("Tutorials")+'</div></div><div class="badgecontainer videos-container" tabindex="2"><div class="secondarytaskbadges videos"></div><div class="secondarytasklbl">'+i18n("Instructional Videos")+'</div></div><div class="badgecontainer questions-container" tabindex="3"><div class="secondarytaskbadges questions"></div><div class="secondarytasklbl">'+i18n("Questions")+'</div></div><div class="badgecontainer documentation-container" tabindex="4"><div class="secondarytaskbadges documentation"></div><div class="secondarytasklbl">'+
i18n("Documentation")+"</div></div></div></div>"},this.gsDialog.containerNode);b=dojo.query(".get-started-popup .badgecontainer");dojo.forEach(b,function(a){j.contains(a,"tutorial-container")?k(a,"click, keypress",function(a){c.launch(a,"tutorial")}):j.contains(a,"videos-container")?k(a,"click, keypress",function(a){c.launch(a,"video")}):j.contains(a,"questions-container")?k(a,"click, keypress",function(a){c.launch(a,"question")}):j.contains(a,"documentation-container")&&k(a,"click, keypress",function(a){c.launch(a,
"documentation")})})},a11yClick:function(c){if("click"===c.type||"keypress"===c.type&&(c=c.charCode||c.keyCode,32===c||13===c))return!0;return!1},launch:function(c,b){this.a11yClick(c)&&config.docLinks[b+"Url"]&&window.open(config.docLinks[b+"Url"],"_blank")},open:function(){this.gsDialog&&this.gsDialog.show()},close:function(){this.gsDialog&&this.gsDialog.hide()}})})},"deploy/widgets/firstDayWizard/WizardPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/connect,dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dojo/dom-attr,dojo/dom-style,dojo/on,dojox/widget/WizardPane,deploy/widgets/firstDayWizard/FirstDayWizard,deploy/widgets/firstDayWizard/Paginator".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return e([m],{postCreate:function(){this.inherited(arguments);d.empty("fdw-light-title");d.place("<span>"+i18n("Create an Application")+"</span>","fdw-light-title");d.empty("fdw-wizard");var a=new n;d.place(a.domNode,"fdw-wizard");d.empty("fdw-paginator");var b=new r({wizardModel:a.model});d.place(b.containerNode,"fdw-paginator");a.startup();a.resize()}})})},"deploy/widgets/firstDayWizard/FirstDayWizard":function(){define("dijit/focus,dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/connect,dojo/dom,dojo/dom-construct,dojo/dom-attr,dojo/dom-style,dojo/dom-class,dojo/dom-geometry,dojo/on,dojo/Deferred,dojo/request/xhr,dojo/Stateful,dojo/store/Memory,dojo/store/Observable,dojox/widget/WizardPane,deploy/widgets/wizard/Wizard,js/webext/widgets/Alert,js/util/blocker/_BlockerMixin,deploy/widgets/firstDayWizard/WizardModel,deploy/widgets/firstDayWizard/ApplicationModel,deploy/widgets/firstDayWizard/CreateApplicationPage,deploy/widgets/firstDayWizard/CreateEnvironmentsPage,deploy/widgets/firstDayWizard/AgentMappingPage,deploy/widgets/firstDayWizard/DefineProcessesPage,deploy/widgets/firstDayWizard/AddOrCreateComponentsPage,deploy/widgets/firstDayWizard/WhatsNextPopup".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G){return m([w,x],{hideDisabled:!0,cancelFunction:function(){this._cancel()},postCreate:function(){this.inherited(arguments);this.model=new y({});if(sessionSharedData&&sessionSharedData.wizardData)this.model.deserialize(sessionSharedData.wizardData);else{var a={sequenceNum:0};this.determineWizardPages(a);this.model.deserialize(a);this.model.application=new C({id:this.model.getUniqId()});this.model.components=new s(new o({}));this.model.processes=
new s(new o({}));this.model.environments=new s(new o({}));this.model.set("furthestEnabledPageIndex",0);this.model.set("selectedPageIndex",0)}this.addedPanes=[];this.createPanes();this.setUpPaginator();this.selectChild(this.addedPanes[this.model.selectedPageIndex],!1)},setUpPaginator:function(){var a=this;this.model.watch("pre_selectedPageIndex",function(b,c,d){if(d>a.model.selectedPageIndex){for(b=a.model.selectedPageIndex;b<d&&a.addedPanes[b]._checkPass();)b++;b===d?a.model.set("selectedPageIndex",
d):(a.model.pre_selectedPageIndex=a.model.selectedPageIndex,a.model.set("furthestEnabledPageIndex",b))}else a.model.set("selectedPageIndex",d)});this.model.watch("selectedPageIndex",function(b,c,d){a.selectChild(a.addedPanes[d]);a.model.furthestEnabledPageIndex<d&&a.model.set("furthestEnabledPageIndex",d)});navBar.setPageChangeNotification(function(){a.selectedChildWidget.content.save&&a.selectedChildWidget.content.save();if(a.model&&a.model.application)sessionSharedData||(sessionSharedData={}),sessionSharedData.wizardData=
a.model.serialize();a.destroy();return!1})},determineWizardPages:function(a){a.pageIds=[];a.pageIds.push(this.model.PageIds.CreateApplication);a.pageIds.push(this.model.PageIds.AddOrCreateComponents);a.pageIds.push(this.model.PageIds.DefineProcesses);a.pageIds.push(this.model.PageIds.CreateEnvironments);a.pageIds.push(this.model.PageIds.AgentMapping);if(0<a.pageIds.length)a.selectedPageId=a.pageIds[0]},createPanes:function(){var a=_.invert(this.model.PageIds);j.forEach(this.model.pageIds,function(b){b=
"add"+a[b]+"Pane";if("function"===typeof this[b])this[b]();else console.error(b+" is not defined")},this)},addCreateApplicationPane:function(){this.newPane({content:new B({model:this.model}),doneFunction:void 0})},addAddOrCreateComponentsPane:function(){this.newPane({content:new D({model:this.model}),doneFunction:void 0})},addDefineProcessesPane:function(){this.newPane({content:new E({model:this.model}),doneFunction:void 0})},addCreateEnvironmentsPane:function(){this.newPane({content:new A({model:this.model}),
doneFunction:void 0})},addAgentMappingPane:function(){this.newPane({content:new z({model:this.model}),doneFunction:k.hitch(this,this.saveDataToBackend)})},saveDataToBackend:function(){if(this.selectedChildWidget._checkPass()){var a=this.model.getPostData();this.block();var b=this;t.put(bootstrap.restUrl+"deploy/firstDay/createFromWizard",{data:JSON.stringify(a),headers:{"Content-Type":"application/json"},handleAs:"json"}).then(function(a){b.selectedChildWidget.content._onHide&&b.selectedChildWidget.content._onHide();
b.unblock();b._cancel();b.destroy();sessionSharedData||(sessionSharedData={});sessionSharedData.wizardAlertsData=a.alerts;navBar.setHash("application/"+a.id);a=new G({name:"wn"});a.open(!0);l.curNode&&l.curNode.blur();l.focus(a.domNode)},function(a){b.unblock();var c="An unknown error has occurred";if(a.response&&a.response.text)c=a.response.text;(new v({message:util.escape(c)})).startup()})}},newPane:function(a){var b=this;k.mixin(a,{style:"height: 530px",onShow:function(){k.isFunction(this.content._onShow)&&
this.content._onShow()},onHide:function(){k.isFunction(this.content._onHide)&&this.content._onHide()},passFunction:function(){var a=this.content.validate();return b.interpretValidationResult(a)}});a=new u(a);a.placeAt(this);this.addedPanes.push(a);return a},_forward:function(){this.selectedChildWidget._checkPass()&&this.model.set("selectedPageIndex",this.model.selectedPageIndex+1)},back:function(){this.model.set("selectedPageIndex",this.model.selectedPageIndex-1)},_checkButtons:function(){this.inherited(arguments);
var a=this.selectedChildWidget;if(a){var b=a.isLastChild;a.doneFunction?this.highlightButton(this.doneButton,"idxButtonSpecial"):b||this.highlightButton(this.nextButton,"idxButtonSpecial")}},_cancel:function(){this.model=new y({});if(sessionSharedData&&sessionSharedData.wizardData)sessionSharedData.wizardData=void 0;this.destroy();b.set("first-day-wizard","display","none");b.set("fdw-welcome","display","")},interpretValidationResult:function(a){switch(typeof a){case "boolean":return a;case "string":return v({message:util.escape(a)}),
!1;case "object":return"[object Array]"===Object.prototype.toString.call(a)?0<a.length?(a=a.map(function(a){return util.escape(a)}),v({messages:a}),!1):!0:!1}}})})},"deploy/widgets/firstDayWizard/WizardModel":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/Stateful,dojo/store/Memory,dojo/store/Observable,deploy/widgets/firstDayWizard/DataModel,deploy/widgets/firstDayWizard/ApplicationModel".split(","),function(l,m,k,j,e,h,d,c){return l([d],{PageIds:{CreateApplication:0,
CreateTemplateBasedApplication:1,AddOrCreateComponents:2,AddOrCreateTemplatedBasedComponents:3,DefineProcesses:4,CreateEnvironments:5,CreateTemplateBasedEnvironment:6,AgentMapping:7},PageNameById:{"0":"About Applications",1:"About Applications",2:"Specify Components",3:"Specify Components",4:"Define Processes",5:"Create Environments",6:"Create Environments",7:"Mapping Components to Agents"},props:{sequenceNum:void 0,pageIds:void 0,pre_selectedPageIndex:void 0,selectedPageIndex:void 0,furthestEnabledPageIndex:void 0,
application:void 0,components:void 0,selectedComponent:void 0,processes:void 0,processDesigns:void 0,selectedObjForProcess:void 0,selectedProcess:void 0,environments:void 0,selectedEnvironment:void 0,agentMapping:void 0,agentsTotal:void 0,pre_addAComponent:void 0,pre_selectAComponent:void 0,pre_addAProcess:void 0,pre_selectAProcess:void 0,pre_selectAComponentAnchor:void 0,pre_selectAnApplicationAnchor:void 0,pre_addAnEnvironment:void 0,pre_selectAnEnvironment:void 0,pre_setComponentName:void 0,pre_setProcessName:void 0,
pre_setEnvironmentName:void 0,processDesignerSaveBtnState:"disabled"},getUniqId:function(){return this.sequenceNum+=1},addObj:function(b,a,c,e,h){var j=b+"s";"process"===b&&(j="processes");var k=this.getUniqId(),l;if("component"===b)l=new d({props:{id:k,useVfs:!0,template:a}});else if("process"===b){a={id:k,useDesigner:!0,parentObjId:e,parentObjType:h};if("component"===h)a.defaultWorkingDir="${p:resource/work.dir}/${p:component.name}";l=new d({props:a})}else"environment"===b&&(l=new d({props:{id:k,
color:"#00B2EF",template:a,expanded:!1,children:[]}}));this[j].put(l);c&&this.setSelectedObj(b,l);return l},removeObj:function(b,a){var c=b+"s";"process"===b&&(c="processes");this[c].remove(a.id)},setSelectedObj:function(b,a){var c=b+"s";"process"===b&&(c="processes");this[c].query().forEach(function(b){a.id===b.id?b.set("selected",!0):b.set("selected",!1)})},getSelectedObj:function(b){var a=b+"s";"process"===b&&(a="processes");return(b=this[a].query({selected:!0}))&&0<b.length?b[0]:null},getObjById:function(b,
a){var c=b+"s";"process"===b&&(c="processes");return this[c].get(a)},getFirstComponent:function(){var b;0<this.components.query().length&&(b=this.components.query()[0]);return b},getComponentProcesses:function(b){return this.processes.query().filter(function(a){return"component"===a.parentObjType&&a.parentObjId===b.id})},getAllComponentProcesses:function(){return this.processes.query().filter(function(b){return"component"===b.parentObjType})},getAllApplicationProcesses:function(){return this.processes.query().filter(function(b){return"application"===
b.parentObjType})},getComponentsForApplicationProcessNav:function(){var b=[];this.components.query().forEach(function(a){a=_.clone(a);a.hasChildren=!0;a.type="folder";b.push(a)});return b},getComponentProcessesForDesigner:function(b){var a=[];this.processes.query().filter(function(c){if("component"===c.parentObjType&&c.parentObjId===b.id&&!c.props.takesVersion)c=_.clone(c),c.type="componentProcess",c.component=b,a.push(c)});return a},isEveryComponentHasAProcess:function(){var b=!0,a;for(a=0;a<this.components.query().length;a++){var c=
this.getComponentProcesses(this.components.query()[a]);if(!c||0===c.length){b=!1;break}}return b},unSelectAllObjs:function(b){var a=b+"s";"process"===b&&(a="processes");this[a].query({selected:!0}).forEach(function(a){a.set("selected",!1)})},saveProcessDesign:function(b,a,c){if(!this.processDesigns)this.processDesigns=[];c.parentObjType=b;c.parentObjId=a.id;(b=this.getProcessDesign(b,a))?this.processDesigns[this.processDesigns.indexOf(b)]=c:this.processDesigns.push(c)},getProcessDesign:function(b,
a){var c,d=k.filter(this.processDesigns,function(c){return c.parentObjType===b&&c.parentObjId===a.id});0<d.length&&(c=d[0]);return c},removeProcessDesign:function(b){b=this.processDesigns.indexOf(b);-1<b&&this.processDesigns.splice(b,1)},getPostData:function(){return{application:this.applicationSerializer(),components:this.getComponentsPostData(),componentProcesses:this.componentProcessesSerializer(),componentProcessDesigns:this.componentProcessDesignsSerializer(),applicationProcesses:this.applicationProcessesSerializer(),
applicationProcessDesigns:this.applicationProcessDesignsSerializer(),environments:this.environmentsSerializer(),agentMapping:{}}},applicationDeserializer:function(b){var a=new c({});a.deserialize(b);this.set("application",a)},applicationSerializer:function(){var b="";this.application&&(b=this.application.serialize());return b},componentsDeserializer:function(b){this.set("components",new h(new e({data:b.map(function(a){return new d({props:a})})})))},componentsSerializer:function(){var b=[];this.components&&
this.components.query().forEach(function(a){b.push(a.serialize())});return b},getComponentsPostData:function(){var b=[];this.components&&this.components.query().forEach(function(a){a=a.serialize();delete a.existingId;b.push(a)});return b},processesDeserializer:function(b){this.set("processes",new h(new e({data:b.map(function(a){return new d({props:a})})})))},processesSerializer:function(){var b=[];this.processes&&this.processes.query().forEach(function(a){b.push(a.serialize())});return b},componentProcessesSerializer:function(){var b=
[];this.processes.query().forEach(function(a){"component"===a.parentObjType&&b.push(a.serialize())});return b},applicationProcessesSerializer:function(){var b=[];this.processes.query().forEach(function(a){"application"===a.parentObjType&&b.push(a.serialize())});return b},processDesignsDeserializer:function(b){this.set("processDesigns",b)},processDesignsSerializer:function(){return this.processDesigns},componentProcessDesignsSerializer:function(){var b=[];k.forEach(this.processDesigns,function(a){"component"===
a.parentObjType&&b.push(a)});return b},applicationProcessDesignsSerializer:function(){var b=[];k.forEach(this.processDesigns,function(a){"application"===a.parentObjType&&b.push(a)});return b},environmentsDeserializer:function(b){this.set("environments",new h(new e({data:b.map(function(a){return new d({props:a})})})))},environmentsSerializer:function(){var b=[];this.environments&&this.environments.query().forEach(function(a){b.push(a.serialize())});return b}})})},"deploy/widgets/firstDayWizard/ApplicationModel":function(){define(["dojo/_base/declare",
"dojo/Stateful","dojo/store/Memory","dojo/store/Observable","deploy/widgets/firstDayWizard/DataModel"],function(l,m,k,j,e){return l([e],{props:{name:void 0,description:void 0}})})},"deploy/widgets/firstDayWizard/CreateApplicationPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,dojo/Deferred,dojo/store/Memory,dojo/store/Observable,dojo/query,dojo/dom-style,dojo/dom-class,dojo/dom-construct,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/TooltipTitle,js/webext/widgets/ColumnForm,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return j([m,l,k],{templateString:'<div class="fdw-application-page">    <div class="fdw-info-column">        <div class="fdw-info-text">            <div class="fdw-info-title">'+i18n("About Applications")+'</div>            <br/>            <div data-dojo-attach-point="text1Attach" class="fdw-info-content"></div>            <br/><br/>            <div data-dojo-attach-point="text2Attach" class="fdw-info-content">              <div class="fdw-emphasis2">'+
i18n("In this step:")+"</div>              <ul><li>"+i18n("Specify basic information about the application.")+'</li></ul>            </div>        </div>    </div>    <div class="fdw-control-form-column">        <div data-dojo-attach-point="formAttach" id="fdw-application-form"></div>    </div></div>',duplicateNameError:i18n("The application name you entered already exists. Application names must be unique."),postCreate:function(){this.inherited(arguments);r.place("<div>"+i18n("In UrbanCode Deploy, applications are containers for components that are deployed together. Applications also include processes that deploy and change those components and environments that host the running components.")+
"</div>",this.text1Attach);this.isNameValid=!0},showForm:function(){var a=this;r.empty(this.formAttach);this.appForm=new o({showButtons:!1});this.appForm.placeAt(this.formAttach);this.appForm.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.model.application?this.model.application.name:"",onChange:function(b){b&&a._validateName(b).then(function(c){Boolean(c.result)?(a.isNameValid=!0,a.model.application.set("name",b)):(a.isNameValid=!1,new s({messages:["","",util.escape(i18n("An application with this name already exists. Application Name: %s",
b))]}))})}});this.appForm.addField({name:"description",label:i18n("Description"),type:"Text",value:this.model.application?this.model.application.description:"",onChange:function(b){a.model.application.set("description",b)}});this.model.application&&this.model.application.name&&this._validateName(this.model.application.name).then(function(){a.isNameValid=!0},function(){a.isNameValid=!1})},_onShow:function(){this.showForm();t.boldLabelsOfRequiredFields()},_validateName:function(a){var a=bootstrap.restUrl+
"deploy/firstDay/isValidName/APPLICATION/"+encodeURIComponent(a),b=new d;h.get({url:a,handleAs:"json",load:function(a){b.resolve(a)},error:function(a){b.reject(a)}});return b},validate:function(){var a=this.appForm.validateRequired();0===a.length&&(this.isNameValid||(a=[this.duplicateNameError]));return a}})})},"deploy/widgets/firstDayWizard/CreateEnvironmentsPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/_Container,dojo/_base/declare,dojo/_base/array,dojo/store/Memory,dojo/store/Observable,dojo/query,dojo/dom-style,dojo/dom-class,dojo/dom-construct,deploy/widgets/firstDayWizard/FirstDayWizardUtil,deploy/widgets/TooltipTitle,deploy/widgets/environment/EditEnvironment,deploy/widgets/firstDayWizard/Controls,deploy/widgets/firstDayWizard/EnvironmentListEntry,deploy/widgets/ModelWidgetList,js/webext/widgets/Alert,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u){return j([m,l,k],{templateString:'<div class="fdw-CreateEnvironments-page">    <div class="fdw-info-column">        <div class="fdw-info-text">            <div class="fdw-info-title">'+i18n("Create Environments")+'</div>            <br/>            <div data-dojo-attach-point="text1Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text2Attach" class="fdw-info-content"></div>            <br/>            <div data-dojo-attach-point="text3Attach" class="fdw-info-content">              <div class="fdw-emphasis2">'+
i18n("In this step:")+"</div>              <ul>              <li>"+i18n("Define the environments to which this application deploys component artifacts.")+" ("+i18n("In this wizard, you cannot create more environments than the number of available agents.")+')</li>              </ul>            </div>        </div>    </div>    <div class="fdw-control-form-column">        <div class="fdw-control-column">            <div data-dojo-attach-point="controlAttach" class="fdw-control-row"></div>            <div data-dojo-attach-point="listAttach" class="fdw-list-column"></div>        </div>        <div data-dojo-attach-point="formAttach" class="fdw-form-column">        </div>    </div></div>',
duplicateNameError:i18n("The environment name you entered already exists. Environment names must be unique."),zeroEnvironmentError:i18n("You must create at least one environment before you continue."),tooManyEnvironmentsError:i18n("The number of environments cannot exceed the number of agents."),postCreate:function(){this.inherited(arguments);f.place("<div>"+i18n("Environments host a deployed copy of components. Each environment includes hosting resources, such as one or more servers. You specify the resources for each environment on the next page.")+
"</div>",this.text1Attach);f.place("<div>"+i18n('In most cases, you start with development "sandbox" environments. Then, when you have a working version of an application, you take a snapshot of the application and move it to testing and production environments. You can base environment names on who has access to them or what work each environment does, such as "development," "test," and "production."')+"</div>",this.text2Attach);(new q({model:this.model,objType:"environment",templateBased:!1})).placeAt(this.controlAttach);
var a=this;this.model.environments.query().observe(function(b,c,d){if(-1!==d)a.selectedEnvironment=b,a._setWatch(b),a._refreshForm();if(0===a.model.environments.query({selected:!0}).length)a.selectedEnvironment=null,a._refreshForm()});this.model.environments.query().forEach(function(b){a._setWatch(b)});this.model.watch("pre_addAnEnvironment",function(b,c,d){if(d)a.model.pre_addAnEnvironment=!1,a._validateEnvironment()&&(a._saveEnvironment(),void 0!==a.model.agentsTotal&&a.model.environments.query().length<
a.model.agentsTotal?a.model.addObj("environment",null,!0):new u({messages:[a.tooManyEnvironmentsError]}))});this.model.watch("pre_selectAnEnvironment",function(b,c,d){if(d)a.model.pre_selectAnEnvironment=!1,a._validateEnvironment()&&(a._saveEnvironment(),a.model.setSelectedObj("environment",d))});(new s({model:this.model.environments,widgetFactory:function(b){return new o({environment:b,onSelected:function(b){a.model.set("pre_selectAnEnvironment",b)}})}})).placeAt(this.listAttach);this.model.watch("pre_setEnvironmentName",
function(b,c,d){if(d)a.model.pre_setEnvironmentName=void 0,(b=a._validateName(d.environment,d.newName))?(d.environment.hasInvalidName=!0,new u({messages:["","",util.escape(b)]})):(d.environment.hasInvalidName&&delete d.environment.hasInvalidName,d.environment.set("name",d.newName))});if(this.model.selectedEnvironment)this.selectedEnvironment=this.model.selectedEnvironment,this._refreshForm()},_setWatch:function(a){var b=this;a.watch("selected",function(c,d,e){if(!0===e)b.selectedEnvironment=a,b._refreshForm()})},
_refreshForm:function(){f.empty(this.formAttach);this.form=void 0;if(this.selectedEnvironment)this.form=(new t({mode:"firstDayWizard",application:this.model.application,environment:this.selectedEnvironment,firstDayWizardModel:this.model})).placeAt(this.formAttach),n.boldLabelsOfRequiredFields()},_validateEnvironment:function(){var a=!0;if(this.selectedEnvironment){var b=this.form.form.getData(),c=this.form.form.validateRequired();c.concat(this.form.form.validateFields(b));0<c.length&&(c=c.map(function(a){return util.escape(a)}),
u({messages:c}),a=!1)}return a},_saveEnvironment:function(){if(this.selectedEnvironment){var a=this,b=this.form.form.getData();e.forEach(Object.keys(b),function(c){a.selectedEnvironment.props[c]=b[c];a.selectedEnvironment[c]=b[c]})}},_validateName:function(a,b){var c;if(0<e.filter(this.model.environments.query(),function(c){if(a.id!==c.id)return c.name===b}).length)c=this.duplicateNameError;return c},save:function(){if(this.selectedEnvironment)this._saveEnvironment(),this.model.selectedEnvironment=
this.selectedEnvironment},validate:function(){if(this.selectedEnvironment){if(this.selectedEnvironment.hasInvalidName)return u({messages:[this.duplicateNameError]}),!1;if(!this._validateEnvironment())return!1;this._saveEnvironment()}return 1>this.model.environments.query().length?(u({messages:[this.zeroEnvironmentError]}),!1):!0}})})},"deploy/widgets/firstDayWizard/EnvironmentListEntry":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/on,js/webext/widgets/color/Color".split(","),
function(l,m,k,j,e,h,d,c,b,a){return j([m,l],{templateString:'<div data-dojo-attach-point="environmentEntryAttach" class="entry">  <span>    <div class="inlineBlock general-icon environmentIcon"></div>    <span data-dojo-attach-point="nameAttach" class="name-container"></span>  </span></div>',onSelected:null,postCreate:function(){var a=this;this.inherited(arguments);this._reflectName(this.environment.get("name"));this.environment.watch("name",function(b,c,d){a._reflectName(d)});this._reflectColor(this.environment.get("color"));
this.environment.watch("color",function(b,c,d){a._reflectColor(d)});this._reflectSelected(this.environment.get("selected"));this.environment.watch("selected",function(b,c,d){a._reflectSelected(d)});b(this,"click",this._onSelected)},_onSelected:function(){if(this.onSelected)this.onSelected(this.environment)},_reflectName:function(a){this.nameAttach.textContent=i18n(a)},_reflectColor:function(b){b=a.getColorOrConvert(b);!b.standard&&b.fallback&&(b=a.getColor(b.fallback));c.set(this.environmentEntryAttach,
"borderLeftWidth","thick");c.set(this.environmentEntryAttach,"borderLeftStyle","solid");c.set(this.environmentEntryAttach,"borderLeftColor",b.value)},_reflectHasRequiredProperties:function(){var a=this;this.requiredPropertiesAttach.style.display="none";this.environment.get("props").query().some(function(b){if(!0===b.get("propDef").required)a.requiredPropertiesAttach.style.display="",d.remove(a.nameContainerAttach,"full-length"),d.add(a.nameContainerAttach,"partial-length");return!0===b.required});
this._reflectValidation()},_reflectValidation:function(){var a=this,b=!1,b=this.component.get("props").query().some(function(b){if(""!==b.error)return d.remove(a.propStatusIconAttach,"complete"),d.add(a.propStatusIconAttach,"empty"),!0});!1===b&&(d.remove(this.propStatusIconAttach,"empty"),d.add(this.propStatusIconAttach,"complete"))},_reflectSelected:function(a){!0===a?d.add(this.environmentEntryAttach,"selected"):d.remove(this.environmentEntryAttach,"selected")}})})},"deploy/widgets/firstDayWizard/WhatsNextPopup":function(){define("dojo/_base/declare,dojo/request/xhr,dijit/_WidgetBase,dojo/on,dojo/dom-class,dojo/dom-construct,dijit/focus,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c){return l("deploy.widgets.firstDayWizard.WhatsNextPopup",[k],{name:void 0,postCreate:function(){this.createDialog()},createDialog:function(){var b=this;this.wnDialog=new c({className:"whats-next-popup"});var a=h.create("div",{className:"close-popup-button",title:i18n("Close")},this.wnDialog.titleNode);j(a,"click",function(){b.close()});h.create("div",{innerHTML:'<h1 class="title">'+i18n("What's Next?")+'</h1><br><br><div class="content"><span>'+i18n("Congratulations on completing an application in UrbanCode Deploy!")+
"</span><br><br><span>"+i18n("Before you run this application, you may want to undertake these actions:")+"</span><br><br><ul><li>"+i18n("Bring the importing and target agents online. ")+'<a class="linkPointer" href="'+config.docLinks.howToRunAgentUrl+'" target="_blank">'+i18n("Starting agents")+"</a></li><br><li>"+i18n("Wait for component versions to be transferred.  You can check the status of import on the Components tab. ")+"</li><br><li>"+i18n("Set any required properties on environments or components. ")+
'<a class="linkPointer" href="'+config.docLinks.propertiesOverviewUrl+'" target="_blank">'+i18n("Properties")+"</a></li><br><li>"+i18n("Finishing the process designs for the components and application. ")+'<a class="linkPointer" href="'+config.docLinks.howToDesignWorkflowUrl+'" target="_blank">'+i18n("Processes")+"</a></li><br><li>"+i18n("Set up teams and configure security for the new application, environments, and components that you created. ")+'<a class="linkPointer" href="'+config.docLinks.howToSetupRolesAndPermissionsUrl+
'" target="_blank">'+i18n("Roles and permissions")+'</a> <a class="linkPointer" href="'+config.docLinks.howToSetupTeamSecurityUrl+'" target="_blank">'+i18n("Security teams")+"</a></li><br><li>"+i18n("For best results and the most up-to-date artifact availability, configure your build integration tools to push artifacts to the UrbanCode Deploy server. For Example: ")+'<a class="linkPointer" href="'+config.docLinks.jenkinsIntegrationUrl+'" target="_blank">'+i18n("Integrating Jenkins and IBM UrbanCode Deploy")+
'</a></li><br><div class="message">'+i18n("Access this at anytime from the banner help menu")+"</div></div>"},this.wnDialog.containerNode)},a11yClick:function(b){if("click"===b.type||"keypress"===b.type&&(b=b.charCode||b.keyCode,32===b||13===b))return!0;return!1},open:function(){this.wnDialog&&this.wnDialog.show()},close:function(){this.wnDialog&&this.wnDialog.hide()}})})},"deploy/widgets/deploymentRequest/DeploymentRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/approval/ApprovalRevocationDialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b){return k("deploy.widgets.deploymentRequest.DeploymentRequestHistory",[m,l],{templateString:'<div class="deploymentRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=[{name:i18n("Process"),formatter:function(a){a.applicationProcess.application=a.application;return d.applicationProcessLinkFormatter(a.applicationProcess)}},{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(a){return util.dateFormatShort(a.entry.scheduledDate)},
orderField:"calendarEntry.scheduledDate"},{name:i18n("By"),field:"userName"},{name:i18n("Status"),formatter:function(a,b,c){return d.requestStatusFormatter(a,b,c)}},{name:i18n("Actions"),formatter:function(a){var b=document.createElement("div"),c=document.createElement("a");c.className="actionsLink";c.innerHTML=i18n("View Request");c.href="#applicationProcessRequest/"+a.id;b.appendChild(c);return b}}];this.grid=new b({url:bootstrap.restUrl+"deploy/applicationProcessRequest/table",baseFilters:[{name:"deploymentRequest.id",
type:"eq",className:"UUID",values:[this.deploymentRequest.id]}],columns:a,orderField:"calendarEntry.scheduledDate",sortType:"desc",pageOptions:[5,10,25,50,100,250],rowsPerPage:5,tableConfigKey:"deploymentRequestHistory"+this.deploymentRequest.id,noDataMessage:i18n("No process history found."),hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/deploymentRequest/RequestChanges":function(){define(["dijit/_TemplatedMixin",
"dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.deploymentRequest.RequestChanges",[m,l],{templateString:'<div class="requestChanges" style="width: 700px"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:"&nbsp;",orderField:"changeType",getRawValue:function(d){return d.type},style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center",
width:"20px"},formatter:function(d){var c=document.createElement("img");c.src="ADDED"===d.type?bootstrap.webextUrl+"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";return c}},{name:i18n("Environment"),orderField:"environment",getRawValue:function(d){var c=null;if(d=d.deploymentRequest.rootRequest.environment)c=d.name;return c},formatter:function(d){return j.environmentLinkFormatter(d.deploymentRequest.rootRequest.environment)}},{name:i18n("Snapshot"),orderField:"snapshot",
getRawValue:function(d){var c=null;if(d=d.deploymentRequest.rootRequest.snapshot)c=d.name;return c},formatter:function(d){return j.snapshotLinkFormatter(d.deploymentRequest.rootRequest.snapshot)}},{name:i18n("Component"),orderField:"component",getRawValue:function(d){var c=null;if(d=d.deploymentRequest.rootRequest.component)c=d.name;return c},formatter:function(d){return j.componentLinkFormatter(d.deploymentRequest.rootRequest.component)}},{name:i18n("Version"),orderField:"version",getRawValue:function(d){var c=
null;if(d=d.deploymentRequest.rootRequest.version)c=d.name;return c},formatter:function(d){return j.versionLinkFormatter(d.deploymentRequest.rootRequest.version)}}];this.grid=new e({url:bootstrap.restUrl+"deploy/deploymentRequest/"+appState.deploymentRequest.id+"/changes",serverSideProcessing:!1,hidePagination:!0,hideExpandCollapse:!0,columns:h,tableConfigKey:"deploymentRequestChange",noDataMessage:i18n("No changes found.")});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()},typeFormatter:function(e){var d="";"INSTALL"===e.type?d=i18n("Installed"):"UNINSTALL"===e.type&&(d=i18n("Uninstalled"));return d}})})},"deploy/widgets/deploymentRequest/NoncompliancyByVersion":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable","deploy/widgets/Formatters"],function(l,m,k,j,e){return k("deploy.widgets.deploymentRequest.NoncompliancyByVersion",[m,l],{templateString:'<div class="noncompliancyByVersion"><div data-dojo-attach-point="treeAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Component/Resource"),formatter:function(d){return d.version?e.componentLinkFormatter(d.version.component):d.security.read?util.getOnClickLink("resource/"+d.id,d.name):d.name.escape()},getRawValue:function(d){return d.name},field:"name"},{name:i18n("Version"),formatter:function(d){if(d.version)return e.versionLinkFormatter(d.version)}},{name:i18n("# Resources Missing"),formatter:function(d){var c;if(d.version)c=d.children.length;return c}}];
this.tree=new j({url:bootstrap.restUrl+"deploy/deploymentRequest/"+appState.deploymentRequest.id+"/noncompliancyByVersion",columns:h,serverSideProcessing:!1,orderField:"name",tableConfigKey:"versionNoncompliancyList"});this.tree.placeAt(this.treeAttach)},destroy:function(){this.inherited(arguments);this.tree.destroy()}})})},"deploy/widgets/deploymentRequest/NoncompliancyByResource":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable",
"deploy/widgets/Formatters"],function(l,m,k,j,e){return k("deploy.widgets.deploymentRequest.NoncompliancyByResource",[m,l],{templateString:'<div class="noncompliancyByResource"><div data-dojo-attach-point="treeAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=[{name:i18n("Resource/Component"),formatter:function(d){return d.version?e.componentLinkFormatter(d.version.component):d.security.read?util.getOnClickLink("resource/"+d.id,d.name):d.name.escape()},getRawValue:function(d){return d.name},
field:"name"},{name:i18n("Version"),formatter:function(d){if(d.version)return e.versionLinkFormatter(d.version)}},{name:i18n("# Versions Missing"),formatter:function(d){var c;if(void 0===d.version)c=d.children.length;return c}}];this.tree=new j({url:bootstrap.restUrl+"deploy/environment/"+appState.environment.id+"/noncompliantResources",columns:h,serverSideProcessing:!1,orderField:"name",tableConfigKey:"resourceNoncompliancyList"});this.tree.placeAt(this.treeAttach)},destroy:function(){this.inherited(arguments);
this.tree.destroy()}})})},"deploy/widgets/deploymentRequest/RequestResourceChanges":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.deploymentRequest.RequestResourceChanges",[m,l],{templateString:'<div class="requestResourceChanges" style="width: 700px"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=
[{name:"&nbsp;",orderField:"changeType",getRawValue:function(d){return d.type},style:{paddingTop:"2px",paddingBottom:"3px",textAlign:"center",width:"20px"},formatter:function(d){var c=document.createElement("img");c.src="ADDED"===d.type?bootstrap.webextUrl+"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";return c}},{name:i18n("Resource"),orderField:"resource",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.resource)c=d.name;return c},formatter:function(d){return j.resourcePathFormatter(d.resourceInventoryEntry.resource)}},
{name:i18n("Component"),orderField:"component",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.component)c=d.name;return c},formatter:function(d){return j.componentLinkFormatter(d.resourceInventoryEntry.component)}},{name:i18n("Version"),orderField:"version",getRawValue:function(d){var c=null;if(d=d.resourceInventoryEntry.version)c=d.name;return c},formatter:function(d){return j.versionLinkFormatter(d.resourceInventoryEntry.version)}},{name:i18n("Date"),orderField:"date",getRawValue:function(d){return new Date(d.resourceInventoryEntry.date)},
formatter:function(d){return util.tableDateFormatter(d,d.resourceInventoryEntry.date)}}];this.grid=new e({url:bootstrap.restUrl+"deploy/deploymentRequest/"+appState.deploymentRequest.id+"/resourceChanges",serverSideProcessing:!1,hidePagination:!0,hideExpandCollapse:!0,columns:h,tableConfigKey:"deploymentRequestResourceChange",noDataMessage:i18n("No changes found.")});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},typeFormatter:function(e){var d=
"";"INSTALL"===e.type?d=i18n("Installed"):"UNINSTALL"===e.type&&(d=i18n("Uninstalled"));return d}})})},"deploy/widgets/deploymentRequest/DeploymentRequestCompliancy":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-class,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h){return k("deploy.widgets.deploymentRequest.DeploymentRequestCompliancy",[m,l],{templateString:'<div class="deploymentRequestCompliancy"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var d=[{name:i18n("Component"),formatter:function(c){return e.componentLinkFormatter(c.component)}},{name:i18n("Version"),formatter:function(c){return e.versionLinkFormatter(c.version)}},{name:i18n("Date"),field:"date",formatter:util.tableDateFormatter},{name:i18n("Status"),formatter:function(c,b,a){return e.statusFormatter(c.status,b,a)}},{name:i18n("Compliancy"),field:"status",style:{textAlign:"center"},formatter:function(c,b,a){b="";b=c.compliancy.desiredCount;
c=c.compliancy.correctCount;b===c?(b=i18n("Compliant (%s/%s)",""+c,""+b),j.add(a,"success-state-color")):(b=i18n("Noncompliant (%s/%s)",""+c,""+b),j.add(a,"failed-state-color"));return b}}];this.grid=new h({url:bootstrap.restUrl+"deploy/environment/"+this.deploymentRequest.rootRequest.environment.id+"/latestDesiredInventory/true",columns:d,hideExpandCollapse:!0,hidePagination:!1,orderField:"dateCreated",sortType:"desc",tableConfigKey:"compliancyInventoryList",noDataMessage:i18n("No desired inventory entries have been created for this deployment.")});
this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/settings/SettingsIndex":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/xhr,dojo/_base/fx,dojo/_base/declare,dojo/dom-construct,dojo/dom-class,dojo/on,deploy/widgets/log/LiveLogViewer,deploy/widgets/settings/CleanupProgressBar,js/webext/widgets/Link".split(","),function(l,m,k,j,e,h,d,c,b,a,f){return e("deploy.widgets.settings.SettingsIndex",[m,l],{templateString:'<div class="settings-index">  <div data-dojo-attach-point="settingsAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var a=this;(function(){var b=h.create("div",{className:"category inline-block"},a.settingsAttach),b=h.create("div",{className:"category-wrapper"},b),c=h.create("div",{className:"category-label"},b);h.create("div",{className:"inline-block",innerHTML:i18n("Automation")},c);b=h.create("div",{className:"category-links"},b);b.appendChild(a.createLink("#automation/automationPlugins",i18n("Automation Plugins"),"automated-plugins"));b.appendChild(a.createLink("#automation/sourceConfigPlugins",
i18n("Source Configuration Plugins"),"source-config-plugins"));b.appendChild(a.createLink("#automation/runningSourceConfigs",i18n("Running Version Imports"),"running-source-configs"));config.data.permissions[security.system.viewLocks]&&b.appendChild(a.createLink("#automation/locks",i18n("Locks"),"locks"));config.data.permissions[security.system.manageBlueprintDesignIntegrations]&&b.appendChild(a.createLink("#automation/blueprintdesignerIntegrations",i18n("Blueprint Designer Integrations"),"blueprint-designer-integrations"));
b.appendChild(a.createLink("#automation/postProcessingScripts",i18n("Post Processing Scripts"),"post-processing-scripts"));b.appendChild(a.createLink("#automation/statuses",i18n("Statuses"),"statuses"))})();this.generateSecurityLinks();(function(){h.create("div",{className:"category-divider inline-block"},a.settingsAttach);var b=h.create("div",{className:"category inline-block"},a.settingsAttach),b=h.create("div",{className:"category-wrapper"},b),d=h.create("div",{className:"category-label"},b);h.create("div",
{className:"inline-block",innerHTML:i18n("System")},d);d=h.create("div",{className:"category-links"},b);config.data.permissions[security.system.manageLogging]&&d.appendChild(a.createLink("#system/logging",i18n("Logging"),"logging"));config.data.permissions[security.system.viewNetworkSettings]&&d.appendChild(a.createLink("#system/network",i18n("Network"),"network"));d.appendChild(a.createLink("#system/notification",i18n("Notification Schemes"),"notification-schemes"));if(config.data.permissions[security.system.viewOutputLog]){var e=
h.create("div",{"class":"link-container"},d),j=new f({label:'<div class="settings-icon output-log-icon"></div><div class="inner-link-text">'+i18n("Output Log")+"</div>"});c(j,"click",function(){a.showLogViewer(bootstrap.restUrl+"logView/serverOut",i18n("Output Log"))});j.placeAt(e);util.createDownloadAnchor({href:bootstrap.restUrl+"logView/serverOut?fileDownload=true",className:"output-log-download-link"},e).innerHTML=i18n("(Download)")}config.data.permissions[security.system.viewAuditLog]&&d.appendChild(a.createLink("#system/auditLog",
i18n("Audit Log"),"audit-log"));config.data.permissions[security.system.manageDiagnostics]&&(e=a.createLink("#diagnostics",i18n("Diagnostics"),"diagnostics"),util.createDownloadAnchor({href:bootstrap.restUrl+"system/configuration/diagnosticsFile",className:"output-log-download-link",innerHTML:i18n("(Download)")},e),d.appendChild(e));d.appendChild(a.createLink("#system/patches",i18n("Patches"),"patches"));d.appendChild(a.createLink("#system/properties",i18n("Properties"),"properties"));d.appendChild(a.createLink("#system/artifactRepo",
i18n("CodeStation"),"artifact-repo"));config.data.permissions[security.system.viewBasicSystemSettings]&&d.appendChild(a.createLink("#system/settings",i18n("System Settings"),"system-settings-item"));b.appendChild(d)})();this.addProgressBar()},showLogViewer:function(a,c){(new b({url:a,title:c,autoRefresh:!1})).show()},generateSecurityLinks:function(){var a=config.data.permissions[security.system.manageSecurity],b=config.data.permissions[security.system.manageAuthTokenRestrictions];if(a||b){h.create("div",
{className:"category-divider inline-block"},this.settingsAttach);var c=h.create("div",{className:"category inline-block"},this.settingsAttach),c=h.create("div",{className:"category-wrapper"},c),e=h.create("div",{className:"category-label"},c);h.create("div",{className:"inline-block",innerHTML:i18n("Security")},e);e=h.create("div",{className:"category-links"},c);a&&(e.appendChild(this.createLink("#security/keys",i18n("API Keys And Certificates"),"key-configuration")),e.appendChild(this.createLink("#security/authentication",
i18n("Authentication (Users)"),"authentication")),e.appendChild(this.createLink("#security/authorization",i18n("Authorization (Groups)"),"authorization")),e.appendChild(this.createLink("#security/teams",i18n("Teams"),"teams")),e.appendChild(this.createLink("#security/tokens",i18n("Tokens"),"tokens")));b&&e.appendChild(this.createLink("#security/authTokenRestrictions",i18n("Token Restrictions"),"locks"));a&&(e.appendChild(this.createLink("#security/roles",i18n("Role Configuration"),"role-configuration")),
e.appendChild(this.createLink("#security/types",i18n("Type Configuration"),"type-configuration")));c.appendChild(e);d.add(this.domNode,"all-settings")}},createLink:function(a,b,c){var d=h.create("div",{className:"link-container"}),a=h.create("a",{href:a},d);c&&h.create("div",{className:"settings-icon "+c+"-icon"},a);h.create("div",{className:"inner-link-text",innerHTML:b},a);return d},addProgressBar:function(){this._cleanupProgressBar=new a({show:function(){j.animateProperty({node:this.progressBar,
properties:{bottom:0},duration:800}).play()},hide:function(){j.animateProperty({node:this.progressBar,properties:{bottom:-60},duration:800}).play()}});this._cleanupProgressBar.placeAt(this.settingsAttach);this._cleanupProgressBar.showProgress()}})})},"deploy/widgets/settings/CleanupProgressBar":function(){define(["dojo/_base/declare","js/webext/widgets/ProgressBar","deploy/util/TimeUtil"],function(l,m,k){return l([m],{_cleanupCountCommonTitle:i18n("Daily Deployment History Cleanup in Progress")+"  -  ",
_cleanupRecordsRemovedTitle:i18n("deployment records removed."),_cleanupTotalRecordsTitle:i18n("total historical deployment records."),postCreate:function(){this.inherited(arguments);this.setLabel(i18n("Daily Deployment History Cleanup in Progress"));this.setProgressDetailsLabel(i18n("deployment records removed"))},updateCleanupProgress:function(j,e,h){h=k.formatToHrsAndMinsString(h);""!==h&&(h=h+" "+i18n("remaining"));this.showProgressDetailsTimeInfo&&this.setProgressDetailsTimeInfo(h);this.setProgressCount(j);
this.setTitleForProgressCount(this._cleanupCountCommonTitle+j+" "+this._cleanupRecordsRemovedTitle+" "+h);this.setTotalCount(e);this.setTitleForTotalCount(this._cleanupCountCommonTitle+e+" "+this._cleanupTotalRecordsTitle+" "+h);this.setProgressPercent(100*j/e)},updateProgress:function(){var j=this;this.getProgress("/rest/historyCleanupRecord/latest").then(function(e){if(null===e||e.dateCleanupFinished)j.hide();else{var h=(new Date).getTime()-e.dateCleanupStarted;j.updateCleanupProgress(e.deploymentsDeleted,
e.totalDeploymentsForCleanup,36E5*e.historyCleanupDuration-h);j.show()}},function(e){j.setCleanupError(e)})},showProgress:function(){var j=this;this.updateProgress();this._cleanupProgressIntervalId=setInterval(function(){j.updateProgress()},3E4)},destroy:function(){clearInterval(this._cleanupProgressIntervalId)}})})},"js/webext/widgets/ProgressBar":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/xhr,dojo/_base/declare,dojo/_base/fx,dojo/dom-construct,dojo/dom-style,dojo/dom-attr,dojo/Deferred".split(","),
function(l,m,k,j,e,h,d,c,b){return j([m,l],{templateString:'<div class="webext progressBar" data-dojo-attach-point="progressBar"><div class="caption"> <span data-dojo-attach-point="label" class="label"> </span><span data-dojo-attach-point="progressDetailsProgressCount" class="progressDetailsProgressCount"> </span>&nbsp<span data-dojo-attach-point="progressDetailsOutOfLabel" class="progressDetailsOutOfLabel"> </span>&nbsp<span data-dojo-attach-point="progressDetailsTotalCount" class="progressDetailsTotalCount"> </span>&nbsp<span data-dojo-attach-point="progressDetailsLabel" class="progressDetailsLabel"> </span><span data-dojo-attach-point="progressDetailsTimeInfo" class="progressDetailsTimeInfo"> </span></div><div data-dojo-attach-point="progressIndicator" class="progressIndicator"><div data-dojo-attach-point="progressIndicatorFill" class="progressIndicatorFill"> </div></div></div>',
showProgressDetailsTimeInfo:!0,postCreate:function(){this.inherited(arguments);this.progressDetailsOutOfLabel.innerHTML=i18n("of")},setProgressDetailsLabel:function(a){this.progressDetailsLabel.innerHTML=a},setProgressDetailsTimeInfo:function(a){this.progressDetailsTimeInfo.innerHTML=a},setProgressCount:function(a){this.progressDetailsProgressCount.innerHTML=a},setTitleForProgressCount:function(a){c.set(this.progressIndicatorFill,"title",a)},setTotalCount:function(a){this.progressDetailsTotalCount.innerHTML=
a},setTitleForTotalCount:function(a){c.set(this.progressIndicator,"title",a)},setProgressPercent:function(a){d.set(this.progressIndicatorFill,"width",a+"%")},setCleanupError:function(){},setLabel:function(a){this.label.innerHTML=a},show:function(){e.fadeIn({node:this.progressBar,duration:2E3}).play()},hide:function(){e.fadeOut({node:this.progressBar,duration:2E3}).play()},disableProgressDetailsTimeInfo:function(a){this.showProgressDetailsTimeInfo=a?!1:!0},getProgress:function(a){var c=new b;k.get({url:a,
handleAs:"json",load:function(a){c.resolve(a)},error:function(a){c.reject(a)}});return c}})})},"js/webext/widgets/Link":function(){define("dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/array,dojox/html/entities,dojo/dom-class,dojo/text!./Link.html,dojo/dom,dojo/on,dojo/keys,dojo/dom-style,dojo/window,dojo/has,dijit/a11y,js/util/blocker/_BlockerMixin,dojo/_base/sniff".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return l([j,e,s],{templateString:b,
_setIdAttr:"focusNode",href:"",target:"",iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},"class":"link",_setClassAttr:{node:"focusNode",type:"class"},_setStyleAttr:[{node:"focusNode",type:"attribute"},{node:"containerNode",type:"attribute"}],label:"",showLabel:!0,disabled:!1,tabIndex:"0",_setTabIndexAttr:"focusNode",scrollOnFocus:!0,noBubble:!1,postCreate:function(){var a=this;a.inherited(arguments);var b=function(b){if(b){var c=/.{1,50}/g,d=50<b.length;q("chrome")&&(c=/.{1,30}/g,
d=30<b.length);if(b&&d)b=b.match(c),a.title=b.join("\u200b");a.titleNode.title=a.title}};a.watch("title",function(a,c,d){b(d)});b(a.title);a._enterListener=a._setupEnterToDoClick(a.focusNode)},destroy:function(){this._enterListener.remove();this.inherited(arguments)},_fillContent:function(a){if(a&&(!this.params||void 0===this.params.label))if(a=k.trim(a.innerHTML))this.label=a},_setHrefAttr:function(a){this.inherited(arguments);this._set("href",a);if(a)this.focusNode.href=a},_setTargetAttr:function(a){this.inherited(arguments);
this._set("target",a);a?this.focusNode.setAttribute("target",a):this.focusNode.removeAttribute("target")},_setLabelTextAttr:function(a){this.inherited(arguments);this.set("label",d.encode(a))},_setLabelAttr:function(a){this.inherited(arguments);this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;if(!this.showLabel&&!this.title)this.titleNode.title=k.trim(this.containerNode.innerText||this.containerNode.textContent||""),this.titleNode.title&&this.disabled&&(this.titleNode.title+=
" (disabled)")},_setShowLabelAttr:function(a){this.containerNode&&c.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},_setDisabledAttr:function(a){this._set("disabled",a);if(this.titleNode.title)this.titleNode.title=a?this.titleNode.title.replace(/( \(disabled\))?$/," (disabled)"):this.titleNode.title.replace(/ \(disabled\)$/,"");c.toggle(this.focusNode,"disabled",a);c.toggle(this.iconNode,this.iconClass+"Disabled",a);this.focusNode.setAttribute("aria-disabled",a?"true":"false");
a?(a=this._firstNonUndefined(this.attributeMap.tabIndex,this._setTabIndexAttr,"focusNode"),k.isArray(a)||(a=[a]),h.forEach(a,function(a){a=this[a];q("webkit")||o.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!==this.tabIndex&&this.set("tabIndex",this.tabIndex)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!==r.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},
onClick:function(){},_onFocus:function(){this.scrollOnFocus&&this.defer(function(){t.scrollIntoView(this.domNode)});this.inherited(arguments)},_onClick:function(a){if(this.disabled)a.preventDefault(),a.stopPropagation();else this.onClick();this.noBubble&&a.stopPropagation();return!this.disabled},_firstNonUndefined:function(){var a=null;h.some(arguments,function(b){void 0!==b&&(a=b);return void 0!==b});return a},defer:function(a,b){var c=m.global,d=c.setTimeout(k.hitch(this,function(){d=null;this._destroyed||
k.hitch(this,a)()}),b||0);return{remove:function(){d&&(c.clearTimeout(d),d=null);return null}}},_setupEnterToDoClick:function(a){return f(a,"keyup",function(a){if((a.charCode||a.keyCode)===n.ENTER)m.doc.createEvent?(a=m.doc.createEvent("HTMLEvents"),a.initEvent("click",!0,!0),this.dispatchEvent(a)):this.fireEvent&&this.fireEvent("onclick")})}})})},"url:js/webext/widgets/Link.html":'<div role="presentation" class="dijitInline">\n    <span class="dijitReset dijitInline"\n      data-dojo-attach-event="ondijitclick:_onClick" role="presentation">\n        <a class="dijitStretch"\n          data-dojo-attach-point="titleNode,focusNode"\n          role="navigation" aria-labelledby="${id}_label">\n            <span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span><\!--\n            --\><span class="dijitReset dijitInline"\n              id="${id}_label" style="text-decoration:inherit; color:inherit"\n              data-dojo-attach-point="containerNode"></span>\n        </a>\n    </span>\n</div>',
"deploy/widgets/settings/SystemSettings":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/_base/fx,dijit/form/Button,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/on,dojo/query,dojo/store/Memory,js/util/blocker/BlockingContainer,js/webext/widgets/select/WebextSelect,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/FormDelegates,js/webext/widgets/DomNode,js/webext/widgets/RestSelect,deploy/widgets/settings/CleanupProgressBar,deploy/widgets/settings/DraftProcessCreationProgressBar,deploy/widgets/settings/AuditLogSettings".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C){return j("deploy.widgets.settings.SystemSettings",[m,l],{templateString:'<div class="systemSettings">  <div data-dojo-attach-point="formAttach"></div>  <div data-dojo-attach-point="buttonAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.existingValues={};if(this.version)this.existingValues=this.version;e.get({url:bootstrap.restUrl+"system/configuration",handleAs:"json",load:function(b){a.loadForm(b)}})},loadForm:function(e){var f=
this,h=new s({addData:function(a){if(a.historyCleanupTimeOfDay)a.historyCleanupHour=a.historyCleanupTimeOfDay.getHours(),a.historyCleanupMinute=a.historyCleanupTimeOfDay.getMinutes();if(a.auditLogCleanupTimeOfDay)a.auditLogCleanupHour=a.auditLogCleanupTimeOfDay.getHours(),a.auditLogCleanupMinute=a.auditLogCleanupTimeOfDay.getMinutes();if(!1===a.safeEditEnabled)a.requireProcessPromotionApproval=!1},cancelLabel:null,submitUrl:bootstrap.restUrl+"system/configuration",postSubmit:function(){location.reload(!0)},
validateFields:function(a){var b=[],c=parseInt(a.repoAutoIntegrationPeriod,10);isNaN(c)?b.push(i18n("The automatic version import check period must be an integer.")):1>c?b.push(i18n("The automatic version import check period must be at least 1 second.")):a.repoAutoIntegrationPeriod=c;1E3<a.messageOfTheDay.length&&b.push(i18n("The message of the day cannot exceed 1000 characters."));c=parseInt(a.discoveryExpiry,10);isNaN(c)?b.push(i18n("The discovery auth token expiration must be an integer.")):300>
c?b.push(i18n("The discovery auth token expiration must be at least 300 seconds.")):a.discoveryExpiry=c;c=parseInt(a.configureExpiry,10);isNaN(c)?b.push(i18n("The configure auth token expiration must be an integer.")):300>c?b.push(i18n("The configure auth token expiration must be at least 300 seconds.")):a.configureExpiry=c;c=parseInt(a.importExpiry,10);isNaN(c)?b.push(i18n("The import auth token expiration must be an integer.")):300>c?b.push(i18n("The import auth token expiration must be at least 300 seconds.")):
a.importExpiry=c;c=parseInt(a.pluginStepExpiry,10);isNaN(c)?b.push(i18n("The plugin step auth token expiration must be an integer.")):300>c?b.push(i18n("The plugin step auth token expiration must be at least 300 seconds.")):a.pluginStepExpiry=c;c=parseInt(a.deployMailPort,10);isNaN(c)?b.push(i18n("The mail server port number must be an integer.")):a.deployMailPort=c;c=parseInt(a.cleanupHourOfDay,10);isNaN(c)?b.push(i18n("The cleanup hour must be an integer.")):0>c||23<c?b.push(i18n("The cleanup hour of day must be an integer between 0 (midnight) and 23 (11 PM).")):
a.cleanupHourOfDay=c;c=parseInt(a.snapshotDaysToKeep,10);isNaN(c)?b.push(i18n("The application snapshot cleanup days to keep must be an integer.")):-1>c||0===c?b.push(i18n("The application snapshot cleanup days to keep must be -1 or greater than 0.")):a.snapshotDaysToKeep=c;c=parseInt(a.cleanupDaysToKeep,10);isNaN(c)?b.push(i18n("The component version cleanup days to keep must be an integer.")):-1>c||0===c?b.push(i18n("The component version cleanup days to keep must be -1 or greater than 0.")):a.cleanupDaysToKeep=
c;c=parseInt(a.cleanupCountToKeep,10);isNaN(c)?b.push(i18n("The cleanup version count to keep must be an integer.")):-1>c||0===c?b.push(i18n("The cleanup version count to keep must be -1 or greater than 0.")):a.cleanupCountToKeep=c;this.hasField("historyCleanupTimeOfDay")&&(/^([1-9]|1[0-9]|2[0-3])$/.test(a.historyCleanupDuration)||b.push(i18n("The history cleanup duration must be an integer between 1 hour and 23 hours (inclusive).")),/^[0-9]+$/.test(a.historyCleanupDaysToKeep)||b.push(i18n("The history cleanup days to keep must be an integer, 0 or greater.")));
if(null===a.winRSAgent||""===a.winRSAgent)a.winRSAgent="NONE";return b},readOnly:!config.data.permissions[security.system.editBasicSystemSettings]});f.addField=function(a){var d=h.addField(a);if(d&&d.widget.fieldRow){var e=d.widget.fieldRow;a.className&&b.add(e,a.className);"SectionLabel"===a.type&&b.add(e,"section-label-row");("Select"===a.type||"FilteringSelect"===a.type)&&b.add(e,"select-widget-row");("Text"===a.type||"Secure"===a.type)&&b.add(e,"text-widget-row");"Switch"===a.type&&b.add(e,"switch-widget-row");
a.icon&&c.create("div",{className:"inline-block settings-icon general-settings-section-header "+a.icon+"-icon"},d.widget.domAttach,"first")}return d};var j=c.create("div",{className:"form-container"},h.formAttach,"first"),k=c.create("div",{className:"settings-column inline-block"},j),j=c.create("div",{className:"settings-column inline-block"},j),l=c.create("div",{className:"inline-block settings-section"},k),l=c.create("div",{className:"settings-section-inner general-settings"},l);f.addField({type:"SectionLabel",
value:i18n("General Settings"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"general-settings"});f.addField({name:"externalURL",label:i18n("External Agent URL"),description:i18n("URL for agents to request information from the %s server.",bootstrap.productName),value:e.externalURL,required:!0,type:"Text",textDir:"ltr",bidiDynamicSTT:"URL",attachPoint:l});f.addField({name:"externalUserURL",label:i18n("External User URL"),description:i18n("URL for users to access the %s web UI.",bootstrap.productName),
value:e.externalUserURL,required:!0,type:"Text",bidiDynamicSTT:"URL",textDir:"ltr",attachPoint:l});f.addField({name:"messageOfTheDay",label:i18n("Message of the Day"),description:i18n("This message will be displayed on user login or user navigation within web UI."),value:e.messageOfTheDay,type:"Text Area",style:{minWidth:"290px",height:"32px",padding:"2px",font:"inherit"},attachPoint:l});f.addField({name:"validateAgentIp",label:i18n("Validate Agent IP"),description:i18n("This setting enables validation of agent IPs and hostnames. The first time an agent connects, its IP and hostname will be saved. In subsequent connections, if either has changed, the agent will be prevented from coming online."),
value:e.validateAgentIp,type:"Switch",attachPoint:l});f.addField({name:"skipCollectPropertiesForExistingAgents",label:i18n("Skip Property Updates for Existing Agents"),description:i18n("If this is set, agent properties will not be updated when an existing agent reconnects to the server. This means agent properties may become stale, but allows large numbers of agents to come online more quickly at server startup."),value:e.skipCollectPropertiesForExistingAgents,type:"Switch",attachPoint:l});f.addField({name:"enableUIDebugging",
label:i18n("Enable UI Debugging"),description:i18n("This option will change how UI resources are loaded so that it is easier to debug problems with the UI. Enabling this option will reduce UI performance."),value:e.enableUIDebugging,type:"Switch",color:"orange",attachPoint:l});f.addField({name:"isCreateDefaultChildren",label:i18n("Create Default Children for Plugins"),description:i18n("When this option is enabled, empty groups are created when plugins use the auto discovery feature."),value:e.isCreateDefaultChildren,
type:"Switch",attachPoint:l});var o=new v({restUrl:bootstrap.restUrl+"security/userPreferences/availableLocales",getLabel:function(a){return a.displayName},getValue:function(a){return a.value},allowNone:!1,value:e.defaultLocale,escapeHTMLLabel:!1,attachPoint:l,disabled:h.readOnly});f.addField({name:"defaultLocale",label:i18n("Default Locale"),description:i18n("This value is only used when the user has not set a locale in preferences and when the browser has set no accept-language."),required:!0,widget:o,
attachPoint:l});f.addField({name:"defaultSnapshotLockType",label:i18n("Default Snapshot Lock Type"),description:i18n("The default snapshot locking mode for environments which have specified to lock snapshots."),required:!0,value:e.defaultSnapshotLockType,type:"Select",className:"default-snapshot-dropdown",allowedValues:[{label:i18n("Component Versions and Configuration"),value:"ALL"},{label:i18n("Only Component Versions"),value:"VERSIONS"},{label:i18n("Only Configuration"),value:"CONFIGURATION"}],
attachPoint:l});f.addField({name:"requireCommentForProcessChanges",label:i18n("Require a Comment For Process Design Changes"),description:i18n("When this option is enabled, the user must provide a comment when saving changes to any process design."),value:e.requireCommentForProcessChanges,type:"Switch",attachPoint:l});f.loadFormComponentSettingFields(h,k,e);l=c.create("div",{className:"inline-block settings-section"},k);l=c.create("div",{className:"settings-section-inner win-rs-agent-install"},l);
f.addField({type:"SectionLabel",value:i18n("WinRS Agent Install Settings"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"winrs-agent-install"});f.addWinRSAgentField(h,e.winRSAgent,l);l=c.create("div",{className:"inline-block settings-section"},k);l=c.create("div",{className:"settings-section-inner mail-server-settings"},l);f.addField({type:"SectionLabel",value:i18n("Mail Server Settings"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"mail-server"});f.addField({name:"deployMailHost",
label:i18n("Mail Server Host"),description:i18n("Hostname of the mail server for notifications. Leave this blank to disable notifications."),value:e.deployMailHost,required:!1,type:"Text",textDir:"ltr",bidiDynamicSTT:"URL",attachPoint:l});f.addField({name:"deployMailPort",label:i18n("Mail Server Port"),description:i18n("SMTP port for email notifications."),value:e.deployMailPort,required:!1,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"deployMailSecure",label:i18n("Secure Mail Server Connection"),
description:i18n("Whether the SMTP connection should be secured or not."),value:e.deployMailSecure,required:!1,type:"Switch",attachPoint:l});f.addField({name:"deployMailSender",label:i18n("Mail Server Sender Address"),description:i18n('Address to use for the "from" address for email notifications.'),value:e.deployMailSender,required:!1,type:"Text",textDir:"ltr",bidiDynamicSTT:"URL",attachPoint:l});f.addField({name:"deployMailUsername",label:i18n("Mail Server Username"),description:i18n("Username to use for sending email notifications."),
value:e.deployMailUsername,required:!1,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"deployMailPassword",label:i18n("Mail Server Password"),description:i18n("Password to use for sending email notifications."),value:e.deployMailPassword,required:!1,type:"Secure",attachPoint:l});l=c.create("div",{className:"inline-block settings-section"},j);l=c.create("div",{className:"settings-section-inner artifact-cleanup-settings"},l);f.addField({type:"SectionLabel",value:i18n("Artifact Cleanup"),
style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"artifact-cleanup"});f.addField({name:"cleanupHourOfDay",label:i18n("Daily Cleanup Start Time"),description:i18n("The hour to start the component version cleanup.   This value must be an integer between 0 (midnight) and 23 (11 PM)."),value:e.cleanupHourOfDay,required:!0,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"snapshotDaysToKeep",label:i18n("Default Application Snapshot Retention (days)"),description:i18n("The number of days to retain snapshots. Snapshots are always kept if they are the most recently deployed snapshot in an environment. Each environment can override this setting and retain snapshots longer. In this case, a snapshot is not archived until no environment retains the snapshot. If no environment is retaining the snapshot and the snapshot is older than the number of days in this setting, the server archives the snapshot. To retain all snapshots indefinitely, enter -1."),
value:e.snapshotDaysToKeep,required:!0,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"cleanupDaysToKeep",label:i18n("Default Component Version Retention (days)"),description:i18n("The number of days to retain component versions. To retain component versions indefinitely, enter -1."),value:e.cleanupDaysToKeep,required:!0,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"cleanupCountToKeep",label:i18n("Default Number of Versions to Retain"),description:i18n("The number of versions to retain for each component.  To retain all versions of a component, enter -1."),
value:e.cleanupCountToKeep,required:!0,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"cleanupArchivePath",label:i18n("Archive Path"),description:i18n("Path to write a zip containing the artifacts of each version cleaned up. If this is blank, archives will not be written."),value:e.cleanupArchivePath,required:!1,type:"Text",bidiDynamicSTT:"FILE_PATH",attachPoint:l});o=new d({label:i18n("Preview Version Cleanup"),showTitle:!1,onClick:function(){f.showCleanupPreview(e.cleanupHourOfDay)},
disabled:h.readOnly});f.addField({name:"_cleanupPreview",label:"",widget:o,attachPoint:l});var l=c.create("div",{className:"inline-block settings-section"},j),l=c.create("div",{className:"settings-section-inner artifact-cleanup-settings"},l),m=f.addField({type:"SectionLabel",value:i18n("Deployment History Cleanup"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"artifact-cleanup"}).widget.fieldRow;a.set(m,"position","relative");o=n(".labelsAndValues-valueCell",m);m=c.create("div",{className:"progressBarContainer"},
m,"last");a.set(m,"overflow","hidden");f.addProgressBar(m,o);o=f.addField({name:"historyCleanupEnabled",label:i18n("Enable Deployment History Cleanup"),description:i18n("Turn on this setting to enable deployment history cleanup. If enabled, deployment history records are deleted according to the values that you set."),value:e.historyCleanupEnabled,type:"Switch",attachPoint:l});m=new Date;m.setHours(e.historyCleanupHour);m.setMinutes(e.historyCleanupMinute);var q=f.addField({name:"historyCleanupTimeOfDay",
label:i18n("Daily Cleanup Start Time"),description:i18n("The hour to start the daily deployment history cleanup."),value:m,required:!0,type:"Time",attachPoint:l});b.add(q.widget.fieldRow,"historyCleanupTimePicker");var r=f.addField({name:"historyCleanupDuration",label:i18n("Daily Cleanup Duration (hours)"),description:i18n("The maximum number of hours per day that the cleanup process runs."),value:e.historyCleanupDuration,required:!0,type:"Text",textDir:"ltr",attachPoint:l}),t=f.addField({name:"historyCleanupDaysToKeep",
label:i18n("Days to Retain Deployment History"),description:i18n("The default number of days to retain application deployment history on environments,  if the number of days is not specified directly in the environment settings. Valid range is 0 or greater."),value:e.historyCleanupDaysToKeep,required:!0,type:"Text",textDir:"ltr",attachPoint:l}),l=function(a){q.widget.set("disabled",!a);r.widget.set("disabled",!a);t.widget.set("disabled",!a)};o.widget.onChange=l;l(e.historyCleanupEnabled);l=config.data.permissions[security.system.editBasicSystemSettings]&&
config.data.permissions[security.system.manageAuditLog];e.auditLogCleanupEnabled=!h.readOnly&&e.auditLogCleanupEnabled;(new C({columnForm:f,formData:e,readOnly:h.readOnly||!l})).placeAt(j);l=c.create("div",{className:"inline-block settings-section"},j);l=c.create("div",{className:"settings-section-inner security-settings"},l);f.securitySettings=l;f.addField({type:"SectionLabel",value:i18n("Security"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:l,icon:"security-general-settings"});f.addField({name:"minimumPasswordLength",
label:i18n("Minimum Password Length"),description:i18n("The minimum length of passwords allowed to be created."),value:e.minimumPasswordLength,required:!0,type:"Text",textDir:"ltr",attachPoint:l});f.addField({name:"requireComplexPasswords",label:i18n("Require Complex Passwords"),description:i18n("This will make new passwords created through the ui or CLI to be validated that the password is complex. To pass validation, it must use 2 of the 4 character classes: upper, lower,digits, and special. It must still be as long or longer than the password minimum length."),
value:e.requireComplexPasswords,type:"Switch",attachPoint:l});f.addField({name:"discoveryExpiry",label:i18n("Discovery Auth Token Expiration Delay(seconds)"),description:i18n("Delay in seconds for auth tokens create for Auto Discovery Steps to expire. Must be 300 seconds or more."),value:e.discoveryExpiry,type:"Text",attachPoint:l});f.addField({name:"configureExpiry",label:i18n("Configure Auth Token Expiration Delay(seconds)"),description:i18n("Delay in seconds for auth tokens create for Auto Configure Steps to expire. Must be 300 seconds or more."),
value:e.configureExpiry,type:"Text",attachPoint:l});f.addField({name:"importExpiry",label:i18n("Version Import Auth Token Expiration Delay(seconds)"),description:i18n("Delay in seconds for auth tokens create for Version Import Steps to expire. Must be 300 seconds or more."),value:e.importExpiry,type:"Text",attachPoint:l});f.addField({name:"pluginStepExpiry",label:i18n("Plugin Step Auth Token Expiration Delay(seconds)"),description:i18n("Delay in seconds for auth tokens created for Plugin Steps to expire. Must be 300 seconds or more."),
value:e.pluginStepExpiry,type:"Text",attachPoint:l});f.addField({name:"useDefaultATRIfNotSpecified",label:i18n("Use Default Auth Token Restriction if not specified"),description:i18n("Use the default auth token restriction for plug-in steps in older process versions that do not specify an auth token restriction."),value:e.useDefaultATRIfNotSpecified,type:"Switch",attachPoint:l});k=c.create("div",{className:"inline-block settings-section"},k);k=c.create("div",{className:"settings-section-inner legacy-configuration-options"},
k);f.addField({type:"SectionLabel",value:i18n("Legacy Configuration Options"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:k,icon:"legacy-configuration"});f.addField({name:"enableInactiveLinks",label:i18n('Enable "Show Inactive" Links'),description:i18n("If checked, links under lists of objects which formerly supported inactivation will show to allow users to display inactive objects."),value:e.enableInactiveLinks,type:"Switch",attachPoint:k});f.addField({name:"enablePromptOnUse",label:i18n('Enable "Prompt On Use"'),
description:i18n('If checked, the option to set "Prompt On Use" for properties in workflow steps will be displayed.'),value:e.enablePromptOnUse,type:"Switch",attachPoint:k});f.addField({name:"enableAllowFailure",label:i18n('Enable "Allow Failure"'),description:i18n('If checked, the option to set "Allow Failure" on steps in a workflow will be displayed.'),value:e.enableAllowFailure,type:"Switch",attachPoint:k});f.addField({name:"failProcessesWithUnresolvedProperties",label:i18n("Fail Processes With Unresolved Properties"),
description:i18n("If this is enabled, any running process which comes across a property it cannot resolve will automatically fail."),value:e.failProcessesWithUnresolvedProperties,type:"Switch",attachPoint:k});f.addField({name:"envCompPropsOverrideEnvProps",label:i18n("Component Environment Properties Override Environment Properties"),description:i18n("If this is enabled, component environment properties will override environment properties when using ${p:propName} notation as opposed to ${p:environment/propName}."),
value:e.envCompPropsOverrideEnvProps,type:"Switch",attachPoint:k});this.addLicensingSection(j,e,h)},loadFormComponentSettingFields:function(b,d,f){var h=this,d=c.create("div",{className:"inline-block settings-section"},d),j=new t;j.placeAt(d);var k=c.create("div",{className:"settings-section-inner general-settings"},j.domNode),l=h.addField({type:"SectionLabel",value:i18n("Component Settings"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:k,icon:"general-settings"}).widget.fieldRow;a.set(l,
"position","relative");d=n(".labelsAndValues-valueCell",l);l=c.create("div",{className:"progressBarContainer"},l,"last");a.set(l,"overflow","hidden");a.set(l,"display","none");void 0!==f.safeEditEnabled&&h.addSafeEditEnableProgressBar(l,d);h.addField({name:"copyToCodestation",label:i18n("Components Copy to CodeStation by Default"),description:i18n('When this option is enabled, components will have the "Copy to CodeStation" property enabled by default.'),value:f.copyToCodestation,type:"Switch",attachPoint:k});
h.addField({name:"enforceDeployedVersionIntegrity",label:i18n("Enforce Deployed Version Integrity"),description:i18n("When this option is enabled, versions which have been involved in a deployment cannot have new properties added or have their artifacts altered; such as adding version files using the CLI client."),value:f.enforceDeployedVersionIntegrity,type:"Switch",attachPoint:k});h.addField({name:"repoAutoIntegrationPeriod",label:i18n("Automatic Version Import Check Period (seconds)"),description:i18n("The number of seconds between polls for new versions for all components with this option turned on. Requires a server restart to take effect. It is not recommend to set this to less than 15."),
value:f.repoAutoIntegrationPeriod,required:!0,type:"Text",textDir:"ltr",attachPoint:k});d=void 0!==f.integrationTag;h.addField({name:"useTagForIntegration",label:i18n("Use Agent Tag For Integration"),description:i18n("Use an agent tag to specify a group of agents to run version imports on instead of using a specific agent"),type:"Switch",value:d,onChange:function(a){a?(h.removeIntegrationAgentField(),h.addIntegrationTagField(b,f.integrationTag,k)):(h.removeIntegrationTagField(),h.addIntegrationAgentField(b,
f.artifactAgent,f.artifactAgentName,k))},attachPoint:k});d?h.addIntegrationTagField(b,f.integrationTag,k):h.addIntegrationAgentField(b,f.artifactAgent,f.artifactAgentName,k);void 0!==f.safeEditEnabled&&(j.block(),e.get({url:bootstrap.restUrl+"deploy/componentProcess/draftCreationProgress",handleAs:"json",load:function(a){j.unblock();h.addField({name:"safeEditEnabled",label:i18n("Enable Safe Edit of Component Processes"),description:i18n("When this option is enabled, users will need to update draft processes and promote them to allow them to be able to be deployed to high level environments"),
value:f.safeEditEnabled,type:"Switch",attachPoint:k,onChange:function(a){h.removeComponentProcessPromotionField();h.addComponentProcessPromotionField(k,f,!a)},readOnly:0!==a.unupgraded});h.addComponentProcessPromotionField(k,f,!f.safeEditEnabled)}}))},showCleanupPreview:function(a){var b=c.create("div",{style:{overflowY:"auto",maxHeight:"200px",maxWidth:"350px",paddingRight:"30px"}}),d=new Date,a=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1,a,0,0,0);c.create("div",{innerHTML:i18n("The following versions will be archived next time cleanup is run at %s local server time, according to the configuration of the system, each component, and each environment.<br><br>If you have changed the settings on this page, you'll need to save before those changes are reflected on this list.",
util.timeOnlyFormat(a.getTime())),style:{marginBottom:"10px"}},b);new o({title:i18n("Version Cleanup Preview"),messageDom:b});c.create("span",{innerHTML:i18n("Component to Preview:"),className:"inlineBlock",style:{marginRight:"8px",fontWeight:"bold"}},b);a=(new u).getDelegate("FilteringSelect")({url:bootstrap.restUrl+"deploy/component"});a.placeAt(b);var h=c.create("div",{style:{"margin-top":"10px","margin-bottom":"8px"}},b);f(a,"change",function(a){c.empty(h);a&&(c.create("div",{innerHTML:i18n("Loading...")},
h),e.get({url:bootstrap.restUrl+"cleanup/archivableVersions/"+a,handleAs:"json",load:function(a){c.empty(h);0===a.length?c.create("div",{innerHTML:i18n("No versions found to archive."),style:{fontWeight:"bold"}},h):(c.create("div",{innerHTML:i18n("Versions to archive:"),style:{fontWeight:"bold"}},h),k.forEach(a,function(a){c.create("div",{innerHTML:i18n("%s (Created %s)",a.name.escape(),util.dateFormatShort(a.created)),style:{paddingLeft:"60px"}},h)}))},error:function(a){new o({messages:[i18n("Error getting cleanup preview:"),
"",util.escape(a.responseText)]})}}))})},addIntegrationAgentField:function(a,b,c,d){this.integrationAgentField=this.addField({name:"artifactAgent",label:i18n("Agent for Version Imports"),description:i18n("The name of the agent to run source configuration steps on."),type:"TableFilterSelect",url:bootstrap.restUrl+"agent",placeHolder:c,defaultQuery:{filterFields:"requiredActions",filterType_requiredActions:"eq",filterValue_requiredActions:security.agent.manageVersionImports},value:b,attachPoint:d}).widget.fieldRow},
addComponentProcessPromotionField:function(a,b,c){this.componentProcessPromotionField=this.addField({name:"requireProcessPromotionApproval",label:i18n("Require Approval to Promote Component Process"),description:i18n("When this option is enabled, any draft component process must be approved by an authorized user before it can be promoted and used in deployments."),value:c?!1:b.requireProcessPromotionApproval,type:"Switch",attachPoint:a,readOnly:c}).widget.fieldRow},addWinRSAgentField:function(a,b,
c){this.addField({name:"winRSAgent",label:i18n("WinRS Agent"),description:i18n("The name of the agent to use for running agent installation processes on Windows machines. This agent must be installed on a Windows machine."),type:"TableFilterSelect",url:bootstrap.restUrl+"agent",defaultQuery:{filterFields:"requiredActions",filterType_requiredActions:"eq",filterValue_requiredActions:security.general.editBasicSettings},value:b,allowNone:!0,attachPoint:c})},addIntegrationTagField:function(a,b,c){var d=
[];e.get({url:bootstrap.restUrl+"tag/type/Agent",sync:!0,handleAs:"json",load:function(a){d=a}});a=new r({data:d,idProperty:"name"});b=new q({store:a,searchAttr:"name",value:b,noDataMessage:i18n("No tags found."),autoComplete:!1,selectOnClick:!0,pageSize:"10"});this.integrationTagField=this.addField({name:"integrationTag",label:i18n("Agent Tag for version imports"),widget:b,description:i18n("The tag to use for Version Imports on this component"),attachPoint:c}).widget.fieldRow},removeIntegrationAgentField:function(){c.destroy(this.integrationAgentField)},
removeComponentProcessPromotionField:function(){c.destroy(this.componentProcessPromotionField)},removeIntegrationTagField:function(){c.destroy(this.integrationTagField)},addProgressBar:function(b,c){var d=this;this._cleanupProgressBar=new x({show:function(){c.style("width","40%");c.style("float","left");a.set(b,"display","inherit");h.animateProperty({node:d._cleanupProgressBar.progressBar,properties:{right:{end:0,units:"%"}},duration:800}).play()},hide:function(){h.animateProperty({node:d._cleanupProgressBar.progressBar,
properties:{right:{end:-100,units:"%"}},duration:800,onEnd:function(){c.style("width","100%");c.style("float","none");a.set(b,"display","none")}}).play()}});this._cleanupProgressBar.disableProgressDetailsTimeInfo(!0);this._cleanupProgressBar.setLabel(i18n("Drafts being created")+" - ");this._cleanupProgressBar.placeAt(b);this._cleanupProgressBar.showProgress()},addSafeEditEnableProgressBar:function(b,c){var d=this;this._draftProcessCreationProgressBar=new y({show:function(){c.style("width","40%");
c.style("float","left");a.set(b,"display","inherit");h.animateProperty({node:d._draftProcessCreationProgressBar.progressBar,properties:{right:{end:0,units:"%"}},duration:800}).play()},hide:function(){h.animateProperty({node:d._draftProcessCreationProgressBar.progressBar,properties:{right:{end:-100,units:"%"}},duration:800,onEnd:function(){c.style("width","100%");c.style("float","none");a.set(b,"display","none")}}).play()}});this._draftProcessCreationProgressBar.disableProgressDetailsTimeInfo(!0);
this._draftProcessCreationProgressBar.setLabel(i18n("Draft Creation in Progress")+" - ");this._draftProcessCreationProgressBar.placeAt(b);this._draftProcessCreationProgressBar.showProgress()},addLicensingSection:function(a,b,d){var e=this.addField,f=this.formAttach,a=c.create("div",{className:"inline-block settings-section"},a),a=c.create("div",{className:"settings-section-inner licensing-settings"},a);e({type:"SectionLabel",value:i18n("Licensing"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:a,
icon:"licensing"});e({name:"agentAutoLicense",label:i18n("Automatic Agent Licensing"),description:i18n("When this box is checked, the server will attempt to license any Agents coming online with Authorized licenses."),value:b.agentAutoLicense,type:"Switch",readOnly:!b.serverLicense.agentAuthLicense,attachPoint:a});"ibm"===b.vendorName?this.addIbmVendorLicensingSection(a,b,d):this.addHclVendorLicensingSection(a,b);d.placeAt(f)},addHclVendorLicensingSection:function(a,b){var c=this.addField;c({name:"licenseServerUrl",
label:i18n("FlexNet Server Path"),description:i18n("Path to Flexera FlexNet license server. Typically this is a HTTPS URL."),value:b.licenseServerUrl,type:"Text",bidiDynamicSTT:"EMAIL",attachPoint:a})},addIbmVendorLicensingSection:function(a,b,c){var e=this.addField;e({name:"serverLicenseType",label:i18n("Server License Type"),description:i18n("This is automatically determined based on information obtained by the RCL server. Session: Agents will consume floating licenses when used in deployments. Agent Server: Agents will be licensed as soon as they connect the the server and will hold their licenses until they are deleted. Agents can be assigned a permanent license on the Agents tab. Managed Capacity: PVU-based licensing. No License: The license type could not be determined, check your connection to the RCL server."),
value:b.serverLicenseType,type:"Text",readOnly:!0,textDir:"ltr",attachPoint:a});e({name:"licenseServerUrl",label:i18n("RCL Server Path"),description:i18n("Path to Rational Licensing Server. A list of paths must be separated by colons on *nix systems and semicolons on Windows systems. Note: A server restart will be required when changing between RCL servers. Format: port@hostname"),value:b.licenseServerUrl,type:"Text",bidiDynamicSTT:"EMAIL",attachPoint:a});b=new d({label:i18n("Download License Log"),
showTitle:!1,onClick:function(){util.downloadFile(bootstrap.restUrl+"license/log")},disabled:c.readOnly});e({name:"downloadLicenseButton",label:"",widget:b,attachPoint:a})}})})},"deploy/widgets/settings/DraftProcessCreationProgressBar":function(){define(["dojo/_base/declare","dojo/dom-style","js/webext/widgets/ProgressBar"],function(l,m,k){return l([k],{postCreate:function(){this.inherited(arguments);this.setProgressDetailsLabel(i18n("Drafts Created"))},updateDraftCreationProgress:function(j,e){this.setProgressCount(j);
this.setTotalCount(e);this.setTitleForTotalCount("Draft Process Creation in Progress");this.setProgressPercent(100*j/e)},updateProgress:function(){var j=this;this.getProgress("/rest/deploy/componentProcess/draftCreationProgress").then(function(e){null===e||e.complete?j.hide():(j.updateDraftCreationProgress(e.upgraded,e.total,e.unupgraded),j.show())},function(e){j.setCleanupError(e)})},showProgress:function(){var j=this;this.updateProgress();this._draftCreationProgressIntervalId=setInterval(function(){j.updateProgress()},
3E4)},destroy:function(){clearInterval(this._draftCreationProgressIntervalId)}})})},"deploy/widgets/settings/AuditLogSettings":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","dojo/dom-construct","dojo/dom-class"],function(l,m,k,j,e){return k("deploy.widgets.settings.AuditLogSettings",[m,l],{templateString:'<div data-dojo-attach-point="attachPoint"></div>',postCreate:function(){this.inherited(arguments);var h=j.create("div",{className:"inline-block settings-section"},
this.attachPoint),h=j.create("div",{className:"settings-section-inner"},h),d=this.columnForm.addField({value:i18n("Audit Log"),style:{fontWeight:"bold",marginTop:"15px"},attachPoint:h,type:"SectionLabel"});e.add(d.widget.fieldRow,"section-label-row");j.create("div",{className:"inline-block settings-icon general-settings-section-header general-settings-icon"},d.widget.domAttach,"first");d=this.columnForm.addField({name:"auditLogReadEntriesEnabled",label:i18n("Enable Audit Log Entries for Read Events"),
description:i18n("When this option is disabled, no READ events will be recorded in the audit log."),value:this.formData.auditLogReadEntriesEnabled,type:"Switch",attachPoint:h,readOnly:this.readOnly});e.add(d.widget.fieldRow,"switch-widget-row");var d=this.columnForm.addField({name:"auditLogCleanupEnabled",label:i18n("Enable Audit Log Cleanup"),description:i18n("Turn on this setting to enable audit log cleanup. If enabled, audit log entries older than the specified number of days will be removed daily at the specified time."),
value:this.formData.auditLogCleanupEnabled,type:"Switch",attachPoint:h,readOnly:this.readOnly}),c=new Date;c.setHours(this.formData.auditLogCleanupHour);c.setMinutes(this.formData.auditLogCleanupMinute);var b=this.columnForm.addField({name:"auditLogCleanupTimeOfDay",label:i18n("Daily Cleanup Start Time"),description:i18n("The time of day to start the daily audit log cleanup."),value:c,required:!0,type:"Time",attachPoint:h,readOnly:this.readOnly}),a=this.columnForm.addField({name:"auditLogRetentionLength",
label:i18n("Days to Retain Audit Log Entries"),description:i18n("The default number of days to retain audit entries in the database. Valid range is 0 or greater."),value:this.formData.auditLogRetentionLength,type:"Text",attachPoint:h,readOnly:this.readOnly}),h=function(c){b.widget.set("disabled",!c);a.widget.set("disabled",!c)};d.widget.onChange=h;h(this.formData.auditLogCleanupEnabled)}})})},"deploy/widgets/settings/Logging":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.settings.Logging",[m,l],{templateString:'<div class="logging">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=this;this.existingValues={};if(this.version)this.existingValues=this.version;j.get({url:bootstrap.restUrl+"system/configuration/logconfig",load:function(b){var a=new h({cancelLabel:null,submitUrl:bootstrap.restUrl+"system/configuration/logconfig",postSubmit:function(){new e({message:i18n("Settings saved successfully.")})}});
a.addField({name:"logconfig",label:"",description:i18n("Log config"),value:b,required:!1,style:{width:"500px",height:"500px"},type:"Text Area"});a.placeAt(c.formAttach)},error:function(){c.showDisabledUIDialog()}})},showDisabledUIDialog:function(){(new d({title:i18n("Logging Tab"),content:i18n("This tab has been disabled. Please contact your system administrator for more information."),closable:!0,draggable:!0})).show()}})})},"deploy/widgets/settings/AuditLog":function(){define("dojo/_base/declare,dojo/_base/connect,dojo/io-query,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/_base/xhr,dojo/topic,dijit/form/Button,dijit/form/CheckBox,deploy/widgets/component/EditComponent,deploy/widgets/Formatters,deploy/widgets/settings/AuditLogSettings,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){return l([j,e],{templateString:'<div class="componentList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=[{name:i18n("Date"),field:"date",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(a){return new Date(a.date)},filterField:"date",filterType:"date",filterClass:"Long"},{name:i18n("User Name"),
field:"userName",orderField:"userName",filterField:"userName",filterType:"text"},{name:i18n("Event Type"),field:"eventType",orderField:"eventType",filterField:"eventType",filterType:"text"},{name:i18n("Description"),field:"description",orderField:"description",filterField:"description",filterType:"text"},{name:i18n("Object Type"),field:"objType",orderField:"objType",filterField:"objType",filterType:"text"},{name:i18n("Object Name"),field:"objName",orderField:"objName",filterField:"objName",filterType:"text"},
{name:i18n("Status"),field:"status",orderField:"status",filterField:"status",filterType:"text",formatter:function(a,b){return i18n(b)}},{name:i18n("IP Address"),filterField:"ipAddress",field:"ipAddress",filterType:"text",formatter:function(a){(a=a.ipAddress)||(a=i18n("Not Available"));return a}}];this.grid=new w({url:bootstrap.restUrl+"auditentry",noDataMessage:i18n("No Audit Entries Found."),tableConfigKey:"auditEntryTable",sortType:"desc",orderField:"date",columns:b,hidePagination:!1,hideExpandCollapse:!0});
this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.manageAuditLog]&&(b={label:i18n("Cleanup Log"),showTitle:!1,onClick:function(){a.showCleanupLogDialog()}},b=new f(b),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach));b={label:i18n("Download As CSV"),showTitle:!1,onClick:function(){util.downloadFile(bootstrap.restUrl+"auditentry/csv?"+k.objectToQuery(a.grid._getQueryData()))}};(new f(b)).placeAt(this.buttonTopAttach);config.data.permissions[security.system.viewBasicSystemSettings]&&
(new f({label:i18n("Audit Log Settings"),onClick:function(){a.showAuditLogSettings()}})).placeAt(this.buttonTopAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},showCleanupLogDialog:function(){var a=this,b=new s({title:i18n("Cleanup Audit Log"),closable:!0,draggable:!0}),c=new v({submitUrl:bootstrap.restUrl+"auditentry/",addData:function(a){if(a.date&&a.time)a.date=util.combineDateAndTime(a.date,a.time).valueOf()},postSubmit:function(){b.hide();b.destroy();a.grid.refresh()},
onError:function(a){new o({title:i18n("Error"),messages:[i18n("An error has occurred while cleaning the audit log:"),"",util.escape(a.responseText)]})},onCancel:function(){b.hide();b.destroy()},saveLabel:i18n("Submit")});c.addField({name:"date",label:i18n("Date"),required:!0,type:"Date"});c.addField({name:"time",label:i18n("Time"),required:!0,type:"Time"});c.placeAt(b);b.show()},showAuditLogSettings:function(){var a=this;a.dialog=new s({closable:!0,draggable:!0,title:i18n("System Settings")});b.get({url:bootstrap.restUrl+
"system/configuration/auditLogSettings",handleAs:"json",load:function(b){a.createAuditLogSettingsForm(b)}})},createAuditLogSettingsForm:function(a){var b=this,c=new v({submitUrl:bootstrap.restUrl+"system/configuration/auditLogSettings",addData:function(a){if(a.auditLogCleanupTimeOfDay)a.auditLogCleanupHour=a.auditLogCleanupTimeOfDay.getHours(),a.auditLogCleanupMinute=a.auditLogCleanupTimeOfDay.getMinutes()},postSubmit:function(){b.dialog.hide();b.dialog.destroy()},onError:function(a){new o({title:i18n("Error"),
messages:[i18n("An error has occurred while saving the audit log settings:"),"",util.escape(a.responseText)]})},onCancel:function(){b.dialog.destroy()},readOnly:!config.data.permissions[security.system.editBasicSystemSettings]||!config.data.permissions[security.system.manageAuditLog]});c.placeAt(b.dialog);a.auditLogCleanupEnabled=!c.readOnly&&a.auditLogCleanupEnabled;(new q({columnForm:c,formData:a})).placeAt(c.formAttach,"first");b.dialog.show()}})})},"deploy/widgets/settings/Patches":function(){define(["dijit/_TemplatedMixin",
"dijit/_Widget","dojo/_base/declare","dojo/dom-style","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.settings.Patches",[m,l],{templateString:'<div class="logging">  <div data-dojo-attach-point="gridAttach"></div>  <div data-dojo-attach-point="jsPatchTitleAttach" class="containerLabel"></div>  <div data-dojo-attach-point="jsPatchGridAttach"></div></div>',postCreate:function(){this.inherited(arguments);this.existingValues={};if(this.version)this.existingValues=this.version;
var h=[{name:i18n("Name"),field:"name"},{name:i18n("Last Modified"),field:"time",formatter:util.tableDateFormatter}];this.grid=new e({url:bootstrap.restUrl+"system/configuration/patches",serverSideProcessing:!1,noDataMessage:i18n("No patches have been installed on your server"),tableConfigKey:"patches",hidePagination:!0,columns:h});this.grid.placeAt(this.gridAttach)}})})},"deploy/widgets/settings/diagnostics/RequestAuditEntryList":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/_base/xhr,dijit/form/Button,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l([m,k],{templateString:'<div class="requestList"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=bootstrap.restUrl+"audit/request",c=[{name:i18n("User"),orderField:"user.name",filterField:"user.name",field:"user.name",formatter:function(a){var b="Anonymous";if(a.user)b=a.user.name;return b},filterType:"text"},{name:i18n("Date"),field:"date",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(a){return new Date(a.date)}},
{name:i18n("Duration"),field:"duration",orderField:"duration",formatter:function(a,b){return util.formatDuration(b,{roundToNearestSecond:!0})}},{name:i18n("Method"),orderField:"method",filterField:"method",field:"method",filterType:"text"},{name:i18n("URL"),orderField:"shortUrl",filterField:"shortUrl",field:"shortUrl",filterType:"text"}];this.grid=new a({url:b,noDataMessage:i18n("No Entries Found."),tableConfigKey:"requestAuditEntryTable",orderField:"date",hidePagination:!1,hideExpandCollapse:!0,
columns:c});this.grid.placeAt(this.gridAttach);i18n("Cleanup Log")},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/settings/diagnostics/ThreadDumps":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/_base/xhr,dijit/form/Button,deploy/widgets/Formatters,deploy/widgets/log/LiveLogViewer".split(","),function(l,m,k,j,e,h,d,c,b,a){return l("deploy.widgets.settings.diagnostics.ThreadDumps",[m,
k],{templateString:'<div class="requestList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b={label:i18n("Generate Thread Dump"),showTitle:!1,onClick:function(){a.showThreadDumpWindow(bootstrap.restUrl+"system/configuration/threadDump",i18n("Java Thread Dump"))}},b=new c(b);j.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonTopAttach);util.createDownloadAnchor({href:bootstrap.restUrl+
"system/configuration/threadDump?fileDownload=true",className:"thread-dump-download-link"},this.buttonTopAttach).innerHTML=i18n("(Download)")},showThreadDumpWindow:function(b,c){(new a({url:b,title:c,autoRefresh:!1,downloadButtonName:"Download Thread Dump"})).show()}})})},"deploy/widgets/settings/diagnostics/MetadataIndexing":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/on,dojo/_base/xhr,dijit/form/Button,dijit/ProgressBar,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return l([m,k],{templateString:'<div class="requestList"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=bootstrap.restUrl+"vc/metadataGeneratorState",b=[{name:i18n("Generator"),orderField:"displayName",field:"displayName"},{name:i18n("Total Commits to Scan"),field:"scanEndCommit",orderField:"duration"},{name:i18n("Commit Scans Completed"),field:"newestScannedCommit",orderField:"duration"},{name:i18n("Progress"),
formatter:function(a,b,c){e.empty(c);a=0===a.scanEndCommit?100:100*(a.newestScannedCommit/a.scanEndCommit);j.add(c,"progressCell");(new f({value:a})).placeAt(c);setTimeout(function(){var a=h.getContentBox(c);d.set(c,"height",a.h+"px")},0)}}];this.grid=new r({url:a,noDataMessage:i18n("No Entries Found."),serverSideProcessing:!1,orderField:"displayName",hidePagination:!1,hideExpandCollapse:!0,columns:b});this.grid.placeAt(this.gridAttach)}})})},"dijit/ProgressBar":function(){define("require,dojo/_base/declare,dojo/dom-class,dojo/_base/lang,dojo/number,./_Widget,./_TemplatedMixin,dojo/text!./templates/ProgressBar.html".split(","),
function(l,m,k,j,e,h,d,c){return m("dijit.ProgressBar",[h,d],{progress:"0",value:"",maximum:100,places:0,indeterminate:!1,label:"",name:"",templateString:c,_indeterminateHighContrastImagePath:l.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value"in this.params))this.value=this.indeterminate?Infinity:this.progress},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",
this._indeterminateHighContrastImagePath.toString());this.update()},update:function(b){j.mixin(this,b||{});var b=this.internalProgress,a=this.domNode,c=1;this.indeterminate?a.removeAttribute("aria-valuenow"):(-1!=(""+this.progress).indexOf("%")?(c=Math.min(parseFloat(this.progress)/100,1),this.progress=c*this.maximum):(this.progress=Math.min(this.progress,this.maximum),c=this.maximum?this.progress/this.maximum:0),a.setAttribute("aria-valuenow",this.progress));a.setAttribute("aria-labelledby",this.labelNode.id);
a.setAttribute("aria-valuemin",0);a.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(c);k.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);b.style.width=100*c+"%";this.onChange()},_setValueAttr:function(b){this._set("value",b);Infinity==b?this.update({indeterminate:!0}):this.update({indeterminate:!1,progress:b})},_setLabelAttr:function(b){this._set("label",b);this.update()},_setIndeterminateAttr:function(b){this.indeterminate=b;this.update()},
report:function(b){return this.label?this.label:this.indeterminate?"&#160;":e.format(b,{type:"percent",places:this.places,locale:this.lang})},onChange:function(){}})})},"url:dijit/templates/ProgressBar.html":'<div class="dijitProgressBar dijitProgressBarEmpty" role="progressbar"\n\t><div  data-dojo-attach-point="internalProgress" class="dijitProgressBarFull"\n\t\t><div class="dijitProgressBarTile" role="presentation"></div\n\t\t><span style="visibility:hidden">&#160;</span\n\t></div\n\t><div data-dojo-attach-point="labelNode" class="dijitProgressBarLabel" id="${id}_label"></div\n\t><img data-dojo-attach-point="indeterminateHighContrastImage" class="dijitProgressBarIndeterminateHighContrastImage" alt=""\n/></div>\n',
"deploy/widgets/settings/CloudConnections":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,dijit/form/Button,js/webext/widgets/Dialog,js/webext/widgets/Alert,js/webext/widgets/table/TreeTable,js/webext/widgets/GenericConfirm,js/webext/widgets/ColumnForm,deploy/widgets/security/TeamSelector".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return k("deploy.widgets.settings.CloudConnections",[m,l],{templateString:'<div class="cloudConnections">  <div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div>  <div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var d=this;j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Cloud Connection",handleAs:"json",sync:!0,load:function(a){d.extendedSecurity={teams:a}}});var h=bootstrap.restUrl+"resource/cloud/connection",k=[{name:i18n("Name"),field:"name"},{name:i18n("Hostname"),field:"url"},{name:i18n("Username"),field:"username"},{name:i18n("Description"),field:"description"},{name:i18n("Actions"),formatter:function(a){return d.actionsFormatter(a)}}];this.grid=
new f({url:h,serverSideProcessing:!1,columns:k,tableConfigKey:"cloudConnectionList",noDataMessage:i18n("No cloud connections have been created yet."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);this.newConnectionBtn=new c({label:i18n("New Connection..."),onClick:function(){var c=new b({title:i18n("New Cloud Connection"),closable:!0,draggable:!0,description:i18n("To create a cloud connection, specify the cloud system to connect to and the credentials for that cloud system. Make sure that you have a user account on the cloud system and that you have the permissions to read information about virtual system patterns, IP groups, cloud groups, and environment profiles.")});
this.form=new r({submitUrl:bootstrap.restUrl+"resource/cloud/connection",postSubmit:function(a){c.hide();c.destroy();void 0!==d.callback&&d.callback(a)},addData:function(a){a.teamMappings=d.teamSelector.teams},onError:function(b){b.responseText&&new a({message:util.escape(b.responseText)})},onCancel:function(){c.hide();c.destroy();void 0!==d.callback&&d.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!1,type:"Text"});this.form.addField({name:"url",label:i18n("Management Console"),
required:!0,type:"Text",textDir:"ltr",placeholder:"<hostname>",description:i18n("Specify the host name of the cloud system.")});this.form.addField({name:"username",label:i18n("Username"),required:!0,type:"Text"});this.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure"});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text"});var e=[];if(d.extendedSecurity&&d.extendedSecurity.teams)e=d.extendedSecurity.teams;d.teamSelector=new t({resourceRoleType:"Cloud Connection",
noneLabel:i18n("Standard Cloud Connection"),teams:e});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:d.teamSelector});this.form.placeAt(c.containerNode);c.show()}});e.add(this.newConnectionBtn.domNode,"idxButtonSpecial");this.newConnectionBtn.placeAt(this.buttonTopAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},cloudConnectionsFormatter:function(a){var b=document.createElement("a");b.href="resource/cloud/connection/"+a.id;b.innerHTML=a.name.escape();
return b},callback:function(){this.grid.refresh()},actionsFormatter:function(a){var c=this,e=document.createElement("div");if(a.security["Edit Basic Settings"]){var f=h.create("a",{innerHTML:i18n("Edit"),"class":"actionsLink linkPointer"},e);d(f,"click",function(){var d=this;j.get({url:bootstrap.restUrl+"resource/cloud/connection/"+a.id,handleAs:"json",sync:!0,load:function(a){d.extendedSecurity=a.extendedSecurity}});var e=new b({title:i18n("Edit Cloud Connection"),closable:!0,draggable:!0});this.form=
new r({submitUrl:bootstrap.restUrl+"resource/cloud/connection",postSubmit:function(a){e.hide();e.destroy();void 0!==c.callback&&c.callback(a)},addData:function(a){a.teamMappings=d.teamSelector.teams},onCancel:function(){e.hide();e.destroy();void 0!==c.callback&&c.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!1,type:"Text",value:a.name});this.form.addField({name:"url",label:i18n("Management Console"),required:!0,type:"Text",textDir:"ltr",value:a.url});this.form.addField({name:"username",
label:i18n("Username"),required:!0,type:"Text",value:a.username});this.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure",value:"****"});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text",value:a.description});var f=[];if(d.extendedSecurity.teams)f=d.extendedSecurity.teams;this.teamSelector=new t({resourceRoleType:"Cloud Connection",noneLabel:i18n("Standard Cloud Connection"),teams:f});this.form.addField({name:"teams",label:i18n("Teams"),
type:"Text",widget:this.teamSelector});this.form.addField({name:"existingId",label:i18n("Id"),required:!1,type:"Hidden",value:a.id});this.form.placeAt(e.containerNode);e.show()})}a.security.Delete&&(f=h.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},e),d(f,"click",function(){c.confirmDelete(a)}));return e},confirmDelete:function(b){var c=this;new n({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",util.escape(b.name)),action:function(){c.grid.block();
j.del({url:bootstrap.restUrl+"resource/cloud/connection/"+b.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh()},error:function(b){(new a({messages:[i18n("Error deleting cloud connection:"),"",util.escape(b.responseText)]})).startup();c.grid.unblock()}})}})}})})},"deploy/widgets/settings/ArtifactRepo":function(){define("dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/number,dijit/ProgressBar,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l([m,k],{templateString:'<div><div><div class="artifactProgressBarText" data-dojo-attach-point="pbTextAttach"></div><div class="artifactDescription" data-dojo-attach-point="pbDescrAttach"></div><div class="artifactProgressBar" data-dojo-attach-point="progressBarAttach"></div></div><div data-dojo-attach-point="sizeTableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;void 0!==this.tree&&this.tree.destroy();this.tree=new a({url:bootstrap.restUrl+
"deploy/component/componentSizeReport",serverSideProcessing:!1,noDataMessage:i18n("No components found."),columns:b._getTableColumns(),hidePagination:!1,orderField:"sizeOnDisk",sortType:"desc",getChildUrl:function(a){if(!a.component)return bootstrap.restUrl+"deploy/component/"+a.id+"/versions/false"},getChildOutputType:function(){return{rowsPerPage:10}},hasChildren:function(a){return!!a.sizeOnDisk&&"Component"===a["class"]}});this.tree._defaultToggle=this.tree._toggle;this.tree._toggle=function(a,
b){if(a.hasChildren&&10<=a.children.length){var c=a.domNode.firstChild.firstChild,d=c.lastChild;if("overflowMessage"!==d.value)d=c.firstChild,d.style.marginLeft="10px",c.removeChild(d),c.appendChild(d);a.expanded?d.style.display="none":(d.innerHTML=i18n("(Only 10 largest versions displayed)"),d.style.display="inline")}this._defaultToggle(a,b)};this.tree.placeAt(this.sizeTableAttach);j.get({url:bootstrap.restUrl+"deploy/version/upgrades",handleAs:"json",load:function(a){b._createProgressBar(a)},error:function(){}})},
_createProgressBar:function(a){var c=this;if(0!==a.remaining)c.pbDescrAttach.innerHTML=i18n("The server is currently re-organizing  version artifacts. This process will only occur once and the server can continue to be used as normal. This re-organization may allow for faster artifact resolution."),c.pbTextAttach.innerHTML=i18n("Artifact Upgrade Status: "),c._updateProgressBar(),c.bar=(new b({style:"width: 100%",indeterminate:!0})).placeAt(this.progressBarAttach),setInterval(function(){c._updateProgressBar()},
1E4)},_updateProgressBar:function(){var a=this;j.get({url:bootstrap.restUrl+"deploy/version/upgrades",handleAs:"json",load:function(b){a.bar.set("value",100*(1-b.remaining/b.total))},error:function(){}})},_getTableColumns:function(){var a=this,b=[];b.push({name:i18n("Component / Version"),formatter:function(a,b,c){b=h.create("div",{style:{display:"none"}});b.value="overflowMessage";c.firstChild.appendChild(b);return a.name},getRawValue:function(a){return a.name},orderField:"name",filterField:"name",
filterType:"text"});b.push({name:i18n("Size"),orderField:"sizeOnDisk",formatter:function(b){return a._formatSize(b.sizeOnDisk||-1)},getRawValue:function(a){return a.sizeOnDisk||0}});return b},_formatSize:function(a){var b=i18n("N/A");-1<a&&(b=util.fileSizeFormat(a));return b}})})},"deploy/widgets/lock/LockList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a){return k("deploy.widgets.lock.LockList",[m,l],{templateString:'<div class="lockList"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var b=this,c=bootstrap.restUrl+"lock/lock",j=[{name:i18n("Name"),formatter:function(a){return a.lockName},orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.lockName}},{name:i18n("Type"),formatter:function(a){var b="";a.applicationProcessRequest?
b=i18n("Application"):a.componentProcessRequest&&(b=i18n("Component"));return b},orderField:"type",filterField:"status",filterType:"select",filterOptions:[{label:i18n("Application"),value:"Application"},{label:i18n("Component"),value:"Component"}],getRawValue:function(a){var b="";a.applicationProcessRequest?b=i18n("Application"):a.componentProcessRequest&&(b=i18n("Component"));return b}},{name:i18n("Component/Application"),formatter:function(a){var b="";a.applicationProcessRequest?b=d.applicationLinkFormatter(a.applicationProcessRequest.application):
a.componentProcessRequest&&(b=d.componentLinkFormatter(a.componentProcessRequest.component));return b},orderField:"componentApplication",filterField:"componentApplication",filterType:"text",getRawValue:function(a){var b="";if(a.applicationProcessRequest)b=a.applicationProcessRequest.application.name;else if(a.componentProcessRequest)b=a.componentProcessRequest.component.name;return b}},{name:i18n("Resource/Environment"),formatter:function(a){var b="";a.applicationProcessRequest?b=d.environmentLinkFormatter(a.applicationProcessRequest.environment):
a.componentProcessRequest&&(b=d.resourcePathFormatter(a.componentProcessRequest.resource));return b},orderField:"resourceEnvironment",filterField:"resourceEnvironment",filterType:"text",getRawValue:function(a){var b="";if(a.applicationProcessRequest)b=a.applicationProcessRequest.environment.name;else if(a.componentProcessRequest)b=a.componentProcessRequest.resource.name;return b}},{name:i18n("Process"),formatter:function(a){var b="";a.applicationProcessRequest?b=d.applicationProcessLinkFormatter(a.applicationProcessRequest.applicationProcess):
a.componentProcessRequest&&(b=d.componentProcessLinkFormatter(a.componentProcessRequest.componentProcess));return b},orderField:"process",filterField:"process",filterType:"text",getRawValue:function(a){var b="";if(a.applicationProcessRequest)b=a.applicationProcessRequest.applicationProcess.name;else if(a.componentProcessRequest)b=a.componentProcessRequest.componentProcess.name;return b}},{name:i18n("Actions"),formatter:function(a){var c=e.create("div"),d="";a.applicationProcessRequest?d="#applicationProcessRequest/"+
a.applicationProcessRequest.id:a.componentProcessRequest&&(d="#componentProcessRequest/"+a.componentProcessRequest.id);e.create("a",{innerHTML:i18n("View Request"),"class":"actionsLink",href:d},c);config.data.permissions[security.system.releaseLocks]&&(d=e.create("a",{innerHTML:i18n("Release"),"class":"actionsLink linkPointer"},c),h(d,"click",function(){b.confirmRelease(a)}));return c}}];this.grid=new a({url:c,serverSideProcessing:!1,columns:j,tableConfigKey:"lockList",noDataMessage:i18n("No locks are currently in use."),
hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},confirmRelease:function(a){var d=this;new b({message:i18n("Are you sure you want to release this lock?"),action:function(){d.grid.block();j.del({url:bootstrap.restUrl+"lock/lock/"+a.id,handleAs:"json",load:function(){d.grid.unblock();d.grid.refresh()},error:function(a){new c({messages:[i18n("Error releasing lock:"),"",util.escape(a.responseText)]});d.grid.unblock();
d.grid.refresh()}})}})}})})},"deploy/widgets/integration/pattern/PatternIntegrationProviderList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/on,deploy/widgets/Formatters,deploy/widgets/integration/pattern/EditPatternIntegrationProvider,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return j("deploy.widgets.integration.pattern.PatternIntegrationProviderList",[m,l],{templateString:'<div class="integrationProviderList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="integrationProviderList"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,e=bootstrap.restUrl+"integration/pattern",f=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",
formatter:function(d,e,f){f.style.position="relative";e=c.create("div",{"class":"inlineBlock",style:"margin-"+(b.isBodyLtr()?"right":"left")+":78px;"});f=c.create("div",{"class":"inlineBlock"});c.place(f,e);var h=c.create("div");h.innerHTML=d.name.escape();c.place(h,f);c.place(a.actionsFormatter(d),e);return e}},{name:i18n("Description"),field:"description"}];this.grid=new o({url:e,serverSideProcessing:!1,noDataMessage:i18n("No integration providers have been added yet."),tableConfigKey:"integrationProviderList",
hidePagination:!1,hideExpandCollapse:!0,columns:f});this.grid.placeAt(this.integrationProviderList);config.data.permissions[security.system.manageBlueprintDesignIntegrations]&&(e=new k({label:i18n("New Blueprint Designer Integration"),showTitle:!1,onClick:function(){a.showEditIntegrationProviderDialog()}}),d.add(e.domNode,"idxButtonSpecial"),e.placeAt(this.buttonTopAttach))},actionsFormatter:function(a){var b=c.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),
d=[];config.data.permissions[security.system.manageBlueprintDesignIntegrations]&&(this.addEditActions(a,b),h.forEach(this.getRowWriteActions(a),function(a){d.push(a)}));d.length&&(new q({options:d,label:i18n("Actions...")})).placeAt(b);return b},getRowWriteActions:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.showDeleteConfirm(a)}}]},addEditActions:function(a,b){var c=this;(new k({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.showEditIntegrationProviderDialog(a)}})).placeAt(b)},
showEditIntegrationProviderDialog:function(a){var b=this,c=new r({title:a?i18n("Edit Blueprint Designer Integration"):i18n("New Blueprint Designer Integration"),closable:!0,draggable:!0});(new n({integrationProvider:a,callback:function(){c.hide();c.destroy();b.grid.refresh()}})).placeAt(c.containerNode);c.show()},showDeleteConfirm:function(a){var b=this;new t({message:i18n("Are you sure you want to delete this Blueprint Designer Integration?"),action:function(){e.del({url:bootstrap.restUrl+"integration/pattern/"+
a.id,load:function(){b.grid.refresh()}})}})}})})},"deploy/widgets/integration/pattern/EditPatternIntegrationProvider":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/CheckBox,dijit/form/Button,dijit/form/RadioButton,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/_base/xhr,dojo/_base/declare,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return a("deploy.widgets.integration.pattern.EditPatternIntegrationProvider",
[m,l],{templateString:'<div class="editIntegrationProvider">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b={properties:{}};this.existingValues=b;if(this.integrationProvider)b.id=this.integrationProvider.id,b.name=this.integrationProvider.name,b.description=this.integrationProvider.description,b.integrationTypeName=this.integrationProvider.integrationTypeName,b.integrationType=this.integrationProvider.integrationType,b.properties=
this.integrationProvider.properties;this.form=new f({submitUrl:bootstrap.restUrl+"integration/pattern",postSubmit:function(){void 0!==a.callback&&a.callback()},addData:function(c){if(a.integrationProvider)c.existingId=b.id;var d={},e,f;for(e in c)if(c.hasOwnProperty(e))if(0===e.indexOf("property/"))f=e.substring(9),d[f]=c[e],delete c[e];else if("realmOrUserCreds"===e)d.useAdminCredentials="userCreds"===c[e]?!0:!1,delete c[e];c.properties=d},onCancel:function(){void 0!==a.callback&&a.callback()}});
this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:b.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:b.description});this.form.addField({name:"property/landscaperUrl",label:i18n("URL"),description:i18n("Base URL for the blueprint designer"),type:"Text",bidiDynamicURL:"URL",required:!0,value:util.getNamedPropertyValue(b.properties,"landscaperUrl")});var d="userCreds";"false"===util.getNamedPropertyValue(b.properties,"useAdminCredentials")&&
(d="realm");var e=function(b){a.removeUserNameField();a.removeUserPassField();a.removeRealmUserTextField();a.removeManualUserTextField();"userCreds"===b?(a.addRealmUserTextField(),a.addUserNameField(),a.addUserPassField()):a.addManualUserTextField()};this.form.addField({name:"realmOrUserCreds",type:"Radio",label:i18n("Response"),required:!0,value:d,allowedValues:[{label:i18n("Automatically authenticate for each UrbanCode Deploy user."),value:"realm"},{label:i18n("Always authenticate with one blueprint designer user name."),
value:"userCreds"}],onChange:e});e(d);this.form.testConnectionButton=new j({label:i18n("Test Connection")});this.form.testConnectionButton.placeAt(this.form.buttonsAttach);c(this.form.testConnectionButton,"click",function(){a.checkConnection()});this.form.placeAt(this.formAttach)},addUserNameField:function(){this.form.hasField("property/landscaperUser")||this.form.addField({name:"property/landscaperUser",label:i18n("Username"),description:i18n("Username for the account to use when authenticating to the blueprint designer"),
type:"Text",required:!0,value:util.getNamedPropertyValue(this.existingValues.properties,"landscaperUser")})},removeUserNameField:function(){this.form.hasField("property/landscaperUser")&&this.form.removeField("property/landscaperUser")},addUserPassField:function(){this.form.hasField("property/landscaperPassword")||this.form.addField({name:"property/landscaperPassword",label:i18n("Password"),description:i18n("Password for the account to use when authenticating to the blueprint designer"),type:"Secure",
required:!0,value:util.getNamedPropertyValue(this.existingValues.properties,"landscaperPassword")});return"admin"},removeUserPassField:function(){this.form.hasField("property/landscaperPassword")&&this.form.removeField("property/landscaperPassword")},addRealmUserTextField:function(){this.form.hasField("_realmUserNote")||this.form.addField({name:"_realmUserNote",type:"Label",label:"",value:i18n("Ensure that blueprint designer user name that you enter has permissions to access the cloud platforms where you provision cloud environments. The default administrative account for the blueprint design server, ucdpadmin, might not have access to the required resources on the target cloud platforms.  ")})},
removeRealmUserTextField:function(){this.form.hasField("_realmUserNote")&&this.form.removeField("_realmUserNote")},addManualUserTextField:function(){this.form.hasField("_manualUserNote")||this.form.addField({name:"_manualUserNote",type:"Label",label:"",value:i18n('On the blueprint designer, you must create an authentication  realm for this UrbanCode Deploy server. To see the instructions for creating the authentication realm, open the documentation, and search for "Importing user accounts from UrbanCode Deploy to the blueprint design server."')})},
removeManualUserTextField:function(){this.form.hasField("_manualUserNote")&&this.form.removeField("_manualUserNote")},checkConnection:function(){var a=this,c=this.form.postSubmit;delete this.form.postSubmit;var e=!1;this.form.onSubmit=function(){e=!0};this.form.submitForm();delete this.form.onSubmit;this.form.postSubmit=c;e&&(c=a.form.getData(),c=a.form.formatData(c),a.form.block(),b.post({url:bootstrap.restUrl+"integration/pattern/testConnection",handleAs:"json",putData:c,headers:{"Content-Type":"application/json"},
load:function(b){var c=new n;b.error?(b=b.error,d.create("div",{innerHTML:i18n("Connection Failed")},c.titleNode),d.create("div",{innerHTML:b},c.containerNode)):(d.create("div",{innerHTML:i18n("Connection Successful")},c.titleNode),d.create("div",{innerHTML:i18n("Connection Successful")},c.containerNode));b=new j({label:i18n("Close"),onClick:function(){this.parentWidget.destroy()}});h.add(b.domNode,"underField");b.parentWidget=c;b.placeAt(c.containerNode);c.show();a.form.unblock()}}))}})})},"deploy/widgets/environmentTemplate/EnvironmentTemplateResourceTemplate":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/lang,dojo/_base/xhr,deploy/widgets/resourceTemplate/ResourceTemplateEditManager,js/webext/widgets/Alert,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h,d,c,b){return j("deploy.widgets.environmentTemplate.EnvironmentTemplateResourceTemplate",[m,l],{templateString:'<div class="environmentTemplateResources"><div data-dojo-attach-point="optionsAttach" style="display:inline-block;" class="environmentTemplateResource-options"></div><div data-dojo-attach-point="errorMessageAttach" style="display: none;" class="pageAlerts"><div class="pageAlert highPriority">'+i18n("You do not have sufficient security permissions. Please contact your server administrator.")+
'</div></div><div data-dojo-attach-point="buttonAttach" style="display:inline-block; margin-left: 15px;"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.showOptions();this.showTable()},showOptions:function(){var a=this;a.selectedTemplate=a.environmentTemplate.resourceTemplate;a.readOnly=appState.environmentTemplate.version!==appState.environmentTemplate.versionCount||!a.environmentTemplate.security["Edit Basic Settings"];a.form=new b({submitUrl:bootstrap.restUrl+
"deploy/environmentTemplate",readOnly:a.readOnly,showButtons:!1,postSubmit:function(){a.destroyTable();a.showTable()},addData:function(b){a.environmentTemplate.resourceTemplate=b.resourceTemplate;e.mixin(b,a.environmentTemplate);b.existingId=a.environmentTemplate.id},onError:function(a){a.responseText&&new c({message:util.escape(a.responseText)})}});var d=!0;a.form.addField({name:"resourceTemplate",label:i18n("Resource Template"),type:"TableFilterSelect",value:a.environmentTemplate.resourceTemplateId,
url:bootstrap.restUrl+"resource/resourceTemplate",onChange:function(b,c){if(!d)a.selectedTemplate=c,a.destroyTable(),a.showTable(),a.showUpdateTemplateButton();d=!1}});a.form.placeAt(a.optionsAttach)},showTable:function(){var a=this;a.errorMessageAttach.style.display="none";h.get({url:bootstrap.restUrl+"resource/resourceTemplate/"+a.environmentTemplate.resourceTemplateId,handleAs:"json",sync:!0,load:function(b){a.selectedTemplate=b;a.resourceTemplateEditManager=new d({resourceTemplate:a.selectedTemplate});
a.resourceTemplateEditManager.placeAt(a.gridAttach)},error:function(b){if(403===b.status)a.errorMessageAttach.style.display=""}})},destroyTable:function(){this.resourceTemplateEditManager&&this.resourceTemplateEditManager.destroy()},showUpdateTemplateButton:function(){var a=this;if(!a.updateTemplateButton)a.updateTemplateButton=new k({label:i18n("Update Resource Template"),showTitle:!1,onClick:function(){a.form.submitForm();a.hideUpdateTemplateButton()},baseClass:"dijitButton idxButtonSpecial"}),
a.updateTemplateButton.placeAt(a.buttonAttach)},hideUpdateTemplateButton:function(){this.updateTemplateButton.destroy();this.updateTemplateButton=null}})})},"deploy/widgets/environmentTemplate/EnvironmentTemplateEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/environmentTemplate/EditEnvironmentTemplate,deploy/widgets/property/PropDefs".split(","),function(l,m,k,j,e,h,d){return m([e],{postCreate:function(){this.inherited(arguments);
this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},showList:function(){var c=this;c.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){c.addHeading(i18n("Basic Settings"));c.showBasicSettings()}});c.addEntry({id:"properties",label:i18n("Environment Properties"),action:function(){c.addHeading(i18n("Environment Properties"));c.showProperties()}})},addHeading:function(c){j.create("div",{innerHTML:c,"class":"containerLabel"},this.detailAttach)},addDescription:function(c){j.create("div",
{innerHTML:c,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new h({environmentTemplate:appState.environmentTemplate,applicationTemplate:appState.applicationTemplate,readOnly:!appState.environmentTemplate.security["Edit Basic Settings"]||!this.isMaxVersion(),callback:function(){navBar.setHash("#environmentTemplate/"+appState.environmentTemplate.id+"/-1",!1,!0)}})).placeAt(this.detailAttach)},showProperties:function(){var c=this.isMaxVersion(),b=null,a=null;c?a="applicationTemplates/"+
appState.applicationTemplate.id+"/environmentTemplates/"+appState.environmentTemplate.id+"/propSheetDef":b=appState.environmentTemplate.propDefs;this.addDescription(i18n("Define properties here to be given values on each environment using this template."));(new d({propDefs:b,propSheetDefPath:a,readOnly:!appState.environmentTemplate.security["Manage Properties"]||!c,refreshHash:"environmentTemplate/"+appState.environmentTemplate.id+"/-1/configuration/properties",headers:{environmentTemplateVersion:appState.environmentTemplate.version}})).placeAt(this.detailAttach)},
isMaxVersion:function(){return appState.environmentTemplate.version===appState.environmentTemplate.versionCount}})})},"deploy/widgets/vc/VCUtil":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/on,dojo/request/xhr,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/Alert,deploy/widgets/process/RequiredCommentForm".split(","),function(l,m,k,j,e,h,d,c){return l([],{encodeVersionedPath:function(b){return b?encodeURIComponent(b.replace(/\//g,"&")).replace(/%2F/g,"/"):
b},generateVersionControls:function(b,a){var f=m.create("div",{});if(1<b.version){var l=m.create("a",{href:"#"+a(b.version-1)},f);m.create("div",{className:"arrow_backwards inlineBlock"},l)}else m.create("div",{className:"arrow_backwards_grey inlineBlock"},f);m.create("span",{innerHTML:"&nbsp;&nbsp;&nbsp;"},f);if(b.version<b.versionCount){l=m.create("a",{href:"#"+a(b.version+1)},f);m.create("span",{innerHTML:"&nbsp;&nbsp;"},f);var r=m.create("a",{href:"#"+a(b.versionCount)},f);m.create("div",{className:"arrow_forward inlineBlock"},
l);m.create("div",{className:"arrow_fastForward inlineBlock"},r);if(!b.security||b.security["Edit Basic Settings"])l=m.create("div",{style:{paddingTop:"5px"}},f),l=m.create("a",{"class":"linkPointer",innerHTML:i18n("Reset Latest to This Version")},l),k(l,"click",function(){new h({message:i18n("Are you sure you want to reset to version %s?",b.version),action:function(){if(config.data.systemConfiguration.requiresCommitComment){var f=new e({title:i18n("Process Change Comment"),closable:!0});(new c({callback:function(c){var e=
{};if(c.comment)e.comment=c.comment;c&&j.put(bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(b.path)+"."+b.version+"/setAsLatestWithComment",{data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(){navBar.setHash(a(b.versionCount+1),!1,!0)},function(){new d({message:i18n("Error: %s",util.escape(c.responseText))})});f.hide();f.destroy()}})).placeAt(f);f.show()}else dojo.xhrPut({url:bootstrap.restUrl+"vc/persistent/"+util.vc.encodeVersionedPath(b.path)+"."+
b.version+"/setAsLatest",load:function(){navBar.setHash(a(b.versionCount+1),!1,!0)},error:function(a){new d({message:i18n("Error: %s",util.escape(a.responseText))})}})}})})}else m.create("div",{className:"arrow_forward_grey inlineBlock"},f),m.create("span",{innerHTML:"&nbsp;&nbsp;"},f),m.create("div",{className:"arrow_fastForward_grey inlineBlock"},f);return f}})})},"deploy/widgets/process/ProcessActivities":function(){define("dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/request/xhr,dojo/dom-class,dojo/dom-construct,dojo/json,deploy/widgets/workflow/BaseGraph".split(","),
function(l,m,k,j,e,h,d,c){return l("deploy.widgets.process.ProcessActivities",[c],{processId:null,processVersion:null,readOnly:!1,postCreate:function(){this.inherited(arguments);var b=this;if(mxClient.isBrowserSupported()){if(void 0!==this.process)this.processId=this.process.id,this.processVersion=this.process.version;j(bootstrap.restUrl+"process/"+this.processId+"/"+this.processVersion,{handleAs:"json"}).then(function(a){b.process=a;b.exploreUrl="#main/processes";b.readOnly=!1;if(a.versionCount!==
a.version)b.readOnly=!0;else if(!b.process.security["Edit Basic Settings"])b.readOnly=!0;void 0!==b.process.rootActivity?b.graphStartup(b.process.rootActivity):b.graphStartup(null)})}else mxUtils.error(i18n("This browser is not compatible with the rich workflow editor."),200,!1)},graphStartup:function(b){this.inherited(arguments);var a=this,c;for(c=0;c<config.data.tabSets.length;c++)if("process"===config.data.tabSets[c].id){config.data.tabSets[c].defaultTab="design";break}a.buildToolbar({latest:a.process.version===
a.process.versionCount,label:i18n("Version %s of %s",a.process.version,a.process.versionCount),controls:util.vc.generateVersionControls(a.process,function(b){return"process/"+a.process.id+"/"+b})});this.readOnly||a.refreshStepPalette({favoriteCookie:"process",favoriteDrawers:[i18n("Utility Steps")],process:a.process,url:bootstrap.restUrl+"process/activityTree"})},saveProcessDesign:function(b){var a=this,c=a.getWorkflowJson();if(b)c.comment=b;j.put(bootstrap.restUrl+"process/"+a.process.id+"/activities",
{data:d.stringify(c),headers:{processVersion:a.process.version,"Content-Type":"application/json"}}).then(function(){a.showSavePopup(i18n("Process design saved successfully."));document.hasChanges=!1;a.clearChangedActivities();navBar.setHash("process/"+a.process.id+"/-1/design",!1,!0)},function(b){a.showSaveErrorPopup(b)})}})})},"deploy/widgets/process/ProcessHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/Tooltip,dojo/_base/declare,dojo/_base/xhr,dojo/query,dojo/dom-construct,dojo/on,dojo/topic,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.process.ProcessHistory",[m,l],{templateString:'<div class="processHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var j=this,l;for(l=0;l<config.data.tabSets.length;l++)if("process"===config.data.tabSets[l].id){config.data.tabSets[l].defaultTab="dashboard";break}l=bootstrap.restUrl+"process/request";var m=[{name:i18n("Process Version"),field:"processVersion",orderField:"processVersion",
filterField:"processVersion",filterClass:"Integer",filterType:"textExact"},{name:i18n("Scheduled For"),formatter:function(a){return util.dateFormatShort(a.submittedTime)},orderField:"submittedTime"},{name:i18n("By"),field:"userName",orderField:"user.name",filterField:"user.name",filterType:"text"},{name:i18n("Status"),formatter:function(b,c,d){var e="";b&&(e=a.activityStatusFormatter(b,c,d));return e}},{name:i18n("Actions"),formatter:function(a){var b=document.createElement("div");d.create("a",{"class":"actionsLink",
innerHTML:i18n("View Request"),href:"#processRequest/"+a.id},b);if(j.process.security.execute&&a&&"EXECUTING"===a.state){if(a.paused){var f=d.create("a",{innerHTML:i18n("Resume"),"class":"actionsLink linkPointer"},b);c(f,"click",function(){j.grid.block();e.put({url:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/resume",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new n({message:i18n("Could not cancel the process.")});j.grid.unblock();j.grid.refresh()}})})}else f=
d.create("a",{innerHTML:i18n("Pause"),"class":"actionsLink linkPointer"},b),c(f,"click",function(){j.grid.block();e.put({url:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/pause",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new n({message:i18n("Could not cancel the process.")});j.grid.unblock();j.grid.refresh()}})});f=d.create("a",{innerHTML:i18n("Cancel"),"class":"actionsLink linkPointer"},b);c(f,"click",function(){j.grid.block();e.put({url:bootstrap.restUrl+
"workflow/"+a.workflowTraceId+"/cancel",handleAs:"json",load:function(){j.grid.unblock();j.grid.refresh()},error:function(){new n({message:i18n("Could not cancel the process.")});j.grid.unblock();j.grid.refresh()}})})}return b}}];b.subscribe("navigationError",function(a){var b=a.response.url.split("/"),b=h('a[href*="'+b[b.length-1]+'"]')[0].parentNode;if(1===b.children.length){var c=d.create("div",{className:"general-icon failed-icon inlineBlock"});new k({connectId:[c],label:i18n(util.escape(a.responseText)),
showDelay:100,position:["after","above","below","before"]});d.place(c,b)}});this.grid=new f({url:l,orderField:"submittedTime",sortType:"desc",columns:m,hidePagination:!1,hideExpandCollapse:!0,queryData:{outputType:["BASIC"]},baseFilters:[{name:"processPath",type:"eq",values:[j.process.path]}]});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/process/ProcessChangelog":function(){define(["dijit/_TemplatedMixin","dijit/_Widget",
"dojo/_base/declare","js/webext/widgets/table/TreeTable"],function(l,m,k,j){return k("deploy.widgets.process.ProcessChangelog",[m,l],{templateString:'<div class="processChangelog"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=bootstrap.restUrl+"process/"+this.process.id+"/changelog",h=[{name:i18n("Version"),field:"version",orderField:"version",getRawValue:function(d){return d.version}},{name:i18n("User"),field:"committer",orderField:"committer",
filterField:"committer",filterType:"text",getRawValue:function(d){return d.committer}},{name:i18n("Date"),field:"commitTime",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(d){return new Date(d.commitTime)}},{name:i18n("Comment"),field:"comment"}];this.grid=new j({url:e,serverSideProcessing:!1,orderField:"version",sortType:"desc",columns:h,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},
"deploy/widgets/process/request/ExecutionLog":function(){define("dijit/form/Button,dijit/form/CheckBox,dijit/_Widget,dijit/_TemplatedMixin,dijit/registry,dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,dojo/dom-geometry,dojo/mouse,dojo/query,deploy/widgets/process/request/ExecutionLogFormatters,deploy/widgets/approval/ApprovalRevocationDialog,deploy/widgets/Popup,js/webext/widgets/GenericConfirm,js/webext/widgets/Alert,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B){return c([k,j],{templateString:'<div class="executionLog"><div data-dojo-attach-point="approvalAttach" style="margin-bottom: 15px;"><div class="containerLabel" data-dojo-attach-point="approvalHeader"></div><div data-dojo-attach-point="approvalGridAttach" class="hidden"></div><div data-dojo-attach-point="approvalControlsAttach"></div></div><div data-dojo-attach-point="executionAttach"><div class="containerLabel" data-dojo-attach-point="executionHeader"></div><div class="cellHeader" data-dojo-attach-point="statusCellHeader"></div><div class="execution-log-timeline" data-dojo-attach-point="timelineAttach"></div><div class="execution-log-timeline-spacer" data-dojo-attach-point="timelineSpacer"></div><div data-dojo-attach-point="gridAttach" class="hidden"></div><div data-dojo-attach-point="executionControlsAttach" style="margin-top: 10px; margin-bottom: 150px;"></div></div></div>',
downloadAllLogsBtn:null,postCreate:function(){this.inherited(arguments);this.approvalHeader.innerHTML=i18n("Approval Progress");this.executionHeader.innerHTML=i18n("Execution");this.approvalId?this.loadApproval():f.add(this.approvalAttach,"hidden");this.loadExecution();this.executionFinished=this.treeTableWatchOn=this.timelineRendered=!1;this.pollWaitMilliSeconds=3E3},loadApproval:function(){var a=this;b.get({url:bootstrap.restUrl+"approval/approval/"+this.approvalId+"/withTrace",handleAs:"json",
load:function(b){a.approval=b;a.showApprovalLog()}})},loadExecution:function(){var a=this;b.get({url:this.requestTraceUrl,handleAs:"json",load:function(b){a.rootActivity=b;a.loadTimelineElement={};a.showExecutionLog();a.loadStatusCell()}})},loadStatusCell:function(){n.empty(this.statusCellHeader);var a=n.create("div",{className:"status-color-block"},this.statusCellHeader),b=n.create("div",{className:"status-text-cell",innerHTML:u.statusFormatter(this.rootActivity,a,this.statusCellWrapper)},this.statusCellHeader).innerText;
[i18n("Success"),i18n("Failed"),i18n("Canceled")].some(function(a){return a===b})&&this.loadTimelineExpander()},loadTimelineExpander:function(){this.timelineExpander=n.create("div",{className:"timeline-expander"},this.statusCellHeader);t(this.timelineExpander,"click",this.toggleExecutionTimeline.bind(this))},showApprovalLog:function(){var a=this;n.empty(a.approvalControlsAttach);a.approvalGrid&&n.empty(a.approvalGrid.buttonAttach);if(a.approval.activity&&a.approval.activity.children)a.approvalGrid?
(a.approvalGrid.data=a.approval.activity.children,a.approvalGrid.refresh()):(f.remove(a.approvalGridAttach,"hidden"),a.approvalGrid=new B({data:a.approval.activity.children,orderField:"graphPosition",serverSideProcessing:!1,hideExpandCollapse:!0,hideFooter:!0,columns:[{name:i18n("Task"),formatter:function(a){return u.nameFormatter(a)},orderField:"graphPosition",getRawValue:function(a){var b=a.name;a.graphPosition&&(b=Number(a.graphPosition));return b}},{name:i18n("Target"),formatter:function(a){return u.approvalTargetFormatter(a)}},
{name:i18n("Required Role"),formatter:function(a){return u.roleFormatter(a)}},{name:i18n("Start Time"),formatter:function(a){if(a.startDate)return util.dateFormatShort(a.startDate)},getRawValue:function(a){var b=0;a.startDate&&(b=Number(a.startDate));return b},orderField:"startDate"},{name:i18n("Status"),formatter:function(a,b,c){return u.statusFormatter(a,c)}},{name:i18n("Completed By"),formatter:function(a){return u.taskCompletedByFormatter(a)}},{name:i18n("Actions"),formatter:function(a){return u.actionsFormatter(a)}}]}),
a.approvalGrid.placeAt(a.approvalGridAttach));if(a.approval.failedBy){var b=document.createElement("div");b.className="failureBox";b.innerHTML=i18n("Approval was revoked by %s on %s.",a.approval.failedBy,util.dateFormatShort(a.approval.failedDate));a.approvalControlsAttach.appendChild(b)}else if(a.approvalGrid&&!a.approval.failed&&!a.approval.cancelled&&a.rootActivity&&!a.rootActivity.children&&a.approval.finished&&!a.rootActivity.error)(new l({label:i18n("Revoke Approval"),showTitle:!1,onClick:function(){w({applicationProcessRequestId:a.approval.appRequest?
a.approval.appRequest.id:null,componentProcessRequestId:a.approval.compRequest?a.approval.compRequest.id:null})}})).placeAt(a.approvalGrid.buttonAttach),a.approvalGridAttach.style.marginTop="5px";b=a.approval.activity;b.error?n.create("div",{innerHTML:b.error.escape()},a.approvalControlsAttach):(!b.state||"EXECUTING"===b.state||"INITIALIZED"===b.state)&&setTimeout(function(){a.loadApproval()},3E3)},showExecutionLog:function(){var c=this,e=c.rootActivity;a.byId("processControlLinks")&&n.destroy("processControlLinks");
n.empty(c.executionControlsAttach);c.grid&&n.empty(c.grid.buttonAttach);if(e&&e.children){if(c.grid){if(c.grid.update(e.children),!c.treeTableWatchOn)c.treeTableWatchOn=!0,c.grid.watch("queuedRequests",h.hitch(c,c.queuedRequestsWatchHandler))}else f.remove(c.gridAttach,"hidden"),c.grid=new B({data:e.children,orderField:["graphPosition",null,"startDate"],serverSideProcessing:!1,hideFooter:!0,applyRowStyle:function(a,b){a.graphPosition&&a.children&&f.add(b,"rowOfInterest");f.add(b,a.id);u.statusFormatter(a,
n.create("div"),b);t(b,"click",function(){f.contains(b,"selected")&&setTimeout(function(){f.remove(b,"selected")},100)});t(b,o.enter,function(){if(c.timeline&&c.timeline.elements){var e=c.timeline.elements.step[a.id],h=[];e&&(h=c.timeline.elements.steps[e],d.forEach(h,function(a){f.add(a,"hover")}));var j=c.timeline.elements[a.id];j&&(f.add(j.bar,"hover-item"),t(b,o.leave,function(){f.remove(j.bar,"hover-item");d.forEach(h,function(a){f.remove(a,"hover")})}))}})},getChildUrl:function(a){var b="";
a.componentProcessRequestId?b=bootstrap.restUrl+"workflow/componentProcessRequestChildren/"+a.componentProcessRequestId:a.childRequestId&&(b=bootstrap.restUrl+"process/request/"+a.childRequestId+"/traceChildren");if(c.timeline&&c.timeline.elements&&c.timeline.elements.loadChild[a.componentProcessRequestId])c.timeline.elements.loadChild[a.componentProcessRequestId]();else c.loadTimelineElement[a.componentProcessRequestId]=!0;return b},hasChildren:function(a){var b=!1;if(a.children&&0<a.children.length)b=
!0;else if("runProcess"===a.type||"componentProcess"===a.type)if(("EXECUTING"===a.state||"CLOSED"===a.state)&&!a.notNeeded)if(a.childRequestId||a.componentProcessRequestId)b=!0;return b},columns:[{name:i18n("Step"),formatter:function(a,b,d){b=u.nameFormatter(a,!0);(a=c.actionsFormatter(a,d))&&n.place(a,b);return b},orderField:"graphPosition",getRawValue:function(a){var b=a.name;a.graphPosition&&(b=Number(a.graphPosition));return b},relevantFieldNames:"state,result,notNeeded,graphPosition,specialNameType,agent,resource,componentProcess,version,text,command,patternActivity,type,displayName,name,children,componentProcessRequestId,childRequestId,task".split(",")},
{name:i18n("Progress"),formatter:function(a,b,c){var d;a.children&&(d=u.progressFormatter(a,c));return d},relevantFieldNames:["children"]},{name:i18n("Start Time"),formatter:function(a){if(a.startDate)return util.dateFormatShortSeconds(a.startDate)},getRawValue:function(a){var b=0;a.startDate&&(b=Number(a.startDate));return b},orderField:"startDate",relevantFieldNames:["startDate"]},{name:i18n("Duration"),formatter:function(a){var b="";a.startDate&&void 0!==a.duration&&(b=util.formatDuration(a.duration,
{roundToNearestSecond:!0}));return b},relevantFieldNames:["duration","startDate"]},{name:i18n("Status"),formatter:function(a){var b=n.create("div",{className:"status-cell"}),c=n.create("div",{className:"inlineBlock status-color-block"},b);n.create("div",{className:"inlineBlock status-text-cell",innerHTML:u.statusFormatter(a,c)},b);return b},relevantFieldNames:"state,result,failureCaught,task,notNeeded,paused".split(",")}]}),c.grid.oldExpand=c.grid.expand,c.grid.expand=function(a,b){(!b||"componentProcess"!==
a.type&&"runProcess"!==a.type)&&c.grid.oldExpand(a,b)},c.grid.placeAt(c.gridAttach);n.empty(c.grid.tfootAttach);var j=n.create("tr",{"class":"executionSummaryRow"},c.grid.tfootAttach),k=n.create("td",{},j);n.create("div",{className:"cellWrapper",innerHTML:i18n("Total Execution")},k);k=n.create("td",{},j);n.create("div",{className:"cellWrapper"},k).appendChild(u.progressFormatter(e,k));k=n.create("td",{},j);n.create("div",{className:"cellWrapper",innerHTML:e.startDate?util.dateFormatShortSeconds(e.startDate):
i18n("Starting...")},k);k=n.create("td",{},j);n.create("div",{className:"cellWrapper",innerHTML:e.startDate?util.formatDuration(e.duration,{roundToNearestSecond:!0}):util.formatDuration(0,{roundToNearestSecond:!0})},k);var k=n.create("td",{},j),k=n.create("div",{className:"cellWrapper"},k),m=n.create("div",{className:"inlineBlock status-color-block"},k);n.create("div",{className:"inlineBlock status-text-cell",innerHTML:u.statusFormatter(e,m,j)},k);j=n.create("div",{id:"processControlLinks",className:"inlineBlock process-control-links"},
c.grid.aboveTreeOptions);k=e.state;"EXECUTING"===k&&e.paused?(m=new l({label:i18n("Resume")}),m.placeAt(j),m.on("click",function(){c.grid.block();b.put({url:bootstrap.restUrl+"workflow/"+e.workflowTraceId+"/resume",handleAs:"json",load:function(){c.grid.unblock();c.loadExecution()}})})):"EXECUTING"===k&&!e.paused&&(m=new l({label:i18n("Pause")}),m.placeAt(j),m.on("click",function(){c.grid.block();b.put({url:bootstrap.restUrl+"workflow/"+e.workflowTraceId+"/pause",handleAs:"json",load:function(){c.grid.unblock();
c.loadExecution()},error:function(){new y({message:i18n("Could not pause the process. See the server log for details.")});c.grid.unblock();c.loadExecution()}})}));c._isCancelable(k)&&(m=new l({label:i18n("Cancel")}),m.placeAt(j),m.on("click",function(){new x({message:i18n("Are you sure you want to cancel this process request?"),action:function(){c.grid.block();b.put({url:bootstrap.restUrl+"workflow/"+c.rootActivity.workflowTraceId+"/cancel",handleAs:"json",load:function(){c.grid.unblock();c.loadExecution()},
error:function(){new y({message:i18n("Could not cancel the process. See the server log for details.")});c.grid.unblock();c.loadExecution()}})}})}));"EXECUTING"!==k&&appState.applicationProcessRequest&&(k=new l({label:i18n("Repeat Request")}),k.placeAt(j),k.on("click",function(){new x({message:i18n("Are you sure you want to repeat this application process request?"),action:function(){b.put({url:bootstrap.restUrl+"deploy/applicationProcessRequest/"+appState.applicationProcessRequest.id+"/repeat",handleAs:"json",
load:function(a){navBar.setHash("applicationProcessRequest/"+a.requestId+"/log",!1,!0)}})}})}));c.downloadAllLogsBtn=new l({label:i18n("Download All Logs"),disabled:!0,title:i18n("Cannot download all logs; process not complete.")});c.downloadAllLogsBtn.placeAt(j);c.downloadAllLogsBtn.on("click",function(){util.downloadFile(bootstrap.restUrl+"workflow/"+c.rootActivity.workflowTraceId+"/fullTraceWithLogs")})}else c.executionControlsAttach.innerHTML=this.approval&&this.approval.failed?i18n("Approval failed; This process request has been aborted."):
i18n("Waiting to start...");if(c.rootActivity)c.rootActivity.error?(c.executionControlsAttach.innerHTML=c.rootActivity.error.escape(),j=document.createElement("div"),j.style.marginTop="15px",j.innerHTML=i18n("See the server log for the full error trace."),c.executionControlsAttach.appendChild(j),c.executionFinished=!0,c.stopTimer()):!c.rootActivity.state||"EXECUTING"===c.rootActivity.state||"INITIALIZED"===c.rootActivity.state?(c.executionFinished=!1,c.setUpTimer()):(c.executionFinished=!0,c.downloadAllLogsBtn.set("title",
""),c.downloadAllLogsBtn.set("disabled",!1),c.stopTimer())},actionsFormatter:function(a){var b=n.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),c=[];d.forEach(u.actionsMenuFormatter(a,b),function(a){c.push(a)});if(c.length){var e=n.create("div",{className:"table-actions-container"},b);d.forEach(c,function(a){var b=n.create(a.onClick||a.href?"a":"div",{title:a.label,className:a.onClick||a.href?"linkPointer":""},e);a.showLabel&&n.create("div",{className:"inline-block",
innerHTML:a.label},b);a.icon&&n.create("div",{className:"inline-block",innerHTML:a.icon},b);a.href?b.href=a.href:a.onClick&&t(b,"click",function(){a.onClick()});a.handleNavigationError&&t(b,"click",function(){a.handleNavigationError()})})}else b=null;return b},toggleExecutionTimeline:function(){if(this.timelineRendered)n.empty(this.timelineAttach),this.timelineExpander.classList.remove("toggled"),this.timelineRendered=!1;else if(this.rootActivity&&this.rootActivity.children&&this.rootActivity.endDate)this.showExecutionTimeline(),
this.timelineExpander.classList.add("toggled"),this.timelineRendered=!0},showExecutionTimeline:function(){var a=this;n.create("div",{className:"containerLabel",innerHTML:i18n("Execution")},this.timelineAttach);var b=util.getCookie("timelineDocked");b||(b="true",util.setCookie("timelineDocked","true"));var c=n.create("div",{className:"timeline-dock-checkbox-container"},this.timelineAttach),b=new m({name:"isAuthorized",checked:"true"===b,onChange:function(){util.setCookie("timelineDocked",this.checked);
if(f.contains(a.timelineAttach,"timeline-fixed-position"))f.remove(a.timelineAttach,"timeline-fixed-position"),f.remove(a.executionHeader,"timeline-fixed-position"),a.timelineSpacer.style.height="0px"}});b.placeAt(c);n.create("label",{"for":b.get("id"),innerHTML:i18n("Dock timeline at top")},c);c=this.rootActivity.children;b=this.rootActivity;if(0<c.length)this.timeline={start:b.startDate,end:b.endDate,totalEnd:b.endDate-b.startDate,duration:b.duration,maxHeight:1,heightSection:31,marginTopSection:10,
line:n.create("div",{className:"timeline-container"},this.timelineAttach),elements:{iconStep:{},loadChild:{},step:{},steps:{},stepContainers:[]}};this._buildTimelineHeader();try{var e=1;d.forEach(c,function(b){3===e&&(e=1);a._createTimelineContainer(b,null,null,e);e++})}catch(h){}this._buildTimelineBackground();window&&t(window,"scroll",function(){if("true"===util.getCookie("timelineDocked"))try{var b=q.position(a.domNode);if(b&&8>b.y){if(!f.contains(a.timelineAttach,"timeline-fixed-position")&&(f.add(a.timelineAttach,
"timeline-fixed-position"),f.add(a.executionHeader,"timeline-fixed-position"),a.timeline&&a.timeline.maxHeight))a.timelineSpacer.style.height=a.timeline.maxHeight*a.timeline.heightSection+65+"px"}else if(f.contains(a.timelineAttach,"timeline-fixed-position"))f.remove(a.timelineAttach,"timeline-fixed-position"),f.remove(a.executionHeader,"timeline-fixed-position"),a.timelineSpacer.style.height="0px"}catch(c){}})},_buildTimelineHeader:function(){var a=n.create("div",{className:"timeline-time-container"},
this.timeline.line),b=n.create("div",{className:"timeline-header-box-time-left"},a);n.create("div",{innerHTML:i18n("Start"),className:"timeline-header-label"},b);n.create("div",{innerHTML:util.dateFormatShortSeconds(this.timeline.start),className:"timeline-header-text"},b);var b=n.create("div",{className:"inlineBlock timeline-header-box-summary"},a),c=n.create("div",{className:"inlineBlock timeline-header-box"},b);n.create("div",{innerHTML:i18n("Progress"),className:"timeline-header-label"},c);c.appendChild(u.progressFormatter(this.rootActivity,
n.create("div")));b=n.create("div",{className:"inlineBlock timeline-header-box"},b);n.create("div",{innerHTML:i18n("Duration"),className:"timeline-header-label"},b);n.create("div",{innerHTML:util.formatDuration(this.timeline.duration,{roundToNearestSecond:!0}),className:"timeline-header-text"},b);a=n.create("div",{className:"timeline-header-box-time-right"},a);n.create("div",{innerHTML:i18n("End"),className:"timeline-header-label"},a);n.create("div",{innerHTML:util.dateFormatShortSeconds(this.timeline.end),
className:"timeline-header-text"},a)},_timelineChildren:function(a,b,c,e){var f=this;if(c>this.timeline.maxHeight)this.timeline.maxHeight=c;d.forEach(a,function(a){f._createTimelineChild(a,b,c,e)})},_createTimelineChild:function(a,c,d,e,f,h){var j=this;if(a.componentProcessRequestId||a.childRequestId){var k=n.create("div",{className:"popup-line",innerHTML:i18n("(Click bar to view child execution)")}),f=f||j._createTimelineContainer(a,c,d,e,k);h&&n.place(k,h);this.timeline.elements.loadChild[a.componentProcessRequestId]=
function(){if(d+1>j.timeline.maxHeight)j.timeline.maxHeight=d+1;var f=bootstrap.restUrl,f=a.componentProcessRequestId?f+("workflow/componentProcessRequestChildren/"+a.componentProcessRequestId):f+("process/request/"+a.childRequestId+"/children");b.get({url:f,handleAs:"json",sync:!0,load:function(a){j._timelineChildren(a,c,d+1,e);j._buildTimelineBackground();n.destroy(k)}})};if(this.loadTimelineElement[a.componentProcessRequestId])this.timeline.elements.loadChild[a.componentProcessRequestId](),this.timeline.elements.loadChild[a.componentProcessRequestId]=
function(){};else var l=t(f,"click",function(){j.timeline.elements.loadChild[a.componentProcessRequestId]();j.timeline.elements.loadChild[a.componentProcessRequestId]=function(){};l.remove()})}else j._createTimelineContainer(a,c,d,e)},_createTimelineContainer:function(a,b,c,d,e){c||(c=1);var h=n.create("div",{className:"name-label"});n.place(u.nameFormatter(a),h);var j="timeline-step-group-",j=b&&b.id?j+b.id:j+a.id,k=a.startDate,l=100*((k-this.timeline.start)/this.timeline.totalEnd),m=100*(a.duration/
this.timeline.duration)-0.5||0;0>m&&(m=0);var q=n.create("div",{className:"timeline-step timeline-step-color-"+d+" "+j,style:{marginLeft:l+"%",position:"absolute",top:this.timeline.heightSection*c+this.timeline.marginTopSection+"px",width:k?m+"%":"1px"}},this.timeline.line);b&&b.id?(this.timeline.elements.steps[b.id].push(q),this.timeline.elements.step[a.id]=b.id):(this.timeline.elements.step[a.id]=a.id,this.timeline.elements.steps[a.id]=[q]);this.timeline.elements.stepContainers.push({step:c,container:q});
n.create("div",{className:"inlineBlock timeline-step-border timeline-step-border-left"},q);n.create("div",{className:"inlineBlock timeline-step-border timeline-step-border-right"},q);t(q,o.enter,function(){var b=s("."+a.id)[0];b&&(f.add(b,"hover"),t(q,o.leave,function(){f.remove(b,"hover")}))});j=n.create("div",{className:"popup-contents-container"});n.place(h,j);if(k){l=n.create("div",{className:"popup-line"},j);n.create("div",{className:"inlineBlock popup-label",innerHTML:i18n("Start Time")+": "},
l);n.create("div",{className:"inlineBlock popup-text",innerHTML:util.dateFormatShortSeconds(k)},l);if(k=a.duration)l=n.create("div",{className:"popup-line"},j),n.create("div",{className:"inlineBlock popup-label",innerHTML:i18n("Duration")+": "},l),n.create("div",{className:"inlineBlock popup-text",innerHTML:util.formatDuration(k,{roundToNearestSecond:!0})},l);k=u.progressFormatter(a,n.create("div"),!0);"0 / 0"!==k&&(l=n.create("div",{className:"popup-line"},j),n.create("div",{className:"inlineBlock popup-label",
innerHTML:i18n("Progress")+": "},l),n.create("div",{className:"inlineBlock popup-text",innerHTML:k},l))}k=n.create("div",{className:"popup-line"},j);n.create("div",{className:"inlineBlock popup-label",innerHTML:i18n("Status")+": "},k);k=n.create("div",{className:"inlineBlock popup-text"},k);l=n.create("div",{className:"inlineBlock status-container"},k);l=u.statusFormatter(a,l);m=l.replace(" ","-");q.className+="timeline-step timeline-step-color-"+m.toLowerCase();n.create("span",{innerHTML:l},k);e&&
n.place(e,j);e=new v({attachPoint:q,contents:j,autoWidth:!0});f.add(e.domNode,"popup"+a.id);this.timeline.elements[a.id]={bar:q,popup:e};(e=a.children)?this._timelineChildren(e,b||a,c+1,d):a.componentProcess&&1===c&&this._createTimelineChild(a,a,c,d,q,j);b=s(".general-icon",h);d=n.create("div");d.className=b[0]?b[0].className:"process-icon execution-timeline-icon";this.timeline.elements.iconStep[c]||(this.timeline.elements.iconStep[c]=d);return q},_buildTimelineBackground:function(){this.timeline.background&&
n.destroy(this.timeline.background);this.timeline.background=n.create("div",{className:"timeline-time-container timeline-background",style:{height:this.timeline.maxHeight*this.timeline.heightSection+1+"px"}},this.timeline.line);for(var a=0;a<this.timeline.maxHeight;a++){var b=n.create("div",{className:"timeline-section"+(a===this.timeline.maxHeight-1?" bottom-timeline-section":"")},this.timeline.background),c=this.timeline.elements.iconStep[a+1];c&&(b=n.create("div",{className:"timeline-icon-section"},
b),n.place(c,b))}},_isCancelable:function(a){return-1!==["INITIALIZED","EXECUTING","CANCELING","COMPENSATING","FAULTING"].indexOf(a)},pollExecutionData:function(){if(this.gridAttach){var a=q.position(this.gridAttach).h;r.set(this.executionAttach,"minHeight",a+40+"px")}this.loadExecution()},stopTimer:function(){if(this.timeout)clearTimeout(this.timeout),this.timeout=void 0},setUpTimer:function(){this.stopTimer();this.timeout=setTimeout(h.hitch(this,this.pollExecutionData),this.pollWaitMilliSeconds)},
queuedRequestsWatchHandler:function(a,b,c){this.stopTimer();this.executionFinished||c&&h.isArray(c)&&0===c.length&&this.setUpTimer()}})})},"deploy/widgets/process/request/ExecutionLogFormatters":function(){define("exports,dijit/form/Button,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Popup,deploy/widgets/approval/TaskResponseDialog,deploy/widgets/log/LiveLogViewer,deploy/widgets/patterns/PatternExecutionLogFormatters,deploy/widgets/process/ProcessIconsFormatter,deploy/widgets/resource/TransientResourceCompareTree,js/webext/widgets/Dialog,deploy/util/ErrorUtil,js/webext/widgets/table/TreeTable,deploy/widgets/version/VersionFileCompare,js/webext/widgets/FieldList".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){l.nameFormatter=function(a,c){var d=b.create("div");if(a.graphPosition)b.create("span",{innerHTML:a.graphPosition+".&nbsp;"},d),d.style.fontWeight="bold";if("agent"===a.specialNameType)d.appendChild(formatters.createIcon("agentIcon")),b.create("a",{href:"#agent/"+a.agent.id,innerHTML:a.agent.name.escape()},d),util.appendTextSpan(d,"&nbsp;");else if("tag"===a.specialNameType)d.appendChild(formatters.tagNameFormatter(a.tag));else if("resource"===a.specialNameType){d.appendChild(formatters.createIcon("componentIcon"));
var e=a.resource.path.replace(/\//g," / ").escape(),h=b.create("div",{innerHTML:e});c&&(e=a.resource.name.replace(/\//g," / ").escape());b.create("a",{href:"#resource/"+a.resource.id,innerHTML:e},d);c&&new f({attachPoint:d,contents:h});util.appendTextSpan(d,"&nbsp;")}else if("componentProcess"===a.specialNameType)d.appendChild(formatters.createIcon("origProcessIcon")),e=a.componentProcess.name.escape(),a.displayName&&(e=i18n("%s - %s",a.displayName.escape(),a.componentProcess.name.escape())),b.create("a",
{href:"#componentProcess/"+a.componentProcess.id+"/"+a.componentProcess.version,innerHTML:e},d),a.component&&a.version?(util.appendTextSpan(d,"&nbsp;("),b.create("a",{href:"#version/"+a.version.id,innerHTML:a.component.name.escape()+" "+a.version.name.escape()},d),util.appendTextSpan(d,")&nbsp;")):a.resource&&(util.appendTextSpan(d,"&nbsp;("),b.create("a",{href:"#resource/"+a.resource.id,innerHTML:a.resource.path.replace(/\//g," / ").escape()},d),util.appendTextSpan(d,")&nbsp;"));else if("plugin"===
a.specialNameType)e=q.getIconForStep(a,!0),b.create("div",{className:"inline-block execution-log-process-icon process-icon "+e+"-step-icon"},d),util.appendTextSpan(d,a.name.escape()+"&nbsp;"),a.command&&(e=i18n(a.command.plugin.name),h="",h="#RELEASE_VERSION#"===a.command.plugin.version?h+a.command.plugin.versionNumber:h+a.command.plugin.version,e=i18n("(%s v. %s)",util.escape(e),h),h=b.create("div"),b.create("a",{innerHTML:e,href:"#automationPlugin/"+a.command.plugin.id,className:"execution-log-process-link"},
c?h:d),c&&new f({attachPoint:d,contents:h}));else if(a.patternActivity)d=t.nameFormatter(d,a,c);else{a.type&&(e=q.getIconForStep({activity:a}),b.create("div",{className:"inline-block execution-log-process-icon process-icon "+e+"-step-icon"},d));e=a.displayName;if(!e)e=a.name;a.name&&util.appendTextSpan(d,e.escape()+"&nbsp;")}return d};l.roleFormatter=function(a){var b=i18n("");a.role?b=a.role.name:"componentApprovalIterator"!==a.type&&(b=i18n("Deleted Role"));return b};l.approvalTargetFormatter=function(a){var a=
a.task,c="";a&&(a.environment?c=b.create("a",{innerHTML:a.environment.name.escape(),href:"#environment/"+a.environment.id}):a.application?c=b.create("a",{innerHTML:a.application.name.escape(),href:"#application/"+a.application.id}):a.component&&(c=b.create("a",{innerHTML:a.component.name.escape(),href:"#component/"+a.component.id})));return c};l.taskCompletedByFormatter=function(a){var a=a.task,b="";if(a&&a.completedBy)b=a.completedBy,a.completedOn&&(b+=" ("+util.dateFormatShort(a.completedOn)+")");
return b};l.statusFormatter=function(a,b){var d="",e=a.state,f=a.result;a.failureCaught&&(f="FAULTED");b.style.textAlign="center";"CLOSED"===e&&a.notNeeded?(c.add(b,"gray-state-color"),"noResources"===a.notNeeded?d=i18n("Not Mapped"):"noComponents"===a.notNeeded?d=i18n("No Components Found"):"noVersionsSelected"===a.notNeeded?d=i18n("No Version Selected"):"noVersionsNeeded"===a.notNeeded?d=i18n("Already Installed"):"noConfigurationChanged"===a.notNeeded?d=i18n("Configuration Not Changed"):"offline"===
a.notNeeded?d=i18n("Agent Offline"):"roleNotFound"===a.notNeeded?d=i18n("Task Role Deleted"):"componentNotInApp"===a.notNeeded?d=i18n("Component Not Found"):"componentProcessDeleted"===a.notNeeded?d=i18n("Component Process Deleted"):"precondition"===a.notNeeded?d=i18n("Precondition Failed"):"genericProcessDeleted"===a.notNeeded&&(d=i18n("Generic Process Deleted"))):"CLOSED"===e&&"SUCCEEDED"===f?(c.add(b,"success-state-color"),d=i18n("Success")):"CLOSED"===e&&"CANCELED"===f?(c.add(b,"gray-state-color"),
d=i18n("Canceled")):"EXECUTING"===e?a.paused?(c.add(b,"gray-state-color"),d=i18n("Paused")):(c.add(b,"running-state-color"),d=i18n("Running")):"CLOSED"===e&&"FAULTED"===f||"FAULTING"===e?(c.add(b,"failed-state-color"),d=i18n("Failed")):"INITIALIZED"===e&&(c.add(b,"gray-state-color"),d=i18n("Not Started"));if(a.task)switch(a.task.status){case "OPEN":c.add(b,"running-state-color");d=i18n("Open");break;case "CLOSED":c.add(b,"success-state-color");d=i18n("Complete");break;case "FAILED":c.add(b,"failed-state-color");
d=i18n("Failed");break;case "CANCELLED":c.add(b,"gray-state-color"),d=i18n("Cancelled")}return d};l.actionsFormatter=function(d){var e=this,f=b.create("div");if(d.componentProcessRequest){var h=document.createElement("a");h.href="#componentProcessRequest/"+d.componentProcessRequest.id;h.innerHTML=i18n("Details");f.appendChild(h)}if(d.fault){h=b.create("a",{"class":"linkPointer"});h.onclick=function(){var a=new s,b=document.createElement("div");if(d.fault.message)b.innerHTML=util.escape(d.fault.message);
else if(d.fault.type)b.innerHTML=d.fault.type;a.containerNode.appendChild(b);d.fault.trace&&(new m({label:i18n("Full Details..."),onClick:function(){var a,b,c=new s,e=document.createElement("div"),f=d.fault.trace.split(/\r\n|\n|\r/);for(a=0;a<f.length;a++)b=f[a],b=b.replace(/\&/,"&amp;"),b=b.replace(/>/,"&gt;"),b=b.replace(/</,"&lt;"),b=b.replace(/\t/,"&nbsp;&nbsp;&nbsp;&nbsp;"),b=b.replace(/ /,"&nbsp;"),b="<div>"+b+"</div>",f[a]=b;e.innerHTML=f.join("");c.containerNode.appendChild(e);c.show()}})).placeAt(a.containerNode,
"last");a.show()};var j=document.createElement("img");j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_red.gif";j.title=i18n("Error Log");j.style.margin="0px 2px";h.appendChild(j);f.appendChild(h)}if(d.task)if("OPEN"===d.task.status)d.task.userCanModify&&(h=b.create("a",{"class":"linkPointer",innerHTML:i18n("Respond")},f),a(h,"click",function(){e.showApprovalDialog(d.task)}));else if(d.task.comment){var k=d.task,h=b.create("a",{"class":"linkPointer"},f);a(h,"click",function(){var a=new s,
b=document.createElement("div");b.innerHTML=k.comment?k.comment.escape():"";a.containerNode.appendChild(b);b=document.createElement("div");b.innerHTML="by "+util.escape(k.completedBy)+" on "+util.dateFormatShort(k.completedOn);b.style.marginTop="8px";b.style.marginLeft="12px";a.containerNode.appendChild(b);a.show()});j=document.createElement("img");j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_white.gif";j.title=i18n("Comment");j.style.margin="0px 2px";h.appendChild(j)}else if("CLOSED"===
d.task.status)h=document.createElement("span"),h.innerHTML=i18n("Completed by %s",util.escape(d.task.completedBy)),f.appendChild(h);else{if("FAILED"===d.task.status)h=document.createElement("span"),h.innerHTML=i18n("Failed by %s",util.escape(d.task.completedBy)),f.appendChild(h)}else if("plugin"===d.type){if("INITIALIZED"!==d.state){var l=new x;c.add(l.domNode,"logHeader");h=0;l.insertDiv(i18n("Working Directory"),util.escape(d.workingDir),h);h++;d.username&&(l.insertDiv(i18n("Impersonation User"),
util.escape(d.username),h),h++);d.password&&(l.insertDiv(i18n("Impersonation Password"),d.password,h),h++);d.group&&(l.insertDiv(i18n("Impersonation Group"),util.escape(d.group),h),h++);null!==d.useSudo&&void 0!==d.useSudo&&(l.insertDiv(i18n("Use Sudo"),d.useSudo,h),h++);d.exception?(h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){e.showErrorDialog(d)})):(h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){(new r({url:bootstrap.restUrl+"logView/trace/"+d.workflowTraceId+
"/"+d.id+"/stdOut.txt",propsUrl:bootstrap.restUrl+"workflow/"+d.workflowTraceId+"/"+d.id+"/properties",completedUrl:bootstrap.restUrl+"workflow/"+d.workflowTraceId+"/"+d.id+"/completed",title:i18n("Output Log"),autoRefresh:"EXECUTING"===d.state,header:l,paddingTop:"0px"})).show()}),j=document.createElement("img"),j.src=bootstrap.imageUrl+"icons/icon_output.gif",j.title=i18n("Output Log"),j.style.margin="0px 2px",h.appendChild(j),d.error?(h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){e.showErrorDialog(d)})):
(h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){(new r({url:bootstrap.restUrl+"logView/trace/"+d.workflowTraceId+"/"+d.id+"/log.txt",completedUrl:bootstrap.restUrl+"workflow/"+d.workflowTraceId+"/"+d.id+"/completed",title:i18n("Error Log"),autoRefresh:"EXECUTING"===d.state})).show()})),j=document.createElement("img"),j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_red.gif",j.title=i18n("Error Log"),j.style.margin="0px 2px",h.appendChild(j),h=b.create("a",{"class":"linkPointer"},
f),a(h,"click",function(){e.showPropertiesDialog(d)}),j=document.createElement("img"),j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_white.gif",j.title=i18n("Input/Output Properties"),j.style.margin="0px 2px",h.appendChild(j));if(d.detailsLink)h=document.createElement("a"),h.href=d.detailsLink,h.innerHTML=i18n("Details"),f.appendChild(h)}}else if("switch"===d.type){if("INITIALIZED"!==d.state)h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){var a=new s,b=new x;b.placeAt(a.containerNode);
b.insertDiv(i18n("Property Name"),d.propertyName.escape());b.insertDiv(i18n("Value at Runtime"),d.value.escape());a.show()}),j=document.createElement("img"),j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_white.gif",j.title=i18n("Error Log"),j.style.margin="0px 2px",h.appendChild(j)}else if("acquireLock"===d.type||"releaseLock"===d.type){if("INITIALIZED"!==d.state)h=b.create("a",{"class":"linkPointer"},f),a(h,"click",function(){var a=new s,b=new x;b.placeAt(a.containerNode);b.insertDiv(i18n("Lock Name"),
d.lockName.escape());a.show()}),j=document.createElement("img"),j.src=bootstrap.webextUrl+"images/webext/icons/icon_document_white.gif",j.title=i18n("Details"),j.style.margin="0px 2px",h.appendChild(j)}else if("runProcess"===d.type)(h=d.childRequestId)&&b.create("a",{innerHTML:i18n("View Child Execution"),href:"#processRequest/"+h},f);else if("componentProcess"===d.type)(h=d.componentProcessRequestId)&&b.create("a",{innerHTML:i18n("View Child Execution"),href:"#componentProcessRequest/"+h},f);d.patternActivity&&
t.actionsFormatter(d,f);return f};l.actionsMenuFormatter=function(a,b){var f=this,h=[],j=function(a){return'<div class="inlineBlock general-icon '+a+'" ></div>'};a.componentProcessRequest&&h.push({label:i18n("Details"),showLabel:!0,icon:j("pageIcon"),href:"#componentProcessRequest/"+a.componentProcessRequest.id});a.error?h.push({label:i18n("Error Log"),icon:j("pageIconRed"),onClick:function(){f.showErrorDialog(a)}}):a.fault&&h.push({label:i18n("Error Log"),icon:j("pageIconRed"),onClick:function(){var d=
new s,e=document.createElement("div");if(a.fault.message)e.innerHTML=util.escape(a.fault.message);else if(a.fault.type)e.innerHTML=a.fault.type;d.containerNode.appendChild(e);a.fault.trace&&((new m({label:i18n("Full Details..."),onClick:function(){var b,c,d=new s,e=document.createElement("div"),f=a.fault.trace.split(/\r\n|\n|\r/);for(b=0;b<f.length;b++)c=f[b],c=c.replace(/\&/,"&amp;"),c=c.replace(/>/,"&gt;"),c=c.replace(/</,"&lt;"),c=c.replace(/\t/,"&nbsp;&nbsp;&nbsp;&nbsp;"),c=c.replace(/ /,"&nbsp;"),
c="<div>"+c+"</div>",f[b]=c;e.innerHTML=f.join("");d.containerNode.appendChild(e);d.show()}})).placeAt(d.containerNode,"last"),c.add(b,"always-show-actions"));d.show()}});if(a.patternActivity)t.actionsMenuFormatter(a,b,h);else if(a.task)if("OPEN"===a.task.status)a.task.userCanModify&&(h.push({label:i18n("Respond"),showLabel:!0,onClick:function(){f.showApprovalDialog(a.task)}}),c.add(b,"always-show-actions"));else if(a.task.comment){var k=a.task;h.push({label:i18n("Completion Log"),icon:j("pageIcon"),
onClick:function(){var a=new s,b=document.createElement("div");b.innerHTML=k.comment?util.escape(k.comment):"";a.containerNode.appendChild(b);b=document.createElement("div");b.innerHTML="by "+util.escape(k.completedBy)+" on "+util.dateFormatShort(k.completedOn);b.style.marginTop="8px";b.style.marginLeft="12px";a.containerNode.appendChild(b);a.show()}})}else"CLOSED"===a.task.status?h.push({label:i18n("Completed by %s on %s",a.task.completedBy,util.dateFormatShort(a.task.completedOn)),showLabel:!0}):
"FAILED"===a.task.status&&h.push({label:i18n("Failed by %s on %s",a.task.completedBy,util.dateFormatShort(a.task.completedOn)),showLabel:!0});else if("plugin"===a.type){if("INITIALIZED"!==a.state){var l=new x;c.add(l.domNode,"logHeader");var n=0;l.insertDiv(i18n("Working Directory"),util.escape(a.workingDir),n);n++;a.username&&(l.insertDiv(i18n("Impersonation User"),util.escape(a.username),n),n++);a.password&&(l.insertDiv(i18n("Impersonation Password"),a.password,n),n++);a.group&&(l.insertDiv(i18n("Impersonation Group"),
util.escape(a.group),n),n++);null!==a.useSudo&&void 0!==a.useSudo&&(l.insertDiv(i18n("Use Sudo"),a.useSudo,n),n++);(!a.error||"CANCELED"===a.result)&&h.splice(0,0,{label:i18n("Output Log"),icon:j("consoleIcon"),onClick:function(){(new r({url:bootstrap.restUrl+"logView/trace/"+a.workflowTraceId+"/"+a.id+"/stdOut.txt",propsUrl:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/"+a.id+"/properties",completedUrl:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/"+a.id+"/completed",title:i18n("Output Log"),
autoRefresh:"EXECUTING"===a.state,header:l,paddingTop:"0px"})).show()}});!a.fault&&!a.error&&a.errorLogExists&&h.push({label:i18n("Error Log"),icon:j("pageIconRed"),onClick:function(){(new r({url:bootstrap.restUrl+"logView/trace/"+a.workflowTraceId+"/"+a.id+"/log.txt",completedUrl:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/"+a.id+"/completed",title:i18n("Error Log"),autoRefresh:"EXECUTING"===a.state})).show()}});h.push({label:i18n("Input/Output Properties"),icon:j("pageIcon"),onClick:function(){f.showPropertiesDialog(a)}});
e.forEach(a.extraLogs,function(b){-1!==a.extraLogs.indexOf(b+".compare")?h.push({label:b,icon:j("compareIcon"),onClick:function(){d.get({url:bootstrap.restUrl+"logView/trace/compare/"+a.workflowTraceId+"/"+a.id+"/"+b,handleAs:"json",load:function(a){if("resource"===a.type){var c=new s({title:i18n("Differences"),closable:!0,draggable:!1,width:-50});(new o({readOnly:!0,data:a.data})).placeAt(c.containerNode);c.show()}else"file"===a.type&&(new v({data:a.data,title:i18n("File Differences"),version1:b,
version2:b+".compare"})).show()}})}}):(-1===b.indexOf(".compare",b.length-8)||-1===a.extraLogs.indexOf(b.substring(0,b.length-8)))&&h.push({label:b,icon:j("extraLogIcon"),onClick:function(){(new r({url:bootstrap.restUrl+"logView/trace/"+a.workflowTraceId+"/"+a.id+"/"+b,completedUrl:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/"+a.id+"/completed",title:b,autoRefresh:"EXECUTING"===a.state})).show()}})});a.detailsLink&&h.push({label:i18n("Details"),showLabel:!0,href:a.detailsLink,handleNavigationError:function(){navBar.lastNotFoundAppReqHash===
this.href.substr(1)&&u.showErrorDialog(i18n("Deployment history details were deleted"),i18n("No deployment history is available for this application process request, because daily cleanup removed all the details."))}})}}else"switch"===a.type?"INITIALIZED"!==a.state&&"FAULTED"!==a.result&&h.push({label:i18n("Output Log"),icon:j("pageIcon"),onClick:function(){var b=new s({title:i18n("%s Output",util.escape(a.name))}),c=new x;c.placeAt(b.containerNode);c.insertDiv(i18n("Property Name"),a.propertyName.escape());
c.insertDiv(i18n("Value at Runtime"),a.value.escape());b.show()}}):("acquireLock"===a.type||"releaseLock"===a.type)&&"INITIALIZED"!==a.state&&"FAULTED"!==a.result?h.push({label:i18n("More Info"),icon:j("pageIcon"),onClick:function(){var b=new s,c=new x;c.placeAt(b.containerNode);c.insertDiv(i18n("Lock Name"),a.lockName.escape());b.show()}}):"runProcess"===a.type?(n=a.childRequestId)&&(h=[{label:i18n("View Child Execution"),showLabel:!0,href:"#processRequest/"+n}]):"componentProcess"===a.type?(n=a.componentProcessRequestId)&&
(h=[{label:i18n("View Child Execution"),showLabel:!0,href:"#componentProcessRequest/"+n}]):"resourceDiscovery"===a.type&&(a.error||h.splice(0,0,{label:i18n("Output Log"),icon:j("consoleIcon"),onClick:function(){(new r({url:bootstrap.restUrl+"logView/resourceDiscovery/"+a.logReferenceId+"/stdOut.txt",completedUrl:bootstrap.restUrl+"workflow/"+a.workflowTraceId+"/"+a.id+"/completed",title:i18n("Output Log"),autoRefresh:"EXECUTING"===a.state,paddingTop:"0px"})).show()}}),"COMPARE"===a.actionType&&"SUCCEEDED"===
a.result&&h.push({label:i18n("Compare with Live Cell"),icon:j("compareIcon"),onClick:function(){var b=new s({title:i18n("Compare with Live Cell"),closable:!0,draggable:!1,width:-50});(new o({readOnly:!0,url:bootstrap.restUrl+"resource/resource/transientCompare/"+a.resource.id+"/"+a.logReferenceId})).placeAt(b.containerNode);b.show()}}));a.iterationProperties&&h.push({label:i18n("Iteration Properties"),icon:j("pageIcon"),onClick:function(){f.showIterationPropertiesDialog(a)}});return h};l.showPropertiesDialog=
function(f){var h=f.id,j=new s,k=document.createElement("div"),l=document.createElement("div");l.className="hidden";var o="input",n=document.createElement("span");n.innerHTML=i18n("Input Properties");var m=b.create("a",{"class":"linkPointer",innerHTML:i18n("View Output Properties")});a(m,"click",function(){"output"===o?(c.add(l,"hidden"),c.remove(k,"hidden"),n.innerHTML=i18n("Input Properties"),m.innerHTML=i18n("View Output Properties"),o="input"):(c.add(k,"hidden"),c.remove(l,"hidden"),n.innerHTML=
i18n("Output Properties"),m.innerHTML=i18n("View Input Properties"),o="output")});var q=document.createElement("div");q.className="containerLabel";q.appendChild(n);util.appendTextSpan(q,"&nbsp; - &nbsp;");q.appendChild(m);var r=document.createElement("div");r.className="innerContainer";r.appendChild(l);r.appendChild(k);var t=document.createElement("div");t.style.maxWidth="700px";t.style.maxHeight="500px";t.style.overflow="auto";t.appendChild(q);t.appendChild(r);j.containerNode.appendChild(t);j.show();
d.get({url:bootstrap.restUrl+"workflow/"+f.workflowTraceId+"/"+h+"/properties",handleAs:"json",load:function(a){a.properties?(new w({data:a.properties,serverSideProcessing:!1,columns:[{name:i18n("Name"),field:"name","class":"activity-property-name",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Value"),field:"value","class":"activity-property-value",formatter:function(a,c){var d=b.create("div");c&&e.forEach(c.split("\n"),function(a){b.create("div",{innerHTML:a.escape()},d)});
return d}}],orderField:"name",hidePagination:!0,hideExpandCollapse:!0,hideFooter:!0,style:{maxWidth:"640px"}})).placeAt(k):util.appendTextSpan(l,i18n("No input properties are available at this time."));a.outputProps?(new w({data:a.outputProps,serverSideProcessing:!1,columns:[{name:i18n("Name"),field:"name","class":"activity-property-name",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Value"),field:"value","class":"activity-property-value",formatter:function(a,c){var d=b.create("div");
c&&e.forEach(c.split("\n"),function(a){b.create("div",{innerHTML:a.escape()},d)});return d}}],orderField:"name",hidePagination:!0,hideExpandCollapse:!0,hideFooter:!0,style:{maxWidth:"640px"}})).placeAt(l):util.appendTextSpan(l,i18n("No output properties are available at this time."))}})};l.showIterationPropertiesDialog=function(a){var c=new s({title:i18n("Iteration Properties")}),d=b.create("div",{style:{maxWidth:"700px",maxHeight:"500px",overflow:"auto"}},c.containerNode),d=b.create("div",{className:"innerContainer"},
d),f=[],h;for(h in a.iterationProperties)a.iterationProperties.hasOwnProperty(h)&&f.push({name:h,value:a.iterationProperties[h]});b.create("div",{innerHTML:i18n("These properties can be referenced by any steps inside this iteration using ${p:&lt;name&gt;}.")},d);(new w({data:f,serverSideProcessing:!1,columns:[{name:i18n("Name"),field:"name","class":"activity-property-name",orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Value"),field:"value","class":"activity-property-value",
formatter:function(a,c){var d=b.create("div");c&&e.forEach(c.split("\n"),function(a){b.create("div",{innerHTML:a.escape()},d)});return d}}],orderField:"name",noDataMessage:i18n("No iteration properties found."),hidePagination:!0,hideExpandCollapse:!0,hideFooter:!0,style:{maxWidth:"640px"}})).placeAt(d);c.show()};l.showErrorDialog=function(a){var c=new s,d=b.create("div",{style:{maxWidth:"700px",maxHeight:"500px",overflow:"auto"}},c.containerNode);b.create("div",{innerHTML:i18n("Error")},c.titleNode);
d=b.create("div",{},d);util.appendTextSpan(d,i18n(util.escape(a.exception)||util.escape(a.error)));c.show()};l.showApprovalDialog=function(a){new n({task:a})};l.progressFormatter=function(a,d,e){var f=["plugin","componentProcess","runProcess","patternResource"],h=b.create("div",{className:"inlineBlock progressContainer"});c.add(d,"progressCell");var d=this.getTotalChildCount(a,f),j=this.getClosedChildCount(a,f),k=this.getSucceededChildCount(a,f),a=this.getFailedChildCount(a,f);if(0<k||0===d)b.create("div",
{className:"inlineBlock progressMeter success-state-color"},h).style.width=0===d?"100%":100*(k/d)+"%";if(0<a)b.create("div",{className:"inlineBlock progressMeter failed-state-color"},h).style.width=100*(a/d)+"%";if(j<d)a=d-j,b.create("div",{className:"inlineBlock progressMeter running-state-color"},h).style.width=100*(a/d)+"%";d=b.create("div",{className:"progressLabel",innerHTML:j+" / "+d},h);if(e)h=d.innerHTML;return h};l.getTotalChildCount=function(a,b){var c=this,d=0;e.forEach(a.children,function(a){-1<
b.indexOf(a.type)&&d++;d+=c.getTotalChildCount(a,b)});return d};l.getClosedChildCount=function(a,b){var c=this,d=0;e.forEach(a.children,function(a){-1<b.indexOf(a.type)&&"CLOSED"===a.state&&d++;d+=c.getClosedChildCount(a,b)});return d};l.getSucceededChildCount=function(a,b){var c=this,d=0;e.forEach(a.children,function(a){-1<b.indexOf(a.type)&&"CLOSED"===a.state&&"SUCCEEDED"===a.result&&d++;d+=c.getSucceededChildCount(a,b)});return d};l.getFailedChildCount=function(a,b){var c=this,d=0;e.forEach(a.children,
function(a){-1<b.indexOf(a.type)&&"CLOSED"===a.state&&"FAULTED"===a.result&&d++;d+=c.getFailedChildCount(a,b)});return d}})},"deploy/widgets/process/ProcessList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/process/EditProcess,deploy/widgets/process/RunProcess,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,dijit/form/CheckBox,dojo/io/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return j("deploy.widgets.process.ProcessList",[m,l],{templateString:'<div class="processList"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',processListHash:null,baseGridUrl:null,basePasteUrl:null,readOnly:!1,postCreate:function(){this.inherited(arguments);var a=this;this.grid=new q({url:bootstrap.restUrl+"process",serverSideProcessing:!1,columns:[{name:i18n("Process"),formatter:b.processLinkFormatter,
orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Description"),field:"description",orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}},{name:i18n("Actions"),parentWidget:a,formatter:this.actionsFormatter}],tableConfigKey:"genericProcessList",noDataMessage:i18n("No processes found."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);if(config.data.permissions[security.system.createProcess]){var c=
new k({label:i18n("Create Process"),showTitle:!1,onClick:function(){a.showNewProcessDialog()}}),d={label:i18n("Import Process"),showTitle:!1,onClick:function(){a.showImportProcessDialog()}};c.placeAt(this.buttonAttach);(new k(d)).placeAt(this.buttonAttach);h.add(c.domNode,"idxButtonSpecial")}},showImportProcessDialog:function(){var a=this,b=new r({title:i18n("Import Process"),closable:!0,draggable:!0});a.importIsUpgrade=!1;a.importTemplateUpgradeType="USE_EXISTING_IF_EXISTS";var c=document.createElement("form");
c.target="formTarget";c.method="POST";c.enctype="multipart/form-data";c.encoding="multipart/form-data";dojo.addClass(c,"importForm");var e=document.createElement("div");dojo.addClass(e,"filInputContainer");var f=document.createElement("input");f.type="file";f.name="file";e.appendChild(f);var h=document.createElement("div");dojo.addClass(h,"labelsAndValues-row");var j=document.createElement("div");j.innerHTML=i18n("Upgrade Process");dojo.addClass(j,"labelsAndValues-labelCell inlineBlock");var l=document.createElement("div");
dojo.addClass(l,"labelsAndValues-valueCell inlineBlock");(new o({name:"upgradeComponent",checked:!1,onChange:function(){a.importIsUpgrade=this.get("checked");a.setFormAction(c)}})).placeAt(l);var m=d.create("div");(new k({label:i18n("Submit"),type:"submit"})).placeAt(m);h.appendChild(l);h.appendChild(j);c.appendChild(h);c.appendChild(e);c.appendChild(m);b.containerNode.appendChild(c);c.onsubmit=function(){var d=!0;f.value?(a.setFormAction(c),s.send({form:c,handleAs:"json",load:function(c){"ok"===
c.status?(b.hide(),b.destroy(),a.grid.refresh()):(new n({message:i18n("Error importing process: %s",c.error)})).startup()},error:function(a){(new n({message:i18n("Error importing process: %s",a.error)})).startup()}})):(new n({message:i18n("Please choose a process json file to import.")}),d=!1);return d};b.show()},setFormAction:function(a){var b=util.getCookie(bootstrap.expectedSessionCookieName);a.action=bootstrap.restUrl+"process/"+(!0===this.importIsUpgrade?"upgrade":"import")+"?"+bootstrap.expectedSessionCookieName+
"="+b},destroy:function(){this.inherited(arguments);this.grid.destroy();void 0!==this.copyGrid&&this.copyGrid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if(a.security.execute){var f=d.create("a",{innerHTML:i18n("Run"),"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.showRunProcessDialog(a)})}a.security["Edit Basic Settings"]&&d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Edit"),href:"#process/"+a.id+"/-1"},e);a.security.Delete&&
(f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e),c(f,"click",function(){b.confirmDelete(a)}));config.data.permissions[security.system.createProcess]&&(f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},e),c(f,"click",function(){b.showNewProcessDialog(a)}));a.security.read&&util.createDownloadAnchor({"class":"actionsLink linkPointer",innerHTML:i18n("Export"),href:bootstrap.restUrl+"process/"+a.id+"/export"},e);return e},showNewProcessDialog:function(b){var c=
new r({title:i18n("Create Process"),closable:!0,draggable:!0});(new a({source:b,callback:function(){c.hide();c.destroy()}})).placeAt(c.containerNode);c.show()},showRunProcessDialog:function(a){e.get({url:bootstrap.restUrl+"process/"+a.id+"/-1",handleAs:"json",load:function(a){var b=new r({title:i18n("Run Process"),closable:!0,draggable:!0});(new f({process:a,callback:function(){b.hide();b.destroy()}})).placeAt(b.containerNode);b.show()}})},confirmDelete:function(a){var b=this;new t({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",
a.name),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"process/"+a.id,load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new n({messages:[i18n("Error: "),"",util.escape(a.responseText)]})).startup();b.grid.unblock()}})}})}})})},"deploy/widgets/process/EditProcess":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect,deploy/widgets/security/TeamSelector,deploy/widgets/resource/ResourceSelector".split(","),
function(l,m,k,j,e,h,d,c,b){return k("deploy.widgets.process.EditProcess",[m,l],{templateString:'<div class="editProcess">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.existingValues={};this.properties=[];this.process?(this.existingValues=this.process,this.properties=this.process.properties):this.source?(j.get({url:bootstrap.restUrl+"process/"+this.source.id+"/-1",handleAs:"json",sync:!0,load:function(b){a.source=b}}),this.existingValues=
this.source,this.copyId=this.source.id,this.existingValues.name=void 0,this.properties=this.source.properties):(this.properties.push({name:"contextType",value:"Resource"}),j.get({url:bootstrap.restUrl+"security/teamsWithCreateAction/Process",handleAs:"json",sync:!0,load:function(b){a.existingValues.extendedSecurity={teams:b}}}));a.createForm()},createForm:function(){var a=this;this.form=new h({submitUrl:bootstrap.restUrl+"process",readOnly:a.readOnly,showButtons:!a.readOnly,postSubmit:function(b){navBar.setHash("process/"+
b.id+"/-1");void 0!==a.callback&&a.callback()},onError:function(b){b.responseText&&new e({message:util.escape(b.responseText)});a.process&&navBar.setHash("process/"+a.process.id+"/-1/configuration",!0,!1)},addData:function(b){if(a.process)b.existingId=a.process.id,b.processVersion=a.process.version;if(a.copyId)b.copyId=a.copyId;b.properties={contextType:b.contextType,workingDir:b.workingDir};b.teamMappings=a.teamSelector.teams},onCancel:function(){void 0!==a.callback&&a.callback()},cancelLabel:void 0===
a.process?i18n("Cancel"):void 0});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});var f=[];if(a.existingValues&&a.existingValues.extendedSecurity&&a.existingValues.extendedSecurity.teams)f=a.existingValues.extendedSecurity.teams;a.teamSelector=new c({readOnly:a.readOnly,resourceRoleType:"Process",noneLabel:i18n("Standard Process"),
teams:f});this.form.addField({name:"teams",label:i18n("Teams"),type:"Text",widget:a.teamSelector});f=new b({url:bootstrap.restUrl+"resource/resource/tree",value:a.existingValues.defaultResourceId,isSelectable:function(a){return a.hasAgent}});this.form.addField({name:"defaultResourceId",label:i18n("Default Resource"),widget:f});this.form.addField({name:"workingDir",label:i18n("Default Working Directory"),type:"Text",description:i18n("The default working directory for plugin steps in this process"),
required:!0,bidiDynamicSTT:"FILE_PATH",value:util.getNamedPropertyValue(a.properties,"workingDir")||"${p:resource/work.dir}/${p:process.name}"});f=new d({disabled:a.readOnly,restUrl:bootstrap.restUrl+"notification/notificationScheme",value:this.existingValues.notificationSchemeId});this.form.addField({name:"notificationSchemeId",label:i18n("Notification Scheme"),description:i18n("A notification scheme to use when handling events generated by this process."),widget:f});this.form.placeAt(this.formAttach)}})})},
"deploy/widgets/process/RunProcess":function(){define("js/webext/widgets/ColumnForm,js/webext/widgets/Alert,dojo/_base/lang,dijit/_Widget,dijit/_TemplatedMixin,dijit/form/FilteringSelect,dojox/data/JsonRestStore,js/webext/widgets/Dialog,js/webext/widgets/DomNode,dojo/_base/declare,dojo/_base/array,deploy/widgets/resource/ResourceSelector".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n){return a([j,e],{templateString:'<div class="runProcess">  <div data-dojo-attach-point="formAttach" style="max-height: 500px; overflow: auto;"></div></div>',
postCreate:function(){this.inherited(arguments);var a=this;f.forEach(a.process.propDefs,function(a){if(!a.required)a.allowNone=!0});this.form=new l({submitUrl:bootstrap.restUrl+"process/request",submitMethod:"POST",cancelLabel:a.callback?i18n("Cancel"):null,addData:function(b){b.properties=k.clone(b);b.processId=a.process.id},postSubmit:function(b){void 0!==a.callback&&a.callback();navBar.setHash("#processRequest/"+b.id)},onCancel:function(){void 0!==a.callback&&a.callback()},onError:function(b){void 0!==
a.callback&&a.callback();new m({title:i18n("Error"),messages:[i18n("An error has occurred while submitting the process request:"),"",util.escape(b.responseText)]})},saveLabel:i18n("Submit"),fields:a.process.propDefs});if("Resource"===util.getNamedPropertyValue(a.process.properties,"contextType")){var b=new n({url:bootstrap.restUrl+"resource/resource/tree",value:a.process.defaultResourceId,isSelectable:function(a){return a.hasAgent}});a.form.addField({name:"resource",label:i18n("Resource"),widget:b,
required:!0});a.showProcessProperties()}this.form.placeAt(this.formAttach)},showProcessProperties:function(){var a=this;void 0!==this.process&&f.forEach(a.process.unfilledProperties,function(b){var c=b.name;if(""===b.label)b.label=b.name;a.form.addField({name:c,type:b.type,description:b.description,required:b.required,value:b.value,label:b.label,allowedValues:b.allowedValues},"_propertiesInsert")})}})})},"deploy/widgets/process/ProcessEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/process/EditProcess,deploy/widgets/property/PropDefs".split(","),
function(l,m,k,j,e,h,d,c){return m([h],{postCreate:function(){this.inherited(arguments);this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Process Properties"),action:function(){b.addHeading(i18n("Process Properties"));b.showProperties()}})},addHeading:function(b){e.create("div",
{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){e.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({process:appState.process,readOnly:!appState.process.security["Edit Basic Settings"]})).placeAt(this.detailAttach)},showProperties:function(){(new c({readOnly:!appState.process.security["Manage Properties"]||appState.process.version!==appState.process.versionCount,getUrl:bootstrap.restUrl+"process/"+appState.process.id+
"/"+appState.process.version+"/propDefs",deleteUrl:bootstrap.restUrl+"process/"+appState.process.id+"/propDefs/{propertyName}",saveUrl:bootstrap.restUrl+"process/"+appState.process.id+"/propDefs",refreshHash:"process/"+appState.process.id+"/-1/configuration/properties",propSheetDef:appState.process.propSheetDef,deleteHeaders:{processVersion:appState.process.version},addData:function(b){b.processVersion=appState.process.version}})).placeAt(this.detailAttach)}})})},"deploy/widgets/DateRangeSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/DateTextBox,dijit/form/Select,dijit/form/TextBox,dijit/popup,dojo/_base/declare,dojo/date,dojo/dom-construct,dojo/on".split(","),
function(l,m,k,j,e,h,d,c){return d("deploy.widgets.DateRangeSelector",[m,l],{templateString:'<div class="date-range-selector"><div class="inlineBlock" data-dojo-attach-point="selectAttach"></div><div class="inlineBlock date-range-wrapper"><div data-dojo-attach-point="startDateAttach" class="inlineBlock selectedDate"></div><div data-dojo-attach-point="endDateAttach" class="inlineBlock selectedDate"></div><div data-dojo-attach-point="timeUnitAttach" class="inlineBlock selectedDate"></div></div><div id="customDateRangeDropDown" class="dateRangeDropDown" data-dojo-attach-point="dropDownAttach"></div></div>',
startDateAttach:null,endDateAttach:null,timeUnitAttach:null,startDateSelector:null,endDateSelector:null,selectAttach:null,dropDownAttach:null,rangeSelect:null,timeUnitSelect:null,startDate:null,endDate:null,customDateRangeSelector:null,value:"currentMonth",popup:null,timeUnit:"TIME_UNIT_DAY",constructor:function(b){this.inherited(arguments)},buildRendering:function(){this.inherited(arguments);var b=this;b.rangeSelect=new j({name:"dateRange",options:[{label:i18n("Current Week"),value:"currentWeek"},
{label:i18n("Prior Week"),value:"priorWeek"},{label:i18n("Current Month"),value:"currentMonth",selected:!0},{label:i18n("Prior Month"),value:"priorMonth"},{label:i18n("Current Quarter"),value:"currentQuarter"},{label:i18n("Prior Quarter"),value:"priorQuarter"},{label:i18n("Current Year"),value:"currentYear"},{label:i18n("Prior Year"),value:"priorYear"},{label:i18n("Custom"),value:"custom"}],onChange:function(a){b.rangeSelectChanged(a)},style:{width:"200px"}});b.rangeSelect.placeAt(b.selectAttach);
b.timeUnitSelect=new j({name:"time_unit",options:[{label:'<img src="'+bootstrap.imageUrl+'icons/icon_month_picker.gif"/>'+i18n("Months"),value:"TIME_UNIT_MONTH"},{label:'<img src="'+bootstrap.imageUrl+'icons/icon_week_picker.gif"/>'+i18n("Weeks"),value:"TIME_UNIT_WEEK"},{label:'<img src="'+bootstrap.imageUrl+'icons/icon_day_picker.gif"/>'+i18n("Days"),value:"TIME_UNIT_DAY"}],value:b.timeUnit,onChange:function(a){b.timeUnit=a}});b.timeUnitSelect.placeAt(b.timeUnitAttach);b.startDateSelector=new k({name:"startDate",
forceWidth:!1,style:{width:"120px"},format:function(a){return util.dayFormatShort(a)},onChange:function(a){b.startDate=new Date(a)}});b.startDateSelector.placeAt(b.startDateAttach);b.endDateSelector=new k({forceWidth:!1,name:"endDate",style:{width:"120px"},format:function(a){return util.dayFormatShort(a)},onChange:function(a){b.endDate=new Date(a)}});b.endDateSelector.placeAt(b.endDateAttach);b.disableDateEntry();b.setDisplayedValue()},destroy:function(){this.inherited(arguments);var b=this.timeUnitSelect;
b&&b.destroy();(b=this.startDateSelect)&&b.destroy();(b=this.endDateSelect)&&b.destroy();(b=this.rangeSelect)&&b.destroy()},rangeSelectChanged:function(b){this.value=b;"currentWeek"===b||"priorWeek"===b||"currentMonth"===b||"priorMonth"===b?(this.timeUnit="TIME_UNIT_DAY",this.setDisplayedValue(),this.disableDateEntry()):"currentQuarter"===b||"priorQuarter"===b?(this.timeUnit="TIME_UNIT_WEEK",this.setDisplayedValue(),this.disableDateEntry()):"currentYear"===b||"priorYear"===b?(this.timeUnit="TIME_UNIT_MONTH",
this.setDisplayedValue(),this.disableDateEntry()):this.fromSetValue||this.enableDateEntry();this.fromSetValue=!1},getStartDate:function(){this.switchDatesIfNecessary();return this.startDate},getEndDate:function(){this.switchDatesIfNecessary();var b=this.endDate;b.setHours(23);b.setMinutes(59);b.setSeconds(59);b.setMilliseconds(999);return this.endDate},getTimeUnit:function(){return this.timeUnit},fromSetValue:!1,_getStartOfWeek:function(b){b.setDate(b.getDate()-b.getDay());return b},_getEndOfWeek:function(b){b.setDate(b.getDate()+
(6-b.getDay()));return b},setDisplayedValue:function(){var b,a,d=new Date,e=new Date;switch(this.value){case "priorWeek":d=c.add(d,"day",-7);e=c.add(e,"day",-7);d=this._getStartOfWeek(d);e=this._getEndOfWeek(e);b=d;a=e;break;case "currentWeek":d=this._getStartOfWeek(d);e=this._getEndOfWeek(e);b=d;a=e;break;case "currentMonth":d.setDate(1);e.setDate(c.getDaysInMonth(e));b=d;a=e;break;case "priorMonth":d.setDate(15);e.setDate(15);d=c.add(d,"month",-1);e=c.add(e,"month",-1);d.setDate(1);e.setDate(c.getDaysInMonth(e));
b=d;a=e;break;case "currentYear":d.setMonth(0);d.setDate(1);e.setMonth(11);e.setDate(c.getDaysInMonth(e));b=d;a=e;break;case "priorYear":d=c.add(d,"year",-1);e=c.add(e,"year",-1);d.setMonth(0);d.setDate(1);e.setMonth(11);e.setDate(c.getDaysInMonth(e));b=d;a=e;break;case "currentQuarter":d=this._getStartOfQuarter(d);e=this._getEndOfQuarter(e);b=d;a=e;break;case "priorQuarter":d.setDate(15);e.setDate(15);d=c.add(d,"month",-3);e=c.add(e,"month",-3);d=this._getStartOfQuarter(d);e=this._getEndOfQuarter(e);
b=d;a=e;break;case "custom":b=this.startDate,a=this.endDate}this.startDateSelector.set("value",b);this.endDateSelector.set("value",a);this.timeUnitSelect.set("value",this.timeUnit)},_getStartOfQuarter:function(b){b.setDate(1);2>=b.getMonth()?b.setMonth(0):5>=b.getMonth()?b.setMonth(3):8>=b.getMonth()?b.setMonth(6):b.setMonth(9);return b},_getEndOfQuarter:function(b){b.setDate(1);2>=b.getMonth()?b.setMonth(2):5>=b.getMonth()?b.setMonth(5):8>=b.getMonth()?b.setMonth(8):b.setMonth(11);b.setDate(c.getDaysInMonth(b));
return b},disableDateEntry:function(){this.startDateSelector.set("disabled",!0);this.endDateSelector.set("disabled",!0)},enableDateEntry:function(){this.startDateSelector.set("disabled",!1);this.endDateSelector.set("disabled",!1)},switchDatesIfNecessary:function(){"custom"===this.value&&this.startDate>this.endDate&&this.switchDates()},switchDates:function(){var b=this.endDate;this.endDate=this.startDate;this.startDate=b;this.setDisplayedValue()}})})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentComparisonClient":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/request","dojo/string","deploy/util/DeployTableFilterHelper"],function(l,m,k,j,e){return l([],{environmentUrl:"/rest/deploy/environment",allPropertiesUrl:"/rest/deploy/environment/allProperties",environmentPropDefsUrlTemplate:"/rest/deploy/application/${applicationId}/environmentPropDefs",csvUrlTemplate:"/rest/deploy/application/${applicationId}/environmentComparisonCSV",generateEnvironmentDeployTableFilters:function(h){var d=[];_.has(h,"ids")&&d.push((new e).generateUUIDInFilter("id",
h.ids));_.has(h,"applicationId")&&d.push((new e).generateUUIDFilter("application.id",h.applicationId));return d},getEnvironments:function(h,d){var c=this.generateEnvironmentDeployTableFilters(h),c=(new e).generateQueryParams(c);d||(d="BASIC");c.outputType=d;c.orderField="order";return this._normalizedRequest(this.environmentUrl,{query:c})},getAllProperties:function(e){return this._normalizedRequest(this.allPropertiesUrl,{query:this.generateAllPropertiesQuery(e)})},generateAllPropertiesQuery:function(e){return e.environmentIds.map(function(d){return"id="+
d}).join("&")},getEnvironmentPropDefsUrl:function(e){return j.substitute(this.environmentPropDefsUrlTemplate,{applicationId:e})},getEnvironmentPropDefs:function(e){return this._normalizedRequest(this.getEnvironmentPropDefsUrl(e))},generateCsvHref:function(e,d){var c="";d.environmentIds.forEach(function(b){c=0<c.length?c+("&id="+b):c+("id="+b)});return j.substitute(this.csvUrlTemplate,{applicationId:e})+"?"+c},_normalizedRequest:function(e,d){var c={handleAs:"json"};m.mixin(c,d);return k(e,c).then(void 0,
function(b){if(b&&b.response&&b.response.text)throw b.response.text;throw b;})}})})},"dojo/request":function(){define(["./request/default!"],function(l){return l})},"dojo/request/default":function(){define(["exports","require","../has"],function(l,m,k){var j=k("config-requestProvider");j||(j="./xhr");l.getPlatformDefaultId=function(){return"./xhr"};l.load=function(e,h,d){m(["platform"==e?"./xhr":j],function(c){d(c)})}})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonConfig":function(){define(["dojo/_base/lang",
"dojo/_base/declare"],function(l,m){return m([],{MAX_ALLOWED_ENVIRONMENTS:40,constructor:function(k){void 0===k&&(k={});this._applicationId=k.applicationId;this._referenceEnvironmentId=k.referenceEnvironmentId;this._environmentIds=k.environmentIds;Object.freeze(this)},getApplicationId:function(){return this._applicationId},getReferenceEnvironmentId:function(){return this._referenceEnvironmentId},getEnvironmentIds:function(){return this._environmentIds.slice()},isActionable:function(){return!!this._applicationId&&
!!this._referenceEnvironmentId&&0<this._environmentIds.length&&40>=this._environmentIds.length+1}})})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonFilter":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/on,dojo/query,dojox/html/entities,deploy/widgets/multiEnvironmentComparison/EnvironmentComparisonSelector,js/webext/widgets/Alert,js/webext/widgets/Dialog".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j([m,l],{templateString:'<div class="environmentPropertyComparisonConfigureCompare">   <div data-dojo-attach-point="configurationButtonAttach"></div></div>',invalidConfigurationError:i18n("Please supply a valid configuration."),postCreate:function(){this.inherited(arguments);this.dataManager.on("environmentListDataAvailable",this.redraw.bind(this))},redraw:function(){d.empty(this.configurationButtonAttach);this.configurationButton=this.createConfigureComparisonButton();
this.configurationButton.placeAt(this.configurationButtonAttach);(!this.dataManager.getReferenceEnvironment()||!this.dataManager.getOtherEnvironments())&&this.launchConfigurationDialog()},createConfigureComparisonButton:function(){var a=new k({label:i18n("Select Environments"),showTitle:!1,onClick:function(){this.launchConfigurationDialog()}.bind(this)});h.add(a.domNode,"idxButtonSpecial");return a},launchConfigurationDialog:function(){var a=new t({title:i18n("Select Environments"),closable:!0,draggable:!1});
this.environmentSelector=new n({dataManager:this.dataManager,callback:function(){a.hide();a.destroy()}});this.environmentSelector.placeAt(a.containerNode);a.show()}})})},"deploy/widgets/multiEnvironmentComparison/EnvironmentComparisonSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/on,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/string,dojox/html/entities,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonConfig,js/webext/widgets/ColumnForm,js/util/blocker/_BlockerMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.multiEnvironmentComparison.EnvironmentComparisonSelector",[m,l,r],{templateString:'<div class="environmentSelectionWidget">   <div data-dojo-attach-point="environmentSelectionFormAttach"></div>   <div data-dojo-attach-point="compareButtonAttach"></div></div>',comparisonEnvContainsReferenceError:i18n("Your comparison environments cannot contain the reference environment."),tooManyEnvironmentsError:i18n("Only ${maxAllowed} environments can be compared at a time. (You have selected ${numEnvs}.)"),
postCreate:function(a){this.inherited(arguments);this.envSelectionForm=new n({showButtons:!1,validateFields:this.validateData.bind(this),onSubmit:this.submitNewConfig.bind(this),postSubmit:function(a){void 0!==this.callback&&this.callback(a)}.bind(this)});this.selectAll=this.generateSelectAllDOM();d.place(this.selectAll,this.envSelectionForm.formAttach,"after");this.envSelectionForm.addField(this.createReferenceEnvironmentField());this.envSelectionForm.addField(this.createInitialComparisonEnvironmentsField());
this.envSelectionForm.placeAt(this.environmentSelectionFormAttach);this.createCompareButton().placeAt(this.compareButtonAttach)},selectAllTemplate:'<div>    <div class="selectAllLabel">'+i18n("Select All")+"</div></div>",generateSelectAllDOM:function(){var a=d.toDom(this.selectAllTemplate);e(a,"click",function(){var a=this.envSelectionForm.getData().refEnvSelect,b=this.dataManager.getAllEnvironments().filter(function(b){return b.id!==a}.bind(this)),b=this.createComparisonEnvironmentsField(b,b);this.envSelectionForm.removeField("compEnvSelect");
this.envSelectionForm.addField(b)}.bind(this));return a},createReferenceEnvironmentField:function(){var a=this.dataManager;return{name:"refEnvSelect",label:i18n("Reference Environment"),required:!0,description:i18n("Select the environment to use as the base of the comparison."),type:"TableFilterSelect",value:a.getReferenceEnvironment()?a.getReferenceEnvironment().id:void 0,data:a.getAllEnvironments(),onSetItem:function(b,c){var d=this.envSelectionForm,e=d.getData().compEnvSelect;if(b&&1<d.fieldsArray.length){var f=
e.split(","),e=a.getAllEnvironments().filter(function(a){return a.id!==c.id&&-1<f.indexOf(a.id)}),h=a.getAllEnvironments().filter(function(a){return a.id!==c.id}),e=this.createComparisonEnvironmentsField(e,h);d.removeField("compEnvSelect");d.addField(e)}}.bind(this)}},createComparisonEnvironmentsField:function(a,b){var d={name:"compEnvSelect",label:i18n("Comparison Environments"),required:!0,description:i18n("Select the environments to compare."),type:"OrderedColoredMultiSelect",value:a,data:b,onAdd:function(){c.set(this.selectAll,
"display","none")}.bind(this),onRemove:function(){this.envSelectionForm.getData().compEnvSelect?c.set(this.selectAll,"display","none"):c.set(this.selectAll,"display","inline-block")}.bind(this)};(!a||0===a.length)&&c.set(this.selectAll,"display","inline-block");return d},createInitialComparisonEnvironmentsField:function(){var a=this.dataManager,b=a.getOtherEnvironments()||void 0,a=a.getAllEnvironments().filter(function(a){return a.id!==this.envSelectionForm.getData().refEnvSelect}.bind(this));return this.createComparisonEnvironmentsField(b,
a)},createCompareButton:function(){var a=new k({label:i18n("Compare Environments"),showTitle:!1,onClick:function(){this.envSelectionForm.submitForm()}.bind(this)});h.add(a.domNode,"idxButtonSpecial");return a},validateData:function(a){var c=[],d=a.refEnvSelect,a=a.compEnvSelect.split(",");-1<dojo.indexOf(a,d)&&c.push(this.comparisonEnvContainsReferenceError);d=a.length+1;a=this.dataManager.getConfig().MAX_ALLOWED_ENVIRONMENTS;d>a&&c.push(b.substitute(this.tooManyEnvironmentsError,{maxAllowed:a,numEnvs:d}));
return c},submitNewConfig:function(a){var b=this.dataManager.getConfig(),c=a.compEnvSelect.split(",");this.dataManager.setConfig(new f({applicationId:b.getApplicationId(),referenceEnvironmentId:a.refEnvSelect,environmentIds:c}))}})})},"deploy/widgets/multiEnvironmentComparison/PropertyComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/string,dojo/dom-class,dojo/dom-construct,dojox/html/entities".split(","),function(l,m,k,j,e,h,d){return k([m,l],{templateString:'<div class="property-comparison-popup">    <div class="title" data-dojo-attach-point="titleDiv"></div>    <table>        <thead>            <tr data-dojo-attach-point="headerRow"></tr>        </thead>        <tbody>            <tr data-dojo-attach-point="propertyValueRow"></tr>        </tbody>    </table></div>',
postCreate:function(){this.inherited(arguments);this.titleDiv.innerText=i18n("Property Comparison Detail");this.generateEnvironmentHeaders();this.generateBody()},generateEnvironmentHeaders:function(){this.headerRow.innerHTML="";h.place("<td></td>",this.headerRow);h.place(this.generateEnvironmentHeaderDom(this.referenceEnvironment),this.headerRow);h.place(this.generateEnvironmentHeaderDom(this.environment),this.headerRow)},environmentHeaderTemplate:"<td>${environmentName}</td>",generateEnvironmentHeaderDom:function(c){return h.toDom(j.substitute(this.environmentHeaderTemplate,
{environmentName:d.encode(c.name)}))},generateBody:function(){this.propertyValueRow.innerHTML="";h.place("<th>"+d.encode(this.propDef.name)+"</th>",this.propertyValueRow);h.place(this.generatePropertyCellDom(this.referenceEnvironment,this.propDef),this.propertyValueRow);h.place(this.generatePropertyCellDom(this.environment,this.propDef),this.propertyValueRow)},propertyCellTemplate:'<td class="${cellClass}">${propertyValue}</td>',generatePropertyCellDom:function(c,b){var a=this.dataManager.getProperty(b,
c),a=d.encode(a.value||""),e="";a||(a="("+i18n("Empty")+")",e="empty");a=a.replace("\n","<br>");return h.toDom(j.substitute(this.propertyCellTemplate,{cellClass:e,propertyValue:a}))}})})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparison":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentComparisonClient,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonConfig,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonDataManager,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonFilter,deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonGrid,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b){return k([m,l],{templateString:'<div class="multiEnvironmentConfigComparison"><div class="preamble clearfix"><div style="float:left;"><div>'+i18n("Select two or more environments to compare the environment properties between them.")+'<br></div><div data-dojo-attach-point="filterAttach"></div></div><div style="float:right;" data-dojo-attach-point="legendAttach"></div></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);
this.dataClient=new j;this.dataManager=new h({application:appState.application,dataClient:this.dataClient});this.dataManager.on("configChanged",this.dataManager.refreshData.bind(this.dataManager));this.dataManager.on("initDataError, refreshedDataError",this.handleError.bind(this));this.gridWidget=new c({dataManager:this.dataManager});this.gridWidget.placeAt(this.gridAttach);this.filterWidget=new d({dataManager:this.dataManager});this.filterWidget.placeAt(this.filterAttach);this.gridWidget.createLegendWidget().placeAt(this.legendAttach);
this.dataManager.initEnvironmentListData()},handleError:function(a){a&&new b({message:util.escape(a)})}})})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonDataManager":function(){define(["dojo/_base/declare","dojo/Evented","dojo/promise/all","deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonConfig"],function(l,m,k,j){return l("deploy.widgets.multiEnvironmentComparison.MultiEnvironmentConfigComparisonDataManager",[m],{constructor:function(e){this._config=
e.config||new j({applicationId:e.application.id});this._dataClient=e.dataClient;this._application=e.application;this._emptyData()},_emptyData:function(){this._referenceEnvironment=null;this._environments=[];this._propData={}},isAllPropertyDataReady:function(){return!!this._allPropertyDataCall&&this._allPropertyDataCall.isFulfilled()},isEnvironmentListDataReady:function(){return!!this._environmentListDataCall&&this._environmentListDataCall.isFulfilled()},getConfig:function(){return this._config},setConfig:function(e){this._config=
e;this.emit("configChanged")},getReferenceEnvironment:function(){if(!this.isEnvironmentListDataReady())throw"Environment List Data not ready";return this._referenceEnvironment},areThereAnyProperties:function(){var e=!1;this.isAllPropertyDataReady()&&this._propDefData.forEach(function(h){0<h.propDefs.length&&(e=!0)});return e},getOtherEnvironments:function(){if(!this.isEnvironmentListDataReady())throw"Environment List Data not ready";return this._environments},getAllEnvironments:function(){if(!this.isEnvironmentListDataReady())throw"Environment List Data not ready";
return this._allEnvironments},getPropSheetDefs:function(){if(!this.isAllPropertyDataReady())throw"All Property Data not ready";return this._propDefData},getProperty:function(e,h){if(!this.isAllPropertyDataReady())throw"All Property Data not ready!";var d;d=this._propData[h.id];(d=e.componentId?_.find(d.componentProperties[e.componentId],function(c){return c.name===e.name}):e.environmentTemplateId?_.find(d.environmentTemplateProperties[e.environmentTemplateId],function(c){return c.name===e.name}):
_.find(d.environmentProperties,function(c){return c.name===e.name}))||(d={});return d},initEnvironmentListData:function(){if(this._environmentListDataCall)return this._environmentListDataCall;this._environmentListDataCall=this._dataClient.getEnvironments({applicationId:this._application.id});this._environmentListDataCall.then(function(e){this._allEnvironments=e;this.emit("environmentListDataAvailable")}.bind(this),function(e){this._emptyData();this.emit("environmentListDataError",e)}.bind(this));
this.emit("environmentListDataLoading");return this._environmentListDataCall},refreshData:function(){if(this._allPropertyDataCall&&!this._allPropertyDataCall.isFulfilled())return this._allPropertyDataCall;if(!this._config.isActionable())throw"Provided config object is not actionable";var e=this._config.getEnvironmentIds();e.push(this._config.getReferenceEnvironmentId());var h=this.initEnvironmentListData().then(function(c){var b=this._config.getReferenceEnvironmentId(),a=this._config.getEnvironmentIds();
this._allEnvironments=c;this._referenceEnvironment=c.filter(function(a){return a.id===b})[0];this._environments=[];a.forEach(function(a){this._environments.push(_.find(c,function(b){return a===b.id}))}.bind(this));return this._environments}.bind(this)),d=this._dataClient.getAllProperties({environmentIds:e}).then(function(c){return this._propData=c}.bind(this)),e=this._dataClient.getEnvironmentPropDefs(this._config.getApplicationId()).then(function(c){return this.augmentPropDefInfoAndAddEnvProps(c,
d)}.bind(this)).then(function(c){return this._propDefData=c}.bind(this));this._allPropertyDataCall=k([h,e,d]);this._allPropertyDataCall.then(function(){this.emit("allPropertyDataAvailable")}.bind(this),function(c){this._emptyData();this.emit("allPropertyDataError",c)}.bind(this));this.emit("allPropertyDataLoading");return this._allPropertyDataCall},getCsvDataLink:function(){var e=this._config.getEnvironmentIds();e.splice(0,0,this._config.getReferenceEnvironmentId());return this._dataClient.generateCsvHref(this._config.getApplicationId(),
{environmentIds:e})},augmentPropDefInfoAndAddEnvProps:function(e,h){var d=[];e.forEach(function(c){c.propDefs.forEach(function(b){b.propSheetDefId=c.id;b.componentId=c.componentId;b.environmentTemplateId=c.environmentTemplateId});c.componentId?d.push(c):c.environmentTemplateId&&d.splice(0,0,c)});return h.then(function(c){c=this.generatePseudoPropDefSheetForEnvProps(c);d.splice(0,0,c);return d}.bind(this))},_addPseudoPropDefToSheet:function(e,h){e.propDefs.push({name:h.name,required:!1,description:h.description})},
generatePseudoPropDefSheetForEnvProps:function(e){var h={propDefs:[]},d={};_.values(e).forEach(function(c){_.values(c.environmentProperties).forEach(function(b){_.has(d,b.name)||(this._addPseudoPropDefToSheet(h,b),d[b.name]=!0)},this)},this);return h}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(l,m,k){var j=l.some;return function(e){var h,d;e instanceof Array?d=e:e&&"object"===typeof e&&(h=e);var c,b=[];if(h){d=[];for(var a in h)Object.hasOwnProperty.call(h,
a)&&(b.push(a),d.push(h[a]));c={}}else d&&(c=[]);if(!d||!d.length)return(new m).resolve(c);var f=new m;f.promise.always(function(){c=b=null});var l=d.length;j(d,function(a,d){h||b.push(d);k(a,function(a){f.isFulfilled()||(c[b[d]]=a,0===--l&&f.resolve(c))},f.reject);return f.isFulfilled()});return f.promise}})},"deploy/widgets/multiEnvironmentComparison/MultiEnvironmentConfigComparisonGrid":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/TooltipDialog,dijit/popup,dojo/_base/declare,dojo/on,dojo/sniff,dojo/string,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojox/html/entities,deploy/widgets/IconLegend,deploy/widgets/multiEnvironmentComparison/PropertyComparison,js/util/blocker/_BlockerMixin".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return e([m,l,s],{iconData:{match:{iconClass:"match",legend:i18n("Equal")},noMatch:{iconClass:"no-match",legend:i18n("Not equal")},missing:{iconClass:"missing",legend:i18n("No property")},missingRequired:{iconClass:"no-value-required",legend:i18n("Missing required value")},secure:{iconClass:"secure",legend:i18n("Secure property")}},notConfiguredMessage:i18n("Comparison not yet configured"),dataErrorMessage:i18n("An error has occurred"),noPropertyErrorMessage:i18n("There are no properties to compare in the selected environments"),
headerRotation:Math.PI/6,templateString:'<div class="environmentPropertyComparisonGrid">    <div class="notReadyMessage" data-dojo-attach-point="notReadyMessageAttach"></div>    <div data-dojo-attach-point="downloadCSVLink" class="downloadCSV"></div>    <div data-dojo-attach-point="horizontalScrollContainer" class="horizontalScrollContainer">      <div data-dojo-attach-point="environmentHeadersContainer">          <ul class="environmentHeaders" data-dojo-attach-point="environmentHeaders"></ul>          <div class="environmentHeadersVerticalSpacer" data-dojo-attach-point="headerSpacer" style="display:none;"></div>      </div>      <div class="body" data-dojo-attach-point="body"></div>    </div></div>',
postCreate:function(){this.inherited(arguments);this._actualPropertyNameWidth=240;this._actualPropertyNameMargin=20;this._actualValueWidth=280;this.maxIconColWidth=140;this.minIconColWidth=70;this._actualIconColMargin=10;this.environmentHeadersFloating=!1;this.setUpEventListeners();this.showNotReadyMessage(this.notConfiguredMessage);this.dataManager.isAllPropertyDataReady()&&this.redraw()},setUpEventListeners:function(){this.docScrollHandler=h(this.domNode.ownerDocument,"scroll",this.manageEnvironmentHeaders.bind(this));
this.scrollHandler=h(this.horizontalScrollContainer,"scroll",this.manageEnvironmentHeaders.bind(this));this.dataManager.on("allPropertyDataAvailable",this.redraw.bind(this));this.dataManager.on("allPropertyDataError, environmentListDataError",function(){this.showNotReadyMessage(this.dataErrorMessage)}.bind(this));this.dataManager.on("allPropertyDataLoading",this.block.bind(this));var a=this.setupPopover.bind(this);this.on(".property-cell:click",function(){a(this)})},hideNotReadyMessage:function(){r.set(this.notReadyMessageAttach,
"display","none")},_erase:function(){f.empty(this.environmentHeaders);f.empty(this.downloadCSVLink);f.empty(this.body);this.hideNotReadyMessage();this.unblock()},addDownloadCSVIcon:function(){var a=this.dataManager.getCsvDataLink(),a=util.createDownloadAnchor({href:a},this.downloadCSVLink),a=f.create("div",{className:"linkPointer general-icon download-icon envCompareDownloadCSV",title:i18n("Download CSV"),alt:i18n("Download CSV")},a),b='<div class="downloadCSVText">'+i18n("Download")+"</div>";f.place(b,
a,"before")},showNotReadyMessage:function(a){this._erase();this.notReadyMessageAttach.innerText=a;r.set(this.notReadyMessageAttach,"display","block")},redraw:function(){this.dataManager.areThereAnyProperties()?this._drawGrid():this.showNotReadyMessage(this.noPropertyErrorMessage)},_drawGrid:function(){this._erase();this.addDownloadCSVIcon();this.determineWidths();var a=this.generateHeaderDOMs(),b=this.generateBodyDOMs();this.environmentHeaders.style.paddingLeft=this._actualPropertyNameWidth+this._actualPropertyNameMargin+
"px";a.forEach(function(a){f.place(a,this.environmentHeaders)},this);this._rotateAndRepositionHeaders();b.forEach(function(a){f.place(a,this.body)},this);this._applyHorizontalOverflow()},_rotateHeaders:function(){var a=this.headerRotation;dojo.query(".environmentPropertyComparisonGrid li.environmentHeader > div").forEach(function(b){r.set(b,"-ms-transform","rotate("+a+"rad)");r.set(b,"transform","rotate("+a+"rad)")})},_translateHeaders:function(){dojo.query(".environmentPropertyComparisonGrid li.environmentHeader > div").forEach(function(a){var b=
n.getContentBox(a).w*Math.cos(this.headerRotation)-r.get(a.parentElement,"width")/2,c=r.get(a,"-ms-transform");r.set(a,"-ms-transform","translate(-"+b+"px, 0px)"+c);r.set(a,"-ms-transform-origin","bottom left");r.set(a,"transform","translate(-"+b+"px, 0px)"+c);r.set(a,"transform-origin","bottom left")}.bind(this))},_rotateAndRepositionHeaders:function(){var a=0;this._rotateHeaders();dojo.query(".environmentPropertyComparisonGrid li.environmentHeader > div > span").forEach(function(b){b=n.getContentBox(b).w;
a=Math.max(a,b*Math.sin(this.headerRotation))}.bind(this));var b=r.get(this.environmentHeaders,"height");if(a+35<b){var c=a-b+35;dojo.query(".environmentHeaders>li").forEach(function(a){r.set(a,"margin-top",c+"px")})}r.set(this.headerSpacer,"height",this.environmentHeaders.clientHeight+"px");this._translateHeaders(Math.min())},manageEnvironmentHeaders:function(){var a=this.getEnvironmentHeadersYValue();this.environmentHeadersFloating?0<a?this.dockEnvironmentHeaders():this.adjustFloatingEnvironmentHeadersXPosition():
0>a&&(this.floatEnvironmentHeaders(),this.adjustFloatingEnvironmentHeadersXPosition())},getEnvironmentHeadersYValue:function(){return this.environmentHeadersFloating?this.headerSpacer.getBoundingClientRect().top:this.environmentHeaders.getBoundingClientRect().top},floatEnvironmentHeaders:function(){this.environmentHeadersFloating=!0;this.headerSpacer.style.display="";a.add(this.environmentHeaders,"environmentHeadersFloating")},dockEnvironmentHeaders:function(){this.environmentHeadersFloating=!1;this.headerSpacer.style.display=
"none";a.remove(this.environmentHeaders,"environmentHeadersFloating")},adjustFloatingEnvironmentHeadersXPosition:function(){this.environmentHeaders.style.left=this.body.getBoundingClientRect().left-1+"px"},determineWidths:function(){var a=this.domNode.offsetWidth,b=this.dataManager.getOtherEnvironments().length,a=Math.min(this.maxIconColWidth,(a-this._actualPropertyNameWidth-this._actualPropertyNameMargin-this._actualValueWidth)/b);this._actualIconColWidth=a=Math.max(this.minIconColWidth,a)-this._actualIconColMargin},
generateHeaderDOMs:function(){var a=[];a.push(this.generateEnvironmentHeaderCellDOM(this.dataManager.getReferenceEnvironment(),this._actualValueWidth-22));this.dataManager.getOtherEnvironments().forEach(function(b){a.push(this.generateEnvironmentHeaderCellDOM(b,this._actualIconColWidth-10))},this);return a},environmentHeaderTemplate:'<li class="environmentHeader" style="width:${width}px; border-color:${color}">    <div class="${divClass}">        <span title="${title}">${name}</span>    </div></li>',
generateEnvironmentHeaderCellDOM:function(a,b){var c=this.dataManager.getReferenceEnvironment().id===a.id;return this.templateToDom(this.environmentHeaderTemplate,{width:b,color:a.color,name:a.name,title:a.description?a.name+":\n"+a.description:a.name,divClass:c?"referenceHeaderDiv":"headerDiv"})},generateBodyDOMs:function(){var a,b=[];this.dataManager.getPropSheetDefs().forEach(function(c){c.componentId?b.push(this.generatePropSheetRowGroupDOM(c)):a?b.push(this.generatePropSheetRowGroupDOM(c,a)):
(a=this.generatePropSheetRowGroupDOM(c),b.push(a))},this);return b},propSheetRowGroupTemplate:'<div class="propSheetRowGroup"></div>',emptyPropSheetRowTemplate:'<div class="propSheetRowEmpty">'+i18n("No properties")+"</div>",generatePropSheetRowGroupDOM:function(a,b){var c;c=b?b:this.templateToDom(this.propSheetRowGroupTemplate,{});a.componentName&&(f.place(this.generatePropSheetHeaderDOM(a),c),0===a.propDefs.length&&f.place(this.emptyPropSheetRowTemplate,c));a.propDefs.forEach(function(a){f.place(this.generatePropertyRowDOM(a),
c)},this);return c},propSheetHeaderTemplate:'<div class="propSheetRowGroupHeader">    <div class="generalIcon componentIcon"></div>    <div class="propSheetRowGroupHeaderLabel" style="width:${width}px;">${name}</div></div><div></div>',generatePropSheetHeaderDOM:function(a){return!a.componentName?"":this.templateToDom(this.propSheetHeaderTemplate,{width:this._actualPropertyNameWidth,name:t.encode(a.componentName),title:t.encode(a.componentName)})},propertyRowTemplate:'<div class="propertyRow">    <div class="rowHeader" title="${title}" style="width:${rowHeaderWidth}px;">${label}</div></div>',
generatePropertyRowDOM:function(a){var b=this.templateToDom(this.propertyRowTemplate,{rowHeaderWidth:this._actualPropertyNameWidth,label:t.encode(a.label||a.name),title:t.encode(a.description||a.label||a.name)}),c=this.dataManager.getReferenceEnvironment();f.place(this.generateReferencePropertyCell(a,c),b);this.dataManager.getOtherEnvironments().forEach(function(d){f.place(this.generatePropertyRowCell(a,d,c),b)},this);return b},referencePropertyCellTemplate:'<div class="referenceValue" style="width:${width}px;">${value}</div>',
generateReferencePropertyCell:function(a,b){var c=this.dataManager.getProperty(a,b);return this.templateToDom(this.referencePropertyCellTemplate,{width:this._actualValueWidth,value:t.encode(c.value||"")})},propertyRowCellTemplate:'<div class="property-cell" style="width:${width}px;"><div class="${iconClass}"></div><div class="show-data" style="display:none;"></div></div>',generatePropertyRowCell:function(a,b,c){var d=this.dataManager.getProperty(a,b),e=this.dataManager.getProperty(a,c),f={iconClass:""};
if((!d||!d.value)&&a.required)f=this.iconData.missingRequired;else if("SECURE"===a.type||d.secure)f=this.iconData.secure;else if(void 0===d.value)f=this.iconData.missing;else if(d.value===e.value)f=this.iconData.match;else if(d.value!==e.value)f=this.iconData.noMatch;d=this.templateToDom(this.propertyRowCellTemplate,{iconClass:f.iconClass,width:this._actualIconColWidth-1});d.propDef=a;d.environment=b;d.referenceEnvironment=c;return d},_applyHorizontalOverflow:function(){a.toggle(this.domNode,"overflowed",
this._isOverflowing())},_isOverflowing:function(){return this.horizontalScrollContainer.clientWidth<this.horizontalScrollContainer.scrollWidth},setupPopover:function(a){var c=new o({dataManager:this.dataManager,propDef:a.propDef,environment:a.environment,referenceEnvironment:a.referenceEnvironment}),d=new k({content:c});j.open({parent:this,popup:d,around:a,orient:["above-centered","before-centered"],onCancel:function(){j.close(d)},onClose:function(){d.destroyRecursive()}});var e=h(this.domNode.ownerDocument,
"click",function(c){!b.isDescendant(c.target,a)&&!b.isDescendant(c.target,d.domNode)&&(j.close(d),e.remove())}.bind(this));this.bodyClickHandler=e},templateToDom:function(a,b){var d=c.substitute(a,b);return f.toDom(d)},createLegendWidget:function(){var a=this.iconData;return new q({iconData:[[a.match,a.noMatch],[a.missing,a.missingRequired],[a.secure]],staticIconClass:"comparison-icon"})},destroy:function(){this.inherited(arguments);this.bodyClickHandler&&this.bodyClickHandler.remove();this.docScrollHandler&&
this.docScrollHandler.remove();this.scrollHandler&&this.scrollHandler.remove()}})})},"deploy/widgets/componentProcess/ComponentProcessChangelog":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable"],function(l,m,k,j){return k("deploy.widgets.componentProcess.ComponentProcessChangelog",[m,l],{templateString:'<div class="componentProcessChangelog"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);
var e=bootstrap.restUrl+"deploy/componentProcess/"+this.componentProcess.id+"/changelog",h=[{name:i18n("Version"),field:"version",orderField:"version",getRawValue:function(d){return d.version}},{name:i18n("User"),field:"committer",orderField:"committer",filterField:"committer",filterType:"text",getRawValue:function(d){return d.committer}},{name:i18n("Date"),field:"commitTime",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(d){return new Date(d.commitTime)}},{name:i18n("Comment"),
field:"comment"}];this.grid=new j({url:e,serverSideProcessing:!1,orderField:"version",sortType:"desc",columns:h,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/componentProcess/ComponentProcessList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/json,dojo/on,deploy/widgets/Formatters,deploy/widgets/componentProcess/EditComponentProcess,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w){return h("deploy.widgets.componentProcess.ComponentProcessList",[m,l],{templateString:'<div class="componentProcessList"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div><div data-dojo-attach-point="copyContainer" class="hidden"><div data-dojo-attach-point="copyLabel" style="margin-top: 15px;"></div><div class="innerContainer"><div data-dojo-attach-point="copyAttach"></div><div data-dojo-attach-point="copyButtonAttach"></div></div></div></div>',
processListHash:null,baseGridUrl:null,basePasteUrl:null,readOnly:!1,postCreate:function(){this.inherited(arguments);var e=this,h=this;if(this.component)this.processListHash="component/"+this.component.id+"/processes",this.basePasteUrl=bootstrap.restUrl+"deploy/component/"+this.component.id+"/pasteProcess",this.baseGridUrl=bootstrap.restUrl+"deploy/component/"+this.component.id+"/processes",this.readOnly=!this.component.security["Manage Processes"];else if(this.componentTemplate)this.processListHash=
"componentTemplate/"+this.componentTemplate.id+"/"+this.componentTemplate.version+"/processes",this.basePasteUrl=bootstrap.restUrl+"deploy/componentTemplate/"+this.componentTemplate.id+"/pasteProcess",this.baseGridUrl=bootstrap.restUrl+"deploy/componentTemplate/"+this.componentTemplate.id+"/"+this.componentTemplate.version+"/processes",this.readOnly=this.componentTemplate.version!==this.componentTemplate.versionCount||!this.componentTemplate.security["Manage Processes"];if(void 0!==util.getCookie("copiedComponentProcesses")){this.copyContainer.className=
"";this.copyLabel.innerHTML=i18n("Process Clipboard");this.copyLabel.className="containerLabel";var l=[{name:i18n("Process"),formatter:function(c,d,f){f.style.position="relative";d=a.create("div",{"class":"inlineBlock",style:"margin-"+(b.isBodyLtr()?"right":"left")+":78px;"});f=a.create("div",{"class":"inlineBlock"});a.place(f,d);var h=null;e.component?h=r.componentProcessLinkFormatter(c):e.componentTemplate&&(h=r.componentTemplateProcessLinkFormatter(c));var j=a.create("div",{"class":"inlineBlock"});
j.appendChild(h);a.place(j,f);a.place(e.copyActionsFormatter(c),d);return d}},{name:i18n("From"),formatter:function(a){var b="";a.component?b=r.componentLinkFormatter(a.component):a.componentTemplate&&(b=r.componentTemplateLinkFormatter(a.componentTemplate));return b}},{name:i18n("Description"),field:"description"}];this.copyGrid=new w({serverSideProcessing:!1,columns:l,getData:function(){var a=util.getCookie("copiedComponentProcesses");return f.parse(a)},hidePagination:!0,rowsPerPage:1E3,hideExpandCollapse:!0});
this.copyGrid.placeAt(this.copyAttach);(new k({label:i18n("Clear Copied Processes"),showTitle:!1,onClick:function(){util.clearCookie("copiedComponentProcesses");navBar.setHash(h.processListHash,!1,!0)}})).placeAt(this.copyButtonAttach);this.readOnly||(new k({label:i18n("Paste All"),showTitle:!1,onClick:function(){var a=util.getCookie("copiedComponentProcesses"),b=f.parse(a),c=function(a){d.get({url:e.basePasteUrl+"/"+b[a].id,handleAs:"json",load:function(){a++;a===b.length?(e.grid.refresh(),e.componentTemplate&&
navBar.setHash("componentTemplate/"+e.componentTemplate.id+"/-1/processes")):c(a)},error:function(a){new q({messages:[i18n("Error pasting processes:"),"",util.escape(a.responseText)]})}})};c(0)}})).placeAt(this.copyButtonAttach)}var l=this.baseGridUrl+"/false",o=[{name:i18n("Process"),formatter:function(c,d,f){f.style.position="relative";d=a.create("div",{"class":"inlineBlock",style:"margin-"+(b.isBodyLtr()?"right":"left")+":78px;"});f=a.create("div",{"class":"inlineBlock"});a.place(f,d);var h=null;
e.component?h=r.componentProcessLinkFormatter(c):e.componentTemplate&&(h=r.componentTemplateProcessLinkFormatter(c));var j=a.create("div",{"class":"inlineBlock"});j.appendChild(h);a.place(j,f);a.place(e.actionsFormatter(c),d);return d}},{name:i18n("Description"),field:"description"}];config.data.systemConfiguration.safeEditFeatureEnabled&&o.push({name:i18n("Locked By"),formatter:function(b){var c=a.create("div");if(b.locked)c.innerHTML=util.escape(b.lockedBy);return c}});this.grid=new w({url:l,serverSideProcessing:!1,
columns:o,tableConfigKey:"componentProcessListKey",noDataMessage:i18n("No processes have been added to this component."),hidePagination:!1,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks)(new j({checked:!1,value:"true",onChange:function(a){e.grid.url=e.baseGridUrl+"/"+a;e.grid.refresh()}})).placeAt(this.activeBoxAttach),l=document.createElement("div"),c.add(l,"inlineBlock"),l.style.position="relative",l.style.top="2px",l.style.left=
"2px",l.innerHTML=i18n("Show Inactive Processes"),this.activeBoxAttach.appendChild(l);this.readOnly||(l=new k({label:i18n("Create Process"),showTitle:!1,onClick:function(){e.showNewComponentProcessDialog()}}),c.add(l.domNode,"idxButtonSpecial"),l.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy();void 0!==this.copyGrid&&this.copyGrid.destroy()},actionsFormatter:function(b){var c=this,d=a.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),
f=[];e.forEach(c.getReadActions(b),function(a){f.push(a)});this.readOnly||(c.addEditActions(b,d),e.forEach(c.getWriteActions(b),function(a){(b.component||c.componentTemplate)&&f.push(a)}));f.length&&(new u({options:f,label:i18n("Actions...")})).placeAt(d);return d},addEditActions:function(a,b){(new k({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){config.data.systemConfiguration.safeEditFeatureEnabled?navBar.setHash("#draftComponentProcess/"+a.id+"/-1"):navBar.setHash("#componentProcess/"+
a.id+"/-1")}})).placeAt(b)},getWriteActions:function(a){var b=this,c=[];(!a.locked||a.currentUserIsLockOwner)&&c.push({label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}});if(config.data.systemConfiguration.safeEditFeatureEnabled)if(a.locked){var d;d=a.currentUserIsLockOwner?i18n("Unlock"):i18n("Force Unlock");c.push({label:d,onClick:function(){b.unlockProcess(a)}})}else c.push({label:i18n("Lock"),onClick:function(){b.lockProcess(a)}});return c},lockProcess:function(a){var b=this;d.put({url:bootstrap.restUrl+
"deploy/componentProcess/lock/"+a.id,handleAs:"json",load:function(){b.grid.refresh()},error:function(a){(new q({messages:[i18n("Error locking process:"),"",util.escape(a.responseText)]})).startup()}})},unlockProcess:function(a){var b=this;d.put({url:bootstrap.restUrl+"deploy/componentProcess/unlock/"+a.id,handleAs:"json",load:function(){b.grid.refresh()},error:function(a){(new q({messages:[i18n("Error unlocking process:"),"",util.escape(a.responseText)]})).startup()}})},getReadActions:function(a){var b=
this;return[{label:i18n("Copy"),onClick:function(){var c={id:a.id,name:a.name,description:a.description};if(a.component)c.component={id:a.component.id,name:a.component.name};else if(a.componentTemplate)c.componentTemplate={id:a.componentTemplate.id,name:a.componentTemplate.name};var d=util.getCookie("copiedComponentProcesses"),h=[];void 0!==d&&(h=f.parse(d));0<h.length&&e.forEach(h,function(a){void 0!==a&&a.id===c.id&&util.removeFromArray(h,a)});h.push(c);util.setCookie("copiedComponentProcesses",
f.stringify(h));void 0===d?navBar.setHash(b.processListHash,!1,!0):b.copyGrid.refresh()}}]},copyActionsFormatter:function(b){var c=a.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[];e.forEach(this.getCopyReadActions(b),function(a){d.push(a)});this.readOnly||e.forEach(this.getCopyWriteActions(b),function(a){d.push(a)});d.length&&(new u({options:d,label:i18n("Actions...")})).placeAt(c);return c},getCopyWriteActions:function(a){var b=this;return[{label:i18n("Paste"),
onClick:function(){d.get({url:b.basePasteUrl+"/"+a.id,handleAs:"json",load:function(){b.componentTemplate?navBar.setHash("componentTemplate/"+b.componentTemplate.id+"/-1/processes",!1,!0):(b.copyGrid.refresh(),b.grid.refresh(),b.componentTemplate&&navBar.setHash("componentTemplate/"+b.componentTemplate.id+"/-1/processes"))},error:function(a){(new q({messages:[i18n("Error pasting processes:"),"",util.escape(a.responseText)]})).startup()}})}}]},getCopyReadActions:function(a){var b=this;return[{label:i18n("Remove"),
onClick:function(){var c=util.getCookie("copiedComponentProcesses"),d=f.parse(c);e.forEach(d,function(b){void 0!==b&&b.id===a.id&&util.removeFromArray(d,b)});0<d.length?(util.setCookie("copiedComponentProcesses",f.stringify(d)),b.copyGrid.refresh()):(util.clearCookie("copiedComponentProcesses"),navBar.setHash(b.processListHash,!1,!0))}}]},confirmDelete:function(a){var b=this,c=i18n("Are you sure you want to delete %1?  Note that any application processes that currently use %1 will continue to use it.",
a.name.escape()),e=b.componentTemplate||a.componentTemplate;e?d.get({url:bootstrap.restUrl+"deploy/componentTemplate/"+e.id+"/numComponents",handleAs:"text",load:function(d){0<parseInt(d,10)&&(c=i18n("This is an component template process. All %1 components that rely on this template will be affected. Note that any application processes that currently uses %2 will continue to use it. Delete %2?",d,a.name.escape()));b.showDeleteComponentProcessConfirmation(a,c)}}):b.showDeleteComponentProcessConfirmation(a,
c)},showDeleteComponentProcessConfirmation:function(a,b){var c=this;new s({message:b,action:function(){c.grid.block();d.del({url:bootstrap.restUrl+"deploy/componentProcess/"+a.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh();c.componentTemplate&&navBar.setHash("componentTemplate/"+c.componentTemplate.id+"/-1/processes",!1,!0)},error:function(a){a.responseText&&new q({messages:[i18n("Error deleting component process:"),"",util.escape(a.responseText)]});c.grid.refresh();c.grid.unblock()}})}})},
showNewComponentProcessDialog:function(){var a=new o({title:i18n("Create Process"),closable:!0,draggable:!0});(new t({component:this.component,componentTemplate:this.componentTemplate,callback:function(){a.hide();a.destroy()}})).placeAt(a.containerNode);a.show()}})})},"deploy/widgets/componentProcess/ComponentProcessEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/componentProcess/EditComponentProcess,deploy/widgets/property/PropDefs".split(","),
function(l,m,k,j,e,h,d,c){return m([h],{postCreate:function(){this.inherited(arguments);this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Component Process Properties"),action:function(){b.addHeading(i18n("Component Process Properties"));b.showProperties()}})},
addHeading:function(b){e.create("div",{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){e.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){var b=!0;appState.component?b=!appState.component.security["Manage Processes"]||appState.componentProcess.version!==appState.componentProcess.versionCount:appState.componentTemplate&&(b=!appState.componentTemplate.security["Manage Processes"]||appState.componentProcess.version!==
appState.componentProcess.versionCount);(new d({showCancel:!1,readOnly:b,isDraft:this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled,component:appState.component,componentTemplate:appState.componentTemplate,componentProcess:appState.componentProcess})).placeAt(this.detailAttach)},showProperties:function(){var b=!0;appState.component?b=!appState.component.security["Manage Processes"]||appState.componentProcess.version!==appState.componentProcess.versionCount:appState.componentTemplate&&
(b=!appState.componentTemplate.security["Manage Processes"]||appState.componentProcess.version!==appState.componentProcess.versionCount);b||(b=!this.isDraft&&config.data.systemConfiguration.safeEditFeatureEnabled);(new c({getUrl:bootstrap.restUrl+"deploy/componentProcess/"+appState.componentProcess.id+"/"+appState.componentProcess.version+"/propDefs",deleteUrl:bootstrap.restUrl+"deploy/componentProcess/"+appState.componentProcess.id+"/deletePropDef/{propertyName}",saveUrl:bootstrap.restUrl+"deploy/componentProcess/"+
appState.componentProcess.id+"/savePropDef",readOnly:b,refreshHash:"componentProcess/"+appState.componentProcess.id+"/-1/configuration/properties",propSheetDef:appState.componentProcess.propSheetDef,deleteHeaders:{componentProcessVersion:appState.componentProcess.version},addData:function(a){a.componentProcessVersion=appState.componentProcess.version}})).placeAt(this.detailAttach)}})})},"deploy/widgets/blueprint/ApplicationBlueprintManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,deploy/widgets/resourceTemplate/EditResourceTemplate,deploy/widgets/resourceTemplate/ResourceTemplateResourceTree,js/webext/widgets/GenericConfirm,js/webext/widgets/PopDown,js/webext/widgets/TwoPaneListManager".split(","),
function(l,m,k,j,e,h,d,c,b){return m([b],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(a){var b=this;this.defaultSelectionId=a;k.get({url:bootstrap.restUrl+"deploy/application/"+this.application.id+"/blueprints",handleAs:"json",load:function(a){l.forEach(a,function(a){var c=document.createElement("div");c.style.position="relative";var d=document.createElement("div");d.className="twoPaneEntryLabel";d.innerHTML=a.name.escape();var e=document.createElement("div");
e.className="twoPaneActionIcons";if(b.application.security["Manage Blueprints"]){var h=document.createElement("div");h.className="inlineBlock vAlignMiddle cursorPointer margin2Left iconMinus";h.onclick=function(c){util.cancelBubble(c);b.confirmDelete(a)};e.appendChild(h)}c.appendChild(e);c.appendChild(d);b.addEntry({id:a.id,domNode:c,action:function(){b.selectEntry(a)}})});if(b.application.security["Manage Blueprints"]){var a=document.createElement("div"),c=document.createElement("div");c.className=
"vAlignMiddle inlineBlock iconPlus";a.appendChild(c);c=document.createElement("div");c.innerHTML=i18n("Create Blueprint");c.className="vAlignMiddle inlineBlock margin5Left";a.appendChild(c);b.addEntry({id:null,domNode:a,action:function(){b.selectNewBlueprint()}})}}})},refresh:function(a){if(this.selectedEntry&&this.selectedEntry.id)a=this.selectedEntry.id;this.clearDetail();this.clearList();this.showList(a)},selectEntry:function(a){var b=this,d=document.createElement("div");d.className="containerLabel";
d.style.padding="10px";d.innerHTML=a.name.escape();this.detailAttach.appendChild(d);var l=j.create("div",{style:{marginBottom:"15px"}},this.detailAttach),d=new c({label:i18n("Blueprint Resource Hierarchy"),collapsed:!1});d.placeAt(this.detailAttach);var m=new h({resourceTemplate:a,application:this.application});m.placeAt(d.domAttach);this.registerDetailWidget(m);this.registerDetailWidget(d);d=document.createElement("div");d.className="hr";d.style.marginTop="15px";this.detailAttach.appendChild(d);
var q=new c({label:i18n("Edit")});q.placeAt(this.detailAttach);k.get({url:bootstrap.restUrl+"resource/resourceTemplate/"+a.id,handleAs:"json",load:function(a){void 0!==a.parent&&(j.create("span",{innerHTML:i18n("Resource Template:"),style:{marginLeft:"20px",fontWeight:"bold"}},l),j.create("a",{href:"#resourceTemplate/"+a.parent.id,innerHTML:a.parent.name.escape(),style:{marginLeft:"5px"}},l),a.parent.deleted&&j.create("span",{innerHTML:i18n("(Deleted)"),style:{marginLeft:"5px",fontWeight:"bold",color:"#990000"}},
l));a=new e({showCancel:!1,resourceTemplate:a,callback:function(a){a&&b.refresh()}});a.placeAt(q.domAttach);b.registerDetailWidget(a)}});this.registerDetailWidget(q)},selectNewBlueprint:function(){var a=this,b=document.createElement("div");b.className="containerLabel";b.style.padding="10px";b.innerHTML=i18n("Create Blueprint");this.detailAttach.appendChild(b);b=new e({showCancel:!1,application:this.application,callback:function(b){b&&a.refresh(b.id)}});b.placeAt(this.detailAttach);this.registerDetailWidget(b)},
confirmDelete:function(a){var b=this;new d({message:i18n("Are you sure you want to delete blueprint '%s'?",a.name),action:function(){k.del({url:bootstrap.restUrl+"resource/resourceTemplate/"+a.id,handleAs:"json",load:function(){b.refresh()}})}})}})})},"js/webext/widgets/PopDown":function(){define("dojo/_base/declare,dojo/_base/lang,dojo/dom-class,dojo/on,dijit/_TemplatedMixin,dijit/_WidgetBase,dojox/html/entities".split(","),function(l,m,k,j,e,h,d){return l([h,e],{templateString:'<div class="popDown popDownCollapsed">    <div data-dojo-attach-point="headerAttach" class="popDownHeader"></div>    <div data-dojo-attach-point="domAttach" class="popDownContent"></div></div>',
headerAttach:null,domAttach:null,collapsed:!0,label:"",labelHTML:"",postCreate:function(){this.inherited(arguments);if(this.label)this.headerAttach.innerHTML=d.encode(this.label);else if(this.labelHTML)this.headerAttach.innerHTML=this.innerHTML;j(this.headerAttach,"click",m.hitch(this,this.toggle))},collapse:function(){this.set("collapsed",!0)},expand:function(){this.set("collapsed",!1)},toggle:function(){this.set("collapsed",!this.get("collapsed"))},_setCollapsedAttr:function(c){this.collapsed=!!c;
k.toggle(this.domNode,"popDownCollapsed",this.collapsed)}})})},"deploy/widgets/FormDelegateRegistry":function(){define("dojo/dom-style,dojo/store/JsonRest,deploy/widgets/scripts/Editor,deploy/widgets/version/VersionSelector,js/webext/widgets/FormDelegates,js/webext/widgets/select/WebextSelect,js/webext/widgets/select/WebextMultiSelect,js/webext/widgets/color/Color".split(","),function(l,m,k,j,e,h,d,c){e.registerDelegate("CodeEditor",function(b){var a=new k({name:b.name,label:b.label,language:b.language,
fontSize:b.fontSize,syntaxCheck:b.syntaxCheck,existingValue:b.value,colorTheme:b.colorTheme,hasToolbar:b.hasToolbar});if(void 0!==b.onChange)a.onChange=b.onChange;return a});e.registerDelegate("TagDropDown",function(b){b.disabled=!!b.readOnly;b.allowNone=!0;b.defaultQuery={filterFields:["objectType"],filterType_objectType:"eq",filterValue_objectType:b.objectType};b.formatDropDownLabel=function(a,b){l.set(a,"borderLeft","thick solid "+b.color)};b.store=new m({target:bootstrap.restUrl+"tag/",idProperty:b.idProperty||
"id"});return new h(b)});e.registerDelegate("TagMultiDropDown",function(b){b.disabled=!!b.readOnly;b.allowNone=!0;b.defaultQuery={filterFields:["objectType"],filterType_objectType:"eq",filterValue_objectType:b.objectType};b.formatDropDownLabel=function(a,b){l.set(a,"borderLeft","thick solid "+b.color)};b.formatSelectedItem=function(a,b){b.color&&(c.isDark(b.color)||l.set(a,"color","black"),l.set(a,"background-color",b.color))};b.store=new m({target:bootstrap.restUrl+"tag/",idProperty:b.idProperty||
"id"});return new d(b)});e.registerDelegate("ApplicationComponentSelect",function(b){b.applicationId||console.error("Param 'applicationId' not set on ApplicationComponentSelect.");var a=b.multi?"TableFilterMultiSelect":"TableFilterSelect";if(!b.url)b.url=bootstrap.restUrl+"deploy/component";if(!b.idAttribute)b.idAttribute="id";b.searchAttr="name";if(!b.defaultQuery)b.defaultQuery={};if(!b.defaultQuery.filterFields)b.defaultQuery.filterFields=[];b.defaultQuery.filterFields.push("applications.id");
b.defaultQuery["filterValue_applications.id"]=b.applicationId;b.defaultQuery["filterType_applications.id"]="eq";b.defaultQuery["filterClass_applications.id"]="UUID";return e.retrieveDelegate(a)(b)});e.registerDelegate("VersionPropDef",function(b){if(!b.context||!b.context.component)return console.error('No component in the given to the form delegate for VersionPropDef "'+b.name+'".'),null;if(!1!==b.allowNone)b.allowNone=!0;var a=e.retrieveDelegate("TableFilterSelect")({url:bootstrap.restUrl+"deploy/version",
label:b.label,noneLabel:b.noneLabel,allowNone:b.allowNone,name:b.name,value:b.value,defaultQuery:{filterFields:["component.id"],"filterType_component.id":"eq","filterValue_component.id":b.context.component.id,"filterClass_component.id":"UUID"}});if(void 0!==b.onChange)a.onChange=b.onChange;return a});e.registerDelegate("VersionSelector",function(b){if(!b.context||!b.context.component)return console.error('No component in the given to the form delegate for VersionSelector "'+b.name+'".'),null;var a=
new j({component:b.context.component,environment:b.context.environment,label:b.label,noneLabel:b.noneLabel,name:b.name,value:b.value});if(void 0!==b.onChange)a.onChange=b.onChange;return a})})},"deploy/widgets/agentPool/AgentPoolAgents":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/agentPool/EditAgentPool,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return j("deploy.widgets.agentPool.AgentPoolAgents",[m,l],{templateString:'<div class="agentPoolResources"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"agent",d=[{name:i18n("Name"),formatter:c.agentLinkFormatter,orderField:"name",getRawValue:function(a){return a.name}},{name:i18n("Description"),field:"description"},
{name:i18n("Status"),formatter:c.agentStatusFormatter},{name:i18n("Last Contact"),field:"lastContact",formatter:function(a){return util.dateFormatShort(a.lastContact)}},{name:i18n("Version"),field:"version"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this},{name:i18n("Relay"),field:"relay",formatter:function(a,b){if(b){var c="ONLINE"===b.status?"online":"offline",d=h.create("div"),e=h.create("div",{"class":"grid-cell-status"}),f=h.create("a",{"class":"name"});f.innerHTML=b.name.escape();
f.href="#relay/"+b.id;c=h.create("span",{"class":c});h.place(f,e);h.place(c,e);h.place(e,d);return d}}}];this.grid=new f({url:b,serverSideProcessing:!0,orderField:"name",tableConfigKey:"agentPoolAgentList",noDataMessage:i18n("No agents have been added to this pool."),columns:d,hideExpandCollapse:!0,hidePagination:!1,baseFilters:[{name:"agentPools.id",type:"eq",values:[a.agentPool.id],className:"UUID"}]});this.grid.placeAt(this.tableAttach);this.agentPool.security["Edit Basic Settings"]&&(new k({label:i18n("Edit Agent Pool"),
showTitle:!1,onClick:function(){a.showAddAgentDialog()}})).placeAt(this.buttonAttach)},actionsFormatter:function(a){var b=this.parentWidget,c=document.createElement("div");if(b.agentPool["Manage Pool Members"]){var f=h.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Remove")},c);d(f,"click",function(){e.put({url:bootstrap.restUrl+"agent/pool/"+b.agentPool.id+"/removeAgent/"+a.id,load:function(){b.grid.refresh()}})})}return c},showAddAgentDialog:function(){var c=this;e.get({url:bootstrap.restUrl+
"agent/pool/"+this.agentPool.id,handleAs:"json",load:function(d){var e=new a({title:i18n("Edit Agent Pool"),closable:!0,draggable:!0});(new b({agentPool:d,callback:function(){e.hide();e.destroy();c.grid.refresh()}})).placeAt(e.containerNode);e.show()}})}})})},"deploy/widgets/agentPool/AgentPoolEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/agentPool/EditAgentPool".split(","),function(l,
m,k,j,e,h,d){return m([h],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var c=this;c.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){c.addHeading(i18n("Basic Settings"));c.showBasicSettings()}})},addHeading:function(c){e.create("div",{innerHTML:c,"class":"containerLabel"},this.detailAttach)},addDescription:function(c){e.create("div",{innerHTML:c,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,
agentPool:appState.agentPool,readOnly:!appState.agentPool.security["Edit Basic Settings"]})).placeAt(this.detailAttach)}})})},"deploy/widgets/agentPool/AgentPoolList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/agentPool/EditAgentPool,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return e("deploy.widgets.agentPool.AgentPoolList",[m,l],{templateString:'<div class="agentPoolList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="tableAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var b=this,c=bootstrap.restUrl+"agent/pool/",e=[{name:i18n("Name"),formatter:a.agentPoolLinkFormatter,orderField:"name",
filterField:"name",filterType:"text"},{name:i18n("Description"),field:"description"},{name:i18n("Status"),formatter:a.agentStatusFormatter},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new q({url:c,orderField:"name",sortType:"asc",noDataMessage:i18n("No agent pools have been added yet."),tableConfigKey:"agentPoolList",columns:e,serverSideProcessing:!0,hidePagination:!1,hideExpandCollapse:!0,queryData:{outputType:["BASIC","SECURITY"]}});this.grid.placeAt(this.tableAttach);
if(config.data.systemConfiguration.enableInactiveLinks)(new j({checked:!1,value:"true",onChange:function(a){b.grid.baseFilters=a?[]:[{name:"active",type:"eq",className:"Boolean",values:[!0]}];b.grid.refresh()}})).placeAt(this.activeBoxAttach),c=document.createElement("div"),d.add(c,"inlineBlock"),c.style.position="relative",c.style.top="2px",c.style.left="2px",c.innerHTML=i18n("Show Inactive Agent Pools"),this.activeBoxAttach.appendChild(c);config.data.permissions[security.system.createAgentPools]&&
(c={label:i18n("Create Agent Pool"),showTitle:!1,onClick:function(){b.showNewAgentPoolDialog()}},c=new k(c),d.add(c.domNode,"idxButtonSpecial"),c.placeAt(this.buttonTopAttach))},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div");if(a.security["Edit Basic Settings"]){var f=document.createElement("a");f.innerHTML=i18n("Edit");f.className="actionsLink";f.href="#agentPool/"+a.id+"/configuration";e.appendChild(f)}f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},
e);b(f,"click",function(){h.get({url:bootstrap.restUrl+"agent/pool/"+a.id,handleAs:"json",load:function(a){d.showNewAgentPoolDialog(a)}})});a.security.Delete&&(f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e),b(f,"click",function(){d.confirmDelete(a)}));return e},showNewAgentPoolDialog:function(a){var b=new r({title:i18n("Create Agent Pool"),closable:!0,draggable:!0,description:i18n("Agent pools help you organize and manage agents that are installed in different environments. To create an agent pool, specify the agents that are the members of the pool.")});
(new f({source:a,callback:function(){b.hide();b.destroy()}})).placeAt(b.containerNode);b.show()},confirmDelete:function(a){var b=this;new t({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),action:function(){b.grid.block();h.del({url:bootstrap.restUrl+"agent/pool/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new n({messages:[i18n("Error deleting Agent Pool"),"",util.escape(a.responseText)]})).startup();
b.grid.unblock()}})}})}})})},"deploy/widgets/report/deploymentCount/DeploymentDurationSumReportTable":function(){define(["dojo/_base/declare","dojo/dom-construct","deploy/widgets/report/ReportTable"],function(l,m,k){return l("deploy.widgets.report.deploymentCount.DeploymentDurationSumReportTable",[k],{reportRestUrlBase:null,reportTable:null,reportChart:null,requiredFields:["time_unit"],constructor:function(){this.inherited(arguments);this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationSumReport",
destroyChart:function(){if(this.reportChart)this.reportChart.destroy(),this.reportChart=null},getReportResultLayout:function(){return[]},createChart:function(j,e,h){var e=[],d=[],c,b,a={},f;b={type:"datetime",allowDecimals:!1,min:0,gridLineColor:"#cfcdcc",gridLineDashStyle:"ShortDash",gridLineWidth:1,labels:{formatter:function(){return util.formatDuration(this.value+1,{roundToNearestSecond:!0})}},title:{text:i18n("Duration")}};a.text=i18n("Total Deployment Duration");for(f in j)if(j.hasOwnProperty(f)&&
j[f]){var k=j[f],l={};l.name=k[i18n("Environment")];l.type="line";var t=[],q;for(q in k)k.hasOwnProperty(q)&&q!==i18n("Application")&&q!==i18n("Environment")&&(0===parseInt(f,10)&&d.push(q),t.push({name:q,y:Number(k[q])}));l.data=t;e.push(l);c?c!==j[f][i18n("Application")]&&(c=i18n("Multiple Applications")):c=j[f][i18n("Application")]}5>d.length?(j=null,f=1,4===d.length&&(f=2)):(j=Math.ceil(d.length/5),f=Math.min(2,Math.ceil(d.length/(2*j))));q=m.create("div",{className:"chart-outer-container"},h);
m.create("div",{className:"description-text chart-help-link-container",innerHTML:i18n("Click and drag to select an area to zoom in")},h);h=m.create("div",{className:"highcharts-outer-container"},q);this.reportChart=new Highcharts.Chart({chart:{height:300,renderTo:h,zoomType:"xy"},colors:"#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF,#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF".split(","),labels:{style:{color:"#8a8989"}},credits:{enabled:!1},title:{text:c,x:-20},
subtitle:a,xAxis:{type:"line",categories:d,minorTickWidth:2,tickmarkPlacement:"on",tickInterval:j,labels:{staggerLines:f,style:{color:"#8a8989"}},dateTimeLabelFormats:{month:"%e. %b",year:"%b"}},yAxis:b,plotOptions:{line:{visible:!0,dashStyle:"solid",connectNulls:!0,shadow:!1,dataLabels:{color:"#0000ff"}}},tooltip:{formatter:function(){var a="<b>";this.points&&this.points[0]&&this.points[0].point&&(a+=this.points[0].point.name);var a=a+"</b>",b=[];dojo.forEach(this.points,function(a){var c=util.formatDuration(a.y,
{roundToNearestSecond:!0});b.push({deployments:a.y,tooltipText:'<br/><span style="color:'+a.series.color+';">'+a.series.name+"</span>: "+c})});b.sort(function(a,b){return b.deployments-a.deployments});for(var c in b)b.hasOwnProperty(c)&&(a+=b[c].tooltipText);return a},crosshairs:!0,shared:!0},legend:{layout:"vertical",borderWidth:0,lineHeight:34,align:"right",verticalAlign:"top",style:{color:"#ff0000",fontSize:"11px"}},series:e})}})})},"deploy/widgets/report/ReportTable":function(){define("dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/dom-geometry,dojo/io-query,dojo/on,js/util/blocker/BlockingContainer,js/util/blocker/_BlockerMixin,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return j("deploy.widgets.report.ReportTable",[l,n],{reportRestUrlBase:null,reportTable:null,reportChart:null,nonEmptyCallback:null,requiredFields:[],reportType:null,columnFormatters:null,reportResultLayout:null,reportProperties:null,resultsUrl:null,reportResults:null,reportMetadata:null,constructor:function(a){this.reportRestUrlBase=bootstrap.restUrl+"report/";if(a)this.nonEmptyCallback=a.nonEmptyCallback},destroy:function(){this.inherited(arguments);this.reportTable&&
this.reportTable.destroy();if(this.reportChart)this.reportChart.destroy(),this.reportChart=null},showReport:function(b){var c=this;c.reportTable&&c.reportTable.destroy();(!b||!b.empty)&&h.empty(c.domNode);c.reportProperties=c.reportMetadata.properties;var d=[];if(0!==c.getReportResultLayout().length)c.reportResultLayout=c.getReportResultLayout();k.forEach(c.reportResultLayout,function(a){c.reportMetadata.hiddenColumns&&-1<c.reportMetadata.hiddenColumns.indexOf(a.field)||a.hidden?a.enabled=!1:(a.enabled=
!0,d.push(a))});!b||!b.refresh?c.reportTable=c.createTable():c.reportTable.columns=d;c.reportTable.drawHeadings();c.reportTable.placeAt(c.domNode);c.reportTable.showTable(c.reportResults);c.selectableColumns&&(b=h.create("td",{colspan:d.length},c.reportTable.filterAttach),b=h.create("a",{innerHTML:i18n("Select Columns"),className:"report-column-edit-button linkPointer"},b),a(b,"click",function(){c.showTableDialog()}))},showTableDialog:function(){var a=this;a.tableDisplayDialog=new t({title:i18n("Select Columns"),
closeable:!0,draggable:!0});var b=new r({saveLabel:i18n("OK"),onSubmit:function(b){a.reportMetadata.hiddenColumns=[];var c=a.getReportResultLayout();k.forEach(c,function(c){("false"===b[c.field]||c.hidden)&&a.reportMetadata.hiddenColumns.push(c.field)});if(a.isInstanceOf(deploy.widgets.report.SecurityReportTable))a.reRenderReport();else{var c=a.getDisplayConfig(),d=c.orderField,e=c.sortType;if(0>a.reportMetadata.hiddenColumns.indexOf(d)){var f=!1;k.forEach(a.reportMetadata.properties,function(a){if("orderField"===
a.name)a.value=d,f=!0;else if("sortType"===a.name)a.value=e,f=!0});f||(a.reportMetadata.properties.push({name:"orderField",value:d}),a.reportMetadata.properties.push({name:"sortType",value:e}))}a.showReport({refreshDisplay:!0})}a.tableDisplayDialog.hide();a.tableDisplayDialog.destroy()},onCancel:function(){a.tableDisplayDialog.hide();a.tableDisplayDialog.destroy()}});k.forEach(a.reportResultLayout,function(a){a.hidden||b.addField({name:a.field,label:a.name,required:!1,type:"Checkbox",value:a.enabled})});
b.placeAt(a.tableDisplayDialog.containerNode);a.tableDisplayDialog.show()},renderReport:function(a){var b=this;b.resultsUrl=a;"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===b.reportType||"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationSumReport"===b.reportType||"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationAverageReport"===b.reportType?b.loadCountReport(function(){b.showReport({empty:!0})}):b.loadReport(function(){b.showReport()})},
loadCountReport:function(a){var b=this;h.empty(b.domNode);var c=new f;c.placeAt(b.domNode);h.create("div",{style:"width:100%;height:10em"},c.domNode);c.block();var d=function(a){var b=/[0-9]{4}-/,a=0===a.search(b)?a.replace(b,""):i18n(a);return i18n(a)};e.get({url:b.resultsUrl,handleAs:"json",load:function(e){b.reportResultLayout=[];b.reportMetadata=e.report[0];var f;"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===b.reportType?f="COUNT":"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationSumReport"===
b.reportType?f="DURATION_SUM":"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationAverageReport"===b.reportType&&(f="DURATION_AVERAGE");var j=e.items[0][0],l;for(l in j)if(j.hasOwnProperty(l)){var m={field:l,name:d(l)};if(m.field!==m.name)m.styleHeading={"white-space":"nowrap"};if("COUNT"!==f&&l!==i18n("Application")&&l!==i18n("Environment"))m.formatter=util.durationFormatter;m.hidden||b.reportResultLayout.push(m)}b.reportResults=e.items[0];b.reportMetadata.properties.push({name:"orderField",
value:"Application"});c.unblock();h.empty(c.domNode);var n;k.forEach(b.reportMetadata.properties,function(a){if("aggregation"===a.name)n=a.value});e.items[0].length&&(Highcharts.setOptions({lang:{resetZoom:i18n("Reset Zoom"),resetZoomTitle:i18n("Reset Zoom")}}),b.createChart(e.items[0],n,c.domNode));a()},error:function(){c.unblock();h.empty(c.domNode);b.showError()}})},showError:function(a){this.inherited(arguments);h.create("span",{style:"fontSize:medium"},this.domNode).innerHTML=a?"<br>"+a:"<br>"+
i18n("An error has occurred.")},loadReport:function(a){var b=this,c=new f;c.placeAt(b.domNode);h.create("div",{style:"width:100%;height:10em"},c.domNode);c.block();e.get({url:b.resultsUrl,handleAs:"json",load:function(d){c.unblock();b.reportResults=d.items[0];b.reportMetadata=d.report[0];a()},error:function(){c.unblock();h.empty(c.domNode);b.showError()}})},getDisplayConfig:function(){var a=null;this.reportMetadata&&this.reportResults&&this.reportTable&&(a={hiddenColumns:this.reportMetadata.hiddenColumns,
orderField:this.reportTable.orderField,sortType:this.reportTable.sortType});return a},createTable:function(){var a=this,b=a.reportResults,c=a.reportMetadata.properties,e,f,h=[];k.forEach(a.reportResultLayout,function(a){a.enabled&&(h.push(a),k.forEach(c,function(a){if("orderField"===a.name)e=a.value;else if("sortType"===a.name)f=a.value}))});var j=h.length?h[0].field:null,l=new q({data:b,columns:h,orderField:e||j||void 0,sortType:f,noDataMessage:i18n("No results found"),hideFooterLinks:!0,serverSideProcessing:!1,
style:"overflow-x: auto; padding-bottom: 40px;",baseTextDir:util.getBaseTextDir(),hideExpandCollapse:!0,hidePagination:!1});a.nonEmptyCallback&&a.nonEmptyCallback({reportLength:a.reportResults.length,csvUrl:a.reportRestUrlBase+"adHoc/csv?"+a.adHocQuery,printReport:function(){if(a.reportChart){var b=a.reportChart.chartWidth,c=a.reportChart.chartHeight;d.add(a.domNode,"print-view");a.reportChart.setSize(600,300,!1);setTimeout(function(){l.print();d.remove(a.domNode,"print-view");setTimeout(function(){a.reportChart.setSize(b,
c,!1)},100)},100)}else l.print()}});return l},refresh:function(){var a=this;a.loadReport(function(){a.reportTable.showTable(a.reportResults)})},renderAdHocReport:function(a){this.reportTable&&this.reportTable.destroy();h.empty(this.domNode);var c=a.report,d={},e=[];k.forEach(this.requiredFields,function(a){var b=!1;k.forEach(c.properties,function(c){c.name===a&&void 0!==c.value&&null!==c.value&&(b=!0)});b||e.push(a)});e.length?a.errorCallback(e):(k.forEach(c.properties,function(a){d[a.name]=a.value}),
d.type=this.reportType,d.hiddenColumns=c.hiddenColumns||[],this.adHocQuery=a=b.objectToQuery(d),this.renderReport(this.reportRestUrlBase+"adHoc?"+a))},setColumnFormatters:function(a){this.columnFormatters=a},setRequiredFields:function(a){this.requiredFields=a},getCurrentReportProperties:function(){return this.reportProperties},renderChart:function(){},actionsFormatter:function(a){var b=document.createElement("a");b.href="#applicationProcessRequest/"+a.applicationRequestId;b.innerHTML=i18n("View Request");
return b},multiNameFormatter:function(){}})})},"deploy/widgets/report/deploymentCount/DeploymentDurationAverageReportTable":function(){define(["dojo/_base/declare","dojo/dom-construct","deploy/widgets/report/ReportTable"],function(l,m,k){return l("deploy.widgets.report.deploymentCount.DeploymentDurationAverageReportTable",[k],{reportRestUrlBase:null,reportTable:null,reportChart:null,requiredFields:["time_unit"],constructor:function(){this.inherited(arguments);this.reportRestUrlBase=bootstrap.restUrl+
"report/"},reportType:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationAverageReport",destroyChart:function(){if(this.reportChart)this.reportChart.destroy(),this.reportChart=null},getReportResultLayout:function(){return[]},createChart:function(j,e,h){var e=[],d=[],c,b,a={},f;b={type:"datetime",allowDecimals:!1,min:0,gridLineColor:"#cfcdcc",gridLineDashStyle:"ShortDash",gridLineWidth:1,labels:{formatter:function(){return util.formatDuration(this.value+1,{roundToNearestSecond:!0})}},
title:{text:i18n("Duration")}};a.text=i18n("Average Deployment Duration");for(f in j)if(j.hasOwnProperty(f)&&j[f]){var k=j[f],l={};l.name=k[i18n("Environment")];l.type="line";var t=[],q;for(q in k)k.hasOwnProperty(q)&&q!==i18n("Application")&&q!==i18n("Environment")&&(0===parseInt(f,10)&&d.push(q),t.push({name:q,y:Number(k[q])}));l.data=t;e.push(l);c?c!==j[f][i18n("Application")]&&(c=i18n("Multiple Applications")):c=j[f][i18n("Application")]}5>d.length?(j=null,f=1,4===d.length&&(f=2)):(j=Math.ceil(d.length/
5),f=Math.min(2,Math.ceil(d.length/(2*j))));q=m.create("div",{className:"chart-outer-container"},h);m.create("div",{className:"description-text chart-help-link-container",innerHTML:i18n("Click and drag to select an area to zoom in")},h);h=m.create("div",{className:"highcharts-outer-container"},q);this.reportChart=new Highcharts.Chart({chart:{height:300,renderTo:h,zoomType:"xy"},colors:"#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF,#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF".split(","),
labels:{style:{color:"#8a8989"}},credits:{enabled:!1},title:{text:c,x:-20},subtitle:a,xAxis:{type:"line",categories:d,minorTickWidth:2,tickmarkPlacement:"on",tickInterval:j,labels:{staggerLines:f,style:{color:"#8a8989"}},dateTimeLabelFormats:{month:"%e. %b",year:"%b"}},yAxis:b,plotOptions:{line:{visible:!0,dashStyle:"solid",connectNulls:!0,shadow:!1,dataLabels:{color:"#0000ff"}}},tooltip:{formatter:function(){var a="<b>";this.points&&this.points[0]&&this.points[0].point&&(a+=this.points[0].point.name);
var a=a+"</b>",b=[];dojo.forEach(this.points,function(a){var c=util.formatDuration(a.y,{roundToNearestSecond:!0});b.push({deployments:a.y,tooltipText:'<br/><span style="color:'+a.series.color+';">'+a.series.name+"</span>: "+c})});b.sort(function(a,b){return b.deployments-a.deployments});for(var c in b)b.hasOwnProperty(c)&&(a+=b[c].tooltipText);return a},crosshairs:!0,shared:!0},legend:{layout:"vertical",borderWidth:0,lineHeight:34,align:"right",verticalAlign:"top",style:{color:"#ff0000",fontSize:"11px"}},
series:e})}})})},"deploy/widgets/report/deploymentCount/DeploymentCountReportForm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,deploy/widgets/DateRangeSelector,js/webext/widgets/FormDelegates".split(","),function(l,m,k,j,e,h,d,c){return e("deploy.widgets.report.deploymentCount.DeploymentCountReportForm",[m,l],{templateString:"<div></div>",applicationSelect:null,report:null,datePickerAttach:null,constructor:function(b){this.applicationRestUrl=
bootstrap.restUrl+"deploy/application";if(b.report)this.report=b.report;if(b.datePickerAttach)this.datePickerAttach=b.datePickerAttach},buildRendering:function(){this.inherited(arguments);var b=h.create("div",{"class":"inlineBlock report-form-field"},this.domNode);h.create("div",{innerHTML:i18n("Application")},b);this.applicationSelect=c.retrieveDelegate("TableFilterMultiSelect")({url:this.applicationRestUrl,idAttribute:"id",name:"application",placeHolder:i18n("Any"),formatDropDownLabel:function(a,
b){a.innerHTML=b.name.escape()}});this.applicationSelect.placeAt(b);this.dateRangeSelector=new d;h.create("div",{innerHTML:i18n("Date Range"),"class":"inlineBlock report-form-field"},this.datePickerAttach);this.dateRangeSelector.placeAt(this.datePickerAttach);b=h.create("div",{"class":"inlineBlock report-form-field"},this.domNode);h.create("div",{innerHTML:i18n("Status")},b);this.statusCriteriaSelect=new k({name:"statusCriteria",required:!0,options:[{label:i18n("Success or Failure"),value:"BOTH",
selected:!0},{label:i18n("Success"),value:"SUCCESS"},{label:i18n("Failure"),value:"FAILURE"}]});this.statusCriteriaSelect.placeAt(b);b=h.create("div",{"class":"inlineBlock report-form-field"},this.domNode);h.create("div",{innerHTML:i18n("Plugin")},b);this.pluginSelect=c.retrieveDelegate("TableFilterSelect")({url:bootstrap.restUrl+"plugin/automationPlugin",name:"plugin",allowNone:!0,placeHolder:i18n("Any"),formatDropDownLabel:function(a,b){a.innerHTML=i18n(b.name.escape())}});this.pluginSelect.placeAt(b);
this.setProperties(this.report.properties)},destroy:function(){this.inherited(arguments);this.applicationSelect.destroy();this.pluginSelect.destroy();this.statusCriteriaSelect.destroy();this.dateRangeSelector.destroy()},setProperties:function(b){var a=this,c=function(b,c,d){b.get("name")===c&&(b.set("value",d),"app"===c&&a.updateEnvironmentOptions(d))};j.forEach(b,function(b){var d=b.name,b=b.value;c(a.applicationSelect,d,b);c(a.statusCriteriaSelect,d,b);c(a.pluginSelect,d,b);if("time_unit"===d)a.dateRangeSelector.timeUnit=
b;"dateRange"===d&&a.dateRangeSelector.set("value",b);if("startDate"===d)a.dateRangeSelector.startDate=new Date(Number(b));if("endDate"===d)a.dateRangeSelector.endDate=new Date(Number(b))})},getProperties:function(){var b=[],a=function(a,c){var d=a.get("name"),e;e="plugin"===d?(e=a.get("item"))?e.name:a.get("value"):a.get("value");d&&e&&(c?b.push({name:d,value:e.getTime()}):b.push({name:d,value:e}))};a(this.applicationSelect);a(this.statusCriteriaSelect);a(this.pluginSelect);this.dateRangeSelector&&
(b.push({name:"time_unit",value:this.dateRangeSelector.getTimeUnit()}),b.push({name:"dateRange",value:this.dateRangeSelector.get("value")}),null!==this.dateRangeSelector.getStartDate()&&b.push({name:"startDate",value:this.dateRangeSelector.getStartDate().getTime()}),null!==this.dateRangeSelector.getEndDate()&&b.push({name:"endDate",value:this.dateRangeSelector.getEndDate().getTime()}));return b}})})},"deploy/widgets/report/deploymentCount/DeploymentCountReportTable":function(){define(["dojo/_base/declare",
"dojo/dom-construct","deploy/widgets/report/ReportTable"],function(l,m,k){return l("deploy.widgets.report.deploymentCount.DeploymentCountReportTable",[k],{reportRestUrlBase:null,reportTable:null,reportChart:null,selectableColumns:!1,requiredFields:["time_unit"],constructor:function(){this.inherited(arguments);this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport",destroyChart:function(){if(this.reportChart)this.reportChart.destroy(),
this.reportChart=null},getReportResultLayout:function(){return[]},createChart:function(j,e,h){var e=[],d=[],c,b,a={},f;b={gridLineColor:"#cfcdcc",gridLineDashStyle:"ShortDash",gridLineWidth:1,allowDecimals:!1,min:0,title:{text:i18n("Deployments")}};a.text=i18n("Deployment Count");for(f in j)if(j.hasOwnProperty(f)&&j[f]){var k=j[f],l={};l.name=k[i18n("Environment")];l.type="line";var t=[],q;for(q in k)k.hasOwnProperty(q)&&q!==i18n("Application")&&q!==i18n("Environment")&&(0===parseInt(f,10)&&d.push(q),
t.push({name:q,y:parseInt(k[q],10)}));l.data=t;e.push(l);c?c!==j[f][i18n("Application")]&&(c=i18n("Multiple Applications")):c=j[f][i18n("Application")]}5>d.length?(j=null,f=1,4===d.length&&(f=2)):(j=Math.ceil(d.length/5),f=Math.min(2,Math.ceil(d.length/(2*j))));q=m.create("div",{className:"chart-outer-container"},h);m.create("div",{className:"description-text chart-help-link-container",innerHTML:i18n("Click and drag to select an area to zoom in")},h);h=m.create("div",{className:"highcharts-outer-container"},
q);this.reportChart=new Highcharts.Chart({chart:{height:300,renderTo:h,zoomType:"xy"},colors:"#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF,#53ABCC,#6ECFC7,#86B347,#F0CC00,#E6944A,#E2515B,#C767AE,#9169BF".split(","),labels:{style:{color:"#8a8989"}},credits:{enabled:!1},title:{text:c,x:-20},subtitle:a,xAxis:{type:"line",categories:d,minorTickWidth:2,tickmarkPlacement:"on",tickInterval:j,labels:{staggerLines:f,style:{color:"#8a8989"}},dateTimeLabelFormats:{month:"%e. %b",year:"%b"}},
yAxis:b,plotOptions:{line:{visible:!0,dashStyle:"solid",connectNulls:!0,shadow:!1,dataLabels:{color:"#0000ff"}}},tooltip:{formatter:function(){var a="<b>";this.points&&this.points[0]&&this.points[0].point&&(a+=this.points[0].point.name);var a=a+"</b>",b=[];dojo.forEach(this.points,function(a){b.push({deployments:a.y,tooltipText:'<br/><span style="color:'+a.series.color+';">'+a.series.name+"</span>: "+a.y})});b.sort(function(a,b){return b.deployments-a.deployments});for(var c in b)b.hasOwnProperty(c)&&
(a+=b[c].tooltipText);return a},crosshairs:!0,shared:!0},legend:{layout:"vertical",borderWidth:0,lineHeight:34,align:"right",verticalAlign:"top",style:{color:"#ff0000",fontSize:"11px"}},series:e})}})})},"deploy/widgets/report/securityReportComponent/SecurityReportComponentForm":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare"],function(l,m,k){return k("deploy.widgets.report.securityReportComponent.SecurityReportComponentForm",[m,l],{templateString:"<div></div>",constructor:function(){},
buildRendering:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments)},setProperties:function(){},getProperties:function(){return[]}})})},"deploy/widgets/report/securityReportComponent/SecurityReportComponentTable":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojox/html/entities","deploy/widgets/report/SecurityReportTable"],function(l,m,k,j,e){return m("deploy.widgets.report.securityReportComponent.SecurityReportComponentTable",[e],{reportRestUrlBase:null,
reportResultTable:null,reportName:"Component Security",selectableColumns:!0,constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportComponent",formatters:{multiNameFormatter:function(e,d){var c=k.create("div"),b=d?d.split(","):null;l.forEach(b,function(a,b){0!==b&&k.create("br",{},c);k.create("span",{innerHTML:j.encode(a)},c)});return c}},getReportResultLayout:function(){return[{name:i18n("Component"),
field:"name",orderField:"name",formatter:function(e){return e.component}},{formatter:this.formatters.multiNameFormatter,name:i18n("Create"),field:"Create Components"},{formatter:this.formatters.multiNameFormatter,name:i18n("Delete"),field:"Delete"},{formatter:this.formatters.multiNameFormatter,name:i18n("Edit Basic Settings"),field:"Edit Basic Settings"},{formatter:this.formatters.multiNameFormatter,name:i18n("Edit Components"),field:"Edit Components",hidden:!0},{formatter:this.formatters.multiNameFormatter,
name:i18n("Manage Configuration Templates"),field:"Manage Configuration Templates"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Processes"),field:"Manage Processes"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Properties"),field:"Manage Properties"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Teams"),field:"Manage Teams"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Versions"),field:"Manage Versions"},{formatter:this.formatters.multiNameFormatter,
name:i18n("View"),field:"View Components"}]}})})},"deploy/widgets/report/SecurityReportTable":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,dojox/html/entities,deploy/widgets/report/ReportTable,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b){return m("deploy.widgets.report.SecurityReportTable",[c],{systemReportBase:null,selectableColumns:!0,reportMetadata:null,activeColumns:[],constructor:function(){this.systemReportBase=
bootstrap.restUrl+"report/system/"},renderReport:function(){this.loadMetadata();this.cleanupReport();this.determineActiveColumns();this.createTable();this.displayTable()},loadMetadata:function(){var a=this;k.get({url:a.systemReportBase+util.encodeIgnoringSlash(a.reportName),handleAs:"json",sync:!0,load:function(b){a.reportMetadata=b},error:function(){a.showError()}})},cleanupReport:function(){this.reportTable&&this.reportTable.destroy()},determineActiveColumns:function(){var a=this;if(0!==this.getReportResultLayout().length)this.reportResultLayout=
this.getReportResultLayout();l.forEach(this.reportResultLayout,function(b){a.reportMetadata.hiddenColumns&&-1<a.reportMetadata.hiddenColumns.indexOf(b.field)||b.hidden?b.enabled=!1:(b.enabled=!0,a.activeColumns.push(b))})},createTable:function(){var a=this,c=this.reportMetadata.properties,d,h,j=[];l.forEach(a.reportResultLayout,function(a){a.enabled&&(j.push(a),l.forEach(c,function(a){if("orderField"===a.name)d=a.value;else if("sortType"===a.name)h=a.value}))});this.reportTable=new b({url:this.systemReportBase+
util.encodeIgnoringSlash(this.reportName)+"/results",columns:j,orderField:d||void 0,sortType:h,noDataMessage:i18n("No results found"),hideFooterLinks:!0,serverSideProcessing:!0,style:"overflow-x: auto; padding-bottom: 40px;",baseTextDir:util.getBaseTextDir(),hidePagination:!1,processXhrResponse:function(b){a.nonEmptyCallback&&a.nonEmptyCallback({reportLength:b.length,csvUrl:a.reportRestUrlBase+"adHoc/csv?"+a.adHocQuery,printReport:function(){if(a.reportChart){var b=a.reportChart.chartWidth,c=a.reportChart.chartHeight;
e.add(a.domNode,"print-view");a.reportChart.setSize(600,300,!1);setTimeout(function(){a.reportTable.print();e.remove(a.domNode,"print-view");setTimeout(function(){a.reportChart.setSize(b,c,!1)},100)},100)}else a.reportTable.print()}})}})},displayTable:function(){var a=this;this.reportTable.drawHeadings();this.reportTable.placeAt(this.domNode);if(this.selectableColumns){var b=j.create("td",{colspan:this.activeColumns.length},this.reportTable.filterAttach),b=j.create("a",{innerHTML:i18n("Select Columns"),
className:"report-column-edit-button linkPointer"},b);h(b,"click",function(){a.showTableDialog()})}},reRenderReport:function(){this.cleanupReport();this.determineActiveColumns();this.createTable();this.displayTable()}})})},"deploy/widgets/report/securityReportEnvironment/SecurityReportEnvironmentForm":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare"],function(l,m,k){return k("deploy.widgets.report.securityReportEnvironment.SecurityReportEnvironmentForm",[m,l],{templateString:"<div></div>",
constructor:function(){},buildRendering:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments)},setProperties:function(){},getProperties:function(){return[]}})})},"deploy/widgets/report/securityReportEnvironment/SecurityReportEnvironmentTable":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojox/html/entities","deploy/widgets/report/SecurityReportTable"],function(l,m,k,j,e){return m("deploy.widgets.report.securityReportEnvironment.SecurityReportEnvironmentTable",
[e],{reportRestUrlBase:null,reportResultTable:null,reportName:"Environment Security",selectableColumns:!0,constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportEnvironment",formatters:{multiNameFormatter:function(e,d){var c=k.create("div"),b=d?d.split(","):null;l.forEach(b,function(a,b){0!==b&&k.create("br",{},c);k.create("span",{innerHTML:j.encode(a)},c)});return c}},getReportResultLayout:function(){return[{name:i18n("Application"),
field:"application",orderField:"application",formatter:function(e){return e.application}},{name:i18n("Environment"),field:"name",orderField:"name",formatter:function(e){return e.environment}},{formatter:this.formatters.multiNameFormatter,name:i18n("Create"),field:"Create Environments"},{formatter:this.formatters.multiNameFormatter,name:i18n("Delete"),field:"Delete"},{formatter:this.formatters.multiNameFormatter,name:i18n("Edit Basic Settings"),field:"Edit Basic Settings"},{formatter:this.formatters.multiNameFormatter,
name:i18n("Execute"),field:"Execute on Environments"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Approval Processes"),field:"Manage Approval Processes"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Base Resources"),field:"Manage Base Resources"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Properties"),field:"Manage Properties"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Teams"),field:"Manage Teams"},{formatter:this.formatters.multiNameFormatter,
name:i18n("View"),field:"View Environments"}]}})})},"deploy/widgets/report/securityReportApplication/SecurityReportApplicationForm":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare"],function(l,m,k){return k("deploy.widgets.report.securityReportApplication.SecurityReportApplicationForm",[m,l],{templateString:"<div></div>",constructor:function(){},buildRendering:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments)},setProperties:function(){},
getProperties:function(){return[]}})})},"deploy/widgets/report/securityReportApplication/SecurityReportApplicationTable":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojox/html/entities","deploy/widgets/report/SecurityReportTable"],function(l,m,k,j,e){return m("deploy.widgets.report.securityReportApplication.SecurityReportApplicationTable",[e],{reportRestUrlBase:null,reportResultTable:null,reportName:"Application Security",selectableColumns:!0,constructor:function(){this.reportRestUrlBase=
bootstrap.restUrl+"report/"},formatters:{multiNameFormatter:function(e,d){var c=k.create("div"),b=d?d.split(","):null;l.forEach(b,function(a,b){0!==b&&k.create("br",{},c);k.create("span",{innerHTML:j.encode(a)},c)});return c}},reportType:"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportApplication",getReportResultLayout:function(){return[{name:i18n("Application"),field:"name",orderField:"name",formatter:function(e){return e.application}},{formatter:this.formatters.multiNameFormatter,
name:i18n("Run Component Processes"),field:"Run Component Processes"},{formatter:this.formatters.multiNameFormatter,name:i18n("Create"),field:"Create Applications"},{formatter:this.formatters.multiNameFormatter,name:i18n("Delete"),field:"Delete"},{formatter:this.formatters.multiNameFormatter,name:i18n("Edit Basic Settings"),field:"Edit Basic Settings"},{formatter:this.formatters.multiNameFormatter,name:i18n("View"),field:"View Applications"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Blueprints"),
field:"Manage Blueprints"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Components"),field:"Manage Components"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Environments"),field:"Manage Environments"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Processes"),field:"Manage Processes"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Properties"),field:"Manage Properties"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Snapshots"),
field:"Manage Snapshots"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Teams"),field:"Manage Teams"}]}})})},"deploy/widgets/report/deploymentReport/DeploymentReportTable":function(){define(["dojo/_base/declare","deploy/widgets/report/ReportTable"],function(l,m){return l("deploy.widgets.report.deploymentReport.DeploymentReportTable",[m],{constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.deployment_report.DeploymentReport",
reportRestUrlBase:null,reportResultTable:null,selectableColumns:!0,getReportResultLayout:function(){return[{name:i18n("Application"),field:"application",getRawValue:function(k){return k.application},orderField:"application"},{name:i18n("Environment"),field:"environment",getRawValue:function(k){return k.environment},orderField:"environment"},{formatter:util.tableDateFormatter,name:i18n("Date Scheduled"),field:"dateScheduled",getRawValue:function(k){return k.dateScheduled.toString()},orderField:"dateScheduled"},
{formatter:util.tableDateFormatter,name:i18n("Date Started"),field:"dateStarted",getRawValue:function(k){var j="";k.dateStarted&&(j=k.dateStarted.toString());return j},orderField:"dateStarted"},{name:i18n("User"),field:"user",getRawValue:function(k){return k.user},orderField:"user"},{name:i18n("Status"),field:"status",getRawValue:function(k){return k.status},orderField:"status"},{name:i18n("Duration"),field:"duration",formatter:util.durationFormatter,getRawValue:function(k){return Number(k.duration)},
orderField:"duration"},{name:i18n("Actions"),field:"applicationRequestId","class":"noPrint",formatter:function(k){var j=document.createElement("a");j.href="#applicationProcessRequest/"+k.applicationRequestId;j.innerHTML=i18n("View Request");return j}}]}})})},"deploy/widgets/report/deploymentReport/DeploymentReportForm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dojo/_base/array,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/DateRangeSelector,js/webext/widgets/FormDelegates".split(","),
function(l,m,k,j,e,h,d,c,b){return e("deploy.widgets.report.deploymentReport.DeploymentReportForm",[m,l],{templateString:"<div></div>",applicationSelect:null,environmentSelect:null,userFilter:null,dateRangePicker:null,statusSelect:null,columnCheckBoxes:null,datePickerAttach:null,report:null,constructor:function(a){if(a.report)this.report=a.report;if(a.datePickerAttach)this.datePickerAttach=a.datePickerAttach},buildRendering:function(){this.inherited(arguments);var a=this,d=h.create("div",{"class":"inlineBlock report-form-field"},
a.domNode);h.create("div",{innerHTML:i18n("Application")},d);a.applicationSelect=b.retrieveDelegate("TableFilterSelect")({url:bootstrap.restUrl+"deploy/application",idAttribute:"id",name:"app",allowNone:!0,placeHolder:i18n("Any"),onChange:function(b){a.updateEnvironmentOptions(b);b&&(a.updateComponentOptions(b),a.updateVersionOptions(a.componentSelect.value))},formatDropDownLabel:function(a,b){a.innerHTML=b.name.escape()}});a.applicationSelect.placeAt(d);d=h.create("div",{"class":"inlineBlock report-form-field"},
a.domNode);a.envDiv=d;h.create("div",{innerHTML:i18n("Environment")},d);a.updateEnvironmentOptions();a.datePickerAttach?h.create("div",{"class":"inlineBlock report-form-field"},a.datePickerAttach):h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);a.dateRangePicker=new c({timeUnit:"TIME_UNIT_DAY"});h.create("div",{innerHTML:i18n("Date Range")},a.datePickerAttach);a.dateRangePicker.placeAt(a.datePickerAttach);d=h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);h.create("div",
{innerHTML:i18n("User")},d);a.userFilter=b.retrieveDelegate("TableFilterSelect")({url:bootstrap.baseUrl+"security/user",name:"user",allowNone:!0,placeHolder:i18n("Any"),formatDropDownLabel:function(a,b){a.innerHTML=util.escape(b.displayName)}});a.userFilter.placeAt(d);d=h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);h.create("div",{innerHTML:i18n("Status")},d);a.statusSelect=new k({name:"status",value:"Any",options:[{label:i18n("Any"),value:"",selected:!0},{label:i18n("Success"),
value:"SUCCESS"},{label:i18n("Failure"),value:"FAILURE"},{label:i18n("Running"),value:"RUNNING"},{label:i18n("Scheduled"),value:"SCHEDULED"},{label:i18n("Approval Rejected"),value:"APPROVAL_REJECTED"},{label:i18n("Awaiting Approval"),value:"AWAITING_APPROVAL"}]});a.statusSelect.placeAt(d);d=h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);h.create("div",{innerHTML:i18n("Plugin")},d);a.pluginSelect=b.retrieveDelegate("TableFilterSelect")({url:bootstrap.restUrl+"plugin/automationPlugin",
name:"plugin",allowNone:!0,placeHolder:i18n("Any"),formatDropDownLabel:function(a,b){a.innerHTML=i18n(util.escape(b.name))}});a.pluginSelect.placeAt(d);d=h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);a.componentDiv=d;h.create("div",{innerHTML:i18n("Component")},d);a.updateComponentOptions();d=h.create("div",{"class":"inlineBlock report-form-field"},a.domNode);a.versionDiv=d;h.create("div",{innerHTML:i18n("Version")},d);a.updateVersionOptions();a.setProperties(a.report.properties)},
destroy:function(){this.inherited(arguments);this.applicationSelect.destroy();this.environmentSelect.destroy();this.dateRangePicker.destroy();this.userFilter.destroy();this.statusSelect.destroy();this.pluginSelect.destroy();j.forEach(this.columnCheckBoxes,function(a){a.checkBox.destroy()})},setProperties:function(a){var b=this,c=function(a,c,d){a.get("name")===c&&(a.set("value",d),"app"===c?(b.updateEnvironmentOptions(d),b.updateComponentOptions(d)):"component"===c&&b.updateVersionOptions(d))};j.forEach(a,
function(a){var d=a.name,a=a.value;c(b.applicationSelect,d,a);c(b.environmentSelect,d,a);c(b.userFilter,d,a);c(b.statusSelect,d,a);c(b.pluginSelect,d,a);c(b.componentSelect,d,a);c(b.versionSelect,d,a);"dateRange"===d&&b.dateRangePicker.set("value",a);"date_low"===d&&b.dateRangePicker.set("startDate",new Date(Number(a)));"date_hi"===d&&b.dateRangePicker.set("endDate",new Date(Number(a)))})},getProperties:function(){var a=[],b=function(b,c){var d=b.get("name"),e;e="plugin"===d?(e=b.get("item"))?e.name:
b.get("value"):b.get("value");d&&e&&(c?a.push({name:d,value:e.getTime()}):a.push({name:d,value:e}))};b(this.applicationSelect);b(this.environmentSelect);b(this.userFilter);b(this.statusSelect);b(this.pluginSelect);b(this.componentSelect);b(this.versionSelect);this.dateRangePicker&&(a.push({name:"dateRange",value:this.dateRangePicker.get("value")}),"custom"===this.dateRangePicker.get("value")&&(null!==this.dateRangePicker.getStartDate()&&a.push({name:"date_low",value:this.dateRangePicker.getStartDate().getTime()}),
null!==this.dateRangePicker.getEndDate()&&a.push({name:"date_hi",value:this.dateRangePicker.getEndDate().getTime()})));return a},setColumns:function(a){j.forEach(this.columnCheckBoxes,function(b){-1<a.indexOf(b.field)?b.checkBox.set("value",!1):b.checkBox.set("value",!0)})},getColumns:function(){var a=[];j.forEach(this.columnCheckBoxes,function(b){b.checkBox&&!1===b.checkBox.getValue()&&a.push(b.field)});return a},updateEnvironmentOptions:function(a){i18n("Any");this.environmentSelect&&(this.environmentSelect.get("value"),
this.environmentSelect.destroy());var c={name:"env",allowNone:!0,placeHolder:i18n("Any"),formatDropDownLabel:function(a,b){a.innerHTML=util.escape(b.name)}};a?c.url=bootstrap.restUrl+"deploy/application/"+a+"/environments/true":c.data=[];this.environmentSelect=b.retrieveDelegate("TableFilterSelect")(c);this.environmentSelect.placeAt(this.envDiv)},updateComponentOptions:function(a){var c=this;i18n("Any");c.componentSelect&&(c.componentSelect.get("value"),c.componentSelect.destroy());var d={name:"component",
allowNone:!0,placeHolder:i18n("Any"),onChange:function(a){c.updateVersionOptions(a)},formatDropDownLabel:function(a,b){a.innerHTML=util.escape(b.name)}};d.url=a?bootstrap.restUrl+"deploy/application/"+a+"/components":bootstrap.restUrl+"deploy/component";c.componentSelect=b.retrieveDelegate("TableFilterSelect")(d);c.componentSelect.placeAt(c.componentDiv)},updateVersionOptions:function(a){i18n("Any");this.versionSelect&&(this.versionSelect.get("value"),this.versionSelect.destroy());var c={name:"version",
allowNone:!0,placeHolder:i18n("Any"),formatDropDownLabel:function(a,b){a.innerHTML=util.escape(b.name)}};a?c.url=bootstrap.restUrl+"deploy/component/"+a+"/versions/false":c.data=[];this.versionSelect=b.retrieveDelegate("TableFilterSelect")(c);this.versionSelect.placeAt(this.versionDiv)}})})},"deploy/widgets/report/ReportSidebar":function(){define("dijit/TitlePane,dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojox/widget/TitleGroup,js/webext/widgets/Dialog,js/webext/widgets/Alert".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){return e("deploy.widgets.report.ReportSidebar",[k,m],{templateString:'<div><div data-dojo-attach-point="sidebarAttach"></div></div>',sideBarAttach:null,typeSelect:null,typeForm:null,report:null,reload:null,constructor:function(a){if(!a.reportRestUrlBase)this.reportRestUrlBase=bootstrap.restUrl+"report/";if(!a.reportHashBase)this.reportHashBase="reports/";if(a.report)this.report=a.report},postCreate:function(){this.inherited(arguments);this.renderAccordions()},renderAccordions:function(){var a=
this;c.empty(a.sidebarAttach);a.systemContainer=new b({"class":"report-accordion"});a.savedContainer=new b({"class":"report-accordion"});a.callsNeeded=1;a.mine=[];h.get({url:a.reportRestUrlBase+"system",handleAs:"json",load:function(b){a.loadSystemAccordion(b)}});h.get({url:a.reportRestUrlBase+"mine",handleAs:"json",load:function(b){a.loadSavedAccordion(b,"mine")}});a.systemContainer.placeAt(a.sidebarAttach);a.savedContainer.placeAt(a.sidebarAttach)},buildRendering:function(){this.inherited(arguments)},
loadSavedAccordion:function(a,b){var c=this;j.forEach(a,function(a){c[b].push(a.name)});c.callsNeeded--;0===c.callsNeeded&&c._loadSavedAccordion()},_loadSavedAccordion:function(){var a=this,b=c.create("div"),e=!1,f=0;j.forEach(a.mine,function(h){var j="report-link-div",k="inlineBlock report-link";a.report&&a.report.name===h&&(j="report-link-div-selected",k="report-link-selected",e=!0);var l=a.reportHashBase+util.encodeIgnoringSlash(h),j=c.create("div",{"class":j},b),k=c.create("a",{onclick:function(){a.loadReport(l,
h)},innerHTML:h.escape(),"class":k},j);d.add(k,"linkPointer");c.create("a",{onclick:function(){a.deleteSavedReport(h)},"class":"inlineBlock iconMinus"},j);f++});f="&nbsp;("+f+")";a.minePane=new l({title:i18n("My Reports")+f,content:b,style:"height:auto"});a.minePane.placeAt(a.savedContainer);e||(a.minePane.set("open",!1),a.deploymentPane&&a.securityPane&&!a.deploymentPane.open&&!a.securityPane.open&&a.deploymentPane.set("open",!0))},loadSystemAccordion:function(a){var b=this,e=c.create("div"),f=c.create("div"),
h=!1,k=!1;j.forEach(a,function(a){var j="report-link-div",l="report-link";b.report&&b.report.name===a.name&&(j="report-link-div-selected",l="report-link-selected");var m=b.reportHashBase+"system/"+util.encodeIgnoringSlash(a.name),n;-1!==a.name.indexOf("Security")&&("report-link-div-selected"===j&&(h=!0),n=c.create("div",{"class":j},e),n=c.create("a",{onclick:function(){b.loadReport(m,a.name)},innerHTML:i18n(a.name.escape()),"class":l},n),d.add(n,"linkPointer"));-1!==a.name.indexOf("Deployment")&&
("report-link-div-selected"===j&&(k=!0),n=c.create("div",{"class":j},f),n=c.create("a",{onclick:function(){b.loadReport(m,a.name)},innerHTML:i18n(a.name.escape()),"class":l},n),d.add(n,"linkPointer"))});b.securityPane=new l({title:i18n("Security"),content:e,style:"height:auto"});b.deploymentPane=new l({title:i18n("Deployment"),content:f,style:"height:auto"});b.deploymentPane.placeAt(b.systemContainer);b.securityPane.placeAt(b.systemContainer);k||b.deploymentPane.set("open",!1);h||b.securityPane.set("open",
!1)},_getFormForType:function(a){var b;if("com.urbancode.ds.subsys.report.domain.deployment_report.DeploymentReport"===a)b=deploy.widgets.report.deploymentReport.DeploymentReportForm;else if("com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===a)b=deploy.widgets.report.deploymentCount.DeploymentCountReportForm;else if("com.urbancode.ds.subsys.report.domain.security_report.application.SecurityReportApplication"===a)b=deploy.widgets.report.securityReportApplication.SecurityReportApplicationForm;
else if("com.urbancode.ds.subsys.report.domain.security_report.component.SecurityReportComponent"===a)b=deploy.widgets.report.securityReportComponent.SecurityReportComponentForm;else if("com.urbancode.ds.subsys.report.domain.security_report.resource.SecurityReportResource"===a)b=deploy.widgets.report.securityReportResource.SecurityReportResourceForm;else if("com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportEnvironment"===a)b=deploy.widgets.report.securityReportEnvironment.SecurityReportEnvironmentForm;
else if("com.urbancode.ds.subsys.report.domain.security_report.user.SecurityReportUser"===a)b=deploy.widgets.report.securityReportUser.SecurityReportUserForm;return b},getReportDisplayWidget:function(a){var b;if("com.urbancode.ds.subsys.report.domain.deployment_report.DeploymentReport"===a)b=deploy.widgets.report.deploymentReport.DeploymentReportTable;else if("com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===a)b=deploy.widgets.report.deploymentCount.DeploymentCountReportTable;
else if("com.urbancode.ds.subsys.report.domain.security_report.application.SecurityReportApplication"===a)b=deploy.widgets.report.securityReportApplication.SecurityReportApplicationTable;else if("com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportEnvironment"===a)b=deploy.widgets.report.securityReportEnvironment.SecurityReportEnvironmentTable;else if("com.urbancode.ds.subsys.report.domain.security_report.resource.SecurityReportResource"===a)b=deploy.widgets.report.securityReportResource.SecurityReportResourceTable;
else if("com.urbancode.ds.subsys.report.domain.security_report.component.SecurityReportComponent"===a)b=deploy.widgets.report.securityReportComponent.SecurityReportComponentTable;else if("com.urbancode.ds.subsys.report.domain.security_report.user.SecurityReportUser"===a)b=deploy.widgets.report.securityReportUser.SecurityReportUserTable;return b},destroy:function(){var a=this.systemContainer;a&&a.destroy();(a=this.minePane)&&a.destroy();(a=this.securityPane)&&a.destroy();(a=this.deploymentPane)&&a.destroy();
this.inherited(arguments)},closePane:function(a){a&&a.open&&a.toggle()},deleteSavedReport:function(a){var b=this;h.del({url:b.reportRestUrlBase+a,load:function(){b.renderAccordions()},error:function(a){(new f({title:i18n("An error occured while trying to delete this report"),message:a.message})).startup()}})},loadReport:function(a,b){navBar.setHash(a);this.report&&this.report.name===b&&this.reload&&this.reload()}})})},"dojox/widget/TitleGroup":function(){define(["dojo","dijit/registry","dijit/_Widget",
"dijit/TitlePane"],function(l,m,k,j){var k=j.prototype,e=function(){var e=this._dxfindParent&&this._dxfindParent();e&&e.selectChild(this)};k._dxfindParent=function(){var e=this.domNode.parentNode;return e?(e=m.getEnclosingWidget(e))&&e instanceof dojox.widget.TitleGroup&&e:e};l.connect(k,"_onTitleClick",e);l.connect(k,"_onTitleKey",function(h){(!h||!h.type||!("keypress"==h.type&&h.charOrCode==l.keys.TAB))&&e.apply(this,arguments)});return l.declare("dojox.widget.TitleGroup",dijit._Widget,{"class":"dojoxTitleGroup",
addChild:function(e,d){return e.placeAt(this.domNode,d)},removeChild:function(e){this.domNode.removeChild(e.domNode);return e},selectChild:function(e){e&&l.query("> .dijitTitlePane",this.domNode).forEach(function(d){(d=m.byNode(d))&&d!==e&&d.open&&d.toggle()});return e}})})},"deploy/widgets/report/ReportLists":function(){define("dijit/Tooltip,dijit/_TemplatedMixin,dijit/_Widget,dijit/form/ToggleButton,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-style,dojo/on,dojox/html/entities,js/webext/widgets/GenericConfirm,js/webext/widgets/PopDown,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return e("deploy.widgets.report.ReportLists",[k,m],{templateString:'<div class="report-definition-list noPrint"><div data-dojo-attach-point="headingSectionAttach"></div></div>',reportRestUrlBase:null,reportHashBase:null,hasReport:!1,headingSectionAttach:null,myRecentReportsTable:null,myReportsTable:null,sharedReportsTable:null,recentReportsButton:null,myReportsButton:null,sharedReportsButton:null,constructor:function(a){if(!a.reportRestUrlBase)this.reportRestUrlBase=
bootstrap.restUrl+"report/";this.reportHashBase="reports/"},getButtons:function(){return{recentReportsButton:this.recentReportsButton,myReportsButton:this.myReportsButton,sharedReportsButton:this.sharedReportsButton}},postCreate:function(){this.inherited(arguments);var e=this,f=function(a){c.set(a,{"margin-bottom":"0.5em"});c.set(a.domAttach,{padding:"0.5em 1em",border:"1px gray solid"});c.set(a.headerAttach,{"font-size":"14px","background-size":"14px, auto","padding-left":"16px"})},h={name:i18n("Report Name"),
field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},formatter:function(b){var c=a.encode(b.name),c=d.create("a",{href:"#"+e.getHashForReport(b),innerHTML:c});new l({connectId:c,label:a.encode(b.description||"<none>")});return c}},k={name:i18n("Description"),field:"description"},m={name:i18n("Type"),field:"type"},w={name:i18n("Shared"),field:"shared"},v={name:i18n("Owner"),field:"owner"},x={name:i18n("Created"),field:"created",orderField:"created",
getRawValue:function(a){return a.created},formatter:function(a){return a.created&&util.dateFormatShort(a.created)}},y={name:i18n("Actions"),formatter:function(a){var c=d.create("span"),f=d.create("a",{"class":"linkPointer",innerHTML:i18n("Delete")},c);b(f,"click",function(){e.deleteReport(a)});return c}},C=e.hasReport?i18n("Recent Reports"):"<b>"+i18n("Recent Reports")+"</b>";e.recentReportsButton=new j({label:C,checked:!e.hasReport});e.recentReportsButton.placeAt(e.headingSectionAttach);e.myReportsButton=
new j({label:i18n("My Reports")});e.myReportsButton.placeAt(e.headingSectionAttach);e.sharedReportsButton=new j({label:i18n("Shared Reports")});e.sharedReportsButton.placeAt(e.headingSectionAttach);var B=new n({collapsed:e.hasReport});f(B);B.placeAt(e.headingSectionAttach);this.myRecentReportsTable=new r({url:e.reportRestUrlBase+"recent",serverSideProcessing:!1,columns:[h,k,m,w,v,x],noDataMessage:i18n("No recent reports found."),orderField:null,hideExpandCollapse:!0,hidePagination:!0});d.create("div",
{"class":"innerContainerLabel",innerHTML:i18n("Recent Reports")},B.domAttach);this.myRecentReportsTable.placeAt(B.domAttach);var A=new n({collapsed:!0});f(A);A.placeAt(e.headingSectionAttach);this.myReportsTable=new r({url:e.reportRestUrlBase+"mine",serverSideProcessing:!1,columns:[h,k,m,w,x,y],noDataMessage:i18n("No shared reports found."),orderField:"name",hideExpandCollapse:!0,hidePagination:!0});d.create("div",{"class":"innerContainerLabel",innerHTML:i18n("My Reports")},A.domAttach);this.myReportsTable.placeAt(A.domAttach);
var z=new n({collapsed:!0});f(z);z.placeAt(e.headingSectionAttach);this.sharedReportsTable=new r({url:e.reportRestUrlBase+"shared",serverSideProcessing:!1,columns:[h,k,m,v,x],noDataMessage:i18n("No shared reports found."),orderField:"name",hideExpandCollapse:!0,hidePagination:!0});d.create("div",{"class":"innerContainerLabel",innerHTML:i18n("Shared Reports")},z.domAttach);this.sharedReportsTable.placeAt(z.domAttach);e.recentReportsButton.onChange=function(){B.toggle();this.get("checked")?this.set("label",
"<b>"+i18n("Recent Reports")+"</b>"):this.set("label",i18n("Recent Reports"))};e.myReportsButton.onChange=function(){A.toggle();this.get("checked")?this.set("label","<b>"+i18n("My Reports")+"</b>"):this.set("label",i18n("My Reports"))};e.sharedReportsButton.onChange=function(){z.toggle();this.get("checked")?this.set("label","<b>"+i18n("Shared Reports")+"</b>"):this.set("label",i18n("Shared Reports"))}},getHashForReport:function(a){return a.shared?this.reportHashBase+"shared/"+a.name:this.reportHashBase+
a.name},destroy:function(){this.inherited(arguments);this.myRecentReportsTable.destroy();this.myReportsTable.destroy();this.sharedReportsTable.destroy();this.recentReportsButton.destroy();this.myReportsButton.destroy();this.sharedReportsButton.destroy()},actionsFormatter:function(a){var b=document.createElement("a");b.href="#applicationProcessRequest/"+a.applicationRequestId;b.innerHTML=i18n("View Request");return b},deleteReport:function(b){var c=this,d=a.encode(b.name);new f({message:i18n("Are you sure you wish to delete %s?",
d),action:function(){h.del({url:c.reportRestUrlBase+b.name,sync:!0,load:function(){c.refresh()}})}})},refresh:function(){this.myRecentReportsTable.refresh();this.myReportsTable.refresh();this.sharedReportsTable.refresh()}})})},"deploy/widgets/report/securityReportResource/SecurityReportResourceForm":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare"],function(l,m,k){return k("deploy.widgets.report.securityReportResource.SecurityReportResourceForm",[m,l],{templateString:"<div></div>",
constructor:function(){},buildRendering:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments)},setProperties:function(){},getProperties:function(){return[]}})})},"deploy/widgets/report/securityReportResource/SecurityReportResourceTable":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojox/html/entities","deploy/widgets/report/SecurityReportTable"],function(l,m,k,j,e){return m("deploy.widgets.report.securityReportResource.SecurityReportResourceTable",
[e],{reportRestUrlBase:null,reportResultTable:null,reportName:"Resource Security",selectableColumns:!0,constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportResource",formatters:{multiNameFormatter:function(e,d){var c=k.create("div"),b=d?d.split(","):null;l.forEach(b,function(a,b){0!==b&&k.create("br",{},c);k.create("span",{innerHTML:j.encode(a)},c)});return c}},getReportResultLayout:function(){return[{name:i18n("Resource"),
field:"path",orderField:"path",formatter:function(e){return e.resource}},{formatter:this.formatters.multiNameFormatter,name:i18n("Create"),field:"Create Resources"},{formatter:this.formatters.multiNameFormatter,name:i18n("View"),field:"View Resources"},{formatter:this.formatters.multiNameFormatter,name:i18n("Delete"),field:"Delete"},{formatter:this.formatters.multiNameFormatter,name:i18n("Edit Basic Settings"),field:"Edit Basic Settings"},{formatter:this.formatters.multiNameFormatter,name:i18n("Map to Environments"),
field:"Map to Environments"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Children"),field:"Manage Children"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Properties"),field:"Manage Properties"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Teams"),field:"Manage Teams"},{formatter:this.formatters.multiNameFormatter,name:i18n("Manage Impersonation"),field:"Manage Impersonation"}]}})})},"deploy/widgets/report/ReportFormTable":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/mouse,dojo/io-query,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,deploy/widgets/report/deploymentReport/DeploymentReportForm,deploy/widgets/report/deploymentCount/DeploymentCountReportForm,deploy/widgets/report/securityReportUser/SecurityReportUserForm,deploy/widgets/report/deploymentReport/DeploymentReportTable,deploy/widgets/report/deploymentCount/DeploymentCountReportTable,deploy/widgets/report/deploymentCount/DeploymentDurationSumReportTable,deploy/widgets/report/deploymentCount/DeploymentDurationAverageReportTable,deploy/widgets/report/securityReportApplication/SecurityReportApplicationTable,deploy/widgets/report/securityReportEnvironment/SecurityReportEnvironmentTable,deploy/widgets/report/securityReportResource/SecurityReportResourceTable,deploy/widgets/report/securityReportComponent/SecurityReportComponentTable,deploy/widgets/report/securityReportUser/SecurityReportUserTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E){return h("deploy.widgets.report.ReportFormTable",[m,l],{templateString:'<div class="report-form-table"><div data-dojo-attach-point="breadcrumbContainer"><div data-dojo-attach-point="scheduleLinkAttach" class="report-link inlineBlock"></div><div data-dojo-attach-point="csvLinkAttach" class="report-link inlineBlock"></div><div data-dojo-attach-point="printLinkAttach" class="report-link inlineBlock"></div><div data-dojo-attach-point="breadcrumbAttach" class="report-breadcrumb inlineBlock"></div><div><div class="inlineBlock report-form" data-dojo-attach-point="reportFormAP"><div data-dojo-attach-point="datePickerAttach" class="report-date-picker report-form-field inlineBlock"></div><div data-dojo-attach-point="formAttach" class="inlineBlock report-form-field"></div></div><div class="report-button-span report-form-field inlineBlock" data-dojo-attach-point="reportButtonSpanAP"><div class="inlineBlock report-buttons" data-dojo-attach-point="reportButtonAttach"></div></div></div><div class="description-span inlineBlock" data-dojo-attach-point="descriptionAttach"></div></div><div data-dojo-attach-point="tableAttach" class="report-table"></div></div>',
runButtonAttach:null,saveButtonAttach:null,formAttach:null,tableAttach:null,report:null,form:null,table:null,saveButton:null,runButton:null,scheduleLinkAttach:null,csvLinkAttach:null,printLinkAttach:null,constructor:function(a){if(!a.reportRestUrlBase)this.reportRestUrlBase=bootstrap.restUrl+"report/";if(!a.reportHashBase)this.reportHashBase="reports/";if(a.report)this.report=a.report},buildRendering:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);var a=this;
if(a.report){var d=a._getFormForType(a.report.type);c.remove(this.breadcrumbAttach,"has-form-widget");void 0!==d?(a.form=new d({report:a.report,datePickerAttach:a.datePickerAttach}),a.form.placeAt(a.formAttach),c.add(this.breadcrumbAttach,"has-form-widget"),a.renderReport(),b.create("div",{innerHTML:"&nbsp;"},a.reportButtonAttach),d=b.create("div",{className:"report-button"},a.reportButtonAttach),a.runButton=new k({label:i18n("Run"),showTitle:!1,onClick:function(){a.requestPreviewReport()},"class":"reportButton"}),
a.runButton.set("disabled",!1),a.runButton.placeAt(d),c.add(a.runButton.domNode,"idxButtonSpecial idxButtonCompact"),a.saveButton=new k({label:i18n("Save"),showTitle:!1,onClick:function(){a.showSaveFilterDialog()},"class":"reportButton"}),a.saveButton.set("disabled",!1),a.saveButton.placeAt(d),c.add(a.saveButton.domNode,"idxButtonCompact"),a.report.description&&(b.create("span",{innerHTML:i18n("Description")+": ",className:"bold"},a.descriptionAttach),b.create("span",{innerHTML:util.applyBTD(util.escape(a.report.description))},
a.descriptionAttach))):a.renderReport()}},renderReport:function(){var a=this;if(a.table)a.table.destroy(),a.table=null;b.empty(a.breadcrumbAttach);b.empty(a.tableAttach);b.empty(a.scheduleLinkAttach);b.empty(a.csvLinkAttach);if(a.report){var c=a.reportRestUrlBase;a.report.system?c+="system/":a.report.shared&&(c+="shared/");a.renderBreadcrumb();var d=c+util.encodeIgnoringSlash(a.report.name)+"/results",e=a._getReportDisplayWidget(a.report.type),f=c+a.report.name+"/csv";a.table=new e({nonEmptyCallback:function(b){b.csvUrl=
f;a.generateLinks(b)}});a.table.placeAt(a.tableAttach);a.table.renderReport(d)}},renderBreadcrumb:function(){var a=[];this.report.system?(-1<this.report.name.indexOf("Deployment")?a.push(i18n("Deployment")):-1<this.report.name.indexOf("Security")&&a.push(i18n("Security")),a.push(i18n(this.report.name))):(a.push(i18n("My Reports")),a.push(util.applyBTD(util.escape(this.report.name))));var b="";e.forEach(a,function(a,c){0<c&&(b+=' <img src="'+bootstrap.imageUrl+'deploy/arrow_report_breadcrumbs.png"> ');
b+=a});c.add(this.breadcrumbContainer,"report-breadcrumb-container");this.breadcrumbAttach.innerHTML=b},showSaveFilterDialog:function(){var a=this;this.saveFilterDialog=new q({title:i18n("Save Current Filters"),closable:!0,draggable:!0});var b=new t({submitUrl:a.reportRestUrlBase,submitMethod:"PUT",addData:function(b){var c=[],c=c.concat(a.form.getProperties());b.properties=c;if(c=a.table.getDisplayConfig())b.hiddenColumns=c.hiddenColumns,c.orderField&&c.sortType&&(b.properties.push({name:"orderField",
value:c.orderField}),b.properties.push({name:"sortType",value:c.sortType}));b.reportType=a.report.type},postSubmit:function(b){var c=b.name,d=a.reportHashBase;b.shared&&(d+="shared/");d+=util.encodeIgnoringSlash(c);navBar.setHash(d,!1,!0);a.saveFilterDialog.hide();a.saveFilterDialog.destroy()},onCancel:function(){a.saveFilterDialog.onCancel()}});b.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:a.report.name});b.addField({name:"description",label:i18n("Description"),required:!1,
type:"Text Area",value:a.report.description});b.placeAt(this.saveFilterDialog.containerNode);this.saveFilterDialog.show()},requestPreviewReport:function(){var a=this,c=a.report.type;if(c){var d;a.resultWidget?(d=a.resultWidget.getDisplayConfig(),a.resultWidget.destroy(),a.resultWidget=null):a.table&&a.table.getDisplayConfig&&(d=a.table.getDisplayConfig());b.empty(a.tableAttach);a.csvLinkAttach&&b.empty(a.csvLinkAttach);a.printLinkAttach&&b.empty(a.printLinkAttach);var f={};f.type=c;f.isAdHoc=!0;var h=
[],h=h.concat(a.form.getProperties());d&&d.orderField&&d.sortType&&(h.push({name:"orderField",value:d.orderField}),h.push({name:"sortType",value:d.sortType}));e.forEach(h,function(a){f[a.name]=a.value});var j=[];if("deploymentCount"===c){var k=[];e.forEach(h,function(a){k.push(a.name)});e.forEach(["application","time_unit"],function(a){0>k.indexOf(a)&&j.push(a)})}var l=n.objectToQuery(f);if(d&&d.hiddenColumns)f.hiddenColumns=d.hiddenColumns;f.query=l;f.properties=h;f.name=i18n("Unsaved Report");j.length?
new r({title:i18n("Missing Report Parameters"),draggable:!0,message:i18n("Please select the following parameters: %s",util.escape(j.toString()))}):(c=a._getReportDisplayWidget(c),a.resultWidget=new c({nonEmptyCallback:function(b){a.generateLinks(b)}}),a.resultWidget.placeAt(a.tableAttach),a.resultWidget.renderAdHocReport({report:f,errorCallback:function(a){new r({title:i18n("Missing Report Parameters"),draggable:!0,message:i18n("Missing parameters: %s",util.escape(a.toString()))})}}))}else new r({title:i18n("Missing Report Parameters"),
draggable:!0,message:i18n("Please select a report type")})},generateLinks:function(c){var h=this;b.empty(h.scheduleLinkAttach);b.empty(h.csvLinkAttach);b.empty(h.printLinkAttach);if(c.reportLength){var j=util.createDownloadAnchor({href:c.csvUrl},h.csvLinkAttach);b.create("div",{className:"linkPointer general-icon download-icon",title:i18n("Download CSV"),alt:i18n("Download CSV")},j);this.own(a(j,f.enter,function(){var a=h.table.reportMetadata,b="";e.forEach(a?a.hiddenColumns:[],function(a){"applicationRequestId"!==
a&&(b=""!==b?b+"&":b+"?",b+="hiddenColumns="+a.toLowerCase())});d.set(j,"href",c.csvUrl+b)}));if(!h.report.system){var k=b.create("div",{className:"linkPointer general-icon schedule-icon",title:i18n("Schedule Recurring Report"),alt:i18n("Schedule Recurring Report")},h.scheduleLinkAttach);a(k,"click",function(){var a=new q({title:i18n("Schedule Recurring Report"),closable:!0});h.callback=function(){a.hide();a.destroy()};h.showScheduleDialog();h.scheduleForm.placeAt(a.containerNode);a.show()})}c.printReport&&
(k=b.create("div",{className:"linkPointer general-icon print-icon",title:i18n("Print Report"),alt:i18n("Print Report")},h.printLinkAttach),a(k,"click",function(){c.printReport()}))}},destroy:function(){this.table&&this.table.destroy();this.form&&this.form.destroy();this.saveButton&&this.saveButton.destroy();this.runButton&&this.runButton.destroy();this.inherited(arguments)},_getFormForType:function(a){var b;"com.urbancode.ds.subsys.report.domain.deployment_report.DeploymentReport"===a?b=o:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===
a?b=s:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationSumReport"===a?b=s:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationAverageReport"===a?b=s:"com.urbancode.ds.subsys.report.domain.security_report.application.SecurityReportApplication"===a?b=void 0:"com.urbancode.ds.subsys.report.domain.security_report.component.SecurityReportComponent"===a?b=void 0:"com.urbancode.ds.subsys.report.domain.security_report.resource.SecurityReportResource"===a?b=void 0:
"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportEnvironment"===a?b=void 0:"com.urbancode.ds.subsys.report.domain.security_report.user.SecurityReportUser"===a&&(b=u);return b},_getReportDisplayWidget:function(a){var b;"com.urbancode.ds.subsys.report.domain.deployment_report.DeploymentReport"===a?b=w:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentCountReport"===a?b=v:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationSumReport"===
a?b=x:"com.urbancode.ds.subsys.report.domain.deployment_count.DeploymentDurationAverageReport"===a?b=y:"com.urbancode.ds.subsys.report.domain.security_report.application.SecurityReportApplication"===a?b=C:"com.urbancode.ds.subsys.report.domain.security_report.environment.SecurityReportEnvironment"===a?b=B:"com.urbancode.ds.subsys.report.domain.security_report.resource.SecurityReportResource"===a?b=A:"com.urbancode.ds.subsys.report.domain.security_report.component.SecurityReportComponent"===a?b=z:
"com.urbancode.ds.subsys.report.domain.security_report.user.SecurityReportUser"===a&&(b=E);return b},showScheduleOptions:function(){var a=this;a.scheduleForm.addField({name:"date",label:i18n("Date"),required:!0,type:"Date"},"_scheduleInsert");a.scheduleForm.addField({name:"time",label:i18n("Time"),required:!0,type:"Time"},"_scheduleInsert");a.scheduleForm.addField({name:"recurrencePattern",label:i18n("Pattern"),type:"Select",allowedValues:[{value:"M",label:i18n("Monthly")},{value:"W",label:i18n("Weekly")},
{value:"D",label:i18n("Daily")}],required:!0},"_scheduleInsert");a.stopScheduleCheckbox=new j({onChange:function(b){b?(a.scheduleForm.removeField("date"),a.scheduleForm.removeField("time"),a.scheduleForm.hasField("recurrencePattern")&&a.scheduleForm.removeField("recurrencePattern")):(a.scheduleForm.removeField("stopScheduleCheckbox"),a.showScheduleOptions())}});a.scheduleForm.addField({name:"stopScheduleCheckbox",label:i18n("Stop scheduling this report?"),widget:a.stopScheduleCheckbox},"_scheduleInsert")},
showScheduleDialog:function(){var a=this;a.scheduleForm=new t({addData:function(a){if(a.date&&a.time)a.startDate=util.combineDateAndTime(a.date,a.time).valueOf();a.stopSchedulingReport=a.stopScheduleCheckbox?!0:!1},submitUrl:bootstrap.restUrl+"report/"+a.report.name+"/scheduledReport",postSubmit:function(){void 0!==a.callback&&a.callback()},onCancel:function(){void 0!==a.callback&&a.callback()},onError:function(b){void 0!==a.callback&&a.callback();new r({title:i18n("Error"),messages:[i18n("An error has occurred while scheduling the report:"),
"",util.escape(b.responseText)]})},saveLabel:i18n("Submit")});a.showScheduleOptions()}})})},"deploy/widgets/report/securityReportUser/SecurityReportUserForm":function(){define("dojo/_base/declare,dojo/_base/array,dijit/_Widget,dijit/_TemplatedMixin,dojo/dom-construct,js/webext/widgets/FormDelegates".split(","),function(l,m,k,j,e,h){return l([k,j],{templateString:"<div></div>",authRealmAttach:null,authRealmSelect:null,groupSelect:null,groupAttach:null,constructor:function(){this.authRealmRestUrl=bootstrap.baseUrl+
"security/authenticationRealm";this.groupRestUrl=bootstrap.baseUrl+"security/group"},buildRendering:function(){this.inherited(arguments);var d=e.create("div",{"class":"inlineBlock",style:"margin-right: 5px;"},this.domNode);e.create("div",{innerHTML:i18n("Authentication Realm")},d);this.authRealmSelect=h.retrieveDelegate("TableFilterMultiSelect")({url:this.authRealmRestUrl,idAttribute:"id",name:"authRealm",placeHolder:i18n("Any"),formatDropDownLabel:function(c,b){c.innerHTML=b.name.escape()}});this.authRealmSelect.placeAt(d);
d=e.create("div",{"class":"inlineBlock"},this.domNode);e.create("div",{innerHTML:i18n("Group")},d);this.groupSelect=h.retrieveDelegate("TableFilterMultiSelect")({url:this.groupRestUrl,idAttribute:"id",name:"groups",placeHolder:i18n("Any"),formatDropDownLabel:function(c,b){c.innerHTML=b.name.escape()}});this.groupSelect.placeAt(d);this.setProperties(this.report.properties)},destroy:function(){this.inherited(arguments);this.authRealmSelect.destroy();this.groupSelect.destroy()},setProperties:function(d){var c=
this;m.forEach(d,function(b){var a=b.name,b=b.value,d=c.authRealmSelect;d.get("name")===a&&d.set("value",b);d=c.groupSelect;d.get("name")===a&&d.set("value",b)})},getProperties:function(){var d=[],c=function(b){var a=b.get("name"),b=b.get("value");a&&b&&d.push({name:a,value:b})};c(this.authRealmSelect);c(this.groupSelect);return d}})})},"deploy/widgets/report/securityReportUser/SecurityReportUserTable":function(){define("dojo/_base/declare,dojo/_base/array,dijit/_Widget,dijit/_TemplatedMixin,deploy/widgets/report/ReportTable,dojox/html/entities,dojo/dom-construct,dojo/on,js/webext/widgets/Dialog,deploy/widgets/security/EditUser,deploy/widgets/security/SetUserPassword,dojo/html".split(","),
function(l,m,k,j,e,h){return l([e],{reportRestUrlBase:null,reportResultTable:null,selectableColumns:!0,constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/"},reportType:"com.urbancode.ds.subsys.report.domain.security_report.user.SecurityReportUser",formatters:{multiNameFormatter:function(d,c){var b=dojo.create("div"),a=c?c.split(","):null;m.forEach(a,function(a,c){0!==c&&dojo.create("br",{},b);dojo.create("span",{innerHTML:h.encode(a)},b)});return b}},getReportResultLayout:function(){return[{name:i18n("User"),
field:"name",getRawValue:function(d){return d.name},orderField:"name"},{name:i18n("Name"),field:"actualName",getRawValue:function(d){return d.actualName},orderField:"actualName"},{name:i18n("Email"),field:"email",orderField:"email",getRawValue:function(d){return d.email}},{name:i18n("Authentication Realm"),field:"authRealm",getRawValue:function(d){return i18n(d.authRealm)},formatter:function(d,c){return i18n(c)},orderField:"authRealm"},{name:i18n("Groups"),field:"groups",getRawValue:function(d){return d.groups}}]}})})},
"deploy/widgets/security/EditUser":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.security.EditUser",[m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=this;this.existingValues={};if(this.user)this.existingValues=this.user;var h=bootstrap.baseUrl+"security/user";this.user&&(h+="/"+this.user.id);
this.form=new j({submitUrl:h,submitMethod:this.user?"PUT":"POST",addData:function(d){d.authenticationRealm=e.realmId},postSubmit:function(){void 0!==e.callback&&e.callback(!0)},onCancel:function(){void 0!==e.callback&&e.callback()}});this.form.addField({name:"name",label:i18n("Username"),required:!0,type:"Text",readOnly:!!this.user,value:this.existingValues.name});this.importOnly||this.user||this.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure",value:""});if(this.user||
!this.importOnly)this.form.addField({name:"actualName",label:i18n("Name"),required:!1,type:"Text",value:this.existingValues.actualName}),this.form.addField({name:"email",label:i18n("Email"),required:!1,type:"Text",textDir:"ltr",value:this.existingValues.email});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/security/SetUserPassword":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm"],function(l,m,k,j){return k("deploy.widgets.security.SetUserPassword",
[m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var e=this;this.form=new j({submitUrl:bootstrap.baseUrl+"security/user/"+this.user.id+"/setPassword",submitMethod:"PUT",postSubmit:function(){void 0!==e.callback&&e.callback()},onCancel:function(){void 0!==e.callback&&e.callback()},validateFields:function(e){var d=[];e.password!==e.passwordAgain&&d.push(i18n("Passwords do not match"));delete e.passwordAgain;
return d}});this.form.addField({name:"password",label:i18n("Password"),required:!0,type:"Secure",value:""});this.form.addField({name:"passwordAgain",label:i18n("Re-enter"),required:!0,type:"Secure",value:""});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/report/ReportPage":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,deploy/widgets/report/ReportFormTable,deploy/widgets/report/ReportSidebar".split(","),function(l,m,k,j,e,h){return k("deploy.widgets.report.ReportPage",
[m,l],{templateString:'<div class="report-definition-list"><div data-dojo-attach-point="headingSectionAttach" class="noPrint"></div><div class="report-page-container"><div data-dojo-attach-point="sidebarAttach" class="report-sidebar noPrint"></div><div data-dojo-attach-point="tableContainer" class="report-main"></div></div><br/><br/></div>',reportRestUrlBase:null,reportHashBase:null,headingSectionAttach:null,gridAttach:null,tableContainer:null,csvLinkAttach:null,sidebarAttach:null,listsAttach:null,
saveFilterButton:null,previewButton:null,reportLists:null,reportSidebar:null,report:null,reportType:null,resultWidget:null,constructor:function(){this.reportRestUrlBase=bootstrap.restUrl+"report/";this.reportHashBase="reports/"},postCreate:function(){this.inherited(arguments);var d=this;d.reportSidebar=new h({report:d.report,reload:function(){d.reloadReport()}});d.reportSidebar.placeAt(d.sidebarAttach);d.reportFormTable=new e({report:d.report});d.reportFormTable.placeAt(d.tableContainer)},destroy:function(){this.reportLists&&
this.reportLists.destroy();this.reportSidebar&&this.reportSidebar.destroy();if(this.resultWidget)this.resultWidget.destroy(),this.resultWidget=null;this.inherited(arguments)},refresh:function(){this.reportLists.refresh()},reloadReport:function(){j.empty(this.tableContainer);this.reportFormTable=new e({report:this.report});this.reportFormTable.placeAt(this.tableContainer)}})})},"deploy/widgets/application/ApplicationEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/application/EditApplication,deploy/widgets/application/ApplicationEnvironmentConditions,deploy/widgets/property/PropValues".split(","),
function(l,m,k,j,e,h,d,c,b){return m([h],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(){var a=this;a.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){a.addHeading(i18n("Basic Settings"));a.showBasicSettings()}});a.addEntry({id:"properties",label:i18n("Application Properties"),action:function(){a.addHeading(i18n("Application Properties"));a.showProperties()}});a.addEntry({id:"gates",label:i18n("Environment Gates"),action:function(){a.addHeading(i18n("Environment Gates"));
a.showGates()}})},addHeading:function(a){e.create("div",{innerHTML:a,"class":"containerLabel"},this.detailAttach)},addDescription:function(a){e.create("div",{innerHTML:a,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,application:appState.application,readOnly:!appState.application.security["Edit Basic Settings"]})).placeAt(this.detailAttach)},showProperties:function(){(new b({propSheet:appState.application.propSheet,readOnly:!appState.application.security["Manage Properties"]})).placeAt(this.detailAttach)},
showGates:function(){(new c({application:appState.application,applicationTemplate:appState.application.template})).placeAt(this.detailAttach)}})})},"deploy/widgets/application/ApplicationComponents":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,dojo/Deferred,dojo/dom-construct,dojo/dom-geometry,dojo/json,dojo/on,deploy/widgets/component/RunComponentProcess,deploy/widgets/component/ComponentImportFailureIcon,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return k("deploy.widgets.application.ApplicationComponents",[m,l],{templateString:'<div class="applicationComponents"><div data-dojo-attach-point="statAttach" class="statAttach">  <div class="tile tile-border">    <div class="stat-tile-number" data-dojo-attach-point="failedStatAttach"></div>    <div class="stat-tile-label">'+i18n("Failed Version Import")+'</div>  </div>  <div class="tile tile-border">    <div class="stat-tile-number" data-dojo-attach-point="importingStatAttach"></div>    <div class="stat-tile-label">'+
i18n("Importing Version")+'</div>  </div>  <div class="tile tile-border">    <div class="stat-tile-number" data-dojo-attach-point="noVersionStatAttach"></div>    <div class="stat-tile-label">'+i18n("No Version")+'</div>  </div>  <div class="tile">    <div class="stat-tile-number" data-dojo-attach-point="successStatAttach"></div>    <div class="stat-tile-label">'+i18n("Successful")+'</div>  </div></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){var a=this;this.inherited(arguments);
var b=bootstrap.restUrl+"deploy/component/details",c=[];c.push(this.getNameColumn());c.push({name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this});c.push({name:i18n("Last Import"),field:"status",formatter:function(a){return"SUCCESS"===a.status?i18n("Successful"):"FAILURE"===a.status?i18n("Failed Import"):i18n("No Import Data Available")}});c.push({name:i18n("Last Version"),field:"versionName",formatter:function(a){return!a.objectType&&(!a.versionName||"null"===a.versionName)?i18n("NO VERSION"):
a.versionName}});c.push({name:i18n("Description"),field:"description"});this.grid=new o({serverSideProcessing:!0,url:b,tableConfigKey:"applicationComponentsList",noDataMessage:i18n("No components have been added to this application."),columns:c,hidePagination:!1,hideExpandCollapse:!0,orderField:"name",sortType:"asc",baseFilters:[{name:"applications.id",type:"eq",className:"UUID",values:[appState.application.id]}],processXhrResponse:function(){a.showStats()}});this.grid.placeAt(this.gridAttach);this.showStats()},
getNameColumn:function(){return{name:i18n("Name"),orderField:"name",formatter:function(a,b,c){c.style.position="relative";b=h.create("div",{"class":"inlineBlock",style:"margin-"+(d.isBodyLtr()?"right":"left")+":78px;"});c=h.create("div",{"class":"inlineBlock"});h.place(c,b);if(a.integrationFailed){var e=new f({label:i18n("A version import failed. Check the component's configuration for more details or use the Actions menu to dismiss this error.")});h.place(e.domNode,c)}var e=n.componentLinkFormatter(a),
j=h.create("div",{"class":"inlineBlock"});j.appendChild(e);h.place(j,c);a.importing&&h.create("div",{"class":"inline-block component-importing-text",innerHTML:"Importing..."},b);return b}}},actionsFormatter:function(a){var c=this.parentWidget,d=document.createElement("span");if(appState.application.extendedSecurity[security.application.runComponentProcesses]){var e=h.create("a",{innerHTML:i18n("Run Process"),"class":"actionsLink linkPointer"},d);b(e,"click",function(){c.showComponentDeploymentDialog(a)})}appState.application.security["Manage Components"]&&
(e=h.create("a",{innerHTML:i18n("Remove"),"class":"actionsLink linkPointer"},d),b(e,"click",function(){c.confirmRemoval(a)}));return d},confirmRemoval:function(a){var b=this,d={components:[]};d.components.push(a.id);new q({message:i18n("Are you sure you want to remove component '%s' from this application?",a.name.escape()),action:function(){j.put({url:bootstrap.restUrl+"deploy/application/"+appState.application.id+"/removeComponents",putData:c.stringify(d),load:function(){b.grid.refresh()},error:function(a){new r({message:a.responseText})}})}})},
showComponentDeploymentDialog:function(b){var c=new t({closable:!0,draggable:!0});(new a({application:appState.application,component:b,callback:function(){c.hide();c.destroy()}})).placeAt(c.containerNode);c.show()},showStats:function(){var a=this;this.getStats().then(function(b){a.successStatAttach.textContent=b.SUCCESS;a.importingStatAttach.textContent=b.IMPORTING;a.noVersionStatAttach.textContent=b["NO VERSION"];a.failedStatAttach.textContent=b.FAILURE})},getStats:function(){var a=bootstrap.restUrl+
"deploy/component/stats"+this.buildQueryString(),b=new e;j.get({url:a,handleAs:"json",load:function(a){b.resolve(a)},error:function(a){b.reject(a)}});return b},buildQueryString:function(){var a;a="?filterFields=applications.id&filterValue_applications.id="+appState.application.id;return a+"&filterType_applications.id=eq&filterClass_applications.id=UUID"}})})},"deploy/widgets/application/ApplicationList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/Button,dijit/form/CheckBox,dijit/form/TextBox,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/application/EditApplication,deploy/widgets/application/wizard/ApplicationWizard,deploy/widgets/application/wizard/WizardProgressVisualization,deploy/widgets/tag/Tagger,deploy/widgets/filter/TagFilter,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,deploy/widgets/wizard/WizardDialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/util/blocker/BlockingContainer,dojo/store/Memory,js/webext/widgets/table/TreeTable,dojo/data/ObjectStore,deploy/widgets/tag/TagDisplay,dojo/io/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x,y,C,B,A,z,E,D,G,K,N){return d("deploy.widgets.application.ApplicationList",[m,l],{templateString:'<div class="applicationList"><div data-dojo-attach-point="buttonAttach" style="position:relative; z-index=1;"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',_BASIC_VIEW:"deploy/application",_ALL_VIEW:"deploy/application/all",_TAG_VIEW:"deploy/application/all/sort?sort=tag",
_TEAM_VIEW:"deploy/application/all/sort?sort=team",postCreate:function(){this.inherited(arguments);var a=this;this.currentView=a._BASIC_VIEW;a.selectStore=n.create("div");a.viewSelect=new k({options:[{label:i18n("Flat list"),value:a._BASIC_VIEW,selected:!0},{label:i18n("By Tag"),value:a._TAG_VIEW},{label:i18n("By Team"),value:a._TEAM_VIEW}],sortByLabel:!1,style:{display:"inline-block"}});a.viewSelect.on("change",function(){if(a.currentView!==this.value){a.currentView=this.value;a.viewSelect.placeAt(a.selectStore);
n.empty(a.activeBoxAttach);a.grid.destroy();var b=a.currentView!==a._BASIC_VIEW;a.makeTable(a.currentView,a.getColumns(),b)}});this.makeTable(a.currentView,a.getColumns())},makeTable:function(c,d,f){var h=this,j=c===h._BASIC_VIEW;this.grid=new D({url:bootstrap.restUrl+c,serverSideProcessing:c===h._BASIC_VIEW,noDataMessage:i18n("No applications found."),tableConfigKey:"applicationList",orderField:"name",selectorField:"id",hidePagination:!1,hideExpandCollapse:j,selectable:function(a){return!a.isRoot},
columns:d,isSelectable:function(a){return!a.isRoot},hasChildren:function(a){return!!a.isRoot},getChildUrl:function(a){return bootstrap.restUrl+"deploy/application/all/"+a.type+"/"+a.id},queryData:{outputType:["BASIC","SECURITY","LINKED"]}});this.grid.placeAt(this.gridAttach);this.buttonAttach=this.grid.buttonAttach;this.addTopButtons();var k=[];b.forEach(this.getBulkReadOptions(),function(a){k.push(a)});b.forEach(this.getBulkWriteOptions(),function(a){k.push(a)});if(k&&0<k.length){var l=new A({options:k,
label:i18n("Actions...")});l.placeAt(this.buttonAttach);c=function(){var a=h.grid.getSelectedItems().length;0===a?(l.set("label",i18n("Actions...")),l.set("disabled",!0)):(l.set("label",i18n("Actions... (%s)",a)),l.set("disabled",!1))};h.grid.on("selectItem",c);h.grid.on("deselectItem",c);h.grid.on("displayTable",c)}if(config.data.systemConfiguration.enableInactiveLinks&&!f)(new e({checked:!1,value:"true",onChange:function(a){h.grid.url=a?bootstrap.restUrl+h._ALL_VIEW:bootstrap.restUrl+h._BASIC_VIEW;
h.grid.refresh()}})).placeAt(this.activeBoxAttach),f=document.createElement("div"),a.add(f,"inlineBlock"),f.style.position="relative",f.style.top="2px",f.style.left="2px",f.innerHTML=i18n("Show Inactive Applications"),this.activeBoxAttach.appendChild(f);h.viewSelect.placeAt(h.buttonAttach)},getColumns:function(){var a=[];a.push(this.getNameColumn());b.forEach(this.getOtherColumns(),function(b){a.push(b)});return a},getNameColumn:function(){var a=this;return{name:i18n("Name"),formatter:function(b,
c,d){d.style.position="relative";c=n.create("div",{"class":"inlineBlock",style:"margin-"+(f.isBodyLtr()?"right":"left")+":78px;"});d=n.create("div",{"class":"inlineBlock"});n.place(d,c);if(b.isRoot)if(b.color)d=[],d.push(b),(new K({readOnly:!0,tags:d})).placeAt(c);else return b.name;else{var e=t.applicationLinkFormatter(b);n.place(e,d);a.tagger=new u({objectType:"Application",item:b,callback:function(){a.grid.refresh()}});a.tagger.placeAt(c);n.place(a.actionsFormatter(b),c)}return c},orderField:"name",
filterField:"name",filterType:"custom",getRawValue:function(a){return a.name},getFilterFields:function(){var b=[];b.push(new h({name:"name","class":"filter",style:{width:"45%"},placeHolder:i18n("Name"),type:"like"}));"basic"===a.currentView&&b.push(new w({name:"tags","class":"filter",style:{width:"45%"},placeHolder:i18n("Tags"),type:"eq"}));return b}}},getOtherColumns:function(){return[{name:i18n("Template"),field:"template",formatter:function(a){var b="";if(a.template)b=a.template.name;return b}},
{name:i18n("Description"),field:"description",orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,orderField:"dateCreated",getRawValue:function(a){return new Date(a.created)}},{name:i18n("By"),field:"user",orderField:"user.name",filterField:"user.name",filterType:"text",getRawValue:function(a){return a.user}}]},addTopButtons:function(){var b=this,c=config.data.permissions[security.system.createApplications],
d=config.data.permissions[security.system.createApplicationsFromTemplate];if(c||d)d={label:i18n("Create Application"),showTitle:!1,onClick:function(){b.showNewApplicationDialog()}},d=(new j(d)).placeAt(this.buttonAttach),a.add(d.domNode,"idxButtonSpecial");c&&(c={label:i18n("Import Applications"),showTitle:!1,onClick:function(){b.showImportApplicationDialog()}},(new j(c)).placeAt(this.buttonAttach))},getBulkWriteOptions:function(){var a=this;return[{label:i18n("Add Tag"),onClick:function(){var b=
a._getSelected();a.tagger.showAddTagDialog(b)}},{label:i18n("Remove Tag"),onClick:function(){var b=a._getSelected();a.tagger.showRemoveTagDialog(b)}},{label:i18n("Delete"),onClick:function(){var b=a._getSelected();a.confirmDeletes(b)}}]},getBulkReadOptions:function(){var a=this;return[{label:i18n("Export"),onClick:function(){b.some(a.grid.getSelectedItems(),function(a){return!!a.templateId});var c=a._getSelected();a.multipleExports(c)}}]},_getSelected:function(){return b.map(this.grid.getSelectedItems(),
function(a){return a.id})},addEditActions:function(a,b){var c=this;(new j({showTitle:!1,iconClass:"editIcon",title:i18n("Edit"),onClick:function(){c.editApplication(a)}})).placeAt(b)},getRowWriteActions:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]},getRowReadActions:function(a){var b=this;return[{label:i18n("Export"),onClick:function(){util.downloadFile(bootstrap.restUrl+"deploy/application/"+a.id+"/export")}},{label:i18n("Export With Snapshots"),onClick:function(){b.exportWithSnapshots(a)}}]},
actionsFormatter:function(a){var c=n.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[];a.security.read&&b.forEach(this.getRowReadActions(a),function(a){d.push(a)});a.security["Edit Basic Settings"]&&(this.addEditActions(a,c),b.forEach(this.getRowWriteActions(a),function(a){d.push(a)}));d.length&&(new A({options:d,label:i18n("Actions...")})).placeAt(c);return c},multipleExports:function(a){a.length&&(a="?ids="+a.join(),util.downloadFile(bootstrap.restUrl+
"deploy/application/export"+a))},confirmDeletes:function(a,b){var d=this;a.length?new B({message:i18n("Are you sure you want to delete %s applications?",a.length),action:function(){c.del({url:bootstrap.restUrl+"deploy/application/delete",headers:{"Content-Type":"application/json"},putData:JSON.stringify({applicationIds:a}),load:function(){b&&b();d.grid.refresh()},error:function(a){(new v({title:i18n("Error deleting application"),message:a.responseText})).startup();d.grid.unblock()}})}}):(new v({message:i18n("Please select at least one application to delete")})).startup()},
editApplication:function(a){var b=this;c.get({url:bootstrap.restUrl+"deploy/application/"+a.id,handleAs:"json",load:function(a){var c=new y({title:i18n("Edit Application"),closable:!0,draggable:!0});(new q({application:a,readOnly:!a.security["Edit Basic Settings"],noRedirect:!0,callback:function(){c.hide();c.destroy();b.grid.refresh()}})).placeAt(c);c.show()},error:function(){}})},confirmDelete:function(a){var b=this;new B({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",
a.name),action:function(){b.grid.block();c.del({url:bootstrap.restUrl+"deploy/application/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new v({title:i18n("Error deleting application"),message:a.responseText})).startup();b.grid.unblock()}})}})},exportWithSnapshots:function(a){var b=new z,c=new y({title:i18n("Select Snapshots"),closable:!0,draggable:!0});b.placeAt(c.containerNode);var d=new x({onSubmit:function(c){b.block();var d=bootstrap.restUrl+"deploy/application/"+
a.id+"/exportWithArtifacts";c.snapshotIds&&(d+="?snapshotIds="+c.snapshotIds);util.downloadFile(d);this.callback()},postSubmit:function(){void 0!==this.callback&&this.callback()},onCancel:function(){void 0!==this.callback&&this.callback()},callback:function(){b.unblock();c.hide();c.destroy()}}),e=n.create("p",{innerHTML:i18n("Select snapshots to export with the application.%sOnce submitted, the download may take a few moments to begin.","<br/>"),style:{"margin-left":"10px"}});n.place(e,b.containerNode);
d.addField({name:"snapshotIds",label:i18n("Include Snapshots"),required:!0,type:"TableFilterMultiSelect",url:bootstrap.restUrl+"deploy/application/"+a.id+"/snapshots/false"});d.placeAt(b);c.show()},destroy:function(){this.inherited(arguments);this.grid.destroy()},showImportApplicationDialog:function(){var a=this,b=new z,c=new y({title:i18n("Import Applications"),closable:!0,draggable:!0});b.placeAt(c.containerNode);a.importIsUpgrade=!1;a.includesArtifacts=!1;a.appTemplateUpgradeType="USE_EXISTING_IF_EXISTS";
a.importComponentUpgradeType="USE_EXISTING_IF_EXISTS";a.processUpgradeType="USE_EXISTING_IF_EXISTS";a.resourceTemplateUpgradeType="USE_EXISTING_IF_EXISTS";var d=n.create("form",{target:"formTarget",method:"Post",enctype:"multipart/form-data",encoding:"multipart/form-data"});dojo.addClass(d,"importForm");var f=n.create("div",{className:"filInputContainer"}),h=n.create("input",{type:"file",name:"file",className:"fileInput"});n.place(h,f);var l=n.create("div",{className:"labelsAndValues-row"}),m=n.create("div",
{className:"labelsAndValues-valueCell inlineBlock"}),o=n.create("label",{"for":"upgradeApplication",className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Upgrade Application")});(new e({name:"upgradeApplication",checked:!1,onChange:function(){a.importIsUpgrade=this.get("checked");a.setFormAction(d)}})).placeAt(m);l.appendChild(m);l.appendChild(o);var m=n.create("div",{className:"labelsAndValues-row"}),o=n.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),q=n.create("label",
{"for":"includesArtifacts",className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Import with Snapshots")});(new e({name:"includesArtifacts",checked:!1,onChange:function(){a.includesArtifacts=this.get("checked");a.setFormAction(d)}})).placeAt(o);m.appendChild(o);m.appendChild(q);var o=n.create("div",{className:"labelsAndValues-row"}),q=n.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),s=n.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Application Template Upgrade Type")});
(new k({name:"templateUpgradeTypeInput",options:[{label:i18n("Use Existing Template"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Template"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Template Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Template Does Not Exist"),value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Template If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.appTemplateUpgradeType=this.get("value");a.setFormAction(d)}})).placeAt(q);o.appendChild(s);
o.appendChild(q);var q=n.create("div",{className:"labelsAndValues-row"}),s=n.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),r=n.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Component Upgrade Type")});(new k({name:"componentUpgradeTypeInput",options:[{label:i18n("Use Existing Component"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Component"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Component Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Component Does Not Exist"),
value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Component If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.importComponentUpgradeType=this.get("value");a.setFormAction(d)}})).placeAt(s);q.appendChild(r);q.appendChild(s);var s=n.create("div",{className:"labelsAndValues-row"}),r=n.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),t=n.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Generic Process Upgrade Type")});(new k({name:"processUpgradeTypeInput",
options:[{label:i18n("Use Existing Process"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Process"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Process Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Process Does Not Exist"),value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Process If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.processUpgradeType=this.get("value");a.setFormAction(d)}})).placeAt(r);s.appendChild(t);s.appendChild(r);var r=n.create("div",{className:"labelsAndValues-row"}),
t=n.create("div",{className:"labelsAndValues-valueCell inlineBlock"}),u=n.create("div",{className:"labelsAndValues-labelCell inlineBlock",innerHTML:i18n("Resource Template Upgrade Type")});(new k({name:"resourceTemplateUpgradeTypeInput",options:[{label:i18n("Use Existing Resource Template"),value:"USE_EXISTING_IF_EXISTS"},{label:i18n("Create Resource Template"),value:"CREATE_NEW_IF_EXISTS"},{label:i18n("Fail If Resource Template Exists"),value:"FAIL_IF_EXISTS"},{label:i18n("Fail If Resource Template Does Not Exist"),
value:"FAIL_IF_DOESNT_EXIST"},{label:i18n("Upgrade Resource Template If Exists"),value:"UPGRADE_IF_EXISTS"}],onChange:function(){a.resourceTemplateUpgradeType=this.get("value");a.setFormAction(d)}})).placeAt(t);r.appendChild(u);r.appendChild(t);t=n.create("div");(new j({label:i18n("Submit"),type:"submit"})).placeAt(t);d.appendChild(m);d.appendChild(l);d.appendChild(o);d.appendChild(q);d.appendChild(s);d.appendChild(r);d.appendChild(f);d.appendChild(t);b.containerNode.appendChild(d);d.onsubmit=function(){var e=
!0;h.value?(b.block(),a.setFormAction(d),N.send({form:d,handleAs:"json",load:function(d){b.unblock();"ok"===d.status?(c.hide(),c.destroy(),a.grid.refresh()):(new v({message:i18n("Error importing application: %s",util.escape(d.error||""))})).startup()},error:function(a){b.unblock();(new v({message:i18n("Error importing application: %s",util.escape(a.error||""))})).startup()}})):(new v({message:i18n("Please choose a template json file to import.")}),e=!1);return e};c.show()},setFormAction:function(a){var b=
util.getCookie(bootstrap.expectedSessionCookieName);a.action=bootstrap.restUrl+"deploy/application/"+(!0===this.importIsUpgrade?"upgrade":"import")+(!0===this.includesArtifacts?"WithArtifacts":"")+"?upgradeType="+this.importComponentUpgradeType+"&compTempUpgradeType="+this.importComponentUpgradeType+"&processUpgradeType="+this.processUpgradeType+"&resourceTemplateUpgradeType="+this.resourceTemplateUpgradeType+"&appTempUpgradeType="+this.appTemplateUpgradeType+"&"+bootstrap.expectedSessionCookieName+
"="+b},showNewApplicationDialog:function(){var a=this,b=new o({}),c=new C({title:i18n("Create Application"),closable:!0,draggable:!0,progressVisualization:s,wizard:b});b.cleanup=function(){c.hide();c.destroy();a.grid.refresh()};c.connect(c,"hide",function(){b.destroy();c.destroy()});b.startup();c.show()}})})},"deploy/widgets/application/ApplicationSnapshots":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/snapshot/EditSnapshot,deploy/widgets/Formatters,js/util/blocker/BlockingContainer,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,dojo/io/iframe".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u){return e("deploy.widgets.application.ApplicationSnapshots",[m,l],{templateString:'<div class="snapshots"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/application/"+appState.application.id+"/snapshots/false",c=[{name:i18n("Snapshot"),
formatter:f.snapshotLinkFormatter,orderField:"name",filterField:"name",filterType:"text"},{name:i18n("Description"),field:"description"},{name:i18n("Created"),field:"created",formatter:util.tableDateFormatter,orderField:"dateCreated"},{name:i18n("By"),field:"user",orderField:"user",getRawValue:function(a){return a.user}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new s({url:b,columns:c,orderField:"dateCreated",sortType:"desc",hideExpandCollapse:!0,hidePagination:!1,
tableConfigKey:"snapshots"+appState.application.id,noDataMessage:i18n("No application snapshots found."),queryData:{outputType:["BASIC"]}});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks)(new j({checked:!1,value:"true",onChange:function(b){a.grid.url=bootstrap.restUrl+"deploy/application/"+appState.application.id+"/snapshots/"+b;a.grid.refresh()}})).placeAt(this.activeBoxAttach),b=document.createElement("div"),d.add(b,"inlineBlock"),b.style.position="relative",
b.style.top="2px",b.style.left="2px",b.innerHTML=i18n("Show Inactive Snapshots"),this.activeBoxAttach.appendChild(b);appState.application.extendedSecurity[security.application.manageSnapshots]&&(b=new k({label:i18n("Create Snapshot"),showTitle:!1,onClick:function(){a.showCreateSnapshotDialog()}}),d.add(b.domNode,"idxButtonSpecial"),c=new k({label:i18n("Import Snapshots"),showTitle:!1,onClick:function(){a.showImportDialog()}}),b.placeAt(this.buttonAttach),c.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);
this.grid.destroy()},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div"),f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Export")},e);b(f,"click",function(){util.downloadFile(bootstrap.restUrl+"deploy/application/"+appState.application.id+"/exportWithArtifacts?snapshotIds="+a.id)});f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Compare")},e);b(f,"click",function(){d.showCompareDialog(a)});if(appState.application.extendedSecurity[security.application.manageSnapshots])f=
document.createElement("a"),f.className="actionsLink",f.innerHTML=i18n("Edit"),f.href="#snapshot/"+a.id+"/configuration",e.appendChild(f);appState.application.extendedSecurity[security.application.deleteSnapshots]&&(f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e),b(f,"click",function(){d.confirmDelete(a)}));return e},confirmDelete:function(a){var b=this;new o({message:i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",a.name.escape()),
action:function(){b.grid.block();h.del({url:bootstrap.restUrl+"deploy/snapshot/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new r({title:i18n("Error deleting snapshot"),message:a.responseText})).startup();b.grid.unblock()}})}})},showCompareDialog:function(a){var b=new q({title:i18n("Compare Snapshots"),closable:!0,draggable:!0}),c=new t({onSubmit:function(c){b.hide();b.destroy();navBar.setHash("snapshotComparison/"+a.id+"/"+c.snapshotId)},onCancel:function(){b.hide();
b.destroy()}});c.addField({name:"_sourceSnapshotLabel",label:i18n("Snapshot"),type:"Label",style:{marginTop:"3px"},value:a.name});c.addField({name:"snapshotId",label:i18n("With Snapshot"),required:!0,url:bootstrap.restUrl+"deploy/snapshot/"+a.id+"/exclude",type:"TableFilterSelect",autoSelectFirst:!0});c.placeAt(b.containerNode);b.show()},showCreateSnapshotDialog:function(b){var c=i18n("Create Snapshot "),d=new q({title:c,closable:!0,draggable:!0});(new a({application:appState.application,snapshot:b,
callback:function(){d.hide();d.destroy()},onCancel:function(){d.hide();d.destroy()}})).placeAt(d.containerNode);d.show()},showImportDialog:function(){var a=this,b=new n,d=new q({title:i18n("Import Snapshots"),closable:!0,draggable:!0});b.placeAt(d.containerNode);var e=util.getCookie(bootstrap.expectedSessionCookieName),f=c.create("form",{target:"formTarget",method:"Post",enctype:"multipart/form-data",encoding:"multipart/form-data",action:bootstrap.restUrl+"deploy/snapshot/importWithArtifacts/"+appState.application.id+
"?"+bootstrap.expectedSessionCookieName+"="+e}),e=c.create("div",{className:"filInputContainer"}),h=c.create("input",{type:"file",name:"file",className:"fileInput"});c.place(h,e);var j=c.create("div",{style:"display:block; margin-top:10px;"});(new k({label:i18n("Submit"),type:"submit"})).placeAt(j);f.appendChild(e);f.appendChild(j);b.containerNode.appendChild(f);f.onsubmit=function(){var c=!0;h.value?(b.block(),u.send({form:f,handleAs:"json",load:function(c){b.unblock();"ok"===c.status?(d.hide(),
d.destroy(),a.grid.refresh()):(new r({message:i18n("Error importing application: %s",util.escape(c.error||""))})).startup()},error:function(a){b.unblock();(new r({message:i18n("Error importing application: %s",util.escape(a.error||""))})).startup()}})):(new r({message:i18n("Please choose a snapshot archive file to import.")}),c=!1);return c};d.show()}})})},"deploy/widgets/application/ApplicationRequestHistory":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d){return k("deploy.widgets.application.ApplicationRequestHistory",[m,l],{templateString:'<div class="applicationRequestHistory"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var c=[{name:i18n("Process"),formatter:function(b){b.applicationProcess.application=b.application;return h.applicationProcessLinkFormatter(b.applicationProcess)}},{name:i18n("Environment"),formatter:function(b){return h.environmentLinkFormatter(b.environment)}},
{name:i18n("Snapshot"),formatter:function(b){return h.snapshotLinkFormatter(b.snapshot)}},{name:i18n("Scheduled For"),field:"calendarEntry.scheduledDate",formatter:function(b){return util.dateFormatShort(b.entry.scheduledDate)},orderField:"calendarEntry.scheduledDate"},{name:i18n("By"),field:"userName"},{name:i18n("Status"),formatter:function(b,a,c){return h.requestStatusFormatter(b,a,c)}},{name:i18n("Actions"),formatter:function(b){var a=document.createElement("div"),c=b.environment.security;if(!c||
c.read)c=document.createElement("a"),c.className="actionsLink",c.innerHTML=i18n("View Request"),c.href="#applicationProcessRequest/"+b.id,a.appendChild(c);return a}}];this.grid=new d({url:bootstrap.restUrl+"deploy/applicationProcessRequest/table",baseFilters:[{name:"application.id",type:"eq",className:"UUID",values:[appState.application.id]}],columns:c,orderField:"calendarEntry.scheduledDate",sortType:"desc",tableConfigKey:"applicationProcessHistory"+appState.application.id,noDataMessage:i18n("No process history found for this application."),
hideExpandCollapse:!0,hidePagination:!1,queryData:{outputType:["BASIC","LINKED"]}});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/application/SingleComponentSelector":function(){define(["dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm","js/webext/widgets/Dialog"],function(l,m,k,j){return m("deploy.widgets.application.SingleComponentSelector",[l],{postCreate:function(){this.inherited(arguments);var e=this;
this.dialog=new j({title:i18n("Add a Component"),closable:!0,draggable:!0,"class":"addAppComponentsDialog"});this.form=new k({submitUrl:bootstrap.restUrl+"deploy/application/"+appState.application.id+"/addComponents",addData:function(e){e.components=e.component;delete e.component},postSubmit:function(){e.dialog.hide();void 0!==e.callback&&e.callback()},onCancel:function(){e.dialog.hide()}});this.form.addField({name:"component",type:"TableFilterMultiSelect",url:bootstrap.restUrl+"deploy/application/"+
appState.application.id+"/unusedComponents",label:i18n("Select a Component"),description:i18n("Start typing to filter results. Use * as a wildcard."),required:!0});this.form.placeAt(this.dialog.containerNode);this.dialog.show()},destroy:function(){this.inherited(arguments)}})})},"deploy/widgets/security/KeyManager":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,dojox/html/entities,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return e("deploy.widgets.agentPool.AgentPoolList",[m,l],{templateString:'<div class="agentPoolList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="tableAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var a=bootstrap.restUrl+"apikey/",b=[{name:i18n("API Key"),field:"apiKey",orderField:"apiKey",filterField:"apiKey",
filterType:"text",formatter:this.nameWithActionsFormatter,parentWidget:this},{name:i18n("User"),field:"user.name",filterField:"user.name",orderField:"user.name",filterType:"text"},{name:i18n("Date Created"),formatter:util.tableDateFormatter,field:"dateCreated",orderField:"dateCreated"},{name:i18n("Expiration "),formatter:function(a,b,c){return 1>b?i18n("NEVER"):util.tableDateFormatter(a,b,c)},field:"expiration",orderField:"expiration"}];this.grid=new s({url:a,orderField:"apiKey",sortType:"asc",noDataMessage:i18n("No API Keys have been added yet."),
tableConfigKey:"apiKeyTableConfig",columns:b,serverSideProcessing:!0,hidePagination:!1,hideExpandCollapse:!0,queryData:{outputType:["BASIC"]}});this.grid.placeAt(this.tableAttach)},nameWithActionsFormatter:function(a,d,e){var f=this.parentWidget;e.style.position="relative";var e=b.create("div",{"class":"inlineBlock",style:"margin-"+(c.isBodyLtr()?"right":"left")+":78px;"}),h=b.create("div",{"class":"inlineBlock"});b.place(h,e);var j=b.create("div",{"class":"inlineBlock"});j.innerHTML=d.escape();b.place(j,
h);b.place(f.actionsFormatter(a),e);return e},actionsFormatter:function(a){var c=b.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[];d.push(this.getRevokeAction(a));d.length&&(new q({options:d,label:i18n("Actions...")})).placeAt(c);return c},getRevokeAction:function(a){var b=this;return{label:i18n("Revoke"),onClick:function(){b.confirmRevoke(a)}}},confirmRevoke:function(a){var b=this;new t({message:i18n("Are you sure you want to revoke %s? This will permanently remove it from the system.",
a.apiKey.escape()),action:function(){b.grid.block();h.del({url:bootstrap.restUrl+"apikey/"+a.apiKey,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){(new n({messages:[i18n("Error revoking Keys"),"",util.escape(a.responseText)]})).startup();b.grid.unblock()}})}})}})})},"deploy/widgets/security/resourceRole/EditResourceRole":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h){return j([m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=this;this.existingValues={};if(this.resourceRole)this.existingValues=this.resourceRole;this.form=new h({submitUrl:bootstrap.baseUrl+"security/resourceRole"+(this.resourceRole?"/"+this.resourceRole.id:""),submitMethod:this.resourceRole?"PUT":"POST",cancelLabel:null,addData:function(c){c.resourceType=d.resourceType.id},
postSubmit:function(c){void 0!==d.callback&&d.callback(!0,c.id)},onCancel:function(){void 0!==d.callback&&d.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text",value:this.existingValues.description});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/security/resourceRole/ResourceRoleList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/aspect,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/resourceRole/EditResourceRole,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return j("deploy.widgets.security.resourceRole.ResourceRoleList",[m,l],{templateString:'<div class="resourceRoleList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/resourceType/"+a.resourceType.name+"/resourceRoles",c=[{name:i18n("Type"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},
{name:i18n("Description"),field:"description",orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}],e=a.resourceType.name;a._hasSplicedIn=!1;a.grid=new t({url:b,processXhrResponse:function(b){if(!a._hasSplicedIn)b.splice(0,0,{name:i18n("Standard "+e),isStandard:!0}),a._hasSplicedIn=!0},serverSideProcessing:!1,columns:c,orderField:"name",tableConfigKey:"resourceRoleList",
hideExpandCollapse:!0,hidePagination:!1});a.grid.placeAt(a.gridAttach);h.before(a.grid,"refresh",function(){a._hasSplicedIn=!1});b=new k({label:i18n("Create Type"),showTitle:!1,onClick:function(){a.showEditResourceRoleDialog()}});d.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div");if(!a.isStandard){var f=c.create("a",{innerHTML:i18n("Edit"),
"class":"actionsLink linkPointer"},e);b(f,"click",function(){d.showEditResourceRoleDialog(a)});f=c.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},e);b(f,"click",function(){d.confirmDeletion(a)})}return e},confirmDeletion:function(a){var b=this;new r({message:i18n("Are you sure you want to delete type '%s'?",a.name.escape()),action:function(){e.del({url:bootstrap.baseUrl+"security/resourceRole/"+a.id,load:function(){b.grid.refresh()},error:function(a){new f({message:util.escape(a.responseText)})}})}})},
showEditResourceRoleDialog:function(b){var c=this,d=new n({title:i18n("Create Type"),closable:!0,draggable:!0});(new a({resourceRole:b,resourceType:c.resourceType,callback:function(a){d.hide();d.destroy();a&&c.grid.refresh()}})).placeAt(d.containerNode);d.show()}})})},"deploy/widgets/security/resourceRole/ResourceRoleManager":function(){define("dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-construct,dojo/on,deploy/widgets/security/resourceRole/ResourceRoleList,js/webext/widgets/GenericConfirm,js/webext/widgets/PopDown,js/webext/widgets/TwoPaneListManager,deploy/widgets/TooltipTitle".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l("deploy.widgets.security.resourceRole.ResourceRoleManager",[b],{postCreate:function(){this.inherited(arguments);var a=this;m.get({url:bootstrap.baseUrl+"security/resourceType",handleAs:"json",load:function(b){b=k.filter(b,function(a){return"Server Configuration"!==a.name&&"Web UI"!==a.name});k.forEach(b,function(b){a.addEntry({id:b.id,label:i18n(b.name),action:function(){a.showResourceRoles(b)}})})}})},showResourceRoles:function(b){(new a({titleText:i18n("%s Types",
i18n(b.name)),tooltipText:i18n("The Standard %s type is provided by default. Configuring multiple %s types allows a role to have different security permissions for different %ss.",i18n(b.name),i18n(b.name.toLowerCase()),i18n(b.name.toLowerCase()))})).placeAt(this.detailAttach);b=new h({resourceType:b});b.placeAt(this.detailAttach);this.registerDetailWidget(b)}})})},"deploy/widgets/security/authentication/AuthTokens":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/authentication/EditAuthToken,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.security.authentication.AuthTokens",[m,l],{templateString:'<div class="AuthTokens"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/authtoken/table",c=[{name:i18n("Description"),field:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}},
{name:i18n("User"),field:"userName",filterField:"user.name",filterType:"text",getRawValue:function(a){return a.userName}},{name:i18n("Creation Date"),field:"createdDate",filterField:"dateCreated",filterType:"date",filterClass:"Long",getRawValue:function(a){return a.createdDate},orderField:"dateCreated",formatter:a.tableDateFormatter},{name:i18n("Expiration Date"),field:"expiration",filterField:"expiration",filterType:"date",filterClass:"Long",getRawValue:function(a){return new Date(a.expiration)},
orderField:"expiration",formatter:a.tableDateFormatter},{name:i18n("Allowed IPs"),formatter:function(a){a=a.host||"0.0.0.0/0";-1===a.indexOf("/")&&(a+="/32");return a}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!0,hidePagination:!1,tableConfigKey:"authTokenList",noDataMessage:i18n("No authentication tokens found."),columns:c,orderField:"expiration"});this.grid.placeAt(this.gridAttach);b={label:i18n("Create Token"),showTitle:!1,
onClick:function(){a.showNewTokenDialog()}};b=new k(b);h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonTopAttach)},tableDateFormatter:function(a,b){var c=util.tableDateFormatter(a,b);if(null===c||void 0===c)c=i18n("Never");return c},destroy:function(){this.inherited(arguments);this.grid.destroy()},showNewTokenDialog:function(){var a=this,c=new f({title:i18n("Create Token"),closable:!0,draggable:!0});(new b({callback:function(b){c.hide();c.destroy();var e=new f({title:i18n("Newly Created Token"),
closable:!0,draggable:!0}),h=document.createElement("div");h.className="underField";var j=new k({label:i18n("Close"),onClick:function(){e.hide();e.destroy()}});d.create("div",{innerHTML:i18n("You will not be able to see this again."),"class":"authTokenCreateMessage"},e.containerNode);d.create("div",{innerHTML:i18n("Token: %s",b.token)},e.containerNode);j.placeAt(h);e.containerNode.appendChild(h);e.show();a.grid.refresh()}})).placeAt(c.containerNode);c.show()},actionsFormatter:function(a){var b=this.parentWidget,
e=document.createElement("div"),f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);c(f,"click",function(){b.confirmDelete(a)});return e},confirmDelete:function(b){var c=this;new n({message:i18n("Are you sure you want to delete this authorization token? This will permanently delete it from the system."),action:function(){c.grid.block();e.del({url:bootstrap.baseUrl+"security/authtoken/"+b.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh()},error:function(b){new a({messages:[i18n("Error deleting authorization token:"),
"",util.escape(b.responseText)]});c.grid.unblock()}})}})}})})},"deploy/widgets/security/authentication/EditAuthToken":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/FilteringSelect,dojo/_base/declare,dojox/data/JsonRestStore,js/webext/widgets/ColumnForm".split(","),function(l,m,k,j,e,h){return j("deploy.widgets.security.authentication.EditAuthToken",[m,l],{templateString:'<div class="editAuthToken">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);
var d=this;this.sourceConfigPropertyNames=[];this.templatePropertyNames=[];this.form=new h({submitUrl:bootstrap.baseUrl+"security/authtoken",postSubmit:function(c){void 0!==d.callback&&d.callback(c)},addData:function(c){if(c.expDate&&c.expTime)c.expiration=util.combineDateAndTime(c.expDate,c.expTime).valueOf()},onCancel:function(){void 0!==d.callback&&d.callback()}});this.groupMembersStore=new e({target:bootstrap.baseUrl+"security/user",idAttribute:"id"});this.groupMemberSelect=new k({store:this.groupMembersStore,
searchAttr:"name"});this.form.addField({name:"userId",label:i18n("User"),required:!0,widget:this.groupMemberSelect,description:i18n("If you are using the token to integrate with UrbanCode Release, you must specify the administrator. If the token is for an agent relay that uses component version replication, the user must have a role that has the Read Artifact Set List permission.")});this.form.addField({name:"expDate",label:i18n("Expiration Date"),required:!0,type:"Date"});this.form.addField({name:"expTime",
label:i18n("Expiration Time"),required:!0,type:"Time"});this.form.addField({name:"description",label:i18n("Description"),required:!1,type:"Text"});this.form.addField({name:"host",label:i18n("Allowed IPs"),required:!1,type:"Text",textDir:"ltr",placeholder:"10.15.10.0/24",description:i18n("Specifies allowed IPv4 addresses using CIDR notation. If no CIDR mask is specified, 32 is assumed. Leave this field blank for no IP restrictions, or if this server is part of a cluster. Do not use hostnames, for example, use 127.0.0.1 instead of localhost.")});
this.form.placeAt(this.formAttach)}})})},"deploy/widgets/security/authentication/AuthenticationRealmManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,deploy/widgets/security/authentication/AuthenticationRealmUsers,deploy/widgets/security/authentication/EditAuthenticationRealm,js/webext/widgets/GenericConfirm,js/webext/widgets/PopDown,js/webext/widgets/TwoPaneListManager,deploy/widgets/TooltipTitle,dojo/dom-class".split(","),function(l,m,k,j,e,h,d,c,b,a){return m("deploy.widgets.security.authentication.AuthenticationRealmManager",
[c],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(b){var c=this;this.defaultSelectionId=b;k.get({url:bootstrap.baseUrl+"security/authenticationRealm?outputType=BASIC&outputType=LINKED",handleAs:"json",load:function(b){var d=b.length,e=0;l.forEach(b,function(b){e++;var f=document.createElement("div");f.style.position="relative";var h=document.createElement("div");h.className="twoPaneEntryLabel";h.innerHTML=b.name.escape();var j=document.createElement("div");j.className=
"twoPaneActionIcons";var k=document.createElement("div");k.className="inlineBlock vAlignMiddle margin2Left";1<d&&1<e?(a.add(k,"iconMoveUp"),a.add(k,"cursorPointer"),k.onclick=function(a){util.cancelBubble(a);c.moveUp(b)}):(a.add(k,"iconMoveUpDisabled"),k.onclick=function(a){util.cancelBubble(a)});j.appendChild(k);k=document.createElement("div");k.className="inlineBlock vAlignMiddle margin2Left";1<d&&e<d?(a.add(k,"iconMoveDown"),a.add(k,"cursorPointer"),k.onclick=function(a){util.cancelBubble(a);c.moveDown(b)}):
(a.add(k,"iconMoveDownDisabled"),k.onclick=function(a){util.cancelBubble(a)});j.appendChild(k);if("20000000000000000000000000000001"!==b.id)k=document.createElement("div"),k.className="inlineBlock vAlignMiddle cursorPointer margin2Left iconMinus",k.onclick=function(a){util.cancelBubble(a);c.confirmDelete(b)},j.appendChild(k);f.appendChild(j);f.appendChild(h);c.addEntry({id:b.id,domNode:f,action:function(){c.selectEntry(b)}})});var b=document.createElement("div"),f=document.createElement("div");f.className=
"vAlignMiddle inlineBlock iconPlus";b.appendChild(f);f=document.createElement("div");f.innerHTML=i18n("Create Realm");f.className="vAlignMiddle inlineBlock margin5Left";b.appendChild(f);c.addEntry({id:null,domNode:b,action:function(){c.selectNewRealm()}})}})},refresh:function(a){if(this.selectedEntry&&this.selectedEntry.id)a=this.selectedEntry.id;this.clearDetail();this.clearList();this.showList(a)},selectEntry:function(a){var c=this;(new b({titleText:a.name.escape(),tooltipText:i18n("Authentication realms manage user identity within authorization realms. Users can be created in Internal Storage and Single Sign-On realms. Users can be imported in LDAP realms.")})).placeAt(this.detailAttach);
var h=new d({label:i18n("Users"),collapsed:!1});h.placeAt(this.detailAttach);var k=new j({authenticationRealm:a});k.placeAt(h.domAttach);this.registerDetailWidget(k);this.registerDetailWidget(h);h=document.createElement("div");h.className="hr";h.style.marginTop="15px";this.detailAttach.appendChild(h);h=new d({label:i18n("Edit")});h.placeAt(this.detailAttach);a=new e({authenticationRealm:a,callback:function(a){a&&c.refresh()}});a.placeAt(h.domAttach);this.registerDetailWidget(a);this.registerDetailWidget(h)},
selectNewRealm:function(){var a=this,b=document.createElement("div");b.className="containerLabel";b.style.padding="10px";b.innerHTML=i18n("Create Authentication Realm");this.detailAttach.appendChild(b);b=new e({callback:function(b,c){b&&a.refresh(c)}});b.placeAt(this.detailAttach);this.registerDetailWidget(b)},confirmDelete:function(a){var b=this;new h({message:i18n("Are you sure you want to delete authentication realm %s?",a.name),action:function(){k.del({url:bootstrap.baseUrl+"security/authenticationRealm/"+
a.id,handleAs:"json",load:function(){b.refresh()}})}})},moveUp:function(a){var b=this;k.put({url:bootstrap.baseUrl+"security/authenticationRealm/"+a.id+"/moveUp",handleAs:"json",load:function(){b.refresh()}})},moveDown:function(a){var b=this;k.put({url:bootstrap.baseUrl+"security/authenticationRealm/"+a.id+"/moveDown",handleAs:"json",load:function(){b.refresh()}})}})})},"deploy/widgets/security/authentication/AuthenticationRealmUsers":function(){define("dijit/_Widget,dijit/_TemplatedMixin,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/EditUser,deploy/widgets/security/SetUserPassword,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable,deploy/widgets/security/team/UserRoleManager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return j([l,m],{templateString:' <div class="userList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/authenticationRealm/"+this.authenticationRealm.id+"/users",c=[{name:i18n("User"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Name"),field:"actualName",
orderField:"actualName",filterField:"actualName",filterType:"text",getRawValue:function(a){return a.actualName}},{name:i18n("Email"),field:"email",orderField:"email",filterField:"email",filterType:"text",getRawValue:function(a){return a.email}},{name:i18n("Last Logon Time"),field:"lastLoginDate",orderField:"lastLoginDate",getRawValue:function(a){return a.lastLoginDate},formatter:function(a){return a.lastLoginDate&&util.dateFormatShort(a.lastLoginDate)}},{name:i18n("Actions"),formatter:this.actionsFormatter,
parentWidget:this}];this.grid=new q({url:b,serverSideProcessing:!1,columns:c,tableConfigKey:"authenticationRealmUserList",noDataMessage:i18n("No users have been created yet."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);this.authenticationRealm.readOnly?(b=new k({label:i18n("Import User"),showTitle:!1,onClick:function(){a.showImportUserDialog()}}),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonAttach),(new k({label:i18n("Update Users"),showTitle:!1,onClick:function(){a.showUpdateUsersDialog()}})).placeAt(this.buttonAttach)):
(b=new k({label:i18n("Create User"),showTitle:!1,onClick:function(){a.showEditUserDialog()}}),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div"),f=d.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Edit")},e);c(f,"click",function(){b.showEditUserDialog(a)});f=d.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("View User Roles")},
e);c(f,"click",function(){b.showUserRoles(a)});b.authenticationRealm.readOnly||(f=d.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Reset Password")},e),c(f,"click",function(){b.showSetUserPasswordDialog(a)}));a.isDeletable&&(f=d.create("a",{className:"actionsLink linkPointer",innerHTML:i18n("Remove")},e),c(f,"click",function(){b.confirmRemoval(a)}));a.isLockedOut&&(f=d.create("a",{innerHTML:i18n("Unlock User"),"class":"linkPointer actionsLink"},e),c(f,"click",function(){b.confirmUnlock(a)}));
return e},confirmUnlock:function(a){var b=this;new t({message:i18n("Are you sure you want to unlock user '%s'?",a.name.escape()),action:function(){e.put({url:bootstrap.baseUrl+"security/user/"+a.id+"/unlock",load:function(){b.grid.refresh()},error:function(a){new f({message:util.escape(a.responseText)})}})}})},confirmRemoval:function(a){var b=this,c='<div style="width: 500px;">'+i18n("Are you sure you want to delete user '%s'? This will remove the user from any groups and roles. This user may be re-added if this authentication realm is configured to create users automatically.",
a.name.escape())+"</div>";new t({message:c,forceRawMessages:!0,action:function(){e.del({url:bootstrap.baseUrl+"security/user/"+a.id,load:function(){b.grid.refresh()},error:function(a){new f({message:util.escape(a.responseText)})}})}})},showSetUserPasswordDialog:function(b){var c=new r({title:i18n("Reset User Password: %s",util.escape(b.name)),closable:!0,draggable:!0});(new a({user:b,callback:function(){c.hide();c.destroy()}})).placeAt(c.containerNode);c.show()},showEditUserDialog:function(a){var c=
this,d=i18n("Create User");a&&(d=i18n("Edit User: %s",util.escape(a.name)));var e=new r({title:d,closable:!0,draggable:!0});(new b({realmId:c.authenticationRealm.id,readOnlyRealm:c.authenticationRealm.readOnly,user:a,importOnly:c.authenticationRealm.readOnly,callback:function(a){e.hide();e.destroy();a&&c.grid.refresh()}})).placeAt(e.containerNode);e.show()},showUserRoles:function(a){var b=new r({title:i18n("Current Roles for %s",a.displayName),closable:!0,draggable:!0});(new o({userFiltering:!1,userData:a})).placeAt(b);
a=d.create("div",{className:"underField",style:{display:"inline-block"}},b.containerNode);(new k({label:i18n("Close"),onClick:function(){b.destroy()}})).placeAt(a);b.show()},showImportUserDialog:function(){var a=this,b=new r({title:i18n("Import Users"),closable:!0,draggable:!0}),c=new n({onSubmit:function(c){e.put({url:bootstrap.baseUrl+"security/authenticationRealm/"+a.authenticationRealm.id+"/importUsers/"+util.encodeIgnoringSlash(c.name),handleAs:"json",load:function(c){new f({title:i18n("User Import"),
message:i18n("Imported %s users using pattern %s",c.importedUsers.length,c.namePattern)});b.hide();b.destroy();a.grid.refresh()},error:function(a){new f({message:i18n("Error importing users: %s",util.escape(a.responseText))});b.hide();b.destroy()},saveLabel:i18n("Import")})},onCancel:function(){b.hide();b.destroy()}});c.addField({name:"nameLabel",label:"",type:"Label",value:i18n("Enter a name or name pattern to search for. * can be used as a wildcard. (* alone will import all users)")});c.addField({name:"name",
type:"Text",label:i18n("Username or Pattern"),required:!0});c.placeAt(b.containerNode);b.show()},showUpdateUsersDialog:function(){var a=this,b=i18n("Update All Users"),c=new r({title:b,closable:!0,draggable:!0}),b=new n({submitUrl:bootstrap.baseUrl+"security/authenticationRealm/"+a.authenticationRealm.id+"/updateUsers",submitMethod:"PUT",addData:function(b){b.authenticationRealmId=a.authenticationRealm.id},saveLabel:i18n("Submit"),postSubmit:function(){c.hide();c.destroy();a.grid.refresh()},onCancel:function(){c.hide();
c.destroy()}});b.addField({name:"label",label:i18n("Confirm"),type:"Label",value:i18n("Are you sure you want to update all users from this realm?")});b.placeAt(c.containerNode);c.show()}})})},"deploy/widgets/security/team/UserRoleManager":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/request/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,js/webext/widgets/table/TreeTable,js/webext/widgets/form/MenuButton,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,dojo/store/Memory,dijit/form/FilteringSelect,dijit/form/Button,deploy/widgets/security/role/RoleResourceTypeManager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return k([m,l],{templateString:'<div class="UserRoleManager"><div data-dojo-attach-point="filterAttach"></div><div data-dojo-attach-point="tableAttach"></div></div>',postCreate:function(){this._loadPermissions();this.userData||this._loadUserDataAndUserFilter();this.loadTable()},_loadPermissions:function(){var a=config.data.permissions;this.canAdd=!!a["Add Team Members"];this.canEdit=!!a["Manage Security"];this.canManage=this.canAdd||this.canEdit},_loadUserDataAndUserFilter:function(a){var b=
this;if(this.canManage&&a)j.get(bootstrap.baseUrl+"security/user/"+a,{handleAs:"json"}).then(function(a){b.userData=a;b.userFiltering&&!b.userFilter&&b.loadUserFilter()});else{if(!this.userData)this.userData={id:bootstrap.userId,name:bootstrap.username};b.userFiltering&&!b.userFilter&&b.loadUserFilter()}},loadTable:function(){var a=bootstrap.baseUrl+"security/user/roleMappings/",a=this.userData?a+this.userData.id:a+bootstrap.userId;this.showTable(a)},generateUserTableGridLayout:function(){var a=this;
return[{name:i18n("Team"),field:"team",beforeExpander:!0,formatter:function(a){var b=e.create("div",{className:"row-text-block"});e.create("div",{innerHTML:a.name.escape()},b);return b},orderField:"team",filterField:"team",filterType:"text",getRawValue:function(a){return a.name.escape()}},{name:i18n("Role"),field:"role",beforeExpander:!0,formatter:function(b){var c=e.create("div",{className:"row-text-block actions-text-block"});e.create("div",{innerHTML:b.roleMapping.role.name.escape()},c);c.appendChild(a.roleActionsFormatter(b));
return c},orderField:"role",filterField:"role",filterType:"text",getRawValue:function(a){return a.roleMapping.role.name.escape()}},{name:i18n("How Added"),field:"context",beforeExpander:!0,formatter:function(b){var b=b.roleMapping.context,c=a._mergeGroupsIntoSingleList(b);if(b.direct&&0!==c.length)return a.generateContextLabel(i18n("Directly and Groups:"),c);if(b.direct)return a.generateContextLabel(i18n("Directly"),[]);if(0!==c.length)return a.generateContextLabel(i18n("Groups:"),c)},orderField:"context",
filterField:"context",filterType:"text",getRawValue:function(b){var c="";b.roleMapping.context.direct&&(c+="directlymanually");b=a._mergeGroupsIntoSingleList(b.roleMapping.context);0!==b.length&&(c=c+"groups"+a._generateGroupsSearchText(b));return c}}]},_mergeGroupsIntoSingleList:function(a){var b=[],c;for(c=0;c<a.internalGroups.length;c++)b.push(a.internalGroups[c]);for(c=0;c<a.externalGroups.length;c++)b.push(a.externalGroups[c]);return b},roleActionsFormatter:function(a){var c=this,d=e.create("div",
{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),f=[{label:i18n("View Role Permissions"),onClick:function(){c.showRolePermissionsDialog(a.roleMapping.role,!1)}}];a.canManage&&f.push({label:i18n("Remove User From Role"),onClick:function(){c.showRoleRemoveDialog(a)}});(new b({options:f,label:i18n("Actions...")})).placeAt(d);return d},generateContextLabel:function(a,b){var c=this.generateGroupsDiv(b,!1),d=e.create("div",{style:{display:"inline-block"},innerHTML:a});e.place(d,
c,"first");return c},generateGroupsDiv:function(a,b){var c=e.create("div"),d;for(d in a)if(a.hasOwnProperty(d)){var f=this.generateGroupDiv(a[d],b);e.place(f,c)}return c},generateGroupDiv:function(a,b){var c=this,f=e.create("div",{className:"inline-block group-member-block",innerHTML:a.name.escape()});if(b&&this.canEdit){this.own(d(f,"mouseover",function(){h.add(f,"group-member-block-hover")}));this.own(d(f,"mouseout",function(){h.remove(f,"group-member-block-hover")}));var j=e.create("div",{className:"inline-block linkPointer remove-member icon_delete_red",
title:i18n("Remove %s",c.userData.name.escape())});e.place(j,f,"first");this.own(d(j,"click",function(){c.showGroupDeleteDialog(a,f)}))}return f},_generateGroupsSearchText:function(a){var b="",c;for(c=0;c<a.length;c++)b+=a[c].name;return b},showTable:function(a){var b=this.generateUserTableGridLayout();this.roleTable=new c({url:a,columns:b,serverSideProcessing:!1,orderField:"name",hideExpandCollapse:!0,getTreeNodeId:function(a){return a.id}});this.roleTable.placeAt(this.tableAttach)},loadUserFilter:function(){var a=
this;this.canManage?j.get(bootstrap.baseUrl+"security/user/manageableUsers",{handleAs:"json"}).then(function(b){0!==b.length?a.showUserFilter(i18n("Select user to manage roles:"),b):this.showUserFilter(i18n("Roles for user:"),[this.userData])}):this.showUserFilter(i18n("Roles for user:"),[this.userData])},showUserFilter:function(a,b){var c=this,d=e.create("div");e.create("div",{style:{display:"inline-block"},innerHTML:a},d);this.userStore=new n({data:b});this.userFilter=new r({disabled:!this.canManage,
name:c.userData.name.escape(),value:c.userData.id,store:c.userStore,searchAttr:"name",onChange:function(a){if(a)c._loadUserDataAndUserFilter(a),c.roleTable.url=bootstrap.baseUrl+"security/user/roleMappings/"+a,c.roleTable.refresh()}});this.userFilter.domNode.style.position="relative";this.userFilter.domNode.style.left="10px";this.userFilter.placeAt(d);e.place(d,this.filterAttach);this.userFilter.startup()},showRoleRemoveDialog:function(b){var d=this,f=new a({title:i18n("Remove %s From Role %s",d.userData.name.escape(),
b.roleMapping.role.name.escape()),closeable:!0,draggable:!0});e.create("div",{className:"table-header",innerHTML:i18n("%s has access to the role %s via the following associations:",d.userData.name.escape(),b.roleMapping.role.name.escape())},f.containerNode);var j=this.generateRoleMappingGridLayout();this.roleManagerTable=new c({data:[b],noDataMessage:i18n("No more mappings to role %s exist.",b.roleMapping.role.name.escape()),columns:j,serverSideProcessing:!1,orderField:"name",hideExpandCollapse:!0,
getTreeNodeId:function(a){return a.id}});this.roleManagerTable.placeAt(f.containerNode);b=e.create("div",{className:"underField",style:{display:"inline-block"}},f.containerNode);(new t({label:i18n("Done"),onClick:function(){d.roleTable.refresh();f.destroy()}})).placeAt(b);h.add(f.containerNode,"UserRoleManager");f.show();f.containerNode.style.height=""},generateRoleMappingGridLayout:function(){var a=this;return[{name:i18n("Direct Membership"),field:"direct",beforeExpander:!0,formatter:function(b){var c=
e.create("div",{className:"row-text-block actions-text-block"});b.roleMapping.context.direct&&(e.create("div",{innerHTML:i18n("Manually assigned")},c),a.canEdit&&c.appendChild(a.directMappingActionsFormatter(b)));return c},getRawValue:function(a){return a.roleMapping.context.direct}},{name:i18n("Internal Storage Authentication Realms"),field:"internal",beforeExpander:!0,formatter:function(b){var c=e.create("div",{className:"group-actions-text-block"}),d=b.roleMapping.context.internalGroups;0!==d.length&&
(c.appendChild(a.generateGroupsDiv(d,!0)),a.canEdit&&c.appendChild(a.groupMappingActionsFormatter(b)));return c}},{name:i18n("Other Authentication Realms"),field:"external",beforeExpander:!0,formatter:function(b){var c=e.create("div",{className:"inlineBlock"});c.appendChild(a.generateGroupsDiv(b.roleMapping.context.externalGroups,!1));return c}}]},directMappingActionsFormatter:function(a){var c=this,d=e.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"});(new b({options:[{label:i18n("Remove Mapping"),
onClick:function(){j.del(bootstrap.baseUrl+"security/team/"+a.id+"/role/"+a.roleMapping.role.id+"/user/"+c.userData.id,{handleAs:"json"}).then(function(){c.roleManagerTable.data[0].roleMapping.context.direct=!1;c.refreshRoleMappingTableData();c.roleManagerTable.refresh()})}}],label:i18n("Actions...")})).placeAt(d);return d},groupMappingActionsFormatter:function(a){var b=this,c=e.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions",style:{top:"5px"}}),a=new n({data:a.roleMapping.context.internalGroups});
(new r({required:!1,placeHolder:i18n("Remove user from..."),store:a,searchAttr:"name",onChange:function(a){a&&b.showGroupDeleteDialog(this.item)}})).placeAt(c).startup();return c},showGroupDeleteDialog:function(a,b){var c=this,d=new f({message:i18n("Are you sure you wish to remove %s from the group %s?",c.userData.name.escape(),a.name.escape()),confirmLabel:i18n("Remove"),action:function(){b&&e.destroy(b);c.deleteUserFromGroup(a);d.destroy()},cancelAction:function(){b||c.roleManagerTable.refresh()}})},
deleteUserFromGroup:function(a){var b=this;j.del(bootstrap.baseUrl+"security/group/"+a.id+"/members/"+b.userData.id,{handleAs:"json"}).then(function(){b.deleteGroupFromTableData(a);b.refreshRoleMappingTableData();b.roleManagerTable.refresh()})},deleteGroupFromTableData:function(a){var b=this.roleManagerTable.data[0].roleMapping.context.internalGroups,c;for(c=0;c<b.length;c++)if(b[c].id===a.id){b.splice(c,1);break}},refreshRoleMappingTableData:function(){var a=0!==this.roleManagerTable.data[0].roleMapping.context.externalGroups.length,
b=this.roleManagerTable.data[0].roleMapping.context.direct;if(0===this.roleManagerTable.data[0].roleMapping.context.internalGroups.length&&!a&&!b)this.roleManagerTable.data=[]},showRolePermissionsDialog:function(b,c){var d=new a({title:i18n("Permissions For Role %s",b.name.escape()),closeable:!0,draggable:!0,style:{width:"1200px"}});(new q({role:b,overrideListWidth:"165px",canEdit:c})).placeAt(d.containerNode);var f=e.create("div",{className:"underField",style:{display:"inline-block"}},d.containerNode);
(new t({label:i18n("Close"),onClick:function(){d.destroy()}})).placeAt(f);d.show()}})})},"deploy/widgets/security/role/RoleResourceTypeManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,js/webext/widgets/PopDown,deploy/widgets/security/role/RoleDefaultActions,deploy/widgets/security/role/RoleResourceTypeGrid,dijit/Tooltip".split(","),function(l,m,k,j,e,h,d,c,b){return m("deploy/widgets/security/role/RoleResourceTypeManager",
[e],{postCreate:function(){this.inherited(arguments);this.showList()},showList:function(a){var b=this;this.defaultSelectionId=a;k.get({url:bootstrap.baseUrl+"security/resourceType",handleAs:"json",load:function(a){l.forEach(a,function(a){var c=document.createElement("div");c.style.position="relative";var d=document.createElement("div");d.className="twoPaneEntryLabel";d.innerHTML=i18n(a.name.escape());c.appendChild(d);b.addEntry({id:a.id,domNode:c,action:function(){b.selectEntry(a)}})})}})},refresh:function(a){a=
a||this.selectedEntry.id;this.clearDetail();this.clearList();this.showList(a)},selectEntry:function(a){var e=j.create("div",{"class":"resourceRole-tooltipTitle"});j.create("h2",{innerHTML:this.header||i18n("Permissions Granted to Role Members"),"class":"title-text"},e);var h=j.create("div",{"class":"labelsAndValues-helpCell title-helpCell"},e);new b({connectId:[h],label:i18n("When configuring a new role, select which permissions users with the role should have. Users will not be able to interact with those objects in the Web UI unless they are given permission to the correct tabs from the Web UI menu as well."),
showDelay:100,position:["after","above","below","before"]});j.place(e,this.detailAttach);e=i18n("Role name: %s",util.escape(this.role.name));this.role.description&&(e=e+"&nbsp; ("+util.escape(this.role.description)+")");e=j.create("div",{innerHTML:e,"class":"resourceRole-tooltipTitle"});j.place(e,this.detailAttach);a="Web UI"===a.name||"Server Configuration"===a.name?new d({role:this.role,resourceType:a}):new c({role:this.role,resourceType:a,canEdit:this.canEdit});a.placeAt(this.detailAttach);this.registerDetailWidget(a)}})})},
"deploy/widgets/security/role/RoleDefaultActions":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/json,js/util/blocker/_BlockerMixin,js/webext/widgets/Alert,js/webext/widgets/FieldList,js/webext/widgets/Switch".split(","),function(l,m,k,j,e,h,d,c,b,a){return j([m,l,d],{templateString:'<div class="roleDefaultActions"><div data-dojo-attach-point="actionsAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this.canEdit=
config.data.permissions["Manage Security"];this.fieldList=new b;this.fieldList.placeAt(this.actionsAttach);e.get({url:bootstrap.baseUrl+"security/role/"+this.role.id+"/actionMappings",handleAs:"json",load:function(b){a.role.actions=b;e.get({url:bootstrap.baseUrl+"security/resourceType/"+a.resourceType.name+"/actions",handleAs:"json",load:function(b){a.showCheckboxes(b)}})}})},showCheckboxes:function(b){var d=this;k.forEach(b,function(b){var f=!1;k.forEach(d.role.actions,function(a){a.action.name===
b.name&&(f=!0)});var j=new a({labelText:i18n(b.name),labelPlacement:"before",hideLabel:!0,value:f,focusOnHover:!0,disabled:!d.canEdit,onChange:function(a){var f={resourceType:d.resourceType.name,action:b.name};d.block();a?e.post({url:bootstrap.baseUrl+"security/role/"+d.role.id+"/actionMappings",handleAs:"json",putData:h.stringify(f),load:function(){d.unblock()},error:function(a){d.unblock();new c({message:util.escape(a.responseText)})}}):e.del({url:bootstrap.baseUrl+"security/role/"+d.role.id+"/actionMappings",
handleAs:"json",putData:h.stringify(f),load:function(){d.unblock()},error:function(a){d.unblock();new c({message:util.escape(a.responseText)})}})}});d.fieldList.insertField(j,null,i18n(b.description),null)})},destroy:function(){this.inherited(arguments);this.fieldList.destroy()}})})},"deploy/widgets/security/role/RoleResourceTypeGrid":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojox/form/TriStateCheckBox,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/aspect,dojo/json,dojo/on,dojo/dom-class,dojo/dom-construct,js/webext/widgets/Alert,js/webext/widgets/table/TreeTable,js/webext/widgets/Dialog,deploy/widgets/security/resourceRole/EditResourceRole".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s){return d("deploy/widgets/security/role/RoleResourceTypeGrid",[m,l],{templateString:'<div class="roleList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;if(!1!==this.canEdit)this.canEdit=config.data.permissions["Manage Security"];c.get({url:bootstrap.baseUrl+"security/role/"+this.role.id+"/actionMappings",handleAs:"json",load:function(b){a.role.actions=
b;c.get({url:bootstrap.baseUrl+"security/resourceType/"+a.resourceType.name+"/actions",handleAs:"json",load:function(b){a.showGrid(b)}})}})},showGrid:function(d){var l=this,m=[],o={},s=[],C=bootstrap.baseUrl+"security/resourceType/"+l.resourceType.name+"/resourceRoles",B=[{name:i18n("Type"),field:"name",orderField:"name",formatter:function(a,b,c){c.style.verticalAlign="top";return b},getRawValue:function(a){return a.name}}],A=function(a,b,c){if(a){a={};a.action={id:c.id};if(b&&b.id)a.resourceRole=
{id:b.id};l.role.actions.push(a)}else l.role.actions=h.filter(l.role.actions,function(a){var d=!0;a.action.id===c.id&&(!a.resourceRole&&!b.id?d=!1:a.resourceRole&&a.resourceRole.id===b.id&&(d=!1));return d})};h.forEach(d,function(a){a.category?(o[a.category]||(o[a.category]=[],s.push(a.category)),o[a.category].push(a)):m.push(a)});h.forEach(m,function(b){B.push({name:i18n(b.name),formatter:function(d,e,f){f.style.verticalAlign="top";var k=!1;h.forEach(l.role.actions,function(a){a.action.id===b.id&&
(!a.resourceRole&&!d.id?k=!0:a.resourceRole&&a.resourceRole.id===d.id&&(k=!0))});return new j({checked:k,disabled:!l.canEdit,onChange:function(e){var f={resourceRole:d.id,action:b.id};l.grid.block();f={url:bootstrap.baseUrl+"security/role/"+l.role.id+"/actionMappings",handleAs:"json",putData:a.stringify(f),load:function(){l.grid.unblock()},error:function(a){l.grid.unblock();new t({message:util.escape(a.responseText)})}};e?c.post(f):c.del(f);A(e,d,b)}})}})});h.forEach(s,function(b){var d=[];h.forEach(o[b],
function(a){d.push(a.id)});B.push({name:i18n(b),formatter:function(k){var m=[],q=function(a,b){var c=!0,d=!0;h.forEach(b,function(a){c=c&&a.checked;d=d&&!a.checked});return c?!0:d?!1:"mixed"},s=r.create("div",{"class":"rolePermissions"}),B=r.create("div",{"class":"expandNode inlineBlock"},s),u=r.create("div",{"class":"subActionContainer collapsedRolePermissions"});f(B,"click",function(){n.contains(u,"collapsedRolePermissions")?(n.remove(u,"collapsedRolePermissions"),n.add(B,"expanded")):(n.add(u,
"collapsedRolePermissions"),n.remove(B,"expanded"))});var v=new e({name:k.name+b,label:i18n(b),disabled:!l.canEdit,onClick:function(){"mixed"===this.checked&&this.set("checked",!0)},onChange:function(b){var e={resourceRole:k.id,actions:d};l.grid.block();!0===b?c.post({url:bootstrap.baseUrl+"security/role/"+l.role.id+"/actionMappings",handleAs:"json",putData:a.stringify(e),load:function(){l.grid.unblock()},error:function(a){l.grid.unblock();new t({message:util.escape(a.responseText)})}}):!1===b&&c.del({url:bootstrap.baseUrl+
"security/role/"+l.role.id+"/actionMappings",handleAs:"json",putData:a.stringify(e),load:function(){l.grid.unblock()},error:function(a){l.grid.unblock();new t({message:util.escape(a.responseText)})}});h.forEach(m,function(a){a.set("checked",b,!1);A(b,a.item,a.action)})}});v.placeAt(s);r.place(u,s);h.forEach(o[b],function(d){var e=!1;h.forEach(l.role.actions,function(a){a.action.id===d.id&&(!a.resourceRole&&!k.id?e=!0:a.resourceRole&&a.resourceRole.id===k.id&&(e=!0))});var f=new j({checked:e,disabled:!l.canEdit,
onChange:function(e){var f={resourceRole:k.id,action:d.id};l.grid.block();f={url:bootstrap.baseUrl+"security/role/"+l.role.id+"/actionMappings",handleAs:"json",putData:a.stringify(f),load:function(){l.grid.unblock()},error:function(a){l.grid.unblock();new t({message:util.escape(a.responseText)})}};e?c.post(f):c.del(f);A(e,k,d);v.set("checked",q(b,m),!1)},action:d,item:k});dojo.addClass(f.domNode,k.name+b);m.push(f);var n=r.create("div",{label:d.name,"class":"subAction"},u);f.placeAt(n);r.create("label",
{innerHTML:i18n(d.name),style:f.isLeftToRight()?"margin-left:5px":"margin-right:5px"},n)});v.set("checked",q(b,m),!1);return s}})});l.grid=new q({url:C,serverSideProcessing:!1,columns:B,noDataMessage:i18n("No types have been created yet."),hideFooterLinks:!0,hidePagination:!1,hideExpandCollapse:!0});l.grid.placeAt(l.gridAttach);l.grid.splicedInStandardType=!1;l.grid.oldShowTable=l.grid.showTable;l.grid.showTable=function(a){if(!1===l.grid.splicedInStandardType)a.splice(0,0,{name:i18n("Standard "+
l.resourceType.name)}),l.grid.splicedInStandardType=!0;l.grid.oldShowTable(a)};b.before(l.grid,"refresh",function(){l.grid.splicedInStandardType=!1});l.canEdit&&(d=new k({label:i18n("Create Type")}),n.add(d.domNode,"idxButtonSpecial"),d.placeAt(l.buttonAttach),d.on("click",function(){l.showEditResourceRoleDialog()}))},destroy:function(){this.inherited(arguments);this.grid&&this.grid.destroy()},showEditResourceRoleDialog:function(a){var b=this,d=new o({title:i18n("Create Type"),closable:!0,draggable:!0});
(new s({resourceType:b.resourceType,resourceRole:a,callback:function(){d.hide();d.destroy();c.get({url:bootstrap.baseUrl+"security/role/"+b.role.id+"/actionMappings",handleAs:"json",load:function(a){b.role.actions=a;b.grid.refresh()}})}})).placeAt(d.containerNode);d.show()}})})},"dojox/form/TriStateCheckBox":function(){define("dojo/_base/kernel,dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/_base/event,dojo/query,dojo/dom-attr,dojo/text!./resources/TriStateCheckBox.html,dijit/form/Button,dijit/form/_ToggleButtonMixin,dojo/NodeList-dom".split(","),
function(l,m,k,j,e,h,d,c,b,a){return m("dojox.form.TriStateCheckBox",[b,a],{templateString:c,baseClass:"dojoxTriStateCheckBox",type:"checkbox",states:"",_stateLabels:null,stateValue:null,_currentState:0,_stateType:"False",readOnly:!1,checked:"",_aria_attr:"aria-checked",constructor:function(){this.states=[!1,"mixed",!0];this.checked=!1;this._stateLabels={False:"&#9633;",True:"&#8730;",Mixed:"&#9632;"};this.stateValues={False:!1,True:"on",Mixed:"mixed"}},_fillContent:function(){},postCreate:function(){d.set(this.stateLabelNode,
"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},startup:function(){this.set("checked",this.params.checked||this.states[this._currentState]);d.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType]);this.inherited(arguments)},_setIconClassAttr:null,_setCheckedAttr:function(a,b){var c=k.indexOf(this.states,a);0<=c?(this._currentState=c,this._stateType=this._getStateType(a),d.set(this.focusNode,"value",this.stateValues[this._stateType]),d.set(this.stateLabelNode,
"innerHTML",this._stateLabels[this._stateType]),this.inherited(arguments)):console.warn("Invalid state!")},setChecked:function(a){l.deprecated("setChecked("+a+") is deprecated. Use set('checked',"+a+") instead.","","2.0");this.set("checked",a)},_setStatesAttr:function(a){if(j.isArray(a))this._set("states",a);else if(j.isString(a)){for(var b={"true":!0,"false":!1,mixed:"mixed"},a=a.split(/\s*,\s*/),c=0;c<a.length;c++)a[c]=void 0!==b[a[c]]?b[a[c]]:!1;this._set("states",a)}},_setReadOnlyAttr:function(a){this._set("readOnly",
a);d.set(this.focusNode,"readOnly",a)},_setValueAttr:function(a,b){if("string"==typeof a&&0>k.indexOf(this.states,a))""==a&&(a="on"),this.stateValues.True=a,a=!0;if(this._created)this._currentState=k.indexOf(this.states,a),this.set("checked",a,b),d.set(this.focusNode,"value",this.stateValues[this._stateType])},_setValuesAttr:function(a){this.stateValues.True=a[0]?a[0]:this.stateValues.True;this.stateValues.Mixed=a[1]?a[1]:this.stateValues.Mixed},_getValueAttr:function(){return this.stateValues[this._stateType]},
reset:function(){this._hasBeenBlurred=!1;this.set("states",this.params.states||[!1,"mixed",!0]);this.stateValues=this.params.stateValues||{False:!1,True:"on",Mixed:"mixed"};this.set("values",this.params.values||[]);this.set("checked",this.params.checked||this.states[0])},_onFocus:function(){this.id&&h("label[for='"+this.id+"']").addClass("dijitFocusedLabel");this.inherited(arguments)},_onBlur:function(){this.id&&h("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");this.mouseFocus=!1;this.inherited(arguments)},
_onClick:function(a){if(this.readOnly||this.disabled)return e.stop(a),!1;this.click();return this.onClick(a)},click:function(){this._currentState>=this.states.length-1?this._currentState=0:-1==this._currentState?this.fixState():this._currentState++;var a=this._currentState;this.set("checked",this.states[this._currentState]);this._currentState=a;d.set(this.stateLabelNode,"innerHTML",this._stateLabels[this._stateType])},fixState:function(){this._currentState=this.states.length-1},_getStateType:function(a){return a?
"mixed"==a?"Mixed":"True":"False"},_onMouseDown:function(){this.mouseFocus=!0}})})},"url:dojox/form/resources/TriStateCheckBox.html":'<div class="dijit dijitReset dijitInline" role="presentation"\n\t><div class="dojoxTriStateCheckBoxInner" dojoAttachPoint="stateLabelNode"></div\n\t><input ${!nameAttrSetting} type="${type}" role="${type}" dojoAttachPoint="focusNode"\n\tclass="dijitReset dojoxTriStateCheckBoxInput" dojoAttachEvent="onclick:_onClick"\n/></div>\n',"deploy/widgets/security/authentication/EditAuthenticationRealm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,deploy/widgets/security/_LdapConnectionPropertiesMixin,dojo/_base/array,dojo/_base/declare,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect".split(","),
function(l,m,k,j,e,h){return e("deploy.widgets.security.authentication.EditAuthenticationRealm",[m,l,k],{templateString:'<div class="editAuthenticationRealm">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=this;this.existingValues={properties:{}};if(this.authenticationRealm)this.existingValues=this.authenticationRealm;this.extraPropertyNames=[];this.form=new h({submitUrl:bootstrap.baseUrl+"security/authenticationRealm"+(this.authenticationRealm?
"/"+this.authenticationRealm.id:""),submitMethod:this.authenticationRealm?"PUT":"POST",addData:function(c){if(d.authenticationRealm)c.existingId=d.authenticationRealm.id;c.properties={};j.forEach(d.extraPropertyNames,function(b){var a="property/"+b;c.properties[b]=c[a];delete c[a]})},postSubmit:function(c){void 0!==d.callback&&d.callback(!0,c?c.id:null)},cancelLabel:null});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",
label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"allowedAttempts",label:i18n("Allowed Login Attempts"),description:i18n("The number of invalid login attempts before a user account is locked.  Leave blank or enter 0 to allow an unlimited number of attempts."),type:"Number",textDir:"ltr",value:this.existingValues.allowedAttempts});"20000000000000000000000000000001"===this.existingValues.id?(this.form.addField({name:"loginClassName",type:"Invisible",
value:this.existingValues.loginModuleClassName}),this.form.addField({name:"authorizationRealm",type:"Invisible",value:this.existingValues.authorizationRealmId})):(this.form.addField({name:"loginClassName",label:i18n("Type"),value:this.existingValues.loginModuleClassName,type:"Select",required:!0,onChange:function(c){d.typeChanged(c)},allowedValues:[{label:i18n("LDAP or Active Directory"),value:"com.urbancode.security.authentication.ldap.LdapLoginModule"},{label:i18n("Single Sign-On"),value:"com.urbancode.security.authentication.sso.SingleSignOnLoginModule"},
{label:i18n("Internal Storage"),value:"com.urbancode.security.authentication.internal.InternalLoginModule"}]}),this.typeChanged(this.existingValues.loginModuleClassName||"com.urbancode.security.authentication.ldap.LdapLoginModule"));this.form.placeAt(this.formAttach)},typeChanged:function(d){var c=this;this.form.hasField("authorizationRealms")&&this.form.removeField("authorizationRealms");j.forEach(this.extraPropertyNames,function(b){c.form.hasField("property/"+b)&&c.form.removeField("property/"+
b);c.form.hasField(b)&&c.form.removeField(b)});this.extraPropertyNames=[];"com.urbancode.security.authentication.ldap.LdapLoginModule"===d?c.showLDAPFields():"com.urbancode.security.authentication.internal.InternalLoginModule"===d?c.showInternalFields():"com.urbancode.security.authentication.sso.SingleSignOnLoginModule"===d&&c.showSSOFields()},showLDAPFields:function(){this.form.addField({name:"authorizationRealms",label:i18n("Authorization Realm"),required:!0,type:"TableFilterMultiSelect",url:bootstrap.baseUrl+
"security/authorizationRealm",value:this.existingValues.authorizationRealms,defaultQuery:{filterFields:"authorizationModuleClassName",filterType_authorizationModuleClassName:"ne",filterValue_authorizationModuleClassName:"com.urbancode.security.authorization.sso.SingleSignOnAuthorizationModule"},allowNone:!1});this.addLdapConnectionFields("property/context-factory,property/url,property/connection-name,property/user-pattern,property/user-base,property/user-search,userSearchType".split(","));this.form.addField({name:"attributesLabel",
type:"Label",label:"",value:i18n("Enter the names of attributes in LDAP which contain the following information (optional)")});this.extraPropertyNames.push("attributesLabel");this.form.addField({name:"property/name-attribute",label:i18n("Name Attribute"),description:i18n("The attribute name containing user names."),required:!1,type:"Text",textDir:"ltr",placeholder:"cn",value:this.existingValues.properties["name-attribute"]});this.extraPropertyNames.push("name-attribute");this.form.addField({name:"property/email-attribute",
label:i18n("Email Attribute"),description:i18n("The attribute name containing the users' email."),required:!1,type:"Text",textDir:"ltr",placeholder:i18n("email"),value:this.existingValues.properties["email-attribute"]});this.extraPropertyNames.push("email-attribute")},showInternalFields:function(){this.form.addField({name:"authorizationRealms",label:i18n("Authorization Realm"),required:!0,type:"TableFilterMultiSelect",url:bootstrap.baseUrl+"security/authorizationRealm",value:this.existingValues.authorizationRealms,
allowNone:!1,defaultQuery:{filterFields:"authorizationModuleClassName",filterType_authorizationModuleClassName:"eq",filterValue_authorizationModuleClassName:"com.urbancode.security.authorization.internal.InternalAuthorizationModule"}})},showSSOFields:function(){this.form.addField({name:"authorizationRealms",label:i18n("Authorization Realm"),required:!0,type:"TableFilterMultiSelect",url:bootstrap.baseUrl+"security/authorizationRealm",value:this.existingValues.authorizationRealms,allowNone:!1});this.form.addField({type:"Label",
label:"",name:"headersLabel",value:i18n("The SSO authentication integration works by looking for request headers to be set by the SSO mechanism. Please provide the names of headers which contain the necessary information.")});this.extraPropertyNames.push("headersLabel");this.form.addField({name:"property/user-header",label:i18n("User Header Name"),description:i18n("The name of the header that contains the list of users."),required:!0,type:"Text",textDir:"ltr",placeholder:"HTTP_USERNAME",value:this.existingValues.properties["user-header"]});
this.extraPropertyNames.push("user-header");this.form.addField({name:"property/email-header",label:i18n("Email Header Name"),description:i18n("The name of the header that contains the list of user email addresses."),required:!1,type:"Text",placeholder:"HTTP_EMAIL",value:this.existingValues.properties["email-header"]});this.extraPropertyNames.push("email-header");this.form.addField({name:"property/fullname-header",label:i18n("Full Name Header Name"),description:i18n("The name of the header that contains the user's full name."),
required:!1,type:"Text",placeholder:"HTTP_FULLNAME",value:this.existingValues.properties["fullname-header"]});this.extraPropertyNames.push("fullname-header");this.form.addField({name:"property/logout-url",label:i18n("Logout URL"),description:i18n("The URL where users are redirected after they log out of UrbanCode Deploy."),required:!0,type:"Text",textDir:"ltr",placeholder:"https://www.example.com",value:this.existingValues.properties["logout-url"]});this.extraPropertyNames.push("logout-url")}})})},
"deploy/widgets/security/_LdapConnectionPropertiesMixin":function(){define(["dojo/_base/declare"],function(l){return l([],{addLdapConnectionFields:function(l){var k=this;k.form.addField({name:"property/url",label:i18n("LDAP URL"),description:i18n("The URL of the LDAP server. It should begin with 'ldap://' or 'ldaps://'. Failover servers can be added by separating the URLs with a space. Example: ldap://ldap.mydomain.com:389 ldap://ldap.mydomain2.com"),required:_.contains(l,"property/url"),type:"Text",
textDir:"ltr",placeholder:"ldap(s)://example.com",value:k.existingValues.properties.url});this.extraPropertyNames.push("url");k.form.addField({name:"property/context-factory",label:i18n("Context Factory"),description:i18n("The context factory class to use to connect. This may vary depending upon your specific Java implementation. The default for Sun Java implementations: com.sun.jndi.ldap.LdapCtxFactory"),required:_.contains(l,"property/context-factory"),type:"Invisible",value:k.existingValues.properties["context-factory"]||
"com.sun.jndi.ldap.LdapCtxFactory"});this.extraPropertyNames.push("context-factory");k.form.addField({name:"_connectionInsertPoint",type:"Invisible"});this.extraPropertyNames.push("_connectionInsertPoint");var j=function(d){k.form.hasField("property/connection-name")&&(k.form.removeField("property/connection-name"),k.form.removeField("property/connection-password"));d?(k.form.addField({type:"Invisible",name:"property/connection-name",value:""}),k.form.addField({type:"Invisible",name:"property/connection-password",
value:""})):(k.form.addField({name:"property/connection-name",label:i18n("Search Connection DN"),description:i18n("The complete directory name to use when binding to LDAP for searches. If not specified, an anonymous connection is made."),required:_.contains(l,"property/connection-name"),type:"Text",textDir:"ltr",placeholder:"cn=admin,dc=mydomain,dc=com",value:k.existingValues.properties["connection-name"]},"_connectionInsertPoint"),k.form.addField({name:"property/connection-password",label:i18n("Search Connection Password"),
description:i18n("The password to use when binding to LDAP for searches.  Used with the Search Connection DN field."),type:"Secure",value:k.existingValues.properties["connection-password"]},"_connectionInsertPoint"))},e=!k.existingValues.properties["connection-name"];k.form.addField({name:"anonymousConnection",type:"Checkbox",value:e,onChange:j,label:i18n("Search Anonymously"),description:i18n("Select if LDAP accepts anonymous queries. If cleared, specify the LDAP directory with the Search Connection DN field, and associated password. Checked by default.")},
"_connectionInsertPoint");j(e);this.extraPropertyNames.push("anonymousConnection");this.extraPropertyNames.push("connection-password");this.extraPropertyNames.push("connection-name");k.form.addField({name:"userSearchTypeLabel",type:"Label",label:"",value:i18n("Specify how to search LDAP for users. (See documentation for examples.)")});this.extraPropertyNames.push("userSearchTypeLabel");k.form.addField({name:"_userSearchInsertPoint",type:"Invisible"});this.extraPropertyNames.push("_userSearchInsertPoint");
var j=function(d){k.form.hasField("property/user-base")&&(k.form.removeField("property/user-base"),k.form.removeField("property/user-search"),k.form.removeField("property/user-search-subtree"));k.form.hasField("property/user-pattern")&&k.form.removeField("property/user-pattern");"searchPattern"===d?(k.form.addField({type:"Invisible",name:"property/user-base",value:""}),k.form.addField({type:"Invisible",name:"property/user-search",value:""}),k.form.addField({type:"Invisible",name:"property/user-search-subtree",
value:""}),k.form.addField({name:"property/user-pattern",label:i18n("User DN Pattern"),description:i18n("When you search a single directory, the name is substituted in place of {0} in the pattern, for example, cn={0},ou=employees,dc=yourcompany,dc=com."),required:_.contains(l,"property/user-pattern"),type:"Text",textDir:"ltr",placeholder:"cn={0},ou=employees,dc=mydomain,dc=com",value:k.existingValues.properties["user-pattern"]},"_userSearchInsertPoint")):"searchBase"===d&&(k.form.addField({type:"Invisible",
name:"property/user-pattern",value:""}),k.form.addField({name:"property/user-base",label:i18n("User Search Base"),description:i18n("When you search multiple directories, specify the starting directory that is used for searches, such as ou=employees,dc=mydomain,dc=com."),required:_.contains(l,"property/user-base"),type:"Text",textDir:"ltr",placeholder:"ou=employees,dc=mydomain,dc=com",value:k.existingValues.properties["user-base"]},"_userSearchInsertPoint"),k.form.addField({name:"property/user-search",
label:i18n("User Search Filter"),description:i18n("The LDAP filter expression to use when searching for user directory entries. The username is put in place of {0} in the search pattern. If this is an attribute and not part of the user DN, wrap in parentheses. E.g. uid={0} or (sAMAccountName={0})"),type:"Text",textDir:"ltr",placeholder:"uid={0}",required:_.contains(l,"property/user-search"),value:k.existingValues.properties["user-search"]},"_userSearchInsertPoint"),k.form.addField({name:"property/user-search-subtree",
label:i18n("Search User Subtree"),description:i18n("Search the full subtree for the user, as opposed to a single-level search only covering users directly inside the specified search base."),type:"Checkbox",value:k.existingValues.properties["user-search-subtree"]||!0},"_userSearchInsertPoint"))},h;k.existingValues.properties["user-base"]?h="searchBase":k.existingValues.properties["user-pattern"]&&(h="searchPattern");k.form.addField({name:"userSearchType",type:"Radio",label:"",value:h,required:_.contains(l,
"userSearchType"),allowedValues:[{label:i18n("LDAP users may exist in many directories; search across LDAP using a criteria."),value:"searchBase"},{label:i18n("LDAP users exist in a single directory; use a pattern to create the DN for users."),value:"searchPattern"}],onChange:j},"_userSearchInsertPoint");j(h);this.extraPropertyNames.push("user-pattern");this.extraPropertyNames.push("user-base");this.extraPropertyNames.push("user-search");this.extraPropertyNames.push("user-search-subtree");this.extraPropertyNames.push("userSearchType")}})})},
"deploy/widgets/security/token/AuthTokenRestrictionList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/on,deploy/widgets/security/token/EditAuthTokenRestriction,js/webext/widgets/Dialog,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,js/webext/widgets/form/MenuButton,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e("deploy.widgets.security.token.AuthTokenUrlList",
[m,l],{templateString:'<div class="tokenUrlList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,d=bootstrap.baseUrl+"security/authTokenRestriction",e=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},formatter:function(d){var e=c.create("div",{"class":"inlineBlock",style:"margin-"+
(b.isBodyLtr()?"right":"left")+":78px;"}),f=c.create("div");f.innerHTML=i18n(util.escape(d.name));c.place(f,e);c.place(a.actionsFormatter(d),e);return e}},{name:i18n("Description"),field:"description",formatter:function(a){var b=c.create("div");b.innerHTML=i18n(util.escape(a.description));return b}}];this.grid=new o({url:d,serverSideProcessing:!0,hideExpandCollapse:!0,hidePagination:!1,orderField:"name",noDataMessage:i18n("No auth token restrictions found"),tableConfigKey:"authTokenRestrictionList",
columns:e});this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.manageAuthTokenRestrictions]&&this.attachCreateButton()},attachCreateButton:function(){var a=this,b={label:i18n("Create Auth Token Restriction"),showTitle:!1,onClick:function(){a.showEditUrlListDialog()}},b=new k(b);d.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonTopAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},showEditUrlListDialog:function(a,b){var c=this,d=new n({title:i18n("Create Auth Token Restriction"),
closable:!0,draggable:!0,style:{width:"650px"}});(new f({authTokenRestriction:a,isCopy:b,callback:function(){d.hide();d.destroy();c.grid.refresh()}})).placeAt(d);d.show()},confirmDelete:function(a){var b=this;new t({message:i18n("Are you sure you want to delete %s?",a.name),action:function(){b.grid.block();h.del({url:bootstrap.baseUrl+"security/authTokenRestriction/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},error:function(a){new r({message:a.responseText});b.grid.unblock()}})}})},
actionsFormatter:function(a){var b=c.create("div",{dir:util.getUIDir(),align:util.getUIDirAlign(),"class":"tableHoverActions"}),d=[],e=config.data.permissions[security.system.manageAuthTokenRestrictions],f=config.data.systemConfiguration.defaultAuthTokenRestriction!==a.id;e&&j.forEach(this.getRowWriteActions(a),function(a){d.push(a)});e&&f&&j.forEach(this.getDeleteAction(a),function(a){d.push(a)});d.length&&(new q({options:d,label:i18n("Actions...")})).placeAt(b);return b},getRowWriteActions:function(a){var b=
this;return[{label:i18n("Copy"),onClick:function(){var c=util.clone(a);c.name="";b.showEditUrlListDialog(c,!0)}},{label:i18n("Edit"),onClick:function(){b.showEditUrlListDialog(a)}}]},getDeleteAction:function(a){var b=this;return[{label:i18n("Delete"),onClick:function(){b.confirmDelete(a)}}]}})})},"deploy/widgets/security/authorization/GroupList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/authorization/EditGroup,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.security.authorization.GroupList",[m,l],{templateString:'<div class="groupList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/group",c=[{name:i18n("Group"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name}},{name:i18n("Authorization Realm"),
formatter:function(a){return a.authorizationRealm.name}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!0,hidePagination:!1,hideExpandCollapse:!0,columns:c,tableConfigKey:"groupList",noDataMessage:i18n("No groups have been created yet.")});this.grid.placeAt(this.gridAttach);b=new k({label:i18n("Create Group"),showTitle:!1,onClick:function(){a.showEditGroupDialog()}});h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)},
destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if("com.urbancode.security.authorization.internal.InternalAuthorizationModule"===a.authorizationRealm.authorizationModuleClassName){var f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Edit")},e);c(f,"click",function(){b.showEditGroupDialog(a)})}void 0!==b.showGroupMembers&&(f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Members")},
e),c(f,"click",function(){b.showGroupMembers(a)}));f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);c(f,"click",function(){b.confirmDeletion(a)});return e},confirmDeletion:function(b){var c=this;new n({message:i18n("Are you sure you want to delete group '%s'?",b.name.escape()),action:function(){e.del({url:bootstrap.baseUrl+"security/group/"+b.id,load:function(){c.grid.refresh()},error:function(b){new a({message:util.escape(b.responseText)})}})}})},showEditGroupDialog:function(a){var c=
this,d=new f({title:a?i18n("Edit Group"):i18n("Create Group"),closable:!0,draggable:!0});(new b({group:a,callback:function(a){d.hide();d.destroy();a&&c.grid.refresh()}})).placeAt(d.containerNode);d.show()}})})},"deploy/widgets/security/authorization/EditGroup":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm","js/webext/widgets/RestSelect"],function(l,m,k,j,e){return k("deploy.widgets.security.authorization.EditGroup",[m,l],{templateString:'<div class="editGroup">  <div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var h=this;this.existingValues={};this.group?(this.existingValues=this.group,this.submitMethod="PUT",this.submitUrl=bootstrap.baseUrl+"security/group/"+this.group.id):(this.submitMethod="POST",this.submitUrl=bootstrap.baseUrl+"security/group");this.form=new j({submitUrl:this.submitUrl,submitMethod:this.submitMethod,postSubmit:function(){void 0!==h.callback&&h.callback(!0)},addData:function(c){if(h.group)c.existingId=h.group.id},onCancel:function(){void 0!==
h.callback&&h.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});if(!this.group){var d=new e({restUrl:"security/authorizationRealm",allowNone:!1,isValid:function(c){return"com.urbancode.security.authorization.internal.InternalAuthorizationModule"===c.authorizationModuleClassName},value:this.existingValues.authorizationRealmId});this.form.addField({name:"authorizationRealm",label:i18n("Authorization Realm"),required:!0,widget:d})}this.form.placeAt(this.formAttach)}})})},
"deploy/widgets/security/authorization/EditAuthorizationRealm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,deploy/widgets/security/_LdapConnectionPropertiesMixin,dojo/_base/array,dojo/_base/declare,js/webext/widgets/ColumnForm".split(","),function(l,m,k,j,e,h){return e("deploy.widgets.security.authorization.EditAuthorizationRealm",[m,l,k],{templateString:'<div class="editAuthorizationRealm">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);
var d=this;this.existingValues={properties:{}};if(this.authorizationRealm)this.existingValues=this.authorizationRealm;this.extraPropertyNames=[];this.form=new h({submitUrl:bootstrap.baseUrl+"security/authorizationRealm"+(this.authorizationRealm?"/"+this.authorizationRealm.id:""),submitMethod:this.authorizationRealm?"PUT":"POST",postSubmit:function(){void 0!==d.callback&&d.callback(!0)},addData:function(c){if(d.authorizationRealm)c.existingId=d.authorizationRealm.id;c.properties={};j.forEach(d.extraPropertyNames,
function(b){var a="property/"+b;c.properties[b]=c[a];delete c[a]});c.properties["group-mapper"]="00000000000000000000000000000000"},onCancel:function(){void 0!==d.callback&&d.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"authorizationModuleClassName",label:i18n("Type"),value:this.existingValues.authorizationModuleClassName,
type:"Select",required:!0,onChange:function(c){d.typeChanged(c)},allowedValues:[{label:i18n("LDAP or Active Directory"),value:"com.urbancode.security.authorization.ldap.LdapAuthorizationModule"},{label:i18n("Internal Storage"),value:"com.urbancode.security.authorization.internal.InternalAuthorizationModule"},{label:i18n("SSO"),value:"com.urbancode.security.authorization.sso.SingleSignOnAuthorizationModule"}]});this.typeChanged(this.existingValues.authorizationModuleClassName||"com.urbancode.security.authorization.ldap.LdapAuthorizationModule");
this.form.placeAt(this.formAttach)},typeChanged:function(d){var c=this;j.forEach(this.extraPropertyNames,function(a){c.form.hasField("property/"+a)&&c.form.removeField("property/"+a);c.form.hasField(a)&&c.form.removeField(a)});this.extraPropertyNames=[];if("com.urbancode.security.authorization.ldap.LdapAuthorizationModule"===d){this.addLdapConnectionFields([]);c.form.addField({name:"groupSearchTypeLabel",label:"",type:"Label",value:i18n("Specify how to search LDAP for roles. (See documentation for examples.)")});
this.extraPropertyNames.push("groupSearchTypeLabel");c.form.addField({name:"_groupSearchInsertPoint",type:"Invisible"});this.extraPropertyNames.push("_groupSearchInsertPoint");var d=function(a){c.form.hasField("property/group-base")&&(c.form.removeField("property/group-base"),c.form.removeField("property/group-search"),c.form.removeField("property/group-name"),c.form.removeField("property/group-search-subtree"));c.form.hasField("property/group-attribute")&&c.form.removeField("property/group-attribute");
"userAttribute"===a?(c.form.addField({type:"Invisible",name:"property/group-base",value:""}),c.form.addField({type:"Invisible",name:"property/group-search",value:""}),c.form.addField({type:"Invisible",name:"property/group-name",value:""}),c.form.addField({type:"Invisible",name:"property/group-search-subtree",value:""}),c.form.addField({name:"property/group-attribute",label:i18n("User Group Attribute"),description:i18n("The name of the attribute that contains group names in the user directory entry."),
type:"Text",required:!0,textDir:"ltr",placeholder:"cn",value:c.existingValues.properties["group-attribute"]},"_groupSearchInsertPoint")):"roleSearch"===a&&(c.form.addField({type:"Invisible",name:"property/group-attribute",value:""}),c.form.addField({name:"property/group-base",label:i18n("Group Search Base"),description:i18n("The base directory to execute group searches in."),required:!0,type:"Text",textDir:"ltr",placeholder:"ou=groups,dc=mydomain,dc=com",value:c.existingValues.properties["group-base"]},
"_groupSearchInsertPoint"),c.form.addField({name:"property/group-search",label:i18n("Group Search Filter"),description:i18n("The LDAP filter expression to use when searching for group entries. The username will be put in place of {1} in the search pattern and the full user DN will be put in place of {0}."),required:!0,type:"Text",textDir:"ltr",placeholder:"member={0}",value:c.existingValues.properties["group-search"]},"_groupSearchInsertPoint"),c.form.addField({name:"property/group-name",label:i18n("Group Name"),
description:i18n("The name of the entry that contains the user's group names in the directory entries returned by the group search. If this is not specified, no group search will take place."),required:!0,type:"Text",placeholder:"cn",value:c.existingValues.properties["group-name"]},"_groupSearchInsertPoint"),c.form.addField({name:"property/group-search-subtree",label:i18n("Search Group Subtree"),description:i18n("Search the full subtree for the groups, as opposed to a single-level search only covering groups directly inside the specified search base."),
type:"Checkbox",value:c.existingValues.properties["group-search-subtree"]||!0},"_groupSearchInsertPoint"))},b;c.existingValues.properties["group-base"]?b="roleSearch":c.existingValues.properties["group-attribute"]&&(b="userAttribute");c.form.addField({name:"groupSearchType",type:"Radio",label:"",value:b,required:!0,allowedValues:[{label:i18n("Roles in LDAP reference their members; look up group membership by searching for roles."),value:"roleSearch"},{label:i18n("User roles are defined as an attribute on that user; look up group membership using this attribute."),
value:"userAttribute"}],onChange:d},"_groupSearchInsertPoint");d(b);c.extraPropertyNames.push("groupSearchType");c.extraPropertyNames.push("group-attribute");c.extraPropertyNames.push("group-base");c.extraPropertyNames.push("group-search");c.extraPropertyNames.push("group-name");c.extraPropertyNames.push("group-search-subtree")}else"com.urbancode.security.authorization.sso.SingleSignOnAuthorizationModule"===d&&(c.form.addField({name:"property/groups-header",label:i18n("Groups Header"),description:i18n("The header name that denotes the user groups to which user will be added."),
type:"Text",placeholder:i18n("Group"),value:c.existingValues.properties["groups-header"]}),this.extraPropertyNames.push("groups-header"),c.form.addField({name:"property/groups-delim",label:i18n("Groups Delimiter"),description:i18n("A string that acts as the delimiter between groups that are passed in the headers. For example, if the user should be added to groups GROUP1 and GROUP2, and the header value was GROUP=GROUP1;GROUP=GROUP2 the delimiter would be ; Note: special regex characters such as + must be escaped with one backslash &Backslash;"),
type:"Text",textDir:"ltr",placeholder:",",value:c.existingValues.properties["groups-delim"]}),this.extraPropertyNames.push("groups-delim"),c.form.addField({name:"property/groups-regex",label:i18n("Groups Regex"),description:i18n("The regular expression to find the groups in the header value. If a capturing group is specified, only the first will be caught (per delimited string). If no capturing group is specified with parentheses, then the whole delimited string will be captured."),type:"Text",textDir:"ltr",
value:c.existingValues.properties["groups-regex"]}),this.extraPropertyNames.push("groups-regex"))}})})},"deploy/widgets/security/authorization/SelectGroupMemberForm":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/FilteringSelect,dojo/_base/declare,dojox/data/JsonRestStore,js/webext/widgets/ColumnForm".split(","),function(l,m,k,j,e,h){return j("deploy.widgets.security.authorization.SelectGroupMemberForm",[m,l],{templateString:'<div class="selectGroupMemberForm">  <div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var d=this;this.form=new h({submitUrl:this.saveUrl,preSubmit:function(){this.submitUrl=d.saveUrl+"/"+d.groupMemberSelect.item.id},postSubmit:function(){void 0!==d.callback&&d.callback(!0)},onCancel:function(){void 0!==d.callback&&d.callback(!1)}});this.groupMembersStore=new e({target:bootstrap.baseUrl+"security/user",idAttribute:"id"});this.groupMemberSelect=new k({store:this.groupMembersStore,searchAttr:"name"});this.form.addField({name:"groupMemberId",
label:i18n("Group Member"),required:!0,widget:this.groupMemberSelect});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/security/authorization/AuthorizationRealmManager":function(){define("dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/on,deploy/widgets/security/authorization/AuthorizationRealmList,deploy/widgets/security/authorization/EditAuthorizationRealm,deploy/widgets/security/authorization/GroupList,deploy/widgets/security/authorization/GroupMemberList,js/webext/widgets/GenericConfirm,js/webext/widgets/PopDown,js/webext/widgets/TwoPaneListManager,deploy/widgets/TooltipTitle".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return l("deploy.widgets.security.authorization.AuthorizationRealmManager",[f],{postCreate:function(){this.inherited(arguments);var a=this;this.addEntry({label:i18n("Authorization Realms"),action:function(){a.showAuthorizationRealms()}});this.addEntry({label:i18n("Groups"),action:function(){a.showGroups()}})},showAuthorizationRealms:function(){(new n({titleText:i18n("Authorization Realms"),tooltipText:i18n("Authorization realms are used by authentication realms to associate users with groups and to determine user access.")})).placeAt(this.detailAttach);
var a=new e;a.placeAt(this.detailAttach);this.registerDetailWidget(a)},showGroups:function(){var a=this;this.clearDetail();var b=document.createElement("div");b.className="containerLabel";b.style.padding="10px";b.innerHTML=i18n("Groups");this.detailAttach.appendChild(b);b=new d({showGroupMembers:function(b){a.showGroupMembers(b)}});b.placeAt(this.detailAttach);this.registerDetailWidget(b)},showGroupMembers:function(a){var b=this;this.clearDetail();var d=document.createElement("div");d.className="containerLabel";
d.style.padding="10px";var e=k.create("a",{innerHTML:i18n("Groups"),"class":"linkPointer"},d);j(e,"click",function(){b.showGroups()});util.appendTextSpan(d,"&nbsp;/ "+a.name.escape());this.detailAttach.appendChild(d);a=new c({group:a});a.placeAt(this.detailAttach);this.registerDetailWidget(a)},selectEntry:function(b){var c=this,d=document.createElement("div");d.className="containerLabel";d.style.padding="10px";d.innerHTML=b.name.escape();this.detailAttach.appendChild(d);d=document.createElement("div");
d.className="hr";d.style.marginTop="15px";this.detailAttach.appendChild(d);d=new a({label:i18n("Edit")});d.placeAt(this.detailAttach);b=new h({authorizationRealm:b,callback:function(a){a&&c.refresh()}});b.placeAt(d.domAttach);this.registerDetailWidget(b);this.registerDetailWidget(d)},selectNewRealm:function(){var a=this,b=document.createElement("div");b.className="containerLabel";b.style.padding="10px";b.innerHTML=i18n("Create Authorization Realm");this.detailAttach.appendChild(b);b=new h({callback:function(b){b&&
a.refresh()}});b.placeAt(this.detailAttach);this.registerDetailWidget(b)},confirmDelete:function(a){var c=this;new b({message:i18n("Are you sure you want to delete authorization realm %s?",a.name.escape()),action:function(){m.del({url:bootstrap.baseUrl+"security/authorizationRealm/"+a.id,handleAs:"json",load:function(){c.refresh()}})}})}})})},"deploy/widgets/security/authorization/AuthorizationRealmList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/authorization/EditAuthorizationRealm,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.security.authorization.AuthorizationRealmList",[m,l],{templateString:'<div class="authorizationRealmList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/authorizationRealm",c=[{name:i18n("Authorization Realm"),formatter:function(a){return a.name},orderField:"name",filterField:"name",filterType:"text",
getRawValue:function(a){return a.name}},{name:i18n("Description"),formatter:function(a){var b=a.description;"20000000000000000000000000000000"===a.id&&(b=i18n("Internal database storage."));return b},orderField:"description",filterField:"description",filterType:"text",getRawValue:function(a){return a.description}},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!0,hidePagination:!1,hideExpandCollapse:!0,columns:c,tableConfigKey:"authRealmList",
noDataMessage:i18n("No authorization realms have been created yet.")});this.grid.placeAt(this.gridAttach);b=new k({label:i18n("Create Authorization Realm"),showTitle:!1,onClick:function(){a.showEditAuthorizationRealmDialog()}});h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if("20000000000000000000000000000000"!==a.id){var f=d.create("a",
{innerHTML:i18n("Edit"),"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.showEditAuthorizationRealmDialog(a)});f=d.create("a",{innerHTML:i18n("Delete"),"class":"actionsLink linkPointer"},e);c(f,"click",function(){b.confirmDeletion(a)})}return e},confirmDeletion:function(b){var c=this;new n({message:i18n("This will delete all groups associated with this authorization realm. Are you sure you want to delete authorization realm '%s'?",b.name.escape()),action:function(){e.del({url:bootstrap.baseUrl+
"security/authorizationRealm/"+b.id,load:function(){c.grid.refresh()},error:function(b){new a({message:util.escape(b.responseText)})}})}})},showEditAuthorizationRealmDialog:function(a){var c=this,d=new f({title:i18n("Create Authorization Realm"),closable:!0,draggable:!0});(new b({authorizationRealm:a,callback:function(a){d.hide();d.destroy();a&&c.grid.refresh()}})).placeAt(d.containerNode);d.show()}})})},"deploy/widgets/security/authorization/GroupMemberList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/security/authorization/SelectGroupMemberForm,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){return j("deploy.widgets.security.authorization.GroupMemberList",[m,l],{templateString:'<div class="groupMemberList"><div data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.baseUrl+"security/group/"+this.group.id+"/members",c=[{name:i18n("User"),field:"displayName",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.displayName}},
{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new n({url:b,serverSideProcessing:!1,columns:c,tableConfigKey:"secGroupMemberList",noDataMessage:i18n("No members have been added yet."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);b=new k({label:i18n("Add Member"),showTitle:!1,onClick:function(){a.showAddGroupMemberDialog({})}});h.add(b.domNode,"idxButtonSpecial");b.placeAt(this.buttonAttach)},destroy:function(){this.inherited(arguments);
this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=d.create("a",{innerHTML:i18n("Remove"),"class":"actionsLink linkPointer"});c(e,"click",function(){b.confirmRemoval(a)});return e},confirmRemoval:function(a){var b=this;new f({message:i18n("Are you sure you want to remove member '%s'?",a.name.escape()),action:function(){e.del({url:bootstrap.baseUrl+"security/group/"+b.group.id+"/members/"+a.id,load:function(){b.grid.refresh()}})}})},showAddGroupMemberDialog:function(){var c=
this,d=new a({title:i18n("Add Group Member"),closable:!0,draggable:!0});(new b({group:c.group,saveUrl:bootstrap.baseUrl+"security/group/"+c.group.id+"/members",callback:function(a){d.hide();d.destroy();a&&c.grid.refresh()}})).placeAt(d.containerNode);d.show()}})})},"deploy/widgets/security/team/EditTeam":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/dom-geometry,dojo/on,dojo/query,dojo/mouse,dojo/dnd/Target,js/webext/widgets/ColumnForm,deploy/widgets/security/team/MemberSelector,deploy/widgets/rightPanel/RightPanelUsersAndGroups".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q){return j([m,l],{templateString:'<div class="edit-user"><div class="add-members-button" data-dojo-attach-point="buttonAttach"></div><div class="right-panel-container users-and-groups-right-panel" data-dojo-attach-point="panelAttach"></div><div class="team-list" data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this;this._loadPermissions();this.existingValues=this.team||{};e.get({url:bootstrap.baseUrl+"security/role",
handleAs:"json",load:function(b){a.roleData=b;a.showForm();a.showPanel()}})},_loadPermissions:function(){var a=config.data.permissions,b=a["Add Team Members"];this.canModify=a["Manage Security"]&&b},showForm:function(){var c=this;this.roleRows=[];this.canModify||d.add(this.domNode,"edit-team-read-only");this.form=new r({submitUrl:bootstrap.baseUrl+"security/team"+(c.team?"/"+c.team.id:""),submitMethod:c.team?"PUT":"POST",cancelLabel:null,showButtons:c.canModify,addData:function(a){a.roleMappings=
[];k.forEach(c.roleData,function(b){var c=a["roleMembers_"+b.id];delete a["roleMembers_"+b.id];c&&(k.forEach(c.userIds,function(c){a.roleMappings.push({user:c,role:b.id})}),k.forEach(c.groupIds,function(c){a.roleMappings.push({group:c,role:b.id})}))})},postSubmit:function(a){void 0!==c.callback&&c.callback(!0,!c.rightPanel.panelHidden,a.id)},onCancel:function(){void 0!==c.callback&&c.callback(!0)}});this.form.addField({name:"name",label:i18n("Name"),required:c.canModify,type:"Text",readOnly:!c.canModify,
value:this.existingValues.name});if(c.team){var e=!1;k.forEach(this.roleData,function(a){var b=new t({team:c.team,role:a,header:i18n(a.name),parentForm:c.form,parent:c}),a=c.form.addField({name:"roleMembers_"+a.id,label:!e?i18n("Role Members"):"",widget:b});c.roleRows.push(a);e=!0})}this.form.placeAt(this.formAttach);var f=this.form.saveButton;f&&(d.add(f.domNode,"idxButtonCompact team-save-button"),h.place(f.domNode,this.form.formAttach,"first"));var j=a(".dijitTextBox")[0];j&&this.form.saveButton&&
(d.add(f.domNode,"hidden"),d.add(c.domNode,"edit-team-read-only"),b(j,"click",function(){d.remove(f.domNode,"hidden");d.remove(c.domNode,"edit-team-read-only")}))},showPanel:function(){var a=this;this.rightPanel=new q({attachPoint:a.panelAttach,buttonAttachPoint:a.buttonAttach,parent:a,display:a.showRightPanel,onShow:function(){if(!d.contains(a.panelAttach,"panel-with-scroll-bars")||!d.contains(a.panelAttach,"panel-with-no-scroll-bars"))85<c.position(a.panelAttach).w?d.add(a.domNode,"panel-with-scroll-bars"):
d.add(a.domNode,"panel-with-no-scroll-bars");d.add(a.domNode,"right-panel-show")},onHideExtra:function(){d.remove(a.domNode,"right-panel-show")}});this.rightPanel.isHidden()||d.add(a.domNode,"right-panel-show");24>c.position(a.domNode).y&&d.add(a.domNode,"right-panel-top");window&&b(window,"scroll",function(){if(!a.rightPanel.isHidden())try{var b=c.position(a.domNode);b&&24>b.y?d.contains(a.domNode,"right-panel-top")||d.add(a.domNode,"right-panel-top"):d.contains(a.domNode,"right-panel-top")&&d.remove(a.domNode,
"right-panel-top")}catch(e){}});this.showPanelMinimizer()},showPanelMinimizer:function(){var a=this,c=h.create("div",{className:"right-panel-role-minimizer-container hide-minimizer"},this.panelAttach),e=h.create("div",{className:"inline-block right-panel-role-minimizer-text containerLabel",innerHTML:i18n("Hover here to minimize roles")},c);this.dndListener=new n(h.create("div"),{onDndStart:function(){d.remove(c,"hide-minimizer")},onDndDrop:function(){d.add(c,"hide-minimizer");a.domNode&&d.remove(a.domNode,
"minimize-roles")},onDndCancel:function(){d.add(c,"hide-minimizer");a.domNode&&d.remove(a.domNode,"minimize-roles")}});b(e,f.enter,function(){d.add(a.domNode,"minimize-roles");d.add(c,"hide-minimizer")})}})})},"dojo/dnd/Target":function(){define(["../_base/declare","../dom-class","./Source"],function(l,m,k){return l("dojo.dnd.Target",k,{constructor:function(){this.isSource=!1;m.remove(this.node,"dojoDndSource")}})})},"deploy/widgets/security/team/MemberSelector":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom-construct,dojo/dom-class,dojo/on,dojo/query,dojo/mouse,dojo/dnd/Source,deploy/widgets/Popup,js/webext/widgets/DialogMultiSelect,js/webext/widgets/GenericConfirm,deploy/widgets/security/role/RoleResourceTypeManager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o){return e([m,l],{templateString:'<div class="team-member-selector"><div class="selector-header-container" data-dojo-attach-point="headerContainerAttach"><div class="selector-header-expand linkPointer inline-block" data-dojo-attach-point="expandAttach"></div><div class="selector-header inline-block" data-dojo-attach-point="headerAttach"></div><div class="selector-button inline-block" data-dojo-attach-point="buttonAttach"></div></div><div class="selector-member-container" data-dojo-attach-point="containerAttach"><div class="selector-users" data-dojo-attach-point="usersAttach"><div class="selector-label inline-block" data-dojo-attach-point="userLabelAttach"></div></div><div class="selector-groups" data-dojo-attach-point="groupsAttach"><div class="selector-label inline-block" data-dojo-attach-point="groupLabelAttach"></div></div></div><div class="selector-permission-container" data-dojo-attach-point="permissionAttach"></div>',
rowClass:"labelsAndValues-row team-role-row",postCreate:function(){this.inherited(arguments);this._loadPermissions();this._initializeData();this.showMembers();this._populateHeader();this._setUpDnd()},_loadPermissions:function(){var a=config.data.permissions;this.canAdd=a["Add Team Members"];this.canEdit=a["Manage Security"];this.canModify=this.canAdd||this.canEdit},_initializeData:function(){this.userIds=[];this.groupIds=[];this.ids={user:{},group:{}};this.usersToRemove=[];this.groupsToRemove=[];
this.boxesToRemove=[];this.permissions={};this.userPopups={};this.groupPopups={};this.edit=!1},_populateHeader:function(){if(this.header)this.headerAttach.innerHTML=this.header.escape();(0<this.userIds.length||0<this.groupIds.length)&&this.canModify&&this._createEdit();this._createPermissions();this.canModify&&this._createDialog();this.popuplateContainerLabels()},popuplateContainerLabels:function(){this.userLabelAttach.innerHTML=i18n("Users");this.groupLabelAttach.innerHTML=i18n("Groups")},_createEdit:function(){var a=
this,e=new k({label:i18n("Edit")}),f=new k({label:i18n("Save")}),h=new k({label:i18n("Cancel")});c.add(e.domNode,"idxButtonCompact");c.add(f.domNode,"idxButtonSpecial idxButtonCompact hidden");c.add(h.domNode,"idxButtonCompact hidden");var l=function(){a.edit=!1;c.add(f.domNode,"hidden");c.add(h.domNode,"hidden");c.remove(a.memberSelect.domNode,"hidden");c.remove(e.domNode,"hidden");c.remove(a.domNode,"team-edit-mode")};b(e,"click",function(){a.edit=!0;c.remove(f.domNode,"hidden");c.remove(h.domNode,
"hidden");c.add(a.memberSelect.domNode,"hidden");c.add(e.domNode,"hidden");c.add(a.domNode,"team-edit-mode")});b(f,"click",function(){l();j.forEach(a.usersToRemove,function(b){util.removeFromArray(a.userIds,b)});j.forEach(a.groupsToRemove,function(b){util.removeFromArray(a.groupIds,b)});a.onChange()});b(h,"click",function(){l();j.forEach(a.boxesToRemove,function(a){c.remove(a,"hidden")})});d.place(e.domNode,this.buttonAttach);d.place(f.domNode,this.buttonAttach);d.place(h.domNode,this.buttonAttach)},
_createPermissions:function(){var a=this,e=d.create("div",{className:"team-expander",value:!0},this.expandAttach);c.add(e,"team-collapsed");c.add(a.permissionAttach,"hide-permissions");var f=function(){c.add(a.permissionAttach,"hide-permissions");c.remove(e,"team-expanded");c.remove(e,"team-collapsed");e.value?(a.permissions[a.role.id]||a._createPermissionsTable(),e.value=!1,c.add(e,"team-expanded"),c.remove(a.permissionAttach,"hide-permissions")):(e.value=!0,c.add(e,"team-collapsed"))};b(this.expandAttach,
"click",function(){f()});b(this.headerContainerAttach,"dblclick",function(){f()})},_createPermissionsTable:function(){var a=new o({role:this.role,header:i18n("Permissions granted to members of role: %s",this.role.name.escape())});d.place(a.domNode,this.permissionAttach);this.permissions[this.role.id]=a;if(this.canEdit){var b=d.create("div",{className:"edit-role-permissions-note"});d.create("div",{className:"inline-block required",innerHTML:"*"},b);d.create("div",{className:"inline-block description-text",
innerHTML:i18n("Editing these permissions affects this role in all teams!")},b);d.place(b,a.detailContainerAttach,"first")}},_createDialog:function(){var a=this;this.memberSelect=new t({noSelectionsLabel:i18n("Add"),url:bootstrap.baseUrl+"security/team/"+a.team.id+"/roleMappings/"+a.role.id+"/validMembers",getLabel:function(a){return a.name},getValue:function(a){return a.type+"#"+a.id}});c.add(this.memberSelect.domNode,"dijitButton idxButtonCompact member-select-button-compact");this.memberSelect.placeAt(a.buttonAttach);
b(this.memberSelect.domNode,f.enter,function(){c.add(a.memberSelect.domNode,"dijitHover dijitButtonHover")});b(this.memberSelect.domNode,f.leave,function(){c.remove(a.memberSelect.domNode,"dijitHover dijitButtonHover")});this.memberSelect.on("close",function(){var b=a.memberSelect.get("items");j.forEach(b,function(b){a.showMember(b,b.type)});a.memberSelect.set("value","");a.onChange()})},_setUpDnd:function(){var a=this;this.dnds=new n(this.domNode,{onDropExternal:function(b,c){var d=b.value,e=!1;
j.forEach(c,function(b){var c=(b=b.value)?b.id:null;"user"===d&&!a.ids.user[c]?(a.showMember(b,d),e=!0):"group"===d&&!a.ids.group[c]&&(a.showMember(b,d),e=!0)});if(d&&e)a.onChange()}})},showMembers:function(){var a=this;j.forEach(a.team.roleMappings,function(b){b.role.id===a.role.id&&(b.user?a.showMember(b.user,"user"):b.group&&a.showMember(b.group,"group"))})},showMember:function(e,h){var k=this,l=!1;"user"===h?-1===this.userIds.indexOf(e.id)&&(l=!0,this.userIds.push(e.id),this.ids.user[e.id]=!0):
-1===this.groupIds.indexOf(e.id)&&(l=!0,this.groupIds.push(e.id),this.ids.group[e.id]=!0);if(l){var l=e.name,m=d.create("div",{"class":"team-member-block inline-block member-box-"+e.id,innerHTML:l.escape()});b(m,f.enter,function(){var d=a(".member-box-"+e.id);j.forEach(d,function(a){c.add(a,"hover")});b(m,f.leave,function(){j.forEach(d,function(a){c.remove(a,"hover")})})});"user"===h?d.place(m,k.usersAttach):(this.canModify&&!k.groupPopups[e.id]&&(k.groupPopups[e.id]=b(m,f.enter,function(){k._createGroupPopup(e.id,
m)})),d.place(m,k.groupsAttach));this.canEdit&&(l=d.create("div",{className:"inline-block linkPointer remove-team-member icon_delete_red",title:i18n("Remove %s",l)}),d.place(l,m,"first"),b(l,"click",function(){k.edit?(c.add(m,"hidden"),k.boxesToRemove.push(m),"user"===h?k.usersToRemove.push(e.id):k.groupsToRemove.push(e.id)):new q({message:i18n("Are you sure you want to remove %1 from the %2 role?",util.escape(e.name),util.escape(k.get("role").name)),forceRawMessages:!0,action:function(){d.destroy(m);
"user"===h?util.removeFromArray(k.userIds,e.id):util.removeFromArray(k.groupIds,e.id);k.onChange()}})}))}},_createGroupPopup:function(a,b){this.groupPopups[a]&&(h.get({url:bootstrap.baseUrl+"security/group/"+a+"/members",handleAs:"json",load:function(a){var c=d.create("div");d.create("div",{className:"group-popup-title",innerHTML:i18n("Group Members (%s)",a.length)},c);j.forEach(a,function(a){var b=d.create("div",{className:"group-member-line"},c);d.create("div",{className:"team-member-label",innerHTML:a.displayName.escape()},
b)});a=new r({attachPoint:b,contents:c});this._cursorIsOverElement(b)&&a.externalShow()}.bind(this)}),this.groupPopups[a].remove())},_cursorIsOverElement:function(b){var c=a(":hover",b.parentElement);return 0<c.length&&c[0]===b},_getValueAttr:function(){return{userIds:this.userIds,groupIds:this.groupIds}},onChange:function(){this.parentForm&&!this.edit&&this.parentForm.submitForm()}})})},"deploy/widgets/security/team/SecuredObjects":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Select,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/_base/array,dojo/dom-class,dojo/dom-geometry,dojo/dom-construct,dojo/on,js/webext/widgets/table/TreeTable,js/webext/widgets/DialogMultiSelect,js/webext/widgets/form/MenuButton,js/webext/widgets/RestSelect,js/webext/widgets/ColumnForm,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,deploy/widgets/Formatters".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){return e([m,l],{templateString:'<div><div data-dojo-attach-point="toolbarAttach"><div data-dojo-attach-point="viewBox" class="object-view-box inline-block"><b><div data-dojo-attach-point="objectLabel" style="margin-bottom: 5px;"></div></b><div data-dojo-attach-point="secureResourceTypeAttach" class="inlineBlock"  style="margin-'+(b.isBodyLtr()?"left":"right")+': -5px;"></div></div><div data-dojo-attach-point="addBox" class="object-view-box inline-block" style="margin-'+
(b.isBodyLtr()?"left":"right")+': 25px;"><b><div data-dojo-attach-point="addLabel" style="margin-bottom: 5px;"></div></b><b><div data-dojo-attach-point="typeLabel" class="inlineBlock" style="margin-'+(b.isBodyLtr()?"right":"left")+': 10px;"></div></b><div data-dojo-attach-point="typeSelectAttach" class="inlineBlock" style="margin: '+(b.isBodyLtr()?"0 4px -9px 0":"0 0 -9px 4px")+';"></div><div data-dojo-attach-point="addSecureResourceAttach" class="inlineBlock"></div></div></div><div data-dojo-attach-point="tableAttach"></div></div>',
postCreate:function(){this._loadPermissions();this._loadMappings()},_loadPermissions:function(){this.canEdit=config.data.permissions["Manage Security"]},_loadMappings:function(){var a=this;this.addLabel.innerHTML=i18n("Add Object Mapping: ");this.typeLabel.innerHTML=i18n("Type: ");this.objectLabel.innerHTML=i18n("View: ");h.get({url:bootstrap.baseUrl+"security/resourceType",handleAs:"json",load:function(b){var c=[],b=d.filter(b,function(a){return"Web UI"!==a.name&&"Server Configuration"!==a.name&&
"Server"!==a.name}),e=util.getCookie("teamResourceMapping");if(!e)e=b[0].name;a.resourceType=e;d.forEach(b,function(b){c.push({label:i18n(b.name),onClick:function(){util.setCookie("teamResourceMapping",b.name);a.secureResourceType.set("label",i18n(b.name));a.resourceType=b.name;a.getUnmappedUrl=bootstrap.restUrl+"security/team/"+a.team+"/unmappedResources/"+a.resourceType;a.addSecureResource.url=a.getUnmappedUrl;a.refreshTable();a.refreshTypeSelect();a.addSecureResource._setValueAttr()}})});a.secureResourceType=
new t({label:i18n(e),options:c});a.secureResourceType.placeAt(a.secureResourceTypeAttach);a.showTable();a.showForm()}})},showTable:function(){var b=this,c=[{name:i18n("Name"),field:"name",formatter:function(a,b){return b=a.name?a.path?v.resourceLinkFormatter(a):a.name:a.resource.name},orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){var b="";return b=a.name?a.name:a.resource.name}},{name:i18n("Types"),field:"types",formatter:function(a){return b.formatResourceRoles(a)}}];
this.table=new n({url:bootstrap.restUrl+"security/team/"+b.team+"/resourceMappings/"+b.resourceType,columns:c,serverSideProcessing:!1,orderField:"name",tableConfigKey:"securedObjectsList",selectable:b.canEdit,rowsPerPage:10,hidePagination:!1,isSelectable:function(){return!0},getTreeNodeId:function(a){var b=a.id;if(a.resource&&a.resource.id)b=a.resource.id;return b},getChildUrl:function(a){return bootstrap.restUrl+"security/team/"+b.team+"/resourceMappings/"+b.resourceType+"?parent="+a.id},hasChildren:function(a){return a.hasChildren}});
this.table.placeAt(this.tableAttach);a.place(this.toolbarAttach,this.table.aboveTreeOptions);if(this.canEdit){var d=new t({options:[{label:i18n("Remove From Team"),onClick:function(){b.removeSelectedItems(b.table.getSelectedItems())}}],label:i18n("Actions...")});d.placeAt(this.addSecureResourceAttach);c=function(){var a=b.table.getSelectedItems().length;0===a?(d.set("label",i18n("Actions...")),d.set("disabled",!0)):(d.set("label",i18n("Actions... (%s)",a)),d.set("disabled",!1))};this.table.on("selectItem",
c);this.table.on("deselectItem",c);this.table.on("displayTable",c)}},getChildren:function(a){var b=this,c=[];d.forEach(a,function(a){if(a.children){var e=b.getChildren(a.children);d.forEach(e,function(a){c.push(a)})}e="";if(a.resource)e=a.resource.id;else if(a.id)e=a.id;c.push(e)});return c},removeSelectedItems:function(a){var b=this,c=[],e={};d.forEach(a,function(a){var f="";if(a.resource)f=a.resource.id;else if(a.id)f=a.id;a.children&&(a=b.getChildren(a.children),d.forEach(a,function(a){e[a]||(e[a]=
!0,c.push(a))}));e[f]||(e[f]=!0,c.push(f))});var f={resources:c};if("standard"!==b.typeSelect.value)f.resourceRole=b.typeSelect.value;a.length?new w({message:i18n("Are you sure you want to remove the selected objects from this team?"),action:function(){h.del({url:bootstrap.baseUrl+"security/team/"+b.team+"/batchResourceMappings",headers:{"Content-Type":"application/json"},putData:JSON.stringify(f),load:function(){b.table.refresh()},error:function(a){(new s({title:i18n("Error removing object"),message:a.responseText})).startup();
b.table.unblock();b.table.refresh()}})}}):(new s({message:i18n("Please select at least one resource to remove.")})).startup()},showForm:function(){var b=this;this.form=new o({submitUrl:bootstrap.baseUrl+"security/team/"+b.team+"/batchResourceMappings",cancelLabel:null,showButtons:!1,addData:function(a){a.resources=a.resources.split(",");a.resourceRole=b.typeSelect.get("value");if("standard"===a.resourceRole)a.resourceRole=null},postSubmit:function(){b.table.refresh();b.addSecureResource._setValueAttr()}});
this.getUnmappedUrl=bootstrap.restUrl+"security/team/"+b.team+"/unmappedResources/"+b.resourceType;this.addSecureResource=new r({url:b.getUnmappedUrl,getLabel:function(a){return a.name},getValue:function(a){return a.id},onClose:function(){b.form.submitForm()},noSelectionsLabel:i18n("None Selected")});this.form.addField({name:"resources",widget:b.addSecureResource});this.typeSelect=new k;this.typeSelect.on("change",function(){b.addSecureResource.url=b.getUnmappedUrl;if("standard"!==b.typeSelect.value)b.addSecureResource.url=
b.getUnmappedUrl+"/"+b.typeSelect.value});this.typeSelect.placeAt(this.typeSelectAttach);this.addButton=new j({label:i18n("Add"),onClick:function(){b.addSecureResource.fieldAttach.onclick()}});c.add(this.addButton.domNode,"idxButtonSpecial idxButtonCompact");this.canEdit&&a.place(this.addButton.domNode,this.addSecureResourceAttach,"first");this.refreshTypeSelect()},refreshTable:function(){this.table.url=bootstrap.restUrl+"security/team/"+this.team+"/resourceMappings/"+this.resourceType;this.table.refresh()},
destroy:function(){this.inherited(arguments);this.table.destroy()},refreshTypeSelect:function(){var a=this;h.get({url:bootstrap.baseUrl+"security/resourceType/"+a.resourceType+"/resourceRoles",handleAs:"json",load:function(b){var c=a.typeSelect.getOptions();d.forEach(c,function(b){a.typeSelect.removeOption(b.value)});a.typeSelect.addOption({value:"standard",label:i18n("Standard "+a.resourceType)});d.forEach(b,function(b){a.typeSelect.addOption({value:b.id,label:util.escape(b.name)})})}})},formatResourceRoles:function(a){var b=
this,c="";if(a.resourceRoles){var e=!0;d.forEach(a.resourceRoles,function(a){e||(c+=", ");e=!1;var d="",d=null!==a?util.escape(a.name):d+i18n("Standard "+b.resourceType);c+=d})}return c}})})},"deploy/widgets/security/team/TeamManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/dom,dojo/dom-construct,dojo/dom-class,dojo/on,dijit/form/Button,deploy/widgets/security/team/EditTeam,deploy/widgets/security/team/SecuredObjects,deploy/widgets/TooltipTitle,js/webext/widgets/GenericConfirm,js/webext/widgets/TwoPaneListManager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return m([r],{postCreate:function(){this.inherited(arguments);this._loadPermissions();this.rightPanel=!1;this.showList();this.initialSelect&&(this.clearSelection(),this.selectEntry(this.initialSelect))},_loadPermissions:function(){var a=config.data.permissions;this.canAdd=a["Add Team Members"];this.url=(this.canEdit=a["Manage Security"])?bootstrap.baseUrl+"security/team":bootstrap.restUrl+"security/getTeamsForCurrentUser/"},showList:function(a){var b=this;this.defaultSelectionId=
a;k.get({url:b.url,handleAs:"json",load:function(a){var c=0;l.forEach(a,function(a){c++;var d=e.create("div",{style:{position:"relative"}}),f=e.create("div",{className:"twoPaneActionIcons"},d);if("20000000000000000000000100000000"!==a.id&&b.canEdit)e.create("div",{className:"inlineBlock vAlignMiddle cursorPointer margin2Left iconMinus"},f).onclick=function(c){util.cancelBubble(c);b.confirmDelete(a)};var h=a.name.escape();"System Team"===h&&(h=i18n("System Team"));e.place(e.create("div",{className:"twoPaneEntryLabel",
innerHTML:h}),f,"after");b.addEntry({id:a.id,domNode:d,action:function(){b.selectEntry(a)}})});b.canEdit&&(a=e.create("div"),e.create("div",{className:"vAlignMiddle inlineBlock iconPlus"},a),e.create("div",{innerHTML:i18n("Create Team"),className:"vAlignMiddle inlineBlock margin5Left"},a),b.addEntry({id:null,domNode:a,action:function(){b.selectNewTeam();h.add(b.domNode,"create-new-team")}}));0===c&&e.create("div",{className:"containerLabel",innerHTML:i18n("You are currently not in any teams")},b.detailAttach)}})},
refresh:function(a){this._loadPermissions();if(this.selectedEntry&&this.selectedEntry.id)a=this.selectedEntry.id;this.clearDetail();this.clearList();this.showList(a)},selectEntry:function(a){var c=this;h.contains(this.domNode,"create-new-team")&&h.remove(this.domNode,"create-new-team");if("System Team"===a.name.escape())a.name=i18n("System Team");(new f({titleText:a.name.escape(),tooltipText:i18n("Use the Add Users and Groups button to drag users and groups onto roles. You can also add users directly to roles by using the Add button associated with the role.")})).placeAt(this.detailAttach);
k.get({url:bootstrap.baseUrl+"security/team/"+a.id,handleAs:"json",load:function(d){d=new b({team:d,showRightPanel:c.rightPanel,callback:function(a,b){c.rightPanel=b;a&&c.refresh()}});d.placeAt(c.detailAttach);c.registerDetailWidget(d);c.showTeamObjects(a)}})},selectNewTeam:function(){var a=this;e.create("div",{className:"containerLabel",innerHTML:i18n("Create Team"),style:{padding:"10px"}},this.detailAttach);var c=new b({callback:function(b,c,d){b&&a.refresh(d)}});c.placeAt(this.detailAttach);this.registerDetailWidget(c)},
confirmDelete:function(a){var b=this;new n({message:i18n("Are you sure you want to delete team %s?",a.name),action:function(){k.del({url:bootstrap.baseUrl+"security/team/"+a.id,handleAs:"json",load:function(){b.refresh()}})}})},showTeamObjects:function(b){this.detailAttach.appendChild(e.create("div",{className:"team-object-mapping-divider"}));(new f({titleText:i18n("Team Object Mappings"),tooltipText:i18n("When a team is assigned to an object, only team members with the appropriate permissions can interact with the affected object.")})).placeAt(this.detailAttach);
this.securedObjects=new a({team:b.id});this.securedObjects.placeAt(this.detailAttach);this.registerDetailWidget(this.securedObjects)}})})},"deploy/widgets/security/EditUserPreferences":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/Alert,js/webext/widgets/ColumnForm,js/webext/widgets/RestSelect".split(","),function(l,m,k,j,e,h,d){return k("deploy.widgets.security.EditUserPreferences",[m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var c=this;j.get({url:bootstrap.restUrl+"security/userPreferences",handleAs:"json",load:function(b){var a=new h({submitUrl:bootstrap.restUrl+"security/userPreferences",submitMethod:"PUT",cancelLabel:null,postSubmit:function(){new e({message:i18n("Preferences saved successfully."),onClose:function(){location.reload(!0)}})}}),f=null;if(b.hasUserDefinedLocale)f=b.locale;f=new d({restUrl:bootstrap.restUrl+"security/userPreferences/availableLocales",getLabel:function(a){return a.displayName},
getValue:function(a){return a.value},allowNone:!0,noneLabel:i18n("No Default Set"),escapeHTMLLabel:!1,value:f});a.addField({name:"locale",label:i18n("Locale"),widget:f},"_type");f=new d({restUrl:bootstrap.restUrl+"security/userPreferences/availableDatePatterns",getLabel:function(a){return a},getValue:function(a){return a},allowNone:!0,noneLabel:i18n("Default for Locale"),value:b.datePattern});a.addField({name:"datePattern",label:i18n("Date Format"),widget:f},"_type");f=new d({restUrl:bootstrap.restUrl+
"security/userPreferences/availableTimePatterns",getLabel:function(a){return a},getValue:function(a){return a},allowNone:!0,noneLabel:i18n("Default for Locale"),value:b.timePattern});a.addField({name:"timePattern",label:i18n("Time Format"),widget:f},"_type");f=new d({restUrl:bootstrap.restUrl+"security/userPreferences/availableBTDValues",getLabel:function(a){return i18n(a)},getValue:function(a){return a},allowNone:!0,noneLabel:i18n("Default"),value:b.btdValue});a.addField({name:"btdValue",label:i18n("Base Text Direction"),
widget:f},"_type");f=new d({restUrl:bootstrap.restUrl+"security/userPreferences/availableCalendarValues",getLabel:function(a){return i18n(a)},getValue:function(a){return a},allowNone:!1,noneLabel:i18n("Default"),value:b.calendar});a.addField({name:"calendar",label:i18n("Calendar"),widget:f},"_type");a.addField({name:"_defaultTeamMappingInsert",type:"Invisible"});a.addField({name:"defaultTeamMappingType",label:i18n("Default Teams for New Objects"),description:i18n("This determines which teams should be added to new objects by default. Normally, all teams where you have permission to create objects are automatically selected for new objects you're creating, but you can override this behavior if you belong to many teams or do not want to have any teams appear by default."),
type:"SELECT",value:b.defaultTeamMappingType,allowedValues:[{label:i18n("All Available Teams"),value:"DEFAULT_TEAM_MAPPINGS_ALL"},{label:i18n("Specific Teams"),value:"DEFAULT_TEAM_MAPPINGS_SPECIFIC_TEAMS"},{label:i18n("None"),value:"DEFAULT_TEAM_MAPPINGS_NONE"}],onChange:function(d){c.showOrHideTeamSelect(a,d,b.defaultTeamMappings)}},"_defaultTeamMappingInsert");c.showOrHideTeamSelect(a,b.defaultTeamMappingType,b.defaultTeamMappings);a.placeAt(c.formAttach)}})},showOrHideTeamSelect:function(c,b,a){"DEFAULT_TEAM_MAPPINGS_SPECIFIC_TEAMS"===
b?(b={},config.data.permissions[security.system.manageSecurity]||(b={filterFields:["username"],filterValue_username:[bootstrap.username],filterType_username:"eq",filterClass_username:"String"}),c.addField({name:"defaultTeamMappings",label:i18n("Choose Default Team(s)"),type:"TableFilterMultiSelect",required:!0,defaultQuery:b,url:bootstrap.baseUrl+"security/team",value:a},"_defaultTeamMappingInsert")):c.hasField("defaultTeamMappings")&&c.removeField("defaultTeamMappings")}})})},"deploy/widgets/security/role/RoleManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,deploy/widgets/security/role/EditRole,deploy/widgets/security/role/RoleResourceTypeManager,dojo/dom-construct,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/TwoPaneListManager".split(","),
function(l,m,k,j,e,h,d,c,b){return m([b],{postCreate:function(){this.overrideListWidth="190px";this.inherited(arguments);this.showList("NONE")},showList:function(a){var b=this;this.defaultSelectionId=a;k.get({url:bootstrap.baseUrl+"security/role",handleAs:"json",load:function(a){var c=0;l.forEach(a,function(a){c++;var d=document.createElement("div");d.style.position="relative";var e=document.createElement("div");e.className="twoPaneEntryLabel";e.innerHTML="Administrator"===a.name.escape()?i18n(a.name.escape()):
a.name.escape();var j=document.createElement("div");j.className="twoPaneActionIcons";var k=document.createElement("div");k.className="inlineBlock vAlignMiddle cursorPointer margin2Left iconPencil";k.onclick=function(c){util.cancelBubble(c);b.showEditRole(a)};j.appendChild(k);if(a.isDeletable)k=document.createElement("div"),k.className="inlineBlock vAlignMiddle cursorPointer margin2Left iconMinus",k.onclick=function(c){util.cancelBubble(c);b.getProcessesRequiringRole(a)},j.appendChild(k);d.appendChild(j);
h.place(e,j,"after");1===c&&b.selectEntry(a);b.addEntry({id:a.id,domNode:d,action:function(){b.selectEntry(a)}})});var a=document.createElement("div"),d=document.createElement("div");d.className="vAlignMiddle inlineBlock iconPlus";a.appendChild(d);d=document.createElement("div");d.innerHTML=i18n("Create Role");d.className="vAlignMiddle inlineBlock margin5Left";a.appendChild(d);b.addEntry({id:null,domNode:a,action:function(){b.showEditRole()}})}})},refresh:function(a){var b=a;if(!a&&this.selectedEntry)b=
this.selectedEntry.id;this.clearDetail();this.clearList();this.showList(b)},selectEntry:function(a){a=new e({role:a,overrideListWidth:"165px"});a.placeAt(this.detailAttach);this.registerDetailWidget(a)},showEditRole:function(a){var b=this,c=new d({title:a?i18n("Edit Role"):i18n("Create User Role"),closable:!0,draggable:!0});(new j({role:a,callback:function(a,d){a&&(c.hide(),c.destroy(),b.refresh(d))}})).placeAt(c.containerNode);c.show();a||this.clearSelection()},confirmDelete:function(a,b){var d=
this;new c({message:b,forceRawMessages:!0,action:function(){k.del({url:bootstrap.baseUrl+"security/role/"+a.id,handleAs:"json",load:function(){d.refresh()}})}})},getProcessesRequiringRole:function(a){var b=this,c=i18n("Are you sure you want to delete %s? This will permanently delete it from the system.",util.escape(a.name));k.get({url:bootstrap.restUrl+"security/role/"+a.id+"/processes",handleAs:"json",load:function(d){if(d.componentProcesses&&0<d.componentProcesses.length){var e=i18n("The following component processes require this role in order to run:")+
"<br/>";l.forEach(d.componentProcesses,function(a){e=e+util.escape(a)+"<br/>"});c=e+"<br/>"+c}if(d.applicationProcesses&&0<d.applicationProcesses.length){var h=i18n("The following application processes require this role in order to run:")+"<br/>";l.forEach(d.applicationProcesses,function(a){h=h+util.escape(a)+"<br/>"});c=h+"<br/>"+c}b.confirmDelete(a,c)},error:function(){c+="<br/>"+i18n("It is unknown if the following role is required by any processes");b.confirmDelete(a,c)}})}})})},"deploy/widgets/security/role/EditRole":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,js/webext/widgets/ColumnForm".split(","),
function(l,m,k,j,e,h){return j([m,l],{templateString:'<div class="editUser">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var d=this;this.existingValues={};if(this.role)this.existingValues=this.role;this.form=new h({submitUrl:bootstrap.baseUrl+"security/role"+(this.role?"/"+this.role.id:""),submitMethod:this.role?"PUT":"POST",cancelLabel:null,postSubmit:function(c){void 0!==d.callback&&d.callback(!0,c.id)},onCancel:function(){void 0!==d.callback&&
d.callback()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.placeAt(this.formAttach)}})})},"deploy/widgets/status/EditStatus":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/ColumnForm","js/webext/widgets/RestSelect"],function(l,m,k,j,e){return k("deploy.widgets.status.EditStatus",
[m,l],{templateString:'<div class="editStatus">  <div data-dojo-attach-point="formAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=this;this.existingValues={};if(this.status)this.existingValues=this.status;this.form=new j({submitUrl:bootstrap.restUrl+"deploy/status",addData:function(c){if(h.status)c.existingId=h.status.id;c.type=h.type},postSubmit:function(){void 0!==h.callback&&h.callback()},onCancel:function(){void 0!==h.callback&&h.callback()}});this.form.addField({name:"name",
label:i18n("Name"),required:!0,readOnly:!!this.status,type:"Text",value:this.existingValues.name});this.form.addField({name:"description",label:i18n("Description"),type:"Text",value:this.existingValues.description});this.form.addField({name:"color",label:i18n("Color"),type:"ColorPicker",value:this.existingValues.color});this.form.addField({name:"unique",label:i18n("Unique"),type:"Checkbox",description:i18n("When this box is checked, this status can only be used once for any component. For inventory statuses, that means an application of this status will remove it for any other versions in the environment or resource inventory. For version/snapshot statuses, the status can only exist on one version/snapshot at the same time."),
value:this.existingValues.unique});if("version"===this.type||"snapshot"===this.type){var d=new e({restUrl:bootstrap.baseUrl+"security/role",value:this.existingValues?this.existingValues.roleId:null,noneValue:"No roles found"});this.form.addField({name:"roleId",label:i18n("Required Role"),description:i18n("A role which a user must belong to in the component to add this status to a version."),required:!1,widget:d})}this.form.placeAt(this.formAttach)}})})},"deploy/widgets/status/StatusList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/status/EditStatus,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t){return e("deploy.widgets.status.StatusList",[m,l],{templateString:'<div class="statusList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"deploy/status/"+this.type+"Statuses",c=[{name:i18n("Name"),formatter:function(a,b,c){d.add(c,"statusBox");c.style.backgroundColor=a.color;if(util.isDarkColor(a.color))c.style.color=
"#FFF";return i18n(a.name)}},{name:i18n("Unique"),field:"unique",formatter:function(a){return i18n(a.unique.toString())}}];("version"===this.type||"snapshot"===this.type)&&c.push({name:i18n("Required Role"),field:"roleName"});c.push({name:i18n("Description"),field:"description",formatter:function(a){return i18n(a.description)}});c.push({name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this});this.grid=new t({url:b,serverSideProcessing:!1,columns:c,tableConfigKey:"statusList",noDataMessage:i18n("No statuses found."),
hidePagination:!1,hideExpandCollapse:!0});this.grid.placeAt(this.gridAttach);config.data.permissions[security.system.manageStatuses]&&(b=new k({label:i18n("Add Status"),showTitle:!1,onClick:function(){a.showEditStatusForm()}}),d.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var d=this.parentWidget,e=c.create("div");if(config.data.permissions[security.system.manageStatuses]){var f=c.create("a",
{"class":"actionsLink linkPointer",innerHTML:i18n("Edit")},e);b(f,"click",function(){d.showEditStatusForm(a)});f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);b(f,"click",function(){d.confirmDelete(a)})}return e},confirmDelete:function(a){var b=this;new r({message:i18n("Are you sure you want to delete status %s?",a.name.escape()),action:function(){b.grid.block();h.del({url:bootstrap.restUrl+"deploy/status/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()},
error:function(a){a.responseText&&new f({message:util.escape(a.responseText)});b.grid.unblock();b.grid.refresh()}})}})},showEditStatusForm:function(b){var c=this,d=new n({title:b?i18n("Edit Status"):i18n("Add Status"),closable:!0,draggable:!0});(new a({status:b,type:this.type,callback:function(){d.hide();d.destroy();c.grid.refresh()}})).placeAt(d.containerNode);d.show()}})})},"deploy/widgets/applicationProcess/ApplicationProcessInventoryChanges":function(){define(["dijit/_TemplatedMixin","dijit/_Widget",
"dojo/_base/declare","deploy/widgets/Formatters","js/webext/widgets/table/TreeTable"],function(l,m,k,j,e){return k("deploy.widgets.applicationProcess.ApplicationProcessInventoryChanges",[m,l],{templateString:'<div class="applicationProcessInventoryChanges"><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var h=bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcess.id+"/"+this.applicationProcessVersion+"/inventoryChanges",d=[{name:i18n("Component"),
formatter:function(c,b,a){return j.componentLinkFormatter(c.component,b,a)}},{name:i18n("Change Type"),formatter:function(c,b,a){a.style.textAlign="center";b=document.createElement("img");b.src="ADD"===c.changeType?bootstrap.webextUrl+"images/webext/icons/icon_plus.gif":bootstrap.webextUrl+"images/webext/icons/icon_minus.gif";return b}},{name:i18n("Status"),formatter:function(c,b,a){return j.statusFormatter(c.status,b,a)}},{name:i18n("Selection"),formatter:function(c){var b="";"ALL_WITHOUT_STATUS"===
c.changeSelection?b=i18n("All Without Status (Install/Upgrade)"):"ALL_WITH_STATUS"===c.changeSelection?b=i18n("All With Status (Complete Uninstall)"):"ALL_SELECTED"===c.changeSelection?b=i18n("All Selected Versions (Manual Install)"):"ALL_SELECTED_WITH_STATUS"===c.changeSelection?b=i18n("All Selected Versions With Status (Manual Uninstall)"):"ALL_NOT_IN_SNAPSHOT"===c.changeSelection&&(b=i18n("All Not in Snapshot (Rollback)"));return b}},{name:i18n("Resource Role"),formatter:function(c,b,a){return j.resourceRoleFormatter(c.resourceRole,
b,a)}}];this.grid=new e({url:h,serverSideProcessing:!1,columns:d,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/applicationProcess/ApplicationProcessChangelog":function(){define(["dijit/_TemplatedMixin","dijit/_Widget","dojo/_base/declare","js/webext/widgets/table/TreeTable"],function(l,m,k,j){return k("deploy.widgets.applicationProcess.ApplicationProcessChangelog",[m,l],{templateString:'<div class="applicationProcessChangelog"><div data-dojo-attach-point="gridAttach"></div></div>',
postCreate:function(){this.inherited(arguments);var e=bootstrap.restUrl+"deploy/applicationProcess/"+this.applicationProcess.id+"/changelog",h=[{name:i18n("Version"),field:"version",orderField:"version",getRawValue:function(d){return d.version}},{name:i18n("User"),field:"committer",orderField:"committer",filterField:"committer",filterType:"text",getRawValue:function(d){return d.committer}},{name:i18n("Date"),field:"commitTime",formatter:util.tableDateFormatter,orderField:"date",getRawValue:function(d){return new Date(d.commitTime)}},
{name:i18n("Comment"),field:"comment"}];this.grid=new j({url:e,serverSideProcessing:!1,orderField:"version",sortType:"desc",columns:h,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach)},destroy:function(){this.inherited(arguments);this.grid.destroy()}})})},"deploy/widgets/applicationProcess/ApplicationProcessEditManager":function(){define("dojo/_base/array,dojo/_base/declare,dojo/_base/xhr,dojo/on,dojo/dom-construct,js/webext/widgets/TwoPaneListManager,deploy/widgets/applicationProcess/EditApplicationProcess,deploy/widgets/property/PropDefs".split(","),
function(l,m,k,j,e,h,d,c){return m([h],{postCreate:function(){this.inherited(arguments);this.showList();void 0!==appState.goBack.id&&this.selectEntryById(appState.goBack.id)},showList:function(){var b=this;b.addEntry({id:"basic",label:i18n("Basic Settings"),action:function(){b.addHeading(i18n("Basic Settings"));b.showBasicSettings()}});b.addEntry({id:"properties",label:i18n("Application Process Properties"),action:function(){b.addHeading(i18n("Application Process Properties"));b.showProperties()}})},
addHeading:function(b){e.create("div",{innerHTML:b,"class":"containerLabel"},this.detailAttach)},addDescription:function(b){e.create("div",{innerHTML:b,style:{marginBottom:"10px"}},this.detailAttach)},showBasicSettings:function(){(new d({showCancel:!1,readOnly:!this.hasManageProcessesPermission()||!this.hasLatestVersion(),application:appState.application,applicationTemplate:this.applicationTemplate,applicationProcess:appState.applicationProcess})).placeAt(this.detailAttach)},showProperties:function(){(new c({getUrl:bootstrap.restUrl+
"deploy/applicationProcess/"+appState.applicationProcess.id+"/"+appState.applicationProcess.version+"/propDefs",deleteUrl:bootstrap.restUrl+"deploy/applicationProcess/"+appState.applicationProcess.id+"/deletePropDef/{propertyName}",saveUrl:bootstrap.restUrl+"deploy/applicationProcess/"+appState.applicationProcess.id+"/savePropDef",readOnly:!this.hasManageProcessesPermission()||!this.hasLatestVersion(),refreshHash:"applicationProcess/"+appState.applicationProcess.id+"/-1/configuration/properties",
propSheetDef:appState.applicationProcess.propSheetDef,deleteHeaders:{applicationProcessVersion:appState.applicationProcess.version},addData:function(b){b.applicationProcessVersion=appState.applicationProcess.version}})).placeAt(this.detailAttach)},hasManageProcessesPermission:function(){var b=!1;this.application?b=this.application.security["Manage Processes"]:this.applicationTemplate&&(b=this.applicationTemplate.security["Manage Processes"]);return b},hasLatestVersion:function(){return appState.applicationProcess.version===
appState.applicationProcess.versionCount}})})},"deploy/widgets/applicationProcess/ApplicationProcessList":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dijit/form/CheckBox,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/Formatters,deploy/widgets/applicationProcess/EditApplicationProcess,js/webext/widgets/Alert,js/webext/widgets/Dialog,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),function(l,m,k,
j,e,h,d,c,b,a,f,n,r,t,q){return e("deploy.widgets.applicationProcess.ApplicationProcessList",[m,l],{templateString:'<div class="applicationProcesses"><div class="listTopButtons" data-dojo-attach-point="buttonAttach"></div><div data-dojo-attach-point="gridAttach"></div><div data-dojo-attach-point="activeBoxAttach" style="margin: 2px;"></div></div>',postCreate:function(){this.inherited(arguments);var b=this;if(b.application)b.gridRestUrl=bootstrap.restUrl+"deploy/application/"+b.application.id+"/processes/false",
b.processFormatter=a.applicationProcessLinkFormatter;if(b.applicationTemplate)b.gridRestUrl=bootstrap.restUrl+"deploy/applicationTemplate/"+b.applicationTemplate.id+"/"+b.applicationTemplate.version+"/processes",b.processFormatter=a.applicationTemplateProcessLinkFormatter,b.readOnly=b.applicationTemplate.version!==b.applicationTemplate.versionCount||!b.applicationTemplate.security["Manage Processes"];var c=[{name:i18n("Process"),formatter:b.processFormatter},{name:i18n("Description"),field:"description"},
{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new q({url:b.gridRestUrl,serverSideProcessing:!1,columns:c,tableConfigKey:"appProcListKey",noDataMessage:i18n("No processes have been added to this application."),hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);if(config.data.systemConfiguration.enableInactiveLinks&&b.application)(new j({checked:!1,value:"true",onChange:function(a){b.grid.url=bootstrap.restUrl+"deploy/application/"+appState.application.id+
"/processes/"+a;b.grid.refresh()}})).placeAt(this.activeBoxAttach),c=document.createElement("div"),d.add(c,"inlineBlock"),c.style.position="relative",c.style.top="2px",c.style.left="2px",c.innerHTML=i18n("Show Inactive Processes"),this.activeBoxAttach.appendChild(c);b.readOnly||(c=new k({label:i18n("Create Process"),showTitle:!1,onClick:function(){b.showNewApplicationProcessDialog({})}}),d.add(c.domNode,"idxButtonSpecial"),c.placeAt(this.buttonAttach))},destroy:function(){this.inherited(arguments);
this.grid.destroy()},applicationProcessLinkFormatter:function(a){var b=document.createElement("a");if(a)if(b.innerHTML=a.name.escape(),"patternApplicationProcess"===a.metadataType){if(a.blueprint)b.href=a.blueprint.url}else b.href="#applicationProcess/"+a.id+"/"+a.version;return b},actionsFormatter:function(a){var d=this.parentWidget,e=document.createElement("div");if(!d.readOnly){var f="inline";a.applicationTemplate&&!a.applicationTemplate.security["Manage Processes"]&&(f="none");var h=document.createElement("a");
h.className="actionsLink linkPointer";h.innerHTML=i18n("Edit");h.style.display=f;if("patternApplicationProcess"===a.metadataType){if(a.blueprint)h.href=a.blueprint.url}else h.href="#applicationProcess/"+a.id+"/-1";e.appendChild(h);if("patternApplicationProcess"!==a.metadataType&&(h=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},e),b(h,"click",function(){d.duplicate(a)}),a.application||d.applicationTemplate))f=c.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete"),
style:{display:f}},e),b(f,"click",function(){d.confirmDelete(a)})}return e},confirmDelete:function(a){var b=this,c=i18n("If you delete this application process, scheduled instances of the process are also removed from the calendar, if any. However, the application process run history, including past calendar entries, is preserved. Delete %s?",a.name.escape()),d=b.applicationTemplate||a.applicationTemplate;d?h.get({url:bootstrap.restUrl+"deploy/applicationTemplate/"+d.id+"/numApplications",handleAs:"text",
load:function(d){d=parseInt(d,10);0<d&&(c=i18n("This is an application template process. All %s applications that rely on this template will be affected. Also, if you delete this application process, scheduled instances of the process are also removed from the calendar, if any. However, the application process run history, including past calendar entries, is preserved. Delete %s?",d,a.name.escape()));b.showDeleteApplicationProcessConfirmation(a,c)}}):b.showDeleteApplicationProcessConfirmation(a,c)},
showDeleteApplicationProcessConfirmation:function(a,b){var c=this;new t({message:b,action:function(){c.grid.block();h.del({url:bootstrap.restUrl+"deploy/applicationProcess/"+a.id,handleAs:"json",load:function(){c.grid.unblock();c.grid.refresh();c.applicationTemplate&&navBar.setHash("applicationTemplate/"+c.applicationTemplate.id+"/-1/processes",!1,!0)}})}})},showNewApplicationProcessDialog:function(){var a=new r({title:i18n("Create an Application Process"),closable:!0,draggable:!0});(new f({application:this.application,
applicationTemplate:this.applicationTemplate,callback:function(){a.hide();a.destroy()}})).placeAt(a.containerNode);a.show()},duplicate:function(a){var b=this,c;b.application&&(c=bootstrap.restUrl+"deploy/application/"+b.application.id+"/pasteProcess/"+a.id);b.applicationTemplate&&(c=bootstrap.restUrl+"deploy/applicationTemplate/"+b.applicationTemplate.id+"/pasteProcess/"+a.id);b.grid.block();h.get({url:c,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh();b.applicationTemplate&&navBar.setHash("applicationTemplate/"+
b.applicationTemplate.id+"/-1/processes",!1,!0)},error:function(a){b.grid.unblock();new n({message:util.escape(a.responseText)})}})}})})},"deploy/widgets/scripts/PostProcessingLibrary":function(){define("dijit/_TemplatedMixin,dijit/_Widget,dijit/form/Button,dojo/_base/declare,dojo/_base/xhr,dojo/dom-class,dojo/dom-construct,dojo/on,deploy/widgets/scripts/PostScriptEditorDialog,js/webext/widgets/Dialog,js/webext/widgets/Alert,js/webext/widgets/GenericConfirm,js/webext/widgets/table/TreeTable".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){return j("deploy.widgets.scripts.PostProcessingLibrary",[m,l],{templateString:'<div class="scriptList"><div class="listTopButtons" data-dojo-attach-point="buttonTopAttach"></div><div data-dojo-attach-point="gridAttach"></div></div>',postCreate:function(){this.inherited(arguments);var a=this,b=bootstrap.restUrl+"script/postprocessing",c=[{name:i18n("Name"),field:"name",orderField:"name",filterField:"name",filterType:"text",getRawValue:function(a){return a.name},
formatter:this.scriptNameFormatter,parentWidget:this},{name:i18n("Description"),field:"description"},{name:i18n("Actions"),formatter:this.actionsFormatter,parentWidget:this}];this.grid=new r({url:b,serverSideProcessing:!1,noDataMessage:i18n("No scripts founds"),tableConfigKey:"postProcessScriptList",columns:c,hideExpandCollapse:!0,hidePagination:!1});this.grid.placeAt(this.gridAttach);a.hasManageScriptPermission()&&(b={label:i18n("Create Script"),showTitle:!1,onClick:function(){a.showEditScriptDialog()}},
b=new k(b),h.add(b.domNode,"idxButtonSpecial"),b.placeAt(this.buttonTopAttach))},destroy:function(){this.inherited(arguments);this.grid.destroy()},actionsFormatter:function(a){var b=this.parentWidget,e=document.createElement("div");if(b.hasManageScriptPermission()){var f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Copy")},e);c(f,"click",function(){b.showEditScriptDialog(void 0,a)});f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Edit")},e);c(f,"click",function(){b.showEditScriptDialog(a)});
f=d.create("a",{"class":"actionsLink linkPointer",innerHTML:i18n("Delete")},e);c(f,"click",function(){b.confirmDelete(a)})}return e},scriptNameFormatter:function(a){var b=this.parentWidget,e=document.createElement("div"),f=d.create("a",{"class":"namesLink linkPointer",innerHTML:i18n(a.name)},e);c(f,"click",function(){b.showEditScriptDialog(a)});return e},showEditScriptDialog:function(a,c){var d=this;b({script:a,readOnly:!d.hasManageScriptPermission(),source:c,callback:function(){d.grid.refresh()}}).show()},
confirmDelete:function(a){var b=this;new n({message:i18n("Are you sure you want to delete %s?",a.name),action:function(){b.grid.block();e.del({url:bootstrap.restUrl+"script/postprocessing/"+a.id,handleAs:"json",load:function(){b.grid.unblock();b.grid.refresh()}})}})},hasManageScriptPermission:function(){var a=!1;config&&config.data&&config.data.permissions&&config.data.permissions[security.system.managePostProcessingScripts]&&(a=!0);return a}})})},"deploy/widgets/navigation/ProcessRequests":function(){define("dojo/_base/kernel,dojox/html/entities,dojo/_base/array,dojo/_base/url,dojo/dom-construct,dojo/topic,dojo/hash,deploy/util/ErrorUtil".split(","),
function(l,m,k,j,e,h,d,c){l.provide("deploy.widgets.navigation.ProcessRequests");config.data.tabSets.push({id:"deploymentPreview",hashPattern:["snapshot","environment","applicationProcess","tab"],breadcrumbs:["home","topLevelTab","application","snapshot"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Deployment Preview")},getDetailFields:function(){return[{label:i18n("Application"),value:'<a href="#application/'+appState.application.id+'">'+m.encode(appState.application.name)+
"</a>"},{label:i18n("Snapshot"),value:'<a href="#snapshot/'+appState.snapshot.id+'">'+m.encode(appState.snapshot.name)+"</a>"},{label:i18n("Environment"),value:'<a href="#environment/'+appState.environment.id+'">'+m.encode(appState.environment.name)+"</a>"},{label:i18n("Process"),value:'<a href="#applicationProcess/'+appState.applicationProcess.id+'/-1">'+m.encode(appState.applicationProcess.name)+"</a>"}]},stateCalls:[{targetAppStateEntry:"snapshot",getUrl:function(b){return bootstrap.restUrl+"deploy/snapshot/"+
b.snapshot},postGet:function(b,a){a.application=b.application},stateCalls:[{targetAppStateEntry:"applicationProcess",getUrl:function(b){return bootstrap.restUrl+"deploy/applicationProcess/"+b.applicationProcess+"/-1"}}]},{targetAppStateEntry:"environment",getUrl:function(b){return bootstrap.restUrl+"deploy/environment/"+b.environment}}],defaultTab:"summary",tabs:[{id:"summary",label:i18n("Summary"),view:"deploy/views/deploymentPreview/deploymentPreviewMain"},{id:"configuration",label:i18n("Configuration Changes"),
view:"deploy/views/deploymentPreview/deploymentPreviewConfiguration"}]});config.data.tabSets.push({id:"componentProcessRequest",hashPattern:["componentProcessRequest","tab"],breadcrumbs:["home","topLevelTab","component","componentProcessRequest"],selectedTopLevelTab:"components",getDetailTitle:function(){return i18n("Deployment of Component: %s",m.encode(appState.component.name))},getDetailFields:function(){var b=[],a=appState.componentProcessRequest.parentRequestId;if(a){var c=e.create("div"),d=
appState.componentProcessRequest.parentComponentProcessRequestId,h=appState.componentProcessRequest.deploymentRequestId;h&&(h=e.create("a",{className:"inline-block",href:"#deploymentRequest/"+h},c),h=e.create("div",{},h),e.create("div",{className:"inline-block general-icon origProcessIcon"},h),e.create("span",{innerHTML:i18n("View Deployment Request")},h));a=e.create("a",{className:"inline-block has-arrow",href:"#applicationProcessRequest/"+a},c);a=e.create("div",{},a);e.create("div",{className:"inline-block general-icon origProcessIcon"},
a);e.create("span",{innerHTML:i18n("View Application Process Execution")},a);d&&(d=e.create("a",{className:"inline-block has-arrow",href:"#componentProcessRequest/"+d},c),d=e.create("div",{},d),e.create("div",{className:"inline-block general-icon origProcessIcon"},d),e.create("span",{innerHTML:i18n("View Component Process Execution")},d));d=e.create("a",{className:"inline-block has-arrow no-link"},c);d=e.create("div",{},d);e.create("div",{className:"inline-block blank-icon"},d);e.create("span",{innerHTML:i18n("Process Request")},
d);b.push({label:"",value:c,containerClassName:"back-navigation-link",placeBelow:!0})}b.push({label:i18n("Process"),value:'<a href="#'+i18n("componentProcess")+"/"+appState.componentProcess.id+"/"+appState.componentProcess.version+'">'+i18n("%s (Version %s)",m.encode(appState.componentProcess.name),appState.componentProcess.version)+"</a>"});void 0!==appState.version&&b.push({label:i18n("Version"),value:'<a href="#version/'+appState.version.id+'">'+m.encode(appState.version.name)+"</a>"});b.push({label:i18n("Resource"),
value:'<a href="#resource/'+appState.resource.id+'">'+m.encode(appState.resource.name)+"</a>"});appState.agent&&b.push({label:i18n("Agent"),value:'<a href="#agent/'+appState.agent.id+'">'+m.encode(appState.agent.name)+"</a>"});b.push({label:i18n("Date"),value:util.dateFormatShort(appState.componentProcessRequest.submittedTime)});b.push({label:i18n("Requested By"),value:m.encode(appState.componentProcessRequest.userName)});k.forEach(appState.componentProcessRequest.contextProperties,function(a){if(0===
a.name.indexOf("link:")){var c=a.name.substring(5),a=a.value;(new j(a)).scheme||(a="http://"+a);c=e.create("a",{innerHTML:c.escape(),href:a,target:"_blank"});b.push({value:c})}});return b},stateCalls:[{targetAppStateEntry:"componentProcessRequest",getUrl:function(b){return bootstrap.restUrl+"deploy/componentProcessRequest/"+b.componentProcessRequest},postGet:function(b,a){a.component=b.component;a.componentProcess=b.componentProcess;a.application=b.application;a.environment=b.environment;a.resource=
b.resource;a.agent=b.agent;if(b.version)a.version=b.version}}],defaultTab:"log",tabs:[{id:"log",label:i18n("Log"),view:"deploy/views/componentProcessRequest/executionLog"},{id:"properties",label:i18n("Properties"),view:"deploy/views/componentProcessRequest/requestProperties"}]});config.data.tabSets.push({id:"applicationProcessRequest",hashPattern:["applicationProcessRequest","tab"],breadcrumbs:["home","topLevelTab","application","applicationProcessRequest"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Application Process Request: %s",
m.encode(appState.application.name))},getDetailFields:function(){var b=[];if(appState.applicationProcessRequest.deploymentRequestId){var a=e.create("div"),c=e.create("a",{className:"inline-block",href:"#deploymentRequest/"+appState.applicationProcessRequest.deploymentRequestId},a),c=e.create("div",{},c);e.create("div",{className:"inline-block general-icon origProcessIcon"},c);e.create("span",{innerHTML:i18n("View Deployment Request")},c);c=e.create("a",{className:"inline-block has-arrow no-link"},
a);c=e.create("div",{},c);e.create("div",{className:"inline-block blank-icon"},c);e.create("span",{innerHTML:i18n("Process Request")},c);b.push({label:"",value:a,containerClassName:"back-navigation-link",placeBelow:!0})}appState.snapshot&&b.push({label:i18n("Snapshot"),value:'<a href="#snapshot/'+appState.snapshot.id+'">'+m.encode(appState.snapshot.name)+"</a>"});b.push({label:i18n("Process"),value:'<a href="#applicationProcess/'+appState.applicationProcess.id+"/"+appState.applicationProcess.version+
'">'+i18n("%s (Version %s)",m.encode(appState.applicationProcess.name),appState.applicationProcess.version)+"</a>"});b.push({label:i18n("Environment"),value:'<a href="#environment/'+appState.environment.id+'">'+m.encode(appState.environment.name)+"</a>"});b.push({label:i18n("Only Changed Versions"),value:m.encode(appState.applicationProcessRequest.onlyChanged.toString())});b.push({label:i18n("Date Requested"),value:util.dateFormatShort(appState.applicationProcessRequest.submittedTime)});b.push({label:i18n("Requested By"),
value:m.encode(appState.applicationProcessRequest.userName)});appState.applicationProcessRequest.entry&&b.push({label:i18n("Scheduled For"),value:util.dateFormatShort(appState.applicationProcessRequest.entry.scheduledDate)});k.forEach(appState.applicationProcessRequest.contextProperties,function(a){if(0===a.name.indexOf("link:")){var c=a.name.substring(5),a=a.value;(new j(a)).scheme||(a="http://"+a);c=e.create("a",{innerHTML:c.escape(),href:a,target:"_blank"});b.push({value:c})}});return b},getDetailDescription:function(){return m.encode(appState.applicationProcessRequest.description)},
stateCalls:[{targetAppStateEntry:"applicationProcessRequest",getUrl:function(b){return bootstrap.restUrl+"deploy/applicationProcessRequest/"+b.applicationProcessRequest},postGet:function(b,a){a.application=b.application;a.applicationProcess=b.applicationProcess;a.environment=b.environment;if(b.snapshot)a.snapshot=b.snapshot}}],defaultTab:"log",tabs:[{id:"log",label:i18n("Log"),view:"deploy/views/applicationProcessRequest/executionLog"},{id:"properties",label:i18n("Properties"),view:"deploy/views/applicationProcessRequest/requestProperties"},
{id:"manifest",label:i18n("Manifest"),view:"deploy/views/applicationProcessRequest/requestManifest"},{id:"configurationChanges",label:i18n("Configuration Changes"),view:"deploy/views/applicationProcessRequest/requestConfigurationChanges"},{id:"inventoryChanges",label:i18n("Inventory Changes"),view:"deploy/views/applicationProcessRequest/requestInventoryChanges"}]});h.subscribe("navigationError",function(b){if(404===b.status&&navBar.lastNotFoundAppReqHash!==d()&&0===b.response.url.indexOf(bootstrap.restUrl+
"deploy/applicationProcessRequest/"))navBar.lastNotFoundAppReqHash=d(),c.showErrorDialog(i18n("Deployment history details were deleted"),i18n("No deployment history is available for this application process request, because daily cleanup removed all the details."))});config.data.tabSets.push({id:"deploymentRequest",hashPattern:["deploymentRequest","tab"],breadcrumbs:["home","topLevelTab","application","deploymentRequest"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Deployment Request: %s",
m.encode(appState.application.name))},getDetailFields:function(){var b=[];appState.snapshot&&b.push({label:i18n("Snapshot"),value:'<a href="#snapshot/'+appState.snapshot.id+'">'+m.encode(appState.snapshot.name)+"</a>"});b.push({label:i18n("Process"),value:'<a href="#applicationProcess/'+appState.applicationProcess.id+'">'+m.encode(appState.applicationProcess.name)+"</a>"});b.push({label:i18n("Environment"),value:'<a href="#environment/'+appState.environment.id+'">'+m.encode(appState.environment.name)+
"</a>"});b.push({label:i18n("Date"),value:util.dateFormatShort(appState.applicationProcessRequest.submittedTime)});b.push({label:i18n("Requested By"),value:m.encode(appState.applicationProcessRequest.userName)});return b},stateCalls:[{targetAppStateEntry:"deploymentRequest",getUrl:function(b){return bootstrap.restUrl+"deploy/deploymentRequest/"+b.deploymentRequest},postGet:function(b,a){a.applicationProcessRequest=b.rootRequest;a.application=b.rootRequest.application;a.applicationProcess=b.rootRequest.applicationProcess;
a.environment=b.rootRequest.environment;if(b.rootRequest.snapshot)a.snapshot=b.rootRequest.snapshot}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/deploymentRequest/deploymentRequestMain"},{id:"properties",label:i18n("Properties"),view:"deploy/views/applicationProcessRequest/requestProperties"},{id:"manifest",label:i18n("Manifest"),view:"deploy/views/deploymentRequest/deploymentManifest"}]});config.data.breadcrumbItems.push({id:"deploymentRequest",getHash:function(){return"deploymentRequest/"+
appState.deploymentRequest.id},isUserData:!1,getLabel:function(){return i18n("Deployment Request")}});config.data.breadcrumbItems.push({id:"applicationProcessRequest",getHash:function(){return"applicationProcessRequest/"+appState.applicationProcessRequest.id},isUserData:!1,getLabel:function(){return i18n("Process Request")}});config.data.breadcrumbItems.push({id:"componentProcessRequest",getHash:function(){return"componentProcessRequest/"+appState.componentProcessRequest.id},isUserData:!1,getLabel:function(){return i18n("Process Request on %s",
m.encode(appState.resource.name))}})})},"dojo/hash":function(){define("./_base/kernel,require,./_base/config,./_base/connect,./_base/lang,./ready,./sniff".split(","),function(l,m,k,j,e,h,d){function c(a,b){var c=a.indexOf(b);return 0<=c?a.substring(c+1):""}function b(){return c(location.href,"#")}function a(){j.publish("/dojo/hashchange",[b()])}function f(){b()!==t&&(t=b(),a())}function n(a){if(q)if(q.isTransitioning())setTimeout(e.hitch(null,n,a),s);else{var b=q.iframe.location.href,c=b.indexOf("?");
q.iframe.location.replace(b.substring(0,c)+"?"+a)}else location.replace("#"+a),!o&&f()}function r(){function d(){t=b();j=r?t:c(z.href,"?");n=!1;o=null}var f=document.createElement("iframe"),h=k.dojoBlankHtmlUrl||m.toUrl("./resources/blank.html");k.useXDomain&&!k.dojoBlankHtmlUrl&&console.warn("dojo.hash: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html");f.id="dojo-hash-iframe";f.src=
h+"?"+b();f.style.display="none";document.body.appendChild(f);this.iframe=l.global["dojo-hash-iframe"];var j,n,o,q,r,z=this.iframe.location;this.isTransitioning=function(){return n};this.pollLocation=function(){if(!r)try{var k=c(z.href,"?");if(document.title!=q)q=this.iframe.document.title=document.title}catch(l){r=!0,console.error("dojo.hash: Error adding history entry. Server unreachable.")}var m=b();if(n&&t===m)if(r||k===o)d(),a();else{setTimeout(e.hitch(this,this.pollLocation),0);return}else if(!(t===
m&&(r||j===k))){if(t!==m){t=m;n=!0;o=m;f.src=h+"?"+o;r=!1;setTimeout(e.hitch(this,this.pollLocation),0);return}if(!r)location.href="#"+z.search.substring(1),d(),a()}setTimeout(e.hitch(this,this.pollLocation),s)};d();setTimeout(e.hitch(this,this.pollLocation),s)}l.hash=function(a,c){if(!arguments.length)return b();"#"==a.charAt(0)&&(a=a.substring(1));c?n(a):location.href="#"+a;return a};var t,q,o,s=k.hashPollFrequency||100;h(function(){"onhashchange"in l.global&&(!d("ie")||8<=d("ie")&&"BackCompat"!=
document.compatMode)?o=j.connect(l.global,"onhashchange",a):document.addEventListener?(t=b(),setInterval(f,s)):document.attachEvent&&(q=new r)});return l.hash})},"deploy/widgets/navigation/Reports":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l){l.provide("deploy.widgets.navigation.Reports");config.data.tabSets.push({id:"reports",hashPattern:["offset","reportName"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"reports",stateCalls:[{targetAppStateEntry:"report",
getUrl:function(l){var k=bootstrap.restUrl+"report/",j;l.reportName?(j=l.reportName,l=l.offset,k=k+l+"/"+j):(j=l.offset,k+=j);return k}}],defaultTab:"reportPage",tabs:[{id:"reportPage",label:i18n("Reports"),view:"deploy/views/report/report"}]})})},"deploy/widgets/navigation/Calendar":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l,m){l.provide("deploy.widgets.navigation.Calendar");config.data.tabSets.push({id:"calendarEntry",hashPattern:["calendarEntry","tab"],breadcrumbs:["home",
"topLevelTab","application"],selectedTopLevelTab:"calendar",getDetailTitle:function(){return i18n("Scheduled Deployment Record")},getDetailFields:function(){var k=[{label:i18n("Application"),value:'<a href="#application/'+appState.application.id+'">'+m.encode(appState.application.name)+"</a>"},{label:i18n("Process"),value:'<a href="#applicationProcess/'+appState.applicationProcess.id+'">'+m.encode(appState.applicationProcess.name)+"</a>"}];appState.snapshot&&k.push({label:i18n("Snapshot"),value:'<a href="#snapshot/'+
appState.snapshot.id+'">'+m.encode(appState.snapshot.name)+"</a>"});k.push({label:i18n("Environment"),value:'<a href="#environment/'+appState.environment.id+'">'+m.encode(appState.environment.name)+"</a>"});k.push({label:i18n("Scheduled For"),value:util.dateFormatShort(appState.calendarEntry.scheduledDate)});return k},stateCalls:[{targetAppStateEntry:"calendarEntry",getUrl:function(k){return bootstrap.restUrl+"calendar/entry/"+k.calendarEntry},postGet:function(k,j){j.application=k.application;j.applicationProcess=
k.applicationProcess;j.snapshot=k.snapshot;j.environment=k.environment}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/calendar/calendarEntryMain"},{id:"edit",label:i18n("Edit"),view:"deploy/views/calendar/editEntry"}]})})},"deploy/widgets/navigation/Resources":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l,m){l.provide("deploy.widgets.navigation.Resources");var k=[{id:"resources",label:i18n("Resource Tree"),view:"deploy/views/resource/resourceList"},
{id:"resourceTemplates",label:i18n("Resource Templates"),view:"deploy/views/resourceTemplate/resourceTemplateList"},{id:"agents",label:i18n("Agents"),view:"deploy/views/agent/agentList"},{id:"agentRelays",label:i18n("Agent Relays"),view:"deploy/views/agentRelay/agentRelayList"},{id:"agentPools",label:i18n("Agent Pools"),view:"deploy/views/agentPool/agentPoolList"},{id:"cloud",label:i18n("Cloud Connections"),view:"deploy/views/settings/cloudConnections"}];config.data.systemConfiguration.enableConfigurationDriftTab&&
k.push({id:"variance",label:i18n("Configuration"),view:"deploy/views/resource/variance"});config.data.tabSets.push({id:"resources",hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"resources",defaultTab:"resources",tabs:k});config.data.tabSets.push({id:"resource",hashPattern:["resource","tab"],breadcrumbs:["home","topLevelTab","resourceTemplatesIfOnResource","resourceTemplateLinkIfResourceHasTemplate","resource"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Resource: %s",
m.encode(appState.resource.name))},getDetailFields:function(){var j=[];appState.resource.agent&&j.push({label:i18n("Agent"),value:'<a href="#agent/'+appState.resource.agent.id+'">'+m.encode(appState.resource.agent.name)+"</a>"});appState.resource.relay&&j.push({label:i18n("Relay"),value:'<a href="#relay'+appState.resource.relay.id+'">'+m.encode(appState.resource.relay.name)+"</a>"});appState.resource.agentPool&&j.push({label:i18n("Agent Pool"),value:'<a href="#agentPool/'+appState.resource.agentPool.id+
'">'+m.encode(appState.resource.agentPool.name)+"</a>"});appState.resource.parent&&j.push({label:i18n("Parent Resource"),value:'<a href="#resource/'+appState.resource.parent.id+'">'+m.encode(appState.resource.parent.path.replace(/\//g," / "))+"</a>"});return j},getDetailDescription:function(){return m.encode(appState.resource.description)},stateCalls:[{targetAppStateEntry:"resource",getUrl:function(j){return bootstrap.restUrl+"resource/resource/"+j.resource}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),
view:"deploy/views/resource/resourceMain"},{id:"inventory",label:i18n("Inventory"),view:"deploy/views/resource/resourceInventory"},{id:"discovery",label:i18n("History"),view:"deploy/views/resource/resourceHistory"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/resource/resourceConfiguration"},{id:"changes",label:i18n("Changes"),view:"deploy/views/resource/resourceChangelog"}]});config.data.tabSets.push({id:"resourceTemplate",hashPattern:["resourceTemplate",
"tab"],breadcrumbs:["home","topLevelTab","resourceTemplates","resourceTemplate"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Resource Template: %s",m.encode(appState.resourceTemplate.name))},getDetailDescription:function(){return m.encode(appState.resourceTemplate.description)},getDetailFields:function(){var j=[];appState.resourceTemplate.parent&&j.push({label:i18n("Parent Template"),value:'<a href="#resourceTemplate/'+appState.resourceTemplate.parent.id+'">'+m.encode(appState.resourceTemplate.parent.name)+
"</a>"});return j},stateCalls:[{targetAppStateEntry:"resourceTemplate",getUrl:function(j){return bootstrap.restUrl+"resource/resourceTemplate/"+j.resourceTemplate}}],defaultTab:"configuration",tabs:[{id:"configuration",label:i18n("Configuration"),view:"deploy/views/resourceTemplate/resourceTemplateConfiguration"}]});config.data.tabSets.push({id:"agent",hashPattern:["agent","tab"],breadcrumbs:["home","topLevelTab","agents","agent"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Agent: %s",
m.encode(appState.agent.name))},getDetailDescription:function(){return m.encode(appState.agent.description)},stateCalls:[{targetAppStateEntry:"agent",getUrl:function(j){return bootstrap.restUrl+"agent/"+j.agent}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/agent/agentMain"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/agent/agentConfiguration"}]});config.data.tabSets.push({id:"relay",hashPattern:["relay","tab"],breadcrumbs:["home",
"topLevelTab","relays","relay"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Agent Relays: %s",m.encode(appState.relay.name))},stateCalls:[{targetAppStateEntry:"relay",getUrl:function(j){return bootstrap.restUrl+"relay/"+j.relay}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/agentRelay/relayMain"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/agentRelay/relayConfiguration"}]});config.data.tabSets.push({id:"agentPool",
hashPattern:["agentPool","tab"],breadcrumbs:["home","topLevelTab","agentPools","agentPool"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Agent Pool: %s",m.encode(appState.agentPool.name))},getDetailDescription:function(){return m.encode(appState.agentPool.description)},stateCalls:[{targetAppStateEntry:"agentPool",getUrl:function(j){return bootstrap.restUrl+"agent/pool/"+j.agentPool}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/agentPool/agentPoolMain"},
{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/agentPool/agentPoolConfiguration"}]});config.data.tabSets.push({id:"resourceComparison",hashPattern:["leftSideType","leftSide","rightSideType","rightSide","tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"resources",getDetailTitle:function(){return i18n("Resource Comparison")},getDetailFields:function(){var j=[];j.push({label:i18n("Left-Hand Resource"),value:'<a href="#resource/'+appState.leftResource.id+
'">'+m.encode(appState.leftResource.path)+"</a>"});j.push({label:i18n("Right-Hand Resource"),value:'<a href="#resource/'+appState.rightResource.id+'">'+m.encode(appState.rightResource.path)+"</a>"});return j},stateCalls:[{targetAppStateEntry:"leftId",getUrl:function(j,e){e.leftId=j.leftSide;return""}},{targetAppStateEntry:"rightId",getUrl:function(j,e){e.rightId=j.rightSide;return""}},{targetAppStateEntry:"leftResource",getUrl:function(j){var e="";"resourceTemplate"===j.leftSideType?e=bootstrap.restUrl+
"resource/resourceTemplate/"+j.leftSide+"/root":"resource"===j.leftSideType&&(e=bootstrap.restUrl+"resource/resource/"+j.leftSide);return e}},{targetAppStateEntry:"rightResource",getUrl:function(j){var e="";"resourceTemplate"===j.rightSideType?e=bootstrap.restUrl+"resource/resourceTemplate/"+j.rightSide+"/root":"resource"===j.rightSideType&&(e=bootstrap.restUrl+"resource/resource/"+j.rightSide);return e}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/resource/resourceComparison"}]});
config.data.breadcrumbItems.push({id:"resource",getHash:function(){return"resource/"+appState.resource.id},isUserData:!0,getLabel:function(){return m.encode(appState.resource.name)}});config.data.breadcrumbItems.push({id:"resourceTemplatesIfOnResource",getHash:function(){return"resources/resourceTemplates"},isUserData:!0,getLabel:function(){var j;appState.resource.resourceTemplate&&(j=i18n("Resource Templates"));return j}});config.data.breadcrumbItems.push({id:"resourceTemplateLinkIfResourceHasTemplate",
getHash:function(){return"resourceTemplate/"+appState.resource.resourceTemplate.id},isUserData:!0,getLabel:function(){var j;appState.resource.resourceTemplate&&(j=m.encode(appState.resource.resourceTemplate.name));return j}});config.data.breadcrumbItems.push({id:"resourceTemplates",getHash:function(){return"resources/resourceTemplates"},isUserData:!1,getLabel:function(){return i18n("Resource Templates")}});config.data.breadcrumbItems.push({id:"resourceTemplate",getHash:function(){return"resourceTemplate/"+
appState.resourceTemplate.id},isUserData:!0,getLabel:function(){return m.encode(appState.resourceTemplate.name)}});config.data.breadcrumbItems.push({id:"resourceRoles",getHash:function(){return"resources/roles"},isUserData:!1,getLabel:function(){return i18n("Roles")}});config.data.breadcrumbItems.push({id:"resourceRole",getHash:function(){return"resourceRole/"+appState.resourceRole.id},isUserData:!0,getLabel:function(){return m.encode(appState.resourceRole.name)}});config.data.breadcrumbItems.push({id:"agent",
getHash:function(){return"agent/"+appState.agent.id},isUserData:!0,getLabel:function(){return m.encode(appState.agent.name)}});config.data.breadcrumbItems.push({id:"agents",getHash:function(){return"resources/agents"},isUserData:!1,getLabel:function(){return i18n("Agents")}});config.data.breadcrumbItems.push({id:"relay",getHash:function(){return"relay/"+appState.relay.id},isUserData:!0,getLabel:function(){return m.encode(appState.relay.name)}});config.data.breadcrumbItems.push({id:"relays",getHash:function(){return"resources/agentRelays"},
isUserData:!1,getLabel:function(){return i18n("Agent Relays")}});config.data.breadcrumbItems.push({id:"agentPool",getHash:function(){return"agentPool/"+appState.agentPool.id},isUserData:!0,getLabel:function(){return m.encode(appState.agentPool.name)}});config.data.breadcrumbItems.push({id:"agentPools",getHash:function(){return"resources/agentPools"},isUserData:!1,getLabel:function(){return i18n("Agent Pools")}})})},"deploy/widgets/navigation/Configuration":function(){define(["dojo/_base/kernel","dojox/html/entities"],
function(l){l.provide("deploy.widgets.navigation.Configuration");config.data.tabSets.push({id:"configuration",hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"configuration",defaultTab:"tree",tabs:[{id:"tree",label:i18n("Tree"),view:"deploy/views/configuration/configurationTree"}]})})},"deploy/widgets/navigation/Processes":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l,m){l.provide("deploy.widgets.navigation.Processes");config.data.tabSets.push({id:"process",
hashPattern:["process","processVersion","tab","navData"],breadcrumbs:["home","topLevelTab","process"],selectedTopLevelTab:"processes",stateCalls:[{targetAppStateEntry:"process",getUrl:function(k,j){j.processVersion={id:k.processVersion};return bootstrap.restUrl+"process/"+k.process+"/"+k.processVersion}},{getUrl:function(k,j){j.goBack={id:k.navData}}}],defaultTab:"dashboard",tabs:[{id:"dashboard",label:i18n("Dashboard"),view:"deploy/views/process/processDashboard"},{id:"design",label:i18n("Design"),
view:"deploy/views/process/processActivities"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/process/processConfiguration"},{id:"changelog",label:i18n("Changelog"),view:"deploy/views/process/processChangelog"}]});require(["dojo/_base/array","dojo/_base/url","dojo/dom-construct"],function(k,j,e){config.data.tabSets.push({id:"processRequest",hashPattern:["processRequest","tab"],breadcrumbs:["home","topLevelTab","process","processRequest"],selectedTopLevelTab:"processes",
getDetailTitle:function(){return i18n("Execution of %s",m.encode(appState.process.name))},getDetailFields:function(){var h=[];h.push({label:i18n("Date"),value:util.dateFormatShort(appState.processRequest.submittedTime)});h.push({label:i18n("Requested By"),value:m.encode(appState.processRequest.userName)});var d=util.getNamedPropertyValue(appState.processRequest.contextProperties,"parentRequestId");d&&h.push({label:"",value:'<a href="#processRequest/'+d+'">'+i18n("View Parent Request")+"</a>"});k.forEach(appState.processRequest.contextProperties,
function(c){if(0===c.name.indexOf("link:")){var b=c.name.substring(5),c=c.value;(new j(c)).scheme||(c="http://"+c);b=e.create("a",{innerHTML:b.escape(),href:c,target:"_blank"});h.push({value:b})}});return h},stateCalls:[{targetAppStateEntry:"processRequest",getUrl:function(e){return bootstrap.restUrl+"process/request/"+e.processRequest},postGet:function(e,d){d.process=e.process}}],defaultTab:"log",tabs:[{id:"log",label:i18n("Log"),view:"deploy/views/process/request/executionLog"},{id:"properties",
label:i18n("Properties"),view:"deploy/views/process/request/requestProperties"}]})});config.data.breadcrumbItems.push({id:"process",getHash:function(){return"process/"+appState.process.id+"/"+appState.process.version},isUserData:!0,getLabel:function(){return m.encode(appState.process.name)}});config.data.breadcrumbItems.push({id:"processRequest",getHash:function(){return"processRequest/"+appState.process.id},isUserData:!1,getLabel:function(){return i18n("Process Request")}})})},"deploy/widgets/navigation/Security":function(){define(["dojo/_base/kernel",
"dojox/html/entities","deploy/widgets/Security"],function(l){l.provide("deploy.widgets.navigation.Security");config.data.breadcrumbItems.push({id:"user",getHash:function(){return"user"},isUserData:!1,getLabel:function(){return i18n("My Profile")}});config.data.tabSets.push({id:"user",hashPattern:["tab"],breadcrumbs:["home","user"],selectedTopLevelTab:"root",defaultTab:"teamManager",tabs:[{id:"teamManager",label:i18n("Team Manager"),view:"deploy/views/security/teamManager"},{id:"userManager",label:i18n("User Manager"),
view:"deploy/views/security/userManager"},{id:"preferences",label:i18n("Preferences"),view:"deploy/views/security/userPreferences"}]});config.data.tabSets.push({id:"welcome",hashPattern:["tab"],breadcrumbs:[],hideGlobalMsgs:!0,selectedTopLevelTab:"welcome",defaultTab:"main",tabs:[{id:"main",label:i18n("Welcome"),view:"deploy/views/welcome/main"}]});config.data.tabSets.push({id:"tools",hashPattern:["tab"],breadcrumbs:["tab"],selectedTopLevelTab:"root",defaultTab:"main",tabs:[{id:"main",label:i18n("Tools"),
view:"deploy/views/tools/Main"}]});config.data.tabSets.push({id:"security",hashPattern:["tab"],breadcrumbs:["home","topLevelTab","security"],selectedTopLevelTab:"settings",defaultTab:"authentication",tabs:[{id:"authentication",label:i18n("Authentication"),view:"deploy/views/security/authenticationRealmManager",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},{id:"authorization",label:i18n("Authorization"),view:"deploy/views/security/authorizationRealmManager",
isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},{id:"teams",label:i18n("Teams"),view:"deploy/views/security/teamManager",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},{id:"tokens",label:i18n("Tokens"),view:"deploy/views/security/tokens",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},{id:"authTokenRestrictions",label:i18n("Token Restrictions"),view:"deploy/views/settings/authTokenRestrictions",
isVisible:function(){return config.data.permissions[security.system.manageAuthTokenRestrictions]||config.data.permissions[security.system.deleteAuthTokenRestrictions]}},{id:"roles",label:i18n("Role Configuration"),view:"deploy/views/security/roleManager",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},{id:"keys",label:i18n("API Keys"),view:"deploy/views/security/keyManager",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}},
{id:"types",label:i18n("Type Configuration"),view:"deploy/views/security/resourceRoleManager",isVisible:function(){return config.data.permissions[security.system.manageSecurity]}}]});config.data.breadcrumbItems.push({id:"security",getHash:function(){return"security"},isUserData:!1,getLabel:function(){return i18n("Security")}})})},"deploy/widgets/navigation/Dashboard":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l){l.provide("deploy.widgets.navigation.Dashboard");config.data.tabSets.push({id:"dashboard",
hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"dashboard",defaultTab:"currentActivity",tabs:[{id:"currentActivity",label:i18n("Current Activity"),view:"deploy/views/dashboard/currentActivity"}]})})},"deploy/widgets/navigation/Components":function(){define(["dojo/_base/kernel","dojox/html/entities"],function(l,m){l.provide("deploy.widgets.navigation.Components");config.data.tabSets.push({id:"components",hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"components",
defaultTab:"components",tabs:[{id:"components",label:i18n("Components"),view:"deploy/views/component/componentList"},{id:"templates",label:i18n("Templates"),view:"deploy/views/componentTemplate/componentTemplateList"}]});config.data.tabSets.push({id:"componentResourceRole",hashPattern:["componentResourceRole","tab"],selectedTopLevelTab:"components",defaultTab:"component",tabs:[{id:"component",label:i18n("Component"),view:"deploy/views/component/componentDashboard"}],stateCalls:[{targetAppStateEntry:"componentResourceRole",
getUrl:function(k){return bootstrap.restUrl+"resource/resourceRole/component/"+k.componentResourceRole},postGet:function(k){navBar.setHash("component/"+k.componentId)}}]});config.data.tabSets.push({id:"component",hashPattern:["component","tab"],breadcrumbs:["home","topLevelTab","component"],selectedTopLevelTab:"components",getDetailTitle:function(){return i18n("Component: %s",appState.component.name.escape())},getDetailFields:function(){var k=[{label:i18n("Created By"),value:m.encode(appState.component.user)},
{label:i18n("Created On"),value:util.dateFormatShort(appState.component.created)}];if(appState.component.template){var j=appState.component.template;appState.component.hasTemplateRead?k.push({label:i18n("Template"),value:'<a href="#componentTemplate/'+j.id+"/"+j.version+'">'+m.encode(j.name)+"</a>"}):k.push({label:i18n("Template"),value:m.encode(j.name)})}if(0<appState.component.applications.length){var e="";l.forEach(appState.component.applications,function(h){0<e.length&&(e+=", ");h.active||(e+=
"<i>");e+='<a href="#application/'+h.id+'">'+m.encode(h.name)+"</a>";h.active||(e+=i18n(" (Inactive)")+"</i>")});k.push({label:i18n("Used By"),value:e})}return k},getPageAlerts:function(){var k=[];l.forEach(appState.component.sourceConfigAlerts,function(j){k.push({className:"errorText",text:m.encode(j)})});appState.component.integrationFailed&&k.push({className:"errorText",text:i18n("A version import failed. Check the component's configuration for more details.")});!1===appState.component.sourceConfigPluginNameMatchesPlugin&&
k.push({className:"errorText",text:i18n("The source configuration was modified on this component's template. Please make any necessary updates to this component's configuration and save.  You will not be able to do version imports for this component until you reconfigure.")});return k},getDetailDescription:function(){return m.encode(appState.component.description)},stateCalls:[{targetAppStateEntry:"component",getUrl:function(k){return bootstrap.restUrl+"deploy/component/"+k.component}}],defaultTab:"dashboard",
tabs:[{id:"dashboard",label:i18n("Dashboard"),view:"deploy/views/component/componentDashboard"},{id:"usage",label:i18n("Usage"),view:"deploy/views/component/versionHistoryManager"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/component/componentConfiguration"},{id:"calendar",label:i18n("Calendar"),view:"deploy/views/component/componentCalendar"},{id:"versions",label:i18n("Versions"),view:"deploy/views/component/componentVersions"},{id:"processes",
label:i18n("Processes"),view:"deploy/views/component/componentProcesses"},{id:"changes",label:i18n("Changes"),view:"deploy/views/component/componentChangelog"}]});config.data.tabSets.push({id:"componentTemplate",hashPattern:["componentTemplate","componentTemplateVersion","tab","navData"],breadcrumbs:["home","componentTemplates","componentTemplate"],selectedTopLevelTab:"components",getDetailTitle:function(){return i18n("Component Template: %s",appState.componentTemplate.name.escape())},getDetailFields:function(){var k=
[];k.push({label:i18n("Version"),value:m.encode(i18n("%s of %s",appState.componentTemplate.version,appState.componentTemplate.versionCount))});k.push({label:"",value:util.vc.generateVersionControls(appState.componentTemplate,function(j){return"componentTemplate/"+appState.componentTemplate.id+"/"+j})});return k},getDetailDescription:function(){return m.encode(appState.componentTemplate.description)},stateCalls:[{targetAppStateEntry:"componentTemplate",getUrl:function(k,j){j.componentTemplateVersion=
{id:k.componentTemplateVersion};return bootstrap.restUrl+"deploy/componentTemplate/"+k.componentTemplate+"/"+k.componentTemplateVersion}},{getUrl:function(k,j){j.goBack={id:k.navData}}}],defaultTab:"components",tabs:[{id:"components",label:i18n("Components"),view:"deploy/views/componentTemplate/componentTemplateComponents"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/componentTemplate/componentTemplateConfiguration"},{id:"processes",label:i18n("Processes"),
view:"deploy/views/componentTemplate/componentTemplateProcesses"},{id:"changes",label:i18n("Changes"),view:"deploy/views/componentTemplate/componentTemplateChangelog"}]});require("js/webext/widgets/Link,js/webext/widgets/Dialog,js/webext/widgets/ColumnForm,dojo/_base/url,js/webext/widgets/RestSelect,dojo/dom-construct,dojo/_base/xhr".split(","),function(k,j,e,h,d,c,b){config.data.tabSets.push({id:"version",hashPattern:["version","tab"],breadcrumbs:["home","topLevelTab","component","versions","version"],
selectedTopLevelTab:"components",getDetailTitle:function(){return i18n("Version: %s",m.encode(appState.version.name))},getDetailFields:function(){var a=[];appState.version.creator&&a.push({label:i18n("Created By"),value:m.encode(appState.version.creator)});a.push({label:i18n("Created On"),value:util.dateFormatShort(appState.version.created)});if("ZOS"===appState.component.componentType){var f=util.getNamedProperty(appState.version.properties,"ucd.repository.type"),l="",l=f?"HFS"===f.value?f.value:
"CODESTATION"===f.value?"CodeStation":"UNKNOWN":"HFS";a.push({label:i18n("Repository Type"),value:m.encode(l)});(f=util.getNamedProperty(appState.version.properties,"ucd.version.ismerged"))&&a.push({label:i18n("Merged version"),value:f.value})}appState.version.propSheets&&(f=util.getNamedProperty(appState.version.propSheets,"backlinks"))&&f.properties.forEach(function(b){var c=b.value;(new h(c)).scheme||(c="http://"+c);a.push({value:'<a href="'+c+'" target="_blank">'+m.encode(b.name)+"</a>"})});if(appState.component.sourceConfigPlugin)if(f=
appState.component.sourceConfigPlugin.name,"AnthillPro"===f)l=util.getNamedPropertyValue(appState.component.properties,"AnthillComponentProperties/anthillUrl"),f=appState.version.name,a.push({value:'<a href="'+l+"/tasks/project/BuildLifeTasks/viewBuildLife?buildLifeId="+f+'" target="_blank">'+i18n("View Build Life %s in Anthill",m.encode(f))+"</a>"});else if("uBuild"===f)l=util.getNamedPropertyValue(appState.component.properties,"uBuildComponentProperties/uBuildUrl"),f=appState.version.name,a.push({value:'<a href="'+
l+"/tasks/project/BuildLifeTasks/viewBuildLife?buildLifeId="+f+'" target="_blank">'+i18n("View Build Life %s in uBuild",m.encode(f))+"</a>"});if(appState.component.extendedSecurity[security.component.manageVersions]){var f=new k({labelText:i18n("add"),onClick:function(){var a=new j({title:i18n("Add Link"),closable:!0,draggable:!0});this.form=new e({submitUrl:bootstrap.restUrl+"deploy/version/"+appState.version.id+"/link/",postSubmit:function(){a.hide();a.destroy();navBar.setHash(navBar.recentHash,
!1,!0)},onCancel:function(){a.hide();a.destroy()}});this.form.addField({name:"name",label:i18n("Name"),required:!0,textDir:util.getBaseTextDir(),type:"Text"});this.form.addField({name:"url",label:i18n("URL"),required:!0,type:"Text",bidiDynamicSTT:"URL",value:"<url>"});this.form.placeAt(a.containerNode);a.show()}}),l=new k({labelText:i18n("remove"),"class":"margin5Left link",onClick:function(){var a=new j({title:i18n("Remove Link"),closable:!0,draggable:!0});this.form=new e({saveLabel:i18n("Delete"),
onSubmit:function(){b.del({url:bootstrap.restUrl+"deploy/version/"+appState.version.id+"/link/"+this.getValue("name"),handleAs:"json"})},postSubmit:function(){a.hide();a.destroy();navBar.setHash(navBar.recentHash,!1,!0)},addData:function(){},onCancel:function(){a.hide();a.destroy()}});this.form.addField({name:"name",label:i18n("Link"),required:!0,type:"Select",widget:new d({restUrl:bootstrap.restUrl+"deploy/version/"+appState.version.id+"/link/",getValue:function(a){return a.name},allowNone:!1})});
this.form.placeAt(a.containerNode);a.show()}}),r=c.create("div");f.placeAt(r);l.placeAt(r);a.push({label:i18n("Links"),value:r})}return a},getDetailDescription:function(){return m.encode(appState.version.description)},stateCalls:[{targetAppStateEntry:"version",getUrl:function(a){return bootstrap.restUrl+"deploy/version/"+a.version},stateCalls:[{targetAppStateEntry:"component",getUrl:function(a,b){return bootstrap.restUrl+"deploy/component/"+b.version.component.id}}]}],defaultTab:"main",tabs:[{id:"main",
label:i18n("Main"),view:"deploy/views/version/versionMain"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/version/versionConfiguration"},{id:"history",label:i18n("History"),view:"deploy/views/version/versionHistory"}]})});config.data.tabSets.push({id:"componentProcess",hashPattern:["componentProcess","componentProcessVersion","tab","navData"],breadcrumbs:["home","topLevelComponentsOrTemplates","componentOrTemplate","componentProcesses","componentProcess"],
selectedTopLevelTab:"components",stateCalls:[{targetAppStateEntry:"componentProcess",getUrl:function(k,j){j.componentProcessVersion={id:k.componentProcessVersion};return bootstrap.restUrl+"deploy/componentProcess/"+k.componentProcess+"/"+k.componentProcessVersion},postGet:function(k,j){j.component=k.component;j.componentTemplate=k.componentTemplate}},{getUrl:function(k,j){j.goBack={id:k.navData}}}],defaultTab:"activities",tabs:[{id:"activities",label:i18n("Design"),view:"deploy/views/componentProcess/componentProcessActivities"},
{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/componentProcess/componentProcessConfiguration"},{id:"changes",label:i18n("Changes"),view:"deploy/views/componentProcess/componentProcessChangelog"}]});config.data.tabSets.push({id:"draftComponentProcess",hashPattern:["componentProcess","componentProcessVersion","tab","navData"],breadcrumbs:["home","topLevelComponentsOrTemplates","componentOrTemplate","componentProcesses","componentProcess"],selectedTopLevelTab:"components",
stateCalls:[{targetAppStateEntry:"componentProcess",getUrl:function(k,j){j.componentProcessVersion={id:k.componentProcessVersion};return bootstrap.restUrl+"deploy/componentProcess/draft/"+k.componentProcess+"/"+k.componentProcessVersion},postGet:function(k,j){j.component=k.component;j.componentTemplate=k.componentTemplate}},{getUrl:function(k,j){j.goBack={id:k.navData}}}],defaultTab:"activities",tabs:[{id:"activities",label:i18n("Design"),view:"deploy/views/componentProcess/draftComponentProcessActivities"},
{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/componentProcess/draftComponentProcessConfiguration"},{id:"changes",label:i18n("Changes"),view:"deploy/views/componentProcess/draftComponentProcessChangelog"}]});config.data.breadcrumbItems.push({id:"component",getHash:function(){return"component/"+appState.component.id},isUserData:!0,getLabel:function(){return m.encode(appState.component.name)}});config.data.breadcrumbItems.push({id:"componentTemplate",
getHash:function(){return"componentTemplate/"+appState.componentTemplate.id+"/-1"},isUserData:!0,getLabel:function(){return m.encode(appState.componentTemplate.name)}});config.data.breadcrumbItems.push({id:"topLevelComponentsOrTemplates",getHash:function(){var k="";appState.component?k="components":appState.componentTemplate&&(k="components/templates");return k},isUserData:!0,getLabel:function(){var k="";appState.component?k=i18n("Components"):appState.componentTemplate&&(k=i18n("Component Templates"));
return k}});config.data.breadcrumbItems.push({id:"componentOrTemplate",getHash:function(){var k="";appState.component?k="component/"+appState.component.id:appState.componentTemplate&&(k="componentTemplate/"+appState.componentTemplate.id+"/-1");return k},isUserData:!0,getLabel:function(){var k="";appState.component?k=m.encode(appState.component.name):appState.componentTemplate&&(k=m.encode(appState.componentTemplate.name));return k}});config.data.breadcrumbItems.push({id:"componentTemplates",getHash:function(){return"components/templates"},
isUserData:!1,getLabel:function(){return i18n("Component Templates")}});config.data.breadcrumbItems.push({id:"componentProcesses",getHash:function(){var k="";appState.component?k="component/"+appState.component.id+"/processes":appState.componentTemplate&&(k="componentTemplate/"+appState.componentTemplate.id+"/-1/processes");return k},isUserData:!1,getLabel:function(){return i18n("Processes")}});config.data.breadcrumbItems.push({id:"versions",getHash:function(){return"component/"+appState.component.id+
"/versions"},isUserData:!1,getLabel:function(){return i18n("Versions")}});config.data.breadcrumbItems.push({id:"version",getHash:function(){return"version/"+appState.version.id},isUserData:!1,getLabel:function(){return i18n("Version: %s",m.encode(appState.version.name))}});config.data.breadcrumbItems.push({id:"componentProcess",getHash:function(){return"componentProcess/"+appState.componentProcess.id},isUserData:!1,getLabel:function(){return i18n("Process: %s",appState.componentProcess.name.escape())}})})},
"deploy/widgets/navigation/LoadingIndicator":function(){define("dojo/_base/declare,dojo/dom-construct,dojo/dom-class,dojo/query,dojo/topic,dijit/_WidgetBase".split(","),function(l,m,k,j,e,h){return l("deploy.widgets.navigation.LoadingIndicator",[h],{topLevelLoadingIcon:null,postCreate:function(){this.topLevelLoadingIcon=m.create("span",{"class":"top-level-loading-image"},j(".topLevelTabs .tabManager")[0]);e.subscribe("NavigationBar/loading",this.startLoadingIndicators.bind(this));e.subscribe("NavigationBar/doneLoading",
this.stopLoadingIndicators.bind(this))},startLoadingIndicators:function(){dojo.fadeIn({node:this.topLevelLoadingIcon,duration:700}).play();k.add(document.body,"busy")},stopLoadingIndicators:function(){0===navBar.stateCallTracking.pendingCalls.length&&(dojo.fadeOut({node:this.topLevelLoadingIcon,duration:700}).play(),k.remove(document.body,"busy"))}})})},"deploy/widgets/navigation/Settings":function(){define(["dojo","dojo/_base/xhr","dojo/dom-construct","dojox/html/entities","js/webext/widgets/Alert"],
function(l,m,k,j,e){l.provide("deploy.widgets.navigation.Settings");config.data.tabSets.push({id:"settings",hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"settings",defaultTab:"main",tabs:[{id:"main",label:i18n("Settings"),view:"deploy/views/settings/settingsIndex"}]});config.data.tabSets.push({id:"automation",hashPattern:["tab"],breadcrumbs:["home","topLevelTab","automation"],selectedTopLevelTab:"settings",defaultTab:"automationPlugins",tabs:[{id:"automationPlugins",
label:i18n("Automation Plugins"),view:"deploy/views/plugin/pluginList"},{id:"sourceConfigPlugins",label:i18n("Source Configuration Plugins"),view:"deploy/views/plugin/sourceConfigList"},{id:"runningSourceConfigs",label:i18n("Running Version Imports"),view:"deploy/views/version/runningVersionImports"},{id:"locks",label:i18n("Locks"),view:"deploy/views/lock/lockList",isVisible:function(){return config.data.permissions[security.system.viewLocks]}},{id:"blueprintdesignerIntegrations",label:i18n("Blueprint Designer Integrations"),
view:"deploy/views/settings/blueprintdesignerIntegrations",isVisible:function(){return config.data.permissions[security.system.manageBlueprintDesignIntegrations]}},{id:"postProcessingScripts",label:i18n("Post Processing Scripts"),view:"deploy/views/scripts/postProcessingList"},{id:"statuses",label:i18n("Statuses"),view:"deploy/views/status/statusList"}]});config.data.tabSets.push({id:"system",hashPattern:["tab"],breadcrumbs:["home","topLevelTab","system"],selectedTopLevelTab:"settings",defaultTab:"properties",
tabs:[{id:"logging",label:i18n("Logging"),view:"deploy/views/settings/logging",isVisible:function(){return config.data.permissions[security.system.manageLogging]}},{id:"network",label:i18n("Network"),view:"deploy/views/network/networkRelayList",isVisible:function(){return config.data.permissions[security.system.viewNetworkSettings]}},{id:"notification",label:i18n("Notifications"),view:"deploy/views/notification/notificationSchemeList"},{id:"auditLog",label:i18n("Audit Log"),view:"deploy/views/settings/auditlog",
isVisible:function(){return config.data.permissions[security.system.viewAuditLog]}},{id:"patches",label:i18n("Patches"),view:"deploy/views/settings/patches"},{id:"properties",label:i18n("Properties"),view:"deploy/views/settings/systemProperties"},{id:"artifactRepo",label:i18n("CodeStation"),view:"deploy/views/settings/artifactRepo"},{id:"settings",label:i18n("System Settings"),view:"deploy/views/settings/systemSettings",isVisible:function(){return config.data.permissions[security.system.viewBasicSystemSettings]}}]});
config.data.tabSets.push({id:"notificationScheme",hashPattern:["notificationScheme","tab"],breadcrumbs:["home","topLevelTab","notificationSchemes","notificationScheme"],selectedTopLevelTab:"settings",getDetailTitle:function(){return i18n("Notification Scheme: %s",j.encode(appState.notificationScheme.name))},getDetailDescription:function(){return j.encode(appState.notificationScheme.description)},stateCalls:[{targetAppStateEntry:"notificationScheme",getUrl:function(d){return bootstrap.restUrl+"notification/notificationScheme/"+
d.notificationScheme}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/notification/notificationSchemeMain"}]});config.data.permissions[security.system.manageNotificationSchemes]&&config.data.tabSets[config.data.tabSets.length-1].tabs.push({id:"edit",label:i18n("Edit"),view:"deploy/views/notification/editNotificationScheme"});config.data.tabSets.push({id:"automationPlugin",hashPattern:["automationPlugin","tab"],breadcrumbs:["home","topLevelTab","automation","automationPlugin"],
selectedTopLevelTab:"settings",getDetailTitle:function(){return i18n("Automation Plugin: %s",j.encode(i18n(appState.automationPlugin.name)))},getDetailDescription:function(){return j.encode(i18n(appState.automationPlugin.description))},stateCalls:[{targetAppStateEntry:"automationPlugin",getUrl:function(d){return bootstrap.restUrl+"plugin/automationPlugin/"+d.automationPlugin}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Main"),view:"deploy/views/automationPlugin/automationPluginMain"}]});config.data.tabSets.push({id:"license",
hashPattern:["license","tab"],breadcrumbs:["home","topLevelTab","licenses","license"],selectedTopLevelTab:"settings",getDetailTitle:function(){return i18n("License %s",appState.license.licenseId)},getDetailFields:function(){return[{label:i18n("Description"),value:j.encode(appState.license.description)}]},stateCalls:[{targetAppStateEntry:"license",getUrl:function(d){return bootstrap.restUrl+"license/"+d.license}}],defaultTab:"edit",tabs:[{id:"edit",label:i18n("Edit"),view:"deploy/views/license/editLicense"}]});
var h=config.data.permissions[security.system.manageDiagnostics];h&&config.data.tabSets.push({id:"diagnostics",hashPattern:["tab"],breadcrumbs:["home","topLevelTab","diagnostics"],selectedTopLevelTab:"settings",defaultTab:"threadDumps",tabs:[{id:"threadDumps",label:i18n("Java Thread Dumps"),view:"deploy/views/settings/diagnostics/threadDumps"},{id:"restCallLog",label:i18n("REST Call Log"),view:"deploy/views/settings/diagnostics/restCallLog"},{id:"metadataIndexing",label:i18n("Metadata Indexing"),
view:"deploy/views/settings/diagnostics/metadataIndexing"}]});config.data.breadcrumbItems.push({id:"system",getHash:function(){return"system"},isUserData:!1,getLabel:function(){return i18n("System")}});config.data.breadcrumbItems.push({id:"automation",getHash:function(){return"automation/automationPlugins"},isUserData:!1,getLabel:function(){return i18n("Automation")}});config.data.breadcrumbItems.push({id:"automationPlugin",getHash:function(){return"automationPlugin/"+appState.automationPlugin.id},
isUserData:!1,getLabel:function(){return j.encode(i18n(appState.automationPlugin.name))}});config.data.breadcrumbItems.push({id:"notificationSchemes",getHash:function(){return"system/notification"},isUserData:!1,getLabel:function(){return i18n("Notifications")}});config.data.breadcrumbItems.push({id:"notificationScheme",getHash:function(){return"notificationScheme/"+appState.notificationScheme.id},isUserData:!0,getLabel:function(){return j.encode(appState.notificationScheme.name)}});config.data.breadcrumbItems.push({id:"diagnostics",
getHash:function(){return"system/diagnostics"},isUserData:!0,getLabel:function(){return i18n("Diagnostics")},isVisible:function(){return h}});config.data.tabSets.push({id:"noPermissions",hashPattern:["noPermissions"],breadcrumbs:["home"],selectedTopLevelTab:"noPermissions",defaultTab:"noPermissions",tabs:[{id:"noPermissions",label:i18n("No Permissions"),view:"deploy/views/noPermissions"}]});config.data.alerts={ALERT_LICENSE_LOG_ENTRIES:{getDisplay:function(){return k.create("div",{innerHTML:i18n("A license could not be obtained for a server or agent. Please check your license log for more information.")})},
dismiss:function(){m.del({url:bootstrap.restUrl+"license/dismiss",load:function(){},error:function(d){new e({messages:[i18n("An error occurred while dismissing the alert."),"",util.escape(d.responseText)]})}})}},ALERT_PROCESS_INDEXING:{getDisplay:function(d){d=k.create("div",{innerHTML:i18n("Processes are currently being indexed. Navigating to a process may fail until this is complete. Current completion: %s%",d.data.completionPercent)});if(h){var c=k.create("div",{},d);k.create("a",{href:"#diagnostics/metadataIndexing",
innerHTML:i18n("View detailed status...")},c)}return d}}}})},"deploy/widgets/navigation/Applications":function(){define(["dojo/dom-construct","dojo/_base/kernel","dojo/_base/xhr","dojox/html/entities"],function(l,m,k,j){m.provide("deploy.widgets.navigation.Applications");config.data.tabSets.push({id:"applications",hashPattern:["tab"],breadcrumbs:["home","topLevelTab"],selectedTopLevelTab:"applications",defaultTab:"applications",tabs:[{id:"applications",label:i18n("Applications"),view:"deploy/views/application/applicationList"},
{id:"templates",label:i18n("Templates"),view:"deploy/views/applicationTemplate/applicationTemplateList"}]});config.data.tabSets.push({id:"application",hashPattern:["application","tab"],breadcrumbs:["home","topLevelTab","application"],selectedTopLevelTab:"applications",getDetailTitle:function(){return j.encode(i18n("Application: %s",util.applyBTD(appState.application.name)))},getDetailFields:function(){var e=[{label:i18n("Created By"),value:j.encode(appState.application.user)},{label:i18n("Created On"),
value:util.dateFormatShort(appState.application.created)}],h=appState.application.template;h&&e.push({label:i18n("Template"),value:'<a href="#applicationTemplate/'+h.id+"/"+h.version+'">'+j.encode(h.name)+"</a>"});return e},getDetailDescription:function(){return j.encode(appState.application.description)},stateCalls:[{targetAppStateEntry:"application",getUrl:function(e){return bootstrap.restUrl+"deploy/application/"+e.application}}],defaultTab:"environments",tabs:[{id:"environments",label:i18n("Environments"),
view:"deploy/views/application/applicationEnvironments"},{id:"history",label:i18n("History"),view:"deploy/views/application/applicationHistory"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/application/applicationConfiguration"},{id:"components",label:i18n("Components"),view:"deploy/views/application/applicationComponents"},{id:"blueprints",label:i18n("Blueprints"),view:"deploy/views/application/applicationBlueprints"},{id:"snapshots",label:i18n("Snapshots"),
view:"deploy/views/application/applicationSnapshots"},{id:"processes",label:i18n("Processes"),view:"deploy/views/application/applicationProcesses"},{id:"calendar",label:i18n("Calendar"),view:"deploy/views/application/applicationCalendar"},{id:"changes",label:i18n("Changes"),view:"deploy/views/application/applicationChangelog"},{id:"newSnapshot",label:"",view:"deploy/views/snapshot/editSnapshot",isVisible:function(){return!1}}]});config.data.tabSets.push({id:"applicationTemplate",hashPattern:["applicationTemplate",
"applicationTemplateVersion","tab","navData"],breadcrumbs:["home","applicationTemplates","applicationTemplate"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Application Template: %s",appState.applicationTemplate.name.escape())},getDetailFields:function(){var e=[];e.push({label:i18n("Version"),value:j.encode(i18n("%s of %s",appState.applicationTemplate.version,appState.applicationTemplate.versionCount))});e.push({label:"",value:util.vc.generateVersionControls(appState.applicationTemplate,
function(e){return"applicationTemplate/"+appState.applicationTemplate.id+"/"+e})});return e},getDetailDescription:function(){return j.encode(appState.applicationTemplate.description)},stateCalls:[{targetAppStateEntry:"applicationTemplate",getUrl:function(e,h){h.applicationTemplateVersion={id:e.applicationTemplateVersion};return bootstrap.restUrl+"deploy/applicationTemplate/"+e.applicationTemplate+"/"+e.applicationTemplateVersion}},{getUrl:function(e,h){h.goBack={id:e.navData}}}],getPageAlerts:function(){var e=
[],h=!1,d=l.create("div");l.create("div",{innerHTML:i18n("You can take more steps to enhance this application template and guide users through the application creation process:")},d);var c=l.create("ul",{},d);0===appState.applicationTemplate.tagRequirements.length&&(l.create("li",{innerHTML:i18n("Select component tags to require users to assign components to their applications.")},c),h=!0);!1===appState.applicationTemplate.hasProcess&&(l.create("li",{innerHTML:i18n("Create an application process to deploy components or run other processes.")},
c),h=!0);0===appState.applicationTemplate.environmentTemplates.length&&(l.create("li",{innerHTML:i18n("Create environment templates to define the resource tree and allow users to add agents to it.")},c),h=!0);h&&e.push({className:"lowPriority",html:d});l.create("div",{innerHTML:i18n('Confirm that the permissions are correctly set for the roles that are used to create applications from this template. For more information about these permissions, open the documentation and search for "Permissions reference for using application templates."')},
d);return e},defaultTab:"applications",tabs:[{id:"applications",label:i18n("Applications"),view:"deploy/views/applicationTemplate/applicationTemplateApplications"},{id:"configuration",label:i18n("Configuration"),view:"deploy/views/applicationTemplate/applicationTemplateConfiguration"},{id:"processes",label:i18n("Processes"),view:"deploy/views/applicationTemplate/applicationTemplateProcesses"},{id:"environmentTemplates",label:i18n("Environment Templates"),view:"deploy/views/applicationTemplate/applicationTemplateEnvironmentTemplates"},
{id:"changes",label:i18n("Changes"),view:"deploy/views/applicationTemplate/applicationTemplateChangeLog"}]});config.data.breadcrumbItems.push({id:"appOrTmpl",getHash:function(){var e="";appState.application?e="applications":appState.applicationTemplate&&(e="applications/templates");return e},getLabel:function(){var e="";appState.application?e=i18n("Applications"):appState.applicationTemplate&&(e=i18n("Application Templates"));return e}});config.data.tabSets.push({id:"applicationProcess",hashPattern:["applicationProcess",
"applicationProcessVersion","tab","navData"],breadcrumbs:["home","appOrTmpl","applicationOrTemplate","applicationProcesses","applicationProcess"],selectedTopLevelTab:"applications",stateCalls:[{targetAppStateEntry:"applicationProcess",getUrl:function(e,h){h.applicationProcessVersion={id:e.applicationProcessVersion};return bootstrap.restUrl+"deploy/applicationProcess/"+e.applicationProcess+"/"+e.applicationProcessVersion},postGet:function(e,h){h.application=e.application;h.applicationTemplate=e.applicationTemplate}},
{getUrl:function(e,h){h.goBack={id:e.navData}}}],defaultTab:"activities",tabs:[{id:"activities",label:i18n("Design"),view:"deploy/views/applicationProcess/applicationProcessActivities"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/applicationProcess/applicationProcessConfiguration"},{id:"inventoryChanges",label:i18n("Inventory Changes"),view:"deploy/views/applicationProcess/applicationProcessInventoryChanges",isVisible:function(){var e=!1;appState.application&&
(e=appState.application.security["Edit Basic Settings"]&&"ADVANCED"!==appState.applicationProcess.inventoryManagementType);return e}},{id:"changes",label:i18n("Changes"),view:"deploy/views/applicationProcess/applicationProcessChangelog"}]});config.data.tabSets.push({id:"environment",hashPattern:["environment","tab"],breadcrumbs:["home","topLevelTab","application","environments","environment"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Environment: %s for %s",j.encode(appState.environment.name),
j.encode(appState.application.name))},getDetailDescription:function(){return j.encode(appState.environment.description)},getDetailFields:function(){var e=[];if(appState.environment.blueprint){var h;h=appState.environment.blueprint.deleted?l.create("div",{innerHTML:i18n("%s [Deleted]",appState.environment.blueprint.name.escape()),className:"no-link"}):l.create("a",{innerHTML:appState.environment.blueprint.name.escape(),href:"#resourceTemplate/"+appState.environment.blueprint.id});e.push({label:i18n("Template"),
value:h})}return e},stateCalls:[{targetAppStateEntry:"environment",getUrl:function(e){return bootstrap.restUrl+"deploy/environment/"+e.environment},postGet:function(e,h){h.application=e.application}}],defaultTab:"main",tabs:[{id:"main",label:i18n("Resources"),view:"deploy/views/environment/environmentMain"},{id:"history",label:i18n("History"),view:"deploy/views/environment/environmentHistory"},{id:"calendar",label:i18n("Calendar"),view:"deploy/views/environment/environmentCalendar"},{id:"configuration",
label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/environment/environmentConfiguration"},{id:"approvals",label:i18n("Approval Process"),view:"deploy/views/environment/editEnvironmentApprovalProcess",isVisible:function(){return appState.environment.requireApprovals}},{id:"changes",label:i18n("Changes"),view:"deploy/views/environment/environmentChangelog"}]});config.data.tabSets.push({id:"environmentTemplate",hashPattern:["environmentTemplate","environmentTemplateVersion",
"tab","navData"],breadcrumbs:["home","applicationTemplates","applicationTemplate","environmentTemplates","environmentTemplate"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Environment Template: %s for %s",j.encode(appState.environmentTemplate.name),j.encode(appState.applicationTemplate.name))},getDetailFields:function(){var e=[];e.push({label:i18n("Version"),value:j.encode(i18n("%s of %s",appState.environmentTemplate.version,appState.environmentTemplate.versionCount))});
e.push({label:"",value:util.vc.generateVersionControls(appState.environmentTemplate,function(e){return"environmentTemplate/"+appState.environmentTemplate.id+"/"+e})});return e},getDetailDescription:function(){return j.encode(appState.environmentTemplate.description)},stateCalls:[{targetAppStateEntry:"environmentTemplate",getUrl:function(e,h){h.environmentTemplateVersion={id:e.environmentTemplateVersion};return bootstrap.restUrl+"deploy/environmentTemplate/"+e.environmentTemplate+"/"+e.environmentTemplateVersion},
postGet:function(e,h){h.applicationTemplate=e.applicationTemplate}},{getUrl:function(e,h){h.goBack={id:e.navData}}}],defaultTab:"configuration",tabs:[{id:"configuration",label:i18n("Configuration"),view:"deploy/views/environmentTemplate/environmentTemplateConfiguration"},{id:"resourceTemplate",label:i18n("Resource Template"),view:"deploy/views/environmentTemplate/environmentTemplateResourceTemplate"},{id:"approvalProcess",label:i18n("Approval Process"),view:"deploy/views/environmentTemplate/editEnvironmentTemplateApprovalProcess",
isVisible:function(){return appState.environmentTemplate.requireApprovals}},{id:"changes",label:i18n("Changes"),view:"deploy/views/environmentTemplate/environmentTemplateChangeLog"}]});config.data.tabSets.push({id:"environmentPropSheet",hashPattern:["environment","component","environmentPropSheetVersion","tab"],breadcrumbs:["home","topLevelTab","application","environments","environment"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Historical Properties for %s",j.encode(appState.environment.name))},
getDetailFields:function(){var e=[];e.push({label:i18n("Version"),value:i18n("%s of %s",appState.environmentPropSheet.version,appState.environmentPropSheet.versionCount)});e.push({label:"",value:util.vc.generateVersionControls(appState.environmentPropSheet,function(e){return"environmentPropSheet/"+appState.environment.id+"/"+appState.component.id+"/"+e})});return e},stateCalls:[{targetAppStateEntry:"environmentPropSheet",getUrl:function(e,h){h.environmentPropSheetVersion={id:e.environmentPropSheetVersion};
return bootstrap.restUrl+"deploy/environmentPropSheet/"+e.environment+"/"+e.component+"/"+e.environmentPropSheetVersion}},{targetAppStateEntry:"environment",getUrl:function(e,h){h.environmentPropSheetVersion={id:e.environmentPropSheetVersion};return bootstrap.restUrl+"deploy/environment/"+e.environment},postGet:function(e,h){h.application=e.application}},{targetAppStateEntry:"component",getUrl:function(e,h){h.environmentPropSheetVersion={id:e.environmentPropSheetVersion};return bootstrap.restUrl+
"deploy/component/"+e.component}}],defaultTab:"properties",tabs:[{id:"properties",label:i18n("Properties"),view:"deploy/views/environmentPropSheet/environmentPropSheet"}]});config.data.tabSets.push({id:"environmentComparison",hashPattern:["environment","compareEnvironment","tab"],breadcrumbs:["home","topLevelTab","application","environments"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Environment Comparison: %s and %s",j.encode(appState.environment.name),j.encode(appState.compareEnvironment.name))},
stateCalls:[{targetAppStateEntry:"environment",getUrl:function(e){return bootstrap.restUrl+"deploy/environment/"+e.environment},postGet:function(e,h){h.application=e.application}},{targetAppStateEntry:"compareEnvironment",getUrl:function(e){return bootstrap.restUrl+"deploy/environment/"+e.compareEnvironment}}],defaultTab:"versions",tabs:[{id:"versions",label:i18n("Versions"),view:"deploy/views/environmentComparison/environmentVersionComparison"},{id:"files",label:i18n("Files"),view:"deploy/views/environmentComparison/environmentFileComparison"},
{id:"configuration",label:i18n("Configuration"),view:"deploy/views/environmentComparison/environmentConfigComparison"}]});config.data.tabSets.push({id:"multiEnvironmentComparison",hashPattern:["application","tab"],breadcrumbs:["home","topLevelTab","application","environments"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("%s: Environment Comparison",j.encode(appState.application.name))},stateCalls:[{targetAppStateEntry:"application",getUrl:function(e){return bootstrap.restUrl+
"deploy/application/"+e.application}}],defaultTab:"configuration",tabs:[{id:"configuration",label:i18n("Configuration"),view:"deploy/views/multiEnvironmentComparison/multiEnvironmentConfigComparison"}]});config.data.tabSets.push({id:"snapshot",hashPattern:["snapshot","tab"],breadcrumbs:["home","topLevelTab","application","snapshots","snapshot"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Snapshot: %s",j.encode(appState.snapshot.name))},getDetailFields:function(){var e=
[];e.push({label:i18n("Versions Locked"),value:appState.snapshot.versionsLocked?i18n("Yes"):i18n("No")});e.push({label:i18n("Configuration Locked"),value:appState.snapshot.configLocked?i18n("Yes"):i18n("No")});return e},getDetailDescription:function(){return j.encode(appState.snapshot.description)},stateCalls:[{targetAppStateEntry:"snapshot",getUrl:function(e){return bootstrap.restUrl+"deploy/snapshot/"+e.snapshot},postGet:function(e,h){h.application=e.application}}],defaultTab:"dashboard",tabs:[{id:"dashboard",
label:i18n("Dashboard"),view:"deploy/views/snapshot/snapshotDashboard"},{id:"versions",label:i18n("Component Versions"),view:"deploy/views/snapshot/snapshotVersions"},{id:"configuration",label:i18n("Configuration"),className:"configurationTab",view:"deploy/views/snapshot/snapshotConfiguration"},{id:"calendar",label:i18n("Calendar"),view:"deploy/views/snapshot/snapshotCalendar"}]});config.data.tabSets.push({id:"snapshotComparison",hashPattern:["snapshot","compareSnapshot","tab"],breadcrumbs:["home",
"topLevelTab","application","snapshots"],selectedTopLevelTab:"applications",getDetailTitle:function(){return i18n("Snapshot Comparison: %s %s and %s",j.encode(appState.application.name),j.encode(appState.snapshot.name),j.encode(appState.compareSnapshot.name))},stateCalls:[{targetAppStateEntry:"snapshot",getUrl:function(e){return bootstrap.restUrl+"deploy/snapshot/"+e.snapshot},postGet:function(e,h){h.application=e.application}},{targetAppStateEntry:"compareSnapshot",getUrl:function(e){return bootstrap.restUrl+
"deploy/snapshot/"+e.compareSnapshot}}],defaultTab:"versions",tabs:[{id:"versions",label:i18n("Versions"),view:"deploy/views/snapshotComparison/snapshotVersionComparison"},{id:"configuration",label:i18n("Configuration"),view:"deploy/views/snapshotComparison/snapshotConfigComparison"},{id:"properties",label:i18n("Properties"),view:"deploy/views/snapshotComparison/snapshotPropertyComparison"},{id:"files",label:i18n("Compare Files"),view:"deploy/views/snapshotComparison/snapshotFileComparison"}]});config.data.breadcrumbItems.push({id:"application",
getHash:function(){return"application/"+appState.application.id},isUserData:!0,getLabel:function(){return j.encode(appState.application.name)}});config.data.breadcrumbItems.push({id:"applicationTemplates",getHash:function(){return"applications/templates"},isUserData:!1,getLabel:function(){return i18n("Application Templates")}});config.data.breadcrumbItems.push({id:"applicationTemplate",getHash:function(){return"applicationTemplate/"+appState.applicationTemplate.id+"/-1"},isUserData:!0,getLabel:function(){return j.encode(appState.applicationTemplate.name)}});
config.data.breadcrumbItems.push({id:"applicationOrTemplate",getHash:function(){var e="";appState.application?e="application/"+appState.application.id:appState.applicationTemplate&&(e="applicationTemplate/"+appState.applicationTemplate.id+"/-1");return e},isUserDate:!0,getLabel:function(){var e="";appState.application?e=j.encode(appState.application.name):appState.applicationTemplate&&(e=j.encode(appState.applicationTemplate.name));return e}});config.data.breadcrumbItems.push({id:"applicationProcesses",
getHash:function(){var e="";appState.application?e="application/"+appState.application.id+"/processes":appState.applicationTemplate&&(e="applicationTemplate/"+appState.applicationTemplate.id+"/-1/processes");return e},isUserData:!1,getLabel:function(){return i18n("Processes")}});config.data.breadcrumbItems.push({id:"environments",getHash:function(){return"application/"+appState.application.id+"/environments"},isUserData:!1,getLabel:function(){return i18n("Environments")}});config.data.breadcrumbItems.push({id:"environmentTemplates",
getHash:function(){return"applicationTemplate/"+appState.applicationTemplate.id+"/-1/environmentTemplates"},isUserData:!1,getLabel:function(){return i18n("Environment Templates")}});config.data.breadcrumbItems.push({id:"environmentTemplate",getHash:function(){return"environmentTemplate/"+appState.environmentTemplate.id+"/-1"},isUserData:!0,getLabel:function(){return j.encode(appState.environmentTemplate.name)}});config.data.breadcrumbItems.push({id:"snapshots",getHash:function(){return"application/"+
appState.application.id+"/snapshots"},isUserData:!1,getLabel:function(){return i18n("Snapshots")}});config.data.breadcrumbItems.push({id:"applicationProcess",getHash:function(){return"applicationProcess/"+appState.applicationProcess.id},isUserData:!1,getLabel:function(){return i18n("Process: %s",appState.applicationProcess.name.escape())}});config.data.breadcrumbItems.push({id:"environment",getHash:function(){return"environment/"+appState.environment.id},isUserData:!1,getLabel:function(){return i18n("Environment: %s",
appState.environment.name.escape())}});config.data.breadcrumbItems.push({id:"snapshot",getHash:function(){return"snapshot/"+appState.snapshot.id},isUserData:!1,getLabel:function(){return i18n("Snapshot: %s",appState.snapshot.name.escape())}})})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(l,m,k){var j=k._createWrapper;k._createWrapper=function(e){e.declaredClass||(e={_popupWrapper:e.parentNode&&l.contains(e.parentNode,"dijitPopup")?
e.parentNode:null,domNode:e,destroy:function(){},ownerDocument:e.ownerDocument,ownerDocumentBody:m.body(e.ownerDocument)});return j.call(this,e)};var e=k.open;k.open=function(h){if(h.orient&&"string"!=typeof h.orient&&!("length"in h.orient)){var d=[],c;for(c in h.orient)d.push({aroundCorner:c,corner:h.orient[c]});h.orient=d}return e.call(this,h)};return k})},"dijit/ColorPalette":function(){define("require,dojo/text!./templates/ColorPalette.html,./_Widget,./_TemplatedMixin,./_PaletteMixin,./hccss,dojo/i18n,dojo/_base/Color,dojo/_base/declare,dojo/dom-construct,dojo/string,dojo/i18n!dojo/nls/colors,dojo/colors".split(","),
function(l,m,k,j,e,h,d,c,b,a,f){var n=b("dijit.ColorPalette",[k,j,e],{palette:"7x10",_palettes:{"7x10":["white,seashell,cornsilk,lemonchiffon,lightyellow,palegreen,paleturquoise,lightcyan,lavender,plum".split(","),"lightgray,pink,bisque,moccasin,khaki,lightgreen,lightseagreen,lightskyblue,cornflowerblue,violet".split(","),"silver,lightcoral,sandybrown,orange,palegoldenrod,chartreuse,mediumturquoise,skyblue,mediumslateblue,orchid".split(","),"gray,red,orangered,darkorange,yellow,limegreen,darkseagreen,royalblue,slateblue,mediumorchid".split(","),
"dimgray,crimson,chocolate,coral,gold,forestgreen,seagreen,blue,blueviolet,darkorchid".split(","),"darkslategray,firebrick,saddlebrown,sienna,olive,green,darkcyan,mediumblue,darkslateblue,darkmagenta".split(","),"black,darkred,maroon,brown,darkolivegreen,darkgreen,midnightblue,navy,indigo,purple".split(",")],"3x4":[["white","lime","green","blue"],["silver","yellow","fuchsia","navy"],["gray","red","purple","black"]]},templateString:m,baseClass:"dijitColorPalette",_dyeFactory:function(a,b,c,d){return new this._dyeClass(a,
b,c,d)},buildRendering:function(){this.inherited(arguments);this._dyeClass=b(n._Color,{palette:this.palette});this._preparePalette(this._palettes[this.palette],d.getLocalization("dojo","colors",this.lang))}});n._Color=b("dijit._Color",c,{template:"<span class='dijitInline dijitPaletteImg'><img src='${blankGif}' alt='${alt}' title='${title}' class='dijitColorPaletteSwatch' style='background-color: ${color}'/></span>",hcTemplate:"<span class='dijitInline dijitPaletteImg' style='position: relative; overflow: hidden; height: 12px; width: 14px;'><img src='${image}' alt='${alt}' title='${title}' style='position: absolute; left: ${left}px; top: ${top}px; ${size}'/></span>",
_imagePaths:{"7x10":l.toUrl("./themes/a11y/colors7x10.png"),"3x4":l.toUrl("./themes/a11y/colors3x4.png")},constructor:function(a,b,d,e){this._title=e;this._row=b;this._col=d;this.setColor(c.named[a])},getValue:function(){return this.toHex()},fillCell:function(b,c){var d=f.substitute(h("highcontrast")?this.hcTemplate:this.template,{color:this.toHex(),blankGif:c,alt:this._title,title:this._title,image:this._imagePaths[this.palette].toString(),left:-20*this._col-5,top:-20*this._row-5,size:"7x10"==this.palette?
"height: 145px; width: 206px":"height: 64px; width: 86px"});a.place(d,b)}});return n})},"url:dijit/templates/ColorPalette.html":'<div class="dijitInline dijitColorPalette" role="grid">\n\t<table dojoAttachPoint="paletteTableNode" class="dijitPaletteTable" cellSpacing="0" cellPadding="0" role="presentation">\n\t\t<tbody data-dojo-attach-point="gridNode"></tbody>\n\t</table>\n</div>\n',"dijit/_PaletteMixin":function(){define("dojo/_base/declare,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/_base/event,dojo/keys,dojo/_base/lang,./_CssStateMixin,./focus,./typematic".split(","),
function(l,m,k,j,e,h,d,c,b,a){return l("dijit._PaletteMixin",[c],{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:null,_dyeFactory:function(a){return new ("string"==typeof this.dyeClass?d.getObject(this.dyeClass):this.dyeClass)(a)},_preparePalette:function(b,c){this._cells=[];var d=this._blankGif;this.connect(this.gridNode,"ondijitclick","_onCellClick");for(var e=0;e<b.length;e++)for(var k=j.create("tr",{tabIndex:"-1",role:"row"},
this.gridNode),l=0;l<b[e].length;l++){var m=b[e][l];if(m){var u=this._dyeFactory(m,e,l,c[m]),m=j.create("td",{"class":this.cellClass,tabIndex:"-1",title:c[m],role:"gridcell"},k);u.fillCell(m,d);m.idx=this._cells.length;this._cells.push({node:m,dye:u})}}this._xDim=b[0].length;this._yDim=b.length;var w={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},v;for(v in w)this.own(a.addKeyListener(this.domNode,{charOrCode:h[v],ctrlKey:!1,
altKey:!1,shiftKey:!1},this,function(){var a=w[v];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){b.focus(this._currentFocus)},_onCellClick:function(a){for(var c=a.target;"TD"!=c.tagName;){if(!c.parentNode||c==this.gridNode)return;c=c.parentNode}var d=this._getDye(c).getValue();this._setCurrent(c);b.focus(c);this._setValueAttr(d,!0);e.stop(a)},_setCurrent:function(a){"_currentFocus"in
this&&m.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&m.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,b){0<=this._selectedCell&&k.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");this._selectedCell=-1;if(a)for(var c=0;c<this._cells.length;c++)if(a==this._cells[c].dye.getValue()){this._selectedCell=c;k.add(this._cells[c].node,this.cellClass+"Selected");break}this._set("value",0<=this._selectedCell?a:null);if(b||void 0===b)this.onChange(a)},onChange:function(){},
_navigateByKey:function(a,c){if(-1!=c){var e=this._currentFocus.idx+a;if(e<this._cells.length&&-1<e)e=this._cells[e].node,this._setCurrent(e),this.defer(d.hitch(b,"focus",e))}},_getDye:function(a){return this._cells[a.idx].dye}})})},"dojo/colors":function(){define("dojo/colors",["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(l,m,k,j){var e={};m.setObject("dojo.colors",e);var h=function(c,b,a){0>a&&++a;1<a&&--a;var d=6*a;return 1>d?c+(b-c)*d:1>2*a?b:2>3*a?c+6*(b-c)*(2/3-
a):c};l.colorFromRgb=k.fromRgb=function(c,b){var a=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(a){var d=a[2].split(/\s*,\s*/),e=d.length,a=a[1];if("rgb"==a&&3==e||"rgba"==a&&4==e){a=d[0];return"%"==a.charAt(a.length-1)?(a=j.map(d,function(a){return 2.56*parseFloat(a)}),4==e&&(a[3]=d[3]),k.fromArray(a,b)):k.fromArray(d,b)}if("hsl"==a&&3==e||"hsla"==a&&4==e){var a=(parseFloat(d[0])%360+360)%360/360,l=parseFloat(d[1])/100,m=parseFloat(d[2])/100,l=0.5>=m?m*(l+1):m+l-m*l,m=2*m-l,a=[256*
h(m,l,a+1/3),256*h(m,l,a),256*h(m,l,a-1/3),1];4==e&&(a[3]=d[3]);return k.fromArray(a,b)}}return null};var d=function(c,b,a){c=Number(c);return isNaN(c)?a:c<b?b:c>a?a:c};k.prototype.sanitize=function(){this.r=Math.round(d(this.r,0,255));this.g=Math.round(d(this.g,0,255));this.b=Math.round(d(this.b,0,255));this.a=d(this.a,0,1);return this};e.makeGrey=k.makeGrey=function(c,b){return k.fromArray([c,c,c,b])};m.mixin(k.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,
255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],
darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],
gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,
182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,
105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return k})},"dijit/form/MultiSelect":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/dom-geometry","dojo/query","./_FormValueWidget"],function(l,m,k,j,e){return m("dijit.form.MultiSelect",e,{size:7,templateString:"<select multiple='true' ${!nameAttrSetting} data-dojo-attach-point='containerNode,focusNode' data-dojo-attach-event='onchange: _onChange'></select>",addSelected:function(e){e.getSelected().forEach(function(d){if(this.restoreOriginalText)d.text=this.enforceTextDirWithUcc(this.restoreOriginalText(d),d.text);this.containerNode.appendChild(d);this.domNode.scrollTop=
this.domNode.offsetHeight;d=e.domNode.scrollTop;e.domNode.scrollTop=0;e.domNode.scrollTop=d},this);this._set("value",this.get("value"))},getSelected:function(){return j("option",this.containerNode).filter(function(e){return e.selected})},_getValueAttr:function(){return l.map(this.getSelected(),function(e){return e.value})},multiple:!0,_setValueAttr:function(e,d){j("option",this.containerNode).forEach(function(c){c.selected=-1!=l.indexOf(e,c.value)});this.inherited(arguments)},invertSelection:function(e){var d=
[];j("option",this.containerNode).forEach(function(c){c.selected||d.push(c.value)});this._setValueAttr(d,!(!1===e||null==e))},_onChange:function(){this._handleOnChange(this.get("value"),!0)},resize:function(e){e&&k.setMarginBox(this.domNode,e)},postCreate:function(){this._set("value",this.get("value"));this.inherited(arguments)},_setTextDirAttr:function(e){if((this.textDir!=e||!this._created)&&this.enforceTextDirWithUcc)this._set("textDir",e),j("option",this.containerNode).forEach(function(d){if(!this._created&&
d.value===d.text)d.value=d.text;d.text=this.enforceTextDirWithUcc(d,d.originalText||d.text)},this)}})})},"dojo/_firebug/firebug":function(){define("../_base/kernel,require,../_base/html,../sniff,../_base/array,../_base/lang,../_base/event,../_base/unload".split(","),function(l,m,k,j){function e(a){Z=a||!Z;if(S)S.style.display=Z?"block":"none"}function h(a,b,c,e){(a=window.open("","_firebug","status=0,menubar=0,resizable=1,top="+b+",left="+a+",width="+c+",height="+e+",scrollbars=1,addressbar=0"))||
alert("Firebug Lite could not open a pop-up window, most likely because of a blocker.\nEither enable pop-ups for this domain, or change the djConfig to popup=false.");d(a);b=a.document;b.write('<html style="height:100%;"><head><title>Firebug Lite</title></head>\n<body bgColor="#ccc" style="height:97%;" onresize="opener.onFirebugResize()">\n<div id="fb"></div></body></html>');b.close();return a}function d(b){var c=new Date;c.setTime(c.getTime()+5184E6);var c=c.toUTCString(),d=b.document,e;b.innerWidth?
e=function(){return{w:b.innerWidth,h:b.innerHeight}}:d.documentElement&&d.documentElement.clientWidth?e=function(){return{w:d.documentElement.clientWidth,h:d.documentElement.clientHeight}}:d.body&&(e=function(){return{w:d.body.clientWidth,h:d.body.clientHeight}});window.onFirebugResize=function(){a(e().h);clearInterval(b._firebugWin_resize);b._firebugWin_resize=setTimeout(function(){document.cookie="_firebugPosition="+[b.screenLeft,b.screenTop,b.outerWidth||b.document.body.offsetWidth,b.outerHeight||
b.document.body.offsetHeight].join()+"; expires="+c+"; path=/"},5E3)}}function c(){Q=null;V.console&&V.console.clear();F=ba=M=H=S=V=null;P=[];O=[];X={}}function b(){var a=F.value;F.value="";f([">  ",a],"command");try{eval(a)}catch(b){}}function a(a){a=a?a-(25+F.offsetHeight+25+0.01*a)+"px":S.offsetHeight-25-F.offsetHeight+"px";H.style.top="25px";H.style.height=a;M.style.height=a;M.style.top="25px";ba.style.height=a;ba.style.top="25px";F.style.bottom=0;l.addOnWindowUnload(c)}function f(a,b,c){H?r(a,
b,c):P.push([a,b,c])}function n(){var a=P;P=[];for(var b=0;b<a.length;++b)r(a[b][0],a[b][1],a[b][2])}function r(a,b,c){var d=H.scrollTop+H.offsetHeight>=H.scrollHeight,c=c||t;c(a,b);if(d)H.scrollTop=H.scrollHeight-H.offsetHeight}function t(a,b){var c=H.ownerDocument.createElement("div");c.className="logRow"+(b?" logRow-"+b:"");c.innerHTML=a.join("");(O.length?O[O.length-1]:H).appendChild(c)}function q(a,b){s(a,b);var c=H.ownerDocument.createElement("div");c.className="logGroupBox";(O.length?O[O.length-
1]:H).appendChild(c);O.push(c)}function o(){O.pop()}function s(a,b){var c=[],d=a[0],e=0;"string"!=typeof d&&(d="",e=-1);for(var h=u(d),d=0;d<h.length;++d){var j=h[d];j&&"object"==typeof j?j.appender(a[++e],c):v(j,c)}h=[];j=[];for(d=e+1;d<a.length;++d)if(v(" ",c),e=a[d],void 0===e||null===e)x(e,c);else if("string"==typeof e)v(e,c);else if(e instanceof Date)v(e.toString(),c);else if(9==e.nodeType)v("[ XmlDoc ]",c);else{var k="_a"+aa++;h.push(k);j.push(e);e='<a id="'+k+'" href="javascript:void(0);">'+
I(e)+"</a>";c.push(e+"")}f(c,b);for(d=0;d<h.length;d++)if(c=Q.getElementById(h[d]))c.obj=j[d],V.console._connects.push(l.connect(c,"onclick",function(){console.openObjectInspector();try{L(this.obj)}catch(a){this.obj=a}M.innerHTML="<pre>"+L(this.obj)+"</pre>"}))}function u(a){for(var b=[],c=/((^%|[^\\]%)(\d+)?(\.)([a-zA-Z]))|((^%|[^\\]%)([a-zA-Z]))/,d={s:v,d:y,i:y,f:C},e=c.exec(a);e;e=c.exec(a)){var f=e[8]?e[8]:e[5],f=f in d?d[f]:B,h=e[3]?parseInt(e[3]):"."==e[4]?-1:0;b.push(a.substr(0,"%"==e[0][0]?
e.index:e.index+1));b.push({appender:f,precision:h});a=a.substr(e.index+e[0].length)}b.push(a);return b}function w(a){return(""+a).replace(/[<>&"']/g,function(a){switch(a){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case "'":return"&#39;";case '"':return"&quot;"}return"?"})}function v(a,b){b.push(w(a+""))}function x(a,b){b.push('<span class="objectBox-null">',w(a+""),"</span>")}function y(a,b){b.push('<span class="objectBox-number">',w(a+""),"</span>")}function C(a,b){b.push('<span class="objectBox-number">',
w(a+""),"</span>")}function B(a,b){try{if(void 0===a)x("undefined",b);else if(null===a)x("null",b);else if("string"==typeof a)b.push('<span class="objectBox-string">&quot;',w(a+""),"&quot;</span>");else if("number"==typeof a)y(a,b);else if("function"==typeof a)b.push('<span class="objectBox-function">',I(a),"</span>");else if(1==a.nodeType)b.push('<span class="objectBox-selector">'),b.push('<span class="selectorTag">',w(a.nodeName.toLowerCase()),"</span>"),a.id&&b.push('<span class="selectorId">#',
w(a.id),"</span>"),a.className&&b.push('<span class="selectorClass">.',w(a.className),"</span>"),b.push("</span>");else if("object"==typeof a){var c=a+"",d=/\[object (.*?)\]/.exec(c);b.push('<span class="objectBox-object">',d?d[1]:c,"</span>")}else v(a,b)}catch(e){}}function A(a,b){if(1==a.nodeType){b.push('<div class="objectBox-element">','&lt;<span class="nodeTag">',a.nodeName.toLowerCase(),"</span>");for(var c=0;c<a.attributes.length;++c){var d=a.attributes[c];d.specified&&b.push('&nbsp;<span class="nodeName">',
d.nodeName.toLowerCase(),'</span>=&quot;<span class="nodeValue">',w(d.nodeValue),"</span>&quot;")}if(a.firstChild){b.push('&gt;</div><div class="nodeChildren">');for(c=a.firstChild;c;c=c.nextSibling)A(c,b);b.push('</div><div class="objectBox-element">&lt;/<span class="nodeTag">',a.nodeName.toLowerCase(),"&gt;</span></div>")}else b.push("/&gt;</div>")}else 3==a.nodeType&&b.push('<div class="nodeText">',w(a.nodeValue),"</div>")}function z(a,b,c){document.all?a.attachEvent("on"+b,c):a.addEventListener(b,
c,!1)}function E(a){var b=(new Date).getTime();if(b>ma+200){var a=l.fixEvent(a),c=l.keys,d=a.keyCode;ma=b;if(d==c.F12)e();else if((d==c.NUMPAD_ENTER||76==d)&&a.shiftKey&&(a.metaKey||a.ctrlKey))e(!0),F&&F.focus();else return;document.all?a.cancelBubble=!0:a.stopPropagation()}}function D(a){var c=l.keys;if(13==a.keyCode&&F.value){var a=F.value,c=(c=K("firebug_history"))?l.fromJson(c):[],d=l.indexOf(c,a);-1!=d&&c.splice(d,1);c.push(a);for(K("firebug_history",l.toJson(c),30);c.length&&!K("firebug_history");)c.shift(),
K("firebug_history",l.toJson(c),30);ia=null;$=-1;b()}else if(27==a.keyCode)F.value="";else if(a.keyCode==c.UP_ARROW||a.charCode==c.UP_ARROW)G("older");else if(a.keyCode==c.DOWN_ARROW||a.charCode==c.DOWN_ARROW)G("newer");else if(a.keyCode==c.HOME||a.charCode==c.HOME)$=1,G("older");else if(a.keyCode==c.END||a.charCode==c.END)$=999999,G("newer")}function G(a){var b=K("firebug_history"),b=b?l.fromJson(b):[];if(b.length){if(null===ia)ia=F.value;if(-1==$)$=b.length;if("older"==a)--$,0>$&&($=0);else if("newer"==
a&&(++$,$>b.length))$=b.length;$==b.length?(F.value=ia,ia=null):F.value=b[$]}}function K(a,b){var c=document.cookie;if(1==arguments.length)return(c=c.match(RegExp("(?:^|; )"+a+"=([^;]*)")))?decodeURIComponent(c[1]):void 0;c=new Date;c.setMonth(c.getMonth()+1);document.cookie=a+"="+encodeURIComponent(b)+(c.toUtcString?"; expires="+c.toUTCString():"")}function N(a){return a&&a instanceof Array||"array"==typeof a}function L(a,b,c,d){var c=c||"",b=b||" \t",d=d||[],e;if(a&&1==a.nodeType)return b=[],A(a,
b),b.join("");var f=",\n",h=0,j;j=0;for(e in a)j++;if(a instanceof Date)return b+a.toString()+f;var k;a:for(k in a)if(h++,h==j&&(f="\n"),!(a[k]===window||a[k]===document))if(null===a[k])c+=b+k+" : NULL"+f;else if(a[k]&&a[k].nodeType)1!=a[k].nodeType&&3==a[k].nodeType&&(c+=b+k+" : [ TextNode "+a[k].data+" ]"+f);else if("object"==typeof a[k]&&(a[k]instanceof String||a[k]instanceof Number||a[k]instanceof Boolean))c+=b+k+" : "+a[k]+","+f;else if(a[k]instanceof Date)c+=b+k+" : "+a[k].toString()+f;else if("object"==
typeof a[k]&&a[k]){e=0;for(var l;l=d[e];e++)if(a[k]===l){c+=b+k+" : RECURSION"+f;continue a}d.push(a[k]);e=N(a[k])?["[","]"]:["{","}"];c+=b+k+" : "+e[0]+"\n";c+=L(a[k],b+" \t","",d);c+=b+e[1]+f}else"undefined"==typeof a[k]?c+=b+k+" : undefined"+f:"toString"==k&&"function"==typeof a[k]?(e=a[k](),"string"==typeof e&&e.match(/function ?(.*?)\(/)&&(e=w(I(a[k]))),c+=b+k+" : "+e+f):c+=b+k+" : "+w(I(a[k]))+f;return c}function I(a){var b=a instanceof Error;if(1==a.nodeType)return w("< "+a.tagName.toLowerCase()+
' id="'+a.id+'" />');if(3==a.nodeType)return w('[TextNode: "'+a.nodeValue+'"]');var c=a&&(a.id||a.name||a.ObjectID||a.widgetId);if(!b&&c)return"{"+c+"}";var d=0;if(b)c="[ Error: "+(a.message||a.description||a)+" ]";else if(N(a))c="["+a.slice(0,4).join(","),4<a.length&&(c+=" ... ("+a.length+" items)"),c+="]";else if("function"==typeof a)(a=/function\s*([^\(]*)(\([^\)]*\))[^\{]*\{/.exec(a+""))?(a[1]||(a[1]="function"),c=a[1]+a[2]):c="function()";else if("object"!=typeof a||"string"==typeof a)c=a+"";
else{var c="{",e;for(e in a){d++;if(2<d)break;c+=e+":"+w(a[e])+"  "}c+="}"}return c}if(k=/Trident/.test(window.navigator.userAgent)){for(var J=["log","info","debug","warn","error"],U=0;U<J.length;U++){var R=J[U];if(console[R]&&!console[R]._fake){var T="_"+J[U];console[T]=console[R];console[R]=function(){var a=T;return function(){console[a](Array.prototype.join.call(arguments," "))}}()}}try{console.clear()}catch(W){}}if(!j("ff")&&!j("chrome")&&!j("safari")&&!k&&!window.firebug&&!("undefined"!=typeof console&&
console.firebug||l.config.useCustomLogger||j("air"))){try{if(window!=window.parent){if(window.parent.console)window.console=window.parent.console;return}}catch(Y){}var Q=document,V=window,aa=0,S=null,H=null,M=null,F=null,Z=!1,P=[],O=[],X={},fa={},ba=null,ja,ga,ka=!1,la=null;document.createElement("div");var ca,oa;window.console={_connects:[],log:function(){s(arguments,"")},debug:function(){s(arguments,"debug")},info:function(){s(arguments,"info")},warn:function(){s(arguments,"warning")},error:function(){s(arguments,
"error")},assert:function(a,b){if(!a){for(var c=[],d=1;d<arguments.length;++d)c.push(arguments[d]);s(c.length?c:["Assertion Failure"],"error");throw b?b:"Assertion Failure";}},dir:function(a){a=L(a);a=a.replace(/\n/g,"<br />");a=a.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");f([a],"dir")},dirxml:function(a){var b=[];A(a,b);f(b,"dirxml")},group:function(){f(arguments,"group",q)},groupEnd:function(){f(arguments,"",o)},time:function(a){X[a]=(new Date).getTime()},timeEnd:function(a){if(a in X){var b=(new Date).getTime()-
X[a];s([a+":",b+"ms"]);delete X[a]}},count:function(a){fa[a]||(fa[a]=0);fa[a]++;s([a+": "+fa[a]])},trace:function(a){for(var a=a||3,b=console.trace.caller,c=0;c<a;c++){for(var d=[],e=0;e<b.arguments.length;e++)d.push(b.arguments[e]);b=b.caller}},profile:function(){this.warn(["profile() not supported."])},profileEnd:function(){},clear:function(){if(H)for(;H.childNodes.length;)l.destroy(H.firstChild);l.forEach(this._connects,l.disconnect)},open:function(){e(!0)},close:function(){Z&&e()},_restoreBorder:function(){if(ca)ca.style.border=
oa},openDomInspector:function(){ka=!0;H.style.display="none";ba.style.display="block";M.style.display="none";document.body.style.cursor="pointer";ja=l.connect(document,"mousemove",function(a){if(ka&&!la&&(la=setTimeout(function(){la=null},50),(a=a.target)&&ca!==a)){console._restoreBorder();var b=[];A(a,b);ba.innerHTML=b.join("");ca=a;oa=ca.style.border;ca.style.border="#0000FF 1px solid"}});setTimeout(function(){ga=l.connect(document,"click",function(){document.body.style.cursor="";ka=!ka;l.disconnect(ga)})},
30)},_closeDomInspector:function(){document.body.style.cursor="";l.disconnect(ja);l.disconnect(ga);ka=!1;console._restoreBorder()},openConsole:function(){H.style.display="block";ba.style.display="none";M.style.display="none";console._closeDomInspector()},openObjectInspector:function(){H.style.display="none";ba.style.display="none";M.style.display="block";console._closeDomInspector()},recss:function(){var a,b,c;b=document.getElementsByTagName("link");for(a=0;a<b.length;a++)if(c=b[a],0<=c.rel.toLowerCase().indexOf("stylesheet")&&
c.href){var d=c.href.replace(/(&|%5C?)forceReload=\d+/,"");c.href=d+(0<=d.indexOf("?")?"&":"?")+"forceReload="+(new Date).valueOf()}}};l.addOnLoad(function(){if(!S){e(!0);if(l.config.popup){var b="100%",c=document.cookie.match(/(?:^|; )_firebugPosition=([^;]*)/),c=c?c[1].split(","):[2,2,320,480];V=h(c[0],c[1],c[2],c[3]);Q=V.document;l.config.debugContainerId="fb";V.console=window.console;V.dojo=window.dojo}else Q=document,b=(l.config.debugHeight||300)+"px";var d=Q.createElement("link");d.href=m.toUrl("./firebug.css");
d.rel="stylesheet";d.type="text/css";var f=Q.getElementsByTagName("head");f&&(f=f[0]);f||(f=Q.getElementsByTagName("html")[0]);j("ie")?window.setTimeout(function(){f.appendChild(d)},0):f.appendChild(d);l.config.debugContainerId&&(S=Q.getElementById(l.config.debugContainerId));S||(S=Q.createElement("div"),Q.body.appendChild(S));S.className+=" firebug";S.id="firebug";S.style.height=b;S.style.display=Z?"block":"none";b=function(a,b,c,d){return'<li class="'+d+'"><a href="javascript:void(0);" onclick="console.'+
c+'(); return false;" title="'+b+'">'+a+"</a></li>"};S.innerHTML='<div id="firebugToolbar">  <ul id="fireBugTabs" class="tabs">'+b("Clear","Remove All Console Logs","clear","")+b("ReCSS","Refresh CSS without reloading page","recss","")+b("Console","Show Console Logs","openConsole","gap")+b("DOM","Show DOM Inspector","openDomInspector","")+b("Object","Show Object Inspector","openObjectInspector","")+(l.config.popup?"":b("Close","Close the console","close","gap"))+'\t</ul></div><input type="text" id="firebugCommandLine" /><div id="firebugLog"></div><div id="objectLog" style="display:none;">Click on an object in the Log display</div><div id="domInspect" style="display:none;">Hover over HTML elements in the main page. Click to hold selection.</div>';
Q.getElementById("firebugToolbar");F=Q.getElementById("firebugCommandLine");z(F,"keydown",D);z(Q,j("ie")||j("safari")?"keydown":"keypress",E);H=Q.getElementById("firebugLog");M=Q.getElementById("objectLog");ba=Q.getElementById("domInspect");Q.getElementById("fireBugTabs");a();n()}});var ma=(new Date).getTime(),$=-1,ia=null;z(document,j("ie")||j("safari")?"keydown":"keypress",E);("true"==document.documentElement.getAttribute("debug")||l.config.isDebug)&&e(!0);l.addOnWindowUnload(function(){var a=document,
b=j("ie")||j("safari")?"keydown":"keypress";document.all?a.detachEvent("on"+b,E):a.removeEventListener(b,E,!1);window.onFirebugResize=null;window.console=null})}})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(l,m,k,j,e){var h=j.trim,d=k.forEach,c="BackCompat"==e.doc.compatMode,b=!1,a=function(){return!0},f=function(a){for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",c=function(b,c){return h(a.slice(b,c))},d=[],e=-1,
f=-1,j=-1,k=-1,l=-1,m=-1,n=-1,o,q="",r="",s,t=0,B=a.length,u=null,A=null,w=function(){if(0<=m)u.id=c(m,t).replace(/\\/g,""),m=-1;if(0<=n){var a=n==t?null:c(n,t);u[0>">~+".indexOf(a)?"tag":"oper"]=a;n=-1}0<=l&&(u.classes.push(c(l+1,t).replace(/\\/g,"")),l=-1)};q=r,r=a.charAt(t),t<B;t++)if("\\"!=q)if(u||(s=t,u={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return b?this.otag:this.tag}},n=t),o)r==o&&(o=null);else if("'"==r||'"'==r)o=r;else if(0<=e)if("]"==r){A.attr?
A.matchFor=c(j||e+1,t):A.attr=c(e+1,t);if((e=A.matchFor)&&('"'==e.charAt(0)||"'"==e.charAt(0)))A.matchFor=e.slice(1,-1);if(A.matchFor)A.matchFor=A.matchFor.replace(/\\/g,"");u.attrs.push(A);A=null;e=j=-1}else{if("="==r)j=0<="|~^$*".indexOf(q)?q:"",A.type=j+r,A.attr=c(e+1,t-j.length),j=t+1}else if(0<=f){if(")"==r){if(0<=k)A.value=c(f+1,t);k=f=-1}}else if("#"==r)w(),m=t+1;else if("."==r)w(),l=t;else if(":"==r)w(),k=t;else if("["==r)w(),e=t,A={};else if("("==r)0<=k&&(A={name:c(k+1,t),value:null},u.pseudos.push(A)),
f=t;else if(" "==r&&q!=r){w();0<=k&&u.pseudos.push({name:c(k+1,t)});u.loops=u.pseudos.length||u.attrs.length||u.classes.length;u.oquery=u.query=c(s,t);u.otag=u.tag=u.oper?null:u.tag||"*";if(u.tag)u.tag=u.tag.toUpperCase();if(d.length&&d[d.length-1].oper)u.infixOper=d.pop(),u.query=u.infixOper.query+" "+u.query;d.push(u);u=null}return d},n=function(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}},r=function(a,b){var c=b||[];a&&c.push(a);return c},t=function(a){return 1==
a.nodeType},q=function(a,c){return!a?"":"class"==c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(b?a.getAttribute(c):a.getAttribute(c,2))||""},o={"*=":function(a,b){return function(c){return 0<=q(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==q(c,a).indexOf(b)}},"$=":function(a,b){return function(c){var c=" "+q(c,a),d=c.lastIndexOf(b);return-1<d&&d==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+q(b,a)+" ").indexOf(c)}},
"|=":function(a,b){var c=b+"-";return function(d){d=q(d,a);return d==b||0==d.indexOf(c)}},"=":function(a,b){return function(c){return q(c,a)==b}}},s="undefined"==typeof e.doc.firstChild.nextElementSibling,u=!s?"nextElementSibling":"nextSibling",w=!s?"previousElementSibling":"previousSibling",v=s?t:a,x=function(a){for(;a=a[w];)if(v(a))return!1;return!0},y=function(a){for(;a=a[u];)if(v(a))return!1;return!0},C=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,d=b.children||b.childNodes,
e=a._i||a.getAttribute("_i")||-1,f=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;m("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",d):b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[u])if(v(b))m("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(e=c);return e},B=function(a){return!(C(a)%2)},A=function(a){return C(a)%2},z={checked:function(){return function(a){return!!("checked"in a?a.checked:a.selected)}},
disabled:function(){return function(a){return a.disabled}},enabled:function(){return function(a){return!a.disabled}},"first-child":function(){return x},"last-child":function(){return y},"only-child":function(){return function(a){return x(a)&&y(a)}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return!1}return!0}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=
a.innerHTML.indexOf(b)}},not:function(a,b){var c=f(b)[0],d={el:1};if("*"!=c.tag)d.tag=1;if(!c.classes.length)d.classes=1;var e=D(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){var c=parseInt;if("odd"==b)return A;if("even"==b)return B;if(-1!=b.indexOf("n")){var d=b.split("n",2),e=d[0]?"-"==d[0]?-1:c(d[0]):1,f=d[1]?c(d[1]):0,h=0,j=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(h=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(j=f,f%=e));if(0<e)return function(a){a=C(a);return a>=h&&(0>j||a<=j)&&a%e==f};b=f}var k=
c(b);return function(a){return C(a)==k}}},E=9>m("ie")||9==m("ie")&&m("quirks")?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(d){return b?d.getAttribute(a):d[a]||d[c]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},D=function(c,e){if(!c)return a;var e=e||{},f=null;"el"in e||(f=n(f,t));"tag"in e||"*"!=c.tag&&(f=n(f,function(a){return a&&(b?a.tagName:a.tagName.toUpperCase())==c.getTag()}));"classes"in e||d(c.classes,function(a,b){var c=RegExp("(?:^|\\s)"+
a+"(?:\\s|$)");f=n(f,function(a){return c.test(a.className)});f.count=b});"pseudos"in e||d(c.pseudos,function(a){var b=a.name;z[b]&&(f=n(f,z[b](b,a.value)))});"attrs"in e||d(c.attrs,function(a){var b,c=a.attr;a.type&&o[a.type]?b=o[a.type](c,a.matchFor):c.length&&(b=E(c));b&&(f=n(f,b))});"id"in e||c.id&&(f=n(f,function(a){return!!a&&a.id==c.id}));f||"default"in e||(f=a);return f},G=function(a){return function(b,c,d){for(;b=b[u];)if(!s||t(b)){(!d||F(b,d))&&a(b)&&c.push(b);break}return c}},K=function(a){return function(b,
c,d){for(b=b[u];b;){if(v(b)){if(d&&!F(b,d))break;a(b)&&c.push(b)}b=b[u]}return c}},N=function(b){b=b||a;return function(a,c,d){for(var e=0,f=a.children||a.childNodes;a=f[e++];)v(a)&&(!d||F(a,d))&&b(a,e)&&c.push(a);return c}},L={},I=function(b){var d=L[b.query];if(d)return d;var f=b.infixOper,f=f?f.oper:"",h=D(b,{el:1}),j="*"==b.tag,k=e.doc.getElementsByClassName;if(f){k={el:1};if(j)k.tag=1;h=D(b,k);"+"==f?d=G(h):"~"==f?d=K(h):">"==f&&(d=N(h))}else if(b.id)h=!b.loops&&j?a:D(b,{el:1,id:1}),d=function(a,
c){var d=l.byId(b.id,a.ownerDocument||a);if(d&&h(d)){if(9==a.nodeType)return r(d,c);for(var e=d.parentNode;e&&!(e==a);)e=e.parentNode;if(e)return r(d,c)}};else if(k&&/\{\s*\[native code\]\s*\}/.test(""+k)&&b.classes.length&&!c)var h=D(b,{el:1,classes:1,id:1}),m=b.classes.join(" "),d=function(a,b,c){for(var b=r(0,b),d,e=0,f=a.getElementsByClassName(m);d=f[e++];)h(d,a)&&F(d,c)&&b.push(d);return b};else!j&&!b.loops?d=function(a,c,d){for(var c=r(0,c),e=0,f=b.getTag(),f=f?a.getElementsByTagName(f):[];a=
f[e++];)F(a,d)&&c.push(a);return c}:(h=D(b,{el:1,tag:1,id:1}),d=function(a,c,d){for(var c=r(0,c),e,f=0,j=(e=b.getTag())?a.getElementsByTagName(e):[];e=j[f++];)h(e,a)&&F(e,d)&&c.push(e);return c});return L[b.query]=d},J={},U={},R=function(a){var b=f(h(a));if(1==b.length){var c=I(b[0]);return function(a){if(a=c(a,[]))a.nozip=!0;return a}}return function(a){for(var a=r(a),c,d,e=b.length,f,h,j=0;j<e;j++){h=[];c=b[j];d=a.length-1;if(0<d)f={},h.nozip=!0;d=I(c);for(var k=0;c=a[k];k++)d(c,h,f);if(!h.length)break;
a=h}return h}},T=m("ie")?"commentStrip":"nozip",W=!!e.doc.querySelectorAll,Y=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,Q=function(a,b,c,d){return c?(b?b+" ":"")+c+(d?" "+d:""):a},V=/([^[]*)([^\]]*])?/g,aa=function(a,b,c){return b.replace(Y,Q)+(c||"")},S=function(a,b){a=a.replace(V,aa);if(W){var d=U[a];if(d&&!b)return d}if(d=J[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(b=!0);if(W&&!b&&-1==">~+".indexOf(d)&&(!m("ie")||-1==a.indexOf(":"))&&!(c&&0<=a.indexOf("."))&&-1==
a.indexOf(":contains")&&-1==a.indexOf(":checked")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return U[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(f);c[T]=!0;return c}catch(d){return S(a,!0)(b)}}}var h=a.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return J[a]=2>h.length?R(a):function(a){for(var b=0,c=[],d;d=h[b++];)c=c.concat(R(d)(a));return c}},H=0,M=m("ie")?function(a){return b?a.getAttribute("_uid")||a.setAttribute("_uid",
++H)||H:a.uniqueID}:function(a){return a._uid||(a._uid=++H)},F=function(a,b){if(!b)return 1;var c=M(a);return!b[c]?b[c]=1:0},Z=function(a){if(a&&a.nozip)return a;var c=[];if(!a||!a.length)return c;a[0]&&c.push(a[0]);if(2>a.length)return c;H++;var d,e;if(m("ie")&&b){var f=H+"";a[0].setAttribute("_zipIdx",f);for(d=1;e=a[d];d++)a[d].getAttribute("_zipIdx")!=f&&c.push(e),e.setAttribute("_zipIdx",f)}else if(m("ie")&&a.commentStrip)try{for(d=1;e=a[d];d++)t(e)&&c.push(e)}catch(h){}else{a[0]&&(a[0]._zipIdx=
H);for(d=1;e=a[d];d++)a[d]._zipIdx!=H&&c.push(e),e._zipIdx=H}return c},P=function(a,c){c=c||e.doc;b="div"===(c.ownerDocument||c).createElement("div").tagName;var d=S(a)(c);return d&&d.nozip?d:Z(d)};P.filter=function(a,b,c){for(var d=[],e=f(b),e=1==e.length&&!/[^\w#\.]/.test(b)?D(e[0]):function(a){return-1!=k.indexOf(P(b,l.byId(c)),a)},h=0,j;j=a[h];h++)e(j)&&d.push(j);return d};return P})},"dojox/layout/ContentPane":function(){define(["dojo/_base/lang","dojo/_base/xhr","dijit/layout/ContentPane","dojox/html/_base",
"dojo/_base/declare"],function(l,m,k,j,e){return e("dojox.layout.ContentPane",k,{adjustPaths:!1,cleanContent:!1,renderStyles:!1,executeScripts:!0,scriptHasHooks:!1,ioMethod:m.get,ioArgs:{},onExecError:function(){},_setContent:function(e){var d=this._contentSetter;if(!(d&&d instanceof j._ContentSetter))d=this._contentSetter=new j._ContentSetter({node:this.containerNode,_onError:l.hitch(this,this._onError),onContentError:l.hitch(this,function(c){c=this.onContentError(c);try{this.containerNode.innerHTML=
c}catch(b){console.error("Fatal "+this.id+" could not change content due to "+b.message,b)}})});this._contentSetterParams={adjustPaths:Boolean(this.adjustPaths&&(this.href||this.referencePath)),referencePath:this.href||this.referencePath,renderStyles:this.renderStyles,executeScripts:this.executeScripts,scriptHasHooks:this.scriptHasHooks,scriptHookReplacement:"dijit.byId('"+this.id+"')"};this.inherited("_setContent",arguments)}})})},"dojox/html/_base":function(){define("dojo/_base/declare,dojo/Deferred,dojo/dom-construct,dojo/html,dojo/_base/kernel,dojo/_base/lang,dojo/ready,dojo/_base/sniff,dojo/_base/url,dojo/_base/xhr,dojo/when,dojo/_base/window".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n){var r=e.getObject("dojox.html",!0);if(c("ie"))var t=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;var q=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g,o=r._adjustCssPaths=function(a,c){if(c&&a)return t&&(c=c.replace(t,function(c,d,e,f,h){return d+(new b(a,"./"+f)).toString()+h})),c.replace(q,function(c,d,e,f,h,j){return e?'@import "'+(new b(a,"./"+e)).toString()+
'"'+j:"url("+(new b(a,"./"+h)).toString()+")"+j})},s=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi,u=r._adjustHtmlPaths=function(a,c){var d=a||"./";return c.replace(s,function(a,c,e,f,h,j,k,l){return c+(e?e+"="+f+(new b(d,h)).toString()+f:"style="+j+o(d,k)+j)+l})},w=r._snarfStyles=function(a,b,c){c.attributes=[];b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)style\b/ig,"&lt;$1Style").replace(/<(\/?)link\b/ig,"&lt;$1Link").replace(/@import "/ig,
'@ import "')});return b.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(b,d,e,f,h,j){b=(d||f||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");e?e=c.push(a?o(a,e):e):(e=c.push('@import "'+j+'";'),b=b.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,""));if(b){b=b.split(/\s+/);j={};f=0;for(h=b.length;f<h;f++)d=b[f].split("="),j[d[0]]=d[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");c.attributes[e-1]=j}return""})},v=r._snarfScripts=
function(b,c){function d(b){c.downloadRemote&&(b=b.replace(/&([a-z0-9#]+);/g,function(a,b){switch(b){case "amp":return"&";case "gt":return">";case "lt":return"<";default:return"#"==b.charAt(0)?String.fromCharCode(b.substring(1)):"&"+b+";"}}),a.get({url:b,sync:!0,load:function(a){c.code+=a+";"},error:c.errBack}))}c.code="";b=b.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(a){return a.replace(/<(\/?)script\b/ig,"&lt;$1Script")});return b.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?>([\s\S]*?)<\/script>/gi,
function(a,b,e,f){e?d(e):c.code+=f;return""})},x=r.evalInGlobal=function(a,b){var b=b||n.doc.body,c=b.ownerDocument.createElement("script");c.type="text/javascript";b.appendChild(c);c.text=a};r._ContentSetter=l(j._ContentSetter,{adjustPaths:!1,referencePath:".",renderStyles:!1,executeScripts:!1,scriptHasHooks:!1,scriptHookReplacement:null,_renderStyles:function(a){this._styleNodes=[];for(var b,c,d,e=this.node.ownerDocument,f=e.getElementsByTagName("head")[0],h=0,j=a.length;h<j;h++){d=a[h];c=a.attributes[h];
b=e.createElement("style");b.setAttribute("type","text/css");for(var k in c)b.setAttribute(k,c[k]);this._styleNodes.push(b);f.appendChild(b);b.styleSheet?b.styleSheet.cssText=d:b.appendChild(e.createTextNode(d))}},empty:function(){this.inherited("empty",arguments);this._styles=[]},onBegin:function(){this.inherited("onBegin",arguments);var a=this.content,b=this._styles;if(h.isString(a)){this.adjustPaths&&this.referencePath&&(a=u(this.referencePath,a));if(this.renderStyles||this.cleanContent)a=w(this.referencePath,
a,b);if(this.executeScripts){var c=this,b={downloadRemote:!0,errBack:function(a){c._onError.call(c,"Exec",'Error downloading remote script in "'+c.id+'"',a)}},a=v(a,b);this._code=b.code}}this.content=a},onEnd:function(){var a=this._code,b=this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)k.destroy(this._styleNodes.pop());this.renderStyles&&b&&b.length&&this._renderStyles(b);var c=new m,e=this.getInherited(arguments),j=arguments,b=h.hitch(this,function(){e.apply(this,
j);f(this.parseDeferred,function(){c.resolve()})});if(this.executeScripts&&a){this.cleanContent&&(a=a.replace(/(<\!--|(?:\/\/)?--\>|<!\[CDATA\[|\]\]>)/g,""));this.scriptHasHooks&&(a=a.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement));try{x(a,this.node)}catch(l){this._onError("Exec","Error eval script in "+this.id+", "+l.message,l)}d(b)}else b();return c.promise},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length)for(;this._styleNodes.length;)k.destroy(this._styleNodes.pop());
delete this._styleNodes;h.mixin(this,r._ContentSetter.prototype)}});r.set=function(a,b,c){return c?(new r._ContentSetter(h.mixin(c,{content:b,node:a}))).set():j._setNodeContent(a,b,!0)};return r})},"idx/app/Header":function(){define("idx/app/Header","dojo/_base/array,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/aspect,dojo/query,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dojo/i18n,dojo/keys,dojo/string,dijit/_base/popup,dijit/place,dijit/registry,dijit/_Widget,dijit/_TemplatedMixin,idx/util,idx/resources,dojo/NodeList-dom,dojo/i18n!../nls/base,dojo/i18n!./nls/base,dojo/i18n!./nls/Header".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v){var x=function(){log.error("dijit/form/Button has been used without being loaded")},y=function(){log.error("dijit/form/TextBox has been used without being loaded")},C=function(){log.error("idx/layout/MenuTabController has been used without being loaded")};return k.getObject("idx.oneui",!0).Header=m("idx.app.Header",[s,u],{primaryTitle:"",primaryBannerType:"thin",navigation:void 0,showNavigationDropDownArrows:!0,primarySearch:void 0,user:void 0,showUserDropDownArrow:!0,
settings:void 0,showSettingsDropDownArrow:!0,help:void 0,showHelpDropDownArrow:!0,secondaryTitle:"",secondaryBannerType:"blue",secondarySubtitle:"",additionalContext:"",actions:void 0,contentContainer:"",contentTabsInline:!1,secondarySearch:void 0,layoutType:"variable",templateString:'<div role="banner"><div style="visibility: hidden; display: none;" data-dojo-attach-point="containerNode"></div><div data-dojo-attach-point="_mainContainerNode"></div></div>',_getComputedUserName:function(){return this.user&&
"function"==typeof this.user.displayName?this.user.displayName():this.user.displayName||""},_getComputedUserImage:function(){return this.user&&"function"==typeof this.user.displayImage?this.user.displayImage():this.user.displayImage},_getComputedUserMessage:function(){var a=this._getComputedUserName(),b=("function"==typeof this.user.messageName?this.user.messageName():this.user.messageName)||a,c=b;this.user&&this.user.message&&(c="function"==typeof this.user.message?this.user.message():this.user.message,
c=r.substitute(c,this.user,function(c,d){switch(d){case "messageName":return b;case "displayName":return a;default:return c||""}}));return c},_setUserDisplayNameAttr:function(a){this.user=this.user||{};this.user.displayName=a;this._refreshUser()},_setUserDisplayImageAttr:function(a){this.user=this.user||{};this.user.displayImage=a;this._refreshUser()},_setUserMessageNameAttr:function(a){this.user=this.user||{};this.user.messageName=a;this._refreshUser()},_setUserMessageAttr:function(a){this.user=
this.user||{};this.user.message=a;this._refreshUser()},_prepareMenu:function(a,d,f,h,m,n){n||(n=[]);if(d){if(d[0]){var o=null,r=e.after(a,"onOpen",function(){if(a._popupWrapper){if(!a._oneuiWrapper){a._oneuiWrapper=b.create("div",{"class":"idxHeaderContainer "+d[0]},j.body());var c=null,c=e.after(a,"destroy",function(){b.destroy(a._oneuiWrapper);delete a._oneuiWrapper;c&&c.remove()});n.push(c)}a._oneuiWrapper.appendChild(a._popupWrapper)}}),o=e.after(a,"destroy",function(){r&&r.remove();o&&o.remove()});
n.push(o);n.push(r)}var s=1<d.length?d.slice(1):d,u=this;l.forEach(a.getChildren(),function(a){a.popup&&u._prepareMenu(a.popup,s,void 0,void 0,void 0,n);a.currentPage&&c.add(a.domNode,"idxHeaderNavCurrentPage")})}if(h)a._scheduleOpen=function(b,c){if(!this._openTimer){var d=a.isLeftToRight(),e=q.around(t._createWrapper(a),h,m?["below-alt","below","above-alt","above"]:["below","below-alt","above","above-alt"],d,a.orient?k.hitch(a,"orient"):null);d||(e.x+=e.w);this._openTimer=setTimeout(k.hitch(this,
function(){delete this._openTimer;this._openMyself({target:b,iframe:c,coords:e})}),1)}},a.leftClickToOpen=!0,f&&a.bindDomNode(f);return n},_refreshUser:function(){if(this.userNode){var b=this._getComputedUserName(),e=this._getComputedUserImage(),f=this._getComputedUserMessage();d.set(this.userNode,"title",b);d.set(this.userImageNode,"src",e||"");a.set(this.userImageNode,"display",e?"block":"none");this.userTextNode.innerHTML=f;c.replace(this.userNode,f?"idxHeaderUserName":"idxHeaderUserNameNoText",
"idxHeaderUserName idxHeaderUserNameNoText")}},_injectTemplate:function(a,c){var d=u.getCachedTemplate(c,!0),d=k.isString(d)?b.toDom(this._stringRepl(d)):d.cloneNode(!0);this._attachTemplateNodes(d,function(a,b){return a.getAttribute(b)});a.appendChild(d)},postMixInProperties:function(){this._nls=v.getResources("idx/app/Header",this.lang)},_setup:function(){this.contentContainer&&this.secondaryBannerType&&"white"==this.secondaryBannerType.toLowerCase()&&require.log('*** Warning: Header will not display content tabs when secondaryBannerType is "white". Specify a different type to see content tabs.');
var a=this.primaryTitle,b=this.help,d=this.settings,e=this.user,f=this.navigation,h=this.primarySearch,j=this.secondaryTitle||this.secondarySubtitle,k=this.contextActions,l=this.secondarySearch,m=this.contentContainer&&(!this.secondaryBannerType||"white"!=this.secondaryBannerType.toLowerCase()),n=m&&(this.contentTabsInline||!j),o=this.secondaryBannerType&&"white"==this.secondaryBannerType.toLowerCase(),q=m&&!n,r=a||!0,t=j||k||l||n,s;if(r||t||q)c.add(this.domNode,"idxHeaderContainer"),this.primaryBannerType&&
"thick"==this.primaryBannerType.toLowerCase()?c.add(this._mainContainerNode,"idxHeaderPrimaryThick"):c.add(this._mainContainerNode,"idxHeaderPrimaryThin"),this.secondaryBannerType&&("lightgrey"==this.secondaryBannerType.toLowerCase()||"lightgray"==this.secondaryBannerType.toLowerCase())?(c.add(this._mainContainerNode,"idxHeaderSecondaryGray"),c.add(this._mainContainerNode,q?"idxHeaderSecondaryGrayDoubleRow":"idxHeaderSecondaryGraySingleRow"),s=r):this.secondaryBannerType&&"white"==this.secondaryBannerType.toLowerCase()?
(c.add(this._mainContainerNode,"idxHeaderSecondaryWhite"),c.add(this._mainContainerNode,q?"idxHeaderSecondaryWhiteDoubleRow":"idxHeaderSecondaryWhiteSingleRow"),s=r):(c.add(this._mainContainerNode,"idxHeaderSecondaryBlue"),c.add(this._mainContainerNode,q?"idxHeaderSecondaryBlueDoubleRow":"idxHeaderSecondaryBlueSingleRow"),s=r&&!t&&!q),c.add(this._mainContainerNode,q?"idxHeaderSecondaryDoubleRow":"idxHeaderSecondarySingleRow"),this.layoutType&&"fixed"==this.layoutType.toLowerCase()?c.add(this._mainContainerNode,
"idxHeaderWidthFixed"):c.add(this._mainContainerNode,"idxHeaderWidthLiquid");var u=[],w=[],v=this;if(h||l||k)u.push("dijit/form/Button"),w.push(function(a){x=a});if(h||l)u.push("dijit/form/TextBox"),w.push(function(a){y=a});m&&(u.push("idx/layout/MenuTabController"),w.push(function(a){C=a}));require(u,function(){for(var c=0;c<w.length;c++)w[c](arguments[c]);r&&v._injectTemplate(v._mainContainerNode,'<div class="idxHeaderPrimary"><div class="idxHeaderPrimaryInner" data-dojo-attach-point="primaryBannerNode"><ul data-dojo-attach-point="_globalActionsNode" role="presentation"></ul></div></div>');
a&&v._renderPrimaryTitle(v._globalActionsNode);v._renderLogo(v._globalActionsNode);b&&v._renderHelp(v._globalActionsNode,d||e);d&&v._renderSettings(v._globalActionsNode,e);e&&v._renderUser(v._globalActionsNode);h&&v._renderPrimarySearch(v._globalActionsNode);f&&v._renderNavigation(v.primaryBannerNode);s&&v._injectTemplate(v._mainContainerNode,'<div class="idxHeaderBlueLip"></div>');t&&v._injectTemplate(v._mainContainerNode,'<div class="idxHeaderSecondary"> <div class="idxHeaderSecondaryInner" data-dojo-attach-point="secondaryBannerNode"></div></div>');
l&&v._renderSecondarySearch(v.secondaryBannerNode);j&&v._renderSecondaryTitle(v.secondaryBannerNode);n&&v._renderContent(v.secondaryBannerNode,!1);k&&v._renderContextActions(v.secondaryBannerNode);o&&v._renderSecondaryInnerBorder(v.secondaryBannerNode);q&&v._renderContent(v._mainContainerNode,!0);0<v._refreshing&&v._refreshing--;0==v._refreshing?v._refreshRequired=!1:v._doRefresh()})},_reset:function(){c.remove(this.domNode,"idxHeaderContainer");c.remove(this._mainContainerNode,"idxHeaderPrimaryThick");
c.remove(this._mainContainerNode,"idxHeaderPrimaryThin");c.remove(this._mainContainerNode,"idxHeaderSecondaryGray");c.remove(this._mainContainerNode,"idxHeaderSecondaryGrayDoubleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryGraySingleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryWhite");c.remove(this._mainContainerNode,"idxHeaderSecondaryWhiteDoubleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryWhiteSingleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryBlue");
c.remove(this._mainContainerNode,"idxHeaderSecondaryBlueDoubleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryBlueSingleRow");c.remove(this._mainContainerNode,"idxHeaderSecondaryDoubleRow");c.remove(this._mainContainerNode,"idxHeaderSecondarySingleRow");c.remove(this._mainContainerNode,"idxHeaderWidthFixed");c.remove(this._mainContainerNode,"idxHeaderWidthLiquid");if(this.help)(this.help=o.byId(this.help))&&this.help.placeAt(this.containerNode);this._clearHandles("_helpHandles");if(this.settings)(this.settings=
o.byId(this.settings))&&this.settings.placeAt(this.containerNode);this._clearHandles("_settingsHandles");if(this.user&&this.user.actions)this.user.actions=o.byId(this.user.actions),this.user.actions&&this.user.actions.placeAt(this.containerNode);this._clearHandles("_actionsHandles");if(this.navigation)(this.navigation=o.byId(this.navigation))&&this.navigation.placeAt(this.containerNode);this._clearHandles("_navHandles");this._clearHandles("_controllerHandlers");l.forEach(o.findWidgets(this._mainContainerNode),
function(a){a.destroy()});var a=[];l.forEach(this._mainContainerNode.childNodes,function(b){a.push(b)});l.forEach(a,function(a){b.destroy(a)});this._contextActionsNode=this.additionalContextTextNode=this.secondarySubtitleTextNode=this._secondaryTitleSeparatorNode=this.secondaryTitleTextNode=this.primarySearchButtonNode=this.primarySearchTextNode=this.userTextNode=this.userImageNode=this.userNode=this._settingsNode=this._helpNode=this.secondaryBannerNode=this.primaryBannerNode=this.primaryTitleTextNode=
this._globalActionsNode=null;this.contextActionNodes&&delete this.contextActionNodes;this.contentControllerNode=this.secondarySearchButtonNode=this.secondarySearchTextNode=null},constructor:function(){this._refreshing=0},destroy:function(){if(this.navigation)this.navigation.destroyRecursive?this.navigation.destroyRecursive():this.navigation.destroy&&this.navigation.destroy(),this.navigation=null;this._clearHandles("_navHandles");this._controller&&(this._controller.destroyRecursive?this._controller.destroyRecursive():
this._controller.destroy&&this._controller.destroy(),delete this._controller);this._clearHandles("_controllerHandles");if(this.settings)this.settings.destroyRecursive?this.settings.destroyRecursive():this.settings.destroy&&this.settings.destroy(),this.settings=null;this._clearHandles("_settingsHandles");if(this.help)this.help.destroyRecursive?this.help.destroyRecursive():this.help.destroy&&this.help.destroy(),this.help=null;this._clearHandles("_helpHandles");if(this.user&&this.user.actions)this.user.actions.destroyRecursive?
this.user.actions.destroyRecursive():this.user.actions.destroy&&this.user.actions.destroy(),this.user=this.user.actions=null;this._clearHandles("_actionsHandles");this.inherited(arguments)},_clearHandles:function(a){a in this&&(l.forEach(this[a],function(a){a.remove()}),delete this[a])},buildRendering:function(){this.inherited(arguments);this._setup()},_setContentTabsInlineAttr:function(a){var b=this.contentTabsInline;this.contentTabsInline=a;b!=a&&this._refresh()},_setContentContainerAttr:function(a){var b=
this.contentContainer;this.contentContainer=a;w.widgetEquals(b,a)||this._refresh()},_setActionsAttr:function(a){var b=this.actions;this.actions=a;b!==a&&this._refresh()},_setAdditionalContextAttr:function(a){var b=this.additionalContextTextNode;this.additionalContext=a;if(b)b.innerHTML=a?a:""},_setSecondaryBannerTypeAttr:function(a){var b=this.secondaryBannerType;this.secondaryBannerType=a;b!=a&&this._refresh()},_setPrimaryTitleAttr:function(a){var b=this.primaryTitle,c=this.primaryTitleTextNode;
if((this.primaryTitle=a)&&!b||b&&!a)this._refresh();else if(c&&a)c.innerHTML=a},_setSecondaryTitleAttr:function(a){var b=this.secondaryTitle,c=this.secondaryTitleTextNode;if((this.secondaryTitle=a)&&!b||b&&!a)this._refresh();else if(c&&a)c.innerHTML=a},_setLayoutTypeAttr:function(a){this.layoutType=a;this._mainContainerNode&&(this.layoutType&&"fixed"==this.layoutType.toLowerCase()?c.add(this._mainContainerNode,"idxHeaderWidthFixed"):c.add(this._mainContainerNode,"idxHeaderWidthLiquid"))},_setSecondarySubtitleAttr:function(a){var b=
this.secondarySubtitle,c=this.secondarySubtitleTextNode;if((this.secondarySubtitle=a)&&!b||b&&!a)this._refresh();else if(c&&a)c.innerHTML=a},_setShowHelpDropDownArrowAttr:function(a){this.showHelpDropDownArrow=a;this._helpNode&&c.toggle(this._helpNode,"idxHeaderDropDown",this.showHelpDropDownArrow)},_setShowSettingsDropDownArrowAttr:function(a){this.showSettingsDropDownArrow=a;this._settingsNode&&c.toggle(this._settingsNode,"idxHeaderDropDown",this.showSettingsDropDownArrow)},_setShowUserDropDownArrowAttr:function(a){this.showUserDropDownArrow=
a;this.userNode&&c.toggle(this.userNode,"idxHeaderDropDown",this.showUserDropDownArrow)},_setUserAttr:function(a){var b=this.user;this.user=a;b!==a&&(b&&!a||a&&!b?this._refresh():b&&b.actions!==a.actions?this._refresh():this._refreshUser())},_setShowNavigationDropDownArrowsAttr:function(a){var b=this.showNavigationDropDownArrows;this.showNavigationDropDownArrows=a;b!=a&&this._refresh()},_setPrimarySearchAttr:function(a){var b=this.primarySearch;this.primarySearch=a;b!==a&&this._refresh()},_setSecondarySearchAttr:function(a){var b=
this.secondarySearch;this.secondarySearch=a;b!==a&&this._refresh()},_setNavigationAttr:function(a){var b=this.navigation;this.navigation=a;w.widgetEquals(b,a)||this._refresh()},_setSettingsAttr:function(a){var b=this.settings;this.settings=a;w.widgetEquals(b,a)||this._refresh()},_setHelpAttr:function(a){var b=this.help;this.help=a;w.widgetEquals(b,a)||this._refresh()},deferRefresh:function(){this._refreshDeferred=!0},refresh:function(){if(this._refreshDeferred)this._refreshDeferred=!1;this._refreshRequired&&
this._refresh()},_refresh:function(){this._refreshRequired=!0;this._started&&!this._refreshDeferred&&(this._refreshing++,1==this._refreshing&&this._doRefresh())},_doRefresh:function(){this._reset();this._setup()},_setupChild:function(a){a=children[index];if("region"in a)switch(a.region){case "navigation":this.set("navigation",a);break;case "settings":this.set("settings",a);break;case "help":this.set("help",a)}},addChild:function(a){this.inherited(arguments);this._setupChild(a)},removeChild:function(a){a===
this.help&&this.set("help",null);a===this.navigation&&this.set("navigation",null);a===this.settings&&this.set("settings",null);this.inherited(arguments)},startup:function(){this.inherited(arguments);this.deferRefresh();for(var a=this.getChildren(),b=0;b<a.length;b++)this._setupChild(a[b]);this.refresh()},_renderPrimaryTitle:function(a){this._injectTemplate(a,'<li><span><div class="idxHeaderPrimaryTitle" data-dojo-attach-point="primaryTitleTextNode">${primaryTitle}</div></span></li>')},_renderLogo:function(a){this._injectTemplate(a,
'<li class="idxHeaderPrimaryAction idxHeaderEnd"><span><div class="idxHeaderLogoBox"><div class="idxHeaderLogo" alt="${_nls.ibmlogo}"><span class="idxTextAlternative">${_nls.ibmlogo}</span></div></div></span></li>')},_renderHelp:function(a,b){this._injectTemplate(a,'<li class="idxHeaderPrimaryAction idxHeaderHelp"><a tabindex="3" href="javascript://" data-dojo-attach-point="_helpNode" title="${_nls.actionHelp}"><span class="idxHeaderHelpIcon"><span class="idxTextAlternative">${_nls.actionHelp}</span></span><span class="idxHeaderDropDownArrow"><span class="idxTextAlternative">(v)</span></span></a></li>');
b&&this._injectTemplate(a,'<li class="idxHeaderPrimaryAction idxHeaderSeparator"><span></span></li>');if(this.help)this.help=o.byId(this.help),this._clearHandles("_helpHandles"),this._helpHandles=this._prepareMenu(this.help,["oneuiHeaderGlobalActionsMenu","oneuiHeaderGlobalActionsSubmenu"],this._helpNode,this._helpNode,!0),c.toggle(this._helpNode,"idxHeaderDropDown",this.showHelpDropDownArrow)},_renderSettings:function(a,b){this._injectTemplate(a,'<li class="idxHeaderPrimaryAction idxHeaderTools"><a tabindex="2" href="javascript://" data-dojo-attach-point="_settingsNode" title="${_nls.actionShare}"><span class="idxHeaderShareIcon"><span class="idxTextAlternative">${_nls.actionShare}</span></span><span class="idxHeaderDropDownArrow"><span class="idxTextAlternative">(v)</span></span></a></li>');
b&&this._injectTemplate(a,'<li class="idxHeaderPrimaryAction idxHeaderSeparator"><span></span></li>');if(this.settings)this.settings=o.byId(this.settings),this._clearHandles("_settingsHandles"),this._settingsHandles=this._prepareMenu(this.settings,["oneuiHeaderGlobalActionsMenu","oneuiHeaderGlobalActionsSubmenu"],this._settingsNode,this._settingsNode,!0),c.toggle(this._settingsNode,"idxHeaderDropDown",this.showSettingsDropDownArrow)},_renderUser:function(a){this._injectTemplate(a,'<li class="idxHeaderPrimaryAction"><a tabindex="1" href="javascript://" data-dojo-attach-point="userNode" class="idxHeaderUserNameNoText"><span class="idxHeaderUserIcon"><img data-dojo-attach-point="userImageNode" class="idxHeaderUserIcon" alt="" /></span><span class="idxHeaderUserText" data-dojo-attach-point="userTextNode"></span><span class="idxHeaderDropDownArrow"><span class="idxTextAlternative">(v)</span></span></a></li>');
this._refreshUser();if(this.user&&this.user.actions)this.user.actions=o.byId(this.user.actions),this._clearHandles("_actionsHandles"),this._actionsHandles=this._prepareMenu(this.user.actions,["oneuiHeaderGlobalActionsMenu","oneuiHeaderGlobalActionsSubmenu"],this.userNode,this.userNode,!0),c.toggle(this.userNode,"idxHeaderDropDown",this.showUserDropDownArrow)},_renderNavigation:function(a){if(this.navigation="object"==typeof this.navigation&&"nodeType"in this.navigation?o.byNode(this.navigation):o.byId(this.navigation)){this.navigation.placeAt(a);
this.navigation.startup();a=this.navigation.getChildren();if(1==a.length&&""==a[0].label)c.toggle(a[0].containerNode,"idxHeaderNavigationHome",!0);else if(this.showNavigationDropDownArrows)for(var b=0;b<a.length;b++)if(a[b].popup){var d=h(".idxHeaderDropDownArrow",a[b].focusNode);c.toggle(a[b].domNode,"idxHeaderDropDown",!0);0<d.length||this._injectTemplate(a[b].focusNode,'<span class="idxHeaderDropDownArrow"><span class="idxTextAlternative">(v)</span></span>')}for(a=this.navigation.domNode.firstChild;a;)b=
a,a=a.nextSibling,3==b.nodeType&&!b.nodeValue.match(/\S/)&&this.navigation.domNode.removeChild(b);this._clearHandles("_navHandles");this._navHandles=this._prepareMenu(this.navigation,[null,"oneuiHeaderNavigationMenu","oneuiHeaderNavigationSubmenu"])}else require.log("WARNING: navigation widget not found")},_renderPrimarySearch:function(a){this._injectTemplate(a,'<li role="search" class="idxHeaderSearchContainer"><input type="text" data-dojo-attach-point="primarySearchTextNode" /><input type="image" data-dojo-attach-point="primarySearchButtonNode" /></li>');
this.primarySearch.onChange=k.isFunction(this.primarySearch.onChange)?this.primarySearch.onChange:new Function("value",this.primarySearch.onChange);this.primarySearch.onSubmit=k.isFunction(this.primarySearch.onSubmit)?this.primarySearch.onSubmit:new Function("value",this.primarySearch.onSubmit);var b=this,a="entryPrompt"in this.primarySearch?this.primarySearch.entryPrompt:this._nls.searchEntry,c="submitPrompt"in this.primarySearch?this.primarySearch.submitPrompt:this._nls.searchSubmit,d=new y({trim:!0,
placeHolder:a,intermediateChanges:!0,title:a},this.primarySearchTextNode);d.own(e.after(d,"onChange",function(){b._onPrimarySearchChange(d.attr("value"))}));d.own(e.after(d,"onKeyUp",function(a){a.keyCode==n.ENTER&&b._onPrimarySearchSubmit(d.attr("value"))}));a=new x({label:c,showLabel:!1,iconClass:"idxHeaderSearchButton"},this.primarySearchButtonNode);a.own(e.after(a,"onClick",function(){b._onPrimarySearchSubmit(d.attr("value"))}))},_renderSecondaryTitle:function(b){this._injectTemplate(b,'<span class="idxHeaderSecondaryTitleContainer"><span class="idxHeaderSecondaryTitle" data-dojo-attach-point="secondaryTitleTextNode">${secondaryTitle}</span><span class="idxHeaderSecondarySubtitle" data-dojo-attach-point="_secondaryTitleSeparatorNode">&nbsp;&ndash;&nbsp;</span><span class="idxHeaderSecondarySubtitle" data-dojo-attach-point="secondarySubtitleTextNode">${secondarySubtitle}</span>&nbsp;&nbsp;<span class="idxHeaderSecondaryAdditionalContext" data-dojo-attach-point="additionalContextTextNode">${additionalContext}</span></span>');
a.set(this._secondaryTitleSeparatorNode,"display",this.secondaryTitle&&this.secondarySubtitle?"":"none")},_renderContextActions:function(a){this._injectTemplate(a,'<div class="idxHeaderSecondaryActions" data-dojo-attach-point="_contextActionsNode"></div>');this.contextActionNodes=[];for(a=0;a<this.contextActions.length;a++)this._injectTemplate(this._contextActionsNode,'<button type="button" data-dojo-attach-point="_nextActionNode"></button>'),new x(this.contextActions[a],this._nextActionNode),this.contextActionNodes.push(this._nextActionNode),
delete this._nextActionNode},_renderSecondarySearch:function(a){this._injectTemplate(a,'<div role="search" class="idxHeaderSearchContainer"><input type="text" data-dojo-attach-point="secondarySearchTextNode" /><input type="image" data-dojo-attach-point="secondarySearchButtonNode" /></div>');this.secondarySearch.onChange=k.isFunction(this.secondarySearch.onChange)?this.secondarySearch.onChange:new Function("value",this.secondarySearch.onChange);this.secondarySearch.onSubmit=k.isFunction(this.secondarySearch.onSubmit)?
this.secondarySearch.onSubmit:new Function("value",this.secondarySearch.onSubmit);var b=this,a="entryPrompt"in this.secondarySearch?this.secondarySearch.entryPrompt:this._nls.searchEntry,c="submitPrompt"in this.secondarySearch?this.secondarySearch.submitPrompt:this._nls.searchSubmit,d=new y({trim:!0,placeHolder:a,intermediateChanges:!0,title:a},this.secondarySearchTextNode);d.own(e.after(d,"onChange",function(){b._onSecondarySearchChange(d.attr("value"))}));d.own(e.after(d,"onKeyUp",function(a){a.keyCode==
n.ENTER&&b._onSecondarySearchSubmit(d.attr("value"))}));a=new x({label:c,showLabel:!1,iconClass:"idxHeaderSearchButton"},this.secondarySearchButtonNode);a.own(e.after(a,"onClick",function(){b._onSecondarySearchSubmit(d.attr("value"))}))},_renderSecondaryInnerBorder:function(a){this._injectTemplate(a,'<div class="idxHeaderSecondaryInnerBorder"></div>')},_renderContent:function(a,b){this._injectTemplate(a,'<div class="oneuiContentContainer">'+(b?'<div class="oneuiContentContainerInner">':"")+'<div data-dojo-attach-point="contentControllerNode"></div>'+
(b?"</div>":"")+"</div>");var c=new C({containerId:"string"===typeof this.contentContainer?this.contentContainer:this.contentContainer.id,"class":"dijitTabContainerTop-tabs",useMenu:this._tabMenu,useSlider:this._tabSlider,buttonWidget:k.extend(idx.layout._PopupTabButton,{tabDropDownText:"",tabSeparatorText:"|"})},this.contentControllerNode),d=this;this._clearHandles("_controllerHandles");this._controllerHandles=this._prepareMenu(c._menuBtn,["oneuiHeader2ndLevMenu","oneuiHeader2ndLevSubmenu"]);this._controllerHandles.push(e.after(c,
"_bindPopup",function(a,b,c,e){d._prepareMenu(e,["oneuiHeader2ndLevMenu","oneuiHeader2ndLevSubmenu"],c,b,this._controllerHandles)},!0));c.startup();this._controller=c;var f=o.byId(this.contentContainer);if(f&&f._started)c.onStartup({children:f.getChildren(),selected:f.selectedChildWidget})},_onPrimarySearchChange:function(a){this.primarySearch.onChange(a)},_onPrimarySearchSubmit:function(a){this.primarySearch.onSubmit(a)},_onSecondarySearchChange:function(a){this.secondarySearch.onChange(a)},_onSecondarySearchSubmit:function(a){this.secondarySearch.onSubmit(a)}})})},
"idx/main":function(){define("idx/main",["require","dojo/_base/lang","dojo/_base/kernel","dojo/_base/window","dojo/dom-class"],function(l,m,k,j,e){var m=m.getObject("idx",!0),h=function(){var c=j.body();e.add(c,"idx_dojo_"+k.version.major+"_"+k.version.minor)},d=k.version.minor;2>k.version.major&&7>d?dojo.addOnLoad(h):l(["dojo/domReady!"],h);return m})},"idx/resources":function(){define("idx/resources","dojo/_base/lang,idx/main,dojo/i18n,./string,./util,dojo/i18n!./nls/base".split(","),function(l,
m,k,j){var e=l.getObject("resources",!0,m);e._legacyScopeMap={"":"idx/",".":"idx/",app:"idx/app/","app._Launcher":"idx/app/_Launcher","app.A11yPrologue":"idx/app/A11yPrologue","app.WorkspaceType":"idx/app/WorkspaceType","app.WorkspaceTab":"idx/app/WorkspaceTab",dialogs:"idx/dialogs",form:"idx/form/","form.buttons":"idx/form/buttons",grid:"idx/grid/","grid.prop":"idx/grid/","grid.prop.PropertyGrid":"idx/grid/PropertyGrid","grid.prop.PropertyFormatter":"idx/grid/PropertyGrid",layout:"idx/layout/","layout.BorderContainer":"idx/layout/BorderContainer",
widget:"idx/widget/","widget.ModalDialog":"idx/widget/ModalDialog","widget.TypeAhead":"idx/widget/TypeAhead","widget.HoverHelp":"idx/widget/HoverHelp","widget.EditController":"idx/widget/EditController"};e._defaultResources={dateFormatOptions:{formatLength:"medium",fullYear:!0,selector:"date"},timeFormatOptions:{formatLength:"medium",selector:"time"},dateTimeFormatOptions:{formatLength:"medium",fullYear:!0},decimalFormatOptions:{type:"decimal"},integerFormatOptions:{type:"decimal",fractional:!1,round:0},
percentFormatOptions:{type:"percent",fractional:!0,places:2},currencyFormatOptions:{type:"currency"},labelFieldSeparator:":"};e._localResources=[];e._currentResources=[];e._scopeResources=[];e._normalizeScope=function(h){return!h||0==h.length?"idx/":e._legacyScopeMap[h]?e._legacyScopeMap[h]:h};e._getBundle=function(h,d,c){var c=k.normalizeLocale(c),b=h+"."+d,a=e._currentResources[c];a||(a=[],e._currentResources[c]=a);var f=e._localResources[c];f||(f=[],e._localResources[c]=f);var j=a[b];if(!j){var m=
f[b];m||((m=k.getLocalization(h,d,c))||(m={}),f[b]=m);j={};l.mixin(j,m);a[b]=j}return j};e.clearLocalOverrides=function(h){h=k.normalizeLocale(h);e._currentResources[h]=null;e._scopeResources[h]=null};e.clearOverrides=function(){e._currentResources=[];e._scopeResources=[]};e.install=function(h,d,c){var c=k.normalizeLocale(c),d=e._normalizeScope(d),b=d.lastIndexOf("/"),a="",f="";b==d.length-1?(f="base",a=d.substr(0,d.length-1)):0<=b&&(f=d.substr(b+1),a=d.substr(0,b));b=e._getBundle(a,f,c);l.mixin(b,
h);e._clearResourcesCache(c,d)};e.getResources=function(h,d){var d=k.normalizeLocale(d),h=e._normalizeScope(h),c=e._scopeResources[d];c||(c=[],e._scopeResources[d]=c);var b=c[h];if(b)return b;for(var b={},a=h.split("/"),f=0,j="",l="",f=0;f<a.length;f++){var m="base";f<a.length-1?(j=j+l+a[f],l="."):m=a[f];if(m=e._getBundle(j,m,d))for(var q in m)b[q]=m[q]}return c[h]=b};e.getStrings=function(h,d){return e.getResources(h,d)};e._clearResourcesCache=function(h,d){h=k.normalizeLocale(h);if(e._scopeResources[h])if(d){var c=
e._scopeResources[h];for(field in c)j.startsWith(field,d)&&(c[field]=null)}else e._scopeResources[h]=null};e.get=function(h,d,c){for(var c=k.normalizeLocale(c),d=e._normalizeScope(d),d=d.split("/"),b=0,b=0;b<d.length;b++){for(var a=0==b?d[d.length-1]:"base",f="",j="",l=0==b?d.length-b-1:d.length-b,m=0;m<l;m++)f=f+j+d[m],j=".";if((a=e._getBundle(f,a,c))&&h in a)return a[h]}return h in e._defaultResources?e._defaultResources[h]:null};e.getLabelFieldSeparator=function(h,d){return e.get("labelFieldSeparator",
h,d)};e.getDateFormatOptions=function(h,d){return e.get("dateFormatOptions",h,d)};e.getTimeFormatOptions=function(h,d){return e.get("timeFormatOptions",h,d)};e.getDateTimeFormatOptions=function(h,d){return e.get("dateTimeFormatOptions",h,d)};e.getDecimalFormatOptions=function(h,d){return e.get("decimalFormatOptions",h,d)};e.getIntegerFormatOptions=function(h,d){return e.get("integerFormatOptions",h,d)};e.getPercentFormatOptions=function(h,d){return e.get("percentFormatOptions",h,d)};e.getCurrencyFormatOptions=
function(h,d){return e.get("currencyFormatOptions",h,d)};return e})},"idx/string":function(){define("idx/string",["dojo/_base/lang","idx/main","dojo/string"],function(l,m,k){m=l.getObject("string",!0,m);m.startsWith=function(j,e){return l.isString(j)&&l.isString(e)&&0===j.indexOf(e)};m.endsWith=function(j,e){return l.isString(j)&&l.isString(e)&&j.indexOf(e)===j.length-e.length};m.equalsIgnoreCase=function(j,e){return l.isString(j)&&l.isString(e)&&j.toLowerCase()===e.toLowerCase()};m.isNumber=function(j){return"number"==
typeof j&&isFinite(j)};m.nullTrim=function(j){if(!j)return null;j=k.trim(j);return 0==j.length?null:j};m.propToLabel=function(j){if(!j)return j;for(var j=k.trim(j),e=j.toUpperCase(),h=j.toLowerCase(),d=0,c="",b="",a=!1,f=!1,d=0;d<j.length;d++){var l=e.charAt(d),m=h.charAt(d),t=j.charAt(d),q=l==t&&m!=t,o=m==t&&l!=t;if("_"==t||" "==t)" "!=b&&(b=" ",a=q,f=o,c+=b);else if("."==t)b="/",a=q,f=o,c=c+" "+b+" ";else if(0==d||" "==b)b=l,a=q,f=o,c+=b;else if(!q&&!o){if(a||f)c+=" ";a=q;f=o;b=t;c+=b}else!a&&!f?
(m="/"==b,a=q,f=o,b=l,c=m?c+b:c+" "+b):q&&f?(b=l,a=q,f=o,c=c+" "+b):(b=m,a=q,f=o,c+=b)}return c};return m})},"idx/util":function(){define("idx/util","dojo/_base/lang,idx/main,dojo/_base/kernel,dojo/has,dojo/_base/xhr,dojo/_base/window,dojo/_base/url,dojo/date/stamp,dojo/json,dojo/string,dojo/dom-class,dojo/dom-style,dojo/dom-attr,dojo/dom-construct,dojo/dom-geometry,dojo/io-query,dojo/query,dojo/NodeList-dom,dijit/registry,dijit/form/_FormWidget,dijit/_WidgetBase,dojo/_base/sniff,dijit/_base/manager".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r,t,q,o,s,u,w,v,x){var y=l.getObject("util",!0,m);y.getVersion=function(){var a={url:k.moduleUrl("idx","version.txt"),showProgress:!1,handleAs:"json",load:function(){},error:function(){}};e.xhrGet(a)};y.getOffsetPosition=function(a,b){for(var c=h.body(),b=b||c,d=a,e=0,f=0;d!==b;){if(d===c)throw"idx.util.getOffsetPosition: specified root is not ancestor of specified node";e+=d.offsetLeft;f+=d.offsetTop;d=d.offsetParent}return{l:e,t:f}};y.typeOfObject=function(a){return l.isString(a)?
"string":"undefined"==typeof a?"undefined":"number"==typeof a?"number":"boolean"==typeof a?"boolean":l.isFunction(a)?"function":l.isArray(a)?"array":a instanceof Date?"date":a instanceof d?"url":"object"};y.parseObject=function(a,e){switch(e){case "string":return""+a;case "number":return"number"==typeof a?a:a.length?Number(a):NaN;case "boolean":return"boolean"==typeof a?a:"false"!=a.toLowerCase();case "function":l.isFunction(a)&&(a=a.toString(),a=l.trim(a.substring(a.indexOf("{")+1,a.length-1)));
try{return""===a||-1!=a.search(/[^\w\.]+/i)?new Function(a):l.getObject(a,!1)||new Function(a)}catch(f){return new Function}case "array":return l.isArray(a)?a:a?a.split(/\s*,\s*/):[];case "date":if(a instanceof Date)return a;switch(a){case "":return new Date("");case "now":return new Date;default:return c.fromISOString(a)}case "url":return a instanceof d?a:k.baseUrl+a;default:return"string"==y.typeOfObject(a)?b.parse(a):a}};y.getCSSOptions=function(b,c,d){var e=h.body();if(!c||"canHaveHTML"in c&&
!c.canHaveHTML)c=e;for(var j=!1,k=c;k&&!j;)k===e&&(j=!0),k=k.parentNode;var l=null;if(!j){k=c;for(c=[];k;)c.push(r.get(k,"class")),k=k.parentNode;c.reverse();k=l=t.create("div",{style:"visibility: hidden; display: none;"},e,"last");for(e=0;e<c.length;e++)(j=c[e])&&(j=a.trim(j)),j&&0==j.length&&(j=null),k=t.create("div",j?{"class":j}:null,k,"last");c=k}k=t.create("div",null,c);f.add(k,b);e=n.getComputedStyle(k);b=null;e&&(b=""+e.backgroundImage);t.destroy(k);l&&t.destroy(l);if(!b||5>b.length||"url("!=
b.toLowerCase().substring(0,4)||")"!=b.charAt(b.length-1))return null;b=b.substring(4,b.length-1);if('"'==b.charAt(0)){if(2>b.length||'"'!=b.charAt(b.length-1))return null;b=b.substring(1,b.length-1)}l=b.lastIndexOf("?");k=b.lastIndexOf("/");if(0>l||l<k)return null;l=b.substring(l+1,b.length);if(null==l||0==l.length)return null;l=o.queryToObject(l);return d?y.mixin({},l,d):l};y.mixinCSSDefaults=function(a,b,c){if(!a)return null;b=y.getCSSOptions(b,c);if(!b)return null;y.mixin(a,b);return b};y.mixin=
function(a,b,c){if(!a)return null;if(!b)return a;c||(c=a);var d={},e;for(e in b)if(e in c){var f=y.typeOfObject(c[e]);d[e]=y.parseObject(b[e],f)}l.mixin(a,d);return a};y.recursiveMixin=function(a,b,c){var d=null,e=null,f=null;if(c)d=c.clone,e=c.controlField,f="controlValue"in c?c.controlValue:!0;for(field in b)if(field in a){var h=a[field],j=b[field],k=y.typeOfObject(h),m=y.typeOfObject(j);k==m&&"object"==k&&(!e||h[e]==f)?y.recursiveMixin(h,j,c):a[field]=d?l.clone(j):j}else a[field]=d?l.clone(b[field]):
b[field]};y.nullify=function(a,b,c){for(var d=0,d=0;d<c.length;d++){var e=c[d];e in a&&(b&&e in b||(a[e]=null))}};y._getNodeStyle=function(a){var b=r.get(a,"style");if(!b)return null;if("string"==y.typeOfObject(b))for(var a={},b=b.split(";"),c=0;c<b.length;c++){var d=b[c],e=d.indexOf(":");if(!(0>e)){var f=d.substring(0,e),h="";e<d.length-1&&(h=d.substring(e+1));a[f]=h}}else a=b;return a};y._getNodePosition=function(a){a=y._getNodeStyle(a);return!a||!a.position?"":a.position};y.fitToWidth=function(a,
b){var c=y._getNodePosition(b);n.set(a,{width:"auto"});n.set(b,{position:"static"});var d=q.getMarginBox(a);n.set(a,{width:d.w+"px"});n.set(b,{position:c});return d};y.fitToHeight=function(a,b){var c=y._getNodePosition(b);n.set(a,{height:"auto"});n.set(b,{position:"static"});var d=q.getMarginBox(a);n.set(a,{height:d.h+"px"});n.set(b,{position:c});return d};y.fitToSize=function(a,b){var c=y._getNodePosition(b);n.set(a,{width:"auto",height:"auto"});n.set(b,{position:"static"});var d=q.getMarginBox(a);
n.set(a,{width:d.w+"px",height:d.h+"px"});n.set(b,{position:c});return d};y.getStaticSize=function(a){var b=y._getNodeStyle(a),c=b&&b.position?b.position:"",d=b&&b.width?b.width:"",b=b&&b.height?b.height:"";n.set(a,{position:"static",width:"auto",height:"auto"});var e=q.getMarginBox(a);n.set(a,{position:c,width:d,height:b});return e};y.reposition=function(a,b){var c=y._getNodePosition(a);n.set(a,{position:b});return c};y.getParentWidget=function(a,b){var c=(a instanceof x?a.domNode:a).parentNode;
if(null==c)return null;for(var d=w.getEnclosingWidget(c);b&&d&&!(d instanceof b);)c=d.domNode.parentNode,d=null,c&&(d=w.getEnclosingWidget(c));return d};y.getSiblingWidget=function(a,b,c){var d=a instanceof x?a.domNode:a,a=d.parentNode;if(null==a)return null;a=a.childNodes;if(!a)return null;for(var e=0,e=0;e<a.length&&a[e]!=d;e++);if(e==a.length)return null;for(var d=b?-1:1,b=b?-1:a.length,f=0,h=null,f=e+d;f!=b;f+=d){var e=a[f],j=w.getEnclosingWidget(e);if(j&&j.domNode==e&&(!c||j instanceof c)){h=
j;break}}return h};y.getChildWidget=function(a,b,c){if(!(a instanceof x)){var d=w.getEnclosingWidget(a);d&&(a=d)}var e=null,e=a instanceof x?a.getChildren():a.childNodes;if(!e||0==e.length)return null;for(var a=b?-1:1,f=b?-1:e.length,h=0,j=null,h=b?e.length-1:0;h!=f;h+=a){d=e[h];if(!(d instanceof x)){b=d;d=w.getEnclosingWidget(b);if(!d)continue;if(d.domNode!=b)continue}if(!c||d instanceof c){j=d;break}}return j};y.getFormWidget=function(a,b){var c=null;b?c=b instanceof x?b.domNode:form:h.body();for(var d=
null,c=s("[name='"+a+"']",c),e=0;!d&&e<c.length;e++){var f=w.getEnclosingWidget(c[e]);f&&f instanceof v&&f.get("name")==a&&(d=f)}return d};y.isNodeOrElement=function(a){return a.parentNode&&a.childNodes&&a.attributes?!0:!1};y.debugObject=function(a){return y._debugObject(a,"/",[])};y._debugObject=function(a,d,e){if(null===a)return"null";switch(y.typeOfObject(a)){case "object":for(var f=0;f<e.length;f++)if(e[f].obj==a)return"CIRCULAR_REFERENCE[ "+e[f].path+" ]";e.push({obj:a,path:d});var f="{ ",h=
"";for(field in a)f=f+h+'"'+field+'": '+y._debugObject(a[field],d+'/"'+field+'"',e),h=", ";return f+" }";case "date":return"DATE[ "+c.toISOString(a)+" ]";default:return b.stringify(a)}};y.isBrowser=j("host-browser");y.isIE=j("ie");y.isFF=j("ff");y.isSafari=j("safari");y.isChrome=j("chrome");y.isMozilla=j("mozilla");y.isOpera=j("opera");y.isKhtml=j("khtml");y.isAIR=j("air");y.isQuirks=j("quirks");y.isWebKit=j("webkit");y.fromJson="undefined"!=typeof JSON?JSON.parse:function(){function a(b,c,e){return c?
d[c]:String.fromCharCode(parseInt(e,16))}var b=RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),c=RegExp("\\\\(?:([^u])|u(.{4}))","g"),d={'"':'"',"/":"/","\\":"\\",b:"\u0008",f:"\u000c",n:"\n",r:"\r",t:"\t"},e=new String(""),f=Object.hasOwnProperty;return function(d,h){var j=d.match(b),k,l=j[0],m=!1;"{"===l?k={}:"["===l?k=[]:(k=[],m=!0);for(var n,o=[k],q=1-
m,r=j.length;q<r;++q){var l=j[q],s;switch(l.charCodeAt(0)){default:s=o[0];s[n||s.length]=+l;n=void 0;break;case 34:l=l.substring(1,l.length-1);-1!==l.indexOf("\\")&&(l=l.replace(c,a));s=o[0];if(!n)if(s instanceof Array)n=s.length;else{n=l||e;break}s[n]=l;n=void 0;break;case 91:s=o[0];o.unshift(s[n||s.length]=[]);n=void 0;break;case 93:o.shift();break;case 102:s=o[0];s[n||s.length]=!1;n=void 0;break;case 110:s=o[0];s[n||s.length]=null;n=void 0;break;case 116:s=o[0];s[n||s.length]=!0;n=void 0;break;
case 123:s=o[0];o.unshift(s[n||s.length]={});n=void 0;break;case 125:o.shift()}}if(m){if(1!==o.length)throw Error();k=k[0]}else if(o.length)throw Error();if(h){var t=function(a,b){var c=a[b];if(c&&"object"===typeof c){var d=null,e;for(e in c)if(f.call(c,e)&&c!==a){var j=t(c,e);void 0!==j?c[e]=j:(d||(d=[]),d.push(e))}if(d)for(e=d.length;0<=--e;)delete c[d[e]]}return h.call(a,b,c)};k=t({"":k},"")}return k}}();var C=null;y.normalizedLength=function(a){if(0===a.length)return 0;if(2<a.length){if(!C){var b=
{"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0},c;if(j("ie"))h.doc.documentElement.style.fontSize="100%";var d=t.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},h.body());for(c in b)d.style.fontSize=c,b[c]=16*Math.round(12*d.offsetHeight/16)/12/1E3;h.body().removeChild(d);C=b}b=C["12pt"]/12;c=parseFloat(a);
switch(a.slice(-2)){case "px":return c;case "pt":return c*b;case "in":return 72*c*b;case "pc":return 12*c*b;case "mm":return c*g.mm_in_pt*b;case "cm":return c*g.cm_in_pt*b}}return parseFloat(a)};y.widgetEquals=function(a,b){if(a===b)return!0;if(!a&&b||a&&!b)return!1;if(!l.isString(a)&&"id"in a)a=a.id;if(!l.isString(b)&&"id"in b)b=b.id;return a==b};return y})},"idx/widget/Menu":function(){require({cache:{"url:idx/widget/templates/Menu.html":'<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}" data-dojo-attach-event="onkeypress:_onKeyPress" cellspacing="0">\r\n\t<tbody class="dijitReset">\r\n\t\t<tr data-dojo-attach-point="_columnContainerNode">\r\n\t\t\t<td class="dijitReset oneuiMenuColumn" data-dojo-attach-point="columnNodes">\r\n\t\t\t\t<table class="dijitReset" cellspacing="0" width="100%" role="presentation">\r\n\t\t\t\t\t<tbody class="dijitReset" data-dojo-attach-point="_containerNodes,containerNode">\r\n<\!-- this is column 0, which also starts out as the container node so menu items are initially loaded here.\r\n     containerNode changes to point to _columnContainerNode once the widget has initialised, so the whole set of columns is the container.\r\n\t this must be kept in synch with _MenuColumn.html --\>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</tbody>\r\n</table>\r\n',
"url:idx/widget/templates/_MenuColumn.html":'<td class="dijitReset oneuiMenuColumn" data-dojo-attach-point="columnNodes">\r\n\t<table class="dijitReset" cellspacing="0" width="100%" role="presentation">\r\n\t\t<tbody class="dijitReset" data-dojo-attach-point="_containerNodes">\r\n<\!-- this must be kept in synch with column 0 included in Menu.html --\>\r\n\t\t</tbody>\r\n\t</table>\r\n</td>'}});define("idx/widget/Menu","dojo/_base/lang,dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/dom-geometry,dijit/_TemplatedMixin,dijit/_WidgetBase,dijit/Menu,dijit/MenuItem,dijit/registry,./_MenuOpenOnHoverMixin,dojo/text!./templates/Menu.html,dojo/text!./templates/_MenuColumn.html".split(","),
function(l,m,k,j,e,h,d,c,b,a,f,n,r){var t={error:"oneuiErrorMenuItemIcon",warning:"oneuiWarningMenuItemIcon",confirmation:"oneuiConfirmationMenuItemIcon",information:"oneuiInformationMenuItemIcon",success:"oneuiSuccessMenuItemIcon",critical:"oneuiCriticalMenuItemIcon",attention:"oneuiAttentionMenuItemIcon",compliance:"oneuiComplianceMenuItemIcon"},c=k("idx.widget.Menu",[c,f],{_containerNodes:null,columnNodes:null,menuForDialog:!0,templateString:n,constructor:function(){this._containerNodes=[];this.columnNodes=
[]},_getNextFocusableChild:function(a,b){var c=null,d=this.getChildren(),e;null!=a?(e=m.indexOf(d,a),-1!=e&&(e+=b,0>e&&(e=d.length-1),e>=d.length&&(e=0))):e=0==d.length?-1:1==b?0:d.length-1;if(-1!=e){var f=e;do{if(d[f].isFocusable()){c=d[f];break}f+=b;0>f&&(f=d.length-1);f>=d.length&&(f=0)}while(f!=e)}return c},_moveToColumn:function(b){if(this.focusedChild)for(var c=0;c<this._containerNodes.length;c++)if(this.focusedChild.domNode.parentNode==this._containerNodes[c]){var d=c,f=e.getMarginBox(this.focusedChild.domNode).t;
break}if(void 0!=d){for(c=d+b;0<=c&&c<this._containerNodes.length;c+=b){var h=a.findWidgets(this._containerNodes[c]),h=dojo.filter(h,function(a){return a.isFocusable()});if(0<h.length){var j=c;break}}if(void 0!=j)for(c=0;c<h.length;c++){b=h[c];j=e.getMarginBox(b.domNode);if(f>=j.t&&f<=j.t+j.h-1)return this.focusChild(b),!0;if(f<j.t)return 0<c?this.focusChild(h[c-1]):this.focusChild(b),!0;if(c==h.length-1)return this.focusChild(b),!0}}return!1},_onKeyPress:function(a){if(!a.ctrlKey&&!a.altKey)switch(a.charOrCode){case this._openSubMenuKey:this._moveToColumn(1)||
this._moveToPopup(a);j.stop(a);break;case this._closeSubMenuKey:if(!this._moveToColumn(-1)&&this.parentMenu)if(this.parentMenu._isMenuBar)this.parentMenu.focusPrev();else this.onCancel(!1);j.stop(a)}},refresh:function(){for(var a=this.getChildren(),b=0;b<a.length;b++)this.addChild(a[b])},buildRendering:function(){this.inherited(arguments);this.containerNode=this._columnContainerNode},startup:function(){if(!this._started)this._started=!0,this.inherited(arguments),this.refresh()},addChild:function(a,
b){for(;this._containerNodes.length<=(a.column||0);){var c=h.getCachedTemplate(r).cloneNode(!0);this._attachTemplateNodes(c,function(a,b){return a.getAttribute(b)});this._columnContainerNode.appendChild(c)}this.containerNode=this._containerNodes[a.column||0];this.inherited(arguments);this.containerNode=this._columnContainerNode}});c.createMessageMenuItem=function(a){var c="";a&&(a.timestamp&&(c+='\u200f<span class="messageMenuTimestamp messagesContrast">\u200e'+a.timestamp+"\u200f</span>\u200e"),
a.content&&(c+='\u200f <span class="messageTitles">\u200e'+a.content+"\u200f</span>\u200e"),a.messageId&&(c+='\u200f <span class="messagesContrast">(\u200e'+a.messageId+"\u200f)</span>\u200e"));return new b({label:c,iconClass:a&&a.type&&t[a.type]})};return l.getObject("idx.oneui",!0).Menu=c})},"idx/widget/_MenuOpenOnHoverMixin":function(){define("idx/widget/_MenuOpenOnHoverMixin",["dojo/_base/declare"],function(l){return l("idx.widget._MenuOpenOnHoverMixin",null,{openOnHover:!0,_isActuallyActive:!1,
_setOpenOnHoverAttr:function(l){(this.openOnHover=l)?this._forceActive():this._restoreActive()},_markActive:function(){this.inherited(arguments);this._isActuallyActive=!0},_markInactive:function(){this.openOnHover||this.inherited(arguments);this._isActuallyActive=!1},_forceActive:function(){var l=this._isActuallyActive;this._markActive();this._isActuallyActive=l},_restoreActive:function(){this._isActuallyActive?this._markActive():this._markInactive()}})})},"*now":function(l){l(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});
(function(){var l=this.require;l({cache:{}});!l.async&&l(["dojo"]);l.boot&&l.apply(null,l.boot)})();