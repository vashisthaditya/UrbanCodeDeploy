//>>built
require({cache:{"url:idx/form/templates/CheckBoxSelect.html":'<div id="widget_${id}" class="dijitReset dijitInline idxComposite" dojoAttachPoint="_popupStateNode"\r\n\t><div class="idxLabel dijitInline dijitHidden"><span class="idxRequiredIcon">*&nbsp</span><label id="${id}_label" for="${id}" dojoAttachPoint="compLabelNode"></label></div\r\n\t><table class="dijit dijitReset dijitInline dijitLeft" aria-multiselectable="true"\r\n\t\tdojoAttachPoint="_aroundNode,_buttonNode,tableNode,focusNode,stateNode,oneuiBaseNode" cellspacing=\'0\' cellpadding=\'0\'\r\n\t\trole="listbox" aria-haspopup="true"\r\n\t\t><tbody role="presentation"><tr role="presentation"\r\n\t\t\t><td class="dijitReset dijitStretch dijitButtonContents dijitButtonNode" role="presentation"\r\n\t\t\t\t><span class="dijitReset dijitInline dijitButtonText"  dojoAttachPoint="containerNode"></span\r\n\t\t\t\t><input type="hidden" ${!nameAttrSetting} dojoAttachPoint="valueNode" value="${value}" aria-hidden="true"\r\n\t\t\t/></td><td class="dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton"\r\n\t\t\t\t\tdojoAttachPoint="titleNode" role="presentation"\r\n\t\t\t\t><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\r\n\t\t\t\t><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\r\n\t\t\t></td\r\n\t\t></tr></tbody\r\n\t></table\r\n\t><div class=\'dijitReset dijitValidationContainer dijitInline\' dojoAttachPoint="iconNode"\r\n\t\t><div class="dijitValidationIcon"><input class="dijitReset dijitInputField dijitValidationInner" value="&#935;" type="text" tabIndex="-1" readonly="readonly" role="presentation"/\r\n\t></div></div\r\n></div>'}});
define("idx/form/CheckBoxSelect","dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/_base/array,dojo/_base/event,dojo/_base/window,dojo/query,dojo/keys,dojo/dom-construct,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/dom-geometry,dojo/i18n,dijit/form/_FormSelectWidget,dijit/form/_FormValueWidget,dijit/_HasDropDown,dijit/MenuSeparator,dijit/Tooltip,../util,./_CssStateMixin,./_CheckBoxSelectMenu,./_CheckBoxSelectMenuItem,./_CompositeMixin,./_ValidationMixin,dojo/text!./templates/CheckBoxSelect.html,dojo/i18n!./nls/CheckBoxSelect,dojox/html/ellipsis".split(","),
function(o,p,e,c,d,k,q,i,l,C,f,g,m,D,n,r,s,t,u,j,v,w,x,y,z,A,B){return e.getObject("idx.oneui.form",!0).CheckBoxSelect=o("idx.form.CheckBoxSelect",[n,s,v,y,z],{baseClass:"idxCheckBoxSelectWrap",oneuiBaseClass:"idxCheckBoxSelect dijitSelect",multiple:!0,instantValidate:!0,labelSeparator:", ",cssStateNodes:{titleNode:"dijitDownArrowButton"},templateString:A,attributeMap:e.mixin(e.clone(n.prototype.attributeMap),{style:"tableNode"}),required:!1,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",
_isLoaded:!1,_childrenLoaded:!1,postMixInProperties:function(){this._nlsResources=B;this.missingMessage||(this.missingMessage=this._nlsResources.missingMessage);this.inherited(arguments)},_fillContent:function(){var a=this.options;if(!a)a=this.options=this.srcNodeRef?q("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+p._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||
!1,disabled:a.getAttribute("disabled")||!1}},this):[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts());this.dropDown=new w({id:this.id+"_menu"})},_getValueFromOpts:function(){var a=this.getOptions()||[];return c.map(c.filter(a,function(a){return a.selected&&"false"!==a.selected}),function(a){return a.value})||[]},postCreate:function(){this.extension={input:"onChange",blur:"_onBlur",focus:"_onFocus"};this.instantValidate&&
this.connect(this,"_onFocus",function(){""!=this.message&&this.displayMessage(this.message)});this.inherited(arguments);this.connect(this.domNode,"onmousemove",d.stop);if(this.fieldWidth){var a=m.getContentBox(this.containerNode.parentNode).w;g.set(this.containerNode,"width",a+"px")}},setStore:function(a,b,h){this.inherited(arguments);this.store.fetch({query:{selected:!0},onComplete:function(a){a=c.map(a,function(a){return a.value[0]});a.length&&this.set("value",a)},scope:this})},_getMenuItemForOption:function(a){if(!a.value&&
!a.label)return new t;var b=e.hitch(this,"_updateValue");return new x({parent:this,option:a,label:a.label||this.emptyLabel,onClick:b,checked:a.selected||!1,readOnly:this.readOnly||!1,disabled:this.disabled||!1})},_addOptionItem:function(a){this.dropDown&&this.dropDown.addChild(this._getMenuItemForOption(a))},_getChildren:function(){return!this.dropDown?[]:this.dropDown.getChildren()},_loadChildren:function(a){!0===a?(this.dropDown&&delete this.dropDown.focusedChild,this.options.length?this.inherited(arguments):
c.forEach(this._getChildren(),function(a){a.destroyRecursive()})):this._updateSelection();this._isLoaded=!1;this._childrenLoaded=!0;this._loadingStore||this._setValueAttr(this.value)},_updateValue:function(){this.set("value",this._getValueFromOpts())},onChange:function(){},reset:function(){this.inherited(arguments);u.hide(this.domNode);this._set("state","");this._set("message","")},_setDisplay:function(a){var b=0,a=(b=e.isArray(a)?a.length:a?1:0)?a.join(this.labelSeparator):this.placeHolder||"",b=
null;this.fieldWidth&&(b={title:a});b=l.create("span",b,this.containerNode,"only");f.add(b,"dijitReset");f.add(b,"dijitInline");this.fieldWidth&&f.add(b,"dojoxEllipsis");f.add(b,this.baseClass+"Label");var c=k.doc.createTextNode(a);l.place(c,b,"first");this.focusNode.setAttribute("aria-label",a)},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else{var h=this.getOptions()||[];e.isArray(a)||(a=[a]);c.forEach(a,function(b,d){e.isObject(b)||(b+="");
"string"===typeof b&&(a[d]=c.filter(h,function(a){return a.value===b})[0]||{value:"",label:""})},this);a=c.filter(a,function(a){return a&&a.value});if(!this.multiple&&(!a[0]||!a[0].value)&&h.length)a[0]=h[0];c.forEach(h,function(b){b.selected=c.some(a,function(a){return a.value===b.value})});var f=c.map(a,function(a){return a.value}),d=c.map(a,function(a){return a.label});this._setDisplay(this.multiple?d:d[0]);"undefined"!=typeof f&&(r.prototype._setValueAttr.apply(this,arguments),this._updateSelection())}},
_setStyleAttr:function(a){this.inherited(arguments);f.toggle(this.domNode,this.baseClass+"FixedWidth",!!this.tableNode.style.width)},_setPlaceHolderAttr:null,isLoaded:function(){return this._isLoaded},loadDropDown:function(a){this._loadChildren(!0);this._isLoaded=!0;a()},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode)this.dropDown.menuTableNode.style.width=""},invertSelection:function(){c.forEach(this.options,function(a){a.selected=!a.selected});this._updateSelection();
this._updateValue()},_updateSelection:function(){this.inherited(arguments);this._handleOnChange(this.value);c.forEach(this._getChildren(),function(a){a._updateBox()})},_setDisabledAttr:function(a){this.inherited(arguments);c.forEach(this._getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);c.forEach(this._getChildren(),function(b){b&&b.set&&b.set("readOnly",a)})},_isEmpty:function(){return!c.some(this.getOptions(),function(a){return a.selected&&
null!=a.value&&0!=a.value.toString().length})},_setFieldWidthAttr:function(a){f.toggle(this.oneuiBaseNode,"dijitSelectFixedWidth",!!a);if(a){a=j.normalizedLength(a);if(dojo.isFF)var b=j.normalizedLength(g.get(this.oneuiBaseNode,"border-left-width"))+j.normalizedLength(g.get(this.oneuiBaseNode,"border-right-width")),a=a+b;else dojo.isIE&&(a+=2);g.set(this.oneuiBaseNode,"width",a+"px");a=m.getContentBox(this.containerNode.parentNode).w;g.set(this.containerNode,"width",0<a?a:0)}},_setLabelAttr:function(a){this.inherited(arguments);
this.focusNode.setAttribute("aria-labelledby",this.id+"_label")},_onDropDownMouseDown:function(a){if(!this.disabled)d.stop(a),this._docHandler=this.connect(k.doc,"onmouseup","_onDropDownMouseUp"),this.toggleDropDown()},toggleDropDown:function(){this.disabled||(this._opened?this.closeDropDown():this.isLoaded()?this.openDropDown():this.loadDropDown(e.hitch(this,"openDropDown")))},_onKey:function(a){if(!this.disabled){var b=this.dropDown,c=a.target;if(b&&this._opened&&b.handleKey&&!1===b.handleKey(a))d.stop(a);
else if(b&&this._opened&&a.keyCode==i.ESCAPE)this.closeDropDown(),d.stop(a);else if(!this._opened&&(a.keyCode==i.DOWN_ARROW||(a.keyCode==i.ENTER||" "==a.keyCode)&&("input"!==(c.tagName||"").toLowerCase()||c.type&&"text"!==c.type.toLowerCase())))this._toggleOnKeyUp=!0,d.stop(a)}},_setDisabledAttr:function(){this.inherited(arguments);this._refreshState()},uninitialize:function(a){this.dropDown&&!this.dropDown._destroyed&&(this.dropDown.destroyRecursive(a),delete this.dropDown);this.inherited(arguments)}})});