//>>built
define("idx/layout/ListNavController","dojo/_base/declare,dijit/layout/StackController,dojo/_base/lang,dojo/dom-attr,dojo/dom-class,dojo/dom-geometry,dojo/on,dojo/aspect,dijit/registry,dijit/focus,dojo/_base/array".split(","),function(c,i,g,h,l,m,n,o,f,j,p){var k=c("idx.layout._ListNavButton",[i.StackButton],{baseClass:"idxListNavButton",_clicked:function(b){this.checked||this.inherited("_clicked",arguments)}}),c=c("idx.layout.ListNavController",[i],{buttonWidget:k,buttonWidgetClass:"idxListNavButton",
idxBaseClass:"idxListNavController",constructor:function(){},destroy:function(){this._firstFocus&&(this._firstFocus.remove(),delete this._firstFocus);this._firstAspect&&(this._firstAspect.remove(),delete this._firstAspect);this.inherited(arguments)},postCreate:function(){if(this.containerId){var b=f.byId(this.containerId);if(b&&b._started)this._containerAlreadyStarted=!0}this.inherited(arguments)},startup:function(){this.inherited(arguments);if(this._containerAlreadyStarted){var b=f.byId(this.containerId);
this.onStartup({children:b.getChildren(),selected:b.selectedChildWidget});delete this._containerAlreadyStarted}},onStartup:function(b){this.inherited(arguments);var a=f.byId(this.containerId);a&&a.resize()},buildRendering:function(){this.inherited(arguments);l.add(this.domNode,this.idxBaseClass)},resize:function(b,a){this.inherited(arguments);b&&m.getMarginBox(this.domNode,b)},adjacent:function(b){var a=this.getChildren(),e=p.indexOf(a,this.pane2button[this._currentChild.id]),c=a[e],d;do e=(e+(b?
1:a.length-1))%a.length,d=a[e];while(d.disabled&&d!=c);return d},addChild:function(b,a){this.inherited(arguments);this.ensureKeyboardNav()},removeChild:function(b){this.inherited(arguments);this.ensureKeyboardNav()},ensureKeyboardNav:function(){for(var b=this.getChildren(),a=null,e="string"==typeof this.buttonWidget?g.getObject(this.buttonWidget):this.buttonWidget,c=0;c<b.length;c++){var d=b[c];if(d instanceof e){a=d;break}}if(this._firstButton&&this._firstButton.focusNode)h.set(this._firstButton.focusNode,
"tabindex","-1"),this._firstFocus&&this._firstFocus.remove(),this._firstAspect&&this._firstAspect.remove(),this._firstFocus=this._firstButton=null;if(a&&a.focusNode){h.set(a.focusNode,"tabindex","0");this._firstFocus=n(a.focusNode,"onfocus",g.hitch(this,"onFirstButtonFocus"));if(a.onFocus)this._firstAspect=o.after(a,"onFocus",g.hitch(this,"onFirstButtonFocus"),!0);this._firstButton=a}},onAddChild:function(b){this.inherited(arguments);var a=this.pane2button[b.id];if(a){var a=a.focusNode?a.focusNode:
a.domNode,c=b.domNode;c&&a&&h.set(a,"aria-controls",c.id)}},onRemoveChild:function(b){this.inherited(arguments);this.ensureKeyboardNav()},onSelectChild:function(b){this.inherited(arguments);this._currentChild||this.ensureKeyboardNav()},onFirstButtonFocus:function(){if(!this._currentChild&&this._firstButton)this.onButtonClick(this._firstButton)},onkeypress:function(b){this.inherited(arguments)},onButtonClick:function(b){var a=null;b.page?(a=b.page,j.focus(b.focusNode)):a=b;b=this.pane2button[a.id];
j.focus(b.focusNode);this._currentChild&&this._currentChild.id===a.id&&(b=this.pane2button[a.id],b.set("checked",!0));f.byId(this.containerId).selectChild(a)}});c.ListNavButton=k;return c});