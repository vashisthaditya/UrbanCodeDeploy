//>>built
define("idx/bus/Subscriber",["dojo/_base/declare","../string"],function(c){return c("idx.bus.Subscriber",null,{subscriberScopeFilter:"",subscriberScopeRegexp:!1,constructor:function(){this._subscriptionBusHandle=this._subscriptionBusTopic=null},startup:function(){this.subscriberStartup()},_setSubscriberScopeFilterAttr:function(a){this.setSubscriberScopeFilter(a,this.subscriberScopeRegexp)},_setSubscriberScopeRegexpAttr:function(a){this.setSubscriberScopeFilter(this.subscriberScopeRegexp,a)},setSubscriberScopeFilter:function(a,
b){this.subscriberScopeFilter=idx.string.nullTrim(a);this.subscriberScopeRegexp=b;this._subscriberScopeRegexp=null!=a&&b?RegExp(a,"g"):null},subscriberStartup:function(){this.setSubscriberScopeFilter(this.subscriberScopeFilter,this.subscriberScopeRegexp);this.subscribeToBus()},subscribeToBus:function(){if(!this._subscriptionBusHandle){var a=idx.bus._getBusTopic(this);this._subscriptionBusTopic=a.topic;this._subscriptionBusHandle=dojo.subscribe(a.topic,this,this._handleAction)}},unsubscribeFromBus:function(){if(this._subscriptionBusHandle)dojo.unsubscribe(this._subscriptionBusHandle),
this._subscriptionBusTopic=this._subscriptionBusHandle=null},_getSubscribedTopic:function(){return this._subscriptionBusTopic},_handleBusMessage:function(a){if(this.subscriberScopeFilter){if(!a.scope)return;if(this._subscriberScopeRegexp){if(a.scope.match(this._subscriberScopeRegexp)!=a.scope)return}else if(a.scope!=this.subscriberScope)return}this.handleBusMessage(a)},handleBusMessage:function(){}})});