//>>built
define("idx/widget/_EventTriggerMixin","dojo/_base/array,dojo/_base/declare,dojo/_base/event,dojo/_base/lang,dojo/dom,dojo/request/iframe,dojo/mouse,dojo/on,dojo/window,dijit/_MenuBase".split(","),function(m,e,p,i,f,n,j,g,q,o){return e("idx.widget._EventTriggerMixin",null,{_bindings:null,_hoverTimer:null,hoverDuration:o.prototype.popupDelay,constructor:function(){this._bindings=[]},_addEventTrigger:function(c,d,b,e){if(c=f.byId(c)){var k=i.hitch(this,function(a){a={triggerNode:c,eventName:d,event:a,
additionalData:e};(!b||b(a))&&this._onTrigger(a)}),l=function(a){return{type:"hover",pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}},a={triggerNode:c,connectHandles:[]};if("hover"==d)a.hoverDuration=this.hoverDuration,a.hoverTimer=null;a.bindFunction=function(){var b;if("IFRAME"==c.tagName)try{var e=n.doc(c);b=e?e.body:null}catch(f){require.log("ERROR: oneui._EventTriggerMixin._addEventTrigger(): Error accessing body of document within iframe. "+
f)}else b=c;if(b)if("hover"==d){var h=null;a.connectHandles.push(g(b,j.enter,i.hitch(this,function(b){h=l(b);a.hoverTimer&&clearTimeout(a.hoverTimer);a.hoverTimer=setTimeout(function(){k(h)},a.hoverDuration)})));a.connectHandles.push(g(b,j.leave,i.hitch(this,function(){if(a.hoverTimer)clearTimeout(a.hoverTimer),a.hoverTimer=null;h=void 0})));a.connectHandles.push(g(b,"mousemove",function(a){h=l(a)}))}else a.connectHandles.push(g(b,d,function(a){k(a)}));else require.log("ERROR: oneui._EventTriggerMixin._addEventTrigger(): Unable to determine node to attach event listener(s) to.")};
a.unbindFunction=function(){m.forEach(a.connectHandles,function(a){a.remove()});if(a.hoverTimer)clearTimeout(a.hoverTimer),a.hoverTimer=null};if("IFRAME"===c.tagName)a.iframeOnLoadHandler=function(){try{a.unbindFunction()}catch(b){}a.bindFunction()},c.addEventListener?c.addEventListener("load",a.iframeOnLoadHandler,!1):c.attachEvent("onload",a.iframeOnLoadHandler);this._bindings.push(a);a.bindFunction()}else require.log("ERROR: oneui._EventTriggerMixin._addEventTrigger(): Invalid triggerNode parameter.")},
_onTrigger:function(){},_removeEventTriggers:function(c){c&&(c=f.byId(c));for(var d=this._bindings.length-1;0<=d;d--){var b=this._bindings[d];if(!c||c===b.triggerNode)b.unbindFunction(),b.iframeOnLoadHandler&&(b.triggerNode.removeEventListener?b.triggerNode.removeEventListener("load",b.iframeOnLoadHandler,!1):b.triggerNode.detachEvent("onload",b.iframeOnLoadHandler)),this._bindings.splice(d,1)}}})});