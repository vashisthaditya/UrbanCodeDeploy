//>>built
define("idx/form/_InputListMixin","dojo/_base/declare,dojo/_base/kernel,dojo/_base/lang,dojo/_base/array,dojo/_base/sniff,dojo/dom-attr,dojo/dom-class,dojo/dom-style,dojo/query,dojo/i18n,dijit/Tooltip,dijit/form/_FormValueWidget,dojo/i18n!./nls/_InputListMixin".split(","),function(l,m,g,c,i,e,j,h,k,p,d,n,o){return l("idx.form._InputListMixin",null,{instantValidate:!0,groupAlignment:"vertical",lastFocusedChild:null,postCreate:function(){this.extension={input:"onChange",blur:"_onBlur",focus:"_onFocus"};
this.instantValidate&&this.connect(this,"_onFocus",function(){""!=this.message&&this.displayMessage(this.message)});this.inherited(arguments);this.connect(this,"focusChild",function(){this.lastFocusedChild=this.focusedChild});e.set(this.stateNode,{tabIndex:-1});this.initLoaded=!0},setStore:function(a,b,f){this.inherited(arguments);this.store.fetch({query:{selected:!0},onComplete:function(a){a=c.map(a,function(a){return a.value[0]});a.length&&this.set("value",a)},scope:this})},postMixInProperties:function(){this._nlsResources=
o;this.missingMessage||(this.missingMessage=this._nlsResources.invalidMessage);this.inherited(arguments)},_fillContent:function(){var a=this.options;if(!a)a=this.options=this.srcNodeRef?k("> *",this.srcNodeRef).map(function(a){return"separator"===a.getAttribute("type")?{value:"",label:"",selected:!1,disabled:!1}:{value:a.getAttribute("data-"+m._scopeName+"-value")||a.getAttribute("value"),label:""+a.innerHTML,selected:a.getAttribute("selected")||!1,disabled:a.getAttribute("disabled")||!1}},this):
[];this.value?this.multiple&&"string"==typeof this.value&&this._set("value",this.value.split(",")):this._set("value",this._getValueFromOpts())},_setValueAttr:function(a,b){this._onChangeActive||(b=null);if(this._loadingStore)this._pendingValue=a;else{var f=this.getOptions()||[];g.isArray(a)||(a=[a]);c.forEach(a,function(b,d){g.isObject(b)||(b+="");"string"===typeof b&&(a[d]=c.filter(f,function(a){return a.value===b})[0]||{value:"",label:""})},this);a=c.filter(a,function(a){return a&&a.value});if(!this.multiple&&
(!a[0]||!a[0].value)&&f.length)a[0]=f[0];c.forEach(f,function(b){b.selected=c.some(a,function(a){return a.value===b.value})});var e=c.map(a,function(a){return a.value}),d=c.map(a,function(a){return a.label});"undefined"!=typeof e&&(this._setDisplay(this.multiple?d:d[0]),n.prototype._setValueAttr.apply(this,arguments),this._updateSelection())}},_getValueFromOpts:function(){var a=this.getOptions()||[];if(!this.multiple&&a.length){if((a=c.filter(a,function(a){return a.selected&&"false"!==a.selected})[0])&&
a.value)return a.value}else if(this.multiple)return c.map(c.filter(a,function(a){return a.selected&&"false"!==a.selected}),function(a){return a.value})||[];return""},onAfterAddOptionItem:function(){},onChange:function(){this.validate(this.focused)},reset:function(){this.inherited(arguments);d.hide(this.oneuiBaseNode);d.hide(this.iconNode)},_onMouseDown:function(a){this.mouseFocus=!0;e.set(this.domNode,"tabIndex","-1");9>i("ie")||i("quirks")?a.cancelBubble=!0:a.stopPropagation()},_onContainerFocus:function(a){a.target===
this.domNode&&(this.mouseFocus||(this.lastFocusedChild?this.focusChild(this.lastFocusedChild):this.focusFirstChild()),e.set(this.domNode,"tabIndex","-1"))},_updateSelection:function(){this._set("value",this._getValueFromOpts());var a=this.value;g.isArray(a)||(a=[a]);a&&a[0]&&c.forEach(this._getChildren(),function(b){var d=c.some(a,function(a){return b.option&&a===b.option.value});j.toggle(b.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),d)},this);e.set(this.valueNode,"value",this.value);
c.forEach(this._getChildren(),function(a){a._updateBox()})},_getChildren:function(){return this.getChildren()},invertSelection:function(){c.forEach(this.options,function(a){a.selected=!a.selected});this._updateSelection();this._handleOnChange(this.value)},_setDisabledAttr:function(a){this.inherited(arguments);a||e.remove(this.valueNode,"disabled");c.forEach(this.getChildren(),function(b){b&&b.set&&b.set("disabled",a)})},_setReadOnlyAttr:function(a){this.inherited(arguments);c.forEach(this.getChildren(),
function(b){b&&b.set&&b.set("readOnly",a)})},_setGroupAlignmentAttr:function(a){this._set("groupAlignment",a);c.forEach(this.getChildren(),function(b){j.toggle(b.domNode,"dijitInline","vertical"!=a)},this)},_setRequiredAttr:function(a){this._set("required",a);this.inherited(arguments)},_isEmpty:function(){return this.initLoaded?!1:""==this.value},_relayout:function(a){h.set(a,"zoom","1");h.set(a,"zoom","")},startup:function(){this.inherited(arguments);this.initLoaded=!1},displayMessage:function(a){d.hide(this.oneuiBaseNode);
d.hide(this.iconNode);if(a){var b="hidden"==h.set(this.iconNode,"visibility")?this.oneuiBaseNode:this.iconNode;d.show(a,b,this.tooltipPosition,!this.isLeftToRight())}},_setLabelAttr:function(a){this.compLabelNode.innerHTML=a;k(".idxLabel",this.domNode).toggleClass("dijitHidden",/^\s*$/.test(a));this._set("label",a);e.set(this.stateNode,"aria-label",a)},uninitialize:function(){d.hide(this.domNode);c.forEach(this._getChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)}})});