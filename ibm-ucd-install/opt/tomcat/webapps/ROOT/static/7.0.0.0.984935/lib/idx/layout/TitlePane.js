//>>built
define("idx/layout/TitlePane","dojo/_base/declare,dojo/_base/lang,dijit/TitlePane,./ContentPane,dijit/layout/_LayoutWidget,dojo/_base/array,dojo/on,dojo/aspect,dojo/_base/event,dojo/dom-construct,dojo/dom-class,dojo/dom-style,dojo/dom-attr,dojo/dom-geometry,dojo/query,dijit/_WidgetBase,dijit/form/Button,../util,../string,../widget/_MaximizeMixin,dojo/NodeList-dom,../ext,dijit/layout/BorderContainer".split(","),function(r,e,s,t,u,m,j,g,h,n,c,d,k,o,v,w,l,p,f,x){var q=v.NodeList;return r("idx.layout.TitlePane",
[s,t,u],{baseClass:"dijitTitlePane",idxBaseClass:"idxTitlePane",collapsible:!0,autoHideActions:!1,closable:!1,refreshable:!1,resizable:!1,resizeDuration:0,helpURL:"",defaultActionDisplay:"",constructor:function(){this._titleActions=[];this._idxStarted=this._started=this._built=!1;this._maximizeMixin=new x({inPlace:!0})},destroy:function(){this._destroyDefaultCloseButton();this._destroyDefaultRefreshButton();this._destroyDefaultResizeButton();this._destroyDefaultHelpButton();if(this._actionsLookup)for(var a in this._actionsLookup)m.forEach(this._actionsLookup[a],
function(a){a.handle&&(a.handle.remove(),delete a.handle)});m.forEach(this.getTitleActionChildren(),function(a){a.destroyRecursive()});this.inherited(arguments)},_killActionsMouseEvent:function(a){this.set("active",!1);this._setStateClass();c.remove(this.domNode,this.baseClass+"Active");c.remove(this.titleBarNode,this.baseClass+"TitleActive");a&&h.stop(a)},_killActionsKeyEvent:function(a){a&&32==a.charCode&&(this.set("active",!1),this._setStateClass(),c.remove(this.domNode,this.baseClass+"Active"),
c.remove(this.titleBarNode,this.baseClass+"TitleActive"),h.stop(a))},buildRendering:function(){this.inherited(arguments);this._titleActionsNode=n.create("div",{"class":this.idxBaseClass+"Actions"},this.focusNode);this.own(j(this._titleActionsNode,"mousedown",e.hitch(this,this._killActionsMouseEvent)));this.own(j(this._titleActionsNode,"click",e.hitch(this,this._killActionsMouseEvent)));this.own(j(this._titleActionsNode,"dblclick",e.hitch(this,this._killActionsMouseEvent)));this.own(j(this._titleActionsNode,
"keypress",e.hitch(this,this._killActionsKeyEvent)));this.own(j(this._titleActionsNode,"keydown",e.hitch(this,this._killActionsKeyEvent)));this.own(g.after(this._maximizeMixin,"_restore",e.hitch(this,this._onRestore),!0));var a=this.id+"_titleNode";k.has(this.titleNode,"id")?a=k.get(this.titleNode,"id"):k.set(this.titleNode,"id",a);k.has(this.containerNode,"aria-labelledby")||k.set(this.containerNode,"aria-labelledby",a);c.add(this.domNode,this.idxBaseClass);this._built=!0;this._updateCollapsibility();
this._updateActionHiding();this._setupNodes()},postMixInProperties:function(){this.inherited(arguments);this._setupMaximizeAnimation()},_setupNodes:function(){if(this._built)this._regionLookup={body:this.containerNode,titleActions:this._titleActionsNode},this._actionsLookup={titleActions:this._titleActions}},postCreate:function(){this.inherited(arguments);d.set(this._titleActionsNode,"width","auto")},toggle:function(){(this.collapsible||!this.open)&&!this._refreshing&&this.inherited(arguments)},_setCollapsibleAttr:function(a){this.collapsible=
a;this._updateCollapsibility()},_updateCollapsibility:function(){this._built&&(this.collapsible?c.remove(this.titleBarNode,this.idxBaseClass+"NoCollapse"):c.add(this.titleBarNode,this.idxBaseClass+"NoCollapse"),this.collapsible||this.toggle())},_setAutoHideActionsAttr:function(a){this.autoHideActions=a;this._updateActionHiding()},_updateActionHiding:function(){this._built&&(this.autoHideActions?c.add(this.domNode,this.idxBaseClass+"AutoHide"):c.remove(this.domNode,this.idxBaseClass+"AutoHide"))},
_setDefaultActionDisplayAttr:function(a){this.defaultActionDisplay=a;this._closeButton&&this._closeButton.set("displayMode",this.defaultActionDisplay);this._refreshButton&&this._refreshButton.set("displayMode",this.defaultActionDisplay);this._resizeButton&&this._resizeButton.set("displayMode",this.defaultActionDisplay);this._helpButton&&this._helpButton.set("displayMode",this.defaultActionDisplay);this.resize()},_setClosableAttr:function(a){var b=this.closable;this.closable=a;this._idxStarted&&b!=
this.closable&&(this.closable?this._createDefaultCloseButton():this._destroyDefaultCloseButton())},_setRefreshableAttr:function(a){var b=this.refreshable;this.refreshable=a;this._idxStarted&&b!=this.refreshable&&(this.refreshable?this._createDefaultRefreshButton():this._destroyDefaultRefreshButton())},_setResizableAttr:function(a){var b=this.resizable;this.resizable=a;this._idxStarted&&b!=this.resizable&&(this.resizable?this._createDefaultResizeButton():(this._destroyDefaultResizeButton(),this._maximized&&
this._restorePane()))},_setResizeDurationAttr:function(a){this.resizeDuration=a;this._setupMaximizeAnimation()},_setupMaximizeAnimation:function(){0<this.resizeDuration?(this._maximizeMixin.useAnimation=!0,this._maximizeMixin.duration=this.resizeDuration):(this._maximizeMixin.useAnimation=!1,this._maximizeMixin.duration=0)},_setHelpURLAttr:function(a){var b=this.helpURL;this.helpURL=a;this._idxStarted&&(a=f.nullTrim(b)?!1:!0,b=f.nullTrim(this.helpURL)?!1:!0,a!=b&&(b?this._destroyDefaultHelpButton():
this._createDefaultHelpButton()))},_createDefaultCloseButton:function(){if(!this._closeButton)this._closeButton=new l({buttonType:"close",placement:"toolbar",region:"titleActions",displayMode:this.defaultActionDisplay}),this._closeHandle&&(this._closeHandle.remove(),delete this._closeHandle),this._closeHandle=g.after(this._closeButton,"onClick",e.hitch(this,"_closePane"),!0),this.addChild(this._closeButton),this._idxStarted&&this._closeButton.startup()},_destroyDefaultCloseButton:function(){this._closeHandle&&
(this._closeHandle.remove(),delete this._closeHandle);this._closeButton&&(this.removeChild(this._closeButton),this._closeButton.destroyRecursive(),delete this._closeButton)},_createDefaultRefreshButton:function(){if(!this._refreshButton)this._refreshButton=new l({buttonType:"refresh",placement:"toolbar",region:"titleActions",displayMode:this.defaultActionDisplay}),this._refreshHandle&&(this._refreshHandle.remove(),delete this._refreshHandle),this._refreshHandle=g.after(this._refreshButton,"onClick",
e.hitch(this,"refreshPane"),!0),this.addChild(this._refreshButton),this._idxStarted&&this._refreshButton.startup()},_destroyDefaultRefreshButton:function(){this._refreshHandle&&(this._refreshHandle.remove(),delete this._refreshHandle);this._refreshButton&&(this.removeChild(this._refreshButton),this._refreshButton.destroyRecursive(),delete this._refreshButton)},_createDefaultResizeButton:function(){if(!this._resizeButton)this._resizeButton=new l({buttonType:"maxRestore",placement:"toolbar",region:"titleActions",
displayMode:this.defaultActionDisplay}),this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle),this._resizeHandle=g.after(this._resizeButton,"onButtonTypeClick",e.hitch(this,"_resizePane"),!0),this.addChild(this._resizeButton),this._idxStarted&&this._resizeButton.startup()},_destroyDefaultResizeButton:function(){this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._resizeButton&&(this.removeChild(this._resizeButton),this._resizeButton.destroyRecursive(),
delete this._resizeButton)},_createDefaultHelpButton:function(){if(!this._helpButton)this._helpButton=new l({buttonType:"help",placement:"toolbar",region:"titleActions",displayMode:this.defaultActionDisplay}),this._helpHandle&&(this._helpHandle.remove(),delete this._helpHandle),this._helpHandle=g.after(this._helpButton,"onClick",e.hitch(this,"_displayHelp"),!0),this.addChild(this._helpButton),this._idxStarted&&this._helpButton.startup()},_destroyDefaultHelpButton:function(){this._helpHandle&&(this._helpHandle.remove(),
delete this._helpHandle);this._helpButton&&(this.removeChild(this._helpButton),this._helpButton.destroyRecursive(),delete this._helpButton)},startup:function(){this._started||this.inherited(arguments);if(!this._idxStarted)this._idxStarted=!0,this._href&&this.set("href",this._href),(this._isShown()||this.preload)&&this._onShow(),m.forEach(this.getChildren(),this._setupChild,this),this.refreshable&&this._createDefaultRefreshButton(),f.nullTrim(this.helpURL)&&this._createDefaultHelpButton(),this.resizable&&
this._createDefaultResizeButton(),this.closable&&this._createDefaultCloseButton(),this.resize()},_removeDefaultButtons:function(a){if(this._restoringDefaultButtons)return!1;var b=!1;this._closeButton&&a!=this._closeButton&&(this.removeChild(this._closeButton),b=!0);this._resizeButton&&a!=this._resizeButton&&(this.removeChild(this._resizeButton),b=!0);this._helpButton&&a!=this._helpButton&&(this.removeChild(this._helpButton),b=!0);this._refreshButton&&a!=this._refreshButton&&(this.removeChild(this._refreshButton),
b=!0);return b},_restoreDefaultButtons:function(){if(!this._restoringDefaultButtons)this._restoringDefaultButtons=!0,this._refreshButton&&this.addChild(this._refreshButton),this._helpButton&&this.addChild(this._helpButton),this._resizeButton&&this.addChild(this._resizeButton),this._closeButton&&this.addChild(this._closeButton),this._restoringDefaultButtons=!1},addChild:function(a,b){var i=this._removeDefaultButtons(a);(!this._isDefaultButton(a)||!i)&&this.inherited(arguments);i&&this._restoreDefaultButtons(a);
this.resize()},_isDefaultButton:function(a){return a==this._closeButton||a==this._resizeButton||a==this._refreshButton||a==this._helpButton},removeChild:function(a){for(var b=0,i=-1,d=null,b=0;b<this._titleActions.length;b++)if(a===this._titleActions[b].widget){var i=b,d=this._titleActions,c=this._titleActions[b].handle;c&&(c.remove(),delete this._titleActions[b].handle);break}0<=i&&d.splice(i,1);this.inherited(arguments);if(a&&a==this._enhancedTitle)this._internalSet=!0,this.set("title",""),this._internalSet=
!1;this.resize()},_setupChild:function(a){this.inherited(arguments);var b=f.nullTrim(a.get("region"));if("title"==b)this.set("title",a);else{var d=null;if(null==b||0==b.length)b="body";var c=this._regionLookup[b],d=this._actionsLookup[b];if(null==c)c=this._regionLookup.body,d=null;c!=this.containerNode&&((new q(a.domNode)).orphan(),n.place(a.domNode,c,"last"),b=null,a.onResize&&(b=g.after(a,"onResize",e.hitch(this,"resize"),!0)),d.push({widget:a,handle:b}))}},getTitleActionChildren:function(){for(var a=
[],b=0;b<this._titleActions.length;b++)a.push(this._titleActions[b].widget);return a},layout:function(){this._checkIfSingleChild();this.inherited(arguments)},_checkIfSingleChild:function(){this.inherited(arguments)},resize:function(a,b){if(this._idxStarted){this.inherited(arguments);d.set(this.titleNode,{width:"auto",height:"auto"});d.set(this._titleActionsNode,{width:"auto",height:"auto"});var e=p.getStaticSize(this.titleNode),f=p.getStaticSize(this._titleActionsNode),e=e.h>f.h?e.h:f.h;d.set(this.titleNode,
{width:"auto",height:"auto"});d.set(this._titleActionsNode,{width:"auto",height:"auto"});d.set(this.focusNode,{height:e+"px"});this.open&&this._singleChild&&this._singleChild.resize&&(this._singleChild.resize({w:o.getContentBox(this.containerNode).w}),c.add(this._singleChild.domNode,this.baseClass+"-onlyChild"))}},_onShow:function(){this._idxStarted&&this.inherited(arguments)},_setHrefAttr:function(a){this._idxStarted?(this._href=null,this.href!=a&&this.inherited(arguments)):this._href=a},set:function(a,
b){!this._internalSet&&"title"==a?this._setTitleObject(b):this.inherited(arguments)},get:function(a){return!this._internalGet&&"title"==a&&this._enhancedTitle?this._enhancedTitle:this.inherited(arguments)},_setTitleObject:function(a){this._enahncedTitle&&(this.removeChild(this._enhancedTitle),this._enhancedTitle.destroyRecursive?this._enhancedTitle.destroy():this._enhancedTitle.destroy&&this._enhancedTitle.destroyRecursive());this.titleNode.innerHTML="";if("object"!=p.typeOfObject(a))this._internalSet=
!0,this.set("title",""+a),this._internalSet=!1,this._enhancedTitle=null;else{this._enhancedTitle=a;var b=null,b=a instanceof w?a.domNode:a;(new q(b)).orphan();n.place(b,this.titleNode,"last");this.resize()}},_closePane:function(a){a&&h.stop(a);this.onClose();this.destroyRecursive()},onRefresh:function(){},refreshPane:function(a){a&&h.stop(a);a=this.get("href");if(f.nullTrim(a)){var b=o.getContentBox(this.containerNode);d.set(this.containerNode,{height:""+b.h+"px"});this._refreshing=!0;b=this.refresh();
this.onRefresh(this,a,b)}else this.onRefresh(this)},onDownloadEnd:function(){this.inherited(arguments);this._refreshing=!1;d.set(this.containerNode,{height:null});this.resize()},onDownloadError:function(){this.inherited(arguments);this._refreshing=!1;d.set(this.containerNode,{height:null});this.resize()},_resizePane:function(a,b){a&&h.stop(a);switch(b){case "maximize":this.maximizePane();break;case "restore":this.restorePane()}return!1},maximizePane:function(a){if(!a)a=this.domNode.parentNode;if(a){var b=
this.domNode.style.position;this._restorePosition=f.nullTrim(b)?b:"";this._restoreCollapse=this.get("collapsible");this.set("collapsible",!1);switch(b){case "absolute":break;default:d.set(this.domNode,{position:"relative"})}b=o.getMarginBox(this.titleBarNode);this._maximizeMixin.maximize(this.domNode,a);this._maximized=!0;d.set(this.hideNode,{position:"absolute",top:""+b.h+"px",left:"0px",right:"0px",bottom:"0px"});c.remove(this.titleBarNode,"dijitTitlePaneTitleHover");this._resizeButton&&(this._resizeButton.set("hovering",
!1),this._resizeButton.set("active",!1));this.onMaximize()}},restorePane:function(){this._maximized&&this._maximizeMixin.restore()},_onRestore:function(){d.set(this.hideNode,{position:"",top:"",left:"",right:"",bottom:""});d.set(this.domNode,{position:this._restorePosition});this.set("collapsible",this._restoreCollapse);this._maximized=!1;c.remove(this.titleBarNode,"dijitTitlePaneTitleHover");this._resizeButton&&(this._resizeButton.set("hovering",!1),this._resizeButton.set("active",!1));this.onRestore()},
onMaximize:function(){},onRestore:function(){},_displayHelp:function(a){a&&h.stop(a);if(f.nullTrim(this.helpURL))if(!this._helpWindow||this._helpWindow.closed)this._openNewHelpWindow();else try{this._helpWindow.location.assign(this.helpURL),this._helpWindow.focus()}catch(b){this._openNewHelpWindow()}},_openNewHelpWindow:function(){if(f.nullTrim(this.helpURL)&&(this._helpWindow=window.open(this.helpURL,"_blank"),0==this.helpURL.indexOf("http://")||0==this.helpURL.indexOf("https://")))this._helpWindow=
null}})});