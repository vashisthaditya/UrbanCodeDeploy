//>>built
require({cache:{"url:idx/app/templates/A11yPrologue.html":'<div class="${baseClass}">\r\n<p data-dojo-attach-point="shortcutListMsgNode"></p>\r\n<ul data-dojo-attach-point="shortcutListNode">\r\n<li data-dojo-attach-point="_prologueShortcut"></li>\r\n</ul>\r\n</div>'}});
define("idx/app/A11yPrologue","dojo/_base/declare,dijit/_Widget,dijit/_TemplatedMixin,dojo/_base/lang,dojo/aspect,dojo/on,dojo/string,dojo/_base/event,dojo/dom,dojo/dom-attr,dojo/dom-construct,dijit/_base/manager,dijit/focus,dijit/a11y,dijit/layout/StackContainer,../string,../util,../resources,dojo/text!./templates/A11yPrologue.html,dojo/i18n!../nls/base,dojo/i18n!./nls/base,dojo/i18n!./nls/A11yPrologue".split(","),function(u,n,v,o,B,t,s,k,p,i,q,l,w,x,y,g,m,z,A){return u("idx.app.A11yPrologue",[n,
v],{prologueAccessKey:"0",a11yStatementURL:"",a11yStatementAccessKey:"1",mainNode:"",mainAccessKey:"2",navigationNode:"",navigationAccessKey:"3",bannerNode:"",bannerAccessKey:"4",externalLinksInOwnWindow:!0,baseClass:"idxA11yPrologue",templateString:A,resources:null,constructor:function(a,b){this.domNode=b;this.ctorArgs=a;this._nextShortcutID=this._nextNodeID=0;this._bannerNode=this._navigationNode=this._mainNode=null;this._linkHandles={};this._shortcutHandles={};this._shortcutsByID={};this._shortcuts=
[];this._magicNumber=Math.floor(1E6*Math.random())},destroy:function(){for(var a in this._linkHandles){var b=this._linkHandles[a];b&&b.remove();delete this._linkHandles[a]}for(var c in this._shortcutHandles)(b=this._shortcutHandles[c])&&b.remove(),delete this._shortcutHandles[c];this.inherited(arguments)},postMixInProperties:function(){this.inherited(arguments);if(!this._rawResources)this._rawResources=null,this._resetResources()},_getKeySequenceMessage:function(a){if(!a)return null;var b="${accessKey}";
if(m.isIE)b=this._resources.keySequence_InternetExplorer;else if(m.isFF)b=this._resources.keySequence_Firefox;else if(m.isSafari)b=this._resources.keySequence_Safari;else if(m.isChrome)b=this._resources.keySequence_Chrome;return s.substitute(b,{accessKey:a.toUpperCase()})},_setResourcesAttr:function(a){this.resources=a;this._resetResources()},_getResourcesAttr:function(){return this._resources},_resetResources:function(){var a=z.getResources("idx/app/A11yPrologue",this.lang);if(this.resources){var b=
{};o.mixin(b,a);o.mixin(b,this.resources);this._resources=b}else this._resources=a;this._started&&this._reformat()},_reformat:function(){if(this.shortcutListMsgNode)this.shortcutListMsgNode.innerHTML=this._resources.shortcutListMessage;this._setupLinks();this._setupShortcuts()},startup:function(){if(!this._started){this.inherited(arguments);this._started=!0;var a=i.get(this.domNode,"id");g.nullTrim(a)||i.set(this.domNode,"id",this.id);this._resetResources()}},addShortcut:function(a,b,c){var d=null;
"string"==m.typeOfObject(a)?(d=p.byId(a))&&(a=d):d=a;d&&!c&&(c=this._getExistingAccessKey(d));d=this.id+"_shortcut_"+this._nextShortcutID++;a={shortcutID:d,target:a,accessKey:c,description:b};this._shortcuts.push(a);this._shortcutsByID[d]=a;a.itemNode=this._setupShortcut(a.target,a.accessKey,a.description,null,this._prologueShortcut,"before",a.shortcutID);return d},removeShortcut:function(a){if(this._shortcutsByID[a]){for(var b=-1,c=0;c<this._shortcuts.length;c++){var d=this._shortcuts[c];if(d.shortcutID==
a){b=c;break}}0<=b&&this._shortcuts.splice(b,1);this._shortcutsByID[a]=null;if(b=this._shortcutHandles[a])b.remove(),delete this._shortcutHandles[a];d.itemNode=this._setupShortcut(null,d.accessKey,d.description,d.itemNode,this._prologueShortcut,"before",d.shortcutID)}},_setA11yStatementURLAttr:function(a){this.a11yStatementURL=a;this._setupStatementShortcut()},_setA11yStatementAccessKeyAttr:function(a){this.a11yStatementAccessKey=a;this._setupStatementShortcut()},_setMainAccessKeyAttr:function(a){this.mainAccessKey=
a;this._setupMainLink();this._setupMainShortcut()},_setNavigationAccessKeyAttr:function(a){this.navigationAccessKey=a;this._setupNavigationLink();this._setupNavigationShortcut()},_setBannerAccessKeyAttr:function(a){this.bannerAccessKey=a;this._setupBannerLink();this._setupBannerShortcut()},_generateNodeID:function(){return this.id+"_id_"+Math.floor(1000000001*Math.random())+"_"+this._nextNodeID++},_resolveNode:function(a){var b=null,c=null;if("string"==m.typeOfObject(a)){c=a;if(!g.nullTrim(c))return null;
b=p.byId(c);if(!b)throw Error("Could not find node for ID: "+c);}else b=a,c=b.id,g.nullTrim(c)||(c=this._generateNodeID(),i.set(b,"id",c));a={node:b,nodeID:c};if(b&&(c=l.getEnclosingWidget(b))&&c.domNode==b)a.widget=c;return a},_focusNode:function(a,b){if(!a)return!0;var c=null;if(a instanceof n)c=a.domNode;else if("string"!=m.typeOfObject(a))c=a;else if(c=p.byId(a),!c){var d=l.byId(a);if(d)c=d.domNode}if(!c)return!0;w.focus(c);c=!x.isTabNavigable(c);!c&&b&&k.stop(b);return c},_focusWidget:function(a,
b){if(!a)return!0;var c=null;if(a instanceof n)c=a;else if("string"==m.typeOfObject(a)&&(c=l.byId(a)),!c){var d=a;if("string"==m.typeOfObject(a)&&(d=p.byId(a),b&&k.stop(b),!d))return!1;c=l.getEnclosingWidget(d);if(!c||c.domNode!=d)return c=this._focusNode(a),!c&&b&&k.stop(b),c}c.get("id");if(c instanceof y&&(d=c.get("selectedChildWidget"))&&d.domNode)return c=this._focusWidget(d.domNode),!c&&b&&k.stop(b),c;if(!c.isFocusable())return c=this._focusNode(c.domNode),!c&&b&&k.stop(b),c;if(c.focus)return c.focus(),
b&&k.stop(b),!1;if(c.focusNode)return this._focusNode(c.focusNode),b&&k.stop(b),!1;this._focusNode(c.domNode);b&&k.stop(b);return!1},_setMainNodeAttr:function(a){var b=this._resolveNode(a);b?(this._mainNode=b.node,this.mainNode=a,a=i.get(this._mainNode,"accessKey"),g.nullTrim(a)&&this.set("mainAccessKey",g.nullTrim(a))):(this.mainNode=a,this._mainNode=null);this._setupMainLink();this._setupMainShortcut()},_setNavigationNodeAttr:function(a){var b=this._resolveNode(a);b?(this._navigationNode=b.node,
this.navigationNode=a,a=i.get(this._navigationNode,"accessKey"),g.nullTrim(a)&&this.set("navigationAccessKey",g.nullTrim(a))):(this.navigationNode=a,this._navigationNode=null);this._setupNavigationLink();this._setupNavigationShortcut()},_setBannerNodeAttr:function(a){var b=this._resolveNode(a);b?(this._bannerNode=b.node,this.bannerNode=a,a=i.get(this._bannerNode,"accessKey"),g.nullTrim(a)&&this.set("bannerAccessKey",g.nullTrim(a))):(this.bannerNode=a,this._bannerNode=null);this._setupBannerLink();
this._setupBannerShortcut()},_setupLinks:function(){this._setupMainLink();this._setupNavigationLink();this._setupBannerLink()},_setupShortcuts:function(){this._setupPrologueShortcut();this._setupStatementShortcut();this._setupMainShortcut();this._setupNavigationShortcut();this._setupBannerShortcut();for(var a=0;a<this._shortcuts;a++){var b=this._shortcuts[a];this._setupShortcut(b.target,b.accessKey,b.description,b.itemNode,this._prologueShortcut,"before",b.shortcutID)}},_getExistingAccessKey:function(a){var b=
i.get(a,"accessKey");if(g.nullTrim(b))return b;b=l.getEnclosingWidget(a);return!b||b.domNode!=a||!b.focusNode?null:b=i.get(b.focusNode,"accessKey")},_setupLink:function(a,b,c,d,f,e,j){if(this._started){if(b){var h=this._resolveNode(b);f||(f=q.create("DIV"),q.place(f,e,j));e=h.nodeID;j="";b=this._getExistingAccessKey(b);g.nullTrim(c)&&c!=g.nullTrim(b)&&(j=" accessKey='"+c+"'");c=null;c=h.widget?o.hitch(this,"_focusWidget",e):o.hitch(this,"_focusNode",e);h=this._generateNodeID();d=s.substitute("<a id='${nodeID}' href='#${location}' ${accessKeyAttr}>"+
this._resources.skipToLocationMessage+"</a>",{nodeID:h,location:e,accessKeyAttr:j,description:d});f.innerHTML=d;d=p.byId(h);if(h=this._linkHandles[a])h.remove(),delete this._linkHandles[a];d&&(h=t(d,"click",c),this._linkHandles[a]=h)}else{if(h=this._linkHandles[a])h.remove(),delete this._linkHandles[a];f&&(q.destroy(f),f=null)}return f}},_setupShortcut:function(a,b,c,d,f,e,j){if(this._started){if(a){d||(d=q.create("LI"),q.place(d,f,e));var h=m.typeOfObject(a),e="string"==h?"external":"internal",k=
null!=a&&(a==this._mainNode||a==this._navigationNode||a==this._bannerNode),i=g.nullTrim(b)?"Key":"",f=this._resources["shortcut"+i+"Message_"+e],f=i?"external"==e?f.replace("${description}","<a href='${location}' ${accessKeyAttr} ${targetWindowAttr}>${description}</a>"):f.replace("${description}","<a id='${nodeID}' href='#${location}' ${accessKeyAttr}>${description}</a>"):"external"==e?"<a href='${location}' ${targetWindowAttr}>"+f+"</a>":"<a id='${nodeID}' href='#${location}'>"+f+"</a>",i=this._getKeySequenceMessage(b),
l=a,e=null,r="";"string"!=h?(e=this._resolveNode(a),l=e.nodeID,e=e.widget?o.hitch(this,"_focusWidget",l):o.hitch(this,"_focusNode",l)):(r="_blank",j&&(r=j+"_"+this._magicNumber),r="target='"+r+"'");var n="";g.nullTrim(b)&&("string"==h?g.nullTrim(b)&&(n=" accessKey='"+b+"'"):(a=this._getExistingAccessKey(a),!k&&b!=g.nullTrim(a)&&(n=" accessKey='"+b+"'")));b=this._generateNodeID();c=s.substitute(f,{nodeID:b,keySequence:i,location:l,accessKeyAttr:n,targetWindowAttr:r,description:c});d.innerHTML=c;c=
p.byId(b);if(b=this._shortcutHandles[j])b.remove(),delete this._shortcutHandles[j];c&&e&&(b=t(c,"click",e),this._shortcutHandles[j]=b)}else{if(b=this._shortcutHandles[j])b.remove(),delete this._shortcutHandles[j];d&&(q.destroy(d),d=null)}return d}},_setupPrologueShortcut:function(){if(this._started)this._prologueShortcut=this._setupShortcut(this.domNode,this.prologueAccessKey,this._resources.a11yPrologueLabel,this._prologueShortcut,this.shortcutListNode,"last",this.id+"_prologue")},_setupStatementShortcut:function(){if(this._started)this._stmtShortcut=
this._setupShortcut(this.a11yStatementURL,this.a11yStatementAccessKey,this._resources.a11yStatementLabel,this._stmtShortcut,this.shortcutListNode,"first",this.id+"_a11yStatement")},_setupMainLink:function(){if(this._started)this._mainLink=this._setupLink("main",this._mainNode,this.mainAccessKey,this._resources.a11yMainContentAreaName,this._mainLink,this.domNode,"first")},_setupMainShortcut:function(){if(this._started){var a=this._stmtShortcut,b="after";if(!a)a=this.shortcutListNode,b="first";this._mainShortcut=
this._setupShortcut(this._mainNode,this.mainAccessKey,this._resources.a11yMainContentAreaName,this._mainShortcut,a,b,this.id+"_main")}},_setupNavigationLink:function(){if(this._started){var a=this._mainLink,b="after";if(!a)a=this.domNode,b="first";this._navigationLink=this._setupLink("navigation",this._navigationNode,this.navigationAccessKey,this._resources.a11yNavigationAreaName,this._navigationLink,a,b)}},_setupNavigationShortcut:function(){if(this._started){var a=this._mainShortcut,b="after";if(!a)a=
this._stmtShortcut;if(!a)a=this.shortcutListNode,b="first";this._navigationShortcut=this._setupShortcut(this._navigationNode,this.navigationAccessKey,this._resources.a11yNavigationAreaName,this._navigationShortcut,a,b,this.id+"_nav")}},_setupBannerLink:function(){if(this._started)this._bannerLink=this._setupLink("banner",this._bannerNode,this.bannerAccessKey,this._resources.a11yBannerAreaName,this._bannerLink,this.shortcutListMsgNode,"before")},_setupBannerShortcut:function(){if(this._started){var a=
this._navigationShortcut,b="after";if(!a)a=this._mainShortcut;if(!a)a=this._stmtShortcut;if(!a)a=this.shortcutListNode,b="first";this._bannerShortcut=this._setupShortcut(this._bannerNode,this.bannerAccessKey,this._resources.a11yBannerAreaName,this._bannerShortcut,a,b,this.id+"_banner")}}})});