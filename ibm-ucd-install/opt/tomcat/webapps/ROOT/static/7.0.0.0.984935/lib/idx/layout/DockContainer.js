//>>built
define("idx/layout/DockContainer","dojo/_base/declare,dojo/_base/lang,dojo/_base/array,dojo/_base/window,dojo/_base/html,dojo/_base/event,dojo/_base/connect,dojo/keys,dijit/registry,idx/html,idx/util,idx/layout/BorderContainer".split(","),function(g,k,e,h,c,l,m,n,i,o,p,j){return g("idx.layout.DockContainer",[j],{design:"sidebar",_topZ:50,delay:10,topicId:"",buildRendering:function(){this.inherited(arguments);this.topicId=this.topicId||this.id},startup:function(){if(!this._started){this.inherited(arguments);
this.subscribe(this.topicId+"/idx/move/start","_onChildMoveStart");this.subscribe(this.topicId+"/idx/move","_onChildMove");this.subscribe(this.topicId+"/idx/move/end","_onChildMoveEnd");this._startupFloatingChildren();var a=this.getChildren();e.forEach(a,function(a){var d=a.get("region"),c=a.getChildren?a.getChildren():[];d&&0==c.length&&a.get("collapseEmpty")&&this.collapse(d)},this)}},layout:function(){this.inherited(arguments);var a=c.marginBox(this.domNode);this._dockWidth=a.w;this._dockHeight=
a.h},getChildren:function(a){var b=this.inherited(arguments);return e.filter(b,function(b){return b.region||a})},addChild:function(a){this.inherited(arguments);a.dockArea&&(a.set("dockArea","float"),c.style(a.domNode,"position","absolute"),c.style(a.domNode,"zIndex",this._topZ++))},_startupFloatingChildren:function(){var a=this.getChildren(!0);e.forEach(a,function(a){a.region||a.startup()},this)},_onChildDocked:function(){c.toggleClass(this.domNode,"idxDockableDocked",!1);c.toggleClass(this.domNode,
"idxDockableFloating",!0);this.domNode.appendChild(this.domNode)},_contains:function(a,b){return a==b?!0:c.isDescendant(b,a)},_onChildMoveStart:function(a){a=a.content;if(-1==e.indexOf(this.domNode.childNodes,a.domNode)){if(a.getParent)this._currentDockArea=a.getParent();this.domNode.appendChild(a.domNode);a.focusNode&&a.focusNode.focus()}c.style(a.domNode,"zIndex",this._topZ++);this._rootPos=c.position(this.domNode);var b=this._getChildPane("center");if(b)this._centerPos=c.position(b.domNode);a.layoutAlign&&
this._clearLayoutAlign(a)},_getChildPane:function(a){var b;e.some(this.getChildren(),function(d){if(d.region==a)return b=d,!0});return b},_clearLayoutAlign:function(a){delete a.layoutAlign;c.removeClass(a.domNode,"dijitAlignLeft");c.removeClass(a.domNode,"dijitAlignRight");c.removeClass(a.domNode,"dijitAlignTop");c.removeClass(a.domNode,"dijitAlignBottom");c.removeClass(a.domNode,"dijitAlignClient")},_onChildMove:function(a){var b=a.event;this._collisionCheck({x:b.clientX,y:b.clientY},a.content)},
_onChildMoveEnd:function(a){this._currentDockArea&&this._currentDockArea.dock(a.content,{x:a.event.clientX,y:a.event.clientY})},_collisionCheck:function(a,b){var d=this._centerPos;a.x<d.x+5?this._showDockArea(a,"left",b):a.x>d.x+d.w-5?this._showDockArea(a,"right",b):a.y<d.y+5?this._showDockArea(a,"top",b):a.y>d.y+d.h-5?this._showDockArea(a,"bottom",b):this._resetDockArea()},_resetDockArea:function(){if(this._currentDockArea){this._currentDockArea.resetDockArea();var a=this._currentDockArea;0==a.getChildren().length&&
a.get("collapseEmpty")&&this.collapse(this._currentRegion);this._currentRegion=this._currentDockArea=null}},_showDockArea:function(a,b,d){var c=this._getChildPane(b);if(c&&c.showDockArea)this._currentRegion!=b&&(this._resetDockArea(),c.get("collapseEmpty")&&0==c.getChildren().length&&this.restore(b)),c.showDockArea(a,d),this._currentRegion=b,this._currentDockArea=c},_getParentWidget:function(a){for(var b=a.domNode;b!=h.body();){var b=b.parentNode,c=i.byNode(b);if(c&&c.get("region"))for(var e=c.getChildren?
c.getChildren():[],f=0;f<e.length;f++)if(e[f]==a)return c}}})});